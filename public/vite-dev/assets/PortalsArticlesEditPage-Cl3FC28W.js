import{_ as V,a as N,o as j,c,r as g,K as b}from"./_plugin-vue_export-helper-n_vHXFlc.js";import{u as I,ah as k}from"./Validators-0vUS0OnA.js";import{b as B,u as L,c as A}from"./useBranding-C51QoB-t.js";import{a as x,u as w}from"./index-CQMLlWJA.js";import{bU as C}from"./DashboardIcon-CCM-1oGA.js";import{e as U}from"./dashboard-DaT-cgYc.js";import{A as H}from"./ArticleEditor-Du88cCHc.js";import"./index-DN3rM4CW.js";import"./_commonjsHelpers-BosuxZz1.js";import"./utils.esm-CMazHLgs.js";import"./js.cookie-Cz0CWeBA.js";import"./index-UYK3fwMr.js";import"./Icon-D1o1yyYK.js";import"./index-DzK6ljgP.js";import"./typing-Dhk99rRl.js";import"./vue-dompurify-html-CEAHYyWB.js";import"./useKeyboardNavigableList-B1kK16iE.js";import"./helper-BVTgYTlr.js";import"./module-WEXc1Yw_.js";import"./BarChart-BLu1KVZQ.js";import"./constants-lVAyZKq6.js";import"./IframeLoader-DfGHvGaO.js";import"./HelpCenterLayout-CP5dHFgN.js";const K={__name:"PortalsArticlesEditPage",setup(D,{expose:v}){v();const r=I(),e=k(),l=B(),{t:m}=L(),{articleSlug:n,portalSlug:o}=r.params,f=A("articles/articleById"),u=c(()=>f.value(n)),E=A("portals/portalBySlug"),S=c(()=>E.value(o)),d=g(!1),_=g(!1),y=c(()=>{var p;const{slug:t,locale:a}=u.value.category,{slug:s}=u.value,i=(p=S.value)==null?void 0:p.custom_domain;return U(o,t,a,s,i)}),P=async({...t},a=!1)=>{const s=a?"articles/updateAsync":"articles/update";d.value=!0;try{await l.dispatch(s,{portalSlug:o,articleId:n,...t}),_.value=!0}catch(i){const p=(i==null?void 0:i.message)||m("HELP_CENTER.EDIT_ARTICLE_PAGE.API.ERROR");w(p)}finally{setTimeout(()=>{d.value=!1,_.value=!0},1500)}},G=async({...t})=>{P({...t},!0)},R=c(()=>r.name==="portals_categories_articles_index"||r.name==="portals_categories_articles_edit"||r.name==="portals_categories_index"),M=()=>{const{tab:t,categorySlug:a,locale:s}=r.params;R.value?e.push({name:"portals_categories_articles_index",params:{categorySlug:a,locale:s}}):e.push({name:"portals_articles_index",params:{tab:t,categorySlug:a,locale:s}})},T=()=>{l.dispatch("articles/show",{id:n,portalSlug:o})},O=()=>{var t;window.open(y.value,"_blank"),x(C.PREVIEW_ARTICLE,{status:(t=u.value)==null?void 0:t.status})};b(T);const h={route:r,router:e,store:l,t:m,articleSlug:n,portalSlug:o,articleById:f,article:u,portalBySlug:E,portal:S,isUpdating:d,isSaved:_,articleLink:y,saveArticle:P,saveArticleAsync:G,isCategoryArticles:R,goBackToArticles:M,fetchArticleDetails:T,previewArticle:O,ref:g,computed:c,onMounted:b,get useRoute(){return I},get useRouter(){return k},get useI18n(){return L},get useAlert(){return w},get useTrack(){return x},get PORTALS_EVENTS(){return C},get buildPortalArticleURL(){return U},get useStore(){return B},get useMapGetter(){return A},ArticleEditor:H};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}};function W(D,v,r,e,l,m){return j(),N(e.ArticleEditor,{article:e.article,"is-updating":e.isUpdating,"is-saved":e.isSaved,onSaveArticle:e.saveArticle,onSaveArticleAsync:e.saveArticleAsync,onPreviewArticle:e.previewArticle,onGoBack:e.goBackToArticles},null,8,["article","is-updating","is-saved"])}const _e=V(K,[["render",W],["__file","/app/app/javascript/dashboard/routes/dashboard/helpcenter/pages/PortalsArticlesEditPage.vue"]]);export{_e as default};
