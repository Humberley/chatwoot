import{_ as I,n as c,o as s,p as r,g as i,e as h,t as w,F as G,j as M,a as O,l as j,c as P,b as R,r as T}from"./_plugin-vue_export-helper-n_vHXFlc.js";import{bM as W}from"./DashboardIcon-CCM-1oGA.js";import{u as C,ah as A}from"./Validators-0vUS0OnA.js";import{u as N,b as B,c as S}from"./useBranding-C51QoB-t.js";import{r as D,s as V,P as Y}from"./dashboard-DaT-cgYc.js";import{B as U}from"./index-UYK3fwMr.js";import{A as q}from"./index-DzK6ljgP.js";const E="portals_articles_index",z="portals_categories_index",J={__name:"PortalSwitcher",emits:["close","createPortal"],setup(g,{expose:a,emit:l}){a();const e=l,{t:m}=N(),u=C(),t=A(),o=B(),p=["portals_categories_articles_index","portals_categories_articles_edit"],k=S("portals/allPortals"),b=P(()=>u.params.portalSlug),y=P(()=>D(b.value)),f=n=>n.slug===b.value,_=n=>{var d;return((d=n==null?void 0:n.logo)==null?void 0:d.file_url)||""},v=async(n,d)=>{await o.dispatch("portals/switchPortal",!0),await o.dispatch("portals/index");const x={portalSlug:n,locale:d};await o.dispatch("portals/show",x),await o.dispatch("categories/index",x),await o.dispatch("agents/get"),await o.dispatch("portals/switchPortal",!1)},H={emit:e,t:m,route:u,router:t,store:o,DEFAULT_ROUTE:E,CATEGORY_ROUTE:z,CATEGORY_SUB_ROUTES:p,portals:k,currentPortalSlug:b,portalLink:y,isPortalActive:f,getPortalThumbnailSrc:_,fetchPortalAndItsCategories:v,handlePortalChange:async n=>{if(f(n))return;const{slug:d,meta:{default_locale:x}}=n;e("close"),await v(d,x);const F=p.includes(u.name)?z:u.name||E;t.push({name:F,params:{portalSlug:d,locale:x}})},openCreatePortalDialog:()=>{e("createPortal"),e("close")},onClickPreviewPortal:()=>{window.open(y.value,"_blank")},redirectToPortalHomePage:()=>{t.push({name:"portals_index",params:{navigationPath:E}})},computed:P,get useI18n(){return N},get useRoute(){return C},get useRouter(){return A},get useMapGetter(){return S},get useStore(){return B},get buildPortalURL(){return D},Button:U,Avatar:q};return Object.defineProperty(H,"__isScriptSetup",{enumerable:!1,value:!0}),H}},K={class:"pt-5 pb-3 bg-n-alpha-3 backdrop-blur-[100px] outline outline-n-container outline-1 z-50 absolute w-[27.5rem] rounded-xl shadow-md flex flex-col gap-4"},Q={class:"flex items-center justify-between gap-4 px-6 pb-3 border-b border-n-alpha-2"},X={class:"flex flex-col gap-1"},Z={class:"flex items-center gap-2"},$={class:"text-sm text-n-slate-11"},ee={key:0,class:"flex flex-col gap-2 px-4"},te={key:0,class:"flex items-center gap-1"},ae={class:"text-sm truncate text-n-slate-11"},oe={class:"text-sm font-medium truncate text-n-slate-12"};function re(g,a,l,e,m,u){return s(),c("div",K,[r("div",Q,[r("div",X,[r("div",Z,[r("h2",{class:"text-base font-medium cursor-pointer text-n-slate-12 w-fit hover:underline",onClick:e.redirectToPortalHomePage},w(e.t("HELP_CENTER.PORTAL_SWITCHER.PORTALS")),1),h(e.Button,{icon:"i-lucide-arrow-up-right",variant:"ghost",color:"slate","icon-lib":"lucide",size:"sm",class:"!w-6 !h-6 hover:bg-n-slate-2 text-n-slate-11 !p-0.5 rounded-md",onClick:e.onClickPreviewPortal})]),r("p",$,w(e.t("HELP_CENTER.PORTAL_SWITCHER.CREATE_PORTAL")),1)]),h(e.Button,{label:e.t("HELP_CENTER.PORTAL_SWITCHER.NEW_PORTAL"),color:"slate",icon:"i-lucide-plus",size:"sm",class:"!bg-n-alpha-2 hover:!bg-n-alpha-3",onClick:e.openCreatePortalDialog},null,8,["label"])]),e.portals.length>0?(s(),c("div",ee,[(s(!0),c(G,null,M(e.portals,(t,o)=>(s(),O(e.Button,{key:o,label:t.name,variant:"ghost",color:"slate","trailing-icon":"",icon:e.isPortalActive(t)?"i-lucide-check":"",class:"!justify-end !px-2 !py-2 hover:!bg-n-alpha-2 [&>.i-lucide-check]:text-n-teal-10 h-9",size:"sm",onClick:p=>e.handlePortalChange(t)},{default:j(()=>[t.custom_domain?(s(),c("div",te,[a[0]||(a[0]=r("span",{class:"i-lucide-link size-3"},null,-1)),r("span",ae,w(t.custom_domain||""),1)])):i("v-if",!0),r("span",oe,w(t.name||""),1),t?(s(),O(e.Avatar,{key:1,name:t.name,src:e.getPortalThumbnailSrc(t),size:20,"icon-name":"i-lucide-building-2","rounded-full":""},null,8,["name","src"])):i("v-if",!0)]),_:2},1032,["label","icon","onClick"]))),128))])):i("v-if",!0)])}const se=I(J,[["render",re],["__file","/app/app/javascript/dashboard/components-next/HelpCenter/PortalSwitcher/PortalSwitcher.vue"]]),le={__name:"HelpCenterLayout",props:{currentPage:{type:Number,default:1},totalItems:{type:Number,default:100},itemsPerPage:{type:Number,default:25},showHeaderTitle:{type:Boolean,default:!0},showPaginationFooter:{type:Boolean,default:!0}},emits:["update:currentPage"],setup(g,{expose:a,emit:l}){a();const e=l,m=C(),u=T(null),t=T(!1),o=S("portals/allPortals"),p=P(()=>m.params.portalSlug),k=P(()=>{var _,v;return(v=(_=o.value)==null?void 0:_.find(L=>L.slug===p.value))==null?void 0:v.name}),f={emit:e,route:m,createPortalDialogRef:u,showPortalSwitcher:t,portals:o,currentPortalSlug:p,activePortalName:k,updateCurrentPage:_=>{e("update:currentPage",_)},togglePortalSwitcher:()=>{t.value=!t.value},ref:T,computed:P,get OnClickOutside(){return W},get useRoute(){return C},get useMapGetter(){return S},PaginationFooter:Y,Button:U,PortalSwitcher:se,CreatePortalDialog:V};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}},ne={class:"flex flex-col w-full h-full overflow-hidden bg-n-background"},ie={class:"sticky top-0 z-10 px-6 pb-3 lg:px-0"},ce={class:"w-full max-w-[60rem] mx-auto lg:px-6"},ue={key:0,class:"flex items-center justify-start h-20 gap-2"},de={key:0,class:"text-xl font-medium text-n-slate-12"},ge={key:1,class:"relative group"},me={class:"flex-1 px-6 overflow-y-auto lg:px-0"},pe={class:"w-full max-w-[60rem] mx-auto py-3 lg:px-6"},_e={key:0,class:"sticky bottom-0 z-10 px-4 pb-4"};function he(g,a,l,e,m,u){return s(),c("section",ne,[r("header",ie,[r("div",ce,[l.showHeaderTitle?(s(),c("div",ue,[e.activePortalName?(s(),c("span",de,w(e.activePortalName),1)):i("v-if",!0),e.activePortalName?(s(),c("div",ge,[h(e.OnClickOutside,{onTrigger:a[2]||(a[2]=t=>e.showPortalSwitcher=!1)},{default:j(()=>[h(e.Button,{icon:"i-lucide-chevron-down",variant:"ghost",color:"slate",size:"xs",class:"rounded-md group-hover:bg-n-slate-3 hover:bg-n-slate-3",onClick:e.togglePortalSwitcher}),e.showPortalSwitcher?(s(),O(e.PortalSwitcher,{key:0,class:"absolute ltr:left-0 rtl:right-0 top-9",onClose:a[0]||(a[0]=t=>e.showPortalSwitcher=!1),onCreatePortal:a[1]||(a[1]=t=>e.createPortalDialogRef.dialogRef.open())})):i("v-if",!0)]),_:1}),h(e.CreatePortalDialog,{ref:"createPortalDialogRef"},null,512)])):i("v-if",!0)])):i("v-if",!0),R(g.$slots,"header-actions")])]),r("main",me,[r("div",pe,[R(g.$slots,"content")])]),l.showPaginationFooter?(s(),c("footer",_e,[h(e.PaginationFooter,{"current-page":l.currentPage,"total-items":l.totalItems,"items-per-page":l.itemsPerPage,"onUpdate:currentPage":e.updateCurrentPage},null,8,["current-page","total-items","items-per-page"])])):i("v-if",!0),i(" Do not remove this slot. It can be used to add dialogs. "),R(g.$slots,"default")])}const Re=I(le,[["render",he],["__file","/app/app/javascript/dashboard/components-next/HelpCenter/HelpCenterLayout.vue"]]);export{Re as H};
