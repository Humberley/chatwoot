const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/EmojiInput-8IkZz3o1.js","assets/typing-Dhk99rRl.js","assets/Validators-0vUS0OnA.js","assets/_plugin-vue_export-helper-n_vHXFlc.js","assets/useBranding-C51QoB-t.js","assets/utils.esm-CMazHLgs.js","assets/useBranding-Cl2RTTqu.css","assets/index-DN3rM4CW.js","assets/_commonjsHelpers-BosuxZz1.js","assets/index-DzK6ljgP.js","assets/index-UYK3fwMr.js","assets/vue-dompurify-html-CEAHYyWB.js","assets/module-WEXc1Yw_.js","assets/Icon-D1o1yyYK.js","assets/EmojiInput-BnGLGF-b.css","assets/PortalsArticlesIndexPage-pr5neX8k.js","assets/HelpCenterLayout-CP5dHFgN.js","assets/DashboardIcon-CCM-1oGA.js","assets/js.cookie-Cz0CWeBA.js","assets/index-CQMLlWJA.js","assets/DashboardIcon-C8r5V_Y_.css","assets/CategoryHeaderControls-DpYgORUR.js","assets/CategoryHeaderControls-B9JKy9jp.css","assets/useKeyboardNavigableList-B1kK16iE.js","assets/helper-BVTgYTlr.js","assets/BarChart-BLu1KVZQ.js","assets/constants-lVAyZKq6.js","assets/IframeLoader-DfGHvGaO.js","assets/PortalsArticlesIndexPage-DRCIjRgS.css","assets/PortalsArticlesNewPage-AKDJ9Iy7.js","assets/ArticleEditor-Du88cCHc.js","assets/ArticleEditor-Du5TdZ4N.css","assets/PortalsArticlesEditPage-Cl3FC28W.js","assets/PortalsCategoriesIndexPage-C38M88SJ.js","assets/PortalsLocalesIndexPage-B7ej8WPq.js","assets/PortalsSettingsIndexPage-gs4pkThI.js","assets/PortalsSettingsIndexPage-By197ruZ.css","assets/commandbar-CUM6Dpvm.js","assets/commandbar-DaCNDihA.css"])))=>i.map(i=>d[i]);
var $3=Object.defineProperty;var G3=(t,n,a)=>n in t?$3(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a;var rn=(t,n,a)=>G3(t,typeof n!="symbol"?n+"":n,a);import{d as ei,h as pn,r as P,w as je,c as S,a as L,o as p,b as qe,e as v,f as Ve,g as O,i as ce,v as En,F as de,j as Ae,t as C,k as Vn,T as Qa,l as z,m as Oe,_ as G,n as g,p as f,q as oe,s as n2,u as a2,x as H,y as Ta,z as nn,A as At,B as s2,C as o2,D as r2,E as i2,G as l2,H as nt,I as an,J as dn,K as Pe,L as Et,M as xn,N as qn,O as so,P as gr,Q as is,R as Da,S as Bf,U as Un,V as th,W as Lt,X as Ro,Y as bn,Z as Ff,$ as Sa,a0 as Hc,a1 as jc,a2 as oo,a3 as Pc,a4 as Xb,a5 as V3,a6 as H3,a7 as V1,a8 as j3,a9 as W3,aa as z3,ab as b_,ac as Uf,ad as Wc,ae as H1,af as c2,ag as Ac}from"./_plugin-vue_export-helper-n_vHXFlc.js";import{u as Q,m as _t,S as ls,e as Mt,a as xt,b as Fe,c as le,M as Y3,d as Rs,f as Bn,I as d2,C as ur,g as Hr,h as Jn,A as K3,i as Ao,j as u2,T as ru,k as p2,l as v_,n as X3}from"./useBranding-C51QoB-t.js";import{g as q3,c as j1,f as $f,a as W1,d as Ja,b as f2,p as Gf,e as z1,h as Vf,i as Z3,j as m2,k as Q3,r as J3,l as ek,t as tk,m as nk,n as ak,o as sk,q as ok,s as zc,u as Y1,v as K1,w as rk,x as X1,y as h2}from"./utils.esm-CMazHLgs.js";import{g as mE,a as ik,c as lk}from"./_commonjsHelpers-BosuxZz1.js";import{a as yu,s as Ko,e as yo,i as ck,p as yc,B as dk,A as qt,u as Os,C as hE,b as uk,g as pk,t as fk,c as q1,d as Z1,f as mk,F as hk,h as Hf,j as jf,k as Co,l as _k,m as ha,n as gk,M as sr,_ as ti,o as bk,q as Q1,r as vk,v as Ek}from"./index-DzK6ljgP.js";import{u as lt,I as Bt,i as Ws,s as os,f as Mn,B as cn,L as ro,G as Ys,D as _E,l as vn,C as Sk,g as ia,w as nh,a as _2,b as J1,c as Wf,d as vd,e as g2,h as iu,n as gE,j as Tk,k as Ak,t as b2,m as Li,o as yk,p as Ik,q as ah,r as Iu,v as Gr,x as sh,y as Ck,z as Yo,A as qb,E as v2,F as bE,H as E2,J as S2,K as T2,M as A2,N as y2,O as oh,P as rh,S as I2,Q as Ok,R as C2,T as O2,U as N2,V as eT,W as Nk,X as vE,Y as x2,Z as xk,_ as Zb,$ as Rk,a0 as R2,a1 as wk,a2 as Mk,a3 as Lk,a4 as Dk,a5 as Pk,a6 as kk,a7 as Bk,a8 as Fk,a9 as Uk,aa as $k,ab as Gk,ac as Vk,ad as Hk,ae as jk,af as Wk,ag as zk,ah as ft,ai as gt,aj as Di,ak as zf,al as EE,am as tT,an as nT,ao as Yk,ap as Ic,aq as aT,ar as sT,as as oT,at as Kk,au as Xk}from"./Validators-0vUS0OnA.js";import{B as Se,r as Ge,u as rt,S as $n,d as Qb,m as Rt,e as br,c as Sl,a as Pl,b as w2,f as qk,g as Io,n as rT}from"./index-UYK3fwMr.js";import{c as Ra,u as pr,a as fr,g as Zk,b as Yf,h as SE,R as Ua,C as _s,d as Cc,e as Qk,P as Oc,L as xo,f as Ut,i as Jk,r as M2,j as iT,p as e8,k as t8,l as n8,m as TE,n as ih,o as fo,q as a8,s as L2,t as D2,v as s8,w as o8,x as AE,W as Wa,y as r8,z as i8,A as l8,B as c8,S as P2,D as ua,E as d8,F as lT,G as Yc,_ as xl,H as u8,I as p8,J as f8,K as m8,M as h8,N as _8,O as g8,Q as b8,T as v8,U as E8,V as S8,X as k2,Y as T8,Z as cT,$ as A8,a0 as y8,a1 as I8,a2 as C8,a3 as O8,a4 as B2,a5 as N8,a6 as x8,a7 as R8,a8 as w8,a9 as M8,aa as L8,ab as D8,ac as P8,ad as k8,ae as B8,af as F8,ag as U8,ah as $8,ai as G8,aj as V8,ak as H8,al as j8,am as W8,an as z8,ao as Y8,ap as F2,aq as K8,ar as X8,as as q8,at as Z8,au as Q8,av as J8,aw as e4,ax as t4,ay as n4,az as a4,aA as s4,aB as o4,aC as r4,aD as i4,aE as l4,aF as c4,aG as gc,aH as d4,aI as Pi,aJ as u4,aK as Xs,aL as p4,aM as $t,aN as Ga,aO as $l,aP as vt,aQ as vs,aR as E_,aS as la,aT as ws,aU as mr,aV as f4,aW as m4,aX as dT,aY as $a,aZ as zs,a_ as h4,a$ as Kr,b0 as ht,b1 as uT,b2 as _4,b3 as g4,b4,b5 as pT,b6 as v4,b7 as kc,b8 as Kc,b9 as fT,ba as mT,bb as hT,bc as _T,bd as E4,be as tc,bf as gT,bg as bT,bh as S4,bi as T4,bj as S_,bk as vT,bl as ET,bm as A4,bn as kl,bo as hr,bp as ST,bq as yE,br as Cu,bs as TT,bt as AT,bu as yT,bv as IT,bw as CT,bx as OT,by as Kf,bz as Xf,bA as ss,bB as NT,bC as y4,bD as xT,bE as RT,bF as wT,bG as Bl,bH as Xr,bI as Ou,bJ as MT,bK as LT,bL as I4,bM as lh,bN as Xc,bO as qf,bP as qc,bQ as Vr,bR as DT,bS as Br,bT as PT,bU as T_,bV as Zc,bW as Qc,bX as kT,bY as BT,bZ as Zf,b_ as C4,b$ as O4,c0 as N4,c1 as x4,c2 as R4,c3 as w4,c4 as M4}from"./DashboardIcon-CCM-1oGA.js";import{u as Z,a as Nt,A as L4}from"./index-CQMLlWJA.js";import{r as U2,d as $2,c as Jb,a as D4,b as G2,e as P4,i as Ep,f as FT,g as Xo,h as Oo,j as Ks,k as UT,P as k4,l as B4,D as F4,m as U4,S as A_,M as $T,E as GT,n as VT,o as y_,p as Sp,q as HT,s as Jc,t as jT,u as WT,v as zT,w as YT,x as KT,y as Bc,z as Fl,R as IE,A as kn,B as XT,C as Rl,F as qT,G as V2,H as CE,I as $4,J as ZT,K as QT,_ as G4}from"./typing-Dhk99rRl.js";import{u as jn,a as ed,h as JT,b as eA,i as V4,c as H4,d as j4,L as tA,k as nA,e as aA}from"./useKeyboardNavigableList-B1kK16iE.js";import{c as rs,g as ev,a as tv}from"./helper-BVTgYTlr.js";import{r as Gn,t as Rn,a as Zn}from"./index-DN3rM4CW.js";import{l as Qf,g as sA}from"./Icon-D1o1yyYK.js";import{u as ta,M as ki,k as W4}from"./vue-dompurify-html-CEAHYyWB.js";import{F as z4,d as Y4,a as K4}from"./module-WEXc1Yw_.js";import{B as H2}from"./BarChart-BLu1KVZQ.js";import{M as oA}from"./constants-lVAyZKq6.js";import{I as X4}from"./IframeLoader-DfGHvGaO.js";import"./js.cookie-Cz0CWeBA.js";function j2(t){return t instanceof Map?t.clear=t.delete=t.set=function(){throw new Error("map is read-only")}:t instanceof Set&&(t.add=t.clear=t.delete=function(){throw new Error("set is read-only")}),Object.freeze(t),Object.getOwnPropertyNames(t).forEach(n=>{const a=t[n],e=typeof a;(e==="object"||e==="function")&&!Object.isFrozen(a)&&j2(a)}),t}class rA{constructor(n){n.data===void 0&&(n.data={}),this.data=n.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function W2(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function Ii(t,...n){const a=Object.create(null);for(const e in t)a[e]=t[e];return n.forEach(function(e){for(const s in e)a[s]=e[s]}),a}const q4="</span>",iA=t=>!!t.scope,Z4=(t,{prefix:n})=>{if(t.startsWith("language:"))return t.replace("language:","language-");if(t.includes(".")){const a=t.split(".");return[`${n}${a.shift()}`,...a.map((e,s)=>`${e}${"_".repeat(s+1)}`)].join(" ")}return`${n}${t}`};class Q4{constructor(n,a){this.buffer="",this.classPrefix=a.classPrefix,n.walk(this)}addText(n){this.buffer+=W2(n)}openNode(n){if(!iA(n))return;const a=Z4(n.scope,{prefix:this.classPrefix});this.span(a)}closeNode(n){iA(n)&&(this.buffer+=q4)}value(){return this.buffer}span(n){this.buffer+=`<span class="${n}">`}}const lA=(t={})=>{const n={children:[]};return Object.assign(n,t),n};class OE{constructor(){this.rootNode=lA(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(n){this.top.children.push(n)}openNode(n){const a=lA({scope:n});this.add(a),this.stack.push(a)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(n){return this.constructor._walk(n,this.rootNode)}static _walk(n,a){return typeof a=="string"?n.addText(a):a.children&&(n.openNode(a),a.children.forEach(e=>this._walk(n,e)),n.closeNode(a)),n}static _collapse(n){typeof n!="string"&&n.children&&(n.children.every(a=>typeof a=="string")?n.children=[n.children.join("")]:n.children.forEach(a=>{OE._collapse(a)}))}}class J4 extends OE{constructor(n){super(),this.options=n}addText(n){n!==""&&this.add(n)}startScope(n){this.openNode(n)}endScope(){this.closeNode()}__addSublanguage(n,a){const e=n.root;a&&(e.scope=`language:${a}`),this.add(e)}toHTML(){return new Q4(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function Nu(t){return t?typeof t=="string"?t:t.source:null}function z2(t){return Gl("(?=",t,")")}function e5(t){return Gl("(?:",t,")*")}function t5(t){return Gl("(?:",t,")?")}function Gl(...t){return t.map(a=>Nu(a)).join("")}function n5(t){const n=t[t.length-1];return typeof n=="object"&&n.constructor===Object?(t.splice(t.length-1,1),n):{}}function NE(...t){return"("+(n5(t).capture?"":"?:")+t.map(e=>Nu(e)).join("|")+")"}function Y2(t){return new RegExp(t.toString()+"|").exec("").length-1}function a5(t,n){const a=t&&t.exec(n);return a&&a.index===0}const s5=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function xE(t,{joinWith:n}){let a=0;return t.map(e=>{a+=1;const s=a;let r=Nu(e),o="";for(;r.length>0;){const i=s5.exec(r);if(!i){o+=r;break}o+=r.substring(0,i.index),r=r.substring(i.index+i[0].length),i[0][0]==="\\"&&i[1]?o+="\\"+String(Number(i[1])+s):(o+=i[0],i[0]==="("&&a++)}return o}).map(e=>`(${e})`).join(n)}const o5=/\b\B/,K2="[a-zA-Z]\\w*",RE="[a-zA-Z_]\\w*",X2="\\b\\d+(\\.\\d+)?",q2="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",Z2="\\b(0b[01]+)",r5="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",i5=(t={})=>{const n=/^#![ ]*\//;return t.binary&&(t.begin=Gl(n,/.*\b/,t.binary,/\b.*/)),Ii({scope:"meta",begin:n,end:/$/,relevance:0,"on:begin":(a,e)=>{a.index!==0&&e.ignoreMatch()}},t)},xu={begin:"\\\\[\\s\\S]",relevance:0},l5={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[xu]},c5={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[xu]},d5={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},ch=function(t,n,a={}){const e=Ii({scope:"comment",begin:t,end:n,contains:[]},a);e.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const s=NE("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return e.contains.push({begin:Gl(/[ ]+/,"(",s,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),e},u5=ch("//","$"),p5=ch("/\\*","\\*/"),f5=ch("#","$"),m5={scope:"number",begin:X2,relevance:0},h5={scope:"number",begin:q2,relevance:0},_5={scope:"number",begin:Z2,relevance:0},g5={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[xu,{begin:/\[/,end:/\]/,relevance:0,contains:[xu]}]},b5={scope:"title",begin:K2,relevance:0},v5={scope:"title",begin:RE,relevance:0},E5={begin:"\\.\\s*"+RE,relevance:0},S5=function(t){return Object.assign(t,{"on:begin":(n,a)=>{a.data._beginMatch=n[1]},"on:end":(n,a)=>{a.data._beginMatch!==n[1]&&a.ignoreMatch()}})};var Tp=Object.freeze({__proto__:null,APOS_STRING_MODE:l5,BACKSLASH_ESCAPE:xu,BINARY_NUMBER_MODE:_5,BINARY_NUMBER_RE:Z2,COMMENT:ch,C_BLOCK_COMMENT_MODE:p5,C_LINE_COMMENT_MODE:u5,C_NUMBER_MODE:h5,C_NUMBER_RE:q2,END_SAME_AS_BEGIN:S5,HASH_COMMENT_MODE:f5,IDENT_RE:K2,MATCH_NOTHING_RE:o5,METHOD_GUARD:E5,NUMBER_MODE:m5,NUMBER_RE:X2,PHRASAL_WORDS_MODE:d5,QUOTE_STRING_MODE:c5,REGEXP_MODE:g5,RE_STARTERS_RE:r5,SHEBANG:i5,TITLE_MODE:b5,UNDERSCORE_IDENT_RE:RE,UNDERSCORE_TITLE_MODE:v5});function T5(t,n){t.input[t.index-1]==="."&&n.ignoreMatch()}function A5(t,n){t.className!==void 0&&(t.scope=t.className,delete t.className)}function y5(t,n){n&&t.beginKeywords&&(t.begin="\\b("+t.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",t.__beforeBegin=T5,t.keywords=t.keywords||t.beginKeywords,delete t.beginKeywords,t.relevance===void 0&&(t.relevance=0))}function I5(t,n){Array.isArray(t.illegal)&&(t.illegal=NE(...t.illegal))}function C5(t,n){if(t.match){if(t.begin||t.end)throw new Error("begin & end are not supported with match");t.begin=t.match,delete t.match}}function O5(t,n){t.relevance===void 0&&(t.relevance=1)}const N5=(t,n)=>{if(!t.beforeMatch)return;if(t.starts)throw new Error("beforeMatch cannot be used with starts");const a=Object.assign({},t);Object.keys(t).forEach(e=>{delete t[e]}),t.keywords=a.keywords,t.begin=Gl(a.beforeMatch,z2(a.begin)),t.starts={relevance:0,contains:[Object.assign(a,{endsParent:!0})]},t.relevance=0,delete a.beforeMatch},x5=["of","and","for","in","not","or","if","then","parent","list","value"],R5="keyword";function Q2(t,n,a=R5){const e=Object.create(null);return typeof t=="string"?s(a,t.split(" ")):Array.isArray(t)?s(a,t):Object.keys(t).forEach(function(r){Object.assign(e,Q2(t[r],n,r))}),e;function s(r,o){n&&(o=o.map(i=>i.toLowerCase())),o.forEach(function(i){const l=i.split("|");e[l[0]]=[r,w5(l[0],l[1])]})}}function w5(t,n){return n?Number(n):M5(t)?0:1}function M5(t){return x5.includes(t.toLowerCase())}const cA={},wl=t=>{console.error(t)},dA=(t,...n)=>{console.log(`WARN: ${t}`,...n)},nc=(t,n)=>{cA[`${t}/${n}`]||(console.log(`Deprecated as of ${t}. ${n}`),cA[`${t}/${n}`]=!0)},Jf=new Error;function J2(t,n,{key:a}){let e=0;const s=t[a],r={},o={};for(let i=1;i<=n.length;i++)o[i+e]=s[i],r[i+e]=!0,e+=Y2(n[i-1]);t[a]=o,t[a]._emit=r,t[a]._multi=!0}function L5(t){if(Array.isArray(t.begin)){if(t.skip||t.excludeBegin||t.returnBegin)throw wl("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),Jf;if(typeof t.beginScope!="object"||t.beginScope===null)throw wl("beginScope must be object"),Jf;J2(t,t.begin,{key:"beginScope"}),t.begin=xE(t.begin,{joinWith:""})}}function D5(t){if(Array.isArray(t.end)){if(t.skip||t.excludeEnd||t.returnEnd)throw wl("skip, excludeEnd, returnEnd not compatible with endScope: {}"),Jf;if(typeof t.endScope!="object"||t.endScope===null)throw wl("endScope must be object"),Jf;J2(t,t.end,{key:"endScope"}),t.end=xE(t.end,{joinWith:""})}}function P5(t){t.scope&&typeof t.scope=="object"&&t.scope!==null&&(t.beginScope=t.scope,delete t.scope)}function k5(t){P5(t),typeof t.beginScope=="string"&&(t.beginScope={_wrap:t.beginScope}),typeof t.endScope=="string"&&(t.endScope={_wrap:t.endScope}),L5(t),D5(t)}function B5(t){function n(o,i){return new RegExp(Nu(o),"m"+(t.case_insensitive?"i":"")+(t.unicodeRegex?"u":"")+(i?"g":""))}class a{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(i,l){l.position=this.position++,this.matchIndexes[this.matchAt]=l,this.regexes.push([l,i]),this.matchAt+=Y2(i)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const i=this.regexes.map(l=>l[1]);this.matcherRe=n(xE(i,{joinWith:"|"}),!0),this.lastIndex=0}exec(i){this.matcherRe.lastIndex=this.lastIndex;const l=this.matcherRe.exec(i);if(!l)return null;const c=l.findIndex((u,m)=>m>0&&u!==void 0),d=this.matchIndexes[c];return l.splice(0,c),Object.assign(l,d)}}class e{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(i){if(this.multiRegexes[i])return this.multiRegexes[i];const l=new a;return this.rules.slice(i).forEach(([c,d])=>l.addRule(c,d)),l.compile(),this.multiRegexes[i]=l,l}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(i,l){this.rules.push([i,l]),l.type==="begin"&&this.count++}exec(i){const l=this.getMatcher(this.regexIndex);l.lastIndex=this.lastIndex;let c=l.exec(i);if(this.resumingScanAtSamePosition()&&!(c&&c.index===this.lastIndex)){const d=this.getMatcher(0);d.lastIndex=this.lastIndex+1,c=d.exec(i)}return c&&(this.regexIndex+=c.position+1,this.regexIndex===this.count&&this.considerAll()),c}}function s(o){const i=new e;return o.contains.forEach(l=>i.addRule(l.begin,{rule:l,type:"begin"})),o.terminatorEnd&&i.addRule(o.terminatorEnd,{type:"end"}),o.illegal&&i.addRule(o.illegal,{type:"illegal"}),i}function r(o,i){const l=o;if(o.isCompiled)return l;[A5,C5,k5,N5].forEach(d=>d(o,i)),t.compilerExtensions.forEach(d=>d(o,i)),o.__beforeBegin=null,[y5,I5,O5].forEach(d=>d(o,i)),o.isCompiled=!0;let c=null;return typeof o.keywords=="object"&&o.keywords.$pattern&&(o.keywords=Object.assign({},o.keywords),c=o.keywords.$pattern,delete o.keywords.$pattern),c=c||/\w+/,o.keywords&&(o.keywords=Q2(o.keywords,t.case_insensitive)),l.keywordPatternRe=n(c,!0),i&&(o.begin||(o.begin=/\B|\b/),l.beginRe=n(l.begin),!o.end&&!o.endsWithParent&&(o.end=/\B|\b/),o.end&&(l.endRe=n(l.end)),l.terminatorEnd=Nu(l.end)||"",o.endsWithParent&&i.terminatorEnd&&(l.terminatorEnd+=(o.end?"|":"")+i.terminatorEnd)),o.illegal&&(l.illegalRe=n(o.illegal)),o.contains||(o.contains=[]),o.contains=[].concat(...o.contains.map(function(d){return F5(d==="self"?o:d)})),o.contains.forEach(function(d){r(d,l)}),o.starts&&r(o.starts,i),l.matcher=s(l),l}if(t.compilerExtensions||(t.compilerExtensions=[]),t.contains&&t.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return t.classNameAliases=Ii(t.classNameAliases||{}),r(t)}function ex(t){return t?t.endsWithParent||ex(t.starts):!1}function F5(t){return t.variants&&!t.cachedVariants&&(t.cachedVariants=t.variants.map(function(n){return Ii(t,{variants:null},n)})),t.cachedVariants?t.cachedVariants:ex(t)?Ii(t,{starts:t.starts?Ii(t.starts):null}):Object.isFrozen(t)?Ii(t):t}var U5="11.10.0";class $5 extends Error{constructor(n,a){super(n),this.name="HTMLInjectionError",this.html=a}}const I_=W2,uA=Ii,pA=Symbol("nomatch"),G5=7,tx=function(t){const n=Object.create(null),a=Object.create(null),e=[];let s=!0;const r="Could not find the language '{}', did you forget to load/include a language module?",o={disableAutodetect:!0,name:"Plain text",contains:[]};let i={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:J4};function l(j){return i.noHighlightRe.test(j)}function c(j){let U=j.className+" ";U+=j.parentNode?j.parentNode.className:"";const J=i.languageDetectRe.exec(U);if(J){const te=w(J[1]);return te||(dA(r.replace("{}",J[1])),dA("Falling back to no-highlight mode for this block.",j)),te?J[1]:"no-highlight"}return U.split(/\s+/).find(te=>l(te)||w(te))}function d(j,U,J){let te="",q="";typeof U=="object"?(te=j,J=U.ignoreIllegals,q=U.language):(nc("10.7.0","highlight(lang, code, ...args) has been deprecated."),nc("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),q=j,te=U),J===void 0&&(J=!0);const K={code:te,language:q};$("before:highlight",K);const W=K.result?K.result:u(K.language,K.code,J);return W.code=K.code,$("after:highlight",W),W}function u(j,U,J,te){const q=Object.create(null);function K(He,xe){return He.keywords[xe]}function W(){if(!X.keywords){ie.addText(fe);return}let He=0;X.keywordPatternRe.lastIndex=0;let xe=X.keywordPatternRe.exec(fe),pe="";for(;xe;){pe+=fe.substring(He,xe.index);const ye=et.case_insensitive?xe[0].toLowerCase():xe[0],Be=K(X,ye);if(Be){const[ne,re]=Be;if(ie.addText(pe),pe="",q[ye]=(q[ye]||0)+1,q[ye]<=G5&&(me+=re),ne.startsWith("_"))pe+=xe[0];else{const he=et.classNameAliases[ne]||ne;ve(xe[0],he)}}else pe+=xe[0];He=X.keywordPatternRe.lastIndex,xe=X.keywordPatternRe.exec(fe)}pe+=fe.substring(He),ie.addText(pe)}function ee(){if(fe==="")return;let He=null;if(typeof X.subLanguage=="string"){if(!n[X.subLanguage]){ie.addText(fe);return}He=u(X.subLanguage,fe,!0,se[X.subLanguage]),se[X.subLanguage]=He._top}else He=h(fe,X.subLanguage.length?X.subLanguage:null);X.relevance>0&&(me+=He.relevance),ie.__addSublanguage(He._emitter,He.language)}function ae(){X.subLanguage!=null?ee():W(),fe=""}function ve(He,xe){He!==""&&(ie.startScope(xe),ie.addText(He),ie.endScope())}function Ce(He,xe){let pe=1;const ye=xe.length-1;for(;pe<=ye;){if(!He._emit[pe]){pe++;continue}const Be=et.classNameAliases[He[pe]]||He[pe],ne=xe[pe];Be?ve(ne,Be):(fe=ne,W(),fe=""),pe++}}function ue(He,xe){return He.scope&&typeof He.scope=="string"&&ie.openNode(et.classNameAliases[He.scope]||He.scope),He.beginScope&&(He.beginScope._wrap?(ve(fe,et.classNameAliases[He.beginScope._wrap]||He.beginScope._wrap),fe=""):He.beginScope._multi&&(Ce(He.beginScope,xe),fe="")),X=Object.create(He,{parent:{value:X}}),X}function ge(He,xe,pe){let ye=a5(He.endRe,pe);if(ye){if(He["on:end"]){const Be=new rA(He);He["on:end"](xe,Be),Be.isMatchIgnored&&(ye=!1)}if(ye){for(;He.endsParent&&He.parent;)He=He.parent;return He}}if(He.endsWithParent)return ge(He.parent,xe,pe)}function Me(He){return X.matcher.regexIndex===0?(fe+=He[0],1):(ze=!0,0)}function We(He){const xe=He[0],pe=He.rule,ye=new rA(pe),Be=[pe.__beforeBegin,pe["on:begin"]];for(const ne of Be)if(ne&&(ne(He,ye),ye.isMatchIgnored))return Me(xe);return pe.skip?fe+=xe:(pe.excludeBegin&&(fe+=xe),ae(),!pe.returnBegin&&!pe.excludeBegin&&(fe=xe)),ue(pe,He),pe.returnBegin?0:xe.length}function Ue(He){const xe=He[0],pe=U.substring(He.index),ye=ge(X,He,pe);if(!ye)return pA;const Be=X;X.endScope&&X.endScope._wrap?(ae(),ve(xe,X.endScope._wrap)):X.endScope&&X.endScope._multi?(ae(),Ce(X.endScope,He)):Be.skip?fe+=xe:(Be.returnEnd||Be.excludeEnd||(fe+=xe),ae(),Be.excludeEnd&&(fe=xe));do X.scope&&ie.closeNode(),!X.skip&&!X.subLanguage&&(me+=X.relevance),X=X.parent;while(X!==ye.parent);return ye.starts&&ue(ye.starts,He),Be.returnEnd?0:xe.length}function Re(){const He=[];for(let xe=X;xe!==et;xe=xe.parent)xe.scope&&He.unshift(xe.scope);He.forEach(xe=>ie.openNode(xe))}let Le={};function Xe(He,xe){const pe=xe&&xe[0];if(fe+=He,pe==null)return ae(),0;if(Le.type==="begin"&&xe.type==="end"&&Le.index===xe.index&&pe===""){if(fe+=U.slice(xe.index,xe.index+1),!s){const ye=new Error(`0 width match regex (${j})`);throw ye.languageName=j,ye.badRule=Le.rule,ye}return 1}if(Le=xe,xe.type==="begin")return We(xe);if(xe.type==="illegal"&&!J){const ye=new Error('Illegal lexeme "'+pe+'" for mode "'+(X.scope||"<unnamed>")+'"');throw ye.mode=X,ye}else if(xe.type==="end"){const ye=Ue(xe);if(ye!==pA)return ye}if(xe.type==="illegal"&&pe==="")return 1;if(Ye>1e5&&Ye>xe.index*3)throw new Error("potential infinite loop, way more iterations than matches");return fe+=pe,pe.length}const et=w(j);if(!et)throw wl(r.replace("{}",j)),new Error('Unknown language: "'+j+'"');const yt=B5(et);let Dt="",X=te||yt;const se={},ie=new i.__emitter(i);Re();let fe="",me=0,De=0,Ye=0,ze=!1;try{if(et.__emitTokens)et.__emitTokens(U,ie);else{for(X.matcher.considerAll();;){Ye++,ze?ze=!1:X.matcher.considerAll(),X.matcher.lastIndex=De;const He=X.matcher.exec(U);if(!He)break;const xe=U.substring(De,He.index),pe=Xe(xe,He);De=He.index+pe}Xe(U.substring(De))}return ie.finalize(),Dt=ie.toHTML(),{language:j,value:Dt,relevance:me,illegal:!1,_emitter:ie,_top:X}}catch(He){if(He.message&&He.message.includes("Illegal"))return{language:j,value:I_(U),illegal:!0,relevance:0,_illegalBy:{message:He.message,index:De,context:U.slice(De-100,De+100),mode:He.mode,resultSoFar:Dt},_emitter:ie};if(s)return{language:j,value:I_(U),illegal:!1,relevance:0,errorRaised:He,_emitter:ie,_top:X};throw He}}function m(j){const U={value:I_(j),illegal:!1,relevance:0,_top:o,_emitter:new i.__emitter(i)};return U._emitter.addText(j),U}function h(j,U){U=U||i.languages||Object.keys(n);const J=m(j),te=U.filter(w).filter(B).map(ae=>u(ae,j,!1));te.unshift(J);const q=te.sort((ae,ve)=>{if(ae.relevance!==ve.relevance)return ve.relevance-ae.relevance;if(ae.language&&ve.language){if(w(ae.language).supersetOf===ve.language)return 1;if(w(ve.language).supersetOf===ae.language)return-1}return 0}),[K,W]=q,ee=K;return ee.secondBest=W,ee}function _(j,U,J){const te=U&&a[U]||J;j.classList.add("hljs"),j.classList.add(`language-${te}`)}function E(j){let U=null;const J=c(j);if(l(J))return;if($("before:highlightElement",{el:j,language:J}),j.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",j);return}if(j.children.length>0&&(i.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(j)),i.throwUnescapedHTML))throw new $5("One of your code blocks includes unescaped HTML.",j.innerHTML);U=j;const te=U.textContent,q=J?d(te,{language:J,ignoreIllegals:!0}):h(te);j.innerHTML=q.value,j.dataset.highlighted="yes",_(j,J,q.language),j.result={language:q.language,re:q.relevance,relevance:q.relevance},q.secondBest&&(j.secondBest={language:q.secondBest.language,relevance:q.secondBest.relevance}),$("after:highlightElement",{el:j,result:q,text:te})}function y(j){i=uA(i,j)}const b=()=>{I(),nc("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function A(){I(),nc("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let T=!1;function I(){if(document.readyState==="loading"){T=!0;return}document.querySelectorAll(i.cssSelector).forEach(E)}function N(){T&&I()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",N,!1);function x(j,U){let J=null;try{J=U(t)}catch(te){if(wl("Language definition for '{}' could not be registered.".replace("{}",j)),s)wl(te);else throw te;J=o}J.name||(J.name=j),n[j]=J,J.rawDefinition=U.bind(null,t),J.aliases&&D(J.aliases,{languageName:j})}function R(j){delete n[j];for(const U of Object.keys(a))a[U]===j&&delete a[U]}function M(){return Object.keys(n)}function w(j){return j=(j||"").toLowerCase(),n[j]||n[a[j]]}function D(j,{languageName:U}){typeof j=="string"&&(j=[j]),j.forEach(J=>{a[J.toLowerCase()]=U})}function B(j){const U=w(j);return U&&!U.disableAutodetect}function k(j){j["before:highlightBlock"]&&!j["before:highlightElement"]&&(j["before:highlightElement"]=U=>{j["before:highlightBlock"](Object.assign({block:U.el},U))}),j["after:highlightBlock"]&&!j["after:highlightElement"]&&(j["after:highlightElement"]=U=>{j["after:highlightBlock"](Object.assign({block:U.el},U))})}function V(j){k(j),e.push(j)}function F(j){const U=e.indexOf(j);U!==-1&&e.splice(U,1)}function $(j,U){const J=j;e.forEach(function(te){te[J]&&te[J](U)})}function Y(j){return nc("10.7.0","highlightBlock will be removed entirely in v12.0"),nc("10.7.0","Please use highlightElement now."),E(j)}Object.assign(t,{highlight:d,highlightAuto:h,highlightAll:I,highlightElement:E,highlightBlock:Y,configure:y,initHighlighting:b,initHighlightingOnLoad:A,registerLanguage:x,unregisterLanguage:R,listLanguages:M,getLanguage:w,registerAliases:D,autoDetection:B,inherit:uA,addPlugin:V,removePlugin:F}),t.debugMode=function(){s=!1},t.safeMode=function(){s=!0},t.versionString=U5,t.regex={concat:Gl,lookahead:z2,either:NE,optional:t5,anyNumberOfTimes:e5};for(const j in Tp)typeof Tp[j]=="object"&&j2(Tp[j]);return Object.assign(t,Tp),t},td=tx({});td.newInstance=()=>tx({});var nx=td;td.HighlightJS=td;td.default=td;const C_=mE(nx);var fA=ei({props:{code:{type:String,required:!0},language:{type:String,default:""},autodetect:{type:Boolean,default:!0},ignoreIllegals:{type:Boolean,default:!0}},setup:function(t){var n=P(t.language);je(function(){return t.language},function(s){n.value=s});var a=S(function(){return t.autodetect||!n.value}),e=S(function(){return!a.value&&!C_.getLanguage(n.value)});return{className:S(function(){return e.value?"":"hljs "+n.value}),highlightedCode:S(function(){var s;if(e.value)return console.warn('The language "'+n.value+'" you specified could not be found.'),t.code.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;");if(a.value){var r=C_.highlightAuto(t.code);return n.value=(s=r.language)!==null&&s!==void 0?s:"",r.value}return(r=C_.highlight(t.code,{language:n.value,ignoreIllegals:t.ignoreIllegals})).value})}},render:function(){return pn("pre",{},[pn("code",{class:this.className,innerHTML:this.highlightedCode})])}}),V5={install:function(t){t.component("highlightjs",fA)},component:fA};function O_(t){return t===0?!1:Array.isArray(t)&&t.length===0?!0:!t}function H5(t){return(...n)=>!t(...n)}function j5(t,n){return t===void 0&&(t="undefined"),t===null&&(t="null"),t===!1&&(t="false"),t.toString().toLowerCase().indexOf(n.trim())!==-1}function ax(t,n,a,e){return n?t.filter(s=>j5(e(s,a),n)).sort((s,r)=>e(s,a).length-e(r,a).length):t}function W5(t){return t.filter(n=>!n.$isLabel)}function N_(t,n){return a=>a.reduce((e,s)=>s[t]&&s[t].length?(e.push({$groupLabel:s[n],$isLabel:!0}),e.concat(s[t])):e,[])}function z5(t,n,a,e,s){return r=>r.map(o=>{if(!o[a])return console.warn("Options passed to vue-multiselect do not contain groups, despite the config."),[];const i=ax(o[a],t,n,s);return i.length?{[e]:o[e],[a]:i}:[]})}const mA=(...t)=>n=>t.reduce((a,e)=>e(a),n);var Y5={data(){return{search:"",isOpen:!1,preferredOpenDirection:"below",optimizedHeight:this.maxHeight}},props:{internalSearch:{type:Boolean,default:!0},options:{type:Array,required:!0},multiple:{type:Boolean,default:!1},trackBy:{type:String},label:{type:String},searchable:{type:Boolean,default:!0},clearOnSelect:{type:Boolean,default:!0},hideSelected:{type:Boolean,default:!1},placeholder:{type:String,default:"Select option"},allowEmpty:{type:Boolean,default:!0},resetAfter:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:!0},customLabel:{type:Function,default(t,n){return O_(t)?"":n?t[n]:t}},taggable:{type:Boolean,default:!1},tagPlaceholder:{type:String,default:"Press enter to create a tag"},tagPosition:{type:String,default:"top"},max:{type:[Number,Boolean],default:!1},id:{default:null},optionsLimit:{type:Number,default:1e3},groupValues:{type:String},groupLabel:{type:String},groupSelect:{type:Boolean,default:!1},blockKeys:{type:Array,default(){return[]}},preserveSearch:{type:Boolean,default:!1},preselectFirst:{type:Boolean,default:!1},preventAutofocus:{type:Boolean,default:!1}},mounted(){!this.multiple&&this.max&&console.warn("[Vue-Multiselect warn]: Max prop should not be used when prop Multiple equals false."),this.preselectFirst&&!this.internalValue.length&&this.options.length&&this.select(this.filteredOptions[0])},computed:{internalValue(){return this.modelValue||this.modelValue===0?Array.isArray(this.modelValue)?this.modelValue:[this.modelValue]:[]},filteredOptions(){const t=this.search||"",n=t.toLowerCase().trim();let a=this.options.concat();return this.internalSearch?a=this.groupValues?this.filterAndFlat(a,n,this.label):ax(a,n,this.label,this.customLabel):a=this.groupValues?N_(this.groupValues,this.groupLabel)(a):a,a=this.hideSelected?a.filter(H5(this.isSelected)):a,this.taggable&&n.length&&!this.isExistingOption(n)&&(this.tagPosition==="bottom"?a.push({isTag:!0,label:t}):a.unshift({isTag:!0,label:t})),a.slice(0,this.optionsLimit)},valueKeys(){return this.trackBy?this.internalValue.map(t=>t[this.trackBy]):this.internalValue},optionKeys(){return(this.groupValues?this.flatAndStrip(this.options):this.options).map(n=>this.customLabel(n,this.label).toString().toLowerCase())},currentOptionLabel(){return this.multiple?this.searchable?"":this.placeholder:this.internalValue.length?this.getOptionLabel(this.internalValue[0]):this.searchable?"":this.placeholder}},watch:{internalValue:{handler(){this.resetAfter&&this.internalValue.length&&(this.search="",this.$emit("update:modelValue",this.multiple?[]:null))},deep:!0},search(){this.$emit("search-change",this.search)}},emits:["open","search-change","close","select","update:modelValue","remove","tag"],methods:{getValue(){return this.multiple?this.internalValue:this.internalValue.length===0?null:this.internalValue[0]},filterAndFlat(t,n,a){return mA(z5(n,a,this.groupValues,this.groupLabel,this.customLabel),N_(this.groupValues,this.groupLabel))(t)},flatAndStrip(t){return mA(N_(this.groupValues,this.groupLabel),W5)(t)},updateSearch(t){this.search=t},isExistingOption(t){return this.options?this.optionKeys.indexOf(t)>-1:!1},isSelected(t){const n=this.trackBy?t[this.trackBy]:t;return this.valueKeys.indexOf(n)>-1},isOptionDisabled(t){return!!t.$isDisabled},getOptionLabel(t){if(O_(t))return"";if(t.isTag)return t.label;if(t.$isLabel)return t.$groupLabel;const n=this.customLabel(t,this.label);return O_(n)?"":n},select(t,n){if(t.$isLabel&&this.groupSelect){this.selectGroup(t);return}if(!(this.blockKeys.indexOf(n)!==-1||this.disabled||t.$isDisabled||t.$isLabel)&&!(this.max&&this.multiple&&this.internalValue.length===this.max)&&!(n==="Tab"&&!this.pointerDirty)){if(t.isTag)this.$emit("tag",t.label,this.id),this.search="",this.closeOnSelect&&!this.multiple&&this.deactivate();else{if(this.isSelected(t)){n!=="Tab"&&this.removeElement(t);return}this.multiple?this.$emit("update:modelValue",this.internalValue.concat([t])):this.$emit("update:modelValue",t),this.$emit("select",t,this.id),this.clearOnSelect&&(this.search="")}this.closeOnSelect&&this.deactivate()}},selectGroup(t){const n=this.options.find(a=>a[this.groupLabel]===t.$groupLabel);if(n){if(this.wholeGroupSelected(n)){this.$emit("remove",n[this.groupValues],this.id);const a=this.trackBy?n[this.groupValues].map(s=>s[this.trackBy]):n[this.groupValues],e=this.internalValue.filter(s=>a.indexOf(this.trackBy?s[this.trackBy]:s)===-1);this.$emit("update:modelValue",e)}else{let a=n[this.groupValues].filter(e=>!(this.isOptionDisabled(e)||this.isSelected(e)));this.max&&a.splice(this.max-this.internalValue.length),this.$emit("select",a,this.id),this.$emit("update:modelValue",this.internalValue.concat(a))}this.closeOnSelect&&this.deactivate()}},wholeGroupSelected(t){return t[this.groupValues].every(n=>this.isSelected(n)||this.isOptionDisabled(n))},wholeGroupDisabled(t){return t[this.groupValues].every(this.isOptionDisabled)},removeElement(t,n=!0){if(this.disabled||t.$isDisabled)return;if(!this.allowEmpty&&this.internalValue.length<=1){this.deactivate();return}const a=typeof t=="object"?this.valueKeys.indexOf(t[this.trackBy]):this.valueKeys.indexOf(t);if(this.multiple){const e=this.internalValue.slice(0,a).concat(this.internalValue.slice(a+1));this.$emit("update:modelValue",e)}else this.$emit("update:modelValue",null);this.$emit("remove",t,this.id),this.closeOnSelect&&n&&this.deactivate()},removeLastElement(){this.blockKeys.indexOf("Delete")===-1&&this.search.length===0&&Array.isArray(this.internalValue)&&this.internalValue.length&&this.removeElement(this.internalValue[this.internalValue.length-1],!1)},activate(){this.isOpen||this.disabled||(this.adjustPosition(),this.groupValues&&this.pointer===0&&this.filteredOptions.length&&(this.pointer=1),this.isOpen=!0,this.searchable?(this.preserveSearch||(this.search=""),this.preventAutofocus||this.$nextTick(()=>this.$refs.search&&this.$refs.search.focus())):this.preventAutofocus||typeof this.$el<"u"&&this.$el.focus(),this.$emit("open",this.id))},deactivate(){this.isOpen&&(this.isOpen=!1,this.searchable?this.$refs.search!==null&&typeof this.$refs.search<"u"&&this.$refs.search.blur():typeof this.$el<"u"&&this.$el.blur(),this.preserveSearch||(this.search=""),this.$emit("close",this.getValue(),this.id))},toggle(){this.isOpen?this.deactivate():this.activate()},adjustPosition(){if(typeof window>"u")return;const t=this.$el.getBoundingClientRect().top,n=window.innerHeight-this.$el.getBoundingClientRect().bottom;n>this.maxHeight||n>t||this.openDirection==="below"||this.openDirection==="bottom"?(this.preferredOpenDirection="below",this.optimizedHeight=Math.min(n-40,this.maxHeight)):(this.preferredOpenDirection="above",this.optimizedHeight=Math.min(t-40,this.maxHeight))}}},K5={data(){return{pointer:0,pointerDirty:!1}},props:{showPointer:{type:Boolean,default:!0},optionHeight:{type:Number,default:40}},computed:{pointerPosition(){return this.pointer*this.optionHeight},visibleElements(){return this.optimizedHeight/this.optionHeight}},watch:{filteredOptions(){this.pointerAdjust()},isOpen(){this.pointerDirty=!1},pointer(){this.$refs.search&&this.$refs.search.setAttribute("aria-activedescendant",this.id+"-"+this.pointer.toString())}},methods:{optionHighlight(t,n){return{"multiselect__option--highlight":t===this.pointer&&this.showPointer,"multiselect__option--selected":this.isSelected(n)}},groupHighlight(t,n){if(!this.groupSelect)return["multiselect__option--disabled",{"multiselect__option--group":n.$isLabel}];const a=this.options.find(e=>e[this.groupLabel]===n.$groupLabel);return a&&!this.wholeGroupDisabled(a)?["multiselect__option--group",{"multiselect__option--highlight":t===this.pointer&&this.showPointer},{"multiselect__option--group-selected":this.wholeGroupSelected(a)}]:"multiselect__option--disabled"},addPointerElement({key:t}="Enter"){this.filteredOptions.length>0&&this.select(this.filteredOptions[this.pointer],t),this.pointerReset()},pointerForward(){this.pointer<this.filteredOptions.length-1&&(this.pointer++,this.$refs.list.scrollTop<=this.pointerPosition-(this.visibleElements-1)*this.optionHeight&&(this.$refs.list.scrollTop=this.pointerPosition-(this.visibleElements-1)*this.optionHeight),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()),this.pointerDirty=!0},pointerBackward(){this.pointer>0?(this.pointer--,this.$refs.list.scrollTop>=this.pointerPosition&&(this.$refs.list.scrollTop=this.pointerPosition),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerBackward()):this.filteredOptions[this.pointer]&&this.filteredOptions[0].$isLabel&&!this.groupSelect&&this.pointerForward(),this.pointerDirty=!0},pointerReset(){this.closeOnSelect&&(this.pointer=0,this.$refs.list&&(this.$refs.list.scrollTop=0))},pointerAdjust(){this.pointer>=this.filteredOptions.length-1&&(this.pointer=this.filteredOptions.length?this.filteredOptions.length-1:0),this.filteredOptions.length>0&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()},pointerSet(t){this.pointer=t,this.pointerDirty=!0}}},sx={name:"vue-multiselect",mixins:[Y5,K5],compatConfig:{MODE:3,ATTR_ENUMERATED_COERCION:!1},props:{name:{type:String,default:""},modelValue:{type:null,default(){return[]}},selectLabel:{type:String,default:"Press enter to select"},selectGroupLabel:{type:String,default:"Press enter to select group"},selectedLabel:{type:String,default:"Selected"},deselectLabel:{type:String,default:"Press enter to remove"},deselectGroupLabel:{type:String,default:"Press enter to deselect group"},showLabels:{type:Boolean,default:!0},limit:{type:Number,default:99999},maxHeight:{type:Number,default:300},limitText:{type:Function,default:t=>`and ${t} more`},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},spellcheck:{type:Boolean,default:!1},openDirection:{type:String,default:""},showNoOptions:{type:Boolean,default:!0},showNoResults:{type:Boolean,default:!0},tabindex:{type:Number,default:0},required:{type:Boolean,default:!1}},computed:{hasOptionGroup(){return this.groupValues&&this.groupLabel&&this.groupSelect},isSingleLabelVisible(){return(this.singleValue||this.singleValue===0)&&(!this.isOpen||!this.searchable)&&!this.visibleValues.length},isPlaceholderVisible(){return!this.internalValue.length&&(!this.searchable||!this.isOpen)},visibleValues(){return this.multiple?this.internalValue.slice(0,this.limit):[]},singleValue(){return this.internalValue[0]},deselectLabelText(){return this.showLabels?this.deselectLabel:""},deselectGroupLabelText(){return this.showLabels?this.deselectGroupLabel:""},selectLabelText(){return this.showLabels?this.selectLabel:""},selectGroupLabelText(){return this.showLabels?this.selectGroupLabel:""},selectedLabelText(){return this.showLabels?this.selectedLabel:""},inputStyle(){return this.searchable||this.multiple&&this.modelValue&&this.modelValue.length?this.isOpen?{width:"100%"}:{width:"0",position:"absolute",padding:"0"}:""},contentStyle(){return this.options.length?{display:"inline-block"}:{display:"block"}},isAbove(){return this.openDirection==="above"||this.openDirection==="top"?!0:this.openDirection==="below"||this.openDirection==="bottom"?!1:this.preferredOpenDirection==="above"},showSearchInput(){return this.searchable&&(this.hasSingleSelectedSlot&&(this.visibleSingleValue||this.visibleSingleValue===0)?this.isOpen:!0)}}};const X5={ref:"tags",class:"multiselect__tags"},q5={class:"multiselect__tags-wrap"},Z5={class:"multiselect__spinner"},Q5={key:0},J5={class:"multiselect__option"},eB={class:"multiselect__option"},tB=Oe("No elements found. Consider changing the search query."),nB={class:"multiselect__option"},aB=Oe("List is empty.");function sB(t,n,a,e,s,r){return p(),L("div",{tabindex:t.searchable?-1:a.tabindex,class:[{"multiselect--active":t.isOpen,"multiselect--disabled":a.disabled,"multiselect--above":r.isAbove,"multiselect--has-options-group":r.hasOptionGroup},"multiselect"],onFocus:n[14]||(n[14]=o=>t.activate()),onBlur:n[15]||(n[15]=o=>t.searchable?!1:t.deactivate()),onKeydown:[n[16]||(n[16]=Vn(Ve(o=>t.pointerForward(),["self","prevent"]),["down"])),n[17]||(n[17]=Vn(Ve(o=>t.pointerBackward(),["self","prevent"]),["up"]))],onKeypress:n[18]||(n[18]=Vn(Ve(o=>t.addPointerElement(o),["stop","self"]),["enter","tab"])),onKeyup:n[19]||(n[19]=Vn(o=>t.deactivate(),["esc"])),role:"combobox","aria-owns":"listbox-"+t.id},[qe(t.$slots,"caret",{toggle:t.toggle},()=>[v("div",{onMousedown:n[1]||(n[1]=Ve(o=>t.toggle(),["prevent","stop"])),class:"multiselect__select"},null,32)]),qe(t.$slots,"clear",{search:t.search}),v("div",X5,[qe(t.$slots,"selection",{search:t.search,remove:t.removeElement,values:r.visibleValues,isOpen:t.isOpen},()=>[ce(v("div",q5,[(p(!0),L(de,null,Ae(r.visibleValues,(o,i)=>qe(t.$slots,"tag",{option:o,search:t.search,remove:t.removeElement},()=>[(p(),L("span",{class:"multiselect__tag",key:i},[v("span",{textContent:C(t.getOptionLabel(o))},null,8,["textContent"]),v("i",{tabindex:"1",onKeypress:Vn(Ve(l=>t.removeElement(o),["prevent"]),["enter"]),onMousedown:Ve(l=>t.removeElement(o),["prevent"]),class:"multiselect__tag-icon"},null,40,["onKeypress","onMousedown"])]))])),256))],512),[[En,r.visibleValues.length>0]]),t.internalValue&&t.internalValue.length>a.limit?qe(t.$slots,"limit",{key:0},()=>[v("strong",{class:"multiselect__strong",textContent:C(a.limitText(t.internalValue.length-a.limit))},null,8,["textContent"])]):O("v-if",!0)]),v(Qa,{name:"multiselect__loading"},{default:z(()=>[qe(t.$slots,"loading",{},()=>[ce(v("div",Z5,null,512),[[En,a.loading]])])]),_:3}),t.searchable?(p(),L("input",{key:0,ref:"search",name:a.name,id:t.id,type:"text",autocomplete:"off",spellcheck:a.spellcheck,placeholder:t.placeholder,required:a.required,style:r.inputStyle,value:t.search,disabled:a.disabled,tabindex:a.tabindex,onInput:n[2]||(n[2]=o=>t.updateSearch(o.target.value)),onFocus:n[3]||(n[3]=Ve(o=>t.activate(),["prevent"])),onBlur:n[4]||(n[4]=Ve(o=>t.deactivate(),["prevent"])),onKeyup:n[5]||(n[5]=Vn(o=>t.deactivate(),["esc"])),onKeydown:[n[6]||(n[6]=Vn(Ve(o=>t.pointerForward(),["prevent"]),["down"])),n[7]||(n[7]=Vn(Ve(o=>t.pointerBackward(),["prevent"]),["up"])),n[9]||(n[9]=Vn(Ve(o=>t.removeLastElement(),["stop"]),["delete"]))],onKeypress:n[8]||(n[8]=Vn(Ve(o=>t.addPointerElement(o),["prevent","stop","self"]),["enter"])),class:"multiselect__input","aria-controls":"listbox-"+t.id},null,44,["name","id","spellcheck","placeholder","required","value","disabled","tabindex","aria-controls"])):O("v-if",!0),r.isSingleLabelVisible?(p(),L("span",{key:1,class:"multiselect__single",onMousedown:n[10]||(n[10]=Ve((...o)=>t.toggle&&t.toggle(...o),["prevent"]))},[qe(t.$slots,"singleLabel",{option:r.singleValue},()=>[Oe(C(t.currentOptionLabel),1)])],32)):O("v-if",!0),r.isPlaceholderVisible?(p(),L("span",{key:2,class:"multiselect__placeholder",onMousedown:n[11]||(n[11]=Ve((...o)=>t.toggle&&t.toggle(...o),["prevent"]))},[qe(t.$slots,"placeholder",{},()=>[Oe(C(t.placeholder),1)])],32)):O("v-if",!0)],512),v(Qa,{name:"multiselect"},{default:z(()=>[ce(v("div",{class:"multiselect__content-wrapper",onFocus:n[12]||(n[12]=(...o)=>t.activate&&t.activate(...o)),tabindex:"-1",onMousedown:n[13]||(n[13]=Ve(()=>{},["prevent"])),style:{maxHeight:t.optimizedHeight+"px"},ref:"list"},[v("ul",{class:"multiselect__content",style:r.contentStyle,role:"listbox",id:"listbox-"+t.id,"aria-multiselectable":t.multiple},[qe(t.$slots,"beforeList"),t.multiple&&t.max===t.internalValue.length?(p(),L("li",Q5,[v("span",J5,[qe(t.$slots,"maxElements",{},()=>[Oe("Maximum of "+C(t.max)+" options selected. First remove a selected option to select another.",1)])])])):O("v-if",!0),!t.max||t.internalValue.length<t.max?(p(!0),L(de,{key:1},Ae(t.filteredOptions,(o,i)=>(p(),L("li",{class:"multiselect__element",key:i,"aria-selected":t.isSelected(o),id:t.id+"-"+i,role:o&&(o.$isLabel||o.$isDisabled)?null:"option"},[o&&(o.$isLabel||o.$isDisabled)?O("v-if",!0):(p(),L("span",{key:0,class:[t.optionHighlight(i,o),"multiselect__option"],onClick:Ve(l=>t.select(o),["stop"]),onMouseenter:Ve(l=>t.pointerSet(i),["self"]),"data-select":o&&o.isTag?t.tagPlaceholder:r.selectLabelText,"data-selected":r.selectedLabelText,"data-deselect":r.deselectLabelText},[qe(t.$slots,"option",{option:o,search:t.search,index:i},()=>[v("span",null,C(t.getOptionLabel(o)),1)])],42,["onClick","onMouseenter","data-select","data-selected","data-deselect"])),o&&(o.$isLabel||o.$isDisabled)?(p(),L("span",{key:1,"data-select":t.groupSelect&&r.selectGroupLabelText,"data-deselect":t.groupSelect&&r.deselectGroupLabelText,class:[t.groupHighlight(i,o),"multiselect__option"],onMouseenter:Ve(l=>t.groupSelect&&t.pointerSet(i),["self"]),onMousedown:Ve(l=>t.selectGroup(o),["prevent"])},[qe(t.$slots,"option",{option:o,search:t.search,index:i},()=>[v("span",null,C(t.getOptionLabel(o)),1)])],42,["data-select","data-deselect","onMouseenter","onMousedown"])):O("v-if",!0)],8,["aria-selected","id","role"]))),128)):O("v-if",!0),ce(v("li",null,[v("span",eB,[qe(t.$slots,"noResult",{search:t.search},()=>[tB])])],512),[[En,a.showNoResults&&t.filteredOptions.length===0&&t.search&&!a.loading]]),ce(v("li",null,[v("span",nB,[qe(t.$slots,"noOptions",{},()=>[aB])])],512),[[En,a.showNoOptions&&(t.options.length===0||r.hasOptionGroup===!0&&t.filteredOptions.length===0)&&!t.search&&!a.loading]]),qe(t.$slots,"afterList")],12,["id","aria-multiselectable"])],36),[[En,t.isOpen]])]),_:3})],42,["tabindex","aria-owns"])}sx.render=sB;const oB={__name:"Wizard",props:{items:{type:Array,default:()=>[]}},setup(t,{expose:n}){n();const a=t,e=lt(),s=S(()=>{const i=a.items.findIndex(l=>l.route===e.name);return i===-1?0:i}),r=S(()=>a.items.map((i,l)=>{const c=l===s.value,d=l<s.value;return{...i,index:l,isActive:c,isOver:d}})),o={props:a,route:e,activeIndex:s,steps:r,computed:S,get useRoute(){return lt},Icon:Bt};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},rB={class:"flex flex-col items-start gap-1.5 pb-10 pt-1"},iB={class:"flex items-center"},lB={class:"m-0 mt-1.5 text-sm text-n-slate-11"};function cB(t,n,a,e,s,r){return p(),L(n2,{tag:"div"},{default:z(()=>[(p(!0),g(de,null,Ae(e.steps,o=>(p(),g("div",{key:o.route,class:"cursor-pointer flex items-start gap-6 relative after:content-[''] after:absolute after:w-0.5 after:h-full after:top-5 ltr:after:left-4 rtl:after:right-4 before:content-[''] before:absolute before:w-0.5 before:h-4 before:top-0 before:left-4 rtl:before:right-4 last:after:hidden last:before:hidden after:bg-n-slate-3 before:bg-n-slate-3"},[O(" Circle "),f("div",{class:oe(["rounded-2xl flex-shrink-0 size-8 border-2 border-n-slate-3 flex items-center justify-center left-2 leading-4 z-10 top-5 transition-all duration-300 ease-in-out",{"bg-n-slate-3":o.isActive||o.isOver,"bg-n-background":!o.isActive&&!o.isOver}])},[o.isOver?(p(),L(e.Icon,{key:"check-"+o.index,icon:"i-lucide-check",class:"text-n-slate-11 size-4"})):(p(),g("span",{key:"num-"+o.index,class:oe(["text-xs font-bold transition-colors duration-300",o.isActive?"text-n-blue-11":"text-n-slate-11"])},C(o.index+1),3))],2),O(" Content "),f("div",rB,[f("div",iB,[f("h3",{class:oe(["text-sm font-medium overflow-hidden whitespace-nowrap mt-0.5 text-ellipsis leading-tight",o.isActive?"text-n-blue-11":"text-n-slate-12"])},C(o.title),3)]),f("p",lB,C(o.body),1)])]))),128))]),_:1})}const dB=G(oB,[["render",cB],["__file","/app/app/javascript/dashboard/components/ui/Wizard.vue"]]),uB=["top","right","bottom","left"],hA=["start","end"],_A=uB.reduce((t,n)=>t.concat(n,n+"-"+hA[0],n+"-"+hA[1]),[]),Tl=Math.min,bl=Math.max,pB={left:"right",right:"left",bottom:"top",top:"bottom"},fB={start:"end",end:"start"};function nv(t,n,a){return bl(t,Tl(n,a))}function Vl(t,n){return typeof t=="function"?t(n):t}function vr(t){return t.split("-")[0]}function qo(t){return t.split("-")[1]}function ox(t){return t==="x"?"y":"x"}function wE(t){return t==="y"?"height":"width"}function Ul(t){return["top","bottom"].includes(vr(t))?"y":"x"}function ME(t){return ox(Ul(t))}function rx(t,n,a){a===void 0&&(a=!1);const e=qo(t),s=ME(t),r=wE(s);let o=s==="x"?e===(a?"end":"start")?"right":"left":e==="start"?"bottom":"top";return n.reference[r]>n.floating[r]&&(o=tm(o)),[o,tm(o)]}function mB(t){const n=tm(t);return[em(t),n,em(n)]}function em(t){return t.replace(/start|end/g,n=>fB[n])}function hB(t,n,a){const e=["left","right"],s=["right","left"],r=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return a?n?s:e:n?e:s;case"left":case"right":return n?r:o;default:return[]}}function _B(t,n,a,e){const s=qo(t);let r=hB(vr(t),a==="start",e);return s&&(r=r.map(o=>o+"-"+s),n&&(r=r.concat(r.map(em)))),r}function tm(t){return t.replace(/left|right|bottom|top/g,n=>pB[n])}function gB(t){return{top:0,right:0,bottom:0,left:0,...t}}function ix(t){return typeof t!="number"?gB(t):{top:t,right:t,bottom:t,left:t}}function lu(t){const{x:n,y:a,width:e,height:s}=t;return{width:e,height:s,top:a,left:n,right:n+e,bottom:a+s,x:n,y:a}}function gA(t,n,a){let{reference:e,floating:s}=t;const r=Ul(n),o=ME(n),i=wE(o),l=vr(n),c=r==="y",d=e.x+e.width/2-s.width/2,u=e.y+e.height/2-s.height/2,m=e[i]/2-s[i]/2;let h;switch(l){case"top":h={x:d,y:e.y-s.height};break;case"bottom":h={x:d,y:e.y+e.height};break;case"right":h={x:e.x+e.width,y:u};break;case"left":h={x:e.x-s.width,y:u};break;default:h={x:e.x,y:e.y}}switch(qo(n)){case"start":h[o]-=m*(a&&c?-1:1);break;case"end":h[o]+=m*(a&&c?-1:1);break}return h}const bB=async(t,n,a)=>{const{placement:e="bottom",strategy:s="absolute",middleware:r=[],platform:o}=a,i=r.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(n));let c=await o.getElementRects({reference:t,floating:n,strategy:s}),{x:d,y:u}=gA(c,e,l),m=e,h={},_=0;for(let E=0;E<i.length;E++){const{name:y,fn:b}=i[E],{x:A,y:T,data:I,reset:N}=await b({x:d,y:u,initialPlacement:e,placement:m,strategy:s,middlewareData:h,rects:c,platform:o,elements:{reference:t,floating:n}});d=A??d,u=T??u,h={...h,[y]:{...h[y],...I}},N&&_<=50&&(_++,typeof N=="object"&&(N.placement&&(m=N.placement),N.rects&&(c=N.rects===!0?await o.getElementRects({reference:t,floating:n,strategy:s}):N.rects),{x:d,y:u}=gA(c,m,l)),E=-1)}return{x:d,y:u,placement:m,strategy:s,middlewareData:h}};async function dh(t,n){var a;n===void 0&&(n={});const{x:e,y:s,platform:r,rects:o,elements:i,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:m=!1,padding:h=0}=Vl(n,t),_=ix(h),y=i[m?u==="floating"?"reference":"floating":u],b=lu(await r.getClippingRect({element:(a=await(r.isElement==null?void 0:r.isElement(y)))==null||a?y:y.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(i.floating)),boundary:c,rootBoundary:d,strategy:l})),A=u==="floating"?{x:e,y:s,width:o.floating.width,height:o.floating.height}:o.reference,T=await(r.getOffsetParent==null?void 0:r.getOffsetParent(i.floating)),I=await(r.isElement==null?void 0:r.isElement(T))?await(r.getScale==null?void 0:r.getScale(T))||{x:1,y:1}:{x:1,y:1},N=lu(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:i,rect:A,offsetParent:T,strategy:l}):A);return{top:(b.top-N.top+_.top)/I.y,bottom:(N.bottom-b.bottom+_.bottom)/I.y,left:(b.left-N.left+_.left)/I.x,right:(N.right-b.right+_.right)/I.x}}const vB=t=>({name:"arrow",options:t,async fn(n){const{x:a,y:e,placement:s,rects:r,platform:o,elements:i,middlewareData:l}=n,{element:c,padding:d=0}=Vl(t,n)||{};if(c==null)return{};const u=ix(d),m={x:a,y:e},h=ME(s),_=wE(h),E=await o.getDimensions(c),y=h==="y",b=y?"top":"left",A=y?"bottom":"right",T=y?"clientHeight":"clientWidth",I=r.reference[_]+r.reference[h]-m[h]-r.floating[_],N=m[h]-r.reference[h],x=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let R=x?x[T]:0;(!R||!await(o.isElement==null?void 0:o.isElement(x)))&&(R=i.floating[T]||r.floating[_]);const M=I/2-N/2,w=R/2-E[_]/2-1,D=Tl(u[b],w),B=Tl(u[A],w),k=D,V=R-E[_]-B,F=R/2-E[_]/2+M,$=nv(k,F,V),Y=!l.arrow&&qo(s)!=null&&F!==$&&r.reference[_]/2-(F<k?D:B)-E[_]/2<0,j=Y?F<k?F-k:F-V:0;return{[h]:m[h]+j,data:{[h]:$,centerOffset:F-$-j,...Y&&{alignmentOffset:j}},reset:Y}}});function EB(t,n,a){return(t?[...a.filter(s=>qo(s)===t),...a.filter(s=>qo(s)!==t)]:a.filter(s=>vr(s)===s)).filter(s=>t?qo(s)===t||(n?em(s)!==s:!1):!0)}const SB=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(n){var a,e,s;const{rects:r,middlewareData:o,placement:i,platform:l,elements:c}=n,{crossAxis:d=!1,alignment:u,allowedPlacements:m=_A,autoAlignment:h=!0,..._}=Vl(t,n),E=u!==void 0||m===_A?EB(u||null,h,m):m,y=await dh(n,_),b=((a=o.autoPlacement)==null?void 0:a.index)||0,A=E[b];if(A==null)return{};const T=rx(A,r,await(l.isRTL==null?void 0:l.isRTL(c.floating)));if(i!==A)return{reset:{placement:E[0]}};const I=[y[vr(A)],y[T[0]],y[T[1]]],N=[...((e=o.autoPlacement)==null?void 0:e.overflows)||[],{placement:A,overflows:I}],x=E[b+1];if(x)return{data:{index:b+1,overflows:N},reset:{placement:x}};const R=N.map(D=>{const B=qo(D.placement);return[D.placement,B&&d?D.overflows.slice(0,2).reduce((k,V)=>k+V,0):D.overflows[0],D.overflows]}).sort((D,B)=>D[1]-B[1]),w=((s=R.filter(D=>D[2].slice(0,qo(D[0])?2:3).every(B=>B<=0))[0])==null?void 0:s[0])||R[0][0];return w!==i?{data:{index:b+1,overflows:N},reset:{placement:w}}:{}}}},TB=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(n){var a,e;const{placement:s,middlewareData:r,rects:o,initialPlacement:i,platform:l,elements:c}=n,{mainAxis:d=!0,crossAxis:u=!0,fallbackPlacements:m,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:E=!0,...y}=Vl(t,n);if((a=r.arrow)!=null&&a.alignmentOffset)return{};const b=vr(s),A=Ul(i),T=vr(i)===i,I=await(l.isRTL==null?void 0:l.isRTL(c.floating)),N=m||(T||!E?[tm(i)]:mB(i)),x=_!=="none";!m&&x&&N.push(..._B(i,E,_,I));const R=[i,...N],M=await dh(n,y),w=[];let D=((e=r.flip)==null?void 0:e.overflows)||[];if(d&&w.push(M[b]),u){const F=rx(s,o,I);w.push(M[F[0]],M[F[1]])}if(D=[...D,{placement:s,overflows:w}],!w.every(F=>F<=0)){var B,k;const F=(((B=r.flip)==null?void 0:B.index)||0)+1,$=R[F];if($)return{data:{index:F,overflows:D},reset:{placement:$}};let Y=(k=D.filter(j=>j.overflows[0]<=0).sort((j,U)=>j.overflows[1]-U.overflows[1])[0])==null?void 0:k.placement;if(!Y)switch(h){case"bestFit":{var V;const j=(V=D.filter(U=>{if(x){const J=Ul(U.placement);return J===A||J==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(J=>J>0).reduce((J,te)=>J+te,0)]).sort((U,J)=>U[1]-J[1])[0])==null?void 0:V[0];j&&(Y=j);break}case"initialPlacement":Y=i;break}if(s!==Y)return{reset:{placement:Y}}}return{}}}};async function AB(t,n){const{placement:a,platform:e,elements:s}=t,r=await(e.isRTL==null?void 0:e.isRTL(s.floating)),o=vr(a),i=qo(a),l=Ul(a)==="y",c=["left","top"].includes(o)?-1:1,d=r&&l?-1:1,u=Vl(n,t);let{mainAxis:m,crossAxis:h,alignmentAxis:_}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...u};return i&&typeof _=="number"&&(h=i==="end"?_*-1:_),l?{x:h*d,y:m*c}:{x:m*c,y:h*d}}const yB=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(n){var a,e;const{x:s,y:r,placement:o,middlewareData:i}=n,l=await AB(n,t);return o===((a=i.offset)==null?void 0:a.placement)&&(e=i.arrow)!=null&&e.alignmentOffset?{}:{x:s+l.x,y:r+l.y,data:{...l,placement:o}}}}},IB=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(n){const{x:a,y:e,placement:s}=n,{mainAxis:r=!0,crossAxis:o=!1,limiter:i={fn:y=>{let{x:b,y:A}=y;return{x:b,y:A}}},...l}=Vl(t,n),c={x:a,y:e},d=await dh(n,l),u=Ul(vr(s)),m=ox(u);let h=c[m],_=c[u];if(r){const y=m==="y"?"top":"left",b=m==="y"?"bottom":"right",A=h+d[y],T=h-d[b];h=nv(A,h,T)}if(o){const y=u==="y"?"top":"left",b=u==="y"?"bottom":"right",A=_+d[y],T=_-d[b];_=nv(A,_,T)}const E=i.fn({...n,[m]:h,[u]:_});return{...E,data:{x:E.x-a,y:E.y-e}}}}},CB=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(n){const{placement:a,rects:e,platform:s,elements:r}=n,{apply:o=()=>{},...i}=Vl(t,n),l=await dh(n,i),c=vr(a),d=qo(a),u=Ul(a)==="y",{width:m,height:h}=e.floating;let _,E;c==="top"||c==="bottom"?(_=c,E=d===(await(s.isRTL==null?void 0:s.isRTL(r.floating))?"start":"end")?"left":"right"):(E=c,_=d==="end"?"top":"bottom");const y=h-l.top-l.bottom,b=m-l.left-l.right,A=Tl(h-l[_],y),T=Tl(m-l[E],b),I=!n.middlewareData.shift;let N=A,x=T;if(u?x=d||I?Tl(T,b):b:N=d||I?Tl(A,y):y,I&&!d){const M=bl(l.left,0),w=bl(l.right,0),D=bl(l.top,0),B=bl(l.bottom,0);u?x=m-2*(M!==0||w!==0?M+w:bl(l.left,l.right)):N=h-2*(D!==0||B!==0?D+B:bl(l.top,l.bottom))}await o({...n,availableWidth:x,availableHeight:N});const R=await s.getDimensions(r.floating);return m!==R.width||h!==R.height?{reset:{rects:!0}}:{}}}};function No(t){var n;return((n=t.ownerDocument)==null?void 0:n.defaultView)||window}function Er(t){return No(t).getComputedStyle(t)}const bA=Math.min,cu=Math.max,nm=Math.round;function lx(t){const n=Er(t);let a=parseFloat(n.width),e=parseFloat(n.height);const s=t.offsetWidth,r=t.offsetHeight,o=nm(a)!==s||nm(e)!==r;return o&&(a=s,e=r),{width:a,height:e,fallback:o}}function Bi(t){return dx(t)?(t.nodeName||"").toLowerCase():""}let Ap;function cx(){if(Ap)return Ap;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(Ap=t.brands.map(n=>n.brand+"/"+n.version).join(" "),Ap):navigator.userAgent}function Sr(t){return t instanceof No(t).HTMLElement}function Fi(t){return t instanceof No(t).Element}function dx(t){return t instanceof No(t).Node}function vA(t){if(typeof ShadowRoot>"u")return!1;const n=No(t).ShadowRoot;return t instanceof n||t instanceof ShadowRoot}function uh(t){const{overflow:n,overflowX:a,overflowY:e,display:s}=Er(t);return/auto|scroll|overlay|hidden|clip/.test(n+e+a)&&!["inline","contents"].includes(s)}function OB(t){return["table","td","th"].includes(Bi(t))}function LE(t){const n=/firefox/i.test(cx()),a=Er(t),e=a.backdropFilter||a.WebkitBackdropFilter;return a.transform!=="none"||a.perspective!=="none"||(e?e!=="none":!1)||n&&a.willChange==="filter"||n&&(a.filter?a.filter!=="none":!1)||["transform","perspective"].some(s=>a.willChange.includes(s))||["paint","layout","strict","content"].some(s=>{const r=a.contain;return r!=null?r.includes(s):!1})}function ux(){return!/^((?!chrome|android).)*safari/i.test(cx())}function DE(t){return["html","body","#document"].includes(Bi(t))}function px(t){return Fi(t)?t:t.contextElement}const fx={x:1,y:1};function Fc(t){const n=px(t);if(!Sr(n))return fx;const a=n.getBoundingClientRect(),{width:e,height:s,fallback:r}=lx(n);let o=(r?nm(a.width):a.width)/e,i=(r?nm(a.height):a.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!i||!Number.isFinite(i))&&(i=1),{x:o,y:i}}function Ru(t,n,a,e){var s,r;n===void 0&&(n=!1),a===void 0&&(a=!1);const o=t.getBoundingClientRect(),i=px(t);let l=fx;n&&(e?Fi(e)&&(l=Fc(e)):l=Fc(t));const c=i?No(i):window,d=!ux()&&a;let u=(o.left+(d&&((s=c.visualViewport)==null?void 0:s.offsetLeft)||0))/l.x,m=(o.top+(d&&((r=c.visualViewport)==null?void 0:r.offsetTop)||0))/l.y,h=o.width/l.x,_=o.height/l.y;if(i){const E=No(i),y=e&&Fi(e)?No(e):e;let b=E.frameElement;for(;b&&e&&y!==E;){const A=Fc(b),T=b.getBoundingClientRect(),I=getComputedStyle(b);T.x+=(b.clientLeft+parseFloat(I.paddingLeft))*A.x,T.y+=(b.clientTop+parseFloat(I.paddingTop))*A.y,u*=A.x,m*=A.y,h*=A.x,_*=A.y,u+=T.x,m+=T.y,b=No(b).frameElement}}return{width:h,height:_,top:m,right:u+h,bottom:m+_,left:u,x:u,y:m}}function Ki(t){return((dx(t)?t.ownerDocument:t.document)||window.document).documentElement}function ph(t){return Fi(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function NB(t){let{rect:n,offsetParent:a,strategy:e}=t;const s=Sr(a),r=Ki(a);if(a===r)return n;let o={scrollLeft:0,scrollTop:0},i={x:1,y:1};const l={x:0,y:0};if((s||!s&&e!=="fixed")&&((Bi(a)!=="body"||uh(r))&&(o=ph(a)),Sr(a))){const c=Ru(a);i=Fc(a),l.x=c.x+a.clientLeft,l.y=c.y+a.clientTop}return{width:n.width*i.x,height:n.height*i.y,x:n.x*i.x-o.scrollLeft*i.x+l.x,y:n.y*i.y-o.scrollTop*i.y+l.y}}function mx(t){return Ru(Ki(t)).left+ph(t).scrollLeft}function xB(t){const n=Ki(t),a=ph(t),e=t.ownerDocument.body,s=cu(n.scrollWidth,n.clientWidth,e.scrollWidth,e.clientWidth),r=cu(n.scrollHeight,n.clientHeight,e.scrollHeight,e.clientHeight);let o=-a.scrollLeft+mx(t);const i=-a.scrollTop;return Er(e).direction==="rtl"&&(o+=cu(n.clientWidth,e.clientWidth)-s),{width:s,height:r,x:o,y:i}}function wu(t){if(Bi(t)==="html")return t;const n=t.assignedSlot||t.parentNode||vA(t)&&t.host||Ki(t);return vA(n)?n.host:n}function hx(t){const n=wu(t);return DE(n)?n.ownerDocument.body:Sr(n)&&uh(n)?n:hx(n)}function am(t,n){var a;n===void 0&&(n=[]);const e=hx(t),s=e===((a=t.ownerDocument)==null?void 0:a.body),r=No(e);return s?n.concat(r,r.visualViewport||[],uh(e)?e:[]):n.concat(e,am(e))}function RB(t,n){const a=No(t),e=Ki(t),s=a.visualViewport;let r=e.clientWidth,o=e.clientHeight,i=0,l=0;if(s){r=s.width,o=s.height;const c=ux();(c||!c&&n==="fixed")&&(i=s.offsetLeft,l=s.offsetTop)}return{width:r,height:o,x:i,y:l}}function wB(t,n){const a=Ru(t,!0,n==="fixed"),e=a.top+t.clientTop,s=a.left+t.clientLeft,r=Sr(t)?Fc(t):{x:1,y:1},o=t.clientWidth*r.x,i=t.clientHeight*r.y,l=s*r.x,c=e*r.y;return{width:o,height:i,x:l,y:c}}function EA(t,n,a){return n==="viewport"?lu(RB(t,a)):Fi(n)?lu(wB(n,a)):lu(xB(Ki(t)))}function MB(t,n){const a=n.get(t);if(a)return a;let e=am(t).filter(i=>Fi(i)&&Bi(i)!=="body"),s=null;const r=Er(t).position==="fixed";let o=r?wu(t):t;for(;Fi(o)&&!DE(o);){const i=Er(o),l=LE(o);(r?!l&&!s:!l&&i.position==="static"&&!!s&&["absolute","fixed"].includes(s.position))?e=e.filter(d=>d!==o):s=i,o=wu(o)}return n.set(t,e),e}function LB(t){let{element:n,boundary:a,rootBoundary:e,strategy:s}=t;const o=[...a==="clippingAncestors"?MB(n,this._c):[].concat(a),e],i=o[0],l=o.reduce((c,d)=>{const u=EA(n,d,s);return c.top=cu(u.top,c.top),c.right=bA(u.right,c.right),c.bottom=bA(u.bottom,c.bottom),c.left=cu(u.left,c.left),c},EA(n,i,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function DB(t){return Sr(t)?lx(t):t.getBoundingClientRect()}function SA(t){return!Sr(t)||Er(t).position==="fixed"?null:t.offsetParent}function PB(t){let n=wu(t);for(;Sr(n)&&!DE(n);){if(LE(n))return n;n=wu(n)}return null}function TA(t){const n=No(t);let a=SA(t);for(;a&&OB(a)&&Er(a).position==="static";)a=SA(a);return a&&(Bi(a)==="html"||Bi(a)==="body"&&Er(a).position==="static"&&!LE(a))?n:a||PB(t)||n}function kB(t,n,a){const e=Sr(n),s=Ki(n),r=Ru(t,!0,a==="fixed",n);let o={scrollLeft:0,scrollTop:0};const i={x:0,y:0};if(e||!e&&a!=="fixed")if((Bi(n)!=="body"||uh(s))&&(o=ph(n)),Sr(n)){const l=Ru(n,!0);i.x=l.x+n.clientLeft,i.y=l.y+n.clientTop}else s&&(i.x=mx(s));return{x:r.left+o.scrollLeft-i.x,y:r.top+o.scrollTop-i.y,width:r.width,height:r.height}}const BB={getClippingRect:LB,convertOffsetParentRelativeRectToViewportRelativeRect:NB,isElement:Fi,getDimensions:DB,getOffsetParent:TA,getDocumentElement:Ki,getScale:Fc,async getElementRects(t){let{reference:n,floating:a,strategy:e}=t;const s=this.getOffsetParent||TA,r=this.getDimensions;return{reference:kB(n,await s(a),e),floating:{x:0,y:0,...await r(a)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>Er(t).direction==="rtl"},UB=(t,n,a)=>{const e=new Map,s={platform:BB,...a},r={...s.platform,_c:e};return bB(t,n,{...s,platform:r})};function _x(t,n){for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&(typeof n[a]=="object"&&t[a]?_x(t[a],n[a]):t[a]=n[a])}const Zo={disabled:!1,distance:5,skidding:0,container:"body",boundary:void 0,instantMove:!1,disposeTimeout:150,popperTriggers:[],strategy:"absolute",preventOverflow:!0,flip:!0,shift:!0,overflowPadding:0,arrowPadding:0,arrowOverflow:!0,autoHideOnMousedown:!1,themes:{tooltip:{placement:"top",triggers:["hover","focus","touch"],hideTriggers:t=>[...t,"click"],delay:{show:200,hide:0},handleResize:!1,html:!1,loadingContent:"..."},dropdown:{placement:"bottom",triggers:["click"],delay:0,handleResize:!0,autoHide:!0},menu:{$extend:"dropdown",triggers:["hover","focus"],popperTriggers:["hover"],delay:{show:0,hide:400}}}};function Mu(t,n){let a=Zo.themes[t]||{},e;do e=a[n],typeof e>"u"?a.$extend?a=Zo.themes[a.$extend]||{}:(a=null,e=Zo[n]):a=null;while(a);return e}function $B(t){const n=[t];let a=Zo.themes[t]||{};do a.$extend&&!a.$resetCss?(n.push(a.$extend),a=Zo.themes[a.$extend]||{}):a=null;while(a);return n.map(e=>`v-popper--theme-${e}`)}function AA(t){const n=[t];let a=Zo.themes[t]||{};do a.$extend?(n.push(a.$extend),a=Zo.themes[a.$extend]||{}):a=null;while(a);return n}let nd=!1;if(typeof window<"u"){nd=!1;try{const t=Object.defineProperty({},"passive",{get(){nd=!0}});window.addEventListener("test",null,t)}catch{}}let gx=!1;typeof window<"u"&&typeof navigator<"u"&&(gx=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream);const bx=["auto","top","bottom","left","right"].reduce((t,n)=>t.concat([n,`${n}-start`,`${n}-end`]),[]),yA={hover:"mouseenter",focus:"focus",click:"click",touch:"touchstart",pointer:"pointerdown"},IA={hover:"mouseleave",focus:"blur",click:"click",touch:"touchend",pointer:"pointerup"};function CA(t,n){const a=t.indexOf(n);a!==-1&&t.splice(a,1)}function x_(){return new Promise(t=>requestAnimationFrame(()=>{requestAnimationFrame(t)}))}const jo=[];let il=null;const OA={};function NA(t){let n=OA[t];return n||(n=OA[t]=[]),n}let av=function(){};typeof window<"u"&&(av=window.Element);function yn(t){return function(n){return Mu(n.theme,t)}}const R_="__floating-vue__popper",vx=()=>ei({name:"VPopper",provide(){return{[R_]:{parentPopper:this}}},inject:{[R_]:{default:null}},props:{theme:{type:String,required:!0},targetNodes:{type:Function,required:!0},referenceNode:{type:Function,default:null},popperNode:{type:Function,required:!0},shown:{type:Boolean,default:!1},showGroup:{type:String,default:null},ariaId:{default:null},disabled:{type:Boolean,default:yn("disabled")},positioningDisabled:{type:Boolean,default:yn("positioningDisabled")},placement:{type:String,default:yn("placement"),validator:t=>bx.includes(t)},delay:{type:[String,Number,Object],default:yn("delay")},distance:{type:[Number,String],default:yn("distance")},skidding:{type:[Number,String],default:yn("skidding")},triggers:{type:Array,default:yn("triggers")},showTriggers:{type:[Array,Function],default:yn("showTriggers")},hideTriggers:{type:[Array,Function],default:yn("hideTriggers")},popperTriggers:{type:Array,default:yn("popperTriggers")},popperShowTriggers:{type:[Array,Function],default:yn("popperShowTriggers")},popperHideTriggers:{type:[Array,Function],default:yn("popperHideTriggers")},container:{type:[String,Object,av,Boolean],default:yn("container")},boundary:{type:[String,av],default:yn("boundary")},strategy:{type:String,validator:t=>["absolute","fixed"].includes(t),default:yn("strategy")},autoHide:{type:[Boolean,Function],default:yn("autoHide")},handleResize:{type:Boolean,default:yn("handleResize")},instantMove:{type:Boolean,default:yn("instantMove")},eagerMount:{type:Boolean,default:yn("eagerMount")},popperClass:{type:[String,Array,Object],default:yn("popperClass")},computeTransformOrigin:{type:Boolean,default:yn("computeTransformOrigin")},autoMinSize:{type:Boolean,default:yn("autoMinSize")},autoSize:{type:[Boolean,String],default:yn("autoSize")},autoMaxSize:{type:Boolean,default:yn("autoMaxSize")},autoBoundaryMaxSize:{type:Boolean,default:yn("autoBoundaryMaxSize")},preventOverflow:{type:Boolean,default:yn("preventOverflow")},overflowPadding:{type:[Number,String],default:yn("overflowPadding")},arrowPadding:{type:[Number,String],default:yn("arrowPadding")},arrowOverflow:{type:Boolean,default:yn("arrowOverflow")},flip:{type:Boolean,default:yn("flip")},shift:{type:Boolean,default:yn("shift")},shiftCrossAxis:{type:Boolean,default:yn("shiftCrossAxis")},noAutoFocus:{type:Boolean,default:yn("noAutoFocus")},disposeTimeout:{type:Number,default:yn("disposeTimeout")}},emits:{show:()=>!0,hide:()=>!0,"update:shown":t=>!0,"apply-show":()=>!0,"apply-hide":()=>!0,"close-group":()=>!0,"close-directive":()=>!0,"auto-hide":()=>!0,resize:()=>!0},data(){return{isShown:!1,isMounted:!1,skipTransition:!1,classes:{showFrom:!1,showTo:!1,hideFrom:!1,hideTo:!0},result:{x:0,y:0,placement:"",strategy:this.strategy,arrow:{x:0,y:0,centerOffset:0},transformOrigin:null},randomId:`popper_${[Math.random(),Date.now()].map(t=>t.toString(36).substring(2,10)).join("_")}`,shownChildren:new Set,lastAutoHide:!0,pendingHide:!1,containsGlobalTarget:!1,isDisposed:!0,mouseDownContains:!1}},computed:{popperId(){return this.ariaId!=null?this.ariaId:this.randomId},shouldMountContent(){return this.eagerMount||this.isMounted},slotData(){return{popperId:this.popperId,isShown:this.isShown,shouldMountContent:this.shouldMountContent,skipTransition:this.skipTransition,autoHide:typeof this.autoHide=="function"?this.lastAutoHide:this.autoHide,show:this.show,hide:this.hide,handleResize:this.handleResize,onResize:this.onResize,classes:{...this.classes,popperClass:this.popperClass},result:this.positioningDisabled?null:this.result,attrs:this.$attrs}},parentPopper(){var t;return(t=this[R_])==null?void 0:t.parentPopper},hasPopperShowTriggerHover(){var t,n;return((t=this.popperTriggers)==null?void 0:t.includes("hover"))||((n=this.popperShowTriggers)==null?void 0:n.includes("hover"))}},watch:{shown:"$_autoShowHide",disabled(t){t?this.dispose():this.init()},async container(){this.isShown&&(this.$_ensureTeleport(),await this.$_computePosition())},triggers:{handler:"$_refreshListeners",deep:!0},positioningDisabled:"$_refreshListeners",...["placement","distance","skidding","boundary","strategy","overflowPadding","arrowPadding","preventOverflow","shift","shiftCrossAxis","flip"].reduce((t,n)=>(t[n]="$_computePosition",t),{})},created(){this.autoMinSize&&console.warn('[floating-vue] `autoMinSize` option is deprecated. Use `autoSize="min"` instead.'),this.autoMaxSize&&console.warn("[floating-vue] `autoMaxSize` option is deprecated. Use `autoBoundaryMaxSize` instead.")},mounted(){this.init(),this.$_detachPopperNode()},activated(){this.$_autoShowHide()},deactivated(){this.hide()},beforeUnmount(){this.dispose()},methods:{show({event:t=null,skipDelay:n=!1,force:a=!1}={}){var e,s;(e=this.parentPopper)!=null&&e.lockedChild&&this.parentPopper.lockedChild!==this||(this.pendingHide=!1,(a||!this.disabled)&&(((s=this.parentPopper)==null?void 0:s.lockedChild)===this&&(this.parentPopper.lockedChild=null),this.$_scheduleShow(t,n),this.$emit("show"),this.$_showFrameLocked=!0,requestAnimationFrame(()=>{this.$_showFrameLocked=!1})),this.$emit("update:shown",!0))},hide({event:t=null,skipDelay:n=!1}={}){var a;if(!this.$_hideInProgress){if(this.shownChildren.size>0){this.pendingHide=!0;return}if(this.hasPopperShowTriggerHover&&this.$_isAimingPopper()){this.parentPopper&&(this.parentPopper.lockedChild=this,clearTimeout(this.parentPopper.lockedChildTimer),this.parentPopper.lockedChildTimer=setTimeout(()=>{this.parentPopper.lockedChild===this&&(this.parentPopper.lockedChild.hide({skipDelay:n}),this.parentPopper.lockedChild=null)},1e3));return}((a=this.parentPopper)==null?void 0:a.lockedChild)===this&&(this.parentPopper.lockedChild=null),this.pendingHide=!1,this.$_scheduleHide(t,n),this.$emit("hide"),this.$emit("update:shown",!1)}},init(){var t;this.isDisposed&&(this.isDisposed=!1,this.isMounted=!1,this.$_events=[],this.$_preventShow=!1,this.$_referenceNode=((t=this.referenceNode)==null?void 0:t.call(this))??this.$el,this.$_targetNodes=this.targetNodes().filter(n=>n.nodeType===n.ELEMENT_NODE),this.$_popperNode=this.popperNode(),this.$_innerNode=this.$_popperNode.querySelector(".v-popper__inner"),this.$_arrowNode=this.$_popperNode.querySelector(".v-popper__arrow-container"),this.$_swapTargetAttrs("title","data-original-title"),this.$_detachPopperNode(),this.triggers.length&&this.$_addEventListeners(),this.shown&&this.show())},dispose(){this.isDisposed||(this.isDisposed=!0,this.$_removeEventListeners(),this.hide({skipDelay:!0}),this.$_detachPopperNode(),this.isMounted=!1,this.isShown=!1,this.$_updateParentShownChildren(!1),this.$_swapTargetAttrs("data-original-title","title"))},async onResize(){this.isShown&&(await this.$_computePosition(),this.$emit("resize"))},async $_computePosition(){if(this.isDisposed||this.positioningDisabled)return;const t={strategy:this.strategy,middleware:[]};(this.distance||this.skidding)&&t.middleware.push(yB({mainAxis:this.distance,crossAxis:this.skidding}));const n=this.placement.startsWith("auto");if(n?t.middleware.push(SB({alignment:this.placement.split("-")[1]??""})):t.placement=this.placement,this.preventOverflow&&(this.shift&&t.middleware.push(IB({padding:this.overflowPadding,boundary:this.boundary,crossAxis:this.shiftCrossAxis})),!n&&this.flip&&t.middleware.push(TB({padding:this.overflowPadding,boundary:this.boundary}))),t.middleware.push(vB({element:this.$_arrowNode,padding:this.arrowPadding})),this.arrowOverflow&&t.middleware.push({name:"arrowOverflow",fn:({placement:e,rects:s,middlewareData:r})=>{let o;const{centerOffset:i}=r.arrow;return e.startsWith("top")||e.startsWith("bottom")?o=Math.abs(i)>s.reference.width/2:o=Math.abs(i)>s.reference.height/2,{data:{overflow:o}}}}),this.autoMinSize||this.autoSize){const e=this.autoSize?this.autoSize:this.autoMinSize?"min":null;t.middleware.push({name:"autoSize",fn:({rects:s,placement:r,middlewareData:o})=>{var i;if((i=o.autoSize)!=null&&i.skip)return{};let l,c;return r.startsWith("top")||r.startsWith("bottom")?l=s.reference.width:c=s.reference.height,this.$_innerNode.style[e==="min"?"minWidth":e==="max"?"maxWidth":"width"]=l!=null?`${l}px`:null,this.$_innerNode.style[e==="min"?"minHeight":e==="max"?"maxHeight":"height"]=c!=null?`${c}px`:null,{data:{skip:!0},reset:{rects:!0}}}})}(this.autoMaxSize||this.autoBoundaryMaxSize)&&(this.$_innerNode.style.maxWidth=null,this.$_innerNode.style.maxHeight=null,t.middleware.push(CB({boundary:this.boundary,padding:this.overflowPadding,apply:({availableWidth:e,availableHeight:s})=>{this.$_innerNode.style.maxWidth=e!=null?`${e}px`:null,this.$_innerNode.style.maxHeight=s!=null?`${s}px`:null}})));const a=await UB(this.$_referenceNode,this.$_popperNode,t);Object.assign(this.result,{x:a.x,y:a.y,placement:a.placement,strategy:a.strategy,arrow:{...a.middlewareData.arrow,...a.middlewareData.arrowOverflow}})},$_scheduleShow(t,n=!1){if(this.$_updateParentShownChildren(!0),this.$_hideInProgress=!1,clearTimeout(this.$_scheduleTimer),il&&this.instantMove&&il.instantMove&&il!==this.parentPopper){il.$_applyHide(!0),this.$_applyShow(!0);return}n?this.$_applyShow():this.$_scheduleTimer=setTimeout(this.$_applyShow.bind(this),this.$_computeDelay("show"))},$_scheduleHide(t,n=!1){if(this.shownChildren.size>0){this.pendingHide=!0;return}this.$_updateParentShownChildren(!1),this.$_hideInProgress=!0,clearTimeout(this.$_scheduleTimer),this.isShown&&(il=this),n?this.$_applyHide():this.$_scheduleTimer=setTimeout(this.$_applyHide.bind(this),this.$_computeDelay("hide"))},$_computeDelay(t){const n=this.delay;return parseInt(n&&n[t]||n||0)},async $_applyShow(t=!1){clearTimeout(this.$_disposeTimer),clearTimeout(this.$_scheduleTimer),this.skipTransition=t,!this.isShown&&(this.$_ensureTeleport(),await x_(),await this.$_computePosition(),await this.$_applyShowEffect(),this.positioningDisabled||this.$_registerEventListeners([...am(this.$_referenceNode),...am(this.$_popperNode)],"scroll",()=>{this.$_computePosition()}))},async $_applyShowEffect(){if(this.$_hideInProgress)return;if(this.computeTransformOrigin){const n=this.$_referenceNode.getBoundingClientRect(),a=this.$_popperNode.querySelector(".v-popper__wrapper"),e=a.parentNode.getBoundingClientRect(),s=n.x+n.width/2-(e.left+a.offsetLeft),r=n.y+n.height/2-(e.top+a.offsetTop);this.result.transformOrigin=`${s}px ${r}px`}this.isShown=!0,this.$_applyAttrsToTarget({"aria-describedby":this.popperId,"data-popper-shown":""});const t=this.showGroup;if(t){let n;for(let a=0;a<jo.length;a++)n=jo[a],n.showGroup!==t&&(n.hide(),n.$emit("close-group"))}jo.push(this),document.body.classList.add("v-popper--some-open");for(const n of AA(this.theme))NA(n).push(this),document.body.classList.add(`v-popper--some-open--${n}`);this.$emit("apply-show"),this.classes.showFrom=!0,this.classes.showTo=!1,this.classes.hideFrom=!1,this.classes.hideTo=!1,await x_(),this.classes.showFrom=!1,this.classes.showTo=!0,this.noAutoFocus||this.$_popperNode.focus()},async $_applyHide(t=!1){if(this.shownChildren.size>0){this.pendingHide=!0,this.$_hideInProgress=!1;return}if(clearTimeout(this.$_scheduleTimer),!this.isShown)return;this.skipTransition=t,CA(jo,this),jo.length===0&&document.body.classList.remove("v-popper--some-open");for(const a of AA(this.theme)){const e=NA(a);CA(e,this),e.length===0&&document.body.classList.remove(`v-popper--some-open--${a}`)}il===this&&(il=null),this.isShown=!1,this.$_applyAttrsToTarget({"aria-describedby":void 0,"data-popper-shown":void 0}),clearTimeout(this.$_disposeTimer);const n=this.disposeTimeout;n!==null&&(this.$_disposeTimer=setTimeout(()=>{this.$_popperNode&&(this.$_detachPopperNode(),this.isMounted=!1)},n)),this.$_removeEventListeners("scroll"),this.$emit("apply-hide"),this.classes.showFrom=!1,this.classes.showTo=!1,this.classes.hideFrom=!0,this.classes.hideTo=!1,await x_(),this.classes.hideFrom=!1,this.classes.hideTo=!0},$_autoShowHide(){this.shown?this.show():this.hide()},$_ensureTeleport(){if(this.isDisposed)return;let t=this.container;if(typeof t=="string"?t=window.document.querySelector(t):t===!1&&(t=this.$_targetNodes[0].parentNode),!t)throw new Error("No container for popover: "+this.container);t.appendChild(this.$_popperNode),this.isMounted=!0},$_addEventListeners(){const t=a=>{this.isShown&&!this.$_hideInProgress||(a.usedByTooltip=!0,!this.$_preventShow&&this.show({event:a}))};this.$_registerTriggerListeners(this.$_targetNodes,yA,this.triggers,this.showTriggers,t),this.$_registerTriggerListeners([this.$_popperNode],yA,this.popperTriggers,this.popperShowTriggers,t);const n=a=>{a.usedByTooltip||this.hide({event:a})};this.$_registerTriggerListeners(this.$_targetNodes,IA,this.triggers,this.hideTriggers,n),this.$_registerTriggerListeners([this.$_popperNode],IA,this.popperTriggers,this.popperHideTriggers,n)},$_registerEventListeners(t,n,a){this.$_events.push({targetNodes:t,eventType:n,handler:a}),t.forEach(e=>e.addEventListener(n,a,nd?{passive:!0}:void 0))},$_registerTriggerListeners(t,n,a,e,s){let r=a;e!=null&&(r=typeof e=="function"?e(r):e),r.forEach(o=>{const i=n[o];i&&this.$_registerEventListeners(t,i,s)})},$_removeEventListeners(t){const n=[];this.$_events.forEach(a=>{const{targetNodes:e,eventType:s,handler:r}=a;!t||t===s?e.forEach(o=>o.removeEventListener(s,r)):n.push(a)}),this.$_events=n},$_refreshListeners(){this.isDisposed||(this.$_removeEventListeners(),this.$_addEventListeners())},$_handleGlobalClose(t,n=!1){this.$_showFrameLocked||(this.hide({event:t}),t.closePopover?this.$emit("close-directive"):this.$emit("auto-hide"),n&&(this.$_preventShow=!0,setTimeout(()=>{this.$_preventShow=!1},300)))},$_detachPopperNode(){this.$_popperNode.parentNode&&this.$_popperNode.parentNode.removeChild(this.$_popperNode)},$_swapTargetAttrs(t,n){for(const a of this.$_targetNodes){const e=a.getAttribute(t);e&&(a.removeAttribute(t),a.setAttribute(n,e))}},$_applyAttrsToTarget(t){for(const n of this.$_targetNodes)for(const a in t){const e=t[a];e==null?n.removeAttribute(a):n.setAttribute(a,e)}},$_updateParentShownChildren(t){let n=this.parentPopper;for(;n;)t?n.shownChildren.add(this.randomId):(n.shownChildren.delete(this.randomId),n.pendingHide&&n.hide()),n=n.parentPopper},$_isAimingPopper(){const t=this.$_referenceNode.getBoundingClientRect();if(du>=t.left&&du<=t.right&&uu>=t.top&&uu<=t.bottom){const n=this.$_popperNode.getBoundingClientRect(),a=du-gi,e=uu-bi,s=n.left+n.width/2-gi+(n.top+n.height/2)-bi+n.width+n.height,r=gi+a*s,o=bi+e*s;return yp(gi,bi,r,o,n.left,n.top,n.left,n.bottom)||yp(gi,bi,r,o,n.left,n.top,n.right,n.top)||yp(gi,bi,r,o,n.right,n.top,n.right,n.bottom)||yp(gi,bi,r,o,n.left,n.bottom,n.right,n.bottom)}return!1}},render(){return this.$slots.default(this.slotData)}});if(typeof document<"u"&&typeof window<"u"){if(gx){const t=nd?{passive:!0,capture:!0}:!0;document.addEventListener("touchstart",n=>xA(n,!0),t),document.addEventListener("touchend",n=>RA(n,!0),t)}else window.addEventListener("mousedown",t=>xA(t,!1),!0),window.addEventListener("click",t=>RA(t,!1),!0);window.addEventListener("resize",VB)}function xA(t,n){if(Zo.autoHideOnMousedown)Ex(t,n);else for(let a=0;a<jo.length;a++){const e=jo[a];try{e.mouseDownContains=e.popperNode().contains(t.target)}catch{}}}function RA(t,n){Zo.autoHideOnMousedown||Ex(t,n)}function Ex(t,n){const a={};for(let e=jo.length-1;e>=0;e--){const s=jo[e];try{const r=s.containsGlobalTarget=s.mouseDownContains||s.popperNode().contains(t.target);s.pendingHide=!1,requestAnimationFrame(()=>{if(s.pendingHide=!1,!a[s.randomId]&&wA(s,r,t)){if(s.$_handleGlobalClose(t,n),!t.closeAllPopover&&t.closePopover&&r){let i=s.parentPopper;for(;i;)a[i.randomId]=!0,i=i.parentPopper;return}let o=s.parentPopper;for(;o&&wA(o,o.containsGlobalTarget,t);)o.$_handleGlobalClose(t,n),o=o.parentPopper}})}catch{}}}function wA(t,n,a){return a.closeAllPopover||a.closePopover&&n||GB(t,a)&&!n}function GB(t,n){if(typeof t.autoHide=="function"){const a=t.autoHide(n);return t.lastAutoHide=a,a}return t.autoHide}function VB(){for(let t=0;t<jo.length;t++)jo[t].$_computePosition()}let gi=0,bi=0,du=0,uu=0;typeof window<"u"&&window.addEventListener("mousemove",t=>{gi=du,bi=uu,du=t.clientX,uu=t.clientY},nd?{passive:!0}:void 0);function yp(t,n,a,e,s,r,o,i){const l=((o-s)*(n-r)-(i-r)*(t-s))/((i-r)*(a-t)-(o-s)*(e-n)),c=((a-t)*(n-r)-(e-n)*(t-s))/((i-r)*(a-t)-(o-s)*(e-n));return l>=0&&l<=1&&c>=0&&c<=1}const HB={extends:vx()},fh=(t,n)=>{const a=t.__vccOpts||t;for(const[e,s]of n)a[e]=s;return a};function jB(t,n,a,e,s,r){return p(),g("div",{ref:"reference",class:oe(["v-popper",{"v-popper--shown":t.slotData.isShown}])},[qe(t.$slots,"default",i2(l2(t.slotData)))],2)}const WB=fh(HB,[["render",jB]]);function zB(){var t=window.navigator.userAgent,n=t.indexOf("MSIE ");if(n>0)return parseInt(t.substring(n+5,t.indexOf(".",n)),10);var a=t.indexOf("Trident/");if(a>0){var e=t.indexOf("rv:");return parseInt(t.substring(e+3,t.indexOf(".",e)),10)}var s=t.indexOf("Edge/");return s>0?parseInt(t.substring(s+5,t.indexOf(".",s)),10):-1}let hf;function sv(){sv.init||(sv.init=!0,hf=zB()!==-1)}var mh={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){sv(),At(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const t=document.createElement("object");this._resizeObject=t,t.setAttribute("aria-hidden","true"),t.setAttribute("tabindex",-1),t.onload=this.addResizeHandlers,t.type="text/html",hf&&this.$el.appendChild(t),t.data="about:blank",hf||this.$el.appendChild(t)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!hf&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const YB=r2();s2("data-v-b329ee4c");const KB={class:"resize-observer",tabindex:"-1"};o2();const XB=YB((t,n,a,e,s,r)=>(p(),L("div",KB)));mh.render=XB;mh.__scopeId="data-v-b329ee4c";mh.__file="src/components/ResizeObserver.vue";const Sx=(t="theme")=>({computed:{themeClass(){return $B(this[t])}}}),qB=ei({name:"VPopperContent",components:{ResizeObserver:mh},mixins:[Sx()],props:{popperId:String,theme:String,shown:Boolean,mounted:Boolean,skipTransition:Boolean,autoHide:Boolean,handleResize:Boolean,classes:Object,result:Object},emits:["hide","resize"],methods:{toPx(t){return t!=null&&!isNaN(t)?`${t}px`:null}}}),ZB=["id","aria-hidden","tabindex","data-popper-placement"],QB={ref:"inner",class:"v-popper__inner"},JB=f("div",{class:"v-popper__arrow-outer"},null,-1),e6=f("div",{class:"v-popper__arrow-inner"},null,-1),t6=[JB,e6];function n6(t,n,a,e,s,r){const o=H("ResizeObserver");return p(),g("div",{id:t.popperId,ref:"popover",class:oe(["v-popper__popper",[t.themeClass,t.classes.popperClass,{"v-popper__popper--shown":t.shown,"v-popper__popper--hidden":!t.shown,"v-popper__popper--show-from":t.classes.showFrom,"v-popper__popper--show-to":t.classes.showTo,"v-popper__popper--hide-from":t.classes.hideFrom,"v-popper__popper--hide-to":t.classes.hideTo,"v-popper__popper--skip-transition":t.skipTransition,"v-popper__popper--arrow-overflow":t.result&&t.result.arrow.overflow,"v-popper__popper--no-positioning":!t.result}]]),style:nn(t.result?{position:t.result.strategy,transform:`translate3d(${Math.round(t.result.x)}px,${Math.round(t.result.y)}px,0)`}:void 0),"aria-hidden":t.shown?"false":"true",tabindex:t.autoHide?0:void 0,"data-popper-placement":t.result?t.result.placement:void 0,onKeyup:n[2]||(n[2]=Vn(i=>t.autoHide&&t.$emit("hide"),["esc"]))},[f("div",{class:"v-popper__backdrop",onClick:n[0]||(n[0]=i=>t.autoHide&&t.$emit("hide"))}),f("div",{class:"v-popper__wrapper",style:nn(t.result?{transformOrigin:t.result.transformOrigin}:void 0)},[f("div",QB,[t.mounted?(p(),g(de,{key:0},[f("div",null,[qe(t.$slots,"default")]),t.handleResize?(p(),L(o,{key:0,onNotify:n[1]||(n[1]=i=>t.$emit("resize",i))})):O("",!0)],64)):O("",!0)],512),f("div",{ref:"arrow",class:"v-popper__arrow-container",style:nn(t.result?{left:t.toPx(t.result.arrow.x),top:t.toPx(t.result.arrow.y)}:void 0)},t6,4)],4)],46,ZB)}const Tx=fh(qB,[["render",n6]]),Ax={methods:{show(...t){return this.$refs.popper.show(...t)},hide(...t){return this.$refs.popper.hide(...t)},dispose(...t){return this.$refs.popper.dispose(...t)},onResize(...t){return this.$refs.popper.onResize(...t)}}};let ov=function(){};typeof window<"u"&&(ov=window.Element);const a6=ei({name:"VPopperWrapper",components:{Popper:WB,PopperContent:Tx},mixins:[Ax,Sx("finalTheme")],props:{theme:{type:String,default:null},referenceNode:{type:Function,default:null},shown:{type:Boolean,default:!1},showGroup:{type:String,default:null},ariaId:{default:null},disabled:{type:Boolean,default:void 0},positioningDisabled:{type:Boolean,default:void 0},placement:{type:String,default:void 0},delay:{type:[String,Number,Object],default:void 0},distance:{type:[Number,String],default:void 0},skidding:{type:[Number,String],default:void 0},triggers:{type:Array,default:void 0},showTriggers:{type:[Array,Function],default:void 0},hideTriggers:{type:[Array,Function],default:void 0},popperTriggers:{type:Array,default:void 0},popperShowTriggers:{type:[Array,Function],default:void 0},popperHideTriggers:{type:[Array,Function],default:void 0},container:{type:[String,Object,ov,Boolean],default:void 0},boundary:{type:[String,ov],default:void 0},strategy:{type:String,default:void 0},autoHide:{type:[Boolean,Function],default:void 0},handleResize:{type:Boolean,default:void 0},instantMove:{type:Boolean,default:void 0},eagerMount:{type:Boolean,default:void 0},popperClass:{type:[String,Array,Object],default:void 0},computeTransformOrigin:{type:Boolean,default:void 0},autoMinSize:{type:Boolean,default:void 0},autoSize:{type:[Boolean,String],default:void 0},autoMaxSize:{type:Boolean,default:void 0},autoBoundaryMaxSize:{type:Boolean,default:void 0},preventOverflow:{type:Boolean,default:void 0},overflowPadding:{type:[Number,String],default:void 0},arrowPadding:{type:[Number,String],default:void 0},arrowOverflow:{type:Boolean,default:void 0},flip:{type:Boolean,default:void 0},shift:{type:Boolean,default:void 0},shiftCrossAxis:{type:Boolean,default:void 0},noAutoFocus:{type:Boolean,default:void 0},disposeTimeout:{type:Number,default:void 0}},emits:{show:()=>!0,hide:()=>!0,"update:shown":t=>!0,"apply-show":()=>!0,"apply-hide":()=>!0,"close-group":()=>!0,"close-directive":()=>!0,"auto-hide":()=>!0,resize:()=>!0},computed:{finalTheme(){return this.theme??this.$options.vPopperTheme}},methods:{getTargetNodes(){return Array.from(this.$el.children).filter(t=>t!==this.$refs.popperContent.$el)}}});function s6(t,n,a,e,s,r){const o=H("PopperContent"),i=H("Popper");return p(),L(i,Ta({ref:"popper"},t.$props,{theme:t.finalTheme,"target-nodes":t.getTargetNodes,"popper-node":()=>t.$refs.popperContent.$el,class:[t.themeClass],onShow:n[0]||(n[0]=()=>t.$emit("show")),onHide:n[1]||(n[1]=()=>t.$emit("hide")),"onUpdate:shown":n[2]||(n[2]=l=>t.$emit("update:shown",l)),onApplyShow:n[3]||(n[3]=()=>t.$emit("apply-show")),onApplyHide:n[4]||(n[4]=()=>t.$emit("apply-hide")),onCloseGroup:n[5]||(n[5]=()=>t.$emit("close-group")),onCloseDirective:n[6]||(n[6]=()=>t.$emit("close-directive")),onAutoHide:n[7]||(n[7]=()=>t.$emit("auto-hide")),onResize:n[8]||(n[8]=()=>t.$emit("resize"))}),{default:z(({popperId:l,isShown:c,shouldMountContent:d,skipTransition:u,autoHide:m,show:h,hide:_,handleResize:E,onResize:y,classes:b,result:A})=>[qe(t.$slots,"default",{shown:c,show:h,hide:_}),v(o,{ref:"popperContent","popper-id":l,theme:t.finalTheme,shown:c,mounted:d,"skip-transition":u,"auto-hide":m,"handle-resize":E,classes:b,result:A,onHide:_,onResize:y},{default:z(()=>[qe(t.$slots,"popper",{shown:c,hide:_})]),_:2},1032,["popper-id","theme","shown","mounted","skip-transition","auto-hide","handle-resize","classes","result","onHide","onResize"])]),_:3},16,["theme","target-nodes","popper-node","class"])}const PE=fh(a6,[["render",s6]]),o6={...PE,name:"VDropdown",vPopperTheme:"dropdown"},r6={...PE,name:"VMenu",vPopperTheme:"menu"},i6={...PE,name:"VTooltip",vPopperTheme:"tooltip"},l6=ei({name:"VTooltipDirective",components:{Popper:vx(),PopperContent:Tx},mixins:[Ax],inheritAttrs:!1,props:{theme:{type:String,default:"tooltip"},html:{type:Boolean,default:t=>Mu(t.theme,"html")},content:{type:[String,Number,Function],default:null},loadingContent:{type:String,default:t=>Mu(t.theme,"loadingContent")},targetNodes:{type:Function,required:!0}},data(){return{asyncContent:null}},computed:{isContentAsync(){return typeof this.content=="function"},loading(){return this.isContentAsync&&this.asyncContent==null},finalContent(){return this.isContentAsync?this.loading?this.loadingContent:this.asyncContent:this.content}},watch:{content:{handler(){this.fetchContent(!0)},immediate:!0},async finalContent(){await this.$nextTick(),this.$refs.popper.onResize()}},created(){this.$_fetchId=0},methods:{fetchContent(t){if(typeof this.content=="function"&&this.$_isShown&&(t||!this.$_loading&&this.asyncContent==null)){this.asyncContent=null,this.$_loading=!0;const n=++this.$_fetchId,a=this.content(this);a.then?a.then(e=>this.onResult(n,e)):this.onResult(n,a)}},onResult(t,n){t===this.$_fetchId&&(this.$_loading=!1,this.asyncContent=n)},onShow(){this.$_isShown=!0,this.fetchContent()},onHide(){this.$_isShown=!1}}}),c6=["innerHTML"],d6=["textContent"];function u6(t,n,a,e,s,r){const o=H("PopperContent"),i=H("Popper");return p(),L(i,Ta({ref:"popper"},t.$attrs,{theme:t.theme,"target-nodes":t.targetNodes,"popper-node":()=>t.$refs.popperContent.$el,onApplyShow:t.onShow,onApplyHide:t.onHide}),{default:z(({popperId:l,isShown:c,shouldMountContent:d,skipTransition:u,autoHide:m,hide:h,handleResize:_,onResize:E,classes:y,result:b})=>[v(o,{ref:"popperContent",class:oe({"v-popper--tooltip-loading":t.loading}),"popper-id":l,theme:t.theme,shown:c,mounted:d,"skip-transition":u,"auto-hide":m,"handle-resize":_,classes:y,result:b,onHide:h,onResize:E},{default:z(()=>[t.html?(p(),g("div",{key:0,innerHTML:t.finalContent},null,8,c6)):(p(),g("div",{key:1,textContent:C(t.finalContent)},null,8,d6))]),_:2},1032,["class","popper-id","theme","shown","mounted","skip-transition","auto-hide","handle-resize","classes","result","onHide","onResize"])]),_:1},16,["theme","target-nodes","popper-node","onApplyShow","onApplyHide"])}const p6=fh(l6,[["render",u6]]),yx="v-popper--has-tooltip";function f6(t,n){let a=t.placement;if(!a&&n)for(const e of bx)n[e]&&(a=e);return a||(a=Mu(t.theme||"tooltip","placement")),a}function Ix(t,n,a){let e;const s=typeof n;return s==="string"?e={content:n}:n&&s==="object"?e=n:e={content:!1},e.placement=f6(e,a),e.targetNodes=()=>[t],e.referenceNode=()=>t,e}let w_,Lu,m6=0;function h6(){if(w_)return;Lu=P([]),w_=a2({name:"VTooltipDirectiveApp",setup(){return{directives:Lu}},render(){return this.directives.map(n=>pn(p6,{...n.options,shown:n.shown||n.options.shown,key:n.id}))},devtools:{hide:!0}});const t=document.createElement("div");document.body.appendChild(t),w_.mount(t)}function _6(t,n,a){h6();const e=P(Ix(t,n,a)),s=P(!1),r={id:m6++,options:e,shown:s};return Lu.value.push(r),t.classList&&t.classList.add(yx),t.$_popper={options:e,item:r,show(){s.value=!0},hide(){s.value=!1}}}function Cx(t){if(t.$_popper){const n=Lu.value.indexOf(t.$_popper.item);n!==-1&&Lu.value.splice(n,1),delete t.$_popper,delete t.$_popperOldShown,delete t.$_popperMountTarget}t.classList&&t.classList.remove(yx)}function MA(t,{value:n,modifiers:a}){const e=Ix(t,n,a);if(!e.content||Mu(e.theme||"tooltip","disabled"))Cx(t);else{let s;t.$_popper?(s=t.$_popper,s.options.value=e):s=_6(t,n,a),typeof n.shown<"u"&&n.shown!==t.$_popperOldShown&&(t.$_popperOldShown=n.shown,n.shown?s.show():s.hide())}}const g6={beforeMount:MA,updated:MA,beforeUnmount(t){Cx(t)}};function LA(t){t.addEventListener("mousedown",sm),t.addEventListener("click",sm),t.addEventListener("touchstart",Ox,nd?{passive:!0}:!1)}function DA(t){t.removeEventListener("mousedown",sm),t.removeEventListener("click",sm),t.removeEventListener("touchstart",Ox),t.removeEventListener("touchend",Nx),t.removeEventListener("touchcancel",xx)}function sm(t){const n=t.currentTarget;t.closePopover=!n.$_vclosepopover_touch,t.closeAllPopover=n.$_closePopoverModifiers&&!!n.$_closePopoverModifiers.all}function Ox(t){if(t.changedTouches.length===1){const n=t.currentTarget;n.$_vclosepopover_touch=!0;const a=t.changedTouches[0];n.$_vclosepopover_touchPoint=a,n.addEventListener("touchend",Nx),n.addEventListener("touchcancel",xx)}}function Nx(t){const n=t.currentTarget;if(n.$_vclosepopover_touch=!1,t.changedTouches.length===1){const a=t.changedTouches[0],e=n.$_vclosepopover_touchPoint;t.closePopover=Math.abs(a.screenY-e.screenY)<20&&Math.abs(a.screenX-e.screenX)<20,t.closeAllPopover=n.$_closePopoverModifiers&&!!n.$_closePopoverModifiers.all}}function xx(t){const n=t.currentTarget;n.$_vclosepopover_touch=!1}const b6={beforeMount(t,{value:n,modifiers:a}){t.$_closePopoverModifiers=a,(typeof n>"u"||n)&&LA(t)},updated(t,{value:n,oldValue:a,modifiers:e}){t.$_closePopoverModifiers=e,n!==a&&(typeof n>"u"||n?LA(t):DA(t))},beforeUnmount(t){DA(t)}};function v6(t,n={}){t.$_vTooltipInstalled||(t.$_vTooltipInstalled=!0,_x(Zo,n),t.directive("tooltip",g6),t.directive("close-popper",b6),t.component("VTooltip",i6),t.component("VDropdown",o6),t.component("VMenu",r6))}const E6={version:"5.2.2",install:v6,options:Zo};var M_,PA;function S6(){if(PA)return M_;PA=1;function t(n){const a=n.regex,e=a.concat(/[\p{L}_]/u,a.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),s=/[\p{L}0-9._:-]+/u,r={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},o={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},i=n.inherit(o,{begin:/\(/,end:/\)/}),l=n.inherit(n.APOS_STRING_MODE,{className:"string"}),c=n.inherit(n.QUOTE_STRING_MODE,{className:"string"}),d={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:s,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[r]},{begin:/'/,end:/'/,contains:[r]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[o,c,l,i,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[o,i,c,l]}]}]},n.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},r,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[c]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[d],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[d],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:a.concat(/</,a.lookahead(a.concat(e,a.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:e,relevance:0,starts:d}]},{className:"tag",begin:a.concat(/<\//,a.lookahead(a.concat(e,/>/))),contains:[{className:"name",begin:e,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}return M_=t,M_}var L_,kA;function T6(){if(kA)return L_;kA=1;function t(n){const a=n.regex,e={},s={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[e]}]};Object.assign(e,{className:"variable",variants:[{begin:a.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},s]});const r={className:"subst",begin:/\$\(/,end:/\)/,contains:[n.BACKSLASH_ESCAPE]},o=n.inherit(n.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),i={begin:/<<-?\s*(?=\w+)/,starts:{contains:[n.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},l={className:"string",begin:/"/,end:/"/,contains:[n.BACKSLASH_ESCAPE,e,r]};r.contains.push(l);const c={match:/\\"/},d={className:"string",begin:/'/,end:/'/},u={match:/\\'/},m={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},n.NUMBER_MODE,e]},h=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],_=n.SHEBANG({binary:`(${h.join("|")})`,relevance:10}),E={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[n.inherit(n.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},y=["if","then","else","elif","fi","for","while","until","in","do","done","case","esac","function","select"],b=["true","false"],A={match:/(\/[a-z._-]+)+/},T=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],I=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],N=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],x=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:y,literal:b,built_in:[...T,...I,"set","shopt",...N,...x]},contains:[_,n.SHEBANG(),E,m,o,i,A,l,c,d,u,e]}}return L_=t,L_}var D_,BA;function A6(){if(BA)return D_;BA=1;function t(n){const a=n.regex,e=n.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),s="decltype\\(auto\\)",r="[a-zA-Z_]\\w*::",i="("+s+"|"+a.optional(r)+"[a-zA-Z_]\\w*"+a.optional("<[^<>]+>")+")",l={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},d={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[n.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},n.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},u={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},m={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef elifdef elifndef include"},contains:[{begin:/\\\n/,relevance:0},n.inherit(d,{className:"string"}),{className:"string",begin:/<.*?>/},e,n.C_BLOCK_COMMENT_MODE]},h={className:"title",begin:a.optional(r)+n.IDENT_RE,relevance:0},_=a.optional(r)+n.IDENT_RE+"\\s*\\(",b={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","typeof","typeof_unqual","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_BitInt","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal96","_Decimal128","_Decimal64x","_Decimal128x","_Float16","_Float32","_Float64","_Float128","_Float32x","_Float64x","_Float128x","const","static","constexpr","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},A=[m,l,e,n.C_BLOCK_COMMENT_MODE,u,d],T={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:b,contains:A.concat([{begin:/\(/,end:/\)/,keywords:b,contains:A.concat(["self"]),relevance:0}]),relevance:0},I={begin:"("+i+"[\\*&\\s]+)+"+_,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:b,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:s,keywords:b,relevance:0},{begin:_,returnBegin:!0,contains:[n.inherit(h,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:b,relevance:0,contains:[e,n.C_BLOCK_COMMENT_MODE,d,u,l,{begin:/\(/,end:/\)/,keywords:b,relevance:0,contains:["self",e,n.C_BLOCK_COMMENT_MODE,d,u,l]}]},l,e,n.C_BLOCK_COMMENT_MODE,m]};return{name:"C",aliases:["h"],keywords:b,disableAutodetect:!0,illegal:"</",contains:[].concat(T,I,A,[m,{begin:n.IDENT_RE+"::",keywords:b},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},n.TITLE_MODE]}]),exports:{preprocessor:m,strings:d,keywords:b}}}return D_=t,D_}var P_,FA;function y6(){if(FA)return P_;FA=1;function t(n){const a=n.regex,e=n.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),s="decltype\\(auto\\)",r="[a-zA-Z_]\\w*::",i="(?!struct)("+s+"|"+a.optional(r)+"[a-zA-Z_]\\w*"+a.optional("<[^<>]+>")+")",l={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},d={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[n.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},n.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},u={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},m={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},n.inherit(d,{className:"string"}),{className:"string",begin:/<.*?>/},e,n.C_BLOCK_COMMENT_MODE]},h={className:"title",begin:a.optional(r)+n.IDENT_RE,relevance:0},_=a.optional(r)+n.IDENT_RE+"\\s*\\(",E=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],y=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],b=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],A=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],N={type:y,keyword:E,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:b},x={className:"function.dispatch",relevance:0,keywords:{_hint:A},begin:a.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,n.IDENT_RE,a.lookahead(/(<[^<>]+>|)\s*\(/))},R=[x,m,l,e,n.C_BLOCK_COMMENT_MODE,u,d],M={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:N,contains:R.concat([{begin:/\(/,end:/\)/,keywords:N,contains:R.concat(["self"]),relevance:0}]),relevance:0},w={className:"function",begin:"("+i+"[\\*&\\s]+)+"+_,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:N,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:s,keywords:N,relevance:0},{begin:_,returnBegin:!0,contains:[h],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[d,u]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:N,relevance:0,contains:[e,n.C_BLOCK_COMMENT_MODE,d,u,l,{begin:/\(/,end:/\)/,keywords:N,relevance:0,contains:["self",e,n.C_BLOCK_COMMENT_MODE,d,u,l]}]},l,e,n.C_BLOCK_COMMENT_MODE,m]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:N,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(M,w,x,R,[m,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function)\\s*<(?!<)",end:">",keywords:N,contains:["self",l]},{begin:n.IDENT_RE+"::",keywords:N},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}return P_=t,P_}var k_,UA;function I6(){if(UA)return k_;UA=1;function t(n){const a=["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],e=["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"],s=["default","false","null","true"],r=["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"],o=["add","alias","and","ascending","async","await","by","descending","equals","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","remove","select","set","unmanaged","value|0","var","when","where","with","yield"],i={keyword:r.concat(o),built_in:a,literal:s},l=n.inherit(n.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),c={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},d={className:"string",begin:/"""("*)(?!")(.|\n)*?"""\1/,relevance:1},u={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},m=n.inherit(u,{illegal:/\n/}),h={className:"subst",begin:/\{/,end:/\}/,keywords:i},_=n.inherit(h,{illegal:/\n/}),E={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},n.BACKSLASH_ESCAPE,_]},y={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},h]},b=n.inherit(y,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},_]});h.contains=[y,E,u,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,c,n.C_BLOCK_COMMENT_MODE],_.contains=[b,E,m,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,c,n.inherit(n.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const A={variants:[d,y,E,u,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},T={begin:"<",end:">",contains:[{beginKeywords:"in out"},l]},I=n.IDENT_RE+"(<"+n.IDENT_RE+"(\\s*,\\s*"+n.IDENT_RE+")*>)?(\\[\\])?",N={begin:"@"+n.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:i,illegal:/::/,contains:[n.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},A,c,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},l,T,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[l,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[l,T,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+I+"\\s+)+"+n.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:i,contains:[{beginKeywords:e.join(" "),relevance:0},{begin:n.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[n.TITLE_MODE,T],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:i,relevance:0,contains:[A,c,n.C_BLOCK_COMMENT_MODE]},n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE]},N]}}return k_=t,k_}var B_,$A;function C6(){if($A)return B_;$A=1;const t=c=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:c.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[c.APOS_STRING_MODE,c.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:c.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),n=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],a=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],e=[...n,...a],s=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),r=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),o=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),i=["accent-color","align-content","align-items","align-self","alignment-baseline","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-end-end-radius","border-end-start-radius","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","cx","cy","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","empty-cells","enable-background","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","flood-color","flood-opacity","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","kerning","justify-content","justify-items","justify-self","left","letter-spacing","lighting-color","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","marker","marker-end","marker-mid","marker-start","mask","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","scale","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","speak","speak-as","src","tab-size","table-layout","text-anchor","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-offset","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","vector-effect","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index"].sort().reverse();function l(c){const d=c.regex,u=t(c),m={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},h="and or not only",_=/@-?\w[\w]*(-\w+)*/,E="[a-zA-Z-][a-zA-Z0-9_-]*",y=[c.APOS_STRING_MODE,c.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[u.BLOCK_COMMENT,m,u.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+E,relevance:0},u.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+r.join("|")+")"},{begin:":(:)?("+o.join("|")+")"}]},u.CSS_VARIABLE,{className:"attribute",begin:"\\b("+i.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[u.BLOCK_COMMENT,u.HEXCOLOR,u.IMPORTANT,u.CSS_NUMBER_MODE,...y,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...y,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},u.FUNCTION_DISPATCH]},{begin:d.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:_},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:h,attribute:s.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...y,u.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+e.join("|")+")\\b"}]}}return B_=l,B_}var F_,GA;function O6(){if(GA)return F_;GA=1;function t(n){const a=n.regex,e={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},s={begin:"^[-\\*]{3,}",end:"$"},r={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},o={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},i={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},l=/[A-Za-z][A-Za-z0-9+.-]*/,c={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:a.concat(/\[.+?\]\(/,l,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},d={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},u={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},m=n.inherit(d,{contains:[]}),h=n.inherit(u,{contains:[]});d.contains.push(h),u.contains.push(m);let _=[e,c];return[d,u,m,h].forEach(A=>{A.contains=A.contains.concat(_)}),_=_.concat(d,u),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:_},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:_}]}]},e,o,d,u,{className:"quote",begin:"^>\\s+",contains:_,end:"$"},r,s,c,i,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}return F_=t,F_}var U_,VA;function N6(){if(VA)return U_;VA=1;function t(n){const a=n.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:a.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:a.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}return U_=t,U_}var $_,HA;function x6(){if(HA)return $_;HA=1;function t(n){const a=n.regex,e="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",s=a.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),r=a.concat(s,/(::\w+)*/),i={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield",...["include","extend","prepend","public","private","protected","raise","throw"]],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},l={className:"doctag",begin:"@[A-Za-z]+"},c={begin:"#<",end:">"},d=[n.COMMENT("#","$",{contains:[l]}),n.COMMENT("^=begin","^=end",{contains:[l],relevance:10}),n.COMMENT("^__END__",n.MATCH_NOTHING_RE)],u={className:"subst",begin:/#\{/,end:/\}/,keywords:i},m={className:"string",contains:[n.BACKSLASH_ESCAPE,u],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:a.concat(/<<[-~]?'?/,a.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[n.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[n.BACKSLASH_ESCAPE,u]})]}]},h="[1-9](_?[0-9])*|0",_="[0-9](_?[0-9])*",E={className:"number",relevance:0,variants:[{begin:`\\b(${h})(\\.(${_}))?([eE][+-]?(${_})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},y={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:i}]},R=[m,{variants:[{match:[/class\s+/,r,/\s+<\s+/,r]},{match:[/\b(class|module)\s+/,r]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:i},{match:[/(include|extend)\s+/,r],scope:{2:"title.class"},keywords:i},{relevance:0,match:[r,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:s,scope:"title.class"},{match:[/def/,/\s+/,e],scope:{1:"keyword",3:"title.function"},contains:[y]},{begin:n.IDENT_RE+"::"},{className:"symbol",begin:n.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[m,{begin:e}],relevance:0},E,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:i},{begin:"("+n.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[n.BACKSLASH_ESCAPE,u],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(c,d),relevance:0}].concat(c,d);u.contains=R,y.contains=R;const B=[{begin:/^\s*=>/,starts:{end:"$",contains:R}},{className:"meta.prompt",begin:"^("+"[>?]>"+"|"+"[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]"+"|"+"(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>"+")(?=[ ])",starts:{end:"$",keywords:i,contains:R}}];return d.unshift(c),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:i,illegal:/\/\*/,contains:[n.SHEBANG({binary:"ruby"})].concat(B).concat(d).concat(R)}}return $_=t,$_}var G_,jA;function R6(){if(jA)return G_;jA=1;function t(n){const o={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:o,illegal:"</",contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,{className:"string",variants:[n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{match:/-?\b0[xX]\.[a-fA-F0-9](_?[a-fA-F0-9])*[pP][+-]?\d(_?\d)*i?/,relevance:0},{match:/-?\b0[xX](_?[a-fA-F0-9])+((\.([a-fA-F0-9](_?[a-fA-F0-9])*)?)?[pP][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b0[oO](_?[0-7])*i?/,relevance:0},{match:/-?\.\d(_?\d)*([eE][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b\d(_?\d)*(\.(\d(_?\d)*)?)?([eE][+-]?\d(_?\d)*)?i?/,relevance:0}]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[n.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:o,illegal:/["']/}]}]}}return G_=t,G_}var V_,WA;function w6(){if(WA)return V_;WA=1;function t(n){const a=n.regex,e=/[_A-Za-z][_0-9A-Za-z]*/;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[n.HASH_COMMENT_MODE,n.QUOTE_STRING_MODE,n.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:a.concat(e,a.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}}return V_=t,V_}var H_,zA;function M6(){if(zA)return H_;zA=1;function t(n){const a=n.regex,e={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:n.NUMBER_RE}]},s=n.COMMENT();s.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const r={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},o={className:"literal",begin:/\bon|off|true|false|yes|no\b/},i={className:"string",contains:[n.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},l={begin:/\[/,end:/\]/,contains:[s,o,r,i,e,"self"],relevance:0},c=/[A-Za-z0-9_-]+/,d=/"(\\"|[^"])*"/,u=/'[^']*'/,m=a.either(c,d,u),h=a.concat(m,"(\\s*\\.\\s*",m,")*",a.lookahead(/\s*=\s*[^#\s]/));return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[s,{className:"section",begin:/\[+/,end:/\]+/},{begin:h,className:"attr",starts:{end:/$/,contains:[s,l,o,r,i,e]}}]}}return H_=t,H_}var j_,YA;function L6(){if(YA)return j_;YA=1;var t="[0-9](_*[0-9])*",n=`\\.(${t})`,a="[0-9a-fA-F](_*[0-9a-fA-F])*",e={className:"number",variants:[{begin:`(\\b(${t})((${n})|\\.)?|(${n}))[eE][+-]?(${t})[fFdD]?\\b`},{begin:`\\b(${t})((${n})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${n})[fFdD]?\\b`},{begin:`\\b(${t})[fFdD]\\b`},{begin:`\\b0[xX]((${a})\\.?|(${a})?\\.(${a}))[pP][+-]?(${t})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${a})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function s(o,i,l){return l===-1?"":o.replace(i,c=>s(o,i,l-1))}function r(o){const i=o.regex,l="[-a-zA-Z_$][-a-zA-Z_$0-9]*",c=l+s("(?:<"+l+"~~~(?:\\s*,\\s*"+l+"~~~)*>)?",/~~~/g,2),_={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits","goto"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},E={className:"meta",begin:"@"+l,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},y={className:"params",begin:/\(/,end:/\)/,keywords:_,relevance:0,contains:[o.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:_,illegal:/<\/|#/,contains:[o.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},o.C_LINE_COMMENT_MODE,o.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[o.BACKSLASH_ESCAPE]},o.APOS_STRING_MODE,o.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,l],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[i.concat(/(?!else)/,l),/\s+/,l,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,l],className:{1:"keyword",3:"title.class"},contains:[y,o.C_LINE_COMMENT_MODE,o.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+c+"\\s+)",o.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:_,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:_,relevance:0,contains:[E,o.APOS_STRING_MODE,o.QUOTE_STRING_MODE,e,o.C_BLOCK_COMMENT_MODE]},o.C_LINE_COMMENT_MODE,o.C_BLOCK_COMMENT_MODE]},e,E]}}return j_=r,j_}var W_,KA;function D6(){if(KA)return W_;KA=1;const t="[A-Za-z$_][0-9A-Za-z$_]*",n=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],a=["true","false","null","undefined","NaN","Infinity"],e=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],s=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],r=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],o=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],i=[].concat(r,e,s);function l(c){const d=c.regex,u=(Ce,{after:ue})=>{const ge="</"+Ce[0].slice(1);return Ce.input.indexOf(ge,ue)!==-1},m=t,h={begin:"<>",end:"</>"},_=/<[A-Za-z0-9\\._:-]+\s*\/>/,E={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(Ce,ue)=>{const ge=Ce[0].length+Ce.index,Me=Ce.input[ge];if(Me==="<"||Me===","){ue.ignoreMatch();return}Me===">"&&(u(Ce,{after:ge})||ue.ignoreMatch());let We;const Ue=Ce.input.substring(ge);if(We=Ue.match(/^\s*=/)){ue.ignoreMatch();return}if((We=Ue.match(/^\s+extends\s+/))&&We.index===0){ue.ignoreMatch();return}}},y={$pattern:t,keyword:n,literal:a,built_in:i,"variable.language":o},b="[0-9](_?[0-9])*",A=`\\.(${b})`,T="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",I={className:"number",variants:[{begin:`(\\b(${T})((${A})|\\.)?|(${A}))[eE][+-]?(${b})\\b`},{begin:`\\b(${T})\\b((${A})\\b|\\.)?|(${A})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},N={className:"subst",begin:"\\$\\{",end:"\\}",keywords:y,contains:[]},x={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[c.BACKSLASH_ESCAPE,N],subLanguage:"xml"}},R={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[c.BACKSLASH_ESCAPE,N],subLanguage:"css"}},M={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[c.BACKSLASH_ESCAPE,N],subLanguage:"graphql"}},w={className:"string",begin:"`",end:"`",contains:[c.BACKSLASH_ESCAPE,N]},B={className:"comment",variants:[c.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:m+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),c.C_BLOCK_COMMENT_MODE,c.C_LINE_COMMENT_MODE]},k=[c.APOS_STRING_MODE,c.QUOTE_STRING_MODE,x,R,M,w,{match:/\$\d+/},I];N.contains=k.concat({begin:/\{/,end:/\}/,keywords:y,contains:["self"].concat(k)});const V=[].concat(B,N.contains),F=V.concat([{begin:/(\s*)\(/,end:/\)/,keywords:y,contains:["self"].concat(V)}]),$={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:y,contains:F},Y={variants:[{match:[/class/,/\s+/,m,/\s+/,/extends/,/\s+/,d.concat(m,"(",d.concat(/\./,m),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,m],scope:{1:"keyword",3:"title.class"}}]},j={relevance:0,match:d.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...e,...s]}},U={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},J={variants:[{match:[/function/,/\s+/,m,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[$],illegal:/%/},te={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function q(Ce){return d.concat("(?!",Ce.join("|"),")")}const K={match:d.concat(/\b/,q([...r,"super","import"].map(Ce=>`${Ce}\\s*\\(`)),m,d.lookahead(/\s*\(/)),className:"title.function",relevance:0},W={begin:d.concat(/\./,d.lookahead(d.concat(m,/(?![0-9A-Za-z$_(])/))),end:m,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},ee={match:[/get|set/,/\s+/,m,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},$]},ae="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+c.UNDERSCORE_IDENT_RE+")\\s*=>",ve={match:[/const|var|let/,/\s+/,m,/\s*/,/=\s*/,/(async\s*)?/,d.lookahead(ae)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[$]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:y,exports:{PARAMS_CONTAINS:F,CLASS_REFERENCE:j},illegal:/#(?![$_A-z])/,contains:[c.SHEBANG({label:"shebang",binary:"node",relevance:5}),U,c.APOS_STRING_MODE,c.QUOTE_STRING_MODE,x,R,M,w,B,{match:/\$\d+/},I,j,{className:"attr",begin:m+d.lookahead(":"),relevance:0},ve,{begin:"("+c.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[B,c.REGEXP_MODE,{className:"function",begin:ae,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:c.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:y,contains:F}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:h.begin,end:h.end},{match:_},{begin:E.begin,"on:begin":E.isTrulyOpeningTag,end:E.end}],subLanguage:"xml",contains:[{begin:E.begin,end:E.end,skip:!0,contains:["self"]}]}]},J,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+c.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[$,c.inherit(c.TITLE_MODE,{begin:m,className:"title.function"})]},{match:/\.\.\./,relevance:0},W,{match:"\\$"+m,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[$]},K,te,Y,ee,{match:/\$[(.]/}]}}return W_=l,W_}var z_,XA;function P6(){if(XA)return z_;XA=1;function t(n){const a={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},e={match:/[{}[\],:]/,className:"punctuation",relevance:0},s=["true","false","null"],r={scope:"literal",beginKeywords:s.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:s},contains:[a,e,n.QUOTE_STRING_MODE,r,n.C_NUMBER_MODE,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}return z_=t,z_}var Y_,qA;function k6(){if(qA)return Y_;qA=1;var t="[0-9](_*[0-9])*",n=`\\.(${t})`,a="[0-9a-fA-F](_*[0-9a-fA-F])*",e={className:"number",variants:[{begin:`(\\b(${t})((${n})|\\.)?|(${n}))[eE][+-]?(${t})[fFdD]?\\b`},{begin:`\\b(${t})((${n})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${n})[fFdD]?\\b`},{begin:`\\b(${t})[fFdD]\\b`},{begin:`\\b0[xX]((${a})\\.?|(${a})?\\.(${a}))[pP][+-]?(${t})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${a})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function s(r){const o={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},i={className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},l={className:"symbol",begin:r.UNDERSCORE_IDENT_RE+"@"},c={className:"subst",begin:/\$\{/,end:/\}/,contains:[r.C_NUMBER_MODE]},d={className:"variable",begin:"\\$"+r.UNDERSCORE_IDENT_RE},u={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[d,c]},{begin:"'",end:"'",illegal:/\n/,contains:[r.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[r.BACKSLASH_ESCAPE,d,c]}]};c.contains.push(u);const m={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+r.UNDERSCORE_IDENT_RE+")?"},h={className:"meta",begin:"@"+r.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[r.inherit(u,{className:"string"}),"self"]}]},_=e,E=r.COMMENT("/\\*","\\*/",{contains:[r.C_BLOCK_COMMENT_MODE]}),y={variants:[{className:"type",begin:r.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},b=y;return b.variants[1].contains=[y],y.variants[1].contains=[b],{name:"Kotlin",aliases:["kt","kts"],keywords:o,contains:[r.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),r.C_LINE_COMMENT_MODE,E,i,l,m,h,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:o,relevance:5,contains:[{begin:r.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[r.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:o,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[y,r.C_LINE_COMMENT_MODE,E],relevance:0},r.C_LINE_COMMENT_MODE,E,m,h,u,r.C_NUMBER_MODE]},E]},{begin:[/class|interface|trait/,/\s+/,r.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},r.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},m,h]},u,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:`
`},_]}}return Y_=s,Y_}var K_,ZA;function B6(){if(ZA)return K_;ZA=1;const t=d=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:d.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[d.APOS_STRING_MODE,d.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:d.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),n=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],a=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],e=[...n,...a],s=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),r=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),o=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),i=["accent-color","align-content","align-items","align-self","alignment-baseline","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-end-end-radius","border-end-start-radius","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","cx","cy","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","empty-cells","enable-background","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","flood-color","flood-opacity","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","kerning","justify-content","justify-items","justify-self","left","letter-spacing","lighting-color","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","marker","marker-end","marker-mid","marker-start","mask","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","scale","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","speak","speak-as","src","tab-size","table-layout","text-anchor","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-offset","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","vector-effect","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index"].sort().reverse(),l=r.concat(o).sort().reverse();function c(d){const u=t(d),m=l,h="and or not only",_="[\\w-]+",E="("+_+"|@\\{"+_+"\\})",y=[],b=[],A=function(V){return{className:"string",begin:"~?"+V+".*?"+V}},T=function(V,F,$){return{className:V,begin:F,relevance:$}},I={$pattern:/[a-z-]+/,keyword:h,attribute:s.join(" ")},N={begin:"\\(",end:"\\)",contains:b,keywords:I,relevance:0};b.push(d.C_LINE_COMMENT_MODE,d.C_BLOCK_COMMENT_MODE,A("'"),A('"'),u.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},u.HEXCOLOR,N,T("variable","@@?"+_,10),T("variable","@\\{"+_+"\\}"),T("built_in","~?`[^`]*?`"),{className:"attribute",begin:_+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},u.IMPORTANT,{beginKeywords:"and not"},u.FUNCTION_DISPATCH);const x=b.concat({begin:/\{/,end:/\}/,contains:y}),R={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(b)},M={begin:E+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},u.CSS_VARIABLE,{className:"attribute",begin:"\\b("+i.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:b}}]},w={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:I,returnEnd:!0,contains:b,relevance:0}},D={className:"variable",variants:[{begin:"@"+_+"\\s*:",relevance:15},{begin:"@"+_}],starts:{end:"[;}]",returnEnd:!0,contains:x}},B={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:E,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:`[<='$"]`,relevance:0,contains:[d.C_LINE_COMMENT_MODE,d.C_BLOCK_COMMENT_MODE,R,T("keyword","all\\b"),T("variable","@\\{"+_+"\\}"),{begin:"\\b("+e.join("|")+")\\b",className:"selector-tag"},u.CSS_NUMBER_MODE,T("selector-tag",E,0),T("selector-id","#"+E),T("selector-class","\\."+E,0),T("selector-tag","&",0),u.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+r.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+o.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:x},{begin:"!important"},u.FUNCTION_DISPATCH]},k={begin:_+`:(:)?(${m.join("|")})`,returnBegin:!0,contains:[B]};return y.push(d.C_LINE_COMMENT_MODE,d.C_BLOCK_COMMENT_MODE,w,D,k,M,B,R,u.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:`[=>'/<($"]`,contains:y}}return K_=c,K_}var X_,QA;function F6(){if(QA)return X_;QA=1;function t(n){const a="\\[=*\\[",e="\\]=*\\]",s={begin:a,end:e,contains:["self"]},r=[n.COMMENT("--(?!"+a+")","$"),n.COMMENT("--"+a,e,{contains:[s],relevance:10})];return{name:"Lua",keywords:{$pattern:n.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:r.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[n.inherit(n.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:r}].concat(r)},n.C_NUMBER_MODE,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,{className:"string",begin:a,end:e,contains:[s],relevance:5}])}}return X_=t,X_}var q_,JA;function U6(){if(JA)return q_;JA=1;function t(n){const a={className:"variable",variants:[{begin:"\\$\\("+n.UNDERSCORE_IDENT_RE+"\\)",contains:[n.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},e={className:"string",begin:/"/,end:/"/,contains:[n.BACKSLASH_ESCAPE,a]},s={className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[a]},r={begin:"^"+n.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},o={className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},i={className:"section",begin:/^[^\s]+:/,end:/$/,contains:[a]};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[n.HASH_COMMENT_MODE,a,e,s,r,o,i]}}return q_=t,q_}var Z_,ey;function $6(){if(ey)return Z_;ey=1;function t(n){const a=n.regex,e=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","class","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","field","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","method","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],s=/[dualxmsipngr]{0,12}/,r={$pattern:/[\w.]+/,keyword:e.join(" ")},o={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:r},i={begin:/->\{/,end:/\}/},l={scope:"attr",match:/\s+:\s*\w+(\s*\(.*?\))?/},c={scope:"variable",variants:[{begin:/\$\d/},{begin:a.concat(/[$%@](?!")(\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@](?!")[^\s\w{=]|\$=/,relevance:0}],contains:[l]},d={className:"number",variants:[{match:/0?\.[0-9][0-9_]+\b/},{match:/\bv?(0|[1-9][0-9_]*(\.[0-9_]+)?|[1-9][0-9_]*)\b/},{match:/\b0[0-7][0-7_]*\b/},{match:/\b0x[0-9a-fA-F][0-9a-fA-F_]*\b/},{match:/\b0b[0-1][0-1_]*\b/}],relevance:0},u=[n.BACKSLASH_ESCAPE,o,c],m=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],h=(y,b,A="\\1")=>{const T=A==="\\1"?A:a.concat(A,b);return a.concat(a.concat("(?:",y,")"),b,/(?:\\.|[^\\\/])*?/,T,/(?:\\.|[^\\\/])*?/,A,s)},_=(y,b,A)=>a.concat(a.concat("(?:",y,")"),b,/(?:\\.|[^\\\/])*?/,A,s),E=[c,n.HASH_COMMENT_MODE,n.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),i,{className:"string",contains:u,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[n.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},d,{begin:"(\\/\\/|"+n.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[n.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:h("s|tr|y",a.either(...m,{capture:!0}))},{begin:h("s|tr|y","\\(","\\)")},{begin:h("s|tr|y","\\[","\\]")},{begin:h("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:_("(?:m|qr)?",/\//,/\//)},{begin:_("m|qr",a.either(...m,{capture:!0}),/\1/)},{begin:_("m|qr",/\(/,/\)/)},{begin:_("m|qr",/\[/,/\]/)},{begin:_("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub method",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[n.TITLE_MODE,l]},{className:"class",beginKeywords:"class",end:"[;{]",excludeEnd:!0,relevance:5,contains:[n.TITLE_MODE,l,d]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return o.contains=E,i.contains=E,{name:"Perl",aliases:["pl","pm"],keywords:r,contains:E}}return Z_=t,Z_}var Q_,ty;function G6(){if(ty)return Q_;ty=1;function t(n){const a={className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},e=/[a-zA-Z@][a-zA-Z0-9_]*/,l={"variable.language":["this","super"],$pattern:e,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},c={$pattern:e,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:l,illegal:"</",contains:[a,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,n.C_NUMBER_MODE,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[n.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},n.inherit(n.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+c.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:c,contains:[n.UNDERSCORE_TITLE_MODE]},{begin:"\\."+n.UNDERSCORE_IDENT_RE,relevance:0}]}}return Q_=t,Q_}var J_,ny;function V6(){if(ny)return J_;ny=1;function t(n){const a=n.regex,e=/(?![A-Za-z0-9])(?![$])/,s=a.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,e),r=a.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,e),o={scope:"variable",match:"\\$+"+s},i={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},l={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},c=n.inherit(n.APOS_STRING_MODE,{illegal:null}),d=n.inherit(n.QUOTE_STRING_MODE,{illegal:null,contains:n.QUOTE_STRING_MODE.contains.concat(l)}),u={begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:n.QUOTE_STRING_MODE.contains.concat(l),"on:begin":(F,$)=>{$.data._beginMatch=F[1]||F[2]},"on:end":(F,$)=>{$.data._beginMatch!==F[1]&&$.ignoreMatch()}},m=n.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/}),h=`[ 	
]`,_={scope:"string",variants:[d,c,u,m]},E={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},y=["false","null","true"],b=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],A=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],I={keyword:b,literal:(F=>{const $=[];return F.forEach(Y=>{$.push(Y),Y.toLowerCase()===Y?$.push(Y.toUpperCase()):$.push(Y.toLowerCase())}),$})(y),built_in:A},N=F=>F.map($=>$.replace(/\|\d+$/,"")),x={variants:[{match:[/new/,a.concat(h,"+"),a.concat("(?!",N(A).join("\\b|"),"\\b)"),r],scope:{1:"keyword",4:"title.class"}}]},R=a.concat(s,"\\b(?!\\()"),M={variants:[{match:[a.concat(/::/,a.lookahead(/(?!class\b)/)),R],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[r,a.concat(/::/,a.lookahead(/(?!class\b)/)),R],scope:{1:"title.class",3:"variable.constant"}},{match:[r,a.concat("::",a.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[r,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},w={scope:"attr",match:a.concat(s,a.lookahead(":"),a.lookahead(/(?!::)/))},D={relevance:0,begin:/\(/,end:/\)/,keywords:I,contains:[w,o,M,n.C_BLOCK_COMMENT_MODE,_,E,x]},B={relevance:0,match:[/\b/,a.concat("(?!fn\\b|function\\b|",N(b).join("\\b|"),"|",N(A).join("\\b|"),"\\b)"),s,a.concat(h,"*"),a.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[D]};D.contains.push(B);const k=[w,M,n.C_BLOCK_COMMENT_MODE,_,E,x],V={begin:a.concat(/#\[\s*/,r),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:y,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:y,keyword:["new","array"]},contains:["self",...k]},...k,{scope:"meta",match:r}]};return{case_insensitive:!1,keywords:I,contains:[V,n.HASH_COMMENT_MODE,n.COMMENT("//","$"),n.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:n.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},i,{scope:"variable.language",match:/\$this\b/},o,B,M,{match:[/const/,/\s/,s],scope:{1:"keyword",3:"variable.constant"}},x,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},n.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:I,contains:["self",o,M,n.C_BLOCK_COMMENT_MODE,_,E]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},n.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[n.inherit(n.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},n.UNDERSCORE_TITLE_MODE]},_,E]}}return J_=t,J_}var eg,ay;function H6(){if(ay)return eg;ay=1;function t(n){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},n.inherit(n.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),n.inherit(n.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}}return eg=t,eg}var tg,sy;function j6(){if(sy)return tg;sy=1;function t(n){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}}return tg=t,tg}var ng,oy;function W6(){if(oy)return ng;oy=1;function t(n){const a=n.regex,e=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),s=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],l={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:s,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},c={className:"meta",begin:/^(>>>|\.\.\.) /},d={className:"subst",begin:/\{/,end:/\}/,keywords:l,illegal:/#/},u={begin:/\{\{/,relevance:0},m={className:"string",contains:[n.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,c],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,c],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,c,u,d]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,c,u,d]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[n.BACKSLASH_ESCAPE,u,d]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[n.BACKSLASH_ESCAPE,u,d]},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},h="[0-9](_?[0-9])*",_=`(\\b(${h}))?\\.(${h})|\\b(${h})\\.`,E=`\\b|${s.join("|")}`,y={className:"number",relevance:0,variants:[{begin:`(\\b(${h})|(${_}))[eE][+-]?(${h})[jJ]?(?=${E})`},{begin:`(${_})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${E})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${E})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${E})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${E})`},{begin:`\\b(${h})[jJ](?=${E})`}]},b={className:"comment",begin:a.lookahead(/# type:/),end:/$/,keywords:l,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},A={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:["self",c,y,m,n.HASH_COMMENT_MODE]}]};return d.contains=[m,y,c],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:l,illegal:/(<\/|\?)|=>/,contains:[c,y,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},m,b,n.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,e],scope:{1:"keyword",3:"title.function"},contains:[A]},{variants:[{match:[/\bclass/,/\s+/,e,/\s*/,/\(\s*/,e,/\s*\)/]},{match:[/\bclass/,/\s+/,e]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[y,A,m]}]}}return ng=t,ng}var ag,ry;function z6(){if(ry)return ag;ry=1;function t(n){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}}return ag=t,ag}var sg,iy;function Y6(){if(iy)return sg;iy=1;function t(n){const a=n.regex,e=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,s=a.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),r=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,o=a.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:e,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[n.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:a.lookahead(a.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:e},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),n.HASH_COMMENT_MODE,{scope:"string",contains:[n.BACKSLASH_ESCAPE],variants:[n.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),n.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),n.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),n.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),n.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),n.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[r,s]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,s]},{scope:{1:"punctuation",2:"number"},match:[o,s]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,s]}]},{scope:{3:"operator"},match:[e,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:r},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:o},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}}return sg=t,sg}var og,ly;function K6(){if(ly)return og;ly=1;function t(n){const a=n.regex,e=/(r#)?/,s=a.concat(e,n.UNDERSCORE_IDENT_RE),r=a.concat(e,n.IDENT_RE),o={className:"title.function.invoke",relevance:0,begin:a.concat(/\b/,/(?!let|for|while|if|else|match\b)/,r,a.lookahead(/\s*\(/))},i="([ui](8|16|32|64|128|size)|f(32|64))?",l=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","union","unsafe","unsized","use","virtual","where","while","yield"],c=["true","false","Some","None","Ok","Err"],d=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],u=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:n.IDENT_RE+"!?",type:u,keyword:l,literal:c,built_in:d},illegal:"</",contains:[n.C_LINE_COMMENT_MODE,n.COMMENT("/\\*","\\*/",{contains:["self"]}),n.inherit(n.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'\\?(x\w{2}|u\w{4}|U\w{8}|.)'/}]},{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*/},{className:"number",variants:[{begin:"\\b0b([01_]+)"+i},{begin:"\\b0o([0-7_]+)"+i},{begin:"\\b0x([A-Fa-f0-9_]+)"+i},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+i}],relevance:0},{begin:[/fn/,/\s+/,s],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/,contains:[n.BACKSLASH_ESCAPE]}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,s],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,s,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,s],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,s],className:{1:"keyword",3:"title.class"}},{begin:n.IDENT_RE+"::",keywords:{keyword:"Self",built_in:d,type:u}},{className:"punctuation",begin:"->"},o]}}return og=t,og}var rg,cy;function X6(){if(cy)return rg;cy=1;const t=c=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:c.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[c.APOS_STRING_MODE,c.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:c.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),n=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],a=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],e=[...n,...a],s=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),r=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),o=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),i=["accent-color","align-content","align-items","align-self","alignment-baseline","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-end-end-radius","border-end-start-radius","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","cx","cy","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","empty-cells","enable-background","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","flood-color","flood-opacity","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","kerning","justify-content","justify-items","justify-self","left","letter-spacing","lighting-color","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","marker","marker-end","marker-mid","marker-start","mask","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","scale","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","speak","speak-as","src","tab-size","table-layout","text-anchor","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-offset","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","vector-effect","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index"].sort().reverse();function l(c){const d=t(c),u=o,m=r,h="@[a-z-]+",_="and or not only",y={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[c.C_LINE_COMMENT_MODE,c.C_BLOCK_COMMENT_MODE,d.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},d.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+e.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+m.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+u.join("|")+")"},y,{begin:/\(/,end:/\)/,contains:[d.CSS_NUMBER_MODE]},d.CSS_VARIABLE,{className:"attribute",begin:"\\b("+i.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[d.BLOCK_COMMENT,y,d.HEXCOLOR,d.CSS_NUMBER_MODE,c.QUOTE_STRING_MODE,c.APOS_STRING_MODE,d.IMPORTANT,d.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:h,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:_,attribute:s.join(" ")},contains:[{begin:h,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},y,c.QUOTE_STRING_MODE,c.APOS_STRING_MODE,d.HEXCOLOR,d.CSS_NUMBER_MODE]},d.FUNCTION_DISPATCH]}}return rg=l,rg}var ig,dy;function q6(){if(dy)return ig;dy=1;function t(n){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}return ig=t,ig}var lg,uy;function Z6(){if(uy)return lg;uy=1;function t(n){const a=n.regex,e=n.COMMENT("--","$"),s={className:"string",variants:[{begin:/'/,end:/'/,contains:[{begin:/''/}]}]},r={begin:/"/,end:/"/,contains:[{begin:/""/}]},o=["true","false","unknown"],i=["double precision","large object","with timezone","without timezone"],l=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],c=["add","asc","collation","desc","final","first","last","view"],d=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],u=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],m=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],h=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],_=u,E=[...d,...c].filter(I=>!u.includes(I)),y={className:"variable",begin:/@[a-z0-9][a-z0-9_]*/},b={className:"operator",begin:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},A={begin:a.concat(/\b/,a.either(..._),/\s*\(/),relevance:0,keywords:{built_in:_}};function T(I,{exceptions:N,when:x}={}){const R=x;return N=N||[],I.map(M=>M.match(/\|\d+$/)||N.includes(M)?M:R(M)?`${M}|0`:M)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:T(E,{when:I=>I.length<3}),literal:o,type:l,built_in:m},contains:[{begin:a.either(...h),relevance:0,keywords:{$pattern:/[\w\.]+/,keyword:E.concat(h),literal:o,type:l}},{className:"type",begin:a.either(...i)},A,y,s,r,n.C_NUMBER_MODE,n.C_BLOCK_COMMENT_MODE,e,b]}}return lg=t,lg}var cg,py;function Q6(){if(py)return cg;py=1;function t(M){return M?typeof M=="string"?M:M.source:null}function n(M){return a("(?=",M,")")}function a(...M){return M.map(D=>t(D)).join("")}function e(M){const w=M[M.length-1];return typeof w=="object"&&w.constructor===Object?(M.splice(M.length-1,1),w):{}}function s(...M){return"("+(e(M).capture?"":"?:")+M.map(B=>t(B)).join("|")+")"}const r=M=>a(/\b/,M,/\w$/.test(M)?/\b/:/\B/),o=["Protocol","Type"].map(r),i=["init","self"].map(r),l=["Any","Self"],c=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","package","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],d=["false","nil","true"],u=["assignment","associativity","higherThan","left","lowerThan","none","right"],m=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],h=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],_=s(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),E=s(_,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),y=a(_,E,"*"),b=s(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),A=s(b,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),T=a(b,A,"*"),I=a(/[A-Z]/,A,"*"),N=["attached","autoclosure",a(/convention\(/,s("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",a(/objc\(/,T,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],x=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];function R(M){const w={match:/\s+/,relevance:0},D=M.COMMENT("/\\*","\\*/",{contains:["self"]}),B=[M.C_LINE_COMMENT_MODE,D],k={match:[/\./,s(...o,...i)],className:{2:"keyword"}},V={match:a(/\./,s(...c)),relevance:0},F=c.filter(Te=>typeof Te=="string").concat(["_|0"]),$=c.filter(Te=>typeof Te!="string").concat(l).map(r),Y={variants:[{className:"keyword",match:s(...$,...i)}]},j={$pattern:s(/\b\w+/,/#\w+/),keyword:F.concat(m),literal:d},U=[k,V,Y],J={match:a(/\./,s(...h)),relevance:0},te={className:"built_in",match:a(/\b/,s(...h),/(?=\()/)},q=[J,te],K={match:/->/,relevance:0},W={className:"operator",relevance:0,variants:[{match:y},{match:`\\.(\\.|${E})+`}]},ee=[K,W],ae="([0-9]_*)+",ve="([0-9a-fA-F]_*)+",Ce={className:"number",relevance:0,variants:[{match:`\\b(${ae})(\\.(${ae}))?([eE][+-]?(${ae}))?\\b`},{match:`\\b0x(${ve})(\\.(${ve}))?([pP][+-]?(${ae}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},ue=(Te="")=>({className:"subst",variants:[{match:a(/\\/,Te,/[0\\tnr"']/)},{match:a(/\\/,Te,/u\{[0-9a-fA-F]{1,8}\}/)}]}),ge=(Te="")=>({className:"subst",match:a(/\\/,Te,/[\t ]*(?:[\r\n]|\r\n)/)}),Me=(Te="")=>({className:"subst",label:"interpol",begin:a(/\\/,Te,/\(/),end:/\)/}),We=(Te="")=>({begin:a(Te,/"""/),end:a(/"""/,Te),contains:[ue(Te),ge(Te),Me(Te)]}),Ue=(Te="")=>({begin:a(Te,/"/),end:a(/"/,Te),contains:[ue(Te),Me(Te)]}),Re={className:"string",variants:[We(),We("#"),We("##"),We("###"),Ue(),Ue("#"),Ue("##"),Ue("###")]},Le=[M.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[M.BACKSLASH_ESCAPE]}],Xe={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:Le},et=Te=>{const Ne=a(Te,/\//),Ie=a(/\//,Te);return{begin:Ne,end:Ie,contains:[...Le,{scope:"comment",begin:`#(?!.*${Ie})`,end:/$/}]}},yt={scope:"regexp",variants:[et("###"),et("##"),et("#"),Xe]},Dt={match:a(/`/,T,/`/)},X={className:"variable",match:/\$\d+/},se={className:"variable",match:`\\$${A}+`},ie=[Dt,X,se],fe={match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:x,contains:[...ee,Ce,Re]}]}},me={scope:"keyword",match:a(/@/,s(...N),n(s(/\(/,/\s+/)))},De={scope:"meta",match:a(/@/,T)},Ye=[fe,me,De],ze={match:n(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:a(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,A,"+")},{className:"type",match:I,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:a(/\s+&\s+/,n(I)),relevance:0}]},He={begin:/</,end:/>/,keywords:j,contains:[...B,...U,...Ye,K,ze]};ze.contains.push(He);const xe={match:a(T,/\s*:/),keywords:"_|0",relevance:0},pe={begin:/\(/,end:/\)/,relevance:0,keywords:j,contains:["self",xe,...B,yt,...U,...q,...ee,Ce,Re,...ie,...Ye,ze]},ye={begin:/</,end:/>/,keywords:"repeat each",contains:[...B,ze]},Be={begin:s(n(a(T,/\s*:/)),n(a(T,/\s+/,T,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:T}]},ne={begin:/\(/,end:/\)/,keywords:j,contains:[Be,...B,...U,...ee,Ce,Re,...Ye,ze,pe],endsParent:!0,illegal:/["']/},re={match:[/(func|macro)/,/\s+/,s(Dt.match,T,y)],className:{1:"keyword",3:"title.function"},contains:[ye,ne,w],illegal:[/\[/,/%/]},he={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[ye,ne,w],illegal:/\[|%/},Ee={match:[/operator/,/\s+/,y],className:{1:"keyword",3:"title"}},we={begin:[/precedencegroup/,/\s+/,I],className:{1:"keyword",3:"title"},contains:[ze],keywords:[...u,...d],end:/}/},be={begin:[/(struct|protocol|class|extension|enum|actor)/,/\s+/,T,/\s*/],beginScope:{1:"keyword",3:"title.class"},keywords:j,contains:[ye,...U,{begin:/:/,end:/\{/,keywords:j,contains:[{scope:"title.class.inherited",match:I},...U],relevance:0}]};for(const Te of Re.variants){const Ne=Te.contains.find($e=>$e.label==="interpol");Ne.keywords=j;const Ie=[...U,...q,...ee,Ce,Re,...ie];Ne.contains=[...Ie,{begin:/\(/,end:/\)/,contains:["self",...Ie]}]}return{name:"Swift",keywords:j,contains:[...B,re,he,be,Ee,we,{beginKeywords:"import",end:/$/,contains:[...B],relevance:0},yt,...U,...q,...ee,Ce,Re,...ie,...Ye,ze,pe]}}return cg=R,cg}var dg,fy;function J6(){if(fy)return dg;fy=1;function t(n){const a="true false yes no null",e="[\\w#;/?:@&=+$,.~*'()[\\]]+",s={className:"attr",variants:[{begin:/\w[\w :()\./-]*:(?=[ \t]|$)/},{begin:/"\w[\w :()\./-]*":(?=[ \t]|$)/},{begin:/'\w[\w :()\./-]*':(?=[ \t]|$)/}]},r={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},o={className:"string",relevance:0,variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/\S+/}],contains:[n.BACKSLASH_ESCAPE,r]},i=n.inherit(o,{variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),m={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},h={end:",",endsWithParent:!0,excludeEnd:!0,keywords:a,relevance:0},_={begin:/\{/,end:/\}/,contains:[h],illegal:"\\n",relevance:0},E={begin:"\\[",end:"\\]",contains:[h],illegal:"\\n",relevance:0},y=[s,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+e},{className:"type",begin:"!<"+e+">"},{className:"type",begin:"!"+e},{className:"type",begin:"!!"+e},{className:"meta",begin:"&"+n.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+n.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},n.HASH_COMMENT_MODE,{beginKeywords:a,keywords:{literal:a}},m,{className:"number",begin:n.C_NUMBER_RE+"\\b",relevance:0},_,E,o],b=[...y];return b.pop(),b.push(i),h.contains=b,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:y}}return dg=t,dg}var ug,my;function eF(){if(my)return ug;my=1;const t="[A-Za-z$_][0-9A-Za-z$_]*",n=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],a=["true","false","null","undefined","NaN","Infinity"],e=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],s=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],r=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],o=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],i=[].concat(r,e,s);function l(d){const u=d.regex,m=(ue,{after:ge})=>{const Me="</"+ue[0].slice(1);return ue.input.indexOf(Me,ge)!==-1},h=t,_={begin:"<>",end:"</>"},E=/<[A-Za-z0-9\\._:-]+\s*\/>/,y={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(ue,ge)=>{const Me=ue[0].length+ue.index,We=ue.input[Me];if(We==="<"||We===","){ge.ignoreMatch();return}We===">"&&(m(ue,{after:Me})||ge.ignoreMatch());let Ue;const Re=ue.input.substring(Me);if(Ue=Re.match(/^\s*=/)){ge.ignoreMatch();return}if((Ue=Re.match(/^\s+extends\s+/))&&Ue.index===0){ge.ignoreMatch();return}}},b={$pattern:t,keyword:n,literal:a,built_in:i,"variable.language":o},A="[0-9](_?[0-9])*",T=`\\.(${A})`,I="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",N={className:"number",variants:[{begin:`(\\b(${I})((${T})|\\.)?|(${T}))[eE][+-]?(${A})\\b`},{begin:`\\b(${I})\\b((${T})\\b|\\.)?|(${T})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},x={className:"subst",begin:"\\$\\{",end:"\\}",keywords:b,contains:[]},R={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[d.BACKSLASH_ESCAPE,x],subLanguage:"xml"}},M={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[d.BACKSLASH_ESCAPE,x],subLanguage:"css"}},w={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[d.BACKSLASH_ESCAPE,x],subLanguage:"graphql"}},D={className:"string",begin:"`",end:"`",contains:[d.BACKSLASH_ESCAPE,x]},k={className:"comment",variants:[d.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:h+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),d.C_BLOCK_COMMENT_MODE,d.C_LINE_COMMENT_MODE]},V=[d.APOS_STRING_MODE,d.QUOTE_STRING_MODE,R,M,w,D,{match:/\$\d+/},N];x.contains=V.concat({begin:/\{/,end:/\}/,keywords:b,contains:["self"].concat(V)});const F=[].concat(k,x.contains),$=F.concat([{begin:/(\s*)\(/,end:/\)/,keywords:b,contains:["self"].concat(F)}]),Y={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:b,contains:$},j={variants:[{match:[/class/,/\s+/,h,/\s+/,/extends/,/\s+/,u.concat(h,"(",u.concat(/\./,h),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,h],scope:{1:"keyword",3:"title.class"}}]},U={relevance:0,match:u.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...e,...s]}},J={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},te={variants:[{match:[/function/,/\s+/,h,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[Y],illegal:/%/},q={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function K(ue){return u.concat("(?!",ue.join("|"),")")}const W={match:u.concat(/\b/,K([...r,"super","import"].map(ue=>`${ue}\\s*\\(`)),h,u.lookahead(/\s*\(/)),className:"title.function",relevance:0},ee={begin:u.concat(/\./,u.lookahead(u.concat(h,/(?![0-9A-Za-z$_(])/))),end:h,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},ae={match:[/get|set/,/\s+/,h,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},Y]},ve="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+d.UNDERSCORE_IDENT_RE+")\\s*=>",Ce={match:[/const|var|let/,/\s+/,h,/\s*/,/=\s*/,/(async\s*)?/,u.lookahead(ve)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[Y]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:b,exports:{PARAMS_CONTAINS:$,CLASS_REFERENCE:U},illegal:/#(?![$_A-z])/,contains:[d.SHEBANG({label:"shebang",binary:"node",relevance:5}),J,d.APOS_STRING_MODE,d.QUOTE_STRING_MODE,R,M,w,D,k,{match:/\$\d+/},N,U,{className:"attr",begin:h+u.lookahead(":"),relevance:0},Ce,{begin:"("+d.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[k,d.REGEXP_MODE,{className:"function",begin:ve,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:d.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:b,contains:$}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:_.begin,end:_.end},{match:E},{begin:y.begin,"on:begin":y.isTrulyOpeningTag,end:y.end}],subLanguage:"xml",contains:[{begin:y.begin,end:y.end,skip:!0,contains:["self"]}]}]},te,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+d.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[Y,d.inherit(d.TITLE_MODE,{begin:h,className:"title.function"})]},{match:/\.\.\./,relevance:0},ee,{match:"\\$"+h,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[Y]},W,q,j,ae,{match:/\$[(.]/}]}}function c(d){const u=l(d),m=t,h=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],_={begin:[/namespace/,/\s+/,d.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},E={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:h},contains:[u.exports.CLASS_REFERENCE]},y={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},b=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],A={$pattern:t,keyword:n.concat(b),literal:a,built_in:i.concat(h),"variable.language":o},T={className:"meta",begin:"@"+m},I=(R,M,w)=>{const D=R.contains.findIndex(B=>B.label===M);if(D===-1)throw new Error("can not find mode to replace");R.contains.splice(D,1,w)};Object.assign(u.keywords,A),u.exports.PARAMS_CONTAINS.push(T);const N=u.contains.find(R=>R.className==="attr");u.exports.PARAMS_CONTAINS.push([u.exports.CLASS_REFERENCE,N]),u.contains=u.contains.concat([T,_,E]),I(u,"shebang",d.SHEBANG()),I(u,"use_strict",y);const x=u.contains.find(R=>R.label==="func.def");return x.relevance=0,Object.assign(u,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),u}return ug=c,ug}var pg,hy;function tF(){if(hy)return pg;hy=1;function t(n){const a=n.regex,e={className:"string",begin:/"(""|[^/n])"C\b/},s={className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},r=/\d{1,2}\/\d{1,2}\/\d{4}/,o=/\d{4}-\d{1,2}-\d{1,2}/,i=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,l=/\d{1,2}(:\d{1,2}){1,2}/,c={className:"literal",variants:[{begin:a.concat(/# */,a.either(o,r),/ *#/)},{begin:a.concat(/# */,l,/ *#/)},{begin:a.concat(/# */,i,/ *#/)},{begin:a.concat(/# */,a.either(o,r),/ +/,a.either(i,l),/ *#/)}]},d={className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},u={className:"label",begin:/^\w+:/},m=n.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),h=n.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[e,s,c,d,u,m,h,{className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[h]}]}}return pg=t,pg}var fg,_y;function nF(){if(_y)return fg;_y=1;function t(n){n.regex;const a=n.COMMENT(/\(;/,/;\)/);a.contains.push("self");const e=n.COMMENT(/;;/,/$/),s=["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"],r={begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},o={className:"variable",begin:/\$[\w_]+/},i={match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},l={className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/},c={match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},d={className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/};return{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:s},contains:[e,a,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},o,i,r,n.QUOTE_STRING_MODE,c,d,l]}}return fg=t,fg}var fn=nx;fn.registerLanguage("xml",S6());fn.registerLanguage("bash",T6());fn.registerLanguage("c",A6());fn.registerLanguage("cpp",y6());fn.registerLanguage("csharp",I6());fn.registerLanguage("css",C6());fn.registerLanguage("markdown",O6());fn.registerLanguage("diff",N6());fn.registerLanguage("ruby",x6());fn.registerLanguage("go",R6());fn.registerLanguage("graphql",w6());fn.registerLanguage("ini",M6());fn.registerLanguage("java",L6());fn.registerLanguage("javascript",D6());fn.registerLanguage("json",P6());fn.registerLanguage("kotlin",k6());fn.registerLanguage("less",B6());fn.registerLanguage("lua",F6());fn.registerLanguage("makefile",U6());fn.registerLanguage("perl",$6());fn.registerLanguage("objectivec",G6());fn.registerLanguage("php",V6());fn.registerLanguage("php-template",H6());fn.registerLanguage("plaintext",j6());fn.registerLanguage("python",W6());fn.registerLanguage("python-repl",z6());fn.registerLanguage("r",Y6());fn.registerLanguage("rust",K6());fn.registerLanguage("scss",X6());fn.registerLanguage("shell",q6());fn.registerLanguage("sql",Z6());fn.registerLanguage("swift",Q6());fn.registerLanguage("yaml",J6());fn.registerLanguage("typescript",eF());fn.registerLanguage("vbnet",tF());fn.registerLanguage("wasm",nF());fn.HighlightJS=fn;fn.default=fn;const aF={__name:"Code",props:{script:{type:String,default:""},lang:{type:String,default:"javascript"},enableCodePen:{type:Boolean,default:!1},codepenTitle:{type:String,default:"Chatwoot Codepen"}},setup(t,{expose:n}){n();const a=t,{t:e}=Q(),s=S(()=>{const c=a.script.replace(/^\s*[\r\n]/gm,"").split(`
`),d=c.reduce((u,m)=>{if(m.trim().length===0)return u;const h=m.match(/^\s*/)[0].length;return Math.min(u,h)},1/0);return c.map(u=>u.slice(d)).join(`
`)}),r=S(()=>{const l=a.lang==="javascript"?"js":a.lang;return JSON.stringify({title:a.codepenTitle,private:!0,[l]:s.value})}),i={props:a,t:e,scrubbedScript:s,codepenScriptValue:r,onCopy:async l=>{l.preventDefault(),await Ra(s.value),Z(e("COMPONENTS.CODE.COPY_SUCCESSFUL"))},computed:S,NextButton:Se,get copyTextToClipboard(){return Ra},get useAlert(){return Z},get useI18n(){return Q}};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}},sF={class:"relative text-left"},oF={class:"top-1.5 absolute ltr:right-1.5 rtl:left-1.5 flex backdrop-blur-sm rounded-lg items-center gap-1"},rF={key:0,class:"flex items-center",action:"https://codepen.io/pen/define",method:"POST",target:"_blank"},iF=["value"];function lF(t,n,a,e,s,r){const o=H("highlightjs");return p(),g("div",sF,[f("div",oF,[a.enableCodePen?(p(),g("form",rF,[f("input",{type:"hidden",name:"data",value:e.codepenScriptValue},null,8,iF),v(e.NextButton,{slate:"",xs:"",type:"submit",faded:"",label:e.t("COMPONENTS.CODE.CODEPEN")},null,8,["label"])])):O("v-if",!0),v(e.NextButton,{slate:"",xs:"",faded:"",label:e.t("COMPONENTS.CODE.BUTTON_TEXT"),onClick:e.onCopy},null,8,["label"])]),a.script?(p(),L(o,{key:0,language:a.lang,code:e.scrubbedScript,class:"[&_code]:text-start"},null,8,["language","code"])):O("v-if",!0)])}const cF=G(aF,[["render",lF],["__file","/app/app/javascript/dashboard/components/Code.vue"]]);var Rx={exports:{}};(function(t){(function(){var n={9662:function(r,o,i){var l=i(7854),c=i(614),d=i(6330),u=l.TypeError;r.exports=function(m){if(c(m))return m;throw u(d(m)+" is not a function")}},6077:function(r,o,i){var l=i(7854),c=i(614),d=l.String,u=l.TypeError;r.exports=function(m){if(typeof m=="object"||c(m))return m;throw u("Can't set "+d(m)+" as a prototype")}},9670:function(r,o,i){var l=i(7854),c=i(111),d=l.String,u=l.TypeError;r.exports=function(m){if(c(m))return m;throw u(d(m)+" is not an object")}},1318:function(r,o,i){var l=i(5656),c=i(1400),d=i(6244),u=function(m){return function(h,_,E){var y=l(h),b=d(y),A=c(E,b),T;if(m&&_!=_){for(;b>A;)if(T=y[A++],T!=T)return!0}else for(;b>A;A++)if((m||A in y)&&y[A]===_)return m||A||0;return!m&&-1}};r.exports={includes:u(!0),indexOf:u(!1)}},4326:function(r,o,i){var l=i(1702),c=l({}.toString),d=l("".slice);r.exports=function(u){return d(c(u),8,-1)}},648:function(r,o,i){var l=i(7854),c=i(1694),d=i(614),u=i(4326),m=i(5112),h=m("toStringTag"),_=l.Object,E=u(function(){return arguments}())=="Arguments",y=function(b,A){try{return b[A]}catch{}};r.exports=c?u:function(b){var A,T,I;return b===void 0?"Undefined":b===null?"Null":typeof(T=y(A=_(b),h))=="string"?T:E?u(A):(I=u(A))=="Object"&&d(A.callee)?"Arguments":I}},7741:function(r,o,i){var l=i(1702),c=l("".replace),d=function(h){return String(Error(h).stack)}("zxcasd"),u=/\n\s*at [^:]*:[^\n]*/,m=u.test(d);r.exports=function(h,_){if(m&&typeof h=="string")for(;_--;)h=c(h,u,"");return h}},9920:function(r,o,i){var l=i(2597),c=i(3887),d=i(1236),u=i(3070);r.exports=function(m,h,_){for(var E=c(h),y=u.f,b=d.f,A=0;A<E.length;A++){var T=E[A];!l(m,T)&&!(_&&l(_,T))&&y(m,T,b(h,T))}}},8880:function(r,o,i){var l=i(9781),c=i(3070),d=i(9114);r.exports=l?function(u,m,h){return c.f(u,m,d(1,h))}:function(u,m,h){return u[m]=h,u}},9114:function(r){r.exports=function(o,i){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:i}}},9781:function(r,o,i){var l=i(7293);r.exports=!l(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},317:function(r,o,i){var l=i(7854),c=i(111),d=l.document,u=c(d)&&c(d.createElement);r.exports=function(m){return u?d.createElement(m):{}}},8113:function(r,o,i){var l=i(5005);r.exports=l("navigator","userAgent")||""},7392:function(r,o,i){var l=i(7854),c=i(8113),d=l.process,u=l.Deno,m=d&&d.versions||u&&u.version,h=m&&m.v8,_,E;h&&(_=h.split("."),E=_[0]>0&&_[0]<4?1:+(_[0]+_[1])),!E&&c&&(_=c.match(/Edge\/(\d+)/),(!_||_[1]>=74)&&(_=c.match(/Chrome\/(\d+)/),_&&(E=+_[1]))),r.exports=E},748:function(r){r.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2914:function(r,o,i){var l=i(7293),c=i(9114);r.exports=!l(function(){var d=Error("a");return"stack"in d?(Object.defineProperty(d,"stack",c(1,7)),d.stack!==7):!0})},2109:function(r,o,i){var l=i(7854),c=i(1236).f,d=i(8880),u=i(1320),m=i(3505),h=i(9920),_=i(4705);r.exports=function(E,y){var b=E.target,A=E.global,T=E.stat,I,N,x,R,M,w;if(A?N=l:T?N=l[b]||m(b,{}):N=(l[b]||{}).prototype,N)for(x in y){if(M=y[x],E.noTargetGet?(w=c(N,x),R=w&&w.value):R=N[x],I=_(A?x:b+(T?".":"#")+x,E.forced),!I&&R!==void 0){if(typeof M==typeof R)continue;h(M,R)}(E.sham||R&&R.sham)&&d(M,"sham",!0),u(N,x,M,E)}}},7293:function(r){r.exports=function(o){try{return!!o()}catch{return!0}}},2104:function(r,o,i){var l=i(4374),c=Function.prototype,d=c.apply,u=c.call;r.exports=typeof Reflect=="object"&&Reflect.apply||(l?u.bind(d):function(){return u.apply(d,arguments)})},4374:function(r,o,i){var l=i(7293);r.exports=!l(function(){var c=(function(){}).bind();return typeof c!="function"||c.hasOwnProperty("prototype")})},6916:function(r,o,i){var l=i(4374),c=Function.prototype.call;r.exports=l?c.bind(c):function(){return c.apply(c,arguments)}},6530:function(r,o,i){var l=i(9781),c=i(2597),d=Function.prototype,u=l&&Object.getOwnPropertyDescriptor,m=c(d,"name"),h=m&&(function(){}).name==="something",_=m&&(!l||l&&u(d,"name").configurable);r.exports={EXISTS:m,PROPER:h,CONFIGURABLE:_}},1702:function(r,o,i){var l=i(4374),c=Function.prototype,d=c.bind,u=c.call,m=l&&d.bind(u,u);r.exports=l?function(h){return h&&m(h)}:function(h){return h&&function(){return u.apply(h,arguments)}}},5005:function(r,o,i){var l=i(7854),c=i(614),d=function(u){return c(u)?u:void 0};r.exports=function(u,m){return arguments.length<2?d(l[u]):l[u]&&l[u][m]}},8173:function(r,o,i){var l=i(9662);r.exports=function(c,d){var u=c[d];return u==null?void 0:l(u)}},7854:function(r,o,i){var l=function(c){return c&&c.Math==Math&&c};r.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof i.g=="object"&&i.g)||function(){return this}()||Function("return this")()},2597:function(r,o,i){var l=i(1702),c=i(7908),d=l({}.hasOwnProperty);r.exports=Object.hasOwn||function(m,h){return d(c(m),h)}},3501:function(r){r.exports={}},4664:function(r,o,i){var l=i(9781),c=i(7293),d=i(317);r.exports=!l&&!c(function(){return Object.defineProperty(d("div"),"a",{get:function(){return 7}}).a!=7})},8361:function(r,o,i){var l=i(7854),c=i(1702),d=i(7293),u=i(4326),m=l.Object,h=c("".split);r.exports=d(function(){return!m("z").propertyIsEnumerable(0)})?function(_){return u(_)=="String"?h(_,""):m(_)}:m},9587:function(r,o,i){var l=i(614),c=i(111),d=i(7674);r.exports=function(u,m,h){var _,E;return d&&l(_=m.constructor)&&_!==h&&c(E=_.prototype)&&E!==h.prototype&&d(u,E),u}},2788:function(r,o,i){var l=i(1702),c=i(614),d=i(5465),u=l(Function.toString);c(d.inspectSource)||(d.inspectSource=function(m){return u(m)}),r.exports=d.inspectSource},8340:function(r,o,i){var l=i(111),c=i(8880);r.exports=function(d,u){l(u)&&"cause"in u&&c(d,"cause",u.cause)}},9909:function(r,o,i){var l=i(8536),c=i(7854),d=i(1702),u=i(111),m=i(8880),h=i(2597),_=i(5465),E=i(6200),y=i(3501),b="Object already initialized",A=c.TypeError,T=c.WeakMap,I,N,x,R=function(F){return x(F)?N(F):I(F,{})},M=function(F){return function($){var Y;if(!u($)||(Y=N($)).type!==F)throw A("Incompatible receiver, "+F+" required");return Y}};if(l||_.state){var w=_.state||(_.state=new T),D=d(w.get),B=d(w.has),k=d(w.set);I=function(F,$){if(B(w,F))throw new A(b);return $.facade=F,k(w,F,$),$},N=function(F){return D(w,F)||{}},x=function(F){return B(w,F)}}else{var V=E("state");y[V]=!0,I=function(F,$){if(h(F,V))throw new A(b);return $.facade=F,m(F,V,$),$},N=function(F){return h(F,V)?F[V]:{}},x=function(F){return h(F,V)}}r.exports={set:I,get:N,has:x,enforce:R,getterFor:M}},614:function(r){r.exports=function(o){return typeof o=="function"}},4705:function(r,o,i){var l=i(7293),c=i(614),d=/#|\.prototype\./,u=function(y,b){var A=h[m(y)];return A==E?!0:A==_?!1:c(b)?l(b):!!b},m=u.normalize=function(y){return String(y).replace(d,".").toLowerCase()},h=u.data={},_=u.NATIVE="N",E=u.POLYFILL="P";r.exports=u},111:function(r,o,i){var l=i(614);r.exports=function(c){return typeof c=="object"?c!==null:l(c)}},1913:function(r){r.exports=!1},2190:function(r,o,i){var l=i(7854),c=i(5005),d=i(614),u=i(7976),m=i(3307),h=l.Object;r.exports=m?function(_){return typeof _=="symbol"}:function(_){var E=c("Symbol");return d(E)&&u(E.prototype,h(_))}},6244:function(r,o,i){var l=i(7466);r.exports=function(c){return l(c.length)}},133:function(r,o,i){var l=i(7392),c=i(7293);r.exports=!!Object.getOwnPropertySymbols&&!c(function(){var d=Symbol();return!String(d)||!(Object(d)instanceof Symbol)||!Symbol.sham&&l&&l<41})},8536:function(r,o,i){var l=i(7854),c=i(614),d=i(2788),u=l.WeakMap;r.exports=c(u)&&/native code/.test(d(u))},6277:function(r,o,i){var l=i(1340);r.exports=function(c,d){return c===void 0?arguments.length<2?"":d:l(c)}},3070:function(r,o,i){var l=i(7854),c=i(9781),d=i(4664),u=i(3353),m=i(9670),h=i(4948),_=l.TypeError,E=Object.defineProperty,y=Object.getOwnPropertyDescriptor,b="enumerable",A="configurable",T="writable";o.f=c?u?function(N,x,R){if(m(N),x=h(x),m(R),typeof N=="function"&&x==="prototype"&&"value"in R&&T in R&&!R[T]){var M=y(N,x);M&&M[T]&&(N[x]=R.value,R={configurable:A in R?R[A]:M[A],enumerable:b in R?R[b]:M[b],writable:!1})}return E(N,x,R)}:E:function(N,x,R){if(m(N),x=h(x),m(R),d)try{return E(N,x,R)}catch{}if("get"in R||"set"in R)throw _("Accessors not supported");return"value"in R&&(N[x]=R.value),N}},1236:function(r,o,i){var l=i(9781),c=i(6916),d=i(5296),u=i(9114),m=i(5656),h=i(4948),_=i(2597),E=i(4664),y=Object.getOwnPropertyDescriptor;o.f=l?y:function(A,T){if(A=m(A),T=h(T),E)try{return y(A,T)}catch{}if(_(A,T))return u(!c(d.f,A,T),A[T])}},8006:function(r,o,i){var l=i(6324),c=i(748),d=c.concat("length","prototype");o.f=Object.getOwnPropertyNames||function(m){return l(m,d)}},5181:function(r,o){o.f=Object.getOwnPropertySymbols},7976:function(r,o,i){var l=i(1702);r.exports=l({}.isPrototypeOf)},6324:function(r,o,i){var l=i(1702),c=i(2597),d=i(5656),u=i(1318).indexOf,m=i(3501),h=l([].push);r.exports=function(_,E){var y=d(_),b=0,A=[],T;for(T in y)!c(m,T)&&c(y,T)&&h(A,T);for(;E.length>b;)c(y,T=E[b++])&&(~u(A,T)||h(A,T));return A}},5296:function(r,o){var i={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,c=l&&!i.call({1:2},1);o.f=c?function(u){var m=l(this,u);return!!m&&m.enumerable}:i},7674:function(r,o,i){var l=i(1702),c=i(9670),d=i(6077);r.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var u=!1,m={},h;try{h=l(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),h(m,[]),u=m instanceof Array}catch{}return function(E,y){return c(E),d(y),u?h(E,y):E.__proto__=y,E}}():void 0)},2140:function(r,o,i){var l=i(7854),c=i(6916),d=i(614),u=i(111),m=l.TypeError;r.exports=function(h,_){var E,y;if(_==="string"&&d(E=h.toString)&&!u(y=c(E,h))||d(E=h.valueOf)&&!u(y=c(E,h))||_!=="string"&&d(E=h.toString)&&!u(y=c(E,h)))return y;throw m("Can't convert object to primitive value")}},3887:function(r,o,i){var l=i(5005),c=i(1702),d=i(8006),u=i(5181),m=i(9670),h=c([].concat);r.exports=l("Reflect","ownKeys")||function(E){var y=d.f(m(E)),b=u.f;return b?h(y,b(E)):y}},1320:function(r,o,i){var l=i(7854),c=i(614),d=i(2597),u=i(8880),m=i(3505),h=i(2788),_=i(9909),E=i(6530).CONFIGURABLE,y=_.get,b=_.enforce,A=String(String).split("String");(r.exports=function(T,I,N,x){var R=x?!!x.unsafe:!1,M=x?!!x.enumerable:!1,w=x?!!x.noTargetGet:!1,D=x&&x.name!==void 0?x.name:I,B;if(c(N)&&(String(D).slice(0,7)==="Symbol("&&(D="["+String(D).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!d(N,"name")||E&&N.name!==D)&&u(N,"name",D),B=b(N),B.source||(B.source=A.join(typeof D=="string"?D:""))),T===l){M?T[I]=N:m(I,N);return}else R?!w&&T[I]&&(M=!0):delete T[I];M?T[I]=N:u(T,I,N)})(Function.prototype,"toString",function(){return c(this)&&y(this).source||h(this)})},4488:function(r,o,i){var l=i(7854),c=l.TypeError;r.exports=function(d){if(d==null)throw c("Can't call method on "+d);return d}},3505:function(r,o,i){var l=i(7854),c=Object.defineProperty;r.exports=function(d,u){try{c(l,d,{value:u,configurable:!0,writable:!0})}catch{l[d]=u}return u}},6200:function(r,o,i){var l=i(2309),c=i(9711),d=l("keys");r.exports=function(u){return d[u]||(d[u]=c(u))}},5465:function(r,o,i){var l=i(7854),c=i(3505),d="__core-js_shared__",u=l[d]||c(d,{});r.exports=u},2309:function(r,o,i){var l=i(1913),c=i(5465);(r.exports=function(d,u){return c[d]||(c[d]=u!==void 0?u:{})})("versions",[]).push({version:"3.21.1",mode:l?"pure":"global",copyright:" 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})},1400:function(r,o,i){var l=i(9303),c=Math.max,d=Math.min;r.exports=function(u,m){var h=l(u);return h<0?c(h+m,0):d(h,m)}},5656:function(r,o,i){var l=i(8361),c=i(4488);r.exports=function(d){return l(c(d))}},9303:function(r){var o=Math.ceil,i=Math.floor;r.exports=function(l){var c=+l;return c!==c||c===0?0:(c>0?i:o)(c)}},7466:function(r,o,i){var l=i(9303),c=Math.min;r.exports=function(d){return d>0?c(l(d),9007199254740991):0}},7908:function(r,o,i){var l=i(7854),c=i(4488),d=l.Object;r.exports=function(u){return d(c(u))}},7593:function(r,o,i){var l=i(7854),c=i(6916),d=i(111),u=i(2190),m=i(8173),h=i(2140),_=i(5112),E=l.TypeError,y=_("toPrimitive");r.exports=function(b,A){if(!d(b)||u(b))return b;var T=m(b,y),I;if(T){if(A===void 0&&(A="default"),I=c(T,b,A),!d(I)||u(I))return I;throw E("Can't convert object to primitive value")}return A===void 0&&(A="number"),h(b,A)}},4948:function(r,o,i){var l=i(7593),c=i(2190);r.exports=function(d){var u=l(d,"string");return c(u)?u:u+""}},1694:function(r,o,i){var l=i(5112),c=l("toStringTag"),d={};d[c]="z",r.exports=String(d)==="[object z]"},1340:function(r,o,i){var l=i(7854),c=i(648),d=l.String;r.exports=function(u){if(c(u)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return d(u)}},6330:function(r,o,i){var l=i(7854),c=l.String;r.exports=function(d){try{return c(d)}catch{return"Object"}}},9711:function(r,o,i){var l=i(1702),c=0,d=Math.random(),u=l(1 .toString);r.exports=function(m){return"Symbol("+(m===void 0?"":m)+")_"+u(++c+d,36)}},3307:function(r,o,i){var l=i(133);r.exports=l&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},3353:function(r,o,i){var l=i(9781),c=i(7293);r.exports=l&&c(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},5112:function(r,o,i){var l=i(7854),c=i(2309),d=i(2597),u=i(9711),m=i(133),h=i(3307),_=c("wks"),E=l.Symbol,y=E&&E.for,b=h?E:E&&E.withoutSetter||u;r.exports=function(A){if(!d(_,A)||!(m||typeof _[A]=="string")){var T="Symbol."+A;m&&d(E,A)?_[A]=E[A]:h&&y?_[A]=y(T):_[A]=b(T)}return _[A]}},9191:function(r,o,i){var l=i(5005),c=i(2597),d=i(8880),u=i(7976),m=i(7674),h=i(9920),_=i(9587),E=i(6277),y=i(8340),b=i(7741),A=i(2914),T=i(1913);r.exports=function(I,N,x,R){var M=R?2:1,w=I.split("."),D=w[w.length-1],B=l.apply(null,w);if(B){var k=B.prototype;if(!T&&c(k,"cause")&&delete k.cause,!x)return B;var V=l("Error"),F=N(function($,Y){var j=E(R?Y:$,void 0),U=R?new B($):new B;return j!==void 0&&d(U,"message",j),A&&d(U,"stack",b(U.stack,2)),this&&u(k,this)&&_(U,this,F),arguments.length>M&&y(U,arguments[M]),U});if(F.prototype=k,D!=="Error"&&(m?m(F,V):h(F,V,{name:!0})),h(F,B),!T)try{k.name!==D&&d(k,"name",D),k.constructor=F}catch{}return F}}},1703:function(r,o,i){var l=i(2109),c=i(7854),d=i(2104),u=i(9191),m="WebAssembly",h=c[m],_=Error("e",{cause:7}).cause!==7,E=function(b,A){var T={};T[b]=u(b,A,_),l({global:!0,forced:_},T)},y=function(b,A){if(h&&h[b]){var T={};T[b]=u(m+"."+b,A,_),l({target:m,stat:!0,forced:_},T)}};E("Error",function(b){return function(T){return d(b,this,arguments)}}),E("EvalError",function(b){return function(T){return d(b,this,arguments)}}),E("RangeError",function(b){return function(T){return d(b,this,arguments)}}),E("ReferenceError",function(b){return function(T){return d(b,this,arguments)}}),E("SyntaxError",function(b){return function(T){return d(b,this,arguments)}}),E("TypeError",function(b){return function(T){return d(b,this,arguments)}}),E("URIError",function(b){return function(T){return d(b,this,arguments)}}),y("CompileError",function(b){return function(T){return d(b,this,arguments)}}),y("LinkError",function(b){return function(T){return d(b,this,arguments)}}),y("RuntimeError",function(b){return function(T){return d(b,this,arguments)}})},6095:function(r,o,i){i.r(o);var l=i(8081),c=i.n(l),d=i(3645),u=i.n(d),m=u()(c());m.push([r.id,".vc-chrome{background:#fff;border-radius:2px;box-shadow:0 0 2px rgba(0,0,0,.3),0 4px 8px rgba(0,0,0,.3);box-sizing:initial;width:225px;font-family:Menlo;background-color:#fff}.vc-chrome-controls{display:flex}.vc-chrome-color-wrap{position:relative;width:36px}.vc-chrome-active-color{position:relative;width:30px;height:30px;border-radius:15px;overflow:hidden;z-index:1}.vc-chrome-color-wrap .vc-checkerboard{width:30px;height:30px;border-radius:15px;background-size:auto}.vc-chrome-sliders{flex:1}.vc-chrome-fields-wrap{display:flex;padding-top:16px}.vc-chrome-fields{display:flex;margin-left:-6px;flex:1}.vc-chrome-field{padding-left:6px;width:100%}.vc-chrome-toggle-btn{width:32px;text-align:right;position:relative}.vc-chrome-toggle-icon{margin-right:-4px;margin-top:12px;cursor:pointer;position:relative;z-index:2}.vc-chrome-toggle-icon-highlight{position:absolute;width:24px;height:28px;background:#eee;border-radius:4px;top:10px;left:12px}.vc-chrome-hue-wrap{margin-bottom:8px}.vc-chrome-alpha-wrap,.vc-chrome-hue-wrap{position:relative;height:10px}.vc-chrome-alpha-wrap .vc-alpha-gradient,.vc-chrome-hue-wrap .vc-hue{border-radius:2px}.vc-chrome-alpha-wrap .vc-alpha-picker,.vc-chrome-hue-wrap .vc-hue-picker{width:12px;height:12px;border-radius:6px;transform:translate(-6px,-2px);background-color:#f8f8f8;box-shadow:0 1px 4px 0 rgba(0,0,0,.37)}.vc-chrome-body{padding:16px 16px 12px;background-color:#fff}.vc-chrome-saturation-wrap{width:100%;padding-bottom:55%;position:relative;border-radius:2px 2px 0 0;overflow:hidden}.vc-chrome-saturation-wrap .vc-saturation-circle{width:12px;height:12px}.vc-chrome-fields .vc-input__input{font-size:11px;color:#333;width:100%;border-radius:2px;border:none;box-shadow:inset 0 0 0 1px #dadada;height:21px;text-align:center}.vc-chrome-fields .vc-input__label{text-transform:uppercase;font-size:11px;line-height:11px;color:#969696;text-align:center;display:block;margin-top:12px}.vc-chrome__disable-alpha .vc-chrome-active-color{width:18px;height:18px}.vc-chrome__disable-alpha .vc-chrome-color-wrap{width:30px}.vc-chrome__disable-alpha .vc-chrome-hue-wrap{margin-top:4px;margin-bottom:4px}",""]),o.default=m},6047:function(r,o,i){i.r(o);var l=i(8081),c=i.n(l),d=i(3645),u=i.n(d),m=u()(c());m.push([r.id,".vc-compact{padding-top:5px;padding-left:5px;width:245px;border-radius:2px;box-sizing:border-box;box-shadow:0 2px 10px rgba(0,0,0,.12),0 2px 5px rgba(0,0,0,.16);background-color:#fff}.vc-compact-colors{overflow:hidden;padding:0;margin:0}.vc-compact-color-item{list-style:none;width:15px;height:15px;float:left;margin-right:5px;margin-bottom:5px;position:relative;cursor:pointer}.vc-compact-color-item--white{box-shadow:inset 0 0 0 1px #ddd}.vc-compact-color-item--white .vc-compact-dot{background:#000}.vc-compact-dot{position:absolute;top:5px;right:5px;bottom:5px;left:5px;border-radius:50%;opacity:1;background:#fff}",""]),o.default=m},9481:function(r,o,i){i.r(o);var l=i(8081),c=i.n(l),d=i(3645),u=i.n(d),m=u()(c());m.push([r.id,".vc-grayscale{width:125px;border-radius:2px;box-shadow:0 2px 15px rgba(0,0,0,.12),0 2px 10px rgba(0,0,0,.16);background-color:#fff}.vc-grayscale-colors{border-radius:2px;overflow:hidden;padding:0;margin:0}.vc-grayscale-color-item{list-style:none;width:25px;height:25px;float:left;position:relative;cursor:pointer}.vc-grayscale-color-item--white .vc-grayscale-dot{background:#000}.vc-grayscale-dot{position:absolute;top:50%;left:50%;width:6px;height:6px;margin:-3px 0 0 -2px;border-radius:50%;opacity:1;background:#fff}",""]),o.default=m},5186:function(r,o,i){i.r(o);var l=i(8081),c=i.n(l),d=i(3645),u=i.n(d),m=u()(c());m.push([r.id,".vc-material{width:98px;height:98px;padding:16px;font-family:Roboto;position:relative;border-radius:2px;box-shadow:0 2px 10px rgba(0,0,0,.12),0 2px 5px rgba(0,0,0,.16);background-color:#fff}.vc-material .vc-input__input{width:100%;margin-top:12px;font-size:15px;color:#333;height:30px}.vc-material .vc-input__label{position:absolute;top:0;left:0;font-size:11px;color:#999;text-transform:capitalize}.vc-material-hex{border-bottom-width:2px;border-bottom-style:solid}.vc-material-split{display:flex;margin-right:-10px;padding-top:11px}.vc-material-third{flex:1;padding-right:10px}",""]),o.default=m},3695:function(r,o,i){i.r(o);var l=i(8081),c=i.n(l),d=i(3645),u=i.n(d),m=u()(c());m.push([r.id,'.vc-photoshop{background:#dcdcdc;border-radius:4px;box-shadow:0 0 0 1px rgba(0,0,0,.25),0 8px 16px rgba(0,0,0,.15);box-sizing:initial;width:513px;font-family:Roboto}.vc-photoshop__disable-fields{width:390px}.vc-ps-head{background-image:linear-gradient(-180deg,#f0f0f0,#d4d4d4);border-bottom:1px solid #b1b1b1;box-shadow:inset 0 1px 0 0 hsla(0,0%,100%,.2),inset 0 -1px 0 0 rgba(0,0,0,.02);height:23px;line-height:24px;border-radius:4px 4px 0 0;font-size:13px;color:#4d4d4d;text-align:center}.vc-ps-body{padding:15px;display:flex}.vc-ps-saturation-wrap{width:256px;height:256px;position:relative;border:2px solid #b3b3b3;border-bottom:2px solid #f0f0f0;overflow:hidden}.vc-ps-saturation-wrap .vc-saturation-circle{width:12px;height:12px}.vc-ps-hue-wrap{height:256px;width:19px;margin-left:10px;border:2px solid #b3b3b3;border-bottom:2px solid #f0f0f0}.vc-ps-hue-pointer,.vc-ps-hue-wrap{position:relative}.vc-ps-hue-pointer--left,.vc-ps-hue-pointer--right{position:absolute;width:0;height:0;border-style:solid;border-width:5px 0 5px 8px;border-color:transparent transparent transparent #555}.vc-ps-hue-pointer--left:after,.vc-ps-hue-pointer--right:after{content:"";width:0;height:0;border-style:solid;border-width:4px 0 4px 6px;border-color:transparent transparent transparent #fff;position:absolute;top:1px;left:1px;transform:translate(-8px,-5px)}.vc-ps-hue-pointer--left{transform:translate(-13px,-4px)}.vc-ps-hue-pointer--right{transform:translate(20px,-4px) rotate(180deg)}.vc-ps-controls{width:180px;margin-left:10px;display:flex}.vc-ps-controls__disable-fields{width:auto}.vc-ps-actions{margin-left:20px;flex:1}.vc-ps-ac-btn{cursor:pointer;background-image:linear-gradient(-180deg,#fff,#e6e6e6);border:1px solid #878787;border-radius:2px;height:20px;box-shadow:0 1px 0 0 #eaeaea;font-size:14px;color:#000;line-height:20px;text-align:center;margin-bottom:10px}.vc-ps-previews{width:60px}.vc-ps-previews__swatches{border:1px solid #b3b3b3;border-bottom:1px solid #f0f0f0;margin-bottom:2px;margin-top:1px}.vc-ps-previews__pr-color{height:34px;box-shadow:inset 1px 0 0 #000,inset -1px 0 0 #000,inset 0 1px 0 #000}.vc-ps-previews__label{font-size:14px;color:#000;text-align:center}.vc-ps-fields{padding-top:5px;padding-bottom:9px;width:80px;position:relative}.vc-ps-fields .vc-input__input{margin-left:40%;width:40%;height:18px;border:1px solid #888;box-shadow:inset 0 1px 1px rgba(0,0,0,.1),0 1px 0 0 #ececec;margin-bottom:5px;font-size:13px;padding-left:3px;margin-right:10px}.vc-ps-fields .vc-input__desc,.vc-ps-fields .vc-input__label{top:0;text-transform:uppercase;font-size:13px;height:18px;line-height:22px;position:absolute}.vc-ps-fields .vc-input__label{left:0;width:34px}.vc-ps-fields .vc-input__desc{right:0;width:0}.vc-ps-fields__divider{height:5px}.vc-ps-fields__hex .vc-input__input{margin-left:20%;width:80%;height:18px;border:1px solid #888;box-shadow:inset 0 1px 1px rgba(0,0,0,.1),0 1px 0 0 #ececec;margin-bottom:6px;font-size:13px;padding-left:3px}.vc-ps-fields__hex .vc-input__label{position:absolute;top:0;left:0;width:14px;text-transform:uppercase;font-size:13px;height:18px;line-height:22px}',""]),o.default=m},7279:function(r,o,i){i.r(o);var l=i(8081),c=i.n(l),d=i(3645),u=i.n(d),m=u()(c());m.push([r.id,".vc-sketch{position:relative;width:200px;padding:10px 10px 0;box-sizing:initial;background:#fff;border-radius:4px;box-shadow:0 0 0 1px rgba(0,0,0,.15),0 8px 16px rgba(0,0,0,.15)}.vc-sketch-saturation-wrap{width:100%;padding-bottom:75%;position:relative;overflow:hidden}.vc-sketch-controls{display:flex}.vc-sketch-sliders{padding:4px 0;flex:1}.vc-sketch-sliders .vc-alpha-gradient,.vc-sketch-sliders .vc-hue{border-radius:2px}.vc-sketch-alpha-wrap,.vc-sketch-hue-wrap{position:relative;height:10px}.vc-sketch-alpha-wrap{margin-top:4px;overflow:hidden}.vc-sketch-color-wrap{width:24px;height:24px;position:relative;margin-top:4px;margin-left:4px;border-radius:3px}.vc-sketch-active-color{position:absolute;top:0;left:0;right:0;bottom:0;border-radius:2px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.15),inset 0 0 4px rgba(0,0,0,.25);z-index:2}.vc-sketch-color-wrap .vc-checkerboard{background-size:auto}.vc-sketch-field{display:flex;padding-top:4px}.vc-sketch-field .vc-input__input{width:90%;padding:4px 0 3px 10%;border:none;box-shadow:inset 0 0 0 1px #ccc;font-size:10px}.vc-sketch-field .vc-input__label{display:block;text-align:center;font-size:11px;color:#222;padding-top:3px;padding-bottom:4px;text-transform:capitalize}.vc-sketch-field--single{flex:1;padding-left:6px}.vc-sketch-field--double{flex:2}.vc-sketch-presets{margin-right:-10px;margin-left:-10px;padding-left:10px;padding-top:10px;border-top:1px solid #eee}.vc-sketch-presets-color{overflow:hidden;position:relative;display:inline-block;margin:0 10px 10px 0;vertical-align:top;cursor:pointer;width:16px;height:16px}.vc-sketch-presets-color,.vc-sketch-presets-color .vc-checkerboard{border-radius:3px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.15)}.vc-sketch__disable-alpha .vc-sketch-color-wrap{height:10px}",""]),o.default=m},6278:function(r,o,i){i.r(o);var l=i(8081),c=i.n(l),d=i(3645),u=i.n(d),m=u()(c());m.push([r.id,".vc-slider{position:relative;width:410px}.vc-slider-hue-warp{height:12px;position:relative}.vc-slider-hue-warp .vc-hue-picker{width:14px;height:14px;border-radius:6px;transform:translate(-7px,-2px);background-color:#f8f8f8;box-shadow:0 1px 4px 0 rgba(0,0,0,.37)}.vc-slider-swatches{display:flex;margin-top:20px}.vc-slider-swatch{margin-right:1px;flex:1;width:20%}.vc-slider-swatch:first-child{margin-right:1px}.vc-slider-swatch:first-child .vc-slider-swatch-picker{border-radius:2px 0 0 2px}.vc-slider-swatch:last-child{margin-right:0}.vc-slider-swatch:last-child .vc-slider-swatch-picker{border-radius:0 2px 2px 0}.vc-slider-swatch-picker{cursor:pointer;height:12px}.vc-slider-swatch:nth-child(n) .vc-slider-swatch-picker.vc-slider-swatch-picker--active{transform:scaleY(1.8);border-radius:3.6px/2px}.vc-slider-swatch-picker--white{box-shadow:inset 0 0 0 1px #ddd}.vc-slider-swatch-picker--active.vc-slider-swatch-picker--white{box-shadow:inset 0 0 0 .6px #ddd}",""]),o.default=m},3468:function(r,o,i){i.r(o);var l=i(8081),c=i.n(l),d=i(3645),u=i.n(d),m=u()(c());m.push([r.id,".vc-swatches{width:320px;height:240px;overflow-y:scroll;background-color:#fff;box-shadow:0 2px 10px rgba(0,0,0,.12),0 2px 5px rgba(0,0,0,.16)}.vc-swatches-box{padding:16px 0 6px 16px;overflow:hidden}.vc-swatches-color-group{padding-bottom:10px;width:40px;float:left;margin-right:10px}.vc-swatches-color-it{box-sizing:border-box;width:40px;height:24px;cursor:pointer;background:#880e4f;margin-bottom:1px;overflow:hidden;border-radius:2px 2px 0 0}.vc-swatches-color--white{border:1px solid #ddd}.vc-swatches-pick{fill:#fff;margin-left:8px;display:block}.vc-swatches-color--white .vc-swatches-pick{fill:#333}",""]),o.default=m},5689:function(r,o,i){i.r(o);var l=i(8081),c=i.n(l),d=i(3645),u=i.n(d),m=u()(c());m.push([r.id,".vc-twitter{background:#fff;border:0 solid rgba(0,0,0,.25);box-shadow:0 1px 4px rgba(0,0,0,.25);border-radius:4px;position:relative}.vc-twitter-triangle{border-color:transparent transparent #fff transparent}.vc-twitter-triangle,.vc-twitter-triangle-shadow{width:0;height:0;border-style:solid;border-width:0 9px 10px 9px;position:absolute}.vc-twitter-triangle-shadow{border-color:transparent transparent rgba(0,0,0,.1) transparent}.vc-twitter-body{padding:15px 9px 9px 15px}.vc-twitter .vc-editable-input{position:relative}.vc-twitter .vc-editable-input input{width:100px;font-size:14px;color:#666;border:0;outline:none;height:28px;box-shadow:inset 0 0 0 1px #f0f0f0;box-sizing:content-box;border-radius:0 4px 4px 0;float:left;padding:1px;padding-left:8px}.vc-twitter .vc-editable-input span{display:none}.vc-twitter-hash{background:#f0f0f0;height:30px;width:30px;border-radius:4px 0 0 4px;float:left;color:#98a1a4;display:flex;align-items:center;justify-content:center}.vc-twitter-swatch{width:30px;height:30px;float:left;border-radius:4px;margin:0 6px 6px 0;cursor:pointer;position:relative;outline:none}.vc-twitter-clear{clear:both}.vc-twitter-hide-triangle .vc-twitter-triangle,.vc-twitter-hide-triangle .vc-twitter-triangle-shadow{display:none}.vc-twitter-top-left-triangle .vc-twitter-triangle{top:-10px;left:12px}.vc-twitter-top-left-triangle .vc-twitter-triangle-shadow{top:-11px;left:12px}.vc-twitter-top-right-triangle .vc-twitter-triangle{top:-10px;right:12px}.vc-twitter-top-right-triangle .vc-twitter-triangle-shadow{top:-11px;right:12px}",""]),o.default=m},2410:function(r,o,i){i.r(o);var l=i(8081),c=i.n(l),d=i(3645),u=i.n(d),m=u()(c());m.push([r.id,".vc-alpha,.vc-alpha-checkboard-wrap{position:absolute;top:0;right:0;bottom:0;left:0}.vc-alpha-checkboard-wrap{overflow:hidden}.vc-alpha-gradient{position:absolute;top:0;right:0;bottom:0;left:0}.vc-alpha-container{cursor:pointer;position:relative;z-index:2;height:100%;margin:0 3px}.vc-alpha-pointer{z-index:2;position:absolute}.vc-alpha-picker{cursor:pointer;width:4px;border-radius:1px;height:8px;box-shadow:0 0 2px rgba(0,0,0,.6);background:#fff;margin-top:1px;transform:translateX(-2px)}",""]),o.default=m},3142:function(r,o,i){i.r(o);var l=i(8081),c=i.n(l),d=i(3645),u=i.n(d),m=u()(c());m.push([r.id,".vc-checkerboard{position:absolute;top:0;right:0;bottom:0;left:0;background-size:contain}",""]),o.default=m},7953:function(r,o,i){i.r(o);var l=i(8081),c=i.n(l),d=i(3645),u=i.n(d),m=u()(c());m.push([r.id,".vc-editable-input{position:relative}.vc-input__input{padding:0;border:0;outline:none}.vc-input__label{text-transform:capitalize}",""]),o.default=m},3097:function(r,o,i){i.r(o);var l=i(8081),c=i.n(l),d=i(3645),u=i.n(d),m=u()(c());m.push([r.id,".vc-hue{position:absolute;top:0;right:0;bottom:0;left:0;border-radius:2px}.vc-hue--horizontal{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.vc-hue--vertical{background:linear-gradient(0deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.vc-hue-container{cursor:pointer;margin:0 2px;position:relative;height:100%}.vc-hue-pointer{z-index:2;position:absolute}.vc-hue-picker{cursor:pointer;margin-top:1px;width:4px;border-radius:1px;height:8px;box-shadow:0 0 2px rgba(0,0,0,.6);background:#fff;transform:translateX(-2px)}",""]),o.default=m},4339:function(r,o,i){i.r(o);var l=i(8081),c=i.n(l),d=i(3645),u=i.n(d),m=u()(c());m.push([r.id,".vc-saturation,.vc-saturation--black,.vc-saturation--white{cursor:pointer;position:absolute;top:0;left:0;right:0;bottom:0}.vc-saturation--white{background:linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.vc-saturation--black{background:linear-gradient(0deg,#000,transparent)}.vc-saturation-pointer{cursor:pointer;position:absolute}.vc-saturation-circle{cursor:head;width:4px;height:4px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);border-radius:50%;transform:translate(-2px,-2px)}",""]),o.default=m},3645:function(r){r.exports=function(o){var i=[];return i.toString=function(){return this.map(function(c){var d="",u=typeof c[5]<"u";return c[4]&&(d+="@supports (".concat(c[4],") {")),c[2]&&(d+="@media ".concat(c[2]," {")),u&&(d+="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {")),d+=o(c),u&&(d+="}"),c[2]&&(d+="}"),c[4]&&(d+="}"),d}).join("")},i.i=function(c,d,u,m,h){typeof c=="string"&&(c=[[null,c,void 0]]);var _={};if(u)for(var E=0;E<this.length;E++){var y=this[E][0];y!=null&&(_[y]=!0)}for(var b=0;b<c.length;b++){var A=[].concat(c[b]);u&&_[A[0]]||(typeof h<"u"&&(typeof A[5]>"u"||(A[1]="@layer".concat(A[5].length>0?" ".concat(A[5]):""," {").concat(A[1],"}")),A[5]=h),d&&(A[2]&&(A[1]="@media ".concat(A[2]," {").concat(A[1],"}")),A[2]=d),m&&(A[4]?(A[1]="@supports (".concat(A[4],") {").concat(A[1],"}"),A[4]=m):A[4]="".concat(m)),i.push(A))}},i}},8081:function(r){r.exports=function(o){return o[1]}},9428:function(r){r.exports=o;function o(i,l,c){return l<c?i<l?l:i>c?c:i:i<c?c:i>l?l:i}},9016:function(r,o,i){var l=i(9159),c=l.Symbol;r.exports=c},6423:function(r,o,i){var l=i(9016),c=i(2366),d=i(2886),u="[object Null]",m="[object Undefined]",h=l?l.toStringTag:void 0;function _(E){return E==null?E===void 0?m:u:h&&h in Object(E)?c(E):d(E)}r.exports=_},6009:function(r,o,i){var l=i(1626),c=/^\s+/;function d(u){return u&&u.slice(0,l(u)+1).replace(c,"")}r.exports=d},791:function(r,o,i){var l=typeof i.g=="object"&&i.g&&i.g.Object===Object&&i.g;r.exports=l},2366:function(r,o,i){var l=i(9016),c=Object.prototype,d=c.hasOwnProperty,u=c.toString,m=l?l.toStringTag:void 0;function h(_){var E=d.call(_,m),y=_[m];try{_[m]=void 0;var b=!0}catch{}var A=u.call(_);return b&&(E?_[m]=y:delete _[m]),A}r.exports=h},2886:function(r){var o=Object.prototype,i=o.toString;function l(c){return i.call(c)}r.exports=l},9159:function(r,o,i){var l=i(791),c=typeof self=="object"&&self&&self.Object===Object&&self,d=l||c||Function("return this")();r.exports=d},1626:function(r){var o=/\s/;function i(l){for(var c=l.length;c--&&o.test(l.charAt(c)););return c}r.exports=i},3738:function(r,o,i){i(1703);var l=i(150),c=i(657),d=i(2012),u="Expected a function",m=Math.max,h=Math.min;function _(E,y,b){var A,T,I,N,x,R,M=0,w=!1,D=!1,B=!0;if(typeof E!="function")throw new TypeError(u);y=d(y)||0,l(b)&&(w=!!b.leading,D="maxWait"in b,I=D?m(d(b.maxWait)||0,y):I,B="trailing"in b?!!b.trailing:B);function k(q){var K=A,W=T;return A=T=void 0,M=q,N=E.apply(W,K),N}function V(q){return M=q,x=setTimeout(Y,y),w?k(q):N}function F(q){var K=q-R,W=q-M,ee=y-K;return D?h(ee,I-W):ee}function $(q){var K=q-R,W=q-M;return R===void 0||K>=y||K<0||D&&W>=I}function Y(){var q=c();if($(q))return j(q);x=setTimeout(Y,F(q))}function j(q){return x=void 0,B&&A?k(q):(A=T=void 0,N)}function U(){x!==void 0&&clearTimeout(x),M=0,A=R=T=x=void 0}function J(){return x===void 0?N:j(c())}function te(){var q=c(),K=$(q);if(A=arguments,T=this,R=q,K){if(x===void 0)return V(R);if(D)return clearTimeout(x),x=setTimeout(Y,y),k(R)}return x===void 0&&(x=setTimeout(Y,y)),N}return te.cancel=U,te.flush=J,te}r.exports=_},150:function(r){function o(i){var l=typeof i;return i!=null&&(l=="object"||l=="function")}r.exports=o},4430:function(r){function o(i){return i!=null&&typeof i=="object"}r.exports=o},7691:function(r,o,i){var l=i(6423),c=i(4430),d="[object Symbol]";function u(m){return typeof m=="symbol"||c(m)&&l(m)==d}r.exports=u},657:function(r,o,i){var l=i(9159),c=function(){return l.Date.now()};r.exports=c},9289:function(r,o,i){i(1703);var l=i(3738),c=i(150),d="Expected a function";function u(m,h,_){var E=!0,y=!0;if(typeof m!="function")throw new TypeError(d);return c(_)&&(E="leading"in _?!!_.leading:E,y="trailing"in _?!!_.trailing:y),l(m,h,{leading:E,maxWait:h,trailing:y})}r.exports=u},2012:function(r,o,i){var l=i(6009),c=i(150),d=i(7691),u=NaN,m=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,_=/^0o[0-7]+$/i,E=parseInt;function y(b){if(typeof b=="number")return b;if(d(b))return u;if(c(b)){var A=typeof b.valueOf=="function"?b.valueOf():b;b=c(A)?A+"":A}if(typeof b!="string")return b===0?b:+b;b=l(b);var T=h.test(b);return T||_.test(b)?E(b.slice(2),T?2:8):m.test(b)?u:+b}r.exports=y},7013:function(r,o,i){var l;(function(c){var d=/^\s+/,u=/\s+$/,m=0,h=c.round,_=c.min,E=c.max,y=c.random;function b(ie,fe){if(ie=ie||"",fe=fe||{},ie instanceof b)return ie;if(!(this instanceof b))return new b(ie,fe);var me=A(ie);this._originalInput=ie,this._r=me.r,this._g=me.g,this._b=me.b,this._a=me.a,this._roundA=h(100*this._a)/100,this._format=fe.format||me.format,this._gradientType=fe.gradientType,this._r<1&&(this._r=h(this._r)),this._g<1&&(this._g=h(this._g)),this._b<1&&(this._b=h(this._b)),this._ok=me.ok,this._tc_id=m++}b.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var ie=this.toRgb();return(ie.r*299+ie.g*587+ie.b*114)/1e3},getLuminance:function(){var ie=this.toRgb(),fe,me,De,Ye,ze,He;return fe=ie.r/255,me=ie.g/255,De=ie.b/255,fe<=.03928?Ye=fe/12.92:Ye=c.pow((fe+.055)/1.055,2.4),me<=.03928?ze=me/12.92:ze=c.pow((me+.055)/1.055,2.4),De<=.03928?He=De/12.92:He=c.pow((De+.055)/1.055,2.4),.2126*Ye+.7152*ze+.0722*He},setAlpha:function(ie){return this._a=Ce(ie),this._roundA=h(100*this._a)/100,this},toHsv:function(){var ie=x(this._r,this._g,this._b);return{h:ie.h*360,s:ie.s,v:ie.v,a:this._a}},toHsvString:function(){var ie=x(this._r,this._g,this._b),fe=h(ie.h*360),me=h(ie.s*100),De=h(ie.v*100);return this._a==1?"hsv("+fe+", "+me+"%, "+De+"%)":"hsva("+fe+", "+me+"%, "+De+"%, "+this._roundA+")"},toHsl:function(){var ie=I(this._r,this._g,this._b);return{h:ie.h*360,s:ie.s,l:ie.l,a:this._a}},toHslString:function(){var ie=I(this._r,this._g,this._b),fe=h(ie.h*360),me=h(ie.s*100),De=h(ie.l*100);return this._a==1?"hsl("+fe+", "+me+"%, "+De+"%)":"hsla("+fe+", "+me+"%, "+De+"%, "+this._roundA+")"},toHex:function(ie){return M(this._r,this._g,this._b,ie)},toHexString:function(ie){return"#"+this.toHex(ie)},toHex8:function(ie){return w(this._r,this._g,this._b,this._a,ie)},toHex8String:function(ie){return"#"+this.toHex8(ie)},toRgb:function(){return{r:h(this._r),g:h(this._g),b:h(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+h(this._r)+", "+h(this._g)+", "+h(this._b)+")":"rgba("+h(this._r)+", "+h(this._g)+", "+h(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:h(ue(this._r,255)*100)+"%",g:h(ue(this._g,255)*100)+"%",b:h(ue(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+h(ue(this._r,255)*100)+"%, "+h(ue(this._g,255)*100)+"%, "+h(ue(this._b,255)*100)+"%)":"rgba("+h(ue(this._r,255)*100)+"%, "+h(ue(this._g,255)*100)+"%, "+h(ue(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:ae[M(this._r,this._g,this._b,!0)]||!1},toFilter:function(ie){var fe="#"+D(this._r,this._g,this._b,this._a),me=fe,De=this._gradientType?"GradientType = 1, ":"";if(ie){var Ye=b(ie);me="#"+D(Ye._r,Ye._g,Ye._b,Ye._a)}return"progid:DXImageTransform.Microsoft.gradient("+De+"startColorstr="+fe+",endColorstr="+me+")"},toString:function(ie){var fe=!!ie;ie=ie||this._format;var me=!1,De=this._a<1&&this._a>=0,Ye=!fe&&De&&(ie==="hex"||ie==="hex6"||ie==="hex3"||ie==="hex4"||ie==="hex8"||ie==="name");return Ye?ie==="name"&&this._a===0?this.toName():this.toRgbString():(ie==="rgb"&&(me=this.toRgbString()),ie==="prgb"&&(me=this.toPercentageRgbString()),(ie==="hex"||ie==="hex6")&&(me=this.toHexString()),ie==="hex3"&&(me=this.toHexString(!0)),ie==="hex4"&&(me=this.toHex8String(!0)),ie==="hex8"&&(me=this.toHex8String()),ie==="name"&&(me=this.toName()),ie==="hsl"&&(me=this.toHslString()),ie==="hsv"&&(me=this.toHsvString()),me||this.toHexString())},clone:function(){return b(this.toString())},_applyModification:function(ie,fe){var me=ie.apply(null,[this].concat([].slice.call(fe)));return this._r=me._r,this._g=me._g,this._b=me._b,this.setAlpha(me._a),this},lighten:function(){return this._applyModification(F,arguments)},brighten:function(){return this._applyModification($,arguments)},darken:function(){return this._applyModification(Y,arguments)},desaturate:function(){return this._applyModification(B,arguments)},saturate:function(){return this._applyModification(k,arguments)},greyscale:function(){return this._applyModification(V,arguments)},spin:function(){return this._applyModification(j,arguments)},_applyCombination:function(ie,fe){return ie.apply(null,[this].concat([].slice.call(fe)))},analogous:function(){return this._applyCombination(K,arguments)},complement:function(){return this._applyCombination(U,arguments)},monochromatic:function(){return this._applyCombination(W,arguments)},splitcomplement:function(){return this._applyCombination(q,arguments)},triad:function(){return this._applyCombination(J,arguments)},tetrad:function(){return this._applyCombination(te,arguments)}},b.fromRatio=function(ie,fe){if(typeof ie=="object"){var me={};for(var De in ie)ie.hasOwnProperty(De)&&(De==="a"?me[De]=ie[De]:me[De]=Le(ie[De]));ie=me}return b(ie,fe)};function A(ie){var fe={r:0,g:0,b:0},me=1,De=null,Ye=null,ze=null,He=!1,xe=!1;return typeof ie=="string"&&(ie=X(ie)),typeof ie=="object"&&(Dt(ie.r)&&Dt(ie.g)&&Dt(ie.b)?(fe=T(ie.r,ie.g,ie.b),He=!0,xe=String(ie.r).substr(-1)==="%"?"prgb":"rgb"):Dt(ie.h)&&Dt(ie.s)&&Dt(ie.v)?(De=Le(ie.s),Ye=Le(ie.v),fe=R(ie.h,De,Ye),He=!0,xe="hsv"):Dt(ie.h)&&Dt(ie.s)&&Dt(ie.l)&&(De=Le(ie.s),ze=Le(ie.l),fe=N(ie.h,De,ze),He=!0,xe="hsl"),ie.hasOwnProperty("a")&&(me=ie.a)),me=Ce(me),{ok:He,format:ie.format||xe,r:_(255,E(fe.r,0)),g:_(255,E(fe.g,0)),b:_(255,E(fe.b,0)),a:me}}function T(ie,fe,me){return{r:ue(ie,255)*255,g:ue(fe,255)*255,b:ue(me,255)*255}}function I(ie,fe,me){ie=ue(ie,255),fe=ue(fe,255),me=ue(me,255);var De=E(ie,fe,me),Ye=_(ie,fe,me),ze,He,xe=(De+Ye)/2;if(De==Ye)ze=He=0;else{var pe=De-Ye;switch(He=xe>.5?pe/(2-De-Ye):pe/(De+Ye),De){case ie:ze=(fe-me)/pe+(fe<me?6:0);break;case fe:ze=(me-ie)/pe+2;break;case me:ze=(ie-fe)/pe+4;break}ze/=6}return{h:ze,s:He,l:xe}}function N(ie,fe,me){var De,Ye,ze;ie=ue(ie,360),fe=ue(fe,100),me=ue(me,100);function He(ye,Be,ne){return ne<0&&(ne+=1),ne>1&&(ne-=1),ne<.16666666666666666?ye+(Be-ye)*6*ne:ne<.5?Be:ne<.6666666666666666?ye+(Be-ye)*(.6666666666666666-ne)*6:ye}if(fe===0)De=Ye=ze=me;else{var xe=me<.5?me*(1+fe):me+fe-me*fe,pe=2*me-xe;De=He(pe,xe,ie+.3333333333333333),Ye=He(pe,xe,ie),ze=He(pe,xe,ie-.3333333333333333)}return{r:De*255,g:Ye*255,b:ze*255}}function x(ie,fe,me){ie=ue(ie,255),fe=ue(fe,255),me=ue(me,255);var De=E(ie,fe,me),Ye=_(ie,fe,me),ze,He,xe=De,pe=De-Ye;if(He=De===0?0:pe/De,De==Ye)ze=0;else{switch(De){case ie:ze=(fe-me)/pe+(fe<me?6:0);break;case fe:ze=(me-ie)/pe+2;break;case me:ze=(ie-fe)/pe+4;break}ze/=6}return{h:ze,s:He,v:xe}}function R(ie,fe,me){ie=ue(ie,360)*6,fe=ue(fe,100),me=ue(me,100);var De=c.floor(ie),Ye=ie-De,ze=me*(1-fe),He=me*(1-Ye*fe),xe=me*(1-(1-Ye)*fe),pe=De%6,ye=[me,He,ze,ze,xe,me][pe],Be=[xe,me,me,He,ze,ze][pe],ne=[ze,ze,xe,me,me,He][pe];return{r:ye*255,g:Be*255,b:ne*255}}function M(ie,fe,me,De){var Ye=[Re(h(ie).toString(16)),Re(h(fe).toString(16)),Re(h(me).toString(16))];return De&&Ye[0].charAt(0)==Ye[0].charAt(1)&&Ye[1].charAt(0)==Ye[1].charAt(1)&&Ye[2].charAt(0)==Ye[2].charAt(1)?Ye[0].charAt(0)+Ye[1].charAt(0)+Ye[2].charAt(0):Ye.join("")}function w(ie,fe,me,De,Ye){var ze=[Re(h(ie).toString(16)),Re(h(fe).toString(16)),Re(h(me).toString(16)),Re(Xe(De))];return Ye&&ze[0].charAt(0)==ze[0].charAt(1)&&ze[1].charAt(0)==ze[1].charAt(1)&&ze[2].charAt(0)==ze[2].charAt(1)&&ze[3].charAt(0)==ze[3].charAt(1)?ze[0].charAt(0)+ze[1].charAt(0)+ze[2].charAt(0)+ze[3].charAt(0):ze.join("")}function D(ie,fe,me,De){var Ye=[Re(Xe(De)),Re(h(ie).toString(16)),Re(h(fe).toString(16)),Re(h(me).toString(16))];return Ye.join("")}b.equals=function(ie,fe){return!ie||!fe?!1:b(ie).toRgbString()==b(fe).toRgbString()},b.random=function(){return b.fromRatio({r:y(),g:y(),b:y()})};function B(ie,fe){fe=fe===0?0:fe||10;var me=b(ie).toHsl();return me.s-=fe/100,me.s=ge(me.s),b(me)}function k(ie,fe){fe=fe===0?0:fe||10;var me=b(ie).toHsl();return me.s+=fe/100,me.s=ge(me.s),b(me)}function V(ie){return b(ie).desaturate(100)}function F(ie,fe){fe=fe===0?0:fe||10;var me=b(ie).toHsl();return me.l+=fe/100,me.l=ge(me.l),b(me)}function $(ie,fe){fe=fe===0?0:fe||10;var me=b(ie).toRgb();return me.r=E(0,_(255,me.r-h(255*-(fe/100)))),me.g=E(0,_(255,me.g-h(255*-(fe/100)))),me.b=E(0,_(255,me.b-h(255*-(fe/100)))),b(me)}function Y(ie,fe){fe=fe===0?0:fe||10;var me=b(ie).toHsl();return me.l-=fe/100,me.l=ge(me.l),b(me)}function j(ie,fe){var me=b(ie).toHsl(),De=(me.h+fe)%360;return me.h=De<0?360+De:De,b(me)}function U(ie){var fe=b(ie).toHsl();return fe.h=(fe.h+180)%360,b(fe)}function J(ie){var fe=b(ie).toHsl(),me=fe.h;return[b(ie),b({h:(me+120)%360,s:fe.s,l:fe.l}),b({h:(me+240)%360,s:fe.s,l:fe.l})]}function te(ie){var fe=b(ie).toHsl(),me=fe.h;return[b(ie),b({h:(me+90)%360,s:fe.s,l:fe.l}),b({h:(me+180)%360,s:fe.s,l:fe.l}),b({h:(me+270)%360,s:fe.s,l:fe.l})]}function q(ie){var fe=b(ie).toHsl(),me=fe.h;return[b(ie),b({h:(me+72)%360,s:fe.s,l:fe.l}),b({h:(me+216)%360,s:fe.s,l:fe.l})]}function K(ie,fe,me){fe=fe||6,me=me||30;var De=b(ie).toHsl(),Ye=360/me,ze=[b(ie)];for(De.h=(De.h-(Ye*fe>>1)+720)%360;--fe;)De.h=(De.h+Ye)%360,ze.push(b(De));return ze}function W(ie,fe){fe=fe||6;for(var me=b(ie).toHsv(),De=me.h,Ye=me.s,ze=me.v,He=[],xe=1/fe;fe--;)He.push(b({h:De,s:Ye,v:ze})),ze=(ze+xe)%1;return He}b.mix=function(ie,fe,me){me=me===0?0:me||50;var De=b(ie).toRgb(),Ye=b(fe).toRgb(),ze=me/100,He={r:(Ye.r-De.r)*ze+De.r,g:(Ye.g-De.g)*ze+De.g,b:(Ye.b-De.b)*ze+De.b,a:(Ye.a-De.a)*ze+De.a};return b(He)},b.readability=function(ie,fe){var me=b(ie),De=b(fe);return(c.max(me.getLuminance(),De.getLuminance())+.05)/(c.min(me.getLuminance(),De.getLuminance())+.05)},b.isReadable=function(ie,fe,me){var De=b.readability(ie,fe),Ye,ze;switch(ze=!1,Ye=se(me),Ye.level+Ye.size){case"AAsmall":case"AAAlarge":ze=De>=4.5;break;case"AAlarge":ze=De>=3;break;case"AAAsmall":ze=De>=7;break}return ze},b.mostReadable=function(ie,fe,me){var De=null,Ye=0,ze,He,xe,pe;me=me||{},He=me.includeFallbackColors,xe=me.level,pe=me.size;for(var ye=0;ye<fe.length;ye++)ze=b.readability(ie,fe[ye]),ze>Ye&&(Ye=ze,De=b(fe[ye]));return b.isReadable(ie,De,{level:xe,size:pe})||!He?De:(me.includeFallbackColors=!1,b.mostReadable(ie,["#fff","#000"],me))};var ee=b.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},ae=b.hexNames=ve(ee);function ve(ie){var fe={};for(var me in ie)ie.hasOwnProperty(me)&&(fe[ie[me]]=me);return fe}function Ce(ie){return ie=parseFloat(ie),(isNaN(ie)||ie<0||ie>1)&&(ie=1),ie}function ue(ie,fe){We(ie)&&(ie="100%");var me=Ue(ie);return ie=_(fe,E(0,parseFloat(ie))),me&&(ie=parseInt(ie*fe,10)/100),c.abs(ie-fe)<1e-6?1:ie%fe/parseFloat(fe)}function ge(ie){return _(1,E(0,ie))}function Me(ie){return parseInt(ie,16)}function We(ie){return typeof ie=="string"&&ie.indexOf(".")!=-1&&parseFloat(ie)===1}function Ue(ie){return typeof ie=="string"&&ie.indexOf("%")!=-1}function Re(ie){return ie.length==1?"0"+ie:""+ie}function Le(ie){return ie<=1&&(ie=ie*100+"%"),ie}function Xe(ie){return c.round(parseFloat(ie)*255).toString(16)}function et(ie){return Me(ie)/255}var yt=function(){var ie="[-\\+]?\\d+%?",fe="[-\\+]?\\d*\\.\\d+%?",me="(?:"+fe+")|(?:"+ie+")",De="[\\s|\\(]+("+me+")[,|\\s]+("+me+")[,|\\s]+("+me+")\\s*\\)?",Ye="[\\s|\\(]+("+me+")[,|\\s]+("+me+")[,|\\s]+("+me+")[,|\\s]+("+me+")\\s*\\)?";return{CSS_UNIT:new RegExp(me),rgb:new RegExp("rgb"+De),rgba:new RegExp("rgba"+Ye),hsl:new RegExp("hsl"+De),hsla:new RegExp("hsla"+Ye),hsv:new RegExp("hsv"+De),hsva:new RegExp("hsva"+Ye),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Dt(ie){return!!yt.CSS_UNIT.exec(ie)}function X(ie){ie=ie.replace(d,"").replace(u,"").toLowerCase();var fe=!1;if(ee[ie])ie=ee[ie],fe=!0;else if(ie=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var me;return(me=yt.rgb.exec(ie))?{r:me[1],g:me[2],b:me[3]}:(me=yt.rgba.exec(ie))?{r:me[1],g:me[2],b:me[3],a:me[4]}:(me=yt.hsl.exec(ie))?{h:me[1],s:me[2],l:me[3]}:(me=yt.hsla.exec(ie))?{h:me[1],s:me[2],l:me[3],a:me[4]}:(me=yt.hsv.exec(ie))?{h:me[1],s:me[2],v:me[3]}:(me=yt.hsva.exec(ie))?{h:me[1],s:me[2],v:me[3],a:me[4]}:(me=yt.hex8.exec(ie))?{r:Me(me[1]),g:Me(me[2]),b:Me(me[3]),a:et(me[4]),format:fe?"name":"hex8"}:(me=yt.hex6.exec(ie))?{r:Me(me[1]),g:Me(me[2]),b:Me(me[3]),format:fe?"name":"hex"}:(me=yt.hex4.exec(ie))?{r:Me(me[1]+""+me[1]),g:Me(me[2]+""+me[2]),b:Me(me[3]+""+me[3]),a:et(me[4]+""+me[4]),format:fe?"name":"hex8"}:(me=yt.hex3.exec(ie))?{r:Me(me[1]+""+me[1]),g:Me(me[2]+""+me[2]),b:Me(me[3]+""+me[3]),format:fe?"name":"hex"}:!1}function se(ie){var fe,me;return ie=ie||{level:"AA",size:"small"},fe=(ie.level||"AA").toUpperCase(),me=(ie.size||"small").toLowerCase(),fe!=="AA"&&fe!=="AAA"&&(fe="AA"),me!=="small"&&me!=="large"&&(me="small"),{level:fe,size:me}}r.exports?r.exports=b:(l=(function(){return b}).call(o,i,o,r),l!==void 0&&(r.exports=l))})(Math)},89:function(r,o){o.Z=(i,l)=>{const c=i.__vccOpts||i;for(const[d,u]of l)c[d]=u;return c}},3647:function(r,o,i){var l=i(6095);l.__esModule&&(l=l.default),typeof l=="string"&&(l=[[r.id,l,""]]),l.locals&&(r.exports=l.locals);var c=i(7037).Z;c("29397b9c",l,!0,{sourceMap:!1,shadowMode:!1})},325:function(r,o,i){var l=i(6047);l.__esModule&&(l=l.default),typeof l=="string"&&(l=[[r.id,l,""]]),l.locals&&(r.exports=l.locals);var c=i(7037).Z;c("479d8be0",l,!0,{sourceMap:!1,shadowMode:!1})},5208:function(r,o,i){var l=i(9481);l.__esModule&&(l=l.default),typeof l=="string"&&(l=[[r.id,l,""]]),l.locals&&(r.exports=l.locals);var c=i(7037).Z;c("1e383f72",l,!0,{sourceMap:!1,shadowMode:!1})},1425:function(r,o,i){var l=i(5186);l.__esModule&&(l=l.default),typeof l=="string"&&(l=[[r.id,l,""]]),l.locals&&(r.exports=l.locals);var c=i(7037).Z;c("3855edf0",l,!0,{sourceMap:!1,shadowMode:!1})},1902:function(r,o,i){var l=i(3695);l.__esModule&&(l=l.default),typeof l=="string"&&(l=[[r.id,l,""]]),l.locals&&(r.exports=l.locals);var c=i(7037).Z;c("2f73e1a8",l,!0,{sourceMap:!1,shadowMode:!1})},5815:function(r,o,i){var l=i(7279);l.__esModule&&(l=l.default),typeof l=="string"&&(l=[[r.id,l,""]]),l.locals&&(r.exports=l.locals);var c=i(7037).Z;c("36c086c2",l,!0,{sourceMap:!1,shadowMode:!1})},8016:function(r,o,i){var l=i(6278);l.__esModule&&(l=l.default),typeof l=="string"&&(l=[[r.id,l,""]]),l.locals&&(r.exports=l.locals);var c=i(7037).Z;c("8bcdd408",l,!0,{sourceMap:!1,shadowMode:!1})},193:function(r,o,i){var l=i(3468);l.__esModule&&(l=l.default),typeof l=="string"&&(l=[[r.id,l,""]]),l.locals&&(r.exports=l.locals);var c=i(7037).Z;c("17a63672",l,!0,{sourceMap:!1,shadowMode:!1})},1113:function(r,o,i){var l=i(5689);l.__esModule&&(l=l.default),typeof l=="string"&&(l=[[r.id,l,""]]),l.locals&&(r.exports=l.locals);var c=i(7037).Z;c("39c50172",l,!0,{sourceMap:!1,shadowMode:!1})},6320:function(r,o,i){var l=i(2410);l.__esModule&&(l=l.default),typeof l=="string"&&(l=[[r.id,l,""]]),l.locals&&(r.exports=l.locals);var c=i(7037).Z;c("5c6f2742",l,!0,{sourceMap:!1,shadowMode:!1})},3205:function(r,o,i){var l=i(3142);l.__esModule&&(l=l.default),typeof l=="string"&&(l=[[r.id,l,""]]),l.locals&&(r.exports=l.locals);var c=i(7037).Z;c("90803b82",l,!0,{sourceMap:!1,shadowMode:!1})},1979:function(r,o,i){var l=i(7953);l.__esModule&&(l=l.default),typeof l=="string"&&(l=[[r.id,l,""]]),l.locals&&(r.exports=l.locals);var c=i(7037).Z;c("418ed5a2",l,!0,{sourceMap:!1,shadowMode:!1})},6547:function(r,o,i){var l=i(3097);l.__esModule&&(l=l.default),typeof l=="string"&&(l=[[r.id,l,""]]),l.locals&&(r.exports=l.locals);var c=i(7037).Z;c("1f7c089b",l,!0,{sourceMap:!1,shadowMode:!1})},5233:function(r,o,i){var l=i(4339);l.__esModule&&(l=l.default),typeof l=="string"&&(l=[[r.id,l,""]]),l.locals&&(r.exports=l.locals);var c=i(7037).Z;c("491ed8fe",l,!0,{sourceMap:!1,shadowMode:!1})},7037:function(r,o,i){i.d(o,{Z:function(){return T}});function l(D,B){for(var k=[],V={},F=0;F<B.length;F++){var $=B[F],Y=$[0],j=$[1],U=$[2],J=$[3],te={id:D+":"+F,css:j,media:U,sourceMap:J};V[Y]?V[Y].parts.push(te):k.push(V[Y]={id:Y,parts:[te]})}return k}var c=typeof document<"u";if(typeof DEBUG<"u"&&DEBUG&&!c)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var d={},u=c&&(document.head||document.getElementsByTagName("head")[0]),m=null,h=0,_=!1,E=function(){},y=null,b="data-vue-ssr-id",A=typeof navigator<"u"&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function T(D,B,k,V){_=k,y=V||{};var F=l(D,B);return I(F),function(Y){for(var j=[],U=0;U<F.length;U++){var J=F[U],te=d[J.id];te.refs--,j.push(te)}Y?(F=l(D,Y),I(F)):F=[];for(var U=0;U<j.length;U++){var te=j[U];if(te.refs===0){for(var q=0;q<te.parts.length;q++)te.parts[q]();delete d[te.id]}}}}function I(D){for(var B=0;B<D.length;B++){var k=D[B],V=d[k.id];if(V){V.refs++;for(var F=0;F<V.parts.length;F++)V.parts[F](k.parts[F]);for(;F<k.parts.length;F++)V.parts.push(x(k.parts[F]));V.parts.length>k.parts.length&&(V.parts.length=k.parts.length)}else{for(var $=[],F=0;F<k.parts.length;F++)$.push(x(k.parts[F]));d[k.id]={id:k.id,refs:1,parts:$}}}}function N(){var D=document.createElement("style");return D.type="text/css",u.appendChild(D),D}function x(D){var B,k,V=document.querySelector("style["+b+'~="'+D.id+'"]');if(V){if(_)return E;V.parentNode.removeChild(V)}if(A){var F=h++;V=m||(m=N()),B=M.bind(null,V,F,!1),k=M.bind(null,V,F,!0)}else V=N(),B=w.bind(null,V),k=function(){V.parentNode.removeChild(V)};return B(D),function(Y){if(Y){if(Y.css===D.css&&Y.media===D.media&&Y.sourceMap===D.sourceMap)return;B(D=Y)}else k()}}var R=function(){var D=[];return function(B,k){return D[B]=k,D.filter(Boolean).join(`
`)}}();function M(D,B,k,V){var F=k?"":V.css;if(D.styleSheet)D.styleSheet.cssText=R(B,F);else{var $=document.createTextNode(F),Y=D.childNodes;Y[B]&&D.removeChild(Y[B]),Y.length?D.insertBefore($,Y[B]):D.appendChild($)}}function w(D,B){var k=B.css,V=B.media,F=B.sourceMap;if(V&&D.setAttribute("media",V),y.ssrId&&D.setAttribute(b,B.id),F&&(k+=`
/*# sourceURL=`+F.sources[0]+" */",k+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(F))))+" */"),D.styleSheet)D.styleSheet.cssText=k;else{for(;D.firstChild;)D.removeChild(D.firstChild);D.appendChild(document.createTextNode(k))}}}},a={};function e(r){var o=a[r];if(o!==void 0)return o.exports;var i=a[r]={id:r,exports:{}};return n[r](i,i.exports,e),i.exports}(function(){e.n=function(r){var o=r&&r.__esModule?function(){return r.default}:function(){return r};return e.d(o,{a:o}),o}})(),function(){e.d=function(r,o){for(var i in o)e.o(o,i)&&!e.o(r,i)&&Object.defineProperty(r,i,{enumerable:!0,get:o[i]})}}(),function(){e.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()}(),function(){e.o=function(r,o){return Object.prototype.hasOwnProperty.call(r,o)}}(),function(){e.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}}(),function(){e.p=""}();var s={};(function(){if(e.r(s),e.d(s,{Alpha:function(){return vp},Checkboard:function(){return Ld},Chrome:function(){return F1},ColorMixin:function(){return b},Compact:function(){return x},EditableInput:function(){return ge},Grayscale:function(){return $},Hue:function(){return De},Material:function(){return Ue},Photoshop:function(){return k1},Saturation:function(){return ar},Sketch:function(){return B1},Slider:function(){return xe},Swatches:function(){return ts},Twitter:function(){return U1},default:function(){return U3},version:function(){return $1}}),typeof window<"u"){var r=window.document.currentScript,o=r&&r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);o&&(e.p=o[1])}var i={i8:"3.0.6"},l=U2;const c={role:"application","aria-label":"Compact color picker",class:"vc-compact"},d={class:"vc-compact-colors",role:"listbox"},u=["aria-label","aria-selected","onClick"],m={class:"vc-compact-dot"};function h(_e,tt,ut,Gt,jt,Qe){return(0,l.openBlock)(),(0,l.createElementBlock)("div",c,[(0,l.createElementVNode)("ul",d,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(_e.paletteUpperCase(ut.palette),Ft=>((0,l.openBlock)(),(0,l.createElementBlock)("li",{role:"option","aria-label":"color:"+Ft,"aria-selected":Ft===Qe.pick,class:(0,l.normalizeClass)(["vc-compact-color-item",{"vc-compact-color-item--white":Ft==="#FFFFFF"}]),key:Ft,style:(0,l.normalizeStyle)({background:Ft}),onClick:Zt=>Qe.handlerClick(Ft)},[(0,l.withDirectives)((0,l.createElementVNode)("div",m,null,512),[[l.vShow,Ft===Qe.pick]])],14,u))),128))])])}var _=e(7013),E=e.n(_);function y(_e={},tt=0){const ut=_e&&_e.a;let Gt;_e&&_e.hsl?Gt=E()(_e.hsl):_e&&_e.hex&&_e.hex.length>0?Gt=E()(_e.hex):_e&&_e.hsv?Gt=E()(_e.hsv):_e&&_e.rgba?Gt=E()(_e.rgba):_e&&_e.rgb?Gt=E()(_e.rgb):Gt=E()(_e),Gt&&(Gt._a===void 0||Gt._a===null)&&Gt.setAlpha(ut||1);const jt=Gt.toHsl(),Qe=Gt.toHsv();return jt.s===0&&(Qe.h=jt.h=_e.h||_e.hsl&&_e.hsl.h||tt||0),{hsl:jt,hex:Gt.toHexString().toUpperCase(),hex8:Gt.toHex8String().toUpperCase(),rgba:Gt.toRgb(),hsv:Qe,oldHue:_e.h||tt||jt.h,source:_e.source,a:_e.a||Gt.getAlpha()}}var b={props:["modelValue"],data(){return{val:y(this.modelValue)}},computed:{colors:{get(){return this.val},set(_e){this.val=_e,this.$emit("update:modelValue",_e)}}},watch:{modelValue(_e){this.val=y(_e)}},methods:{colorChange(_e,tt){this.oldHue=this.colors.hsl.h,this.colors=y(_e,tt||this.oldHue)},isValidHex(_e){return E()(_e).isValid()},simpleCheckForValidColor(_e){const tt=["r","g","b","a","h","s","l","v"];let ut=0,Gt=0;for(let jt=0;jt<tt.length;jt++){const Qe=tt[jt];_e[Qe]&&(ut++,isNaN(_e[Qe])||Gt++)}if(ut===Gt)return _e},paletteUpperCase(_e){return _e.map(tt=>tt.toUpperCase())},isTransparent(_e){return E()(_e).getAlpha()===0}}};const A=["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#CCCCCC","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"];var T={name:"Compact",mixins:[b],props:{palette:{type:Array,default(){return A}}},components:{},computed:{pick(){return this.colors.hex.toUpperCase()}},methods:{handlerClick(_e){this.colorChange({hex:_e,source:"hex"})}}};e(325);var I=e(89),x=(0,I.Z)(T,[["render",h]]);const R={role:"application","aria-label":"Grayscale color picker",class:"vc-grayscale"},M={class:"vc-grayscale-colors",role:"listbox"},w=["aria-label","aria-selected","onClick"],D={class:"vc-grayscale-dot"};function B(_e,tt,ut,Gt,jt,Qe){return(0,l.openBlock)(),(0,l.createElementBlock)("div",R,[(0,l.createElementVNode)("ul",M,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(_e.paletteUpperCase(ut.palette),Ft=>((0,l.openBlock)(),(0,l.createElementBlock)("li",{role:"option","aria-label":"Color:"+Ft,"aria-selected":Ft===Qe.pick,key:Ft,class:(0,l.normalizeClass)(["vc-grayscale-color-item",{"vc-grayscale-color-item--white":Ft=="#FFFFFF"}]),style:(0,l.normalizeStyle)({background:Ft}),onClick:Zt=>Qe.handlerClick(Ft)},[(0,l.withDirectives)((0,l.createElementVNode)("div",D,null,512),[[l.vShow,Ft===Qe.pick]])],14,w))),128))])])}const k=["#FFFFFF","#F2F2F2","#E6E6E6","#D9D9D9","#CCCCCC","#BFBFBF","#B3B3B3","#A6A6A6","#999999","#8C8C8C","#808080","#737373","#666666","#595959","#4D4D4D","#404040","#333333","#262626","#0D0D0D","#000000"];var V={name:"Grayscale",mixins:[b],props:{palette:{type:Array,default(){return k}}},components:{},computed:{pick(){return this.colors.hex.toUpperCase()}},methods:{handlerClick(_e){this.colorChange({hex:_e,source:"hex"})}}};e(5208);var $=(0,I.Z)(V,[["render",B]]);const Y={role:"application","aria-label":"Material color picker",class:"vc-material"},j={class:"vc-material-split"},U={class:"vc-material-third"},J={class:"vc-material-third"},te={class:"vc-material-third"};function q(_e,tt,ut,Gt,jt,Qe){const Ft=(0,l.resolveComponent)("ed-in");return(0,l.openBlock)(),(0,l.createElementBlock)("div",Y,[(0,l.createVNode)(Ft,{class:"vc-material-hex",label:"hex",modelValue:_e.colors.hex,"onUpdate:modelValue":tt[0]||(tt[0]=Zt=>_e.colors.hex=Zt),style:(0,l.normalizeStyle)({borderColor:_e.colors.hex}),onChange:Qe.onChange},null,8,["modelValue","style","onChange"]),(0,l.createElementVNode)("div",j,[(0,l.createElementVNode)("div",U,[(0,l.createVNode)(Ft,{label:"r",modelValue:_e.colors.rgba.r,"onUpdate:modelValue":tt[1]||(tt[1]=Zt=>_e.colors.rgba.r=Zt),onChange:Qe.onChange},null,8,["modelValue","onChange"])]),(0,l.createElementVNode)("div",J,[(0,l.createVNode)(Ft,{label:"g",modelValue:_e.colors.rgba.g,"onUpdate:modelValue":tt[2]||(tt[2]=Zt=>_e.colors.rgba.g=Zt),onChange:Qe.onChange},null,8,["modelValue","onChange"])]),(0,l.createElementVNode)("div",te,[(0,l.createVNode)(Ft,{label:"b",modelValue:_e.colors.rgba.b,"onUpdate:modelValue":tt[3]||(tt[3]=Zt=>_e.colors.rgba.b=Zt),onChange:Qe.onChange},null,8,["modelValue","onChange"])])])])}const K={class:"vc-editable-input"},W=["aria-labelledby"],ee=["for","id"],ae={class:"vc-input__desc"};function ve(_e,tt,ut,Gt,jt,Qe){return(0,l.openBlock)(),(0,l.createElementBlock)("div",K,[(0,l.withDirectives)((0,l.createElementVNode)("input",{"aria-labelledby":Qe.labelId,class:"vc-input__input","onUpdate:modelValue":tt[0]||(tt[0]=Ft=>Qe.val=Ft),onKeydown:tt[1]||(tt[1]=(...Ft)=>Qe.handleKeyDown&&Qe.handleKeyDown(...Ft)),onInput:tt[2]||(tt[2]=(...Ft)=>Qe.update&&Qe.update(...Ft)),ref:"input"},null,40,W),[[l.vModelText,Qe.val]]),(0,l.createElementVNode)("span",{for:ut.label,class:"vc-input__label",id:Qe.labelId},(0,l.toDisplayString)(Qe.labelSpanText),9,ee),(0,l.createElementVNode)("span",ae,(0,l.toDisplayString)(ut.desc),1)])}var Ce={name:"editableInput",props:{label:String,labelText:String,desc:String,modelValue:[String,Number],max:Number,min:Number,arrowOffset:{type:Number,default:1}},computed:{val:{get(){return this.modelValue},set(_e){if(this.max!==void 0&&+_e>this.max)this.$refs.input.value=this.max;else return _e}},labelId(){return`input__label__${this.label}__${Math.random().toString().slice(2,5)}`},labelSpanText(){return this.labelText||this.label}},methods:{update(_e){this.handleChange(_e.target.value)},handleChange(_e){const tt={};tt[this.label]=_e,tt.hex===void 0&&tt["#"]===void 0?this.$emit("change",tt):_e.length>5&&this.$emit("change",tt)},handleKeyDown(_e){let tt=this.val;const ut=Number(tt);if(ut){const Gt=this.arrowOffset||1;_e.keyCode===38&&(tt=ut+Gt,this.handleChange(tt),_e.preventDefault()),_e.keyCode===40&&(tt=ut-Gt,this.handleChange(tt),_e.preventDefault())}}}};e(1979);var ge=(0,I.Z)(Ce,[["render",ve]]),Me={name:"Material",mixins:[b],components:{"ed-in":ge},methods:{onChange(_e){_e&&(_e.hex?this.isValidHex(_e.hex)&&this.colorChange({hex:_e.hex,source:"hex"}):(_e.r||_e.g||_e.b)&&this.colorChange({r:_e.r||this.colors.rgba.r,g:_e.g||this.colors.rgba.g,b:_e.b||this.colors.rgba.b,a:_e.a||this.colors.rgba.a,source:"rgba"}))}}};e(1425);var Ue=(0,I.Z)(Me,[["render",q]]);const Re={role:"application","aria-label":"Slider color picker",class:"vc-slider"},Le={class:"vc-slider-hue-warp"},Xe={class:"vc-slider-swatches",role:"group"},et=["data-index","aria-label","onClick"];function yt(_e,tt,ut,Gt,jt,Qe){const Ft=(0,l.resolveComponent)("hue");return(0,l.openBlock)(),(0,l.createElementBlock)("div",Re,[(0,l.createElementVNode)("div",Le,[(0,l.createVNode)(Ft,{modelValue:_e.colors,"onUpdate:modelValue":tt[0]||(tt[0]=Zt=>_e.colors=Zt),onChange:Qe.hueChange},null,8,["modelValue","onChange"])]),(0,l.createElementVNode)("div",Xe,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(Qe.normalizedSwatches,(Zt,Pn)=>((0,l.openBlock)(),(0,l.createElementBlock)("div",{class:"vc-slider-swatch",key:Pn,"data-index":Pn,"aria-label":"color:"+_e.colors.hex,role:"button",onClick:ca=>Qe.handleSwClick(Pn,Zt)},[(0,l.createElementVNode)("div",{class:(0,l.normalizeClass)(["vc-slider-swatch-picker",{"vc-slider-swatch-picker--active":Qe.isActive(Zt,Pn),"vc-slider-swatch-picker--white":Zt.l===1}]),style:(0,l.normalizeStyle)({background:"hsl("+_e.colors.hsl.h+", "+Zt.s*100+"%, "+Zt.l*100+"%)"})},null,6)],8,et))),128))])])}const Dt=["aria-valuenow"],se=[(0,l.createElementVNode)("div",{class:"vc-hue-picker"},null,-1)];function ie(_e,tt,ut,Gt,jt,Qe){return(0,l.openBlock)(),(0,l.createElementBlock)("div",{class:(0,l.normalizeClass)(["vc-hue",Qe.directionClass])},[(0,l.createElementVNode)("div",{class:"vc-hue-container",role:"slider","aria-valuenow":Qe.colors.hsl.h,"aria-valuemin":"0","aria-valuemax":"360",ref:"container",onMousedown:tt[0]||(tt[0]=(...Ft)=>Qe.handleMouseDown&&Qe.handleMouseDown(...Ft)),onTouchmove:tt[1]||(tt[1]=(...Ft)=>Qe.handleChange&&Qe.handleChange(...Ft)),onTouchstart:tt[2]||(tt[2]=(...Ft)=>Qe.handleChange&&Qe.handleChange(...Ft))},[(0,l.createElementVNode)("div",{class:"vc-hue-pointer",style:(0,l.normalizeStyle)({top:Qe.pointerTop,left:Qe.pointerLeft}),role:"presentation"},se,4)],40,Dt)],2)}var fe={name:"Hue",props:{modelValue:Object,direction:{type:String,default:"horizontal"}},data(){return{oldHue:0,pullDirection:""}},computed:{colors(){const _e=this.modelValue.hsl.h;return _e!==0&&_e-this.oldHue>0&&(this.pullDirection="right"),_e!==0&&_e-this.oldHue<0&&(this.pullDirection="left"),this.oldHue=_e,this.modelValue},directionClass(){return{"vc-hue--horizontal":this.direction==="horizontal","vc-hue--vertical":this.direction==="vertical"}},pointerTop(){return this.direction==="vertical"?this.colors.hsl.h===0&&this.pullDirection==="right"?0:-(this.colors.hsl.h*100/360)+100+"%":0},pointerLeft(){return this.direction==="vertical"?0:this.colors.hsl.h===0&&this.pullDirection==="right"?"100%":this.colors.hsl.h*100/360+"%"}},methods:{handleChange(_e,tt){!tt&&_e.preventDefault();const ut=this.$refs.container;if(!ut)return;const Gt=ut.clientWidth,jt=ut.clientHeight,Qe=ut.getBoundingClientRect().left+window.pageXOffset,Ft=ut.getBoundingClientRect().top+window.pageYOffset,Zt=_e.pageX||(_e.touches?_e.touches[0].pageX:0),Pn=_e.pageY||(_e.touches?_e.touches[0].pageY:0),ca=Zt-Qe,Aa=Pn-Ft;let un,pi;this.direction==="vertical"?(Aa<0?un=360:Aa>jt?un=0:(pi=-(Aa*100/jt)+100,un=360*pi/100),this.colors.hsl.h!==un&&this.$emit("change",{h:un,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"})):(ca<0?un=0:ca>Gt?un=360:(pi=ca*100/Gt,un=360*pi/100),this.colors.hsl.h!==un&&this.$emit("change",{h:un,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"}))},handleMouseDown(_e){this.handleChange(_e,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(_e){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};e(6547);var De=(0,I.Z)(fe,[["render",ie]]);const Ye=.5;var ze={name:"Slider",mixins:[b],props:{swatches:{type:Array,default(){return[{s:Ye,l:.8},{s:Ye,l:.65},{s:Ye,l:.5},{s:Ye,l:.35},{s:Ye,l:.2}]}}},components:{hue:De},computed:{normalizedSwatches(){return this.swatches.map(tt=>typeof tt!="object"?{s:Ye,l:tt}:tt)}},methods:{isActive(_e,tt){const ut=this.colors.hsl;return ut.l===1&&_e.l===1||ut.l===0&&_e.l===0?!0:Math.abs(ut.l-_e.l)<.01&&Math.abs(ut.s-_e.s)<.01},hueChange(_e){this.colorChange(_e)},handleSwClick(_e,tt){this.colorChange({h:this.colors.hsl.h,s:tt.s,l:tt.l,source:"hsl"})}}};e(8016);var xe=(0,I.Z)(ze,[["render",yt]]);const pe=["data-pick"],ye={class:"vc-swatches-box",role:"listbox"},Be=["aria-label","aria-selected","data-color","onClick"],ne={class:"vc-swatches-pick"},he=[(0,l.createElementVNode)("svg",{style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},[(0,l.createElementVNode)("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"})],-1)];function Ee(_e,tt,ut,Gt,jt,Qe){return(0,l.openBlock)(),(0,l.createElementBlock)("div",{role:"application","aria-label":"Swatches color picker",class:"vc-swatches","data-pick":Qe.pick},[(0,l.createElementVNode)("div",ye,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(ut.palette,(Ft,Zt)=>((0,l.openBlock)(),(0,l.createElementBlock)("div",{class:"vc-swatches-color-group",key:Zt},[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(Ft,Pn=>((0,l.openBlock)(),(0,l.createElementBlock)("div",{class:(0,l.normalizeClass)(["vc-swatches-color-it",{"vc-swatches-color--white":Pn==="#FFFFFF"}]),role:"option","aria-label":"Color:"+Pn,"aria-selected":Qe.equal(Pn),key:Pn,"data-color":Pn,style:(0,l.normalizeStyle)({background:Pn}),onClick:ca=>Qe.handlerClick(Pn)},[(0,l.withDirectives)((0,l.createElementVNode)("div",ne,he,512),[[l.vShow,Qe.equal(Pn)]])],14,Be))),128))]))),128))])],8,pe)}var we={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},be={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},Te={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},Ne={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},Ie={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},$e={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},ke={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},Ke={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},ct={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},It={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},at={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},Ot={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},Ze={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},St={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},zt={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},ot={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},Tt={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},st={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121"},wt={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},Ln={primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",dividers:"rgba(0, 0, 0, 0.12)"},mt={primary:"rgba(255, 255, 255, 1)",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",dividers:"rgba(255, 255, 255, 0.12)"},Vt={active:"rgba(0, 0, 0, 0.54)",inactive:"rgba(0, 0, 0, 0.38)"},Ht={active:"rgba(255, 255, 255, 1)",inactive:"rgba(255, 255, 255, 0.5)"},Tn="#ffffff",za="#000000",na={red:we,pink:be,purple:Te,deepPurple:Ne,indigo:Ie,blue:$e,lightBlue:ke,cyan:Ke,teal:ct,green:It,lightGreen:at,lime:Ot,yellow:Ze,amber:St,orange:zt,deepOrange:ot,brown:Tt,grey:st,blueGrey:wt,darkText:Ln,lightText:mt,darkIcons:Vt,lightIcons:Ht,white:Tn,black:za};const Wn=["red","pink","purple","deepPurple","indigo","blue","lightBlue","cyan","teal","green","lightGreen","lime","yellow","amber","orange","deepOrange","brown","blueGrey","black"],Ya=["900","700","500","300","100"],Ka=(()=>{const _e=[];return Wn.forEach(tt=>{let ut=[];tt.toLowerCase()==="black"||tt.toLowerCase()==="white"?ut=ut.concat(["#000000","#FFFFFF"]):Ya.forEach(Gt=>{const jt=na[tt][Gt];ut.push(jt.toUpperCase())}),_e.push(ut)}),_e})();var es={name:"Swatches",mixins:[b],props:{palette:{type:Array,default(){return Ka}}},computed:{pick(){return this.colors.hex}},methods:{equal(_e){return _e.toLowerCase()===this.colors.hex.toLowerCase()},handlerClick(_e){this.colorChange({hex:_e,source:"hex"})}}};e(193);var ts=(0,I.Z)(es,[["render",Ee]]);const Ma={role:"heading",class:"vc-ps-head"},As={class:"vc-ps-body"},Do={class:"vc-ps-saturation-wrap"},ci={class:"vc-ps-hue-wrap"},Zl=(0,l.createElementVNode)("div",{class:"vc-ps-hue-pointer"},[(0,l.createElementVNode)("i",{class:"vc-ps-hue-pointer--left"}),(0,l.createElementVNode)("i",{class:"vc-ps-hue-pointer--right"})],-1),al={class:"vc-ps-previews"},Ql={class:"vc-ps-previews__label"},Fn={class:"vc-ps-previews__swatches"},Nr=["aria-label"],Jl=["aria-label"],di={class:"vc-ps-previews__label"},ui={key:0,class:"vc-ps-actions"},dt=["aria-label"],Pt=["aria-label"],aa={class:"vc-ps-fields"},Dn=(0,l.createElementVNode)("div",{class:"vc-ps-fields__divider"},null,-1),Po=(0,l.createElementVNode)("div",{class:"vc-ps-fields__divider"},null,-1);function go(_e,tt,ut,Gt,jt,Qe){const Ft=(0,l.resolveComponent)("saturation"),Zt=(0,l.resolveComponent)("hue"),Pn=(0,l.resolveComponent)("ed-in");return(0,l.openBlock)(),(0,l.createElementBlock)("div",{role:"application","aria-label":"PhotoShop color picker",class:(0,l.normalizeClass)(["vc-photoshop",ut.disableFields?"vc-photoshop__disable-fields":""])},[(0,l.createElementVNode)("div",Ma,(0,l.toDisplayString)(ut.head),1),(0,l.createElementVNode)("div",As,[(0,l.createElementVNode)("div",Do,[(0,l.createVNode)(Ft,{modelValue:_e.colors,"onUpdate:modelValue":tt[0]||(tt[0]=ca=>_e.colors=ca),onChange:Qe.childChange},null,8,["modelValue","onChange"])]),(0,l.createElementVNode)("div",ci,[(0,l.createVNode)(Zt,{modelValue:_e.colors,"onUpdate:modelValue":tt[1]||(tt[1]=ca=>_e.colors=ca),onChange:Qe.childChange,direction:"vertical"},{default:(0,l.withCtx)(()=>[Zl]),_:1},8,["modelValue","onChange"])]),(0,l.createElementVNode)("div",{class:(0,l.normalizeClass)(["vc-ps-controls",ut.disableFields?"vc-ps-controls__disable-fields":""])},[(0,l.createElementVNode)("div",al,[(0,l.createElementVNode)("div",Ql,(0,l.toDisplayString)(ut.newLabel),1),(0,l.createElementVNode)("div",Fn,[(0,l.createElementVNode)("div",{class:"vc-ps-previews__pr-color","aria-label":`New color is ${_e.colors.hex}`,style:(0,l.normalizeStyle)({background:_e.colors.hex})},null,12,Nr),(0,l.createElementVNode)("div",{class:"vc-ps-previews__pr-color","aria-label":`Current color is ${jt.currentColor}`,style:(0,l.normalizeStyle)({background:jt.currentColor}),onClick:tt[2]||(tt[2]=(...ca)=>Qe.clickCurrentColor&&Qe.clickCurrentColor(...ca))},null,12,Jl)]),(0,l.createElementVNode)("div",di,(0,l.toDisplayString)(ut.currentLabel),1)]),ut.disableFields?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createElementBlock)("div",ui,[(0,l.createElementVNode)("div",{class:"vc-ps-ac-btn",role:"button","aria-label":ut.acceptLabel,onClick:tt[3]||(tt[3]=(...ca)=>Qe.handleAccept&&Qe.handleAccept(...ca))},(0,l.toDisplayString)(ut.acceptLabel),9,dt),(0,l.createElementVNode)("div",{class:"vc-ps-ac-btn",role:"button","aria-label":ut.cancelLabel,onClick:tt[4]||(tt[4]=(...ca)=>Qe.handleCancel&&Qe.handleCancel(...ca))},(0,l.toDisplayString)(ut.cancelLabel),9,Pt),(0,l.createElementVNode)("div",aa,[(0,l.createVNode)(Pn,{label:"h",desc:"",modelValue:Qe.hsv.h,onChange:Qe.inputChange},null,8,["modelValue","onChange"]),(0,l.createVNode)(Pn,{label:"s",desc:"%",modelValue:Qe.hsv.s,max:100,onChange:Qe.inputChange},null,8,["modelValue","onChange"]),(0,l.createVNode)(Pn,{label:"v",desc:"%",modelValue:Qe.hsv.v,max:100,onChange:Qe.inputChange},null,8,["modelValue","onChange"]),Dn,(0,l.createVNode)(Pn,{label:"r",modelValue:_e.colors.rgba.r,onChange:Qe.inputChange},null,8,["modelValue","onChange"]),(0,l.createVNode)(Pn,{label:"g",modelValue:_e.colors.rgba.g,onChange:Qe.inputChange},null,8,["modelValue","onChange"]),(0,l.createVNode)(Pn,{label:"b",modelValue:_e.colors.rgba.b,onChange:Qe.inputChange},null,8,["modelValue","onChange"]),Po,(0,l.createVNode)(Pn,{label:"#",class:"vc-ps-fields__hex",modelValue:Qe.hex,onChange:Qe.inputChange},null,8,["modelValue","onChange"])]),ut.hasResetButton?((0,l.openBlock)(),(0,l.createElementBlock)("div",{key:0,class:"vc-ps-ac-btn","aria-label":"reset",onClick:tt[5]||(tt[5]=(...ca)=>Qe.handleReset&&Qe.handleReset(...ca))},(0,l.toDisplayString)(ut.resetLabel),1)):(0,l.createCommentVNode)("",!0)]))],2)])],2)}const bo=(0,l.createElementVNode)("div",{class:"vc-saturation--white"},null,-1),Xa=(0,l.createElementVNode)("div",{class:"vc-saturation--black"},null,-1),xr=[(0,l.createElementVNode)("div",{class:"vc-saturation-circle"},null,-1)];function wd(_e,tt,ut,Gt,jt,Qe){return(0,l.openBlock)(),(0,l.createElementBlock)("div",{class:"vc-saturation",style:(0,l.normalizeStyle)({background:Qe.bgColor}),ref:"container",onMousedown:tt[0]||(tt[0]=(...Ft)=>Qe.handleMouseDown&&Qe.handleMouseDown(...Ft)),onTouchmove:tt[1]||(tt[1]=(...Ft)=>Qe.handleChange&&Qe.handleChange(...Ft)),onTouchstart:tt[2]||(tt[2]=(...Ft)=>Qe.handleChange&&Qe.handleChange(...Ft))},[bo,Xa,(0,l.createElementVNode)("div",{class:"vc-saturation-pointer",style:(0,l.normalizeStyle)({top:Qe.pointerTop,left:Qe.pointerLeft})},xr,4)],36)}var Rr=e(9428),sl=e.n(Rr),ol=e(9289),rl={name:"Saturation",props:{modelValue:Object},computed:{colors(){return this.modelValue},bgColor(){return`hsl(${this.colors.hsv.h}, 100%, 50%)`},pointerTop(){return-(this.colors.hsv.v*100)+1+100+"%"},pointerLeft(){return this.colors.hsv.s*100+"%"}},methods:{throttle:ol((_e,tt)=>{_e(tt)},20,{leading:!0,trailing:!1}),handleChange(_e,tt){!tt&&_e.preventDefault();const ut=this.$refs.container;if(!ut)return;const Gt=ut.clientWidth,jt=ut.clientHeight,Qe=ut.getBoundingClientRect().left+window.pageXOffset,Ft=ut.getBoundingClientRect().top+window.pageYOffset,Zt=_e.pageX||(_e.touches?_e.touches[0].pageX:0),Pn=_e.pageY||(_e.touches?_e.touches[0].pageY:0),ca=sl()(Zt-Qe,0,Gt),Aa=sl()(Pn-Ft,0,jt),un=ca/Gt,pi=sl()(-(Aa/jt)+1,0,1);this.throttle(this.onChange,{h:this.colors.hsv.h,s:un,v:pi,a:this.colors.hsv.a,source:"hsva"})},onChange(_e){this.$emit("change",_e)},handleMouseDown(_e){window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(_e){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};e(5233);var ar=(0,I.Z)(rl,[["render",wd]]),NP={name:"Photoshop",mixins:[b],props:{head:{type:String,default:"Color Picker"},disableFields:{type:Boolean,default:!1},hasResetButton:{type:Boolean,default:!1},acceptLabel:{type:String,default:"OK"},cancelLabel:{type:String,default:"Cancel"},resetLabel:{type:String,default:"Reset"},newLabel:{type:String,default:"new"},currentLabel:{type:String,default:"current"}},components:{saturation:ar,hue:De,"ed-in":ge},data(){return{currentColor:"#FFF"}},computed:{hsv(){const _e=this.colors.hsv;return{h:_e.h.toFixed(),s:(_e.s*100).toFixed(),v:(_e.v*100).toFixed()}},hex(){const _e=this.colors.hex;return _e&&_e.replace("#","")}},created(){this.currentColor=this.colors.hex},methods:{childChange(_e){this.colorChange(_e)},inputChange(_e){_e&&(_e["#"]?this.isValidHex(_e["#"])&&this.colorChange({hex:_e["#"],source:"hex"}):_e.r||_e.g||_e.b||_e.a?this.colorChange({r:_e.r||this.colors.rgba.r,g:_e.g||this.colors.rgba.g,b:_e.b||this.colors.rgba.b,a:_e.a||this.colors.rgba.a,source:"rgba"}):(_e.h||_e.s||_e.v)&&this.colorChange({h:_e.h||this.colors.hsv.h,s:_e.s/100||this.colors.hsv.s,v:_e.v/100||this.colors.hsv.v,source:"hsv"}))},clickCurrentColor(){this.colorChange({hex:this.currentColor,source:"hex"})},handleAccept(){this.$emit("ok")},handleCancel(){this.$emit("cancel")},handleReset(){this.$emit("reset")}}};e(1902);var k1=(0,I.Z)(NP,[["render",go]]);const xP={class:"vc-sketch-saturation-wrap"},RP={class:"vc-sketch-controls"},wP={class:"vc-sketch-sliders"},MP={class:"vc-sketch-hue-wrap"},LP={key:0,class:"vc-sketch-alpha-wrap"},DP={class:"vc-sketch-color-wrap"},PP=["aria-label"],kP={key:0,class:"vc-sketch-field"},BP={class:"vc-sketch-field--double"},FP={class:"vc-sketch-field--single"},UP={class:"vc-sketch-field--single"},$P={class:"vc-sketch-field--single"},GP={key:0,class:"vc-sketch-field--single"},VP={class:"vc-sketch-presets",role:"group","aria-label":"A color preset, pick one to set as current color"},HP=["aria-label","onClick"],jP=["aria-label","onClick"];function WP(_e,tt,ut,Gt,jt,Qe){const Ft=(0,l.resolveComponent)("saturation"),Zt=(0,l.resolveComponent)("hue"),Pn=(0,l.resolveComponent)("alpha"),ca=(0,l.resolveComponent)("checkboard"),Aa=(0,l.resolveComponent)("ed-in");return(0,l.openBlock)(),(0,l.createElementBlock)("div",{role:"application","aria-label":"Sketch color picker",class:(0,l.normalizeClass)(["vc-sketch",ut.disableAlpha?"vc-sketch__disable-alpha":""])},[(0,l.createElementVNode)("div",xP,[(0,l.createVNode)(Ft,{modelValue:_e.colors,"onUpdate:modelValue":tt[0]||(tt[0]=un=>_e.colors=un),onChange:Qe.childChange},null,8,["modelValue","onChange"])]),(0,l.createElementVNode)("div",RP,[(0,l.createElementVNode)("div",wP,[(0,l.createElementVNode)("div",MP,[(0,l.createVNode)(Zt,{modelValue:_e.colors,"onUpdate:modelValue":tt[1]||(tt[1]=un=>_e.colors=un),onChange:Qe.childChange},null,8,["modelValue","onChange"])]),ut.disableAlpha?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createElementBlock)("div",LP,[(0,l.createVNode)(Pn,{modelValue:_e.colors,"onUpdate:modelValue":tt[2]||(tt[2]=un=>_e.colors=un),onChange:Qe.childChange},null,8,["modelValue","onChange"])]))]),(0,l.createElementVNode)("div",DP,[(0,l.createElementVNode)("div",{"aria-label":`Current color is ${Qe.activeColor}`,class:"vc-sketch-active-color",style:(0,l.normalizeStyle)({background:Qe.activeColor})},null,12,PP),(0,l.createVNode)(ca)])]),ut.disableFields?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createElementBlock)("div",kP,[(0,l.createElementVNode)("div",BP,[(0,l.createVNode)(Aa,{label:"hex",modelValue:Qe.hex,onChange:Qe.inputChange},null,8,["modelValue","onChange"])]),(0,l.createElementVNode)("div",FP,[(0,l.createVNode)(Aa,{label:"r",modelValue:_e.colors.rgba.r,onChange:Qe.inputChange},null,8,["modelValue","onChange"])]),(0,l.createElementVNode)("div",UP,[(0,l.createVNode)(Aa,{label:"g",modelValue:_e.colors.rgba.g,onChange:Qe.inputChange},null,8,["modelValue","onChange"])]),(0,l.createElementVNode)("div",$P,[(0,l.createVNode)(Aa,{label:"b",modelValue:_e.colors.rgba.b,onChange:Qe.inputChange},null,8,["modelValue","onChange"])]),ut.disableAlpha?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createElementBlock)("div",GP,[(0,l.createVNode)(Aa,{label:"a",modelValue:_e.colors.a,"arrow-offset":.01,max:1,onChange:Qe.inputChange},null,8,["modelValue","arrow-offset","onChange"])]))])),(0,l.createElementVNode)("div",VP,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(ut.presetColors,un=>((0,l.openBlock)(),(0,l.createElementBlock)(l.Fragment,null,[_e.isTransparent(un)?((0,l.openBlock)(),(0,l.createElementBlock)("div",{key:"else-"+un,"aria-label":"Color:"+un,class:"vc-sketch-presets-color",onClick:pi=>Qe.handlePreset(un)},[(0,l.createVNode)(ca)],8,jP)):((0,l.openBlock)(),(0,l.createElementBlock)("div",{class:"vc-sketch-presets-color","aria-label":"Color:"+un,key:"if-"+un,style:(0,l.normalizeStyle)({background:un}),onClick:pi=>Qe.handlePreset(un)},null,12,HP))],64))),256))])],2)}const zP={class:"vc-alpha"},YP={class:"vc-alpha-checkboard-wrap"},KP=[(0,l.createElementVNode)("div",{class:"vc-alpha-picker"},null,-1)];function XP(_e,tt,ut,Gt,jt,Qe){const Ft=(0,l.resolveComponent)("checkboard");return(0,l.openBlock)(),(0,l.createElementBlock)("div",zP,[(0,l.createElementVNode)("div",YP,[(0,l.createVNode)(Ft)]),(0,l.createElementVNode)("div",{class:"vc-alpha-gradient",style:(0,l.normalizeStyle)({background:Qe.gradientColor})},null,4),(0,l.createElementVNode)("div",{class:"vc-alpha-container",ref:"container",onMousedown:tt[0]||(tt[0]=(...Zt)=>Qe.handleMouseDown&&Qe.handleMouseDown(...Zt)),onTouchmove:tt[1]||(tt[1]=(...Zt)=>Qe.handleChange&&Qe.handleChange(...Zt)),onTouchstart:tt[2]||(tt[2]=(...Zt)=>Qe.handleChange&&Qe.handleChange(...Zt))},[(0,l.createElementVNode)("div",{class:"vc-alpha-pointer",style:(0,l.normalizeStyle)({left:Qe.colors.a*100+"%"})},KP,4)],544)])}function qP(_e,tt,ut,Gt,jt,Qe){return(0,l.openBlock)(),(0,l.createElementBlock)("div",{class:"vc-checkerboard",style:(0,l.normalizeStyle)(Qe.bgStyle)},null,4)}const g_={};var ZP={name:"Checkboard",props:{size:{type:[Number,String],default:8},white:{type:String,default:"#fff"},grey:{type:String,default:"#e6e6e6"}},computed:{bgStyle(){return{"background-image":"url("+JP(this.white,this.grey,this.size)+")"}}}};function QP(_e,tt,ut){if(typeof document>"u")return null;const Gt=document.createElement("canvas");Gt.width=Gt.height=ut*2;const jt=Gt.getContext("2d");return jt?(jt.fillStyle=_e,jt.fillRect(0,0,Gt.width,Gt.height),jt.fillStyle=tt,jt.fillRect(0,0,ut,ut),jt.translate(ut,ut),jt.fillRect(0,0,ut,ut),Gt.toDataURL()):null}function JP(_e,tt,ut){const Gt=_e+","+tt+","+ut;if(g_[Gt])return g_[Gt];{const jt=QP(_e,tt,ut);return g_[Gt]=jt,jt}}e(3205);var Ld=(0,I.Z)(ZP,[["render",qP]]),e3={name:"Alpha",props:{modelValue:Object,onChange:Function},components:{checkboard:Ld},computed:{colors(){return this.modelValue},gradientColor(){const _e=this.colors.rgba,tt=[_e.r,_e.g,_e.b].join(",");return"linear-gradient(to right, rgba("+tt+", 0) 0%, rgba("+tt+", 1) 100%)"}},methods:{handleChange(_e,tt){!tt&&_e.preventDefault();const ut=this.$refs.container;if(!ut)return;const Gt=ut.clientWidth,jt=ut.getBoundingClientRect().left+window.pageXOffset,Ft=(_e.pageX||(_e.touches?_e.touches[0].pageX:0))-jt;let Zt;Ft<0?Zt=0:Ft>Gt?Zt=1:Zt=Math.round(Ft*100/Gt)/100,this.colors.a!==Zt&&this.$emit("change",{h:this.colors.hsl.h,s:this.colors.hsl.s,l:this.colors.hsl.l,a:Zt,source:"rgba"})},handleMouseDown(_e){this.handleChange(_e,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};e(6320);var vp=(0,I.Z)(e3,[["render",XP]]);const t3=["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF","rgba(0,0,0,0)"];var n3={name:"Sketch",mixins:[b],components:{saturation:ar,hue:De,alpha:vp,"ed-in":ge,checkboard:Ld},props:{presetColors:{type:Array,default(){return t3}},disableAlpha:{type:Boolean,default:!1},disableFields:{type:Boolean,default:!1}},computed:{hex(){let _e;return this.colors.a<1?_e=this.colors.hex8:_e=this.colors.hex,_e.replace("#","")},activeColor(){const _e=this.colors.rgba;return"rgba("+[_e.r,_e.g,_e.b,_e.a].join(",")+")"}},methods:{handlePreset(_e){this.colorChange({hex:_e,source:"hex"})},childChange(_e){this.colorChange(_e)},inputChange(_e){_e&&(_e.hex?this.isValidHex(_e.hex)&&this.colorChange({hex:_e.hex,source:"hex"}):(_e.r||_e.g||_e.b||_e.a)&&this.colorChange({r:_e.r||this.colors.rgba.r,g:_e.g||this.colors.rgba.g,b:_e.b||this.colors.rgba.b,a:_e.a||this.colors.rgba.a,source:"rgba"}))}}};e(5815);var B1=(0,I.Z)(n3,[["render",WP]]);const a3={class:"vc-chrome-saturation-wrap"},s3={class:"vc-chrome-body"},o3={class:"vc-chrome-controls"},r3={class:"vc-chrome-color-wrap"},i3=["aria-label"],l3={class:"vc-chrome-sliders"},c3={class:"vc-chrome-hue-wrap"},d3={key:0,class:"vc-chrome-alpha-wrap"},u3={key:0,class:"vc-chrome-fields-wrap"},p3={class:"vc-chrome-fields"},f3={class:"vc-chrome-field"},m3={class:"vc-chrome-fields"},h3={class:"vc-chrome-field"},_3={class:"vc-chrome-field"},g3={class:"vc-chrome-field"},b3={key:0,class:"vc-chrome-field"},v3={class:"vc-chrome-fields"},E3={class:"vc-chrome-field"},S3={class:"vc-chrome-field"},T3={class:"vc-chrome-field"},A3={key:0,class:"vc-chrome-field"},y3={class:"vc-chrome-toggle-icon"},I3=[(0,l.createElementVNode)("path",{fill:"#333",d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"},null,-1)],C3={class:"vc-chrome-toggle-icon-highlight"};function O3(_e,tt,ut,Gt,jt,Qe){const Ft=(0,l.resolveComponent)("saturation"),Zt=(0,l.resolveComponent)("checkboard"),Pn=(0,l.resolveComponent)("hue"),ca=(0,l.resolveComponent)("alpha"),Aa=(0,l.resolveComponent)("ed-in");return(0,l.openBlock)(),(0,l.createElementBlock)("div",{role:"application","aria-label":"Chrome color picker",class:(0,l.normalizeClass)(["vc-chrome",ut.disableAlpha?"vc-chrome__disable-alpha":""])},[(0,l.createElementVNode)("div",a3,[(0,l.createVNode)(Ft,{modelValue:_e.colors,"onUpdate:modelValue":tt[0]||(tt[0]=un=>_e.colors=un),onChange:Qe.childChange},null,8,["modelValue","onChange"])]),(0,l.createElementVNode)("div",s3,[(0,l.createElementVNode)("div",o3,[(0,l.createElementVNode)("div",r3,[(0,l.createElementVNode)("div",{"aria-label":`current color is ${_e.colors.hex}`,class:"vc-chrome-active-color",style:(0,l.normalizeStyle)({background:Qe.activeColor})},null,12,i3),ut.disableAlpha?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createBlock)(Zt,{key:0}))]),(0,l.createElementVNode)("div",l3,[(0,l.createElementVNode)("div",c3,[(0,l.createVNode)(Pn,{modelValue:_e.colors,"onUpdate:modelValue":tt[1]||(tt[1]=un=>_e.colors=un),onChange:Qe.childChange},null,8,["modelValue","onChange"])]),ut.disableAlpha?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createElementBlock)("div",d3,[(0,l.createVNode)(ca,{modelValue:_e.colors,"onUpdate:modelValue":tt[2]||(tt[2]=un=>_e.colors=un),onChange:Qe.childChange},null,8,["modelValue","onChange"])]))])]),ut.disableFields?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createElementBlock)("div",u3,[(0,l.withDirectives)((0,l.createElementVNode)("div",p3,[(0,l.createElementVNode)("div",f3,[Qe.hasAlpha?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createBlock)(Aa,{key:0,label:"hex",modelValue:_e.colors.hex,onChange:Qe.inputChange},null,8,["modelValue","onChange"])),Qe.hasAlpha?((0,l.openBlock)(),(0,l.createBlock)(Aa,{key:1,label:"hex",modelValue:_e.colors.hex8,onChange:Qe.inputChange},null,8,["modelValue","onChange"])):(0,l.createCommentVNode)("",!0)])],512),[[l.vShow,jt.fieldsIndex===0]]),(0,l.withDirectives)((0,l.createElementVNode)("div",m3,[(0,l.createElementVNode)("div",h3,[(0,l.createVNode)(Aa,{label:"r",modelValue:_e.colors.rgba.r,onChange:Qe.inputChange},null,8,["modelValue","onChange"])]),(0,l.createElementVNode)("div",_3,[(0,l.createVNode)(Aa,{label:"g",modelValue:_e.colors.rgba.g,onChange:Qe.inputChange},null,8,["modelValue","onChange"])]),(0,l.createElementVNode)("div",g3,[(0,l.createVNode)(Aa,{label:"b",modelValue:_e.colors.rgba.b,onChange:Qe.inputChange},null,8,["modelValue","onChange"])]),ut.disableAlpha?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createElementBlock)("div",b3,[(0,l.createVNode)(Aa,{label:"a",modelValue:_e.colors.a,"arrow-offset":.01,max:1,onChange:Qe.inputChange},null,8,["modelValue","arrow-offset","onChange"])]))],512),[[l.vShow,jt.fieldsIndex===1]]),(0,l.withDirectives)((0,l.createElementVNode)("div",v3,[(0,l.createElementVNode)("div",E3,[(0,l.createVNode)(Aa,{label:"h",modelValue:Qe.hsl.h,onChange:Qe.inputChange},null,8,["modelValue","onChange"])]),(0,l.createElementVNode)("div",S3,[(0,l.createVNode)(Aa,{label:"s",modelValue:Qe.hsl.s,onChange:Qe.inputChange},null,8,["modelValue","onChange"])]),(0,l.createElementVNode)("div",T3,[(0,l.createVNode)(Aa,{label:"l",modelValue:Qe.hsl.l,onChange:Qe.inputChange},null,8,["modelValue","onChange"])]),ut.disableAlpha?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createElementBlock)("div",A3,[(0,l.createVNode)(Aa,{label:"a",modelValue:_e.colors.a,"arrow-offset":.01,max:1,onChange:Qe.inputChange},null,8,["modelValue","arrow-offset","onChange"])]))],512),[[l.vShow,jt.fieldsIndex===2]]),(0,l.createElementVNode)("div",{class:"vc-chrome-toggle-btn",role:"button","aria-label":"Change another color definition",onClick:tt[6]||(tt[6]=(...un)=>Qe.toggleViews&&Qe.toggleViews(...un))},[(0,l.createElementVNode)("div",y3,[((0,l.openBlock)(),(0,l.createElementBlock)("svg",{style:{width:"24px",height:"24px"},viewBox:"0 0 24 24",onMouseover:tt[3]||(tt[3]=(...un)=>Qe.showHighlight&&Qe.showHighlight(...un)),onMouseenter:tt[4]||(tt[4]=(...un)=>Qe.showHighlight&&Qe.showHighlight(...un)),onMouseout:tt[5]||(tt[5]=(...un)=>Qe.hideHighlight&&Qe.hideHighlight(...un))},I3,32))]),(0,l.withDirectives)((0,l.createElementVNode)("div",C3,null,512),[[l.vShow,jt.highlight]])])]))])],2)}var N3={name:"Chrome",mixins:[b],props:{disableAlpha:{type:Boolean,default:!1},disableFields:{type:Boolean,default:!1}},components:{saturation:ar,hue:De,alpha:vp,"ed-in":ge,checkboard:Ld},data(){return{fieldsIndex:0,highlight:!1}},computed:{hsl(){const{h:_e,s:tt,l:ut}=this.colors.hsl;return{h:_e.toFixed(),s:`${(tt*100).toFixed()}%`,l:`${(ut*100).toFixed()}%`}},activeColor(){const _e=this.colors.rgba;return"rgba("+[_e.r,_e.g,_e.b,_e.a].join(",")+")"},hasAlpha(){return this.colors.a<1}},methods:{childChange(_e){this.colorChange(_e)},inputChange(_e){if(_e){if(_e.hex)this.isValidHex(_e.hex)&&this.colorChange({hex:_e.hex,source:"hex"});else if(_e.r||_e.g||_e.b||_e.a)this.colorChange({r:_e.r||this.colors.rgba.r,g:_e.g||this.colors.rgba.g,b:_e.b||this.colors.rgba.b,a:_e.a||this.colors.rgba.a,source:"rgba"});else if(_e.h||_e.s||_e.l){const tt=_e.s?_e.s.replace("%","")/100:this.colors.hsl.s,ut=_e.l?_e.l.replace("%","")/100:this.colors.hsl.l;this.colorChange({h:_e.h||this.colors.hsl.h,s:tt,l:ut,source:"hsl"})}}},toggleViews(){if(this.fieldsIndex>=2){this.fieldsIndex=0;return}this.fieldsIndex++},showHighlight(){this.highlight=!0},hideHighlight(){this.highlight=!1}}};e(3647);var F1=(0,I.Z)(N3,[["render",O3]]);const x3=(0,l.createElementVNode)("div",{class:"vc-twitter-triangle-shadow"},null,-1),R3=(0,l.createElementVNode)("div",{class:"vc-twitter-triangle"},null,-1),w3={class:"vc-twitter-body"},M3=["onClick"],L3=(0,l.createElementVNode)("div",{class:"vc-twitter-hash"},"#",-1),D3=(0,l.createElementVNode)("div",{class:"vc-twitter-clear"},null,-1);function P3(_e,tt,ut,Gt,jt,Qe){const Ft=(0,l.resolveComponent)("editable-input");return(0,l.openBlock)(),(0,l.createElementBlock)("div",{class:(0,l.normalizeClass)(["vc-twitter",{"vc-twitter-hide-triangle ":ut.triangle==="hide","vc-twitter-top-left-triangle ":ut.triangle==="top-left","vc-twitter-top-right-triangle ":ut.triangle==="top-right"}]),style:(0,l.normalizeStyle)({width:typeof ut.width=="number"?`${ut.width}px`:ut.width})},[x3,R3,(0,l.createElementVNode)("div",w3,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(ut.defaultColors,(Zt,Pn)=>((0,l.openBlock)(),(0,l.createElementBlock)("span",{class:"vc-twitter-swatch",style:(0,l.normalizeStyle)({background:Zt,boxShadow:`0 0 4px ${Qe.equal(Zt)?Zt:"transparent"}`}),key:Pn,onClick:ca=>Qe.handlerClick(Zt)},null,12,M3))),128)),L3,(0,l.createVNode)(Ft,{label:"#",modelValue:Qe.hex,onChange:Qe.inputChange},null,8,["modelValue","onChange"]),D3])],6)}const k3=["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"];var B3={name:"Twitter",mixins:[b],components:{editableInput:ge},props:{width:{type:[String,Number],default:276},defaultColors:{type:Array,default(){return k3}},triangle:{default:"top-left",validator(_e){return["hide","top-left","top-right"].includes(_e)}}},computed:{hsv(){const _e=this.colors.hsv;return{h:_e.h.toFixed(),s:(_e.s*100).toFixed(),v:(_e.v*100).toFixed()}},hex(){const _e=this.colors.hex;return _e&&_e.replace("#","")}},methods:{equal(_e){return _e.toLowerCase()===this.colors.hex.toLowerCase()},handlerClick(_e){this.colorChange({hex:_e,source:"hex"})},inputChange(_e){_e&&(_e["#"]?this.isValidHex(_e["#"])&&this.colorChange({hex:_e["#"],source:"hex"}):_e.r||_e.g||_e.b||_e.a?this.colorChange({r:_e.r||this.colors.rgba.r,g:_e.g||this.colors.rgba.g,b:_e.b||this.colors.rgba.b,a:_e.a||this.colors.rgba.a,source:"rgba"}):(_e.h||_e.s||_e.v)&&this.colorChange({h:_e.h||this.colors.hsv.h,s:_e.s/100||this.colors.hsv.s,v:_e.v/100||this.colors.hsv.v,source:"hsv"}))}}};e(1113);var U1=(0,I.Z)(B3,[["render",P3]]);const $1=i.i8,G1={version:$1,Compact:x,Grayscale:$,Twitter:U1,Material:Ue,Slider:xe,Swatches:ts,Photoshop:k1,Sketch:B1,Chrome:F1,Alpha:vp,Checkboard:Ld,EditableInput:ge,Hue:De,Saturation:ar,ColorMixin:b};typeof process=="object"&&String(process)==="[object process]"||(window.VueColor=G1);var F3=G1,U3=F3})(),t.exports=s})()})(Rx);var dF=Rx.exports;const uF={components:{Chrome:dF.Chrome},props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],data(){return{isPickerOpen:!1}},methods:{closeTogglePicker(){this.isPickerOpen&&this.toggleColorPicker()},toggleColorPicker(){this.isPickerOpen=!this.isPickerOpen},updateColor(t){this.$emit("update:modelValue",t.hex)}}},pF={class:"colorpicker"};function fF(t,n,a,e,s,r){const o=H("Chrome"),i=nt("on-clickaway");return p(),g("div",pF,[f("div",{class:"colorpicker--selected",style:nn(`background-color: ${a.modelValue}`),onClick:n[0]||(n[0]=Ve((...l)=>r.toggleColorPicker&&r.toggleColorPicker(...l),["prevent"]))},null,4),s.isPickerOpen?ce((p(),L(o,{key:0,"disable-alpha":"","model-value":a.modelValue,class:"colorpicker--chrome","onUpdate:modelValue":r.updateColor},null,8,["model-value","onUpdate:modelValue"])),[[i,r.closeTogglePicker]]):O("v-if",!0)])}const mF=G(uF,[["render",fF],["__scopeId","data-v-8ddf79a5"],["__file","/app/app/javascript/dashboard/components/widgets/ColorPicker.vue"]]),hF={__name:"Modal",props:an({closeOnBackdropClick:{type:Boolean,default:!0},showCloseButton:{type:Boolean,default:!0},onClose:{type:Function,required:!0},fullWidth:{type:Boolean,default:!1},modalType:{type:String,default:"centered"},size:{type:String,default:""}},{show:{type:Boolean,default:!1},showModifiers:{}}),emits:an(["close"],["update:show"]),setup(t,{expose:n,emit:a}){n();const e=a,s=dn(t,"show"),r=S(()=>`modal-mask skip-context-menu ${{centered:"","right-aligned":"right-aligned"}[t.modalType]||""}`),o=P(!1),i=()=>{o.value=!0},l=()=>{s.value=!1,e("close"),t.onClose()},c=()=>{o.value&&(o.value=!1,t.closeOnBackdropClick&&l())},d=m=>{s.value&&m.code==="Escape"&&(l(),m.stopPropagation())};pr(document.body,"mouseup",c),pr(document,"keydown",d),Pe(()=>{t.onClose&&typeof t.onClose=="function"&&console.warn("[DEPRECATED] The 'onClose' prop is deprecated. Please use the 'close' event instead.")});const u={emit:e,show:s,modalClassName:r,mousedDownOnBackdrop:o,handleMouseDown:i,close:l,onMouseUp:c,onKeydown:d,ref:P,computed:S,onMounted:Pe,get useEventListener(){return pr},Button:Se};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}};function _F(t,n,a,e,s,r){return p(),L(Qa,{name:"modal-fade"},{default:z(()=>[e.show?(p(),g("div",{key:0,class:oe(e.modalClassName),transition:"modal",onMousedown:e.handleMouseDown},[f("div",{class:oe(["relative max-h-full overflow-auto bg-n-alpha-3 shadow-md modal-container rtl:text-right skip-context-menu",{"rounded-xl w-[37.5rem]":!a.fullWidth,"items-center rounded-none flex h-full justify-center w-full":a.fullWidth,[a.size]:!0}]),onMouse:n[0]||(n[0]=Ve(()=>{},["stop"])),onMousedown:n[1]||(n[1]=o=>o.stopPropagation())},[a.showCloseButton?(p(),L(e.Button,{key:0,ghost:"",slate:"",icon:"i-lucide-x",class:"absolute z-10 ltr:right-2 rtl:left-2 top-2",onClick:e.close})):O("v-if",!0),qe(t.$slots,"default")],34)],34)):O("v-if",!0)]),_:3})}const Hl=G(hF,[["render",_F],["__file","/app/app/javascript/dashboard/components/Modal.vue"]]),gF={components:{Modal:Hl,NextButton:Se},props:{show:{type:Boolean,default:!1},title:{type:String,default:""},message:{type:String,default:""},confirmText:{type:String,default:""},rejectText:{type:String,default:""},confirmValue:{type:String,default:""},confirmPlaceHolderText:{type:String,default:""}},emits:["onClose","onConfirm","update:show"],setup(){return{v$:rt()}},data(){return{value:""}},validations:{value:{required:Ge,isEqual(t){const n=(t||"").trim(),a=(this.confirmValue||"").trim();return n===a}}},computed:{localShow:{get(){return this.show},set(t){this.$emit("update:show",t)}}},methods:{closeModal(){this.value="",this.$emit("onClose")},onConfirm(){this.$emit("onConfirm")}}},bF={class:"flex items-center justify-end gap-2"};function vF(t,n,a,e,s,r){const o=H("woot-modal-header"),i=H("woot-input"),l=H("NextButton"),c=H("Modal");return p(),L(c,{show:r.localShow,"onUpdate:show":n[2]||(n[2]=d=>r.localShow=d),"on-close":r.closeModal},{default:z(()=>[v(o,{"header-title":a.title,"header-content":a.message},null,8,["header-title","header-content"]),f("form",{onSubmit:n[1]||(n[1]=Ve((...d)=>r.onConfirm&&r.onConfirm(...d),["prevent"]))},[v(i,{modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=d=>s.value=d),type:"text",class:oe({error:e.v$.value.$error}),placeholder:a.confirmPlaceHolderText,onBlur:e.v$.value.$touch},null,8,["modelValue","class","placeholder","onBlur"]),f("div",bF,[v(l,{faded:"",slate:"",type:"reset",label:a.rejectText,onClick:Ve(r.closeModal,["prevent"])},null,8,["label","onClick"]),v(l,{ruby:"",type:"submit",label:a.confirmText,disabled:e.v$.value.$invalid},null,8,["label","disabled"])])],32)]),_:1},8,["show","on-close"])}const wx=G(gF,[["render",vF],["__file","/app/app/javascript/dashboard/components/widgets/modal/ConfirmDeleteModal.vue"]]),EF={components:{Modal:Hl,NextButton:Se},props:{title:{type:String,default:"This is a title"},description:{type:String,default:"This is your description"},confirmLabel:{type:String,default:"Yes"},cancelLabel:{type:String,default:"No"}},data:()=>({show:!1,resolvePromise:void 0,rejectPromise:void 0}),methods:{showConfirmation(){return this.show=!0,new Promise((t,n)=>{this.resolvePromise=t,this.rejectPromise=n})},confirm(){this.resolvePromise(!0),this.show=!1},cancel(){this.resolvePromise(!1),this.show=!1}}},SF={class:"h-auto overflow-auto flex flex-col"},TF={class:"flex flex-row justify-end gap-2 py-4 px-6 w-full"};function AF(t,n,a,e,s,r){const o=H("woot-modal-header"),i=H("NextButton"),l=H("Modal");return p(),L(l,{show:t.show,"onUpdate:show":n[0]||(n[0]=c=>t.show=c),"on-close":r.cancel},{default:z(()=>[f("div",SF,[v(o,{"header-title":a.title,"header-content":a.description},null,8,["header-title","header-content"]),f("div",TF,[v(i,{faded:"",type:"reset",label:a.cancelLabel,onClick:r.cancel},null,8,["label","onClick"]),v(i,{type:"submit",label:a.confirmLabel,onClick:r.confirm},null,8,["label","onClick"])])])]),_:1},8,["show","on-close"])}const yF=G(EF,[["render",AF],["__file","/app/app/javascript/dashboard/components/widgets/modal/ConfirmationModal.vue"]]),IF={__name:"DeleteModal",props:an({onClose:{type:Function,default:()=>{}},onConfirm:{type:Function,default:()=>{}},title:{type:String,default:""},message:{type:String,default:""},messageValue:{type:String,default:""},confirmText:{type:String,default:""},rejectText:{type:String,default:""}},{show:{type:Boolean,default:!1},showModifiers:{}}),emits:["update:show"],setup(t,{expose:n}){n();const e={show:dn(t,"show"),Modal:Hl,Button:Se};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}},CF={class:"flex items-center justify-end gap-2 p-8"};function OF(t,n,a,e,s,r){const o=H("woot-modal-header");return p(),L(e.Modal,{show:e.show,"onUpdate:show":n[0]||(n[0]=i=>e.show=i),"on-close":a.onClose},{default:z(()=>[v(o,{"header-title":a.title,"header-content":a.message,"header-content-value":a.messageValue},null,8,["header-title","header-content","header-content-value"]),f("div",CF,[v(e.Button,{faded:"",slate:"",type:"reset",label:a.rejectText,onClick:a.onClose},null,8,["label","onClick"]),v(e.Button,{ruby:"",type:"submit",label:a.confirmText,onClick:a.onConfirm},null,8,["label","onClick"])])]),_:1},8,["show","on-close"])}const NF=G(IF,[["render",OF],["__file","/app/app/javascript/dashboard/components/widgets/modal/DeleteModal.vue"]]),xF={name:"WootDropdownItem",componentName:"WootDropdownMenu",props:{disabled:{type:Boolean,default:!1}}},RF=["tabindex","aria-disabled"];function wF(t,n,a,e,s,r){return p(),g("li",{class:oe(["mb-1 list-none dropdown-menu__item",{"is-disabled":a.disabled}]),tabindex:a.disabled?null:-1,"aria-disabled":a.disabled},[qe(t.$slots,"default",{},void 0,!0)],10,RF)}const hh=G(xF,[["render",wF],["__scopeId","data-v-08e5e2af"],["__file","/app/app/javascript/shared/components/ui/dropdown/DropdownItem.vue"]]),MF={__name:"DropdownMenu",props:{placement:{type:String,default:"top"}},setup(t,{expose:n}){n();const a=P(null),e=()=>a.value.querySelectorAll("ul.dropdown li.dropdown-menu__item .button"),s=d=>{const u=a.value.querySelector("ul.dropdown li.dropdown-menu__item .button:focus");return Array.from(d).indexOf(u)},r=(d,u)=>{d.length!==0&&d[u].focus()},o=d=>{const u=s(d),m=u>=1?u-1:d.length-1;r(d,m)},i=d=>{const u=s(d),m=u===d.length-1?0:u+1;r(d,m)},l={ArrowUp:{action:()=>o(e()),allowOnFocusedInput:!0},ArrowDown:{action:()=>i(e()),allowOnFocusedInput:!0}};jn(l);const c={dropdownMenuRef:a,dropdownMenuButtons:e,getActiveButtonIndex:s,focusButton:r,focusPreviousButton:o,focusNextButton:i,keyboardEvents:l,ref:P,get useKeyboardEvents(){return jn}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}};function LF(t,n,a,e,s,r){return p(),g("ul",{ref:"dropdownMenuRef",class:oe(["dropdown menu vertical",[a.placement&&`dropdown--${a.placement}`]])},[qe(t.$slots,"default")],2)}const _h=G(MF,[["render",LF],["__file","/app/app/javascript/shared/components/ui/dropdown/DropdownMenu.vue"]]),DF={props:{featureKey:{type:String,required:!0}},computed:{..._t({isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount",accountId:"getCurrentAccountId"}),isFeatureEnabled(){return this.isFeatureEnabledonAccount(this.accountId,this.featureKey)}}},PF={key:0};function kF(t,n,a,e,s,r){return r.isFeatureEnabled?(p(),g("div",PF,[qe(t.$slots,"default")])):O("v-if",!0)}const BF=G(DF,[["render",kF],["__file","/app/app/javascript/dashboard/components/widgets/FeatureToggle.vue"]]),FF={props:{label:{type:String,default:""},modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},placeholder:{type:String,default:""},helpText:{type:String,default:""},error:{type:String,default:""},readonly:{type:Boolean,default:!1},styles:{type:Object,default:()=>{}}},emits:["update:modelValue","input","blur"],mounted(){console.warn("[DEPRECATED] <WootInput> has be deprecated and will be removed soon. Please use v3/components/Form/Input.vue instead")},methods:{onChange(t){this.$emit("input",t.target.value),this.$emit("update:modelValue",t.target.value)},onBlur(t){this.$emit("blur",t.target.value)}}},UF={class:"input-container"},$F={key:0},GF=["value","type","placeholder","readonly"],VF={key:1,class:"help-text"},HF={key:2,class:"message"};function jF(t,n,a,e,s,r){return p(),g("label",UF,[a.label?(p(),g("span",$F,C(a.label),1)):O("v-if",!0),f("input",{value:a.modelValue,type:a.type,placeholder:a.placeholder,readonly:a.readonly,style:nn(a.styles),onInput:n[0]||(n[0]=(...o)=>r.onChange&&r.onChange(...o)),onBlur:n[1]||(n[1]=(...o)=>r.onBlur&&r.onBlur(...o))},null,44,GF),a.helpText?(p(),g("p",VF,C(a.helpText),1)):O("v-if",!0),a.error?(p(),g("span",HF,C(a.error),1)):O("v-if",!0),qe(t.$slots,"masked",{},void 0,!0)])}const WF=G(FF,[["render",jF],["__scopeId","data-v-68144687"],["__file","/app/app/javascript/dashboard/components/widgets/forms/Input.vue"]]),zF={version:4,country_calling_codes:{1:["US","AG","AI","AS","BB","BM","BS","CA","DM","DO","GD","GU","JM","KN","KY","LC","MP","MS","PR","SX","TC","TT","VC","VG","VI"],7:["RU","KZ"],20:["EG"],27:["ZA"],30:["GR"],31:["NL"],32:["BE"],33:["FR"],34:["ES"],36:["HU"],39:["IT","VA"],40:["RO"],41:["CH"],43:["AT"],44:["GB","GG","IM","JE"],45:["DK"],46:["SE"],47:["NO","SJ"],48:["PL"],49:["DE"],51:["PE"],52:["MX"],53:["CU"],54:["AR"],55:["BR"],56:["CL"],57:["CO"],58:["VE"],60:["MY"],61:["AU","CC","CX"],62:["ID"],63:["PH"],64:["NZ"],65:["SG"],66:["TH"],81:["JP"],82:["KR"],84:["VN"],86:["CN"],90:["TR"],91:["IN"],92:["PK"],93:["AF"],94:["LK"],95:["MM"],98:["IR"],211:["SS"],212:["MA","EH"],213:["DZ"],216:["TN"],218:["LY"],220:["GM"],221:["SN"],222:["MR"],223:["ML"],224:["GN"],225:["CI"],226:["BF"],227:["NE"],228:["TG"],229:["BJ"],230:["MU"],231:["LR"],232:["SL"],233:["GH"],234:["NG"],235:["TD"],236:["CF"],237:["CM"],238:["CV"],239:["ST"],240:["GQ"],241:["GA"],242:["CG"],243:["CD"],244:["AO"],245:["GW"],246:["IO"],247:["AC"],248:["SC"],249:["SD"],250:["RW"],251:["ET"],252:["SO"],253:["DJ"],254:["KE"],255:["TZ"],256:["UG"],257:["BI"],258:["MZ"],260:["ZM"],261:["MG"],262:["RE","YT"],263:["ZW"],264:["NA"],265:["MW"],266:["LS"],267:["BW"],268:["SZ"],269:["KM"],290:["SH","TA"],291:["ER"],297:["AW"],298:["FO"],299:["GL"],350:["GI"],351:["PT"],352:["LU"],353:["IE"],354:["IS"],355:["AL"],356:["MT"],357:["CY"],358:["FI","AX"],359:["BG"],370:["LT"],371:["LV"],372:["EE"],373:["MD"],374:["AM"],375:["BY"],376:["AD"],377:["MC"],378:["SM"],380:["UA"],381:["RS"],382:["ME"],383:["XK"],385:["HR"],386:["SI"],387:["BA"],389:["MK"],420:["CZ"],421:["SK"],423:["LI"],500:["FK"],501:["BZ"],502:["GT"],503:["SV"],504:["HN"],505:["NI"],506:["CR"],507:["PA"],508:["PM"],509:["HT"],590:["GP","BL","MF"],591:["BO"],592:["GY"],593:["EC"],594:["GF"],595:["PY"],596:["MQ"],597:["SR"],598:["UY"],599:["CW","BQ"],670:["TL"],672:["NF"],673:["BN"],674:["NR"],675:["PG"],676:["TO"],677:["SB"],678:["VU"],679:["FJ"],680:["PW"],681:["WF"],682:["CK"],683:["NU"],685:["WS"],686:["KI"],687:["NC"],688:["TV"],689:["PF"],690:["TK"],691:["FM"],692:["MH"],850:["KP"],852:["HK"],853:["MO"],855:["KH"],856:["LA"],880:["BD"],886:["TW"],960:["MV"],961:["LB"],962:["JO"],963:["SY"],964:["IQ"],965:["KW"],966:["SA"],967:["YE"],968:["OM"],970:["PS"],971:["AE"],972:["IL"],973:["BH"],974:["QA"],975:["BT"],976:["MN"],977:["NP"],992:["TJ"],993:["TM"],994:["AZ"],995:["GE"],996:["KG"],998:["UZ"]},countries:{AC:["247","00","(?:[01589]\\d|[46])\\d{4}",[5,6]],AD:["376","00","(?:1|6\\d)\\d{7}|[135-9]\\d{5}",[6,8,9],[["(\\d{3})(\\d{3})","$1 $2",["[135-9]"]],["(\\d{4})(\\d{4})","$1 $2",["1"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]]],AE:["971","00","(?:[4-7]\\d|9[0-689])\\d{7}|800\\d{2,9}|[2-4679]\\d{7}",[5,6,7,8,9,10,11,12],[["(\\d{3})(\\d{2,9})","$1 $2",["60|8"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[236]|[479][2-8]"],"0$1"],["(\\d{3})(\\d)(\\d{5})","$1 $2 $3",["[479]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"]],"0"],AF:["93","00","[2-7]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],"0"],AG:["1","011","(?:268|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([457]\\d{6})$|1","268$1",0,"268"],AI:["1","011","(?:264|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2457]\\d{6})$|1","264$1",0,"264"],AL:["355","00","(?:700\\d\\d|900)\\d{3}|8\\d{5,7}|(?:[2-5]|6\\d)\\d{7}",[6,7,8,9],[["(\\d{3})(\\d{3,4})","$1 $2",["80|9"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["4[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2358][2-5]|4"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["[23578]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["6"],"0$1"]],"0"],AM:["374","00","(?:[1-489]\\d|55|60|77)\\d{6}",[8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[89]0"],"0 $1"],["(\\d{3})(\\d{5})","$1 $2",["2|3[12]"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["1|47"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[3-9]"],"0$1"]],"0"],AO:["244","00","[29]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[29]"]]]],AR:["54","00","(?:11|[89]\\d\\d)\\d{8}|[2368]\\d{9}",[10,11],[["(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",1],["(\\d)(\\d{4})(\\d{2})(\\d{4})","$2 15-$3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",0,"$1 $2 $3-$4"],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 15-$3-$4",["91"],"0$1",0,"$1 $2 $3-$4"],["(\\d{3})(\\d{3})(\\d{5})","$1-$2-$3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 15-$3-$4",["9"],"0$1",0,"$1 $2 $3-$4"]],"0",0,"0?(?:(11|2(?:2(?:02?|[13]|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:02?|1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[67])|4(?:7[3-578]|9)|6(?:[0136]|2[24-6]|4[6-8]?|5[15-8])|80|9(?:0[1-3]|[19]|2\\d|3[1-6]|4[02568]?|5[2-4]|6[2-46]|72?|8[23]?))|3(?:3(?:2[79]|6|8[2578])|4(?:0[0-24-9]|[12]|3[5-8]?|4[24-7]|5[4-68]?|6[02-9]|7[126]|8[2379]?|9[1-36-8])|5(?:1|2[1245]|3[237]?|4[1-46-9]|6[2-4]|7[1-6]|8[2-5]?)|6[24]|7(?:[069]|1[1568]|2[15]|3[145]|4[13]|5[14-8]|7[2-57]|8[126])|8(?:[01]|2[15-7]|3[2578]?|4[13-6]|5[4-8]?|6[1-357-9]|7[36-8]?|8[5-8]?|9[124])))15)?","9$1"],AS:["1","011","(?:[58]\\d\\d|684|900)\\d{7}",[10],0,"1",0,"([267]\\d{6})$|1","684$1",0,"684"],AT:["43","00","1\\d{3,12}|2\\d{6,12}|43(?:(?:0\\d|5[02-9])\\d{3,9}|2\\d{4,5}|[3467]\\d{4}|8\\d{4,6}|9\\d{4,7})|5\\d{4,12}|8\\d{7,12}|9\\d{8,12}|(?:[367]\\d|4[0-24-9])\\d{4,11}",[4,5,6,7,8,9,10,11,12,13],[["(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],["(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],["(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],["(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],"0"],AU:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{7}(?:\\d(?:\\d{2})?)?|8[0-24-9]\\d{7})|[2-478]\\d{8}|1\\d{4,7}",[5,6,7,8,9,10,12],[["(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|4"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]]],"0",0,"(183[12])|0",0,0,0,[["(?:(?:(?:2(?:[0-26-9]\\d|3[0-8]|4[02-9]|5[0135-9])|7(?:[013-57-9]\\d|2[0-8]))\\d|3(?:(?:[0-3589]\\d|6[1-9]|7[0-35-9])\\d|4(?:[0-578]\\d|90)))\\d\\d|8(?:51(?:0(?:0[03-9]|[12479]\\d|3[2-9]|5[0-8]|6[1-9]|8[0-7])|1(?:[0235689]\\d|1[0-69]|4[0-589]|7[0-47-9])|2(?:0[0-79]|[18][13579]|2[14-9]|3[0-46-9]|[4-6]\\d|7[89]|9[0-4])|3\\d\\d)|(?:6[0-8]|[78]\\d)\\d{3}|9(?:[02-9]\\d{3}|1(?:(?:[0-58]\\d|6[0135-9])\\d|7(?:0[0-24-9]|[1-9]\\d)|9(?:[0-46-9]\\d|5[0-79])))))\\d{3}",[9]],["4(?:79[01]|83[0-389]|94[0-4])\\d{5}|4(?:[0-36]\\d|4[047-9]|5[0-25-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,["163\\d{2,6}",[5,6,7,8,9]],["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],AW:["297","00","(?:[25-79]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[25-9]"]]]],AX:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","2\\d{4,9}|35\\d{4,5}|(?:60\\d\\d|800)\\d{4,6}|7\\d{5,11}|(?:[14]\\d|3[0-46-9]|50)\\d{4,8}",[5,6,7,8,9,10,11,12],0,"0",0,0,0,0,"18",0,"00"],AZ:["994","00","365\\d{6}|(?:[124579]\\d|60|88)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365[45]|46","1[28]|2|365(?:4|5[02])|46"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],"0"],BA:["387","00","6\\d{8}|(?:[35689]\\d|49|70)\\d{6}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],"0"],BB:["1","011","(?:246|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","246$1",0,"246"],BD:["880","00","[1-469]\\d{9}|8[0-79]\\d{7,8}|[2-79]\\d{8}|[2-9]\\d{7}|[3-9]\\d{6}|[57-9]\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{4,6})","$1-$2",["31[5-8]|[459]1"],"0$1"],["(\\d{3})(\\d{3,7})","$1-$2",["3(?:[67]|8[013-9])|4(?:6[168]|7|[89][18])|5(?:6[128]|9)|6(?:[15]|28|4[14])|7[2-589]|8(?:0[014-9]|[12])|9[358]|(?:3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(?:44|66)[01346-9]"],"0$1"],["(\\d{4})(\\d{3,6})","$1-$2",["[13-9]|2[23]"],"0$1"],["(\\d)(\\d{7,8})","$1-$2",["2"],"0$1"]],"0"],BE:["32","00","4\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:80|9)0"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[239]|4[23]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[15-8]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4"],"0$1"]],"0"],BF:["226","00","[025-7]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[025-7]"]]]],BG:["359","00","00800\\d{7}|[2-7]\\d{6,7}|[89]\\d{6,8}|2\\d{5}",[6,7,8,9,12],[["(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],["(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],"0"],BH:["973","00","[136-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[13679]|8[02-4679]"]]]],BI:["257","00","(?:[267]\\d|31)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2367]"]]]],BJ:["229","00","[24-689]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-689]"]]]],BL:["590","00","590\\d{6}|(?:69|80|9\\d)\\d{7}",[9],0,"0",0,0,0,0,0,[["590(?:2[7-9]|3[3-7]|5[12]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-5])\\d{4}"]]],BM:["1","011","(?:441|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","441$1",0,"441"],BN:["673","00","[2-578]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-578]"]]]],BO:["591","00(?:1\\d)?","8001\\d{5}|(?:[2-467]\\d|50)\\d{6}",[8,9],[["(\\d)(\\d{7})","$1 $2",["[235]|4[46]"]],["(\\d{8})","$1",["[67]"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["8"]]],"0",0,"0(1\\d)?"],BQ:["599","00","(?:[34]1|7\\d)\\d{5}",[7],0,0,0,0,0,0,"[347]"],BR:["55","00(?:1[245]|2[1-35]|31|4[13]|[56]5|99)","(?:[1-46-9]\\d\\d|5(?:[0-46-9]\\d|5[0-46-9]))\\d{8}|[1-9]\\d{9}|[3589]\\d{8}|[34]\\d{7}",[8,9,10,11],[["(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37)","4(?:02|37)0|[34]00"]],["(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)"],["(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)"]],"0",0,"(?:0|90)(?:(1[245]|2[1-35]|31|4[13]|[56]5|99)(\\d{10,11}))?","$2"],BS:["1","011","(?:242|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([3-8]\\d{6})$|1","242$1",0,"242"],BT:["975","00","[17]\\d{7}|[2-8]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-68]|7[246]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|7"]]]],BW:["267","00","(?:0800|(?:[37]|800)\\d)\\d{6}|(?:[2-6]\\d|90)\\d{5}",[7,8,10],[["(\\d{2})(\\d{5})","$1 $2",["90"]],["(\\d{3})(\\d{4})","$1 $2",["[24-6]|3[15-9]"]],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37]"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["8"]]]],BY:["375","810","(?:[12]\\d|33|44|902)\\d{7}|8(?:0[0-79]\\d{5,7}|[1-7]\\d{9})|8(?:1[0-489]|[5-79]\\d)\\d{7}|8[1-79]\\d{6,7}|8[0-79]\\d{5}|8\\d{5}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3})","$1 $2",["800"],"8 $1"],["(\\d{3})(\\d{2})(\\d{2,4})","$1 $2 $3",["800"],"8 $1"],["(\\d{4})(\\d{2})(\\d{3})","$1 $2-$3",["1(?:5[169]|6[3-5]|7[179])|2(?:1[35]|2[34]|3[3-5])","1(?:5[169]|6(?:3[1-3]|4|5[125])|7(?:1[3-9]|7[0-24-6]|9[2-7]))|2(?:1[35]|2[34]|3[3-5])"],"8 0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["1(?:[56]|7[467])|2[1-3]"],"8 0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-4]"],"8 0$1"],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["[89]"],"8 $1"]],"8",0,"0|80?",0,0,0,0,"8~10"],BZ:["501","00","(?:0800\\d|[2-8])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1-$2",["[2-8]"]],["(\\d)(\\d{3})(\\d{4})(\\d{3})","$1-$2-$3-$4",["0"]]]],CA:["1","011","(?:[2-8]\\d|90)\\d{8}|3\\d{6}",[7,10],0,"1",0,0,0,0,0,[["(?:2(?:04|[23]6|[48]9|50|63)|3(?:06|43|54|6[578]|82)|4(?:03|1[68]|[26]8|3[178]|50|74)|5(?:06|1[49]|48|79|8[147])|6(?:04|[18]3|39|47|72)|7(?:0[59]|42|53|78|8[02])|8(?:[06]7|19|25|7[39])|90[25])[2-9]\\d{6}",[10]],["",[10]],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",[10]],["900[2-9]\\d{6}",[10]],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|(?:5(?:00|2[125-9]|33|44|66|77|88)|622)[2-9]\\d{6}",[10]],0,["310\\d{4}",[7]],0,["600[2-9]\\d{6}",[10]]]],CC:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"([59]\\d{7})$|0","8$1",0,0,[["8(?:51(?:0(?:02|31|60|89)|1(?:18|76)|223)|91(?:0(?:1[0-2]|29)|1(?:[28]2|50|79)|2(?:10|64)|3(?:[06]8|22)|4[29]8|62\\d|70[23]|959))\\d{3}",[9]],["4(?:79[01]|83[0-389]|94[0-4])\\d{5}|4(?:[0-36]\\d|4[047-9]|5[0-25-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CD:["243","00","(?:(?:[189]|5\\d)\\d|2)\\d{7}|[1-68]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[1-6]"],"0$1"],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["5"],"0$1"]],"0"],CF:["236","00","(?:[27]\\d{3}|8776)\\d{4}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[278]"]]]],CG:["242","00","222\\d{6}|(?:0\\d|80)\\d{7}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02]"]]]],CH:["41","00","8\\d{11}|[2-9]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8[047]|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]|81"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["8"],"0$1"]],"0"],CI:["225","00","[02]\\d{9}",[10],[["(\\d{2})(\\d{2})(\\d)(\\d{5})","$1 $2 $3 $4",["2"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3 $4",["0"]]]],CK:["682","00","[2-578]\\d{4}",[5],[["(\\d{2})(\\d{3})","$1 $2",["[2-578]"]]]],CL:["56","(?:0|1(?:1[0-69]|2[02-5]|5[13-58]|69|7[0167]|8[018]))0","12300\\d{6}|6\\d{9,10}|[2-9]\\d{8}",[9,10,11],[["(\\d{5})(\\d{4})","$1 $2",["219","2196"],"($1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[1-36]"],"($1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9[2-9]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-9]|[1-9])"],"($1)"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]]],CM:["237","00","[26]\\d{8}|88\\d{6,7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["88"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]|88"]]]],CN:["86","00|1(?:[12]\\d|79)\\d\\d00","(?:(?:1[03-689]|2\\d)\\d\\d|6)\\d{8}|1\\d{10}|[126]\\d{6}(?:\\d(?:\\d{2})?)?|86\\d{5,6}|(?:[3-579]\\d|8[0-57-9])\\d{5,9}",[7,8,9,10,11,12],[["(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]|3(?:[157]|35|49|9[1-68])|4(?:1[124-9]|2[179]|6[47-9]|7|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:07|1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3|4[13]|5[1-5]|7[0-79]|9[0-35-9])|(?:4[35]|59|85)[1-9]","(?:10|2[0-57-9])(?:1[02]|9[56])|8078|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))1","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|80781|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))12","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|807812|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))123","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:078|1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))123"],"0$1"],["(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1",1],["(\\d{3})(\\d{7,8})","$1 $2",["9"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",1]],"0",0,"(1(?:[12]\\d|79)\\d\\d)|0",0,0,0,0,"00"],CO:["57","00(?:4(?:[14]4|56)|[579])","60\\d{8}|(?:1\\d|[39])\\d{9}",[10,11],[["(\\d{3})(\\d{7})","$1 $2",["6|90"],"($1)"],["(\\d{3})(\\d{7})","$1 $2",["3[0-357]|91"]],["(\\d)(\\d{3})(\\d{7})","$1-$2-$3",["1"],"0$1",0,"$1 $2 $3"]],"0",0,"0([3579]|4(?:[14]4|56))?"],CR:["506","00","(?:8\\d|90)\\d{8}|(?:[24-8]\\d{3}|3005)\\d{4}",[8,10],[["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[3-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[89]"]]],0,0,"(19(?:0[0-2468]|1[09]|20|66|77|99))"],CU:["53","119","(?:[2-7]|8\\d\\d)\\d{7}|[2-47]\\d{6}|[34]\\d{5}",[6,7,8,10],[["(\\d{2})(\\d{4,6})","$1 $2",["2[1-4]|[34]"],"(0$1)"],["(\\d)(\\d{6,7})","$1 $2",["7"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["[56]"],"0$1"],["(\\d{3})(\\d{7})","$1 $2",["8"],"0$1"]],"0"],CV:["238","0","(?:[2-59]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2-589]"]]]],CW:["599","00","(?:[34]1|60|(?:7|9\\d)\\d)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[3467]"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["9[4-8]"]]],0,0,0,0,0,"[69]"],CX:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"([59]\\d{7})$|0","8$1",0,0,[["8(?:51(?:0(?:01|30|59|88)|1(?:17|46|75)|2(?:22|35))|91(?:00[6-9]|1(?:[28]1|49|78)|2(?:09|63)|3(?:12|26|75)|4(?:56|97)|64\\d|7(?:0[01]|1[0-2])|958))\\d{3}",[9]],["4(?:79[01]|83[0-389]|94[0-4])\\d{5}|4(?:[0-36]\\d|4[047-9]|5[0-25-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CY:["357","00","(?:[279]\\d|[58]0)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[257-9]"]]]],CZ:["420","00","(?:[2-578]\\d|60)\\d{7}|9\\d{8,11}",[9,10,11,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]|9[015-7]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3 $4",["96"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]]],DE:["49","00","[2579]\\d{5,14}|49(?:[34]0|69|8\\d)\\d\\d?|49(?:37|49|60|7[089]|9\\d)\\d{1,3}|49(?:2[024-9]|3[2-689]|7[1-7])\\d{1,8}|(?:1|[368]\\d|4[0-8])\\d{3,13}|49(?:[015]\\d|2[13]|31|[46][1-8])\\d{1,9}",[4,5,6,7,8,9,10,11,12,13,14,15],[["(\\d{2})(\\d{3,13})","$1 $2",["3[02]|40|[68]9"],"0$1"],["(\\d{3})(\\d{3,12})","$1 $2",["2(?:0[1-389]|1[124]|2[18]|3[14])|3(?:[35-9][15]|4[015])|906|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(?:0[1-389]|12[0-8])|3(?:[35-9][15]|4[015])|906|2(?:[13][14]|2[18])|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"],"0$1"],["(\\d{4})(\\d{2,11})","$1 $2",["[24-6]|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(?:3(?:0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(?:2[135]|4[13578]|9[1346])|5(?:0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(?:2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(?:2[1-7]|4[145]|6[1-5]|7[1-4])|8(?:21|3[1468]|6|7[1467]|8[136])|9(?:0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(?:47|60)[1356]|3(?:3[46]|46|5[49])[1246]|3[4579]3[1357]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["138"],"0$1"],["(\\d{5})(\\d{2,10})","$1 $2",["3"],"0$1"],["(\\d{3})(\\d{5,11})","$1 $2",["181"],"0$1"],["(\\d{3})(\\d)(\\d{4,10})","$1 $2 $3",["1(?:3|80)|9"],"0$1"],["(\\d{3})(\\d{7,8})","$1 $2",["1[67]"],"0$1"],["(\\d{3})(\\d{7,12})","$1 $2",["8"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["185","1850","18500"],"0$1"],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["18[68]"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["15[1279]"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["15[03568]","15(?:[0568]|31)"],"0$1"],["(\\d{3})(\\d{8})","$1 $2",["18"],"0$1"],["(\\d{3})(\\d{2})(\\d{7,8})","$1 $2 $3",["1(?:6[023]|7)"],"0$1"],["(\\d{4})(\\d{2})(\\d{7})","$1 $2 $3",["15[279]"],"0$1"],["(\\d{3})(\\d{2})(\\d{8})","$1 $2 $3",["15"],"0$1"]],"0"],DJ:["253","00","(?:2\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[27]"]]]],DK:["45","00","[2-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-9]"]]]],DM:["1","011","(?:[58]\\d\\d|767|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","767$1",0,"767"],DO:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,0,0,0,"8001|8[024]9"],DZ:["213","00","(?:[1-4]|[5-79]\\d|80)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-8]"],"0$1"]],"0"],EC:["593","00","1\\d{9,10}|(?:[2-7]|9\\d)\\d{7}",[8,9,10,11],[["(\\d)(\\d{3})(\\d{4})","$1 $2-$3",["[2-7]"],"(0$1)",0,"$1-$2-$3"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],"0"],EE:["372","00","8\\d{9}|[4578]\\d{7}|(?:[3-8]\\d|90)\\d{5}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[369]|4[3-8]|5(?:[0-2]|5[0-478]|6[45])|7[1-9]|88","[369]|4[3-8]|5(?:[02]|1(?:[0-8]|95)|5[0-478]|6(?:4[0-4]|5[1-589]))|7[1-9]|88"]],["(\\d{4})(\\d{3,4})","$1 $2",["[45]|8(?:00|[1-49])","[45]|8(?:00[1-9]|[1-49])"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],EG:["20","00","[189]\\d{8,9}|[24-6]\\d{8}|[135]\\d{7}",[8,9,10],[["(\\d)(\\d{7,8})","$1 $2",["[23]"],"0$1"],["(\\d{2})(\\d{6,7})","$1 $2",["1[35]|[4-6]|8[2468]|9[235-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{8})","$1 $2",["1"],"0$1"]],"0"],EH:["212","00","[5-8]\\d{8}",[9],0,"0",0,0,0,0,"528[89]"],ER:["291","00","[178]\\d{6}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[178]"],"0$1"]],"0"],ES:["34","00","[5-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]]],ET:["251","00","(?:11|[2-579]\\d)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-579]"],"0$1"]],"0"],FI:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","[1-35689]\\d{4}|7\\d{10,11}|(?:[124-7]\\d|3[0-46-9])\\d{8}|[1-9]\\d{5,8}",[5,6,7,8,9,10,11,12],[["(\\d{5})","$1",["20[2-59]"],"0$1"],["(\\d{3})(\\d{3,7})","$1 $2",["(?:[1-3]0|[68])0|70[07-9]"],"0$1"],["(\\d{2})(\\d{4,8})","$1 $2",["[14]|2[09]|50|7[135]"],"0$1"],["(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"],["(\\d)(\\d{4,9})","$1 $2",["(?:1[49]|[2568])[1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"]],"0",0,0,0,0,"1[03-79]|[2-9]",0,"00"],FJ:["679","0(?:0|52)","45\\d{5}|(?:0800\\d|[235-9])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1 $2",["[235-9]|45"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]]],0,0,0,0,0,0,0,"00"],FK:["500","00","[2-7]\\d{4}",[5]],FM:["691","00","(?:[39]\\d\\d|820)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[389]"]]]],FO:["298","00","[2-9]\\d{5}",[6],[["(\\d{6})","$1",["[2-9]"]]],0,0,"(10(?:01|[12]0|88))"],FR:["33","00","[1-9]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],"0"],GA:["241","00","(?:[067]\\d|11)\\d{6}|[2-7]\\d{6}",[7,8],[["(\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-7]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["11|[67]"],"0$1"]],0,0,"0(11\\d{6}|60\\d{6}|61\\d{6}|6[256]\\d{6}|7[467]\\d{6})","$1"],GB:["44","00","[1-357-9]\\d{9}|[18]\\d{8}|8\\d{6}",[7,9,10],[["(\\d{3})(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["845","8454","84546","845464"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["800"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:(?:38|69)7|5(?:24|39)|768|946)","1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["1(?:[2-69][02-9]|[78])"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[25]|7(?:0|6[02-9])","[25]|7(?:0|6(?:[03-9]|2[356]))"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[1389]"],"0$1"]],"0",0,0,0,0,0,[["(?:1(?:1(?:3(?:[0-58]\\d\\d|73[0-35])|4(?:(?:[0-5]\\d|70)\\d|69[7-9])|(?:(?:5[0-26-9]|[78][0-49])\\d|6(?:[0-4]\\d|50))\\d)|(?:2(?:(?:0[024-9]|2[3-9]|3[3-79]|4[1-689]|[58][02-9]|6[0-47-9]|7[013-9]|9\\d)\\d|1(?:[0-7]\\d|8[0-3]))|(?:3(?:0\\d|1[0-8]|[25][02-9]|3[02-579]|[468][0-46-9]|7[1-35-79]|9[2-578])|4(?:0[03-9]|[137]\\d|[28][02-57-9]|4[02-69]|5[0-8]|[69][0-79])|5(?:0[1-35-9]|[16]\\d|2[024-9]|3[015689]|4[02-9]|5[03-9]|7[0-35-9]|8[0-468]|9[0-57-9])|6(?:0[034689]|1\\d|2[0-35689]|[38][013-9]|4[1-467]|5[0-69]|6[13-9]|7[0-8]|9[0-24578])|7(?:0[0246-9]|2\\d|3[0236-8]|4[03-9]|5[0-46-9]|6[013-9]|7[0-35-9]|8[024-9]|9[02-9])|8(?:0[35-9]|2[1-57-9]|3[02-578]|4[0-578]|5[124-9]|6[2-69]|7\\d|8[02-9]|9[02569])|9(?:0[02-589]|[18]\\d|2[02-689]|3[1-57-9]|4[2-9]|5[0-579]|6[2-47-9]|7[0-24578]|9[2-57]))\\d)\\d)|2(?:0[013478]|3[0189]|4[017]|8[0-46-9]|9[0-2])\\d{3})\\d{4}|1(?:2(?:0(?:46[1-4]|87[2-9])|545[1-79]|76(?:2\\d|3[1-8]|6[1-6])|9(?:7(?:2[0-4]|3[2-5])|8(?:2[2-8]|7[0-47-9]|8[3-5])))|3(?:6(?:38[2-5]|47[23])|8(?:47[04-9]|64[0157-9]))|4(?:044[1-7]|20(?:2[23]|8\\d)|6(?:0(?:30|5[2-57]|6[1-8]|7[2-8])|140)|8(?:052|87[1-3]))|5(?:2(?:4(?:3[2-79]|6\\d)|76\\d)|6(?:26[06-9]|686))|6(?:06(?:4\\d|7[4-79])|295[5-7]|35[34]\\d|47(?:24|61)|59(?:5[08]|6[67]|74)|9(?:55[0-4]|77[23]))|7(?:26(?:6[13-9]|7[0-7])|(?:442|688)\\d|50(?:2[0-3]|[3-68]2|76))|8(?:27[56]\\d|37(?:5[2-5]|8[239])|843[2-58])|9(?:0(?:0(?:6[1-8]|85)|52\\d)|3583|4(?:66[1-8]|9(?:2[01]|81))|63(?:23|3[1-4])|9561))\\d{3}",[9,10]],["7(?:457[0-57-9]|700[01]|911[028])\\d{5}|7(?:[1-3]\\d\\d|4(?:[0-46-9]\\d|5[0-689])|5(?:0[0-8]|[13-9]\\d|2[0-35-9])|7(?:0[1-9]|[1-7]\\d|8[02-9]|9[0-689])|8(?:[014-9]\\d|[23][0-8])|9(?:[024-9]\\d|1[02-9]|3[0-689]))\\d{6}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[2-49]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]],0," x"],GD:["1","011","(?:473|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","473$1",0,"473"],GE:["995","00","(?:[3-57]\\d\\d|800)\\d{6}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["32"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[57]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[348]"],"0$1"]],"0"],GF:["594","00","[56]94\\d{6}|(?:80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[56]|9[47]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[89]"],"0$1"]],"0"],GG:["44","00","(?:1481|[357-9]\\d{3})\\d{6}|8\\d{6}(?:\\d{2})?",[7,9,10],0,"0",0,"([25-9]\\d{5})$|0","1481$1",0,0,[["1481[25-9]\\d{5}",[10]],["7(?:(?:781|839)\\d|911[17])\\d{5}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[0-3]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]]],GH:["233","00","(?:[235]\\d{3}|800)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],"0"],GI:["350","00","(?:[25]\\d|60)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["2"]]]],GL:["299","00","(?:19|[2-689]\\d|70)\\d{4}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["19|[2-9]"]]]],GM:["220","00","[2-9]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],GN:["224","00","722\\d{6}|(?:3|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["3"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[67]"]]]],GP:["590","00","590\\d{6}|(?:69|80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0",0,0,0,0,0,[["590(?:0[1-68]|[14][0-24-9]|2[0-68]|3[1-9]|5[3-579]|[68][0-689]|7[08]|9\\d)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-5])\\d{4}"]]],GQ:["240","00","222\\d{6}|(?:3\\d|55|[89]0)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235]"]],["(\\d{3})(\\d{6})","$1 $2",["[89]"]]]],GR:["30","00","5005000\\d{3}|8\\d{9,11}|(?:[269]\\d|70)\\d{8}",[10,11,12],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["21|7"]],["(\\d{4})(\\d{6})","$1 $2",["2(?:2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])|5"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2689]"]],["(\\d{3})(\\d{3,4})(\\d{5})","$1 $2 $3",["8"]]]],GT:["502","00","80\\d{6}|(?:1\\d{3}|[2-7])\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1 $2",["[2-8]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],GU:["1","011","(?:[58]\\d\\d|671|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","671$1",0,"671"],GW:["245","00","[49]\\d{8}|4\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["40"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"]]]],GY:["592","001","(?:[2-8]\\d{3}|9008)\\d{3}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],HK:["852","00(?:30|5[09]|[126-9]?)","8[0-46-9]\\d{6,7}|9\\d{4,7}|(?:[2-7]|9\\d{3})\\d{7}",[5,6,7,8,9,11],[["(\\d{3})(\\d{2,5})","$1 $2",["900","9003"]],["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[1-4]|9(?:0[1-9]|[1-8])"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{3})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],0,0,0,0,0,0,0,"00"],HN:["504","00","8\\d{10}|[237-9]\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1-$2",["[237-9]"]]]],HR:["385","00","(?:[24-69]\\d|3[0-79])\\d{7}|80\\d{5,7}|[1-79]\\d{7}|6\\d{5,6}",[6,7,8,9],[["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["6[01]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{4})(\\d{3})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6|7[245]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-57]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"]],"0"],HT:["509","00","(?:[2-489]\\d|55)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[2-589]"]]]],HU:["36","00","[235-7]\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6|8[2-57-9]|9[2-69]"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"06 $1"]],"06"],ID:["62","00[89]","00[1-9]\\d{9,14}|(?:[1-36]|8\\d{5})\\d{6}|00\\d{9}|[1-9]\\d{8,10}|[2-9]\\d{7}",[7,8,9,10,11,12,13,14,15,16,17],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],["(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],["(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],["(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],["(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],["(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],["(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"]],"0"],IE:["353","00","(?:1\\d|[2569])\\d{6,8}|4\\d{6,9}|7\\d{8}|8\\d{8,9}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["2[24-9]|47|58|6[237-9]|9[35-9]"],"(0$1)"],["(\\d{3})(\\d{5})","$1 $2",["[45]0"],"(0$1)"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["1"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2569]|4[1-69]|7[14]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["81"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[78]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["4"],"(0$1)"],["(\\d{2})(\\d)(\\d{3})(\\d{4})","$1 $2 $3 $4",["8"],"0$1"]],"0"],IL:["972","0(?:0|1[2-9])","1\\d{6}(?:\\d{3,5})?|[57]\\d{8}|[1-489]\\d{7}",[7,8,9,10,11,12],[["(\\d{4})(\\d{3})","$1-$2",["125"]],["(\\d{4})(\\d{2})(\\d{2})","$1-$2-$3",["121"]],["(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-489]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1-$2-$3",["12"]],["(\\d{4})(\\d{6})","$1-$2",["159"]],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3-$4",["1[7-9]"]],["(\\d{3})(\\d{1,2})(\\d{3})(\\d{4})","$1-$2 $3-$4",["15"]]],"0"],IM:["44","00","1624\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"([25-8]\\d{5})$|0","1624$1",0,"74576|(?:16|7[56])24"],IN:["91","00","(?:000800|[2-9]\\d\\d)\\d{7}|1\\d{7,12}",[8,9,10,11,12,13],[["(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],0,1],["(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],0,1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",1],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",1],["(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",1],["(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],0,1],["(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],0,1]],"0"],IO:["246","00","3\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["3"]]]],IQ:["964","00","(?:1|7\\d\\d)\\d{7}|[2-6]\\d{7,8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-6]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],IR:["98","00","[1-9]\\d{9}|(?:[1-8]\\d\\d|9)\\d{3,4}",[4,5,6,7,10],[["(\\d{4,5})","$1",["96"],"0$1"],["(\\d{2})(\\d{4,5})","$1 $2",["(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])[12689]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[1-8]"],"0$1"]],"0"],IS:["354","00|1(?:0(?:01|[12]0)|100)","(?:38\\d|[4-9])\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["[4-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["3"]]],0,0,0,0,0,0,0,"00"],IT:["39","00","0\\d{5,10}|1\\d{8,10}|3(?:[0-8]\\d{7,10}|9\\d{7,8})|(?:43|55|70)\\d{8}|8\\d{5}(?:\\d{2,4})?",[6,7,8,9,10,11,12],[["(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],["(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[2-5])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|3[04]|[45][0-4]))"]],["(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],["(\\d{4})(\\d{4})","$1 $2",["894"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1(?:44|[679])|[378]|43"]],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]|14"]],["(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["3"]]],0,0,0,0,0,0,[["0669[0-79]\\d{1,6}|0(?:1(?:[0159]\\d|[27][1-5]|31|4[1-4]|6[1356]|8[2-57])|2\\d\\d|3(?:[0159]\\d|2[1-4]|3[12]|[48][1-6]|6[2-59]|7[1-7])|4(?:[0159]\\d|[23][1-9]|4[245]|6[1-5]|7[1-4]|81)|5(?:[0159]\\d|2[1-5]|3[2-6]|4[1-79]|6[4-6]|7[1-578]|8[3-8])|6(?:[0-57-9]\\d|6[0-8])|7(?:[0159]\\d|2[12]|3[1-7]|4[2-46]|6[13569]|7[13-6]|8[1-59])|8(?:[0159]\\d|2[3-578]|3[1-356]|[6-8][1-5])|9(?:[0159]\\d|[238][1-5]|4[12]|6[1-8]|7[1-6]))\\d{2,7}",[6,7,8,9,10,11]],["3[2-9]\\d{7,8}|(?:31|43)\\d{8}",[9,10]],["80(?:0\\d{3}|3)\\d{3}",[6,9]],["(?:0878\\d{3}|89(?:2\\d|3[04]|4(?:[0-4]|[5-9]\\d\\d)|5[0-4]))\\d\\d|(?:1(?:44|6[346])|89(?:38|5[5-9]|9))\\d{6}",[6,8,9,10]],["1(?:78\\d|99)\\d{6}",[9,10]],["3[2-8]\\d{9,10}",[11,12]],0,0,["55\\d{8}",[10]],["84(?:[08]\\d{3}|[17])\\d{3}",[6,9]]]],JE:["44","00","1534\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"([0-24-8]\\d{5})$|0","1534$1",0,0,[["1534[0-24-8]\\d{5}"],["7(?:(?:(?:50|82)9|937)\\d|7(?:00[378]|97\\d))\\d{5}"],["80(?:07(?:35|81)|8901)\\d{4}"],["(?:8(?:4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|90(?:066[59]|1810|71(?:07|55)))\\d{4}"],["701511\\d{4}"],0,["(?:3(?:0(?:07(?:35|81)|8901)|3\\d{4}|4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|55\\d{4})\\d{4}"],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}"],["56\\d{8}"]]],JM:["1","011","(?:[58]\\d\\d|658|900)\\d{7}",[10],0,"1",0,0,0,0,"658|876"],JO:["962","00","(?:(?:[2689]|7\\d)\\d|32|53)\\d{6}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2356]|87"],"(0$1)"],["(\\d{3})(\\d{5,6})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["70"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],JP:["81","010","00[1-9]\\d{6,14}|[257-9]\\d{9}|(?:00|[1-9]\\d\\d)\\d{6}",[8,9,10,11,12,13,14,15,16,17],[["(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],["(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51)|9(?:80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[7-9]|96)|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[7-9]|96[2457-9])|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["[36]|4(?:2[09]|7[01])","[36]|4(?:2(?:0|9[02-69])|7(?:0[019]|1))"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[0459]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[26-9]|49|51|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9]|9[29])|5(?:2|3(?:[045]|9[0-8])|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|3(?:[29]|60)|49|51|6(?:[0-24]|36|5[0-3589]|7[23]|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:25[0468]|422|838)[01]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3(?:[045]|9(?:[0-58]|6[4-9]|7[0-35689]))|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|60|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[2-57-9]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|7(?:2[2-468]|3[78])|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],["(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[289][2-9]|5[3-9]|7[2-4679]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[257-9]"],"0$1"]],"0",0,"(000[259]\\d{6})$|(?:(?:003768)0?)|0","$1"],KE:["254","000","(?:[17]\\d\\d|900)\\d{6}|(?:2|80)0\\d{6,7}|[4-6]\\d{6,8}",[7,8,9,10],[["(\\d{2})(\\d{5,7})","$1 $2",["[24-6]"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[17]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0"],KG:["996","00","8\\d{9}|[235-9]\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["3(?:1[346]|[24-79])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-79]|88"],"0$1"],["(\\d{3})(\\d{3})(\\d)(\\d{2,3})","$1 $2 $3 $4",["8"],"0$1"]],"0"],KH:["855","00[14-9]","1\\d{9}|[1-9]\\d{7,8}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],KI:["686","00","(?:[37]\\d|6[0-79])\\d{6}|(?:[2-48]\\d|50)\\d{3}",[5,8],0,"0"],KM:["269","00","[3478]\\d{6}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[3478]"]]]],KN:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","869$1",0,"869"],KP:["850","00|99","85\\d{6}|(?:19\\d|[2-7])\\d{7}",[8,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"]],"0"],KR:["82","00(?:[125689]|3(?:[46]5|91)|7(?:00|27|3|55|6[126]))","00[1-9]\\d{8,11}|(?:[12]|5\\d{3})\\d{7}|[13-6]\\d{9}|(?:[1-6]\\d|80)\\d{7}|[3-6]\\d{4,5}|(?:00|7)0\\d{8}",[5,6,8,9,10,11,12,13,14],[["(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1"],["(\\d{4})(\\d{4})","$1-$2",["1"]],["(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[36]0|8"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1"]],"0",0,"0(8(?:[1-46-8]|5\\d\\d))?"],KW:["965","00","18\\d{5}|(?:[2569]\\d|41)\\d{6}",[7,8],[["(\\d{4})(\\d{3,4})","$1 $2",["[169]|2(?:[235]|4[1-35-9])|52"]],["(\\d{3})(\\d{5})","$1 $2",["[245]"]]]],KY:["1","011","(?:345|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","345$1",0,"345"],KZ:["7","810","(?:33622|8\\d{8})\\d{5}|[78]\\d{9}",[10,14],0,"8",0,0,0,0,"33|7",0,"8~10"],LA:["856","00","[23]\\d{9}|3\\d{8}|(?:[235-8]\\d|41)\\d{6}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2[13]|3[14]|[4-8]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["30[0135-9]"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[23]"],"0$1"]],"0"],LB:["961","00","[27-9]\\d{7}|[13-9]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[13-69]|7(?:[2-57]|62|8[0-7]|9[04-9])|8[02-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27-9]"]]],"0"],LC:["1","011","(?:[58]\\d\\d|758|900)\\d{7}",[10],0,"1",0,"([2-8]\\d{6})$|1","758$1",0,"758"],LI:["423","00","[68]\\d{8}|(?:[2378]\\d|90)\\d{5}",[7,9],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2379]|8(?:0[09]|7)","[2379]|8(?:0(?:02|9)|7)"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["69"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]],"0",0,"(1001)|0"],LK:["94","00","[1-9]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[1-689]"],"0$1"]],"0"],LR:["231","00","(?:[245]\\d|33|77|88)\\d{7}|(?:2\\d|[4-6])\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["4[67]|[56]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-578]"],"0$1"]],"0"],LS:["266","00","(?:[256]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2568]"]]]],LT:["370","00","(?:[3469]\\d|52|[78]0)\\d{6}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["52[0-7]"],"(0-$1)",1],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[7-9]"],"0 $1",1],["(\\d{2})(\\d{6})","$1 $2",["37|4(?:[15]|6[1-8])"],"(0-$1)",1],["(\\d{3})(\\d{5})","$1 $2",["[3-6]"],"(0-$1)",1]],"0",0,"[08]"],LU:["352","00","35[013-9]\\d{4,8}|6\\d{8}|35\\d{2,4}|(?:[2457-9]\\d|3[0-46-9])\\d{2,9}",[4,5,6,7,8,9,10,11],[["(\\d{2})(\\d{3})","$1 $2",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["20[2-689]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4",["2(?:[0367]|4[3-8])"]],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["80[01]|90[015]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["20"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4 $5",["2(?:[0367]|4[3-8])"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,5})","$1 $2 $3 $4",["[3-57]|8[13-9]|9(?:0[89]|[2-579])|(?:2|80)[2-9]"]]],0,0,"(15(?:0[06]|1[12]|[35]5|4[04]|6[26]|77|88|99)\\d)"],LV:["371","00","(?:[268]\\d|90)\\d{6}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[269]|8[01]"]]]],LY:["218","00","[2-9]\\d{8}",[9],[["(\\d{2})(\\d{7})","$1-$2",["[2-9]"],"0$1"]],"0"],MA:["212","00","[5-8]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5[45]"],"0$1"],["(\\d{4})(\\d{5})","$1-$2",["5(?:2[2-46-9]|3[3-9]|9)|8(?:0[89]|92)"],"0$1"],["(\\d{2})(\\d{7})","$1-$2",["8"],"0$1"],["(\\d{3})(\\d{6})","$1-$2",["[5-7]"],"0$1"]],"0",0,0,0,0,0,[["5(?:2(?:[0-25-79]\\d|3[1-578]|4[02-46-8]|8[0235-7])|3(?:[0-47]\\d|5[02-9]|6[02-8]|8[014-9]|9[3-9])|(?:4[067]|5[03])\\d)\\d{5}"],["(?:6(?:[0-79]\\d|8[0-247-9])|7(?:[0167]\\d|2[0-4]|5[01]|8[0-3]))\\d{6}"],["80[0-7]\\d{6}"],["89\\d{7}"],0,0,0,0,["(?:592(?:4[0-2]|93)|80[89]\\d\\d)\\d{4}"]]],MC:["377","00","(?:[3489]|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[389]"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"],"0$1"]],"0"],MD:["373","00","(?:[235-7]\\d|[89]0)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["22|3"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[25-7]"],"0$1"]],"0"],ME:["382","00","(?:20|[3-79]\\d)\\d{6}|80\\d{6,7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"0$1"]],"0"],MF:["590","00","590\\d{6}|(?:69|80|9\\d)\\d{7}",[9],0,"0",0,0,0,0,0,[["590(?:0[079]|[14]3|[27][79]|3[03-7]|5[0-268]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-5])\\d{4}"]]],MG:["261","00","[23]\\d{8}",[9],[["(\\d{2})(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3 $4",["[23]"],"0$1"]],"0",0,"([24-9]\\d{6})$|0","20$1"],MH:["692","011","329\\d{4}|(?:[256]\\d|45)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1-$2",["[2-6]"]]],"1"],MK:["389","00","[2-578]\\d{7}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2|34[47]|4(?:[37]7|5[47]|64)"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[347]"],"0$1"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["[58]"],"0$1"]],"0"],ML:["223","00","[24-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]]],MM:["95","00","1\\d{5,7}|95\\d{6}|(?:[4-7]|9[0-46-9])\\d{6,8}|(?:2|8\\d)\\d{5,8}",[6,7,8,9,10],[["(\\d)(\\d{2})(\\d{3})","$1 $2 $3",["16|2"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["[45]|6(?:0[23]|[1-689]|7[235-7])|7(?:[0-4]|5[2-7])|8[1-6]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[4-7]|8[1-35]"],"0$1"],["(\\d)(\\d{3})(\\d{4,6})","$1 $2 $3",["9(?:2[0-4]|[35-9]|4[137-9])"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["92"],"0$1"],["(\\d)(\\d{5})(\\d{4})","$1 $2 $3",["9"],"0$1"]],"0"],MN:["976","001","[12]\\d{7,9}|[5-9]\\d{7}",[8,9,10],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[12]1"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[5-9]"]],["(\\d{3})(\\d{5,6})","$1 $2",["[12]2[1-3]"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["[12](?:27|3[2-8]|4[2-68]|5[1-4689])","[12](?:27|3[2-8]|4[2-68]|5[1-4689])[0-3]"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["[12]"],"0$1"]],"0"],MO:["853","00","0800\\d{3}|(?:28|[68]\\d)\\d{6}",[7,8],[["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{4})(\\d{4})","$1 $2",["[268]"]]]],MP:["1","011","[58]\\d{9}|(?:67|90)0\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","670$1",0,"670"],MQ:["596","00","596\\d{6}|(?:69|80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],MR:["222","00","(?:[2-4]\\d\\d|800)\\d{5}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-48]"]]]],MS:["1","011","(?:[58]\\d\\d|664|900)\\d{7}",[10],0,"1",0,"([34]\\d{6})$|1","664$1",0,"664"],MT:["356","00","3550\\d{4}|(?:[2579]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2357-9]"]]]],MU:["230","0(?:0|[24-7]0|3[03])","(?:[57]|8\\d\\d)\\d{7}|[2-468]\\d{6}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[2-46]|8[013]"]],["(\\d{4})(\\d{4})","$1 $2",["[57]"]],["(\\d{5})(\\d{5})","$1 $2",["8"]]],0,0,0,0,0,0,0,"020"],MV:["960","0(?:0|19)","(?:800|9[0-57-9]\\d)\\d{7}|[34679]\\d{6}",[7,10],[["(\\d{3})(\\d{4})","$1-$2",["[34679]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"]]],0,0,0,0,0,0,0,"00"],MW:["265","00","(?:[1289]\\d|31|77)\\d{7}|1\\d{6}",[7,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["1[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[137-9]"],"0$1"]],"0"],MX:["52","0[09]","[2-9]\\d{9}",[10],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"]]],0,0,0,0,0,0,0,"00"],MY:["60","00","1\\d{8,9}|(?:3\\d|[4-9])\\d{7}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["[4-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1-$2 $3",["1(?:[02469]|[378][1-9]|53)|8","1(?:[02469]|[37][1-9]|53|8(?:[1-46-9]|5[7-9]))|8"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2 $3",["3"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3-$4",["1(?:[367]|80)"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2 $3",["15"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2 $3",["1"],"0$1"]],"0"],MZ:["258","00","(?:2|8\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2|8[2-79]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],NA:["264","00","[68]\\d{7,8}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["87"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],NC:["687","00","(?:050|[2-57-9]\\d\\d)\\d{3}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[02-57-9]"]]]],NE:["227","00","[027-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["08"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[089]|2[013]|7[0467]"]]]],NF:["672","00","[13]\\d{5}",[6],[["(\\d{2})(\\d{4})","$1 $2",["1[0-3]"]],["(\\d)(\\d{5})","$1 $2",["[13]"]]],0,0,"([0-258]\\d{4})$","3$1"],NG:["234","009","38\\d{6}|[78]\\d{9,13}|(?:20|9\\d)\\d{8}",[8,10,11,12,13,14],[["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["3"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[7-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["20[129]"],"0$1"],["(\\d{4})(\\d{2})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[78]"],"0$1"],["(\\d{3})(\\d{5})(\\d{5,6})","$1 $2 $3",["[78]"],"0$1"]],"0"],NI:["505","00","(?:1800|[25-8]\\d{3})\\d{4}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[125-8]"]]]],NL:["31","00","(?:[124-7]\\d\\d|3(?:[02-9]\\d|1[0-8]))\\d{6}|8\\d{6,9}|9\\d{6,10}|1\\d{4,5}",[5,6,7,8,9,10,11],[["(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],["(\\d)(\\d{8})","$1 $2",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-578]|91"],"0$1"],["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3",["9"],"0$1"]],"0"],NO:["47","00","(?:0|[2-9]\\d{3})\\d{4}",[5,8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]"]]],0,0,0,0,0,"[02-689]|7[0-8]"],NP:["977","00","(?:1\\d|9)\\d{9}|[1-9]\\d{7}",[8,10,11],[["(\\d)(\\d{7})","$1-$2",["1[2-6]"],"0$1"],["(\\d{2})(\\d{6})","$1-$2",["1[01]|[2-8]|9(?:[1-59]|[67][2-6])"],"0$1"],["(\\d{3})(\\d{7})","$1-$2",["9"]]],"0"],NR:["674","00","(?:444|(?:55|8\\d)\\d|666)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[4-68]"]]]],NU:["683","00","(?:[4-7]|888\\d)\\d{3}",[4,7],[["(\\d{3})(\\d{4})","$1 $2",["8"]]]],NZ:["64","0(?:0|161)","[1289]\\d{9}|50\\d{5}(?:\\d{2,3})?|[27-9]\\d{7,8}|(?:[34]\\d|6[0-35-9])\\d{6}|8\\d{4,6}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,8})","$1 $2",["8[1-79]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["50[036-8]|8|90","50(?:[0367]|88)|8|90"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["24|[346]|7[2-57-9]|9[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:10|74)|[589]"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1|2[028]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,5})","$1 $2 $3",["2(?:[169]|7[0-35-9])|7"],"0$1"]],"0",0,0,0,0,0,0,"00"],OM:["968","00","(?:1505|[279]\\d{3}|500)\\d{4}|800\\d{5,6}",[7,8,9],[["(\\d{3})(\\d{4,6})","$1 $2",["[58]"]],["(\\d{2})(\\d{6})","$1 $2",["2"]],["(\\d{4})(\\d{4})","$1 $2",["[179]"]]]],PA:["507","00","(?:00800|8\\d{3})\\d{6}|[68]\\d{7}|[1-57-9]\\d{6}",[7,8,10,11],[["(\\d{3})(\\d{4})","$1-$2",["[1-57-9]"]],["(\\d{4})(\\d{4})","$1-$2",["[68]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]]],PE:["51","00|19(?:1[124]|77|90)00","(?:[14-8]|9\\d)\\d{7}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["80"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["1"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[4-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"]]],"0",0,0,0,0,0,0,"00"," Anexo "],PF:["689","00","4\\d{5}(?:\\d{2})?|8\\d{7,8}",[6,8,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["44"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4|8[7-9]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],PG:["675","00|140[1-3]","(?:180|[78]\\d{3})\\d{4}|(?:[2-589]\\d|64)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["18|[2-69]|85"]],["(\\d{4})(\\d{4})","$1 $2",["[78]"]]],0,0,0,0,0,0,0,"00"],PH:["63","00","(?:[2-7]|9\\d)\\d{8}|2\\d{5}|(?:1800|8)\\d{7,9}",[6,8,9,10,11,12,13],[["(\\d)(\\d{5})","$1 $2",["2"],"(0$1)"],["(\\d{4})(\\d{4,6})","$1 $2",["3(?:23|39|46)|4(?:2[3-6]|[35]9|4[26]|76)|544|88[245]|(?:52|64|86)2","3(?:230|397|461)|4(?:2(?:35|[46]4|51)|396|4(?:22|63)|59[347]|76[15])|5(?:221|446)|642[23]|8(?:622|8(?:[24]2|5[13]))"],"(0$1)"],["(\\d{5})(\\d{4})","$1 $2",["346|4(?:27|9[35])|883","3469|4(?:279|9(?:30|56))|8834"],"(0$1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|8[2-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{4})(\\d{1,2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["1"]]],"0"],PK:["92","00","122\\d{6}|[24-8]\\d{10,11}|9(?:[013-9]\\d{8,10}|2(?:[01]\\d\\d|2(?:[06-8]\\d|1[01]))\\d{7})|(?:[2-8]\\d{3}|92(?:[0-7]\\d|8[1-9]))\\d{6}|[24-9]\\d{8}|[89]\\d{7}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,7})","$1 $2 $3",["[89]0"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["1"]],["(\\d{3})(\\d{6,7})","$1 $2",["2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])","9(?:2[3-8]|98)|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]"],"(0$1)"],["(\\d{2})(\\d{7,8})","$1 $2",["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],"(0$1)"],["(\\d{5})(\\d{5})","$1 $2",["58"],"(0$1)"],["(\\d{3})(\\d{7})","$1 $2",["3"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[24-9]"],"(0$1)"]],"0"],PL:["48","00","(?:6|8\\d\\d)\\d{7}|[1-9]\\d{6}(?:\\d{2})?|[26]\\d{5}",[6,7,8,9,10],[["(\\d{5})","$1",["19"]],["(\\d{3})(\\d{3})","$1 $2",["11|20|64"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])1","(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])19"]],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["64"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["21|39|45|5[0137]|6[0469]|7[02389]|8(?:0[14]|8)"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[2-8]|[2-7]|8[1-79]|9[145]"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["8"]]]],PM:["508","00","[45]\\d{5}|(?:708|80\\d)\\d{6}",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[45]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],PR:["1","011","(?:[589]\\d\\d|787)\\d{7}",[10],0,"1",0,0,0,0,"787|939"],PS:["970","00","[2489]2\\d{6}|(?:1\\d|5)\\d{8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2489]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["5"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],PT:["351","00","1693\\d{5}|(?:[26-9]\\d|30)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["2[12]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["16|[236-9]"]]]],PW:["680","01[12]","(?:[24-8]\\d\\d|345|900)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],PY:["595","00","59\\d{4,6}|9\\d{5,10}|(?:[2-46-8]\\d|5[0-8])\\d{4,7}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3,6})","$1 $2",["[2-9]0"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],"(0$1)"],["(\\d{3})(\\d{4,5})","$1 $2",["2[279]|3[13-5]|4[359]|5|6(?:[34]|7[1-46-8])|7[46-8]|85"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2[14-68]|3[26-9]|4[1246-8]|6(?:1|75)|7[1-35]|8[1-36]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["87"]],["(\\d{3})(\\d{6})","$1 $2",["9(?:[5-79]|8[1-7])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["9"]]],"0"],QA:["974","00","800\\d{4}|(?:2|800)\\d{6}|(?:0080|[3-7])\\d{7}",[7,8,9,11],[["(\\d{3})(\\d{4})","$1 $2",["2[16]|8"]],["(\\d{4})(\\d{4})","$1 $2",["[3-7]"]]]],RE:["262","00","(?:26|[689]\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2689]"],"0$1"]],"0",0,0,0,0,0,[["26(?:2\\d\\d|3(?:0\\d|1[0-6]))\\d{4}"],["69(?:2\\d\\d|3(?:[06][0-6]|1[013]|2[0-2]|3[0-39]|4\\d|5[0-5]|7[0-37]|8[0-8]|9[0-479]))\\d{4}"],["80\\d{7}"],["89[1-37-9]\\d{6}"],0,0,0,0,["9(?:399[0-3]|479[0-5]|76(?:2[278]|3[0-37]))\\d{4}"],["8(?:1[019]|2[0156]|84|90)\\d{6}"]]],RO:["40","00","(?:[236-8]\\d|90)\\d{7}|[23]\\d{5}",[6,9],[["(\\d{3})(\\d{3})","$1 $2",["2[3-6]","2[3-6]\\d9"],"0$1"],["(\\d{2})(\\d{4})","$1 $2",["219|31"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23]1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[236-9]"],"0$1"]],"0",0,0,0,0,0,0,0," int "],RS:["381","00","38[02-9]\\d{6,9}|6\\d{7,9}|90\\d{4,8}|38\\d{5,6}|(?:7\\d\\d|800)\\d{3,9}|(?:[12]\\d|3[0-79])\\d{5,10}",[6,7,8,9,10,11,12],[["(\\d{3})(\\d{3,9})","$1 $2",["(?:2[389]|39)0|[7-9]"],"0$1"],["(\\d{2})(\\d{5,10})","$1 $2",["[1-36]"],"0$1"]],"0"],RU:["7","810","8\\d{13}|[347-9]\\d{9}",[10,14],[["(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",1],["(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[349]|8(?:[02-7]|1[1-8])"],"8 ($1)",1],["(\\d{4})(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3 $4",["8"],"8 ($1)"]],"8",0,0,0,0,"3[04-689]|[489]",0,"8~10"],RW:["250","00","(?:06|[27]\\d\\d|[89]00)\\d{6}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[7-9]"],"0$1"]],"0"],SA:["966","00","92\\d{7}|(?:[15]|8\\d)\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["9"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["81"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],"0"],SB:["677","0[01]","[6-9]\\d{6}|[1-6]\\d{4}",[5,7],[["(\\d{2})(\\d{5})","$1 $2",["6[89]|7|8[4-9]|9(?:[1-8]|9[0-8])"]]]],SC:["248","010|0[0-2]","(?:[2489]\\d|64)\\d{5}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[246]|9[57]"]]],0,0,0,0,0,0,0,"00"],SD:["249","00","[19]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[19]"],"0$1"]],"0"],SE:["46","00","(?:[26]\\d\\d|9)\\d{9}|[1-9]\\d{8}|[1-689]\\d{7}|[1-4689]\\d{6}|2\\d{5}",[6,7,8,9,10,12],[["(\\d{2})(\\d{2,3})(\\d{2})","$1-$2 $3",["20"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{4})","$1-$2",["9(?:00|39|44|9)"],"0$1",0,"$1 $2"],["(\\d{2})(\\d{3})(\\d{2})","$1-$2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3"],["(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2,3})(\\d{2})","$1-$2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{2,3})(\\d{3})","$1-$2 $3",["9(?:00|39|44)"],"0$1",0,"$1 $2 $3"],["(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3 $4"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["10|7"],"0$1",0,"$1 $2 $3 $4"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1-$2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1-$2 $3 $4",["9"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4 $5",["[26]"],"0$1",0,"$1 $2 $3 $4 $5"]],"0"],SG:["65","0[0-3]\\d","(?:(?:1\\d|8)\\d\\d|7000)\\d{7}|[3689]\\d{7}",[8,10,11],[["(\\d{4})(\\d{4})","$1 $2",["[369]|8(?:0[1-9]|[1-9])"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],["(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],SH:["290","00","(?:[256]\\d|8)\\d{3}",[4,5],0,0,0,0,0,0,"[256]"],SI:["386","00|10(?:22|66|88|99)","[1-7]\\d{7}|8\\d{4,7}|90\\d{4,6}",[5,6,7,8],[["(\\d{2})(\\d{3,6})","$1 $2",["8[09]|9"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["59|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37][01]|4[0139]|51|6"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-57]"],"(0$1)"]],"0",0,0,0,0,0,0,"00"],SJ:["47","00","0\\d{4}|(?:[489]\\d|79)\\d{6}",[5,8],0,0,0,0,0,0,"79"],SK:["421","00","[2-689]\\d{8}|[2-59]\\d{6}|[2-5]\\d{5}",[6,7,9],[["(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],"0"],SL:["232","00","(?:[237-9]\\d|66)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[236-9]"],"(0$1)"]],"0"],SM:["378","00","(?:0549|[5-7]\\d)\\d{6}",[8,10],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],["(\\d{4})(\\d{6})","$1 $2",["0"]]],0,0,"([89]\\d{5})$","0549$1"],SN:["221","00","(?:[378]\\d|93)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[379]"]]]],SO:["252","00","[346-9]\\d{8}|[12679]\\d{7}|[1-5]\\d{6}|[1348]\\d{5}",[6,7,8,9],[["(\\d{2})(\\d{4})","$1 $2",["8[125]"]],["(\\d{6})","$1",["[134]"]],["(\\d)(\\d{6})","$1 $2",["[15]|2[0-79]|3[0-46-8]|4[0-7]"]],["(\\d)(\\d{7})","$1 $2",["(?:2|90)4|[67]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[348]|64|79|90"]],["(\\d{2})(\\d{5,7})","$1 $2",["1|28|6[0-35-9]|77|9[2-9]"]]],"0"],SR:["597","00","(?:[2-5]|68|[78]\\d)\\d{5}",[6,7],[["(\\d{2})(\\d{2})(\\d{2})","$1-$2-$3",["56"]],["(\\d{3})(\\d{3})","$1-$2",["[2-5]"]],["(\\d{3})(\\d{4})","$1-$2",["[6-8]"]]]],SS:["211","00","[19]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[19]"],"0$1"]],"0"],ST:["239","00","(?:22|9\\d)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[29]"]]]],SV:["503","00","[267]\\d{7}|(?:80\\d|900)\\d{4}(?:\\d{4})?",[7,8,11],[["(\\d{3})(\\d{4})","$1 $2",["[89]"]],["(\\d{4})(\\d{4})","$1 $2",["[267]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[89]"]]]],SX:["1","011","7215\\d{6}|(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"(5\\d{6})$|1","721$1",0,"721"],SY:["963","00","[1-39]\\d{8}|[1-5]\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-5]"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1",1]],"0"],SZ:["268","00","0800\\d{4}|(?:[237]\\d|900)\\d{6}",[8,9],[["(\\d{4})(\\d{4})","$1 $2",["[0237]"]],["(\\d{5})(\\d{4})","$1 $2",["9"]]]],TA:["290","00","8\\d{3}",[4],0,0,0,0,0,0,"8"],TC:["1","011","(?:[58]\\d\\d|649|900)\\d{7}",[10],0,"1",0,"([2-479]\\d{6})$|1","649$1",0,"649"],TD:["235","00|16","(?:22|[689]\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[26-9]"]]],0,0,0,0,0,0,0,"00"],TG:["228","00","[279]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[279]"]]]],TH:["66","00[1-9]","(?:001800|[2-57]|[689]\\d)\\d{7}|1\\d{7,9}",[8,9,10,13],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[13-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],TJ:["992","810","[0-57-9]\\d{8}",[9],[["(\\d{6})(\\d)(\\d{2})","$1 $2 $3",["331","3317"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["44[02-479]|[34]7"]],["(\\d{4})(\\d)(\\d{4})","$1 $2 $3",["3(?:[1245]|3[12])"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[0-57-9]"]]],0,0,0,0,0,0,0,"8~10"],TK:["690","00","[2-47]\\d{3,6}",[4,5,6,7]],TL:["670","00","7\\d{7}|(?:[2-47]\\d|[89]0)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[2-489]|70"]],["(\\d{4})(\\d{4})","$1 $2",["7"]]]],TM:["993","810","(?:[1-6]\\d|71)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["12"],"(8 $1)"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-5]"],"(8 $1)"],["(\\d{2})(\\d{6})","$1 $2",["[67]"],"8 $1"]],"8",0,0,0,0,0,0,"8~10"],TN:["216","00","[2-57-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-57-9]"]]]],TO:["676","00","(?:0800|(?:[5-8]\\d\\d|999)\\d)\\d{3}|[2-8]\\d{4}",[5,7],[["(\\d{2})(\\d{3})","$1-$2",["[2-4]|50|6[09]|7[0-24-69]|8[05]"]],["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[5-9]"]]]],TR:["90","00","4\\d{6}|8\\d{11,12}|(?:[2-58]\\d\\d|900)\\d{7}",[7,10,12,13],[["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[01589]|90"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|61[06])","5(?:[0-59]|61[06]1)"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",1],["(\\d{3})(\\d{3})(\\d{6,7})","$1 $2 $3",["80"],"0$1",1]],"0"],TT:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-46-8]\\d{6})$|1","868$1",0,"868"],TV:["688","00","(?:2|7\\d\\d|90)\\d{4}",[5,6,7],[["(\\d{2})(\\d{3})","$1 $2",["2"]],["(\\d{2})(\\d{4})","$1 $2",["90"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],TW:["886","0(?:0[25-79]|19)","[2-689]\\d{8}|7\\d{9,10}|[2-8]\\d{7}|2\\d{6}",[7,8,9,10,11],[["(\\d{2})(\\d)(\\d{4})","$1 $2 $3",["202"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[258]0"],"0$1"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["[23568]|4(?:0[02-48]|[1-47-9])|7[1-9]","[23568]|4(?:0[2-48]|[1-47-9])|(?:400|7)[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,5})","$1 $2 $3",["7"],"0$1"]],"0",0,0,0,0,0,0,0,"#"],TZ:["255","00[056]","(?:[25-8]\\d|41|90)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[24]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["5"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[67]"],"0$1"]],"0"],UA:["380","00","[89]\\d{9}|[3-9]\\d{8}",[9,10],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6[12][29]|(?:3[1-8]|4[136-8]|5[12457]|6[49])2|(?:56|65)[24]","6[12][29]|(?:35|4[1378]|5[12457]|6[49])2|(?:56|65)[24]|(?:3[1-46-8]|46)2[013-9]"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6[0135689]|7[4-6])|6(?:[12][3-7]|[459])","3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6(?:[015689]|3[02389])|7[4-6])|6(?:[12][3-7]|[459])"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|89|9[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0",0,0,0,0,0,0,"0~0"],UG:["256","00[057]","800\\d{6}|(?:[29]0|[347]\\d)\\d{7}",[9],[["(\\d{4})(\\d{5})","$1 $2",["202","2024"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[27-9]|4(?:6[45]|[7-9])"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[34]"],"0$1"]],"0"],US:["1","011","[2-9]\\d{9}|3\\d{6}",[10],[["(\\d{3})(\\d{4})","$1-$2",["310"],0,1],["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",["[2-9]"],0,1,"$1-$2-$3"]],"1",0,0,0,0,0,[["(?:3052(?:0[0-8]|[1-9]\\d)|5056(?:[0-35-9]\\d|4[468])|7302[0-4]\\d)\\d{4}|(?:305[3-9]|472[24]|505[2-57-9]|7306|983[2-47-9])\\d{6}|(?:2(?:0[1-35-9]|1[02-9]|2[03-57-9]|3[1459]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-47-9]|1[02-9]|2[013569]|3[0-24679]|4[167]|5[0-2]|6[01349]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[023578]|58|6[349]|7[0589]|8[04])|5(?:0[1-47-9]|1[0235-8]|20|3[0149]|4[01]|5[179]|6[1-47]|7[0-5]|8[0256])|6(?:0[1-35-9]|1[024-9]|2[03689]|3[016]|4[0156]|5[01679]|6[0-279]|78|8[0-29])|7(?:0[1-46-8]|1[2-9]|2[04-8]|3[1247]|4[037]|5[47]|6[02359]|7[0-59]|8[156])|8(?:0[1-68]|1[02-8]|2[068]|3[0-2589]|4[03578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[01357-9]|5[12469]|7[0-389]|8[04-69]))[2-9]\\d{6}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"],0,0,0,["305209\\d{4}"]]],UY:["598","0(?:0|1[3-9]\\d)","0004\\d{2,9}|[1249]\\d{7}|(?:[49]\\d|80)\\d{5}",[6,7,8,9,10,11,12,13],[["(\\d{3})(\\d{3,4})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[49]0|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[124]"]],["(\\d{3})(\\d{3})(\\d{2,4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{2,4})","$1 $2 $3 $4",["0"]]],"0",0,0,0,0,0,0,"00"," int. "],UZ:["998","00","(?:20|33|[5-79]\\d|88)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[235-9]"]]]],VA:["39","00","0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",[6,7,8,9,10,11,12],0,0,0,0,0,0,"06698"],VC:["1","011","(?:[58]\\d\\d|784|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","784$1",0,"784"],VE:["58","00","[68]00\\d{7}|(?:[24]\\d|[59]0)\\d{8}",[10],[["(\\d{3})(\\d{7})","$1-$2",["[24-689]"],"0$1"]],"0"],VG:["1","011","(?:284|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-578]\\d{6})$|1","284$1",0,"284"],VI:["1","011","[58]\\d{9}|(?:34|90)0\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","340$1",0,"340"],VN:["84","00","[12]\\d{9}|[135-9]\\d{8}|[16]\\d{7}|[16-8]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",1],["(\\d{4})(\\d{4,6})","$1 $2",["1"],0,1],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["6"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[357-9]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",1]],"0"],VU:["678","00","[57-9]\\d{6}|(?:[238]\\d|48)\\d{3}",[5,7],[["(\\d{3})(\\d{4})","$1 $2",["[57-9]"]]]],WF:["681","00","(?:40|72)\\d{4}|8\\d{5}(?:\\d{3})?",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[478]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],WS:["685","0","(?:[2-6]|8\\d{5})\\d{4}|[78]\\d{6}|[68]\\d{5}",[5,6,7,10],[["(\\d{5})","$1",["[2-5]|6[1-9]"]],["(\\d{3})(\\d{3,7})","$1 $2",["[68]"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],XK:["383","00","2\\d{7,8}|3\\d{7,11}|(?:4\\d\\d|[89]00)\\d{5}",[8,9,10,11,12],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2|39"],"0$1"],["(\\d{2})(\\d{7,10})","$1 $2",["3"],"0$1"]],"0"],YE:["967","00","(?:1|7\\d)\\d{7}|[1-7]\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-6]|7(?:[24-6]|8[0-7])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"],"0$1"]],"0"],YT:["262","00","(?:80|9\\d)\\d{7}|(?:26|63)9\\d{6}",[9],0,"0",0,0,0,0,0,[["269(?:0[0-467]|15|5[0-4]|6\\d|[78]0)\\d{4}"],["639(?:0[0-79]|1[019]|[267]\\d|3[09]|40|5[05-9]|9[04-79])\\d{4}"],["80\\d{7}"],0,0,0,0,0,["9(?:(?:39|47)8[01]|769\\d)\\d{4}"]]],ZA:["27","00","[1-79]\\d{8}|8\\d{4,9}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,4})","$1 $2",["8[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["8[1-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["860"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],ZM:["260","00","800\\d{6}|(?:21|63|[79]\\d)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[79]"],"0$1"]],"0"],ZW:["263","00","2(?:[0-57-9]\\d{6,8}|6[0-24-9]\\d{6,7})|[38]\\d{9}|[35-8]\\d{8}|[3-6]\\d{7}|[1-689]\\d{6}|[1-3569]\\d{5}|[1356]\\d{4}",[5,6,7,8,9,10],[["(\\d{3})(\\d{3,5})","$1 $2",["2(?:0[45]|2[278]|[49]8)|3(?:[09]8|17)|6(?:[29]8|37|75)|[23][78]|(?:33|5[15]|6[68])[78]"],"0$1"],["(\\d)(\\d{3})(\\d{2,4})","$1 $2 $3",["[49]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["80"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["24|8[13-59]|(?:2[05-79]|39|5[45]|6[15-8])2","2(?:02[014]|4|[56]20|[79]2)|392|5(?:42|525)|6(?:[16-8]21|52[013])|8[13-59]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:1[39]|2[0157]|[378]|[56][14])|3(?:12|29)","2(?:1[39]|2[0157]|[378]|[56][14])|3(?:123|29)"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["1|2(?:0[0-36-9]|12|29|[56])|3(?:1[0-689]|[24-6])|5(?:[0236-9]|1[2-4])|6(?:[013-59]|7[0-46-9])|(?:33|55|6[68])[0-69]|(?:29|3[09]|62)[0-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["29[013-9]|39|54"],"0$1"],["(\\d{4})(\\d{3,5})","$1 $2",["(?:25|54)8","258|5483"],"0$1"]],"0"]},nonGeographic:{800:["800",0,"(?:00|[1-9]\\d)\\d{6}",[8],[["(\\d{4})(\\d{4})","$1 $2",["\\d"]]],0,0,0,0,0,0,[0,0,["(?:00|[1-9]\\d)\\d{6}"]]],808:["808",0,"[1-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[1-9]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,0,["[1-9]\\d{7}"]]],870:["870",0,"7\\d{11}|[35-7]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[35-7]"]]],0,0,0,0,0,0,[0,["(?:[356]|774[45])\\d{8}|7[6-8]\\d{7}"]]],878:["878",0,"10\\d{10}",[12],[["(\\d{2})(\\d{5})(\\d{5})","$1 $2 $3",["1"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["10\\d{10}"]]],881:["881",0,"6\\d{9}|[0-36-9]\\d{8}",[9,10],[["(\\d)(\\d{3})(\\d{5})","$1 $2 $3",["[0-37-9]"]],["(\\d)(\\d{3})(\\d{5,6})","$1 $2 $3",["6"]]],0,0,0,0,0,0,[0,["6\\d{9}|[0-36-9]\\d{8}"]]],882:["882",0,"[13]\\d{6}(?:\\d{2,5})?|[19]\\d{7}|(?:[25]\\d\\d|4)\\d{7}(?:\\d{2})?",[7,8,9,10,11,12],[["(\\d{2})(\\d{5})","$1 $2",["16|342"]],["(\\d{2})(\\d{6})","$1 $2",["49"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["1[36]|9"]],["(\\d{2})(\\d{4})(\\d{3})","$1 $2 $3",["3[23]"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["16"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|23|3(?:[15]|4[57])|4|51"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["34"]],["(\\d{2})(\\d{4,5})(\\d{5})","$1 $2 $3",["[1-35]"]]],0,0,0,0,0,0,[0,["342\\d{4}|(?:337|49)\\d{6}|(?:3(?:2|47|7\\d{3})|50\\d{3})\\d{7}",[7,8,9,10,12]],0,0,0,["348[57]\\d{7}",[11]],0,0,["1(?:3(?:0[0347]|[13][0139]|2[035]|4[013568]|6[0459]|7[06]|8[15-8]|9[0689])\\d{4}|6\\d{5,10})|(?:345\\d|9[89])\\d{6}|(?:10|2(?:3|85\\d)|3(?:[15]|[69]\\d\\d)|4[15-8]|51)\\d{8}"]]],883:["883",0,"(?:[1-4]\\d|51)\\d{6,10}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,8})","$1 $2 $3",["[14]|2[24-689]|3[02-689]|51[24-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["510"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["21"]],["(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3",["51[13]"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[235]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["(?:2(?:00\\d\\d|10)|(?:370[1-9]|51\\d0)\\d)\\d{7}|51(?:00\\d{5}|[24-9]0\\d{4,7})|(?:1[0-79]|2[24-689]|3[02-689]|4[0-4])0\\d{5,9}"]]],888:["888",0,"\\d{11}",[11],[["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3"]],0,0,0,0,0,0,[0,0,0,0,0,0,["\\d{11}"]]],979:["979",0,"[1359]\\d{8}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[1359]"]]],0,0,0,0,0,0,[0,0,0,["[1359]\\d{8}"]]]}};function kE(t,n){var a=Array.prototype.slice.call(n);return a.push(zF),t.apply(this,a)}function rv(t){"@babel/helpers - typeof";return rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},rv(t)}function YF(t,n,a){return Object.defineProperty(t,"prototype",{writable:!1}),t}function KF(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function XF(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&Du(t,n)}function qF(t){var n=Lx();return function(){var e=Pu(t),s;if(n){var r=Pu(this).constructor;s=Reflect.construct(e,arguments,r)}else s=e.apply(this,arguments);return ZF(this,s)}}function ZF(t,n){if(n&&(rv(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mx(t)}function Mx(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iv(t){var n=typeof Map=="function"?new Map:void 0;return iv=function(e){if(e===null||!QF(e))return e;if(typeof e!="function")throw new TypeError("Super expression must either be null or a function");if(typeof n<"u"){if(n.has(e))return n.get(e);n.set(e,s)}function s(){return _f(e,arguments,Pu(this).constructor)}return s.prototype=Object.create(e.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),Du(s,e)},iv(t)}function _f(t,n,a){return Lx()?_f=Reflect.construct:_f=function(s,r,o){var i=[null];i.push.apply(i,r);var l=Function.bind.apply(s,i),c=new l;return o&&Du(c,o.prototype),c},_f.apply(null,arguments)}function Lx(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function QF(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function Du(t,n){return Du=Object.setPrototypeOf||function(e,s){return e.__proto__=s,e},Du(t,n)}function Pu(t){return Pu=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},Pu(t)}var kr=function(t){XF(a,t);var n=qF(a);function a(e){var s;return KF(this,a),s=n.call(this,e),Object.setPrototypeOf(Mx(s),a.prototype),s.name=s.constructor.name,s}return YF(a)}(iv(Error)),BE=2,JF=17,eU=3,Jo="0-9---",tU="--",nU="/",aU=".",sU=" ",oU="()\\[\\]",rU="~",om="".concat(tU).concat(nU).concat(aU).concat(sU).concat(oU).concat(rU),FE="+";function gy(t,n){t=t.split("-"),n=n.split("-");for(var a=t[0].split("."),e=n[0].split("."),s=0;s<3;s++){var r=Number(a[s]),o=Number(e[s]);if(r>o)return 1;if(o>r)return-1;if(!isNaN(r)&&isNaN(o))return 1;if(isNaN(r)&&!isNaN(o))return-1}return t[1]&&n[1]?t[1]>n[1]?1:t[1]<n[1]?-1:0:!t[1]&&n[1]?1:t[1]&&!n[1]?-1:0}var iU={}.constructor;function gf(t){return t!=null&&t.constructor===iU}function lv(t){"@babel/helpers - typeof";return lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},lv(t)}function gh(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function lU(t,n){for(var a=0;a<n.length;a++){var e=n[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function bh(t,n,a){return n&&lU(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var cU="1.2.0",dU="1.7.35",by=" ext. ",uU=/^\d+$/,Ms=function(){function t(n){gh(this,t),hU(n),this.metadata=n,Dx.call(this,n)}return bh(t,[{key:"getCountries",value:function(){return Object.keys(this.metadata.countries).filter(function(a){return a!=="001"})}},{key:"getCountryMetadata",value:function(a){return this.metadata.countries[a]}},{key:"nonGeographic",value:function(){if(!(this.v1||this.v2||this.v3))return this.metadata.nonGeographic||this.metadata.nonGeographical}},{key:"hasCountry",value:function(a){return this.getCountryMetadata(a)!==void 0}},{key:"hasCallingCode",value:function(a){if(this.getCountryCodesForCallingCode(a))return!0;if(this.nonGeographic()){if(this.nonGeographic()[a])return!0}else{var e=this.countryCallingCodes()[a];if(e&&e.length===1&&e[0]==="001")return!0}}},{key:"isNonGeographicCallingCode",value:function(a){return this.nonGeographic()?!!this.nonGeographic()[a]:!this.getCountryCodesForCallingCode(a)}},{key:"country",value:function(a){return this.selectNumberingPlan(a)}},{key:"selectNumberingPlan",value:function(a,e){if(a&&uU.test(a)&&(e=a,a=null),a&&a!=="001"){if(!this.hasCountry(a))throw new Error("Unknown country: ".concat(a));this.numberingPlan=new vy(this.getCountryMetadata(a),this)}else if(e){if(!this.hasCallingCode(e))throw new Error("Unknown calling code: ".concat(e));this.numberingPlan=new vy(this.getNumberingPlanMetadata(e),this)}else this.numberingPlan=void 0;return this}},{key:"getCountryCodesForCallingCode",value:function(a){var e=this.countryCallingCodes()[a];if(e)return e.length===1&&e[0].length===3?void 0:e}},{key:"getCountryCodeForCallingCode",value:function(a){var e=this.getCountryCodesForCallingCode(a);if(e)return e[0]}},{key:"getNumberingPlanMetadata",value:function(a){var e=this.getCountryCodeForCallingCode(a);if(e)return this.getCountryMetadata(e);if(this.nonGeographic()){var s=this.nonGeographic()[a];if(s)return s}else{var r=this.countryCallingCodes()[a];if(r&&r.length===1&&r[0]==="001")return this.metadata.countries["001"]}}},{key:"countryCallingCode",value:function(){return this.numberingPlan.callingCode()}},{key:"IDDPrefix",value:function(){return this.numberingPlan.IDDPrefix()}},{key:"defaultIDDPrefix",value:function(){return this.numberingPlan.defaultIDDPrefix()}},{key:"nationalNumberPattern",value:function(){return this.numberingPlan.nationalNumberPattern()}},{key:"possibleLengths",value:function(){return this.numberingPlan.possibleLengths()}},{key:"formats",value:function(){return this.numberingPlan.formats()}},{key:"nationalPrefixForParsing",value:function(){return this.numberingPlan.nationalPrefixForParsing()}},{key:"nationalPrefixTransformRule",value:function(){return this.numberingPlan.nationalPrefixTransformRule()}},{key:"leadingDigits",value:function(){return this.numberingPlan.leadingDigits()}},{key:"hasTypes",value:function(){return this.numberingPlan.hasTypes()}},{key:"type",value:function(a){return this.numberingPlan.type(a)}},{key:"ext",value:function(){return this.numberingPlan.ext()}},{key:"countryCallingCodes",value:function(){return this.v1?this.metadata.country_phone_code_to_countries:this.metadata.country_calling_codes}},{key:"chooseCountryByCountryCallingCode",value:function(a){return this.selectNumberingPlan(a)}},{key:"hasSelectedNumberingPlan",value:function(){return this.numberingPlan!==void 0}}]),t}(),vy=function(){function t(n,a){gh(this,t),this.globalMetadataObject=a,this.metadata=n,Dx.call(this,a.metadata)}return bh(t,[{key:"callingCode",value:function(){return this.metadata[0]}},{key:"getDefaultCountryMetadataForRegion",value:function(){return this.globalMetadataObject.getNumberingPlanMetadata(this.callingCode())}},{key:"IDDPrefix",value:function(){if(!(this.v1||this.v2))return this.metadata[1]}},{key:"defaultIDDPrefix",value:function(){if(!(this.v1||this.v2))return this.metadata[12]}},{key:"nationalNumberPattern",value:function(){return this.v1||this.v2?this.metadata[1]:this.metadata[2]}},{key:"possibleLengths",value:function(){if(!this.v1)return this.metadata[this.v2?2:3]}},{key:"_getFormats",value:function(a){return a[this.v1?2:this.v2?3:4]}},{key:"formats",value:function(){var a=this,e=this._getFormats(this.metadata)||this._getFormats(this.getDefaultCountryMetadataForRegion())||[];return e.map(function(s){return new pU(s,a)})}},{key:"nationalPrefix",value:function(){return this.metadata[this.v1?3:this.v2?4:5]}},{key:"_getNationalPrefixFormattingRule",value:function(a){return a[this.v1?4:this.v2?5:6]}},{key:"nationalPrefixFormattingRule",value:function(){return this._getNationalPrefixFormattingRule(this.metadata)||this._getNationalPrefixFormattingRule(this.getDefaultCountryMetadataForRegion())}},{key:"_nationalPrefixForParsing",value:function(){return this.metadata[this.v1?5:this.v2?6:7]}},{key:"nationalPrefixForParsing",value:function(){return this._nationalPrefixForParsing()||this.nationalPrefix()}},{key:"nationalPrefixTransformRule",value:function(){return this.metadata[this.v1?6:this.v2?7:8]}},{key:"_getNationalPrefixIsOptionalWhenFormatting",value:function(){return!!this.metadata[this.v1?7:this.v2?8:9]}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return this._getNationalPrefixIsOptionalWhenFormatting(this.metadata)||this._getNationalPrefixIsOptionalWhenFormatting(this.getDefaultCountryMetadataForRegion())}},{key:"leadingDigits",value:function(){return this.metadata[this.v1?8:this.v2?9:10]}},{key:"types",value:function(){return this.metadata[this.v1?9:this.v2?10:11]}},{key:"hasTypes",value:function(){return this.types()&&this.types().length===0?!1:!!this.types()}},{key:"type",value:function(a){if(this.hasTypes()&&Ey(this.types(),a))return new mU(Ey(this.types(),a),this)}},{key:"ext",value:function(){return this.v1||this.v2?by:this.metadata[13]||by}}]),t}(),pU=function(){function t(n,a){gh(this,t),this._format=n,this.metadata=a}return bh(t,[{key:"pattern",value:function(){return this._format[0]}},{key:"format",value:function(){return this._format[1]}},{key:"leadingDigitsPatterns",value:function(){return this._format[2]||[]}},{key:"nationalPrefixFormattingRule",value:function(){return this._format[3]||this.metadata.nationalPrefixFormattingRule()}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return!!this._format[4]||this.metadata.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"nationalPrefixIsMandatoryWhenFormattingInNationalFormat",value:function(){return this.usesNationalPrefix()&&!this.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"usesNationalPrefix",value:function(){return!!(this.nationalPrefixFormattingRule()&&!fU.test(this.nationalPrefixFormattingRule()))}},{key:"internationalFormat",value:function(){return this._format[5]||this.format()}}]),t}(),fU=/^\(?\$1\)?$/,mU=function(){function t(n,a){gh(this,t),this.type=n,this.metadata=a}return bh(t,[{key:"pattern",value:function(){return this.metadata.v1?this.type:this.type[0]}},{key:"possibleLengths",value:function(){if(!this.metadata.v1)return this.type[1]||this.metadata.possibleLengths()}}]),t}();function Ey(t,n){switch(n){case"FIXED_LINE":return t[0];case"MOBILE":return t[1];case"TOLL_FREE":return t[2];case"PREMIUM_RATE":return t[3];case"PERSONAL_NUMBER":return t[4];case"VOICEMAIL":return t[5];case"UAN":return t[6];case"PAGER":return t[7];case"VOIP":return t[8];case"SHARED_COST":return t[9]}}function hU(t){if(!t)throw new Error("[libphonenumber-js] `metadata` argument not passed. Check your arguments.");if(!gf(t)||!gf(t.countries))throw new Error("[libphonenumber-js] `metadata` argument was passed but it's not a valid metadata. Must be an object having `.countries` child object property. Got ".concat(gf(t)?"an object of shape: { "+Object.keys(t).join(", ")+" }":"a "+_U(t)+": "+t,"."))}var _U=function(n){return lv(n)};function UE(t,n){if(n=new Ms(n),n.hasCountry(t))return n.country(t).countryCallingCode();throw new Error("Unknown country: ".concat(t))}function gU(t,n){return n.countries.hasOwnProperty(t)}function Dx(t){var n=t.version;typeof n=="number"?(this.v1=n===1,this.v2=n===2,this.v3=n===3,this.v4=n===4):n?gy(n,cU)===-1?this.v2=!0:gy(n,dU)===-1?this.v3=!0:this.v4=!0:this.v1=!0}var bU=";ext=",ac=function(n){return"([".concat(Jo,"]{1,").concat(n,"})")};function Px(t){var n="20",a="15",e="9",s="6",r="[ \\t,]*",o="[:\\.]?[ \\t,-]*",i="#?",l="(?:e?xt(?:ensi(?:o?|))?n?|??||anexo)",c="(?:[x#~]|int|)",d="[- ]+",u="[ \\t]*",m="(?:,{2}|;)",h=bU+ac(n),_=r+l+o+ac(n)+i,E=r+c+o+ac(e)+i,y=d+ac(s)+"#",b=u+m+o+ac(a)+i,A=u+"(?:,)+"+o+ac(e)+i;return h+"|"+_+"|"+E+"|"+y+"|"+b+"|"+A}var vU="["+Jo+"]{"+BE+"}",EU="["+FE+"]{0,1}(?:["+om+"]*["+Jo+"]){3,}["+om+Jo+"]*",SU=new RegExp("^["+FE+"]{0,1}(?:["+om+"]*["+Jo+"]){1,2}$","i"),TU=EU+"(?:"+Px()+")?",AU=new RegExp("^"+vU+"$|^"+TU+"$","i");function yU(t){return t.length>=BE&&AU.test(t)}function IU(t){return SU.test(t)}var Sy=new RegExp("(?:"+Px()+")$","i");function CU(t){var n=t.search(Sy);if(n<0)return{};for(var a=t.slice(0,n),e=t.match(Sy),s=1;s<e.length;){if(e[s])return{number:a,ext:e[s]};s++}}var OU={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9"};function NU(t){return OU[t]}function xU(t,n){var a=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a)return(a=a.call(t)).next.bind(a);if(Array.isArray(t)||(a=RU(t))||n){a&&(t=a);var e=0;return function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RU(t,n){if(t){if(typeof t=="string")return Ty(t,n);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ty(t,n)}}function Ty(t,n){(n==null||n>t.length)&&(n=t.length);for(var a=0,e=new Array(n);a<n;a++)e[a]=t[a];return e}function Ay(t){for(var n="",a=xU(t.split("")),e;!(e=a()).done;){var s=e.value;n+=wU(s,n)||""}return n}function wU(t,n,a){return t==="+"?n?void 0:"+":NU(t)}function $E(t,n){return MU(t,void 0,n)}function MU(t,n,a){var e=a.type(n),s=e&&e.possibleLengths()||a.possibleLengths();if(!s)return"IS_POSSIBLE";var r=t.length,o=s[0];return o===r?"IS_POSSIBLE":o>r?"TOO_SHORT":s[s.length-1]<r?"TOO_LONG":s.indexOf(r,1)>=0?"IS_POSSIBLE":"INVALID_LENGTH"}function LU(t,n,a){if(n===void 0&&(n={}),a=new Ms(a),n.v2){if(!t.countryCallingCode)throw new Error("Invalid phone number object passed");a.selectNumberingPlan(t.countryCallingCode)}else{if(!t.phone)return!1;if(t.country){if(!a.hasCountry(t.country))throw new Error("Unknown country: ".concat(t.country));a.country(t.country)}else{if(!t.countryCallingCode)throw new Error("Invalid phone number object passed");a.selectNumberingPlan(t.countryCallingCode)}}if(a.possibleLengths())return kx(t.phone||t.nationalNumber,a);if(t.countryCallingCode&&a.isNonGeographicCallingCode(t.countryCallingCode))return!0;throw new Error('Missing "possibleLengths" in metadata. Perhaps the metadata has been generated before v1.0.18.')}function kx(t,n){switch($E(t,n)){case"IS_POSSIBLE":return!0;default:return!1}}function qr(t,n){return t=t||"",new RegExp("^(?:"+n+")$").test(t)}function DU(t,n){var a=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a)return(a=a.call(t)).next.bind(a);if(Array.isArray(t)||(a=PU(t))||n){a&&(t=a);var e=0;return function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PU(t,n){if(t){if(typeof t=="string")return yy(t,n);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return yy(t,n)}}function yy(t,n){(n==null||n>t.length)&&(n=t.length);for(var a=0,e=new Array(n);a<n;a++)e[a]=t[a];return e}var kU=["MOBILE","PREMIUM_RATE","TOLL_FREE","SHARED_COST","VOIP","PERSONAL_NUMBER","PAGER","UAN","VOICEMAIL"];function GE(t,n,a){if(n=n||{},!(!t.country&&!t.countryCallingCode)){a=new Ms(a),a.selectNumberingPlan(t.country,t.countryCallingCode);var e=n.v2?t.nationalNumber:t.phone;if(qr(e,a.nationalNumberPattern())){if(mg(e,"FIXED_LINE",a))return a.type("MOBILE")&&a.type("MOBILE").pattern()===""||!a.type("MOBILE")||mg(e,"MOBILE",a)?"FIXED_LINE_OR_MOBILE":"FIXED_LINE";for(var s=DU(kU),r;!(r=s()).done;){var o=r.value;if(mg(e,o,a))return o}}}}function mg(t,n,a){return n=a.type(n),!n||!n.pattern()||n.possibleLengths()&&n.possibleLengths().indexOf(t.length)<0?!1:qr(t,n.pattern())}function BU(t,n,a){if(n=n||{},a=new Ms(a),a.selectNumberingPlan(t.country,t.countryCallingCode),a.hasTypes())return GE(t,n,a.metadata)!==void 0;var e=n.v2?t.nationalNumber:t.phone;return qr(e,a.nationalNumberPattern())}function FU(t,n,a){var e=new Ms(a),s=e.getCountryCodesForCallingCode(t);return s?s.filter(function(r){return UU(n,r,a)}):[]}function UU(t,n,a){var e=new Ms(a);return e.selectNumberingPlan(n),e.numberingPlan.possibleLengths().indexOf(t.length)>=0}function $U(t){return t.replace(new RegExp("[".concat(om,"]+"),"g")," ").trim()}var GU=/(\$\d)/;function VU(t,n,a){var e=a.useInternationalFormat,s=a.withNationalPrefix,r=t.replace(new RegExp(n.pattern()),e?n.internationalFormat():s&&n.nationalPrefixFormattingRule()?n.format().replace(GU,n.nationalPrefixFormattingRule()):n.format());return e?$U(r):r}var HU=/^[\d]+(?:[~\u2053\u223C\uFF5E][\d]+)?$/;function jU(t,n,a){var e=new Ms(a);if(e.selectNumberingPlan(t,n),e.defaultIDDPrefix())return e.defaultIDDPrefix();if(HU.test(e.IDDPrefix()))return e.IDDPrefix()}function WU(t){var n=t.number,a=t.ext;if(!n)return"";if(n[0]!=="+")throw new Error('"formatRFC3966()" expects "number" to be in E.164 format.');return"tel:".concat(n).concat(a?";ext="+a:"")}function zU(t,n){var a=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a)return(a=a.call(t)).next.bind(a);if(Array.isArray(t)||(a=YU(t))||n){a&&(t=a);var e=0;return function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YU(t,n){if(t){if(typeof t=="string")return Iy(t,n);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Iy(t,n)}}function Iy(t,n){(n==null||n>t.length)&&(n=t.length);for(var a=0,e=new Array(n);a<n;a++)e[a]=t[a];return e}function Cy(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);n&&(e=e.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,e)}return a}function Oy(t){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?Cy(Object(a),!0).forEach(function(e){KU(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Cy(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function KU(t,n,a){return n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}var Ny={formatExtension:function(n,a,e){return"".concat(n).concat(e.ext()).concat(a)}};function XU(t,n,a,e){if(a?a=Oy(Oy({},Ny),a):a=Ny,e=new Ms(e),t.country&&t.country!=="001"){if(!e.hasCountry(t.country))throw new Error("Unknown country: ".concat(t.country));e.country(t.country)}else if(t.countryCallingCode)e.selectNumberingPlan(t.countryCallingCode);else return t.phone||"";var s=e.countryCallingCode(),r=a.v2?t.nationalNumber:t.phone,o;switch(n){case"NATIONAL":return r?(o=rm(r,t.carrierCode,"NATIONAL",e,a),hg(o,t.ext,e,a.formatExtension)):"";case"INTERNATIONAL":return r?(o=rm(r,null,"INTERNATIONAL",e,a),o="+".concat(s," ").concat(o),hg(o,t.ext,e,a.formatExtension)):"+".concat(s);case"E.164":return"+".concat(s).concat(r);case"RFC3966":return WU({number:"+".concat(s).concat(r),ext:t.ext});case"IDD":if(!a.fromCountry)return;var i=ZU(r,t.carrierCode,s,a.fromCountry,e);return hg(i,t.ext,e,a.formatExtension);default:throw new Error('Unknown "format" argument passed to "formatNumber()": "'.concat(n,'"'))}}function rm(t,n,a,e,s){var r=qU(e.formats(),t);return r?VU(t,r,{useInternationalFormat:a==="INTERNATIONAL",withNationalPrefix:!(r.nationalPrefixIsOptionalWhenFormattingInNationalFormat()&&s&&s.nationalPrefix===!1)}):t}function qU(t,n){for(var a=zU(t),e;!(e=a()).done;){var s=e.value;if(s.leadingDigitsPatterns().length>0){var r=s.leadingDigitsPatterns()[s.leadingDigitsPatterns().length-1];if(n.search(r)!==0)continue}if(qr(n,s.pattern()))return s}}function hg(t,n,a,e){return n?e(t,n,a):t}function ZU(t,n,a,e,s){var r=UE(e,s.metadata);if(r===a){var o=rm(t,n,"NATIONAL",s);return a==="1"?a+" "+o:o}var i=jU(e,void 0,s.metadata);if(i)return"".concat(i," ").concat(a," ").concat(rm(t,null,"INTERNATIONAL",s))}function xy(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);n&&(e=e.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,e)}return a}function Ry(t){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?xy(Object(a),!0).forEach(function(e){QU(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):xy(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function QU(t,n,a){return n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}function JU(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function e9(t,n){for(var a=0;a<n.length;a++){var e=n[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function t9(t,n,a){return n&&e9(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var n9=function(){function t(n,a,e){if(JU(this,t),!n)throw new TypeError("`country` or `countryCallingCode` not passed");if(!a)throw new TypeError("`nationalNumber` not passed");if(!e)throw new TypeError("`metadata` not passed");var s=s9(n,e),r=s.country,o=s.countryCallingCode;this.country=r,this.countryCallingCode=o,this.nationalNumber=a,this.number="+"+this.countryCallingCode+this.nationalNumber,this.getMetadata=function(){return e}}return t9(t,[{key:"setExt",value:function(a){this.ext=a}},{key:"getPossibleCountries",value:function(){return this.country?[this.country]:FU(this.countryCallingCode,this.nationalNumber,this.getMetadata())}},{key:"isPossible",value:function(){return LU(this,{v2:!0},this.getMetadata())}},{key:"isValid",value:function(){return BU(this,{v2:!0},this.getMetadata())}},{key:"isNonGeographic",value:function(){var a=new Ms(this.getMetadata());return a.isNonGeographicCallingCode(this.countryCallingCode)}},{key:"isEqual",value:function(a){return this.number===a.number&&this.ext===a.ext}},{key:"getType",value:function(){return GE(this,{v2:!0},this.getMetadata())}},{key:"format",value:function(a,e){return XU(this,a,e?Ry(Ry({},e),{},{v2:!0}):{v2:!0},this.getMetadata())}},{key:"formatNational",value:function(a){return this.format("NATIONAL",a)}},{key:"formatInternational",value:function(a){return this.format("INTERNATIONAL",a)}},{key:"getURI",value:function(a){return this.format("RFC3966",a)}}]),t}(),a9=function(n){return/^[A-Z]{2}$/.test(n)};function s9(t,n){var a,e,s=new Ms(n);return a9(t)?(a=t,s.selectNumberingPlan(a),e=s.countryCallingCode()):e=t,{country:a,countryCallingCode:e}}var o9=new RegExp("(["+Jo+"])");function r9(t,n,a,e){if(n){var s=new Ms(e);s.selectNumberingPlan(n,a);var r=new RegExp(s.IDDPrefix());if(t.search(r)===0){t=t.slice(t.match(r)[0].length);var o=t.match(o9);if(!(o&&o[1]!=null&&o[1].length>0&&o[1]==="0"))return t}}}function i9(t,n){if(t&&n.numberingPlan.nationalPrefixForParsing()){var a=new RegExp("^(?:"+n.numberingPlan.nationalPrefixForParsing()+")"),e=a.exec(t);if(e){var s,r,o=e.length-1,i=o>0&&e[o];if(n.nationalPrefixTransformRule()&&i)s=t.replace(a,n.nationalPrefixTransformRule()),o>1&&(r=e[1]);else{var l=e[0];s=t.slice(l.length),i&&(r=e[1])}var c;if(i){var d=t.indexOf(e[1]),u=t.slice(0,d);u===n.numberingPlan.nationalPrefix()&&(c=n.numberingPlan.nationalPrefix())}else c=e[0];return{nationalNumber:s,nationalPrefix:c,carrierCode:r}}}return{nationalNumber:t}}function cv(t,n){var a=i9(t,n),e=a.carrierCode,s=a.nationalNumber;if(s!==t){if(!l9(t,s,n))return{nationalNumber:t};if(n.possibleLengths()&&!c9(s,n))return{nationalNumber:t}}return{nationalNumber:s,carrierCode:e}}function l9(t,n,a){return!(qr(t,a.nationalNumberPattern())&&!qr(n,a.nationalNumberPattern()))}function c9(t,n){switch($E(t,n)){case"TOO_SHORT":case"INVALID_LENGTH":return!1;default:return!0}}function d9(t,n,a,e){var s=n?UE(n,e):a;if(t.indexOf(s)===0){e=new Ms(e),e.selectNumberingPlan(n,a);var r=t.slice(s.length),o=cv(r,e),i=o.nationalNumber,l=cv(t,e),c=l.nationalNumber;if(!qr(c,e.nationalNumberPattern())&&qr(i,e.nationalNumberPattern())||$E(c,e)==="TOO_LONG")return{countryCallingCode:s,number:r}}return{number:t}}function u9(t,n,a,e){if(!t)return{};var s;if(t[0]!=="+"){var r=r9(t,n,a,e);if(r&&r!==t)s=!0,t="+"+r;else{if(n||a){var o=d9(t,n,a,e),i=o.countryCallingCode,l=o.number;if(i)return{countryCallingCodeSource:"FROM_NUMBER_WITHOUT_PLUS_SIGN",countryCallingCode:i,number:l}}return{number:t}}}if(t[1]==="0")return{};e=new Ms(e);for(var c=2;c-1<=eU&&c<=t.length;){var d=t.slice(1,c);if(e.hasCallingCode(d))return e.selectNumberingPlan(d),{countryCallingCodeSource:s?"FROM_NUMBER_WITH_IDD":"FROM_NUMBER_WITH_PLUS_SIGN",countryCallingCode:d,number:t.slice(c)};c++}return{}}function p9(t,n){var a=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a)return(a=a.call(t)).next.bind(a);if(Array.isArray(t)||(a=f9(t))||n){a&&(t=a);var e=0;return function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f9(t,n){if(t){if(typeof t=="string")return wy(t,n);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return wy(t,n)}}function wy(t,n){(n==null||n>t.length)&&(n=t.length);for(var a=0,e=new Array(n);a<n;a++)e[a]=t[a];return e}function m9(t,n){var a=n.countries,e=n.defaultCountry,s=n.metadata;s=new Ms(s);for(var r=[],o=p9(a),i;!(i=o()).done;){var l=i.value;if(s.country(l),s.leadingDigits()){if(t&&t.search(s.leadingDigits())===0)return l}else if(GE({phone:t,country:l},void 0,s.metadata))if(e){if(l===e)return l;r.push(l)}else return l}if(r.length>0)return r[0]}function h9(t,n){var a=n.nationalNumber,e=n.defaultCountry,s=n.metadata,r=s.getCountryCodesForCallingCode(t);if(r)return r.length===1?r[0]:m9(a,{countries:r,defaultCountry:e,metadata:s.metadata})}var Bx="+",_9="[\\-\\.\\(\\)]?",My="(["+Jo+"]|"+_9+")",g9="^\\"+Bx+My+"*["+Jo+"]"+My+"*$",b9=new RegExp(g9,"g"),dv=Jo,v9="["+dv+"]+((\\-)*["+dv+"])*",E9="a-zA-Z",S9="["+E9+"]+((\\-)*["+dv+"])*",T9="^("+v9+"\\.)*"+S9+"\\.?$",A9=new RegExp(T9,"g"),Ly="tel:",uv=";phone-context=",y9=";isub=";function I9(t){var n=t.indexOf(uv);if(n<0)return null;var a=n+uv.length;if(a>=t.length)return"";var e=t.indexOf(";",a);return e>=0?t.substring(a,e):t.substring(a)}function C9(t){return t===null?!0:t.length===0?!1:b9.test(t)||A9.test(t)}function O9(t,n){var a=n.extractFormattedPhoneNumber,e=I9(t);if(!C9(e))throw new kr("NOT_A_NUMBER");var s;if(e===null)s=a(t)||"";else{s="",e.charAt(0)===Bx&&(s+=e);var r=t.indexOf(Ly),o;r>=0?o=r+Ly.length:o=0;var i=t.indexOf(uv);s+=t.substring(o,i)}var l=s.indexOf(y9);if(l>0&&(s=s.substring(0,l)),s!=="")return s}var N9=250,x9=new RegExp("["+FE+Jo+"]"),R9=new RegExp("[^"+Jo+"#]+$");function w9(t,n,a){if(n=n||{},a=new Ms(a),n.defaultCountry&&!a.hasCountry(n.defaultCountry))throw n.v2?new kr("INVALID_COUNTRY"):new Error("Unknown country: ".concat(n.defaultCountry));var e=L9(t,n.v2,n.extract),s=e.number,r=e.ext,o=e.error;if(!s){if(n.v2)throw o==="TOO_SHORT"?new kr("TOO_SHORT"):new kr("NOT_A_NUMBER");return{}}var i=P9(s,n.defaultCountry,n.defaultCallingCode,a),l=i.country,c=i.nationalNumber,d=i.countryCallingCode,u=i.countryCallingCodeSource,m=i.carrierCode;if(!a.hasSelectedNumberingPlan()){if(n.v2)throw new kr("INVALID_COUNTRY");return{}}if(!c||c.length<BE){if(n.v2)throw new kr("TOO_SHORT");return{}}if(c.length>JF){if(n.v2)throw new kr("TOO_LONG");return{}}if(n.v2){var h=new n9(d,c,a.metadata);return l&&(h.country=l),m&&(h.carrierCode=m),r&&(h.ext=r),h.__countryCallingCodeSource=u,h}var _=(n.extended?a.hasSelectedNumberingPlan():l)?qr(c,a.nationalNumberPattern()):!1;return n.extended?{country:l,countryCallingCode:d,carrierCode:m,valid:_,possible:_?!0:!!(n.extended===!0&&a.possibleLengths()&&kx(c,a)),phone:c,ext:r}:_?D9(l,c,r):{}}function M9(t,n,a){if(t){if(t.length>N9){if(a)throw new kr("TOO_LONG");return}if(n===!1)return t;var e=t.search(x9);if(!(e<0))return t.slice(e).replace(R9,"")}}function L9(t,n,a){var e=O9(t,{extractFormattedPhoneNumber:function(o){return M9(o,a,n)}});if(!e)return{};if(!yU(e))return IU(e)?{error:"TOO_SHORT"}:{};var s=CU(e);return s.ext?s:{number:e}}function D9(t,n,a){var e={country:t,phone:n};return a&&(e.ext=a),e}function P9(t,n,a,e){var s=u9(Ay(t),n,a,e.metadata),r=s.countryCallingCodeSource,o=s.countryCallingCode,i=s.number,l;if(o)e.selectNumberingPlan(o);else if(i&&(n||a))e.selectNumberingPlan(n,a),n&&(l=n),o=a||UE(n,e.metadata);else return{};if(!i)return{countryCallingCodeSource:r,countryCallingCode:o};var c=cv(Ay(i),e),d=c.nationalNumber,u=c.carrierCode,m=h9(o,{nationalNumber:d,defaultCountry:n,metadata:e});return m&&(l=m,m==="001"||e.country(l)),{country:l,countryCallingCode:o,countryCallingCodeSource:r,nationalNumber:d,carrierCode:u}}function Dy(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);n&&(e=e.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,e)}return a}function Py(t){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?Dy(Object(a),!0).forEach(function(e){k9(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Dy(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function k9(t,n,a){return n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}function Fx(t,n,a){return w9(t,Py(Py({},n),{},{v2:!0}),a)}function ky(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);n&&(e=e.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,e)}return a}function B9(t){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?ky(Object(a),!0).forEach(function(e){F9(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ky(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function F9(t,n,a){return n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}function U9(t,n){return H9(t)||V9(t,n)||G9(t,n)||$9()}function $9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G9(t,n){if(t){if(typeof t=="string")return By(t,n);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return By(t,n)}}function By(t,n){(n==null||n>t.length)&&(n=t.length);for(var a=0,e=new Array(n);a<n;a++)e[a]=t[a];return e}function V9(t,n){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var e=[],s=!0,r=!1,o,i;try{for(a=a.call(t);!(s=(o=a.next()).done)&&(e.push(o.value),!(n&&e.length===n));s=!0);}catch(l){r=!0,i=l}finally{try{!s&&a.return!=null&&a.return()}finally{if(r)throw i}}return e}}function H9(t){if(Array.isArray(t))return t}function VE(t){var n=Array.prototype.slice.call(t),a=U9(n,4),e=a[0],s=a[1],r=a[2],o=a[3],i,l,c;if(typeof e=="string")i=e;else throw new TypeError("A text for parsing must be a string.");if(!s||typeof s=="string")o?(l=r,c=o):(l=void 0,c=r),s&&(l=B9({defaultCountry:s},l));else if(gf(s))r?(l=s,c=r):c=s;else throw new Error("Invalid second argument: ".concat(s));return{text:i,options:l,metadata:c}}function j9(){var t=VE(arguments),n=t.text,a=t.options,e=t.metadata;return Fx(n,a,e)}function Fy(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);n&&(e=e.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,e)}return a}function Uy(t){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?Fy(Object(a),!0).forEach(function(e){W9(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Fy(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function W9(t,n,a){return n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}function Ux(t,n,a){n&&n.defaultCountry&&!gU(n.defaultCountry,a)&&(n=Uy(Uy({},n),{},{defaultCountry:void 0}));try{return Fx(t,n,a)}catch(e){if(!(e instanceof kr))throw e}}function z9(){var t=VE(arguments),n=t.text,a=t.options,e=t.metadata;return Ux(n,a,e)}function $y(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);n&&(e=e.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,e)}return a}function Gy(t){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?$y(Object(a),!0).forEach(function(e){Y9(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):$y(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function Y9(t,n,a){return n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}function K9(){var t=VE(arguments),n=t.text,a=t.options,e=t.metadata;a=Gy(Gy({},a),{},{extract:!1});var s=Ux(n,a,e);return s&&s.isValid()||!1}function X9(){return kE(j9,arguments)}function ku(){return kE(z9,arguments)}function q9(){return kE(K9,arguments)}const Z9={props:{modelValue:{type:[String,Number],default:""},placeholder:{type:String,default:""},readonly:{type:Boolean,default:!1},styles:{type:Object,default:()=>{}},error:{type:Boolean,default:!1}},emits:["blur","setCode","update:modelValue"],data(){return{selectedIndex:-1,showDropdown:!1,searchCountry:"",activeCountryCode:tv(),activeDialCode:ev(),phoneNumber:this.modelValue}},computed:{countries(){return[{name:this.dropdownFirstItemName,dial_code:"",emoji:"",id:""},...rs]},dropdownFirstItemName(){return this.activeCountryCode?"Clear selection":"Select Country"},filteredCountriesBySearch(){return this.countries.filter(t=>{const{name:n,dial_code:a,id:e}=t,s=this.searchCountry.toLowerCase();return n.toLowerCase().includes(s)||a.toLowerCase().includes(s)||e.toLowerCase().includes(s)})},activeCountry(){return this.activeCountryCode?this.countries.find(t=>t.id===this.activeCountryCode):""}},watch:{modelValue(){const t=ku(this.modelValue);t&&(this.activeCountryCode=t.country,this.activeDialCode=`+${t.countryCallingCode}`,this.phoneNumber=this.modelValue.replace(`+${t.countryCallingCode}`,""))}},mounted(){this.setActiveCountry()},methods:{onOutsideClick(t){this.showDropdown&&t.target!==this.$refs.dropdown&&!this.$refs.dropdown.contains(t.target)&&this.closeDropdown()},onChange(t){this.phoneNumber=t.target.value,this.$emit("update:modelValue",t.target.value),this.$emit("setCode",this.activeDialCode)},onBlur(t){this.$emit("blur",t.target.value)},onSearchCountry(){this.selectedIndex=0},moveUp(){this.showDropdown&&(this.selectedIndex=Math.max(this.selectedIndex-1,0),this.scrollToSelected())},moveDown(){this.showDropdown&&(this.selectedIndex=Math.min(this.selectedIndex+1,this.filteredCountriesBySearch.length-1),this.scrollToSelected())},scrollToSelected(){this.$nextTick(()=>{const t=this.$refs.dropdown,n=this.$refs.dropdownItem[this.selectedIndex],a=40;if(n){const e=n.offsetTop;t.scrollTop=e-a}})},onSelectCountry(t){!t||!this.showDropdown||(this.activeCountryCode=t.id,this.searchCountry="",this.activeDialCode=t.dial_code,this.$emit("setCode",t.dial_code),this.closeDropdown(),this.$refs.phoneNumberInput.focus())},setActiveCountry(){const{phoneNumber:t}=this;if(!t)return;const n=ku(t);n&&(this.activeCountryCode=n.country,this.activeDialCode=n.countryCallingCode)},toggleCountryDropdown(){this.showDropdown=!this.showDropdown,this.selectedIndex=-1,this.showDropdown&&this.$nextTick(()=>{this.$refs.searchbar.focus()})},closeDropdown(){this.selectedIndex=-1,this.showDropdown=!1}}},Q9={class:"relative phone-input--wrap"},J9={key:0,class:"mb-0"},e$={key:0,class:"flex py-2 ltr:pl-2 rtl:pr-2 text-base font-normal leading-normal text-n-slate-12"},t$=["value","placeholder","readonly"],n$={class:"sticky top-0 p-1 bg-white dark:bg-transparent backdrop-blur-[100px]"},a$=["placeholder"],s$=["onClick"],o$={class:"mr-1 text-base"},r$={class:"max-w-[7.5rem] overflow-hidden text-ellipsis whitespace-nowrap"},i$={class:"ml-1 text-xs text-n-slate-11"},l$={key:0},c$={class:"flex items-center justify-center mt-4 text-sm text-n-slate-10"};function d$(t,n,a,e,s,r){const o=H("fluent-icon"),i=nt("on-clickaway");return p(),g("div",Q9,[f("div",{class:oe(["flex items-center justify-start border-none outline outline-1 rounded-lg bg-n-alpha-black2",a.error?"outline-n-ruby-8 dark:outline-n-ruby-8 hover:outline-n-ruby-9 dark:hover:outline-n-ruby-9 mb-1":"mb-4 outline-n-weak dark:outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6"])},[f("div",{class:"cursor-pointer py-2 pr-1.5 pl-2 rounded-tl-lg rounded-bl-lg flex items-center justify-center gap-1.5 bg-n-solid-3 h-10 w-14",onClick:n[0]||(n[0]=Ve((...l)=>r.toggleCountryDropdown&&r.toggleCountryDropdown(...l),["prevent"]))},[r.activeCountry?(p(),g("h5",J9,C(r.activeCountry.emoji),1)):(p(),L(o,{key:1,icon:"globe",class:"fluent-icon",size:"16"})),v(o,{icon:"chevron-down",class:"fluent-icon",size:"12"})]),s.activeDialCode?(p(),g("span",e$,C(s.activeDialCode),1)):O("v-if",!0),f("input",{ref:"phoneNumberInput",value:s.phoneNumber,type:"tel",class:"no-margin !rounded-tl-none !rounded-bl-none !outline-none !border-0 font-normal !w-full !bg-transparent text-base !px-1.5 placeholder:font-normal",placeholder:a.placeholder,readonly:a.readonly,style:nn(a.styles),onInput:n[1]||(n[1]=(...l)=>r.onChange&&r.onChange(...l)),onBlur:n[2]||(n[2]=(...l)=>r.onBlur&&r.onBlur(...l))},null,44,t$)],2),s.showDropdown?ce((p(),g("div",{key:0,ref:"dropdown",tabindex:"0",class:"z-10 absolute h-60 w-[12.5rem] shadow-md overflow-y-auto top-10 rounded-lg px-0 pt-0 pb-1 bg-n-alpha-3 backdrop-blur-[100px]",onKeydown:[n[5]||(n[5]=Vn(Ve((...l)=>r.moveUp&&r.moveUp(...l),["prevent"]),["up"])),n[6]||(n[6]=Vn(Ve((...l)=>r.moveDown&&r.moveDown(...l),["prevent"]),["down"])),n[7]||(n[7]=Vn(Ve(l=>r.onSelectCountry(r.filteredCountriesBySearch[s.selectedIndex]),["prevent"]),["enter"]))]},[f("div",n$,[ce(f("input",{ref:"searchbar","onUpdate:modelValue":n[3]||(n[3]=l=>s.searchCountry=l),type:"text",placeholder:t.$t("GENERAL.PHONE_INPUT.PLACEHOLDER"),class:"!h-8 !mb-0 !text-sm !outline-n-brand dark:!outline-n-brand",onInput:n[4]||(n[4]=(...l)=>r.onSearchCountry&&r.onSearchCountry(...l))},null,40,a$),[[Et,s.searchCountry]])]),(p(!0),g(de,null,Ae(r.filteredCountriesBySearch,(l,c)=>(p(),g("div",{ref_for:!0,ref:"dropdownItem",key:c,class:oe(["flex items-center px-1 py-0 cursor-pointer h-7 hover:bg-n-alpha-1 dark:hover:bg-n-alpha-2",{"bg-n-alpha-1 dark:bg-n-alpha-2":l.id===s.activeCountryCode,"bg-n-alpha-1 dark:bg-n-alpha-2":c===s.selectedIndex}]),onClick:d=>r.onSelectCountry(l)},[f("span",o$,C(l.emoji),1),f("span",r$,C(l.name),1),f("span",i$,C(l.dial_code),1)],10,s$))),128)),r.filteredCountriesBySearch.length===0?(p(),g("div",l$,[f("span",c$,C(t.$t("GENERAL.PHONE_INPUT.EMPTY_STATE")),1)])):O("v-if",!0)],32)),[[i,r.onOutsideClick]]):O("v-if",!0)])}const u$=G(Z9,[["render",d$],["__file","/app/app/javascript/dashboard/components/widgets/forms/PhoneInput.vue"]]),p$={props:{title:{type:String,required:!0},description:{type:String,default:""},href:{type:String,default:""},bgColor:{type:String,default:""},small:{type:Boolean,default:!1},showClose:{type:Boolean,default:!1},icon:{type:String,default:""},color:{type:String,default:""},colorScheme:{type:String,default:""},variant:{type:String,default:""}},emits:["remove"],computed:{textColor(){return this.variant==="smooth"||this.variant==="dashed"?"":this.color||q3(this.bgColor)},labelClass(){return`label ${this.colorScheme} ${this.variant} ${this.small?"small":""}`},labelStyle(){return this.bgColor?{background:this.bgColor,color:this.textColor,border:`1px solid ${this.bgColor}`}:{}},anchorStyle(){return this.bgColor?{color:this.textColor}:{}}},methods:{onClick(){this.$emit("remove",this.title)}}},f$=["title"],m$={key:0,class:"label-action--button"},h$={key:2,class:"whitespace-nowrap text-ellipsis overflow-hidden"},_$=["href"];function g$(t,n,a,e,s,r){const o=H("fluent-icon");return p(),g("div",{class:oe(["inline-flex ltr:mr-1 rtl:ml-1 mb-1",r.labelClass]),style:nn(r.labelStyle),title:a.description},[a.icon?(p(),g("span",m$,[v(o,{icon:a.icon,size:"12",class:"label--icon cursor-pointer"},null,8,["icon"])])):O("v-if",!0),["smooth","dashed"].includes(a.variant)&&a.title&&!a.icon?(p(),g("span",{key:1,style:nn({background:a.color}),class:"label-color-dot flex-shrink-0"},null,4)):O("v-if",!0),a.href?(p(),g("a",{key:3,href:a.href,style:nn(r.anchorStyle)},C(a.title),13,_$)):(p(),g("span",h$,C(a.title),1)),a.showClose?(p(),g("button",{key:4,class:"label-close--button p-0",style:nn({color:r.textColor}),onClick:n[0]||(n[0]=(...i)=>r.onClick&&r.onClick(...i))},[v(o,{icon:"dismiss",size:"12",class:"close--icon"})],4)):O("v-if",!0)],14,f$)}const b$=G(p$,[["render",g$],["__scopeId","data-v-d030276d"],["__file","/app/app/javascript/dashboard/components/ui/Label.vue"]]),v$={__name:"LoadingState",props:{message:{type:String,default:""}},setup(t,{expose:n}){n();const a={Spinner:$n};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},E$={class:"flex items-center justify-center p-8"},S$={class:"flex items-center gap-3 text-base text-center w-100 text-n-slate-11"},T$={class:"text-base font-medium text-n-slate-12"};function A$(t,n,a,e,s,r){return p(),g("div",E$,[f("h6",S$,[f("span",T$,C(a.message),1),v(e.Spinner,{class:"text-n-brand"})])])}const Ed=G(v$,[["render",A$],["__file","/app/app/javascript/dashboard/components/widgets/LoadingState.vue"]]),y$={props:{headerTitle:{type:String,default:""},headerContent:{type:String,default:""},headerContentValue:{type:String,default:""},headerImage:{type:String,default:""}}},I$={class:"flex flex-col items-start px-8 pt-8 pb-0"},C$=["src"],O$={"data-test-id":"modal-header-title",class:"text-base font-semibold leading-6 text-n-slate-12"},N$={key:1,"data-test-id":"modal-header-content",class:"w-full mt-2 text-sm leading-5 break-words text-n-slate-11"},x$={key:0,class:"text-sm font-semibold text-n-slate-11"};function R$(t,n,a,e,s,r){return p(),g("div",I$,[a.headerImage?(p(),g("img",{key:0,src:a.headerImage,alt:"No image"},null,8,C$)):O("v-if",!0),f("h2",O$,C(a.headerTitle),1),a.headerContent?(p(),g("p",N$,[Oe(C(a.headerContent)+" ",1),a.headerContentValue?(p(),g("span",x$,C(a.headerContentValue),1)):O("v-if",!0)])):O("v-if",!0),qe(t.$slots,"default")])}const w$=G(y$,[["render",R$],["__file","/app/app/javascript/dashboard/components/ModalHeader.vue"]]),M$={__name:"Tabs",props:{index:{type:Number,default:0},border:{type:Boolean,default:!0}},emits:["change"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=xn("tabsContainer"),o=xn("tabsList"),{width:i}=fr(r),{width:l}=fr(o),c=P(!1),d=S({get:()=>e.index,set:_=>{s("change",_)}});qn("activeIndex",d),qn("updateActiveIndex",_=>{d.value=_});const u=()=>{r.value&&o.value&&(c.value=o.value.scrollWidth>o.value.clientWidth)},m=_=>{if(r.value&&o.value){let E=o.value.scrollLeft;E+=_==="left"?-100:100,o.value.scrollTo({top:0,left:E,behavior:"smooth"})}};je([i,l],()=>{u()},{immediate:!0});const h={props:e,emit:s,tabsContainer:r,tabsList:o,containerWidth:i,listWidth:l,hasScroll:c,activeIndex:d,computeScrollWidth:u,onScrollClick:m,ref:P,useTemplateRef:xn,provide:qn,computed:S,watch:je,get useElementSize(){return fr}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}};function L$(t,n,a,e,s,r){const o=H("fluent-icon");return p(),g("div",{ref:"tabsContainer",class:oe(["flex",[a.border&&"border-b border-b-n-weak"]])},[e.hasScroll?(p(),g("button",{key:0,class:"items-center rounded-none cursor-pointer flex h-auto justify-center min-w-8",onClick:n[0]||(n[0]=i=>e.onScrollClick("left"))},[v(o,{icon:"chevron-left",size:16})])):O("v-if",!0),f("ul",{ref:"tabsList",class:oe(["border-r-0 border-l-0 border-t-0 flex min-w-[6.25rem] py-0 px-4 list-none mb-0",e.hasScroll?"overflow-hidden py-0 px-1 max-w-[calc(100%-64px)]":""])},[qe(t.$slots,"default")],2),e.hasScroll?(p(),g("button",{key:1,class:"items-center rounded-none cursor-pointer flex h-auto justify-center min-w-8",onClick:n[1]||(n[1]=i=>e.onScrollClick("right"))},[v(o,{icon:"chevron-right",size:16})])):O("v-if",!0)],2)}const D$=G(M$,[["render",L$],["__file","/app/app/javascript/dashboard/components/ui/Tabs/Tabs.vue"]]),P$={__name:"TabsItem",props:{index:{type:Number,default:0},name:{type:String,required:!0},disabled:{type:Boolean,default:!1},count:{type:Number,default:0},showBadge:{type:Boolean,default:!0},isCompact:{type:Boolean,default:!1}},setup(t,{expose:n}){n();const a=t,e=so("activeIndex"),s=so("updateActiveIndex"),r=S(()=>a.index===e.value),o=S(()=>a.count),l={props:a,activeIndex:e,updateActiveIndex:s,active:r,getItemCount:o,onTabClick:c=>{c.preventDefault(),a.disabled||s(a.index)},computed:S,inject:so};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}},k$={class:"flex-shrink-0 my-0 mx-2 ltr:first:ml-0 rtl:first:mr-0 ltr:last:mr-0 rtl:last:ml-0 hover:text-n-slate-12"};function B$(t,n,a,e,s,r){return p(),g("li",k$,[f("a",{class:oe(["flex items-center flex-row border-b select-none cursor-pointer text-sm relative top-[1px] transition-[border-color] duration-[150ms] ease-[cubic-bezier(0.37,0,0.63,1)]",[e.active?"border-b border-n-brand text-n-blue-text":"border-transparent text-n-slate-11",a.isCompact?"py-2 text-sm":"text-base py-3"]]),onClick:e.onTabClick},[Oe(C(a.name)+" ",1),a.showBadge?(p(),g("div",{key:0,class:oe(["rounded-md h-5 flex items-center justify-center text-xxs font-semibold my-0 mx-1 px-1 py-0 min-w-[20px]",[e.active?"bg-n-brand/10 dark:bg-n-brand/20 text-n-blue-text":"bg-n-alpha-black2 dark:bg-n-solid-3 text-n-slate-11"]])},[f("span",null,C(e.getItemCount),1)],2)):O("v-if",!0)],2)])}const F$=G(P$,[["render",B$],["__file","/app/app/javascript/dashboard/components/ui/Tabs/TabsItem.vue"]]);function Fr(t,n){Gn(2,arguments);var a=Rn(t),e=Zn(n);if(isNaN(e))return new Date(NaN);if(!e)return a;var s=a.getDate(),r=new Date(a.getTime());r.setMonth(a.getMonth()+e+1,0);var o=r.getDate();return s>=o?r:(a.setFullYear(r.getFullYear(),r.getMonth(),s),a)}function Bu(t,n){if(Gn(2,arguments),!n||typeof n!="object")return new Date(NaN);var a="years"in n?Zn(n.years):0,e="months"in n?Zn(n.months):0,s="weeks"in n?Zn(n.weeks):0,r="days"in n?Zn(n.days):0,o="hours"in n?Zn(n.hours):0,i="minutes"in n?Zn(n.minutes):0,l="seconds"in n?Zn(n.seconds):0,c=Rn(t),d=e||a?Fr(c,e+a*12):c,u=r||s?yu(d,r+s*7):d,m=i+o*60,h=l+m*60,_=h*1e3,E=new Date(u.getTime()+_);return E}function $x(t,n){Gn(1,arguments);var a=n||{},e=a.locale,s=e&&e.options&&e.options.weekStartsOn,r=s==null?0:Zn(s),o=a.weekStartsOn==null?r:Zn(a.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var i=Rn(t),l=i.getDay(),c=(l<o?7:0)+l-o;return i.setDate(i.getDate()-c),i.setHours(0,0,0,0),i}function U$(t,n){Gn(2,arguments);var a=Zn(n),e=a*7;return yu(t,e)}function im(t,n){Gn(2,arguments);var a=Zn(n);return Fr(t,a*12)}function $$(t,n){Gn(2,arguments);var a=Rn(t),e=Rn(n);return a.getFullYear()-e.getFullYear()}var G$=36e5;function V$(t,n){Gn(2,arguments);var a=$2(t,n)/G$;return a>0?Math.floor(a):Math.ceil(a)}var H$=6e4;function bf(t,n){Gn(2,arguments);var a=$2(t,n)/H$;return a>0?Math.floor(a):Math.ceil(a)}function j$(t,n){Gn(2,arguments);var a=Rn(t),e=Rn(n),s=Jb(a,e),r=Math.abs($$(a,e));a.setFullYear("1584"),e.setFullYear("1584");var o=Jb(a,e)===-s,i=s*(r-o);return i===0?0:i}function W$(t,n){Gn(1,arguments);var a=t||{},e=Rn(a.start),s=Rn(a.end),r=s.getTime();if(!(e.getTime()<=r))throw new RangeError("Invalid interval");var o=[],i=e;i.setHours(0,0,0,0);var l=1;if(isNaN(l))throw new RangeError("`options.step` must be a number greater than 1");for(;i.getTime()<=r;)o.push(Rn(i)),i.setDate(i.getDate()+l),i.setHours(0,0,0,0);return o}function Ur(t){Gn(1,arguments);var n=Rn(t);return n.setDate(1),n.setHours(0,0,0,0),n}function Vy(t){Gn(1,arguments);var n=Rn(t),a=n.getDay();return a}function z$(t){Gn(1,arguments);var n=Rn(t),a=n.getFullYear(),e=n.getMonth(),s=new Date(0);return s.setFullYear(a,e+1,0),s.setHours(0,0,0,0),s.getDate()}function Hy(t){Gn(1,arguments);var n=Rn(t),a=n.getMonth();return a}function _g(t){Gn(1,arguments);var n=Rn(t),a=n.getFullYear();return a}function Ml(t,n){Gn(2,arguments);var a=Zn(n);return Fr(t,-a)}function Dd(t,n){if(Gn(2,arguments),!n||typeof n!="object")return new Date(NaN);var a="years"in n?Zn(n.years):0,e="months"in n?Zn(n.months):0,s="weeks"in n?Zn(n.weeks):0,r="days"in n?Zn(n.days):0,o="hours"in n?Zn(n.hours):0,i="minutes"in n?Zn(n.minutes):0,l="seconds"in n?Zn(n.seconds):0,c=Ml(Rn(t),e+a*12),d=Ko(c,r+s*7),u=i+o*60,m=l+u*60,h=m*1e3,_=new Date(d.getTime()-h);return _}function jy(t){var n=t.start,a=t.end;Gn(1,arguments);var e=Rn(n),s=Rn(a);if(!Ws(e))throw new RangeError("Start Date is invalid");if(!Ws(s))throw new RangeError("End Date is invalid");var r={years:0,months:0,days:0,hours:0,minutes:0,seconds:0},o=Jb(e,s);r.years=Math.abs(j$(e,s));var i=Dd(e,{years:o*r.years});r.months=Math.abs(D4(i,s));var l=Dd(i,{months:o*r.months});r.days=Math.abs(Qb(l,s));var c=Dd(l,{days:o*r.days});r.hours=Math.abs(V$(c,s));var d=Dd(c,{hours:o*r.hours});r.minutes=Math.abs(bf(d,s));var u=Dd(d,{minutes:o*r.minutes});return r.seconds=Math.abs(G2(u,s)),r}function lm(t,n){Gn(2,arguments);var a=Rn(t),e=Rn(n);return a.getTime()>e.getTime()}function cm(t,n){Gn(2,arguments);var a=Rn(t),e=Rn(n);return a.getTime()<e.getTime()}function Gx(t){return Gn(1,arguments),Rn(t).getDay()===1}function vf(t,n){Gn(2,arguments);var a=Rn(t),e=Rn(n);return a.getFullYear()===e.getFullYear()&&a.getMonth()===e.getMonth()}function dm(t,n){Gn(2,arguments);var a=Rn(t).getTime(),e=Rn(n.start).getTime(),s=Rn(n.end).getTime();if(!(e<=s))throw new RangeError("Invalid interval");return a>=e&&a<=s}var Vx=36e5,Hx=6e4,Y$=2,Ip={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},K$=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,X$=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,q$=/^([+-])(\d{2})(?::?(\d{2}))?$/;function um(t,n){Gn(1,arguments);var a=n||{},e=a.additionalDigits==null?Y$:Zn(a.additionalDigits);if(e!==2&&e!==1&&e!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var s=Z$(t),r;if(s.date){var o=Q$(s.date,e);r=J$(o.restDateString,o.year)}if(isNaN(r)||!r)return new Date(NaN);var i=r.getTime(),l=0,c;if(s.time&&(l=e7(s.time),isNaN(l)||l===null))return new Date(NaN);if(s.timezone){if(c=t7(s.timezone),isNaN(c))return new Date(NaN)}else{var d=new Date(i+l),u=new Date(0);return u.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),u.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),u}return new Date(i+l+c)}function Z$(t){var n={},a=t.split(Ip.dateTimeDelimiter),e;if(a.length>2)return n;if(/:/.test(a[0])?(n.date=null,e=a[0]):(n.date=a[0],e=a[1],Ip.timeZoneDelimiter.test(n.date)&&(n.date=t.split(Ip.timeZoneDelimiter)[0],e=t.substr(n.date.length,t.length))),e){var s=Ip.timezone.exec(e);s?(n.time=e.replace(s[1],""),n.timezone=s[1]):n.time=e}return n}function Q$(t,n){var a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+n)+"})|(\\d{2}|[+-]\\d{"+(2+n)+"})$)"),e=t.match(a);if(!e)return{year:null};var s=e[1]&&parseInt(e[1]),r=e[2]&&parseInt(e[2]);return{year:r==null?s:r*100,restDateString:t.slice((e[1]||e[2]).length)}}function J$(t,n){if(n===null)return null;var a=t.match(K$);if(!a)return null;var e=!!a[4],s=Pd(a[1]),r=Pd(a[2])-1,o=Pd(a[3]),i=Pd(a[4]),l=Pd(a[5])-1;if(e)return r7(n,i,l)?n7(n,i,l):new Date(NaN);var c=new Date(0);return!s7(n,r,o)||!o7(n,s)?new Date(NaN):(c.setUTCFullYear(n,r,Math.max(s,o)),c)}function Pd(t){return t?parseInt(t):1}function e7(t){var n=t.match(X$);if(!n)return null;var a=gg(n[1]),e=gg(n[2]),s=gg(n[3]);return i7(a,e,s)?a*Vx+e*Hx+s*1e3:NaN}function gg(t){return t&&parseFloat(t.replace(",","."))||0}function t7(t){if(t==="Z")return 0;var n=t.match(q$);if(!n)return 0;var a=n[1]==="+"?-1:1,e=parseInt(n[2]),s=n[3]&&parseInt(n[3])||0;return l7(e,s)?a*(e*Vx+s*Hx):NaN}function n7(t,n,a){var e=new Date(0);e.setUTCFullYear(t,0,4);var s=e.getUTCDay()||7,r=(n-1)*7+a+1-s;return e.setUTCDate(e.getUTCDate()+r),e}var a7=[31,null,31,30,31,30,31,31,30,31,30,31];function jx(t){return t%400===0||t%4===0&&t%100}function s7(t,n,a){return n>=0&&n<=11&&a>=1&&a<=(a7[n]||(jx(t)?29:28))}function o7(t,n){return n>=1&&n<=(jx(t)?366:365)}function r7(t,n,a){return n>=1&&n<=53&&a>=0&&a<=6}function i7(t,n,a){return t===24?n===0&&a===0:a>=0&&a<60&&n>=0&&n<60&&t>=0&&t<25}function l7(t,n){return n>=0&&n<=59}function pm(t,n){Gn(2,arguments);var a=Rn(t),e=Zn(n),s=a.getFullYear(),r=a.getDate(),o=new Date(0);o.setFullYear(s,e,15),o.setHours(0,0,0,0);var i=z$(o);return a.setMonth(e,Math.min(r,i)),a}function c7(t,n){Gn(2,arguments);var a=Rn(t),e=Zn(n);return a.setHours(e),a}function d7(t,n){Gn(2,arguments);var a=Rn(t),e=Zn(n);return a.setMinutes(e),a}function u7(t,n){Gn(2,arguments);var a=Rn(t),e=Zn(n);return a.setSeconds(e),a}function Wy(t,n){Gn(2,arguments);var a=Rn(t),e=Zn(n);return isNaN(a.getTime())?new Date(NaN):(a.setFullYear(e),a)}function pv(t,n){Gn(2,arguments);var a=Zn(n);return im(t,-a)}const p7=[{id:1,label:"M"},{id:2,label:"T"},{id:3,label:"W"},{id:4,label:"T"},{id:5,label:"F"},{id:6,label:"S"},{id:7,label:"S"}],fv=[{label:"DATE_PICKER.DATE_RANGE_OPTIONS.LAST_7_DAYS",value:"last7days"},{label:"DATE_PICKER.DATE_RANGE_OPTIONS.LAST_30_DAYS",value:"last30days"},{label:"DATE_PICKER.DATE_RANGE_OPTIONS.LAST_3_MONTHS",value:"last3months"},{label:"DATE_PICKER.DATE_RANGE_OPTIONS.LAST_6_MONTHS",value:"last6months"},{label:"DATE_PICKER.DATE_RANGE_OPTIONS.LAST_YEAR",value:"lastYear"},{label:"DATE_PICKER.DATE_RANGE_OPTIONS.CUSTOM_RANGE",value:"custom"}],zy={LAST_7_DAYS:"last7days",LAST_30_DAYS:"last30days",LAST_3_MONTHS:"last3months",LAST_6_MONTHS:"last6months",LAST_YEAR:"lastYear",CUSTOM_RANGE:"custom"},Tr={START_CALENDAR:"start",END_CALENDAR:"end"},Ui={WEEK:"week",MONTH:"month",YEAR:"year"},f7=t=>Mn(t,"MMMM"),Wx=t=>Mn(t,"yyyy"),bg=()=>{const e=new Date(2222,11,15);return new Intl.DateTimeFormat(navigator.language).format(e).replace("2222","yyyy").replace("12","MM").replace("15","dd")},m7=(t,n)=>Array.from({length:Math.ceil(t.length/n)},(a,e)=>t.slice(e*n,e*n+n)),Yy=(t,n=1)=>{const a=Ur(t),e=$x(a,{weekStartsOn:n}),s=yu(e,41);return m7(W$({start:e,end:s}),7)},Ky=(t,n,a,e,s)=>{const o={month:{prev:Ml,next:Fr},year:{prev:pv,next:im}}[s][e];if(t==="start")return{start:o(n,1),end:a};const i=o(a,1);return{start:n,end:i}},Xy=(t,n)=>n.getDate()===t.getDate()&&n.getMonth()===t.getMonth()&&n.getFullYear()===t.getFullYear(),qy=(t,n)=>vf(t,n),h7=t=>{const n=P4(t);return t.getDate()===n.getDate()},Cp=(t,n,a)=>{if(!n||!a)return!1;let e=os(n),s=os(a);return e>s&&([e,s]=[s,e]),ck(t,e)||dm(t,{start:e,end:s})},Zy=(t,n,a,e)=>a&&e&&n<=e?dm(t,{start:n,end:e}):!1,Qy=(t,n,a,e)=>{if(n&&!a&&e){const s=yu(t,1);return dm(s,{start:n,end:e})}if(n&&a){const s=yu(t,1);return dm(s,{start:n,end:a})}return!1},Jy=(t,n)=>({last7days:()=>({start:os(Ko(n,6)),end:yo(n)}),last30days:()=>({start:os(Ko(n,29)),end:yo(n)}),last3months:()=>({start:os(Ml(n,3)),end:yo(n)}),last6months:()=>({start:os(Ml(n,6)),end:yo(n)}),lastYear:()=>({start:os(Ml(n,12)),end:yo(n)}),custom:()=>({start:n,end:n})}[t]||(()=>({start:n,end:n})))(),_7={__name:"DatePickerButton",props:{selectedStartDate:Date,selectedEndDate:Date,selectedRange:{type:String,default:""}},emits:["open"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=S(()=>{const c=e.selectedStartDate,d=e.selectedEndDate;if(!Ws(c)||!Ws(d))return"Select a date range";const u=Ep(c,d)?"MMM d":"MMM d yyyy";return Ep(c,new Date)&&Ep(d,new Date)?`${Mn(c,"MMM d")} - ${Mn(d,"MMM d")}`:`${Mn(c,u)} - ${Mn(d,u)}`}),o=S(()=>fv.find(c=>c.value===e.selectedRange).label),l={props:e,emit:s,formatDateRange:r,activeDateRange:o,openDatePicker:()=>{s("open")},computed:S,get dateRanges(){return fv},get format(){return Mn},get isSameYear(){return Ep},get isValid(){return Ws}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}},g7={class:"text-sm font-medium text-n-slate-12"},b7={class:"text-sm font-medium text-n-slate-11"};function v7(t,n,a,e,s,r){const o=H("fluent-icon");return p(),g("button",{class:"inline-flex relative items-center rounded-lg gap-2 py-1.5 px-3 h-8 bg-n-alpha-2 hover:bg-n-alpha-1 active:bg-n-alpha-1",onClick:e.openDatePicker},[v(o,{class:"text-n-slate-12",icon:"calendar",size:"16"}),f("span",g7,C(t.$t(e.activeDateRange)),1),f("span",b7,C(e.formatDateRange),1),v(o,{class:"text-n-slate-12",icon:"chevron-down",size:"14"})])}const E7=G(_7,[["render",v7],["__file","/app/app/javascript/dashboard/components/ui/DatePicker/components/DatePickerButton.vue"]]),S7={__name:"CalendarDateInput",props:{calendarType:{type:String,default:""},dateValue:Date,compareDate:Date,isDisabled:Boolean},emits:["update","validate","error"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{START_CALENDAR:r,END_CALENDAR:o}=Tr,i=S(()=>{var u;return(u=bg())==null?void 0:u.toUpperCase()}),l=S({get:()=>{var u;return((u=e.dateValue)==null?void 0:u.toLocaleDateString(navigator.language))||""},set:u=>{const m=bg(),h=yc(u,m,new Date);Ws(h)&&s("update",h)}}),d={props:e,emit:s,START_CALENDAR:r,END_CALENDAR:o,dateFormat:i,localDateValue:l,validateDate:()=>{if(!Ws(e.dateValue)){s("error",`Please enter the date in valid format: ${i.value}`);return}const{calendarType:u,compareDate:m,dateValue:h}=e,_=u===r,E=u===o;m&&_&&lm(h,m)?s("error","Start date must be before the end date."):m&&E&&cm(h,m)?s("error","End date must be after the start date."):s("validate",h)},computed:S,get parse(){return yc},get isValid(){return Ws},get isAfter(){return lm},get isBefore(){return cm},get getIntlDateFormatForLocale(){return bg},get CALENDAR_TYPES(){return Tr}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}},T7={class:"h-[82px] flex flex-col items-start px-5 gap-1.5 pt-4 w-full"},A7={class:"text-sm font-medium text-n-slate-12"},y7=["placeholder","disabled"];function I7(t,n,a,e,s,r){return p(),g("div",T7,[f("span",A7,C(a.calendarType===e.START_CALENDAR?t.$t("DATE_PICKER.DATE_RANGE_INPUT.START"):t.$t("DATE_PICKER.DATE_RANGE_INPUT.END")),1),ce(f("input",{"onUpdate:modelValue":n[0]||(n[0]=o=>e.localDateValue=o),type:"text",class:"!text-sm !mb-0 disabled:!outline-n-strong",placeholder:e.dateFormat,disabled:a.isDisabled,onKeypress:Vn(e.validateDate,["enter"])},null,40,y7),[[Et,e.localDateValue]])])}const C7=G(S7,[["render",I7],["__file","/app/app/javascript/dashboard/components/ui/DatePicker/components/CalendarDateInput.vue"]]),O7={__name:"CalendarDateRange",props:{selectedRange:{type:String,default:""}},emits:["setRange"],setup(t,{expose:n,emit:a}){n();const e=a,r={emit:e,setDateRange:o=>{e("setRange",o)},get dateRanges(){return fv}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},N7={class:"w-[200px] flex flex-col items-start"},x7={class:"w-full px-5 py-4 text-sm font-medium capitalize text-start text-n-slate-12"},R7={class:"flex flex-col items-start w-full"},w7=["onClick"];function M7(t,n,a,e,s,r){return p(),g("div",N7,[f("h4",x7,C(t.$t("DATE_PICKER.DATE_RANGE_OPTIONS.TITLE")),1),f("div",R7,[(p(!0),g(de,null,Ae(e.dateRanges,o=>(p(),g("button",{key:o.label,class:oe(["w-full px-5 py-3 text-sm font-medium truncate border-none rounded-none text-start hover:bg-n-alpha-2 dark:hover:bg-n-solid-3",o.value===a.selectedRange?"text-n-slate-12 bg-n-alpha-1 dark:bg-n-solid-active":"text-n-slate-12"]),onClick:i=>e.setDateRange(o)},C(t.$t(o.label)),11,w7))),128))])])}const L7=G(O7,[["render",M7],["__file","/app/app/javascript/dashboard/components/ui/DatePicker/components/CalendarDateRange.vue"]]),D7={__name:"CalendarAction",props:{calendarType:{type:String,default:"start"},firstButtonLabel:{type:String,default:""},buttonLabel:{type:String,default:""},viewMode:{type:String,default:""}},emits:["prev","next","setView"],setup(t,{expose:n,emit:a}){n();const e=a,{YEAR:s}=Ui,l={emit:e,YEAR:s,onClickPrev:c=>{e("prev",c)},onClickNext:c=>{e("next",c)},onClickSetView:(c,d)=>{e("setView",c,d)},get CALENDAR_PERIODS(){return Ui},NextButton:Se};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}},P7={class:"flex items-start justify-between w-full h-9"},k7={class:"flex items-center gap-1"};function B7(t,n,a,e,s,r){return p(),g("div",P7,[v(e.NextButton,{slate:"",ghost:"",xs:"",icon:"i-lucide-chevron-left",class:"rtl:rotate-180",onClick:n[0]||(n[0]=o=>e.onClickPrev(a.calendarType))}),f("div",k7,[a.firstButtonLabel?(p(),g("button",{key:0,class:"p-0 text-sm font-medium text-center text-n-slate-12 hover:text-n-brand",onClick:n[1]||(n[1]=o=>e.onClickSetView(a.calendarType,a.viewMode))},C(a.firstButtonLabel),1)):O("v-if",!0),a.buttonLabel?(p(),g("button",{key:1,class:oe(["p-0 text-sm font-medium text-center text-n-slate-12",{"hover:text-n-brand":a.viewMode}]),onClick:n[2]||(n[2]=o=>e.onClickSetView(a.calendarType,e.YEAR))},C(a.buttonLabel),3)):O("v-if",!0)]),v(e.NextButton,{slate:"",ghost:"",xs:"",icon:"i-lucide-chevron-right",class:"rtl:rotate-180",onClick:n[3]||(n[3]=o=>e.onClickNext(a.calendarType))})])}const HE=G(D7,[["render",B7],["__file","/app/app/javascript/dashboard/components/ui/DatePicker/components/CalendarAction.vue"]]),F7={__name:"CalendarYear",props:{calendarType:{type:String,default:"start"},startCurrentDate:Date,endCurrentDate:Date},emits:["selectYear"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{START_CALENDAR:r}=Tr,o=y=>{const b=_g(y);return b-b%10},i=P(o(e.calendarType===r?e.startCurrentDate:e.endCurrentDate)),l=S(()=>Array.from({length:10},(y,b)=>i.value+b)),c=S(()=>l.value[0]),d=S(()=>l.value[l.value.length-1]),u=S(()=>{const y=e.calendarType===r?e.startCurrentDate:e.endCurrentDate;return _g(y)}),E={props:e,emit:s,START_CALENDAR:r,calculateStartYear:o,startYear:i,years:l,firstYear:c,lastYear:d,activeYear:u,onClickPrev:()=>{i.value=pv(new Date(i.value,0,1),10).getFullYear()},onClickNext:()=>{i.value=im(new Date(i.value,0,1),10).getFullYear()},selectYear:y=>{s("selectYear",y)},ref:P,computed:S,get getYear(){return _g},get addYears(){return im},get subYears(){return pv},get CALENDAR_TYPES(){return Tr},CalendarAction:HE};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}},U7={class:"flex flex-col w-full gap-2 max-h-[312px]"},$7={class:"grid grid-cols-2 gap-x-3 gap-y-2 w-full auto-rows-[47px]"},G7=["onClick"];function V7(t,n,a,e,s,r){return p(),g("div",U7,[v(e.CalendarAction,{"calendar-type":a.calendarType,"button-label":`${e.firstYear} - ${e.lastYear}`,onPrev:e.onClickPrev,onNext:e.onClickNext},null,8,["calendar-type","button-label"]),f("div",$7,[(p(!0),g(de,null,Ae(e.years,o=>(p(),g("button",{key:o,class:oe(["p-2 text-sm font-medium text-center text-n-slate-12 w-[144px] h-10 rounded-lg py-2.5 px-2",{"bg-n-brand text-white hover:bg-n-blue-10":o===e.activeYear,"hover:bg-n-alpha-2 dark:hover:bg-n-solid-3":o!==e.activeYear}]),onClick:i=>e.selectYear(o)},C(o),11,G7))),128))])])}const H7=G(F7,[["render",V7],["__file","/app/app/javascript/dashboard/components/ui/DatePicker/components/CalendarYear.vue"]]),j7={__name:"CalendarMonth",props:{calendarType:{type:String,default:"start"},startCurrentDate:Date,endCurrentDate:Date},emits:["selectMonth","prev","next","setView"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{START_CALENDAR:r}=Tr,{MONTH:o,YEAR:i}=Ui,l=Array.from({length:12},(E,y)=>Mn(pm(Ur(new Date),y),"MMM")),c=S(()=>{const E=e.calendarType===r?e.startCurrentDate:e.endCurrentDate;return Hy(E)}),_={props:e,emit:s,START_CALENDAR:r,MONTH:o,YEAR:i,months:l,activeMonthIndex:c,setViewMode:(E,y)=>{s("setView",E,y)},onClickPrev:()=>{s("prev")},onClickNext:()=>{s("next")},selectMonth:E=>{s("selectMonth",E)},computed:S,get format(){return Mn},get getMonth(){return Hy},get setMonth(){return pm},get startOfMonth(){return Ur},get yearName(){return Wx},get CALENDAR_TYPES(){return Tr},get CALENDAR_PERIODS(){return Ui},CalendarAction:HE};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}},W7={class:"flex flex-col w-full gap-2 max-h-[312px]"},z7={class:"grid w-full grid-cols-3 gap-x-3 gap-y-2 auto-rows-[61px]"},Y7=["onClick"];function K7(t,n,a,e,s,r){return p(),g("div",W7,[v(e.CalendarAction,{"view-mode":e.YEAR,"calendar-type":a.calendarType,"button-label":e.yearName(a.calendarType===e.START_CALENDAR?a.startCurrentDate:a.endCurrentDate,e.MONTH),onSetView:e.setViewMode,onPrev:e.onClickPrev,onNext:e.onClickNext},null,8,["view-mode","calendar-type","button-label"]),f("div",z7,[(p(!0),g(de,null,Ae(e.months,(o,i)=>(p(),g("button",{key:i,class:oe(["p-2 text-sm font-medium text-center text-n-slate-12 w-[92px] h-10 rounded-lg py-2.5 px-2",{"bg-n-brand text-white hover:bg-n-blue-10":i===e.activeMonthIndex,"hover:bg-n-alpha-2 dark:hover:bg-n-solid-3":i!==e.activeMonthIndex}]),onClick:l=>e.selectMonth(i)},C(o),11,Y7))),128))])])}const X7=G(j7,[["render",K7],["__file","/app/app/javascript/dashboard/components/ui/DatePicker/components/CalendarMonth.vue"]]),q7={__name:"CalendarWeekLabel",setup(t,{expose:n}){n();const a={get calendarWeeks(){return p7}};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},Z7={class:"max-w-md mx-auto grid grid-cols-7 gap-2"};function Q7(t,n,a,e,s,r){return p(),g("div",Z7,[(p(!0),g(de,null,Ae(e.calendarWeeks,o=>(p(),g("div",{key:o.id,class:"flex items-center justify-center font-medium text-sm w-9 h-7 py-1.5 px-2"},C(o.label),1))),128))])}const J7=G(q7,[["render",Q7],["__file","/app/app/javascript/dashboard/components/ui/DatePicker/components/CalendarWeekLabel.vue"]]),eG={__name:"CalendarWeek",props:{calendarType:{type:String,default:"start"},currentDate:Date,startCurrentDate:Date,endCurrentDate:Date,selectedStartDate:Date,selectingEndDate:Boolean,selectedEndDate:Date,hoveredEndDate:Date},emits:["updateHoveredEndDate","selectDate","prev","next","setView"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{START_CALENDAR:r}=Tr,{MONTH:o}=Ui,i=I=>{s("updateHoveredEndDate",I)},l=I=>{s("selectDate",I)},c=()=>{s("prev")},d=()=>{s("next")},u=(I,N)=>{s("setView",I,N)},m=I=>Yy(I===r?e.startCurrentDate:e.endCurrentDate),h=I=>Cp(I,e.selectedStartDate,e.selectedStartDate)||Cp(I,e.selectedEndDate,e.selectedEndDate),_=I=>Cp(I,e.selectedStartDate,e.selectedEndDate),E=I=>qy(I,e.calendarType===r?e.startCurrentDate:e.endCurrentDate),y=I=>Zy(I,e.selectedStartDate,e.selectingEndDate,e.hoveredEndDate),T={props:e,emit:s,START_CALENDAR:r,MONTH:o,emitHoveredEndDate:i,emitSelectDate:l,onClickPrev:c,onClickNext:d,setViewMode:u,weeks:m,isSelectedStartOrEndDate:h,isInRange:_,isInCurrentMonth:E,isHoveringInRange:y,isNextDayInRange:I=>Qy(I,e.selectedStartDate,e.selectedEndDate,e.hoveredEndDate),dayClasses:I=>({"text-n-slate-10 pointer-events-none":!E(I),"text-n-slate-12 hover:text-n-slate-12 hover:bg-n-blue-6 dark:hover:bg-n-blue-7":E(I),"bg-n-brand text-white":h(I)&&E(I),"bg-n-blue-4 dark:bg-n-blue-5":(_(I)||y(I))&&!h(I)&&E(I),"outline outline-1 outline-n-blue-8 -outline-offset-1 !text-n-blue-text":Xy(e.currentDate,I)&&!h(I)}),get monthName(){return f7},get yearName(){return Wx},get getWeeksForMonth(){return Yy},get isToday(){return Xy},get dayIsInRange(){return Cp},get isCurrentMonth(){return qy},get isLastDayOfMonth(){return h7},get isHoveringDayInRange(){return Zy},get isHoveringNextDayInRange(){return Qy},get CALENDAR_TYPES(){return Tr},get CALENDAR_PERIODS(){return Ui},CalendarWeekLabel:J7,CalendarAction:HE};return Object.defineProperty(T,"__isScriptSetup",{enumerable:!1,value:!0}),T}},tG={class:"flex flex-col w-full gap-2 max-h-[312px]"},nG=["onMouseenter","onClick"],aG={key:0,class:"absolute bottom-0 w-6 h-8 ltr:-right-4 rtl:-left-4 bg-n-blue-4 dark:bg-n-blue-5 -z-10"};function sG(t,n,a,e,s,r){return p(),g("div",tG,[v(e.CalendarAction,{"view-mode":e.MONTH,"calendar-type":a.calendarType,"first-button-label":e.monthName(a.calendarType===e.START_CALENDAR?a.startCurrentDate:a.endCurrentDate),"button-label":e.yearName(a.calendarType===e.START_CALENDAR?a.startCurrentDate:a.endCurrentDate),onPrev:e.onClickPrev,onNext:e.onClickNext,onSetView:e.setViewMode},null,8,["view-mode","calendar-type","first-button-label","button-label"]),v(e.CalendarWeekLabel),(p(!0),g(de,null,Ae(e.weeks(a.calendarType),o=>(p(),g("div",{key:o[0].getTime(),class:"grid max-w-md grid-cols-7 gap-2 mx-auto overflow-hidden rounded-lg"},[(p(!0),g(de,null,Ae(o,i=>(p(),g("div",{key:i.getTime(),class:oe(["flex relative items-center justify-center w-9 h-8 py-1.5 px-2 font-medium text-sm rounded-lg cursor-pointer",e.dayClasses(i)]),onMouseenter:l=>e.emitHoveredEndDate(i),onMouseleave:n[0]||(n[0]=l=>e.emitHoveredEndDate(null)),onClick:l=>e.emitSelectDate(i)},[Oe(C(i.getDate())+" ",1),(e.isInRange(i)||e.isHoveringInRange(i))&&e.isNextDayInRange(i)&&!e.isLastDayOfMonth(i)&&e.isInCurrentMonth(i)?(p(),g("span",aG)):O("v-if",!0)],42,nG))),128))]))),128))])}const oG=G(eG,[["render",sG],["__file","/app/app/javascript/dashboard/components/ui/DatePicker/components/CalendarWeek.vue"]]),rG={__name:"CalendarFooter",emits:["clear","change"],setup(t,{expose:n,emit:a}){n();const e=a,o={emit:e,onClickClear:()=>{e("clear")},onClickApply:()=>{e("change")},NextButton:Se};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},iG={class:"h-[56px] flex justify-between gap-2 px-2 py-3 items-center"};function lG(t,n,a,e,s,r){return p(),g("div",iG,[v(e.NextButton,{slate:"",ghost:"",sm:"",label:t.$t("DATE_PICKER.CLEAR_BUTTON"),onClick:e.onClickClear},null,8,["label"]),v(e.NextButton,{sm:"",ghost:"",label:t.$t("DATE_PICKER.APPLY_BUTTON"),onClick:e.onClickApply},null,8,["label"])])}const cG=G(rG,[["render",lG],["__file","/app/app/javascript/dashboard/components/ui/DatePicker/components/CalendarFooter.vue"]]),dG={__name:"DatePicker",emits:["dateRangeChanged"],setup(t,{expose:n,emit:a}){n();const e=a,{LAST_7_DAYS:s,LAST_30_DAYS:r,CUSTOM_RANGE:o}=zy,{START_CALENDAR:i,END_CALENDAR:l}=Tr,{WEEK:c,MONTH:d,YEAR:u}=Ui,m=P(!1),h=P({start:c,end:c}),_=P(new Date),E=P(os(Ko(_.value,6))),y=P(yo(_.value)),b=P(os(E.value)),A=P(vf(E.value,y.value)?Ur(Fr(y.value,1)):Ur(y.value)),T=P(!1),I=P(s),N=P(null),x=P(E.value),R=P(y.value);je(I,U=>{if(U!==o){const J=U===s||U===r;b.value=E.value,A.value=J&&vf(E.value,y.value)?Ur(Fr(E.value,1)):y.value,T.value=!1}else T.value||(b.value=os(_.value))}),je([E,y],([U,J])=>{Ws(U)?x.value=U:x.value=E.value,Ws(J)?R.value=J:R.value=y.value},{immediate:!0}),je([b,A],([U,J],[te,q])=>{const K=FT(J,U);U!==te&&(lm(U,J)||K===0)&&(A.value=Fr(U,1)),J!==q&&(cm(J,U)||K===0)&&(b.value=Ml(J,1))},{immediate:!0,deep:!0});const M=U=>{I.value=U.value;const{start:J,end:te}=Jy(U.value,_.value);E.value=J,y.value=te},w=(U,J,te=d)=>{const{start:q,end:K}=Ky(U,b.value,A.value,J,te);b.value=q,A.value=K},D=U=>{I.value=o,!T.value||U<E.value?(E.value=U,y.value=null,T.value=!0):(y.value=U,T.value=!1)},B=(U,J)=>{I.value=o,h.value[U]=J},j={emit:e,LAST_7_DAYS:s,LAST_30_DAYS:r,CUSTOM_RANGE:o,START_CALENDAR:i,END_CALENDAR:l,WEEK:c,MONTH:d,YEAR:u,showDatePicker:m,calendarViews:h,currentDate:_,selectedStartDate:E,selectedEndDate:y,startCurrentDate:b,endCurrentDate:A,selectingEndDate:T,selectedRange:I,hoveredEndDate:N,manualStartDate:x,manualEndDate:R,setDateRange:M,moveCalendar:w,selectDate:D,setViewMode:B,openCalendar:(U,J,te=d)=>{const q=J===i?b.value:A.value,K=te===d?pm(Ur(q),U):Wy(q,U);J===i?b.value=K:A.value=K,B(J,te===d?c:d)},updateManualInput:(U,J)=>{J===i?(E.value=U,b.value=U):(y.value=U,A.value=U),T.value=!1},handleManualInputError:U=>{Z(U)},resetDatePicker:()=>{b.value=os(_.value),A.value=Fr(os(_.value),1),E.value=os(Ko(_.value,6)),y.value=yo(_.value),T.value=!1,I.value=s,h.value={start:c,end:c}},emitDateRange:()=>{!Ws(E.value)||!Ws(y.value)?Z("Please select a valid time range"):(m.value=!1,e("dateRangeChanged",[E.value,y.value]))},ref:P,watch:je,get getActiveDateRange(){return Jy},get moveCalendarDate(){return Ky},get DATE_RANGE_TYPES(){return zy},get CALENDAR_TYPES(){return Tr},get CALENDAR_PERIODS(){return Ui},get isValid(){return Ws},get startOfMonth(){return Ur},get subDays(){return Ko},get startOfDay(){return os},get endOfDay(){return yo},get isBefore(){return cm},get subMonths(){return Ml},get addMonths(){return Fr},get isSameMonth(){return vf},get differenceInCalendarMonths(){return FT},get setMonth(){return pm},get setYear(){return Wy},get isAfter(){return lm},get useAlert(){return Z},DatePickerButton:E7,CalendarDateInput:C7,CalendarDateRange:L7,CalendarYear:H7,CalendarMonth:X7,CalendarWeek:oG,CalendarFooter:cG};return Object.defineProperty(j,"__isScriptSetup",{enumerable:!1,value:!0}),j}},uG={class:"relative font-inter"},pG={key:0,class:"flex absolute top-9 ltr:left-0 rtl:right-0 z-30 shadow-md select-none w-[880px] h-[490px] rounded-2xl bg-n-alpha-3 backdrop-blur-[100px] border-0 outline outline-1 outline-n-container"},fG={class:"flex flex-col w-[680px] ltr:border-l rtl:border-r border-n-strong"},mG={class:"flex justify-around h-fit"},hG={class:"py-5 border-b border-n-strong"};function _G(t,n,a,e,s,r){return p(),g("div",uG,[v(e.DatePickerButton,{"selected-start-date":e.selectedStartDate,"selected-end-date":e.selectedEndDate,"selected-range":e.selectedRange,onOpen:n[0]||(n[0]=o=>e.showDatePicker=!e.showDatePicker)},null,8,["selected-start-date","selected-end-date","selected-range"]),e.showDatePicker?(p(),g("div",pG,[v(e.CalendarDateRange,{"selected-range":e.selectedRange,onSetRange:e.setDateRange},null,8,["selected-range"]),f("div",fG,[f("div",mG,[O(" Calendars for Start and End Dates "),(p(!0),g(de,null,Ae([e.START_CALENDAR,e.END_CALENDAR],o=>(p(),g("div",{key:`${o}-calendar`,class:"flex flex-col items-center"},[v(e.CalendarDateInput,{"calendar-type":o,"date-value":o===e.START_CALENDAR?e.manualStartDate:e.manualEndDate,"compare-date":o===e.START_CALENDAR?e.manualEndDate:e.manualStartDate,"is-disabled":e.selectedRange!==e.CUSTOM_RANGE,onUpdate:i=>o===e.START_CALENDAR?e.manualStartDate=i:e.manualEndDate=i,onValidate:i=>e.updateManualInput(i,o),onError:n[1]||(n[1]=i=>e.handleManualInputError(i))},null,8,["calendar-type","date-value","compare-date","is-disabled","onUpdate","onValidate"]),f("div",hG,[f("div",{class:oe(["flex flex-col items-center gap-2 px-5 min-w-[340px] max-h-[352px]",o===e.START_CALENDAR&&"ltr:border-r rtl:border-l border-n-strong"])},[e.calendarViews[o]===e.YEAR?(p(),L(e.CalendarYear,{key:0,"calendar-type":o,"start-current-date":e.startCurrentDate,"end-current-date":e.endCurrentDate,onSelectYear:i=>e.openCalendar(i,o,e.YEAR)},null,8,["calendar-type","start-current-date","end-current-date","onSelectYear"])):e.calendarViews[o]===e.MONTH?(p(),L(e.CalendarMonth,{key:1,"calendar-type":o,"start-current-date":e.startCurrentDate,"end-current-date":e.endCurrentDate,onSelectMonth:i=>e.openCalendar(i,o),onSetView:e.setViewMode,onPrev:i=>e.moveCalendar(o,"prev",e.YEAR),onNext:i=>e.moveCalendar(o,"next",e.YEAR)},null,8,["calendar-type","start-current-date","end-current-date","onSelectMonth","onPrev","onNext"])):e.calendarViews[o]===e.WEEK?(p(),L(e.CalendarWeek,{key:2,"calendar-type":o,"current-date":e.currentDate,"start-current-date":e.startCurrentDate,"end-current-date":e.endCurrentDate,"selected-start-date":e.selectedStartDate,"selected-end-date":e.selectedEndDate,"selecting-end-date":e.selectingEndDate,"hovered-end-date":e.hoveredEndDate,onUpdateHoveredEndDate:n[2]||(n[2]=i=>e.hoveredEndDate=i),onSelectDate:e.selectDate,onSetView:e.setViewMode,onPrev:i=>e.moveCalendar(o,"prev"),onNext:i=>e.moveCalendar(o,"next")},null,8,["calendar-type","current-date","start-current-date","end-current-date","selected-start-date","selected-end-date","selecting-end-date","hovered-end-date","onPrev","onNext"])):O("v-if",!0)],2)])]))),128))]),v(e.CalendarFooter,{onChange:e.emitDateRange,onClear:e.resetDatePicker})])])):O("v-if",!0)])}const gG=G(dG,[["render",_G],["__file","/app/app/javascript/dashboard/components/ui/DatePicker/DatePicker.vue"]]),zx={Code:cF,ColorPicker:mF,ConfirmDeleteModal:wx,ConfirmModal:yF,DeleteModal:NF,DropdownItem:hh,DropdownMenu:_h,FeatureToggle:BF,Input:WF,PhoneInput:u$,Label:b$,LoadingState:Ed,Modal:Hl,ModalHeader:w$,Spinner:ls,Tabs:D$,TabsItem:F$,DatePicker:gG,install(t){const n=Object.keys(this);n.pop();let a=n.length;for(;a--;)t.component(`woot${n[a]}`,this[n[a]])}};typeof window<"u"&&window.Vue&&window.Vue.use(zx);const bG={components:{NextButton:Se},props:{show:{type:Boolean,default:!1},hasAccounts:{type:Boolean,default:!0}},emits:["closeAccountCreateModal"],setup(){return{v$:rt()}},data(){return{accountName:""}},validations(){return{accountName:{required:Ge,minLength:Rt(1)}}},computed:{..._t({uiFlags:"agents/getUIFlags"})},methods:{async addAccount(){try{const t=await this.$store.dispatch("accounts/create",{account_name:this.accountName});this.$emit("closeAccountCreateModal"),Z(this.$t("CREATE_ACCOUNT.API.SUCCESS_MESSAGE")),window.location=`/app/accounts/${t}/dashboard`}catch(t){t.response.status===422?Z(this.$t("CREATE_ACCOUNT.API.EXIST_MESSAGE")):Z(this.$t("CREATE_ACCOUNT.API.ERROR_MESSAGE"))}}}},vG={class:"flex flex-col h-auto overflow-auto"},EG={key:0,class:"mx-8 mt-6 mb-0 text-sm"},SG={class:"flex items-center rounded-md alert"},TG={class:"ml-1 mr-3"},AG={class:"w-full"},yG=["placeholder"],IG={class:"w-full flex justify-end gap-2 items-center"};function CG(t,n,a,e,s,r){const o=H("woot-modal-header"),i=H("fluent-icon"),l=H("NextButton"),c=H("woot-modal");return p(),L(c,{show:a.show,"on-close":()=>t.$emit("closeAccountCreateModal")},{default:z(()=>[f("div",vG,[v(o,{"header-title":t.$t("CREATE_ACCOUNT.NEW_ACCOUNT"),"header-content":t.$t("CREATE_ACCOUNT.SELECTOR_SUBTITLE")},null,8,["header-title","header-content"]),a.hasAccounts?O("v-if",!0):(p(),g("div",EG,[f("div",SG,[f("div",TG,[v(i,{icon:"warning"})]),Oe(" "+C(t.$t("CREATE_ACCOUNT.NO_ACCOUNT_WARNING")),1)])])),f("form",{class:"flex flex-col w-full",onSubmit:n[3]||(n[3]=Ve((...d)=>r.addAccount&&r.addAccount(...d),["prevent"]))},[f("div",AG,[f("label",{class:oe({error:e.v$.accountName.$error})},[Oe(C(t.$t("CREATE_ACCOUNT.FORM.NAME.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[0]||(n[0]=d=>s.accountName=d),type:"text",placeholder:t.$t("CREATE_ACCOUNT.FORM.NAME.PLACEHOLDER"),onInput:n[1]||(n[1]=(...d)=>e.v$.accountName.$touch&&e.v$.accountName.$touch(...d))},null,40,yG),[[Et,s.accountName]])],2)]),f("div",IG,[v(l,{faded:"",slate:"",type:"reset",label:t.$t("CREATE_ACCOUNT.FORM.CANCEL"),onClick:n[2]||(n[2]=Ve(()=>t.$emit("closeAccountCreateModal"),["prevent"]))},null,8,["label"]),v(l,{type:"submit",label:t.$t("CREATE_ACCOUNT.FORM.SUBMIT"),"is-loading":t.uiFlags.isCreating,disabled:e.v$.accountName.$invalid||e.v$.accountName.$invalid||t.uiFlags.isCreating},null,8,["label","is-loading","disabled"])])],32)])]),_:1},8,["show","on-close"])}const Yx=G(bG,[["render",CG],["__file","/app/app/javascript/dashboard/components/app/AddAccountModal.vue"]]),Ns=(t,n)=>{const a=()=>{Mt.off(t,n)};return Pe(()=>{Mt.on(t,n)}),gr(a),a},OG=(t,n=[])=>{const{meta:{permissions:a=[]}={}}=t;return SE(a,n)},NG=(t,n)=>{const{accountId:a}=t.params,s=[{permissions:[...Ua,..._s],path:"dashboard"},{permissions:[Cc],path:"contacts"},{permissions:[Qk],path:"reports/overview"},{permissions:[Oc],path:"portals"}].find(({permissions:r})=>SE(r,n));return`accounts/${a}/${s?s.path:"dashboard"}`},xG=(t,n)=>{const a=`accounts/${t.params.accountId}/dashboard`;if(t.name==="account_suspended")return a;const e=Yf(n,t.params.accountId);return OG(t,e)?null:NG(t,e)},RG=(t,n)=>{const a=Zk(n,Number(t.params.accountId));return a?a.status==="active"?xG(t,n):t.name!=="account_suspended"?`accounts/${t.params.accountId}/suspended`:null:"app/login"},fm=(t,n=!1,a=!0)=>{const e=["home","conversation_mentions","conversation_unattended","inbox_dashboard","label_conversations","team_conversations","folder_conversations","conversation_participating"],s=["inbox_conversation","conversation_through_mentions","conversation_through_unattended","conversation_through_inbox","conversations_through_label","conversations_through_team","conversations_through_folders","conversation_through_participating"];return[...n?e:[],...a?s:[]].includes(t)},wG=t=>{switch(t){case"inbox_conversation":return"home";case"conversation_through_mentions":return"conversation_mentions";case"conversation_through_unattended":return"conversation_unattended";case"conversations_through_label":return"label_conversations";case"conversations_through_team":return"team_conversations";case"conversations_through_folders":return"folder_conversations";case"conversation_through_participating":return"conversation_participating";case"conversation_through_inbox":return"inbox_dashboard";default:return null}},mm=(t,n=!1)=>{const a=["inbox_view"],e=["inbox_view_conversation"];return(n?[...a,...e]:e).includes(t)},mv=t=>t==="notifications_index",e0=2e3,MG={__name:"NetworkNotification",setup(t,{expose:n}){n();const{t:a}=Q(),e=lt(),s=P(!navigator.onLine),r=P(!1),o=P(!1),i=P(!1);let l=null;const c=S(()=>o.value?a("NETWORK.NOTIFICATION.RECONNECTING"):i.value?a("NETWORK.NOTIFICATION.RECONNECT_SUCCESS"):a("NETWORK.NOTIFICATION.OFFLINE")),d=S(()=>i.value?"wifi":"wifi-off"),u=S(()=>!o.value&&!i.value),m=()=>{window.location.reload()},h=()=>{s.value=!1,i.value=!1,clearTimeout(l)},_=I=>fm(I,!0)||mm(I,!0)||mv(I),E=()=>{r.value=!0,s.value=!0},y=()=>{r.value=!1,o.value=!1,i.value=!0,s.value=!0,l=setTimeout(h,e0)},b=()=>{_(e.name)?(o.value=!0,i.value=!1,s.value=!0):y()},A=I=>{I.type==="offline"?s.value=!0:I.type==="online"&&!r.value&&y()};pr("online",A),pr("offline",A),Ns(cn.WEBSOCKET_DISCONNECT,E),Ns(cn.WEBSOCKET_RECONNECT_COMPLETED,y),Ns(cn.WEBSOCKET_RECONNECT,b),gr(()=>{clearTimeout(l)});const T={t:a,route:e,RECONNECTED_BANNER_TIMEOUT:e0,showNotification:s,isDisconnected:r,isReconnecting:o,isReconnected:i,get reconnectTimeout(){return l},set reconnectTimeout(I){l=I},bannerText:c,iconName:d,canRefresh:u,refreshPage:m,closeNotification:h,isInAnyOfTheRoutes:_,updateWebsocketStatus:E,handleReconnectionCompleted:y,handleReconnecting:b,updateOnlineStatus:A,ref:P,computed:S,onBeforeUnmount:gr,get useI18n(){return Q},get useRoute(){return lt},get useEmitter(){return Ns},get BUS_EVENTS(){return cn},get isAConversationRoute(){return fm},get isAInboxViewRoute(){return mm},get isNotificationRoute(){return mv},get useEventListener(){return pr},Button:Se};return Object.defineProperty(T,"__isScriptSetup",{enumerable:!1,value:!0}),T}},LG={class:"fixed z-50 top-2 left-2 group"},DG={class:"relative flex items-center justify-between w-full px-2 py-1 bg-n-amber-4 dark:bg-n-amber-8 rounded-lg shadow-lg"},PG={class:"px-2 text-xs font-medium tracking-wide text-n-amber-12"};function kG(t,n,a,e,s,r){const o=H("fluent-icon");return p(),L(Qa,{name:"network-notification-fade",tag:"div",persisted:""},{default:z(()=>[ce(f("div",LG,[f("div",DG,[v(o,{icon:e.iconName,class:"text-n-amber-12",size:"18"},null,8,["icon"]),f("span",PG,C(e.bannerText),1),e.canRefresh?(p(),L(e.Button,{key:0,ghost:"",sm:"",amber:"",icon:"i-lucide-refresh-ccw",title:t.$t("NETWORK.BUTTON.REFRESH"),class:"!text-n-amber-12 dark:!text-n-amber-9",onClick:e.refreshPage},null,8,["title"])):O("v-if",!0),v(e.Button,{ghost:"",sm:"",amber:"",icon:"i-lucide-x",class:"!text-n-amber-12 dark:!text-n-amber-9",onClick:e.closeNotification})])],512),[[En,e.showNotification]])]),_:1})}const BG=G(MG,[["render",kG],["__file","/app/app/javascript/dashboard/components/NetworkNotification.vue"]]),FG={components:{NextButton:Se},props:{bannerMessage:{type:String,default:""},hrefLink:{type:String,default:""},hrefLinkText:{type:String,default:""},hasActionButton:{type:Boolean,default:!1},actionButtonVariant:{type:String,default:"faded"},actionButtonLabel:{type:String,default:""},actionButtonIcon:{type:String,default:"i-lucide-arrow-right"},colorScheme:{type:String,default:""},hasCloseButton:{type:Boolean,default:!1}},emits:["primaryAction","close"],computed:{bannerClasses(){const t=[this.colorScheme];return(this.hasActionButton||this.hasCloseButton)&&t.push("has-button"),t},getButtonColor(){return{primary:"blue",secondary:"blue",alert:"ruby",warning:"amber"}[this.colorScheme]||"blue"}},methods:{onClick(t){this.$emit("primaryAction",t)},onClickClose(t){this.$emit("close",t)}}},UG={class:"banner-message"},$G=["href"],GG={class:"actions"};function VG(t,n,a,e,s,r){const o=H("NextButton");return p(),g("div",{class:oe(["flex items-center justify-center h-12 gap-4 px-4 py-3 text-xs text-white banner dark:text-white woot-banner",r.bannerClasses])},[f("span",UG,[Oe(C(a.bannerMessage)+" ",1),a.hrefLink?(p(),g("a",{key:0,href:a.hrefLink,rel:"noopener noreferrer nofollow",target:"_blank"},C(a.hrefLinkText),9,$G)):O("v-if",!0)]),f("div",GG,[a.hasActionButton?(p(),L(o,{key:0,xs:"",icon:a.actionButtonIcon,variant:a.actionButtonVariant,color:r.getButtonColor,label:a.actionButtonLabel,onClick:r.onClick},null,8,["icon","variant","color","label","onClick"])):O("v-if",!0),a.hasCloseButton?(p(),L(o,{key:1,xs:"",icon:"i-lucide-circle-x",color:r.getButtonColor,label:t.$t("GENERAL_SETTINGS.DISMISS"),onClick:r.onClickClose},null,8,["color","label","onClick"])):O("v-if",!0)])],2)}const qu=G(FG,[["render",VG],["__scopeId","data-v-06478656"],["__file","/app/app/javascript/dashboard/components/ui/Banner.vue"]]);function Es(){const t=xt(),n=S(()=>t.getCurrentRole.value);return{isAdmin:S(()=>n.value==="administrator")}}var hv={exports:{}};const HG="2.0.0",Kx=256,jG=Number.MAX_SAFE_INTEGER||9007199254740991,WG=16,zG=Kx-6,YG=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var vh={MAX_LENGTH:Kx,MAX_SAFE_COMPONENT_LENGTH:WG,MAX_SAFE_BUILD_LENGTH:zG,MAX_SAFE_INTEGER:jG,RELEASE_TYPES:YG,SEMVER_SPEC_VERSION:HG,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},vg={};const KG=typeof process=="object"&&vg&&vg.NODE_DEBUG&&/\bsemver\b/i.test(vg.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};var Eh=KG;(function(t,n){const{MAX_SAFE_COMPONENT_LENGTH:a,MAX_SAFE_BUILD_LENGTH:e,MAX_LENGTH:s}=vh,r=Eh;n=t.exports={};const o=n.re=[],i=n.safeRe=[],l=n.src=[],c=n.t={};let d=0;const u="[a-zA-Z0-9-]",m=[["\\s",1],["\\d",s],[u,e]],h=E=>{for(const[y,b]of m)E=E.split(`${y}*`).join(`${y}{0,${b}}`).split(`${y}+`).join(`${y}{1,${b}}`);return E},_=(E,y,b)=>{const A=h(y),T=d++;r(E,T,y),c[E]=T,l[T]=y,o[T]=new RegExp(y,b?"g":void 0),i[T]=new RegExp(A,b?"g":void 0)};_("NUMERICIDENTIFIER","0|[1-9]\\d*"),_("NUMERICIDENTIFIERLOOSE","\\d+"),_("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${u}*`),_("MAINVERSION",`(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})`),_("MAINVERSIONLOOSE",`(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})`),_("PRERELEASEIDENTIFIER",`(?:${l[c.NUMERICIDENTIFIER]}|${l[c.NONNUMERICIDENTIFIER]})`),_("PRERELEASEIDENTIFIERLOOSE",`(?:${l[c.NUMERICIDENTIFIERLOOSE]}|${l[c.NONNUMERICIDENTIFIER]})`),_("PRERELEASE",`(?:-(${l[c.PRERELEASEIDENTIFIER]}(?:\\.${l[c.PRERELEASEIDENTIFIER]})*))`),_("PRERELEASELOOSE",`(?:-?(${l[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[c.PRERELEASEIDENTIFIERLOOSE]})*))`),_("BUILDIDENTIFIER",`${u}+`),_("BUILD",`(?:\\+(${l[c.BUILDIDENTIFIER]}(?:\\.${l[c.BUILDIDENTIFIER]})*))`),_("FULLPLAIN",`v?${l[c.MAINVERSION]}${l[c.PRERELEASE]}?${l[c.BUILD]}?`),_("FULL",`^${l[c.FULLPLAIN]}$`),_("LOOSEPLAIN",`[v=\\s]*${l[c.MAINVERSIONLOOSE]}${l[c.PRERELEASELOOSE]}?${l[c.BUILD]}?`),_("LOOSE",`^${l[c.LOOSEPLAIN]}$`),_("GTLT","((?:<|>)?=?)"),_("XRANGEIDENTIFIERLOOSE",`${l[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),_("XRANGEIDENTIFIER",`${l[c.NUMERICIDENTIFIER]}|x|X|\\*`),_("XRANGEPLAIN",`[v=\\s]*(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:${l[c.PRERELEASE]})?${l[c.BUILD]}?)?)?`),_("XRANGEPLAINLOOSE",`[v=\\s]*(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:${l[c.PRERELEASELOOSE]})?${l[c.BUILD]}?)?)?`),_("XRANGE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAIN]}$`),_("XRANGELOOSE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAINLOOSE]}$`),_("COERCEPLAIN",`(^|[^\\d])(\\d{1,${a}})(?:\\.(\\d{1,${a}}))?(?:\\.(\\d{1,${a}}))?`),_("COERCE",`${l[c.COERCEPLAIN]}(?:$|[^\\d])`),_("COERCEFULL",l[c.COERCEPLAIN]+`(?:${l[c.PRERELEASE]})?(?:${l[c.BUILD]})?(?:$|[^\\d])`),_("COERCERTL",l[c.COERCE],!0),_("COERCERTLFULL",l[c.COERCEFULL],!0),_("LONETILDE","(?:~>?)"),_("TILDETRIM",`(\\s*)${l[c.LONETILDE]}\\s+`,!0),n.tildeTrimReplace="$1~",_("TILDE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAIN]}$`),_("TILDELOOSE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAINLOOSE]}$`),_("LONECARET","(?:\\^)"),_("CARETTRIM",`(\\s*)${l[c.LONECARET]}\\s+`,!0),n.caretTrimReplace="$1^",_("CARET",`^${l[c.LONECARET]}${l[c.XRANGEPLAIN]}$`),_("CARETLOOSE",`^${l[c.LONECARET]}${l[c.XRANGEPLAINLOOSE]}$`),_("COMPARATORLOOSE",`^${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]})$|^$`),_("COMPARATOR",`^${l[c.GTLT]}\\s*(${l[c.FULLPLAIN]})$|^$`),_("COMPARATORTRIM",`(\\s*)${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]}|${l[c.XRANGEPLAIN]})`,!0),n.comparatorTrimReplace="$1$2$3",_("HYPHENRANGE",`^\\s*(${l[c.XRANGEPLAIN]})\\s+-\\s+(${l[c.XRANGEPLAIN]})\\s*$`),_("HYPHENRANGELOOSE",`^\\s*(${l[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[c.XRANGEPLAINLOOSE]})\\s*$`),_("STAR","(<|>)?=?\\s*\\*"),_("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),_("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(hv,hv.exports);var Zu=hv.exports;const XG=Object.freeze({loose:!0}),qG=Object.freeze({}),ZG=t=>t?typeof t!="object"?XG:t:qG;var jE=ZG;const t0=/^[0-9]+$/,Xx=(t,n)=>{const a=t0.test(t),e=t0.test(n);return a&&e&&(t=+t,n=+n),t===n?0:a&&!e?-1:e&&!a?1:t<n?-1:1},QG=(t,n)=>Xx(n,t);var qx={compareIdentifiers:Xx,rcompareIdentifiers:QG};const Op=Eh,{MAX_LENGTH:n0,MAX_SAFE_INTEGER:Np}=vh,{safeRe:a0,t:s0}=Zu,JG=jE,{compareIdentifiers:sc}=qx;let eV=class ir{constructor(n,a){if(a=JG(a),n instanceof ir){if(n.loose===!!a.loose&&n.includePrerelease===!!a.includePrerelease)return n;n=n.version}else if(typeof n!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof n}".`);if(n.length>n0)throw new TypeError(`version is longer than ${n0} characters`);Op("SemVer",n,a),this.options=a,this.loose=!!a.loose,this.includePrerelease=!!a.includePrerelease;const e=n.trim().match(a.loose?a0[s0.LOOSE]:a0[s0.FULL]);if(!e)throw new TypeError(`Invalid Version: ${n}`);if(this.raw=n,this.major=+e[1],this.minor=+e[2],this.patch=+e[3],this.major>Np||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Np||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Np||this.patch<0)throw new TypeError("Invalid patch version");e[4]?this.prerelease=e[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){const r=+s;if(r>=0&&r<Np)return r}return s}):this.prerelease=[],this.build=e[5]?e[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(n){if(Op("SemVer.compare",this.version,this.options,n),!(n instanceof ir)){if(typeof n=="string"&&n===this.version)return 0;n=new ir(n,this.options)}return n.version===this.version?0:this.compareMain(n)||this.comparePre(n)}compareMain(n){return n instanceof ir||(n=new ir(n,this.options)),sc(this.major,n.major)||sc(this.minor,n.minor)||sc(this.patch,n.patch)}comparePre(n){if(n instanceof ir||(n=new ir(n,this.options)),this.prerelease.length&&!n.prerelease.length)return-1;if(!this.prerelease.length&&n.prerelease.length)return 1;if(!this.prerelease.length&&!n.prerelease.length)return 0;let a=0;do{const e=this.prerelease[a],s=n.prerelease[a];if(Op("prerelease compare",a,e,s),e===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(e===void 0)return-1;if(e===s)continue;return sc(e,s)}while(++a)}compareBuild(n){n instanceof ir||(n=new ir(n,this.options));let a=0;do{const e=this.build[a],s=n.build[a];if(Op("build compare",a,e,s),e===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(e===void 0)return-1;if(e===s)continue;return sc(e,s)}while(++a)}inc(n,a,e){switch(n){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",a,e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",a,e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",a,e),this.inc("pre",a,e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",a,e),this.inc("pre",a,e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const s=Number(e)?1:0;if(!a&&e===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[s];else{let r=this.prerelease.length;for(;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);if(r===-1){if(a===this.prerelease.join(".")&&e===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(a){let r=[a,s];e===!1&&(r=[a]),sc(this.prerelease[0],a)===0?isNaN(this.prerelease[1])&&(this.prerelease=r):this.prerelease=r}break}default:throw new Error(`invalid increment argument: ${n}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Ls=eV;const o0=Ls,tV=(t,n,a=!1)=>{if(t instanceof o0)return t;try{return new o0(t,n)}catch(e){if(!a)return null;throw e}};var Sd=tV;const nV=Sd,aV=(t,n)=>{const a=nV(t,n);return a?a.version:null};var sV=aV;const oV=Sd,rV=(t,n)=>{const a=oV(t.trim().replace(/^[=v]+/,""),n);return a?a.version:null};var iV=rV;const r0=Ls,lV=(t,n,a,e,s)=>{typeof a=="string"&&(s=e,e=a,a=void 0);try{return new r0(t instanceof r0?t.version:t,a).inc(n,e,s).version}catch{return null}};var cV=lV;const i0=Sd,dV=(t,n)=>{const a=i0(t,null,!0),e=i0(n,null,!0),s=a.compare(e);if(s===0)return null;const r=s>0,o=r?a:e,i=r?e:a,l=!!o.prerelease.length;if(!!i.prerelease.length&&!l)return!i.patch&&!i.minor?"major":o.patch?"patch":o.minor?"minor":"major";const d=l?"pre":"";return a.major!==e.major?d+"major":a.minor!==e.minor?d+"minor":a.patch!==e.patch?d+"patch":"prerelease"};var uV=dV;const pV=Ls,fV=(t,n)=>new pV(t,n).major;var mV=fV;const hV=Ls,_V=(t,n)=>new hV(t,n).minor;var gV=_V;const bV=Ls,vV=(t,n)=>new bV(t,n).patch;var EV=vV;const SV=Sd,TV=(t,n)=>{const a=SV(t,n);return a&&a.prerelease.length?a.prerelease:null};var AV=TV;const l0=Ls,yV=(t,n,a)=>new l0(t,a).compare(new l0(n,a));var tr=yV;const IV=tr,CV=(t,n,a)=>IV(n,t,a);var OV=CV;const NV=tr,xV=(t,n)=>NV(t,n,!0);var RV=xV;const c0=Ls,wV=(t,n,a)=>{const e=new c0(t,a),s=new c0(n,a);return e.compare(s)||e.compareBuild(s)};var WE=wV;const MV=WE,LV=(t,n)=>t.sort((a,e)=>MV(a,e,n));var DV=LV;const PV=WE,kV=(t,n)=>t.sort((a,e)=>PV(e,a,n));var BV=kV;const FV=tr,UV=(t,n,a)=>FV(t,n,a)>0;var Sh=UV;const $V=tr,GV=(t,n,a)=>$V(t,n,a)<0;var zE=GV;const VV=tr,HV=(t,n,a)=>VV(t,n,a)===0;var Zx=HV;const jV=tr,WV=(t,n,a)=>jV(t,n,a)!==0;var Qx=WV;const zV=tr,YV=(t,n,a)=>zV(t,n,a)>=0;var YE=YV;const KV=tr,XV=(t,n,a)=>KV(t,n,a)<=0;var KE=XV;const qV=Zx,ZV=Qx,QV=Sh,JV=YE,eH=zE,tH=KE,nH=(t,n,a,e)=>{switch(n){case"===":return typeof t=="object"&&(t=t.version),typeof a=="object"&&(a=a.version),t===a;case"!==":return typeof t=="object"&&(t=t.version),typeof a=="object"&&(a=a.version),t!==a;case"":case"=":case"==":return qV(t,a,e);case"!=":return ZV(t,a,e);case">":return QV(t,a,e);case">=":return JV(t,a,e);case"<":return eH(t,a,e);case"<=":return tH(t,a,e);default:throw new TypeError(`Invalid operator: ${n}`)}};var Jx=nH;const aH=Ls,sH=Sd,{safeRe:xp,t:Rp}=Zu,oH=(t,n)=>{if(t instanceof aH)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;n=n||{};let a=null;if(!n.rtl)a=t.match(n.includePrerelease?xp[Rp.COERCEFULL]:xp[Rp.COERCE]);else{const l=n.includePrerelease?xp[Rp.COERCERTLFULL]:xp[Rp.COERCERTL];let c;for(;(c=l.exec(t))&&(!a||a.index+a[0].length!==t.length);)(!a||c.index+c[0].length!==a.index+a[0].length)&&(a=c),l.lastIndex=c.index+c[1].length+c[2].length;l.lastIndex=-1}if(a===null)return null;const e=a[2],s=a[3]||"0",r=a[4]||"0",o=n.includePrerelease&&a[5]?`-${a[5]}`:"",i=n.includePrerelease&&a[6]?`+${a[6]}`:"";return sH(`${e}.${s}.${r}${o}${i}`,n)};var rH=oH;class iH{constructor(){this.max=1e3,this.map=new Map}get(n){const a=this.map.get(n);if(a!==void 0)return this.map.delete(n),this.map.set(n,a),a}delete(n){return this.map.delete(n)}set(n,a){if(!this.delete(n)&&a!==void 0){if(this.map.size>=this.max){const s=this.map.keys().next().value;this.delete(s)}this.map.set(n,a)}return this}}var lH=iH,Eg,d0;function nr(){if(d0)return Eg;d0=1;const t=/\s+/g;class n{constructor($,Y){if(Y=s(Y),$ instanceof n)return $.loose===!!Y.loose&&$.includePrerelease===!!Y.includePrerelease?$:new n($.raw,Y);if($ instanceof r)return this.raw=$.value,this.set=[[$]],this.formatted=void 0,this;if(this.options=Y,this.loose=!!Y.loose,this.includePrerelease=!!Y.includePrerelease,this.raw=$.trim().replace(t," "),this.set=this.raw.split("||").map(j=>this.parseRange(j.trim())).filter(j=>j.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const j=this.set[0];if(this.set=this.set.filter(U=>!E(U[0])),this.set.length===0)this.set=[j];else if(this.set.length>1){for(const U of this.set)if(U.length===1&&y(U[0])){this.set=[U];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let $=0;$<this.set.length;$++){$>0&&(this.formatted+="||");const Y=this.set[$];for(let j=0;j<Y.length;j++)j>0&&(this.formatted+=" "),this.formatted+=Y[j].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange($){const j=((this.options.includePrerelease&&h)|(this.options.loose&&_))+":"+$,U=e.get(j);if(U)return U;const J=this.options.loose,te=J?l[c.HYPHENRANGELOOSE]:l[c.HYPHENRANGE];$=$.replace(te,k(this.options.includePrerelease)),o("hyphen replace",$),$=$.replace(l[c.COMPARATORTRIM],d),o("comparator trim",$),$=$.replace(l[c.TILDETRIM],u),o("tilde trim",$),$=$.replace(l[c.CARETTRIM],m),o("caret trim",$);let q=$.split(" ").map(ae=>A(ae,this.options)).join(" ").split(/\s+/).map(ae=>B(ae,this.options));J&&(q=q.filter(ae=>(o("loose invalid filter",ae,this.options),!!ae.match(l[c.COMPARATORLOOSE])))),o("range list",q);const K=new Map,W=q.map(ae=>new r(ae,this.options));for(const ae of W){if(E(ae))return[ae];K.set(ae.value,ae)}K.size>1&&K.has("")&&K.delete("");const ee=[...K.values()];return e.set(j,ee),ee}intersects($,Y){if(!($ instanceof n))throw new TypeError("a Range is required");return this.set.some(j=>b(j,Y)&&$.set.some(U=>b(U,Y)&&j.every(J=>U.every(te=>J.intersects(te,Y)))))}test($){if(!$)return!1;if(typeof $=="string")try{$=new i($,this.options)}catch{return!1}for(let Y=0;Y<this.set.length;Y++)if(V(this.set[Y],$,this.options))return!0;return!1}}Eg=n;const a=lH,e=new a,s=jE,r=Th(),o=Eh,i=Ls,{safeRe:l,t:c,comparatorTrimReplace:d,tildeTrimReplace:u,caretTrimReplace:m}=Zu,{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:_}=vh,E=F=>F.value==="<0.0.0-0",y=F=>F.value==="",b=(F,$)=>{let Y=!0;const j=F.slice();let U=j.pop();for(;Y&&j.length;)Y=j.every(J=>U.intersects(J,$)),U=j.pop();return Y},A=(F,$)=>(o("comp",F,$),F=x(F,$),o("caret",F),F=I(F,$),o("tildes",F),F=M(F,$),o("xrange",F),F=D(F,$),o("stars",F),F),T=F=>!F||F.toLowerCase()==="x"||F==="*",I=(F,$)=>F.trim().split(/\s+/).map(Y=>N(Y,$)).join(" "),N=(F,$)=>{const Y=$.loose?l[c.TILDELOOSE]:l[c.TILDE];return F.replace(Y,(j,U,J,te,q)=>{o("tilde",F,j,U,J,te,q);let K;return T(U)?K="":T(J)?K=`>=${U}.0.0 <${+U+1}.0.0-0`:T(te)?K=`>=${U}.${J}.0 <${U}.${+J+1}.0-0`:q?(o("replaceTilde pr",q),K=`>=${U}.${J}.${te}-${q} <${U}.${+J+1}.0-0`):K=`>=${U}.${J}.${te} <${U}.${+J+1}.0-0`,o("tilde return",K),K})},x=(F,$)=>F.trim().split(/\s+/).map(Y=>R(Y,$)).join(" "),R=(F,$)=>{o("caret",F,$);const Y=$.loose?l[c.CARETLOOSE]:l[c.CARET],j=$.includePrerelease?"-0":"";return F.replace(Y,(U,J,te,q,K)=>{o("caret",F,U,J,te,q,K);let W;return T(J)?W="":T(te)?W=`>=${J}.0.0${j} <${+J+1}.0.0-0`:T(q)?J==="0"?W=`>=${J}.${te}.0${j} <${J}.${+te+1}.0-0`:W=`>=${J}.${te}.0${j} <${+J+1}.0.0-0`:K?(o("replaceCaret pr",K),J==="0"?te==="0"?W=`>=${J}.${te}.${q}-${K} <${J}.${te}.${+q+1}-0`:W=`>=${J}.${te}.${q}-${K} <${J}.${+te+1}.0-0`:W=`>=${J}.${te}.${q}-${K} <${+J+1}.0.0-0`):(o("no pr"),J==="0"?te==="0"?W=`>=${J}.${te}.${q}${j} <${J}.${te}.${+q+1}-0`:W=`>=${J}.${te}.${q}${j} <${J}.${+te+1}.0-0`:W=`>=${J}.${te}.${q} <${+J+1}.0.0-0`),o("caret return",W),W})},M=(F,$)=>(o("replaceXRanges",F,$),F.split(/\s+/).map(Y=>w(Y,$)).join(" ")),w=(F,$)=>{F=F.trim();const Y=$.loose?l[c.XRANGELOOSE]:l[c.XRANGE];return F.replace(Y,(j,U,J,te,q,K)=>{o("xRange",F,j,U,J,te,q,K);const W=T(J),ee=W||T(te),ae=ee||T(q),ve=ae;return U==="="&&ve&&(U=""),K=$.includePrerelease?"-0":"",W?U===">"||U==="<"?j="<0.0.0-0":j="*":U&&ve?(ee&&(te=0),q=0,U===">"?(U=">=",ee?(J=+J+1,te=0,q=0):(te=+te+1,q=0)):U==="<="&&(U="<",ee?J=+J+1:te=+te+1),U==="<"&&(K="-0"),j=`${U+J}.${te}.${q}${K}`):ee?j=`>=${J}.0.0${K} <${+J+1}.0.0-0`:ae&&(j=`>=${J}.${te}.0${K} <${J}.${+te+1}.0-0`),o("xRange return",j),j})},D=(F,$)=>(o("replaceStars",F,$),F.trim().replace(l[c.STAR],"")),B=(F,$)=>(o("replaceGTE0",F,$),F.trim().replace(l[$.includePrerelease?c.GTE0PRE:c.GTE0],"")),k=F=>($,Y,j,U,J,te,q,K,W,ee,ae,ve)=>(T(j)?Y="":T(U)?Y=`>=${j}.0.0${F?"-0":""}`:T(J)?Y=`>=${j}.${U}.0${F?"-0":""}`:te?Y=`>=${Y}`:Y=`>=${Y}${F?"-0":""}`,T(W)?K="":T(ee)?K=`<${+W+1}.0.0-0`:T(ae)?K=`<${W}.${+ee+1}.0-0`:ve?K=`<=${W}.${ee}.${ae}-${ve}`:F?K=`<${W}.${ee}.${+ae+1}-0`:K=`<=${K}`,`${Y} ${K}`.trim()),V=(F,$,Y)=>{for(let j=0;j<F.length;j++)if(!F[j].test($))return!1;if($.prerelease.length&&!Y.includePrerelease){for(let j=0;j<F.length;j++)if(o(F[j].semver),F[j].semver!==r.ANY&&F[j].semver.prerelease.length>0){const U=F[j].semver;if(U.major===$.major&&U.minor===$.minor&&U.patch===$.patch)return!0}return!1}return!0};return Eg}var Sg,u0;function Th(){if(u0)return Sg;u0=1;const t=Symbol("SemVer ANY");class n{static get ANY(){return t}constructor(d,u){if(u=a(u),d instanceof n){if(d.loose===!!u.loose)return d;d=d.value}d=d.trim().split(/\s+/).join(" "),o("comparator",d,u),this.options=u,this.loose=!!u.loose,this.parse(d),this.semver===t?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(d){const u=this.options.loose?e[s.COMPARATORLOOSE]:e[s.COMPARATOR],m=d.match(u);if(!m)throw new TypeError(`Invalid comparator: ${d}`);this.operator=m[1]!==void 0?m[1]:"",this.operator==="="&&(this.operator=""),m[2]?this.semver=new i(m[2],this.options.loose):this.semver=t}toString(){return this.value}test(d){if(o("Comparator.test",d,this.options.loose),this.semver===t||d===t)return!0;if(typeof d=="string")try{d=new i(d,this.options)}catch{return!1}return r(d,this.operator,this.semver,this.options)}intersects(d,u){if(!(d instanceof n))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(d.value,u).test(this.value):d.operator===""?d.value===""?!0:new l(this.value,u).test(d.semver):(u=a(u),u.includePrerelease&&(this.value==="<0.0.0-0"||d.value==="<0.0.0-0")||!u.includePrerelease&&(this.value.startsWith("<0.0.0")||d.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&d.operator.startsWith(">")||this.operator.startsWith("<")&&d.operator.startsWith("<")||this.semver.version===d.semver.version&&this.operator.includes("=")&&d.operator.includes("=")||r(this.semver,"<",d.semver,u)&&this.operator.startsWith(">")&&d.operator.startsWith("<")||r(this.semver,">",d.semver,u)&&this.operator.startsWith("<")&&d.operator.startsWith(">")))}}Sg=n;const a=jE,{safeRe:e,t:s}=Zu,r=Jx,o=Eh,i=Ls,l=nr();return Sg}const cH=nr(),dH=(t,n,a)=>{try{n=new cH(n,a)}catch{return!1}return n.test(t)};var Ah=dH;const uH=nr(),pH=(t,n)=>new uH(t,n).set.map(a=>a.map(e=>e.value).join(" ").trim().split(" "));var fH=pH;const mH=Ls,hH=nr(),_H=(t,n,a)=>{let e=null,s=null,r=null;try{r=new hH(n,a)}catch{return null}return t.forEach(o=>{r.test(o)&&(!e||s.compare(o)===-1)&&(e=o,s=new mH(e,a))}),e};var gH=_H;const bH=Ls,vH=nr(),EH=(t,n,a)=>{let e=null,s=null,r=null;try{r=new vH(n,a)}catch{return null}return t.forEach(o=>{r.test(o)&&(!e||s.compare(o)===1)&&(e=o,s=new bH(e,a))}),e};var SH=EH;const Tg=Ls,TH=nr(),p0=Sh,AH=(t,n)=>{t=new TH(t,n);let a=new Tg("0.0.0");if(t.test(a)||(a=new Tg("0.0.0-0"),t.test(a)))return a;a=null;for(let e=0;e<t.set.length;++e){const s=t.set[e];let r=null;s.forEach(o=>{const i=new Tg(o.semver.version);switch(o.operator){case">":i.prerelease.length===0?i.patch++:i.prerelease.push(0),i.raw=i.format();case"":case">=":(!r||p0(i,r))&&(r=i);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),r&&(!a||p0(a,r))&&(a=r)}return a&&t.test(a)?a:null};var yH=AH;const IH=nr(),CH=(t,n)=>{try{return new IH(t,n).range||"*"}catch{return null}};var OH=CH;const NH=Ls,eR=Th(),{ANY:xH}=eR,RH=nr(),wH=Ah,f0=Sh,m0=zE,MH=KE,LH=YE,DH=(t,n,a,e)=>{t=new NH(t,e),n=new RH(n,e);let s,r,o,i,l;switch(a){case">":s=f0,r=MH,o=m0,i=">",l=">=";break;case"<":s=m0,r=LH,o=f0,i="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(wH(t,n,e))return!1;for(let c=0;c<n.set.length;++c){const d=n.set[c];let u=null,m=null;if(d.forEach(h=>{h.semver===xH&&(h=new eR(">=0.0.0")),u=u||h,m=m||h,s(h.semver,u.semver,e)?u=h:o(h.semver,m.semver,e)&&(m=h)}),u.operator===i||u.operator===l||(!m.operator||m.operator===i)&&r(t,m.semver))return!1;if(m.operator===l&&o(t,m.semver))return!1}return!0};var XE=DH;const PH=XE,kH=(t,n,a)=>PH(t,n,">",a);var BH=kH;const FH=XE,UH=(t,n,a)=>FH(t,n,"<",a);var $H=UH;const h0=nr(),GH=(t,n,a)=>(t=new h0(t,a),n=new h0(n,a),t.intersects(n,a));var VH=GH;const HH=Ah,jH=tr;var WH=(t,n,a)=>{const e=[];let s=null,r=null;const o=t.sort((d,u)=>jH(d,u,a));for(const d of o)HH(d,n,a)?(r=d,s||(s=d)):(r&&e.push([s,r]),r=null,s=null);s&&e.push([s,null]);const i=[];for(const[d,u]of e)d===u?i.push(d):!u&&d===o[0]?i.push("*"):u?d===o[0]?i.push(`<=${u}`):i.push(`${d} - ${u}`):i.push(`>=${d}`);const l=i.join(" || "),c=typeof n.raw=="string"?n.raw:String(n);return l.length<c.length?l:n};const _0=nr(),qE=Th(),{ANY:Ag}=qE,kd=Ah,ZE=tr,zH=(t,n,a={})=>{if(t===n)return!0;t=new _0(t,a),n=new _0(n,a);let e=!1;e:for(const s of t.set){for(const r of n.set){const o=KH(s,r,a);if(e=e||o!==null,o)continue e}if(e)return!1}return!0},YH=[new qE(">=0.0.0-0")],g0=[new qE(">=0.0.0")],KH=(t,n,a)=>{if(t===n)return!0;if(t.length===1&&t[0].semver===Ag){if(n.length===1&&n[0].semver===Ag)return!0;a.includePrerelease?t=YH:t=g0}if(n.length===1&&n[0].semver===Ag){if(a.includePrerelease)return!0;n=g0}const e=new Set;let s,r;for(const h of t)h.operator===">"||h.operator===">="?s=b0(s,h,a):h.operator==="<"||h.operator==="<="?r=v0(r,h,a):e.add(h.semver);if(e.size>1)return null;let o;if(s&&r){if(o=ZE(s.semver,r.semver,a),o>0)return null;if(o===0&&(s.operator!==">="||r.operator!=="<="))return null}for(const h of e){if(s&&!kd(h,String(s),a)||r&&!kd(h,String(r),a))return null;for(const _ of n)if(!kd(h,String(_),a))return!1;return!0}let i,l,c,d,u=r&&!a.includePrerelease&&r.semver.prerelease.length?r.semver:!1,m=s&&!a.includePrerelease&&s.semver.prerelease.length?s.semver:!1;u&&u.prerelease.length===1&&r.operator==="<"&&u.prerelease[0]===0&&(u=!1);for(const h of n){if(d=d||h.operator===">"||h.operator===">=",c=c||h.operator==="<"||h.operator==="<=",s){if(m&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===m.major&&h.semver.minor===m.minor&&h.semver.patch===m.patch&&(m=!1),h.operator===">"||h.operator===">="){if(i=b0(s,h,a),i===h&&i!==s)return!1}else if(s.operator===">="&&!kd(s.semver,String(h),a))return!1}if(r){if(u&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===u.major&&h.semver.minor===u.minor&&h.semver.patch===u.patch&&(u=!1),h.operator==="<"||h.operator==="<="){if(l=v0(r,h,a),l===h&&l!==r)return!1}else if(r.operator==="<="&&!kd(r.semver,String(h),a))return!1}if(!h.operator&&(r||s)&&o!==0)return!1}return!(s&&c&&!r&&o!==0||r&&d&&!s&&o!==0||m||u)},b0=(t,n,a)=>{if(!t)return n;const e=ZE(t.semver,n.semver,a);return e>0?t:e<0||n.operator===">"&&t.operator===">="?n:t},v0=(t,n,a)=>{if(!t)return n;const e=ZE(t.semver,n.semver,a);return e<0?t:e>0||n.operator==="<"&&t.operator==="<="?n:t};var XH=zH;const yg=Zu,E0=vh,qH=Ls,S0=qx,ZH=Sd,QH=sV,JH=iV,ej=cV,tj=uV,nj=mV,aj=gV,sj=EV,oj=AV,rj=tr,ij=OV,lj=RV,cj=WE,dj=DV,uj=BV,pj=Sh,fj=zE,mj=Zx,hj=Qx,_j=YE,gj=KE,bj=Jx,vj=rH,Ej=Th(),Sj=nr(),Tj=Ah,Aj=fH,yj=gH,Ij=SH,Cj=yH,Oj=OH,Nj=XE,xj=BH,Rj=$H,wj=VH,Mj=WH,Lj=XH;var Dj={parse:ZH,valid:QH,clean:JH,inc:ej,diff:tj,major:nj,minor:aj,patch:sj,prerelease:oj,compare:rj,rcompare:ij,compareLoose:lj,compareBuild:cj,sort:dj,rsort:uj,gt:pj,lt:fj,eq:mj,neq:hj,gte:_j,lte:gj,cmp:bj,coerce:vj,Comparator:Ej,Range:Sj,satisfies:Tj,toComparators:Aj,maxSatisfying:yj,minSatisfying:Ij,minVersion:Cj,validRange:Oj,outside:Nj,gtr:xj,ltr:Rj,intersects:wj,simplifyRange:Mj,subset:Lj,SemVer:qH,re:yg.re,src:yg.src,tokens:yg.t,SEMVER_SPEC_VERSION:E0.SEMVER_SPEC_VERSION,RELEASE_TYPES:E0.RELEASE_TYPES,compareIdentifiers:S0.compareIdentifiers,rcompareIdentifiers:S0.rcompareIdentifiers};const pu=mE(Dj),Pj=(t,n)=>pu.valid(t)?pu.lt(n,t):!1,kj={components:{Banner:qu},props:{latestChatwootVersion:{type:String,default:""}},setup(){const{isAdmin:t}=Es();return{isAdmin:t}},data(){return{userDismissedBanner:!1}},computed:{..._t({globalConfig:"globalConfig/get"}),updateAvailable(){return Pj(this.latestChatwootVersion,this.globalConfig.appVersion)},bannerMessage(){return this.$t("GENERAL_SETTINGS.UPDATE_CHATWOOT",{latestChatwootVersion:this.latestChatwootVersion})},shouldShowBanner(){return!this.userDismissedBanner&&this.globalConfig.displayManifest&&this.updateAvailable&&!this.isVersionNotificationDismissed(this.latestChatwootVersion)&&this.isAdmin}},methods:{isVersionNotificationDismissed(t){return(ro.get(xo.DISMISSED_UPDATES)||[]).includes(t)},dismissUpdateBanner(){let t=ro.get(xo.DISMISSED_UPDATES)||[];t instanceof Array?t.push(this.latestChatwootVersion):t=[this.latestChatwootVersion],ro.set(xo.DISMISSED_UPDATES,t),this.userDismissedBanner=!0}}};function Bj(t,n,a,e,s,r){const o=H("Banner");return r.shouldShowBanner?(p(),L(o,{key:0,"color-scheme":"primary","banner-message":r.bannerMessage,"href-link":"https://github.com/chatwoot/chatwoot/releases","href-link-text":t.$t("GENERAL_SETTINGS.LEARN_MORE"),"has-close-button":"",onClose:r.dismissUpdateBanner},null,8,["banner-message","href-link-text","onClose"])):O("v-if",!0)}const Fj=G(kj,[["render",Bj],["__file","/app/app/javascript/dashboard/components/app/UpdateBanner.vue"]]),T0={status:null,endsOn:null},Uj={components:{Banner:qu},setup(){const{isAdmin:t}=Es(),{accountId:n}=Ut();return{accountId:n,isAdmin:t}},computed:{..._t({isOnChatwootCloud:"globalConfig/isOnChatwootCloud",getAccount:"accounts/getAccount"}),bannerMessage(){return this.$t("GENERAL_SETTINGS.PAYMENT_PENDING")},actionButtonMessage(){return this.$t("GENERAL_SETTINGS.OPEN_BILLING")},shouldShowBanner(){return!this.isOnChatwootCloud||!this.isAdmin?!1:this.isPaymentPending()}},methods:{routeToBilling(){this.$router.push({name:"billing_settings_index",params:{accountId:this.accountId}})},isPaymentPending(){const{status:t,endsOn:n}=this.getSubscriptionInfo();return!!(t&&n&&t==="past_due"&&n<new Date)},getSubscriptionInfo(){const t=this.getAccount(this.accountId);if(!t)return T0;const{custom_attributes:n}=t;if(!n)return T0;const{subscription_status:a,subscription_ends_on:e}=n;return{status:a,endsOn:new Date(e)}}}};function $j(t,n,a,e,s,r){const o=H("Banner");return r.shouldShowBanner?(p(),L(o,{key:0,"color-scheme":"alert","banner-message":r.bannerMessage,"action-button-label":r.actionButtonMessage,"has-action-button":"",onPrimaryAction:r.routeToBilling},null,8,["banner-message","action-button-label","onPrimaryAction"])):O("v-if",!0)}const Gj=G(Uj,[["render",$j],["__file","/app/app/javascript/dashboard/components/app/PaymentPendingBanner.vue"]]),Vj={components:{Banner:qu},computed:{..._t({currentUser:"getCurrentUser"}),bannerMessage(){return this.$t("APP_GLOBAL.EMAIL_VERIFICATION_PENDING")},actionButtonMessage(){return this.$t("APP_GLOBAL.RESEND_VERIFICATION_MAIL")},shouldShowBanner(){return!this.currentUser.confirmed}},methods:{resendVerificationEmail(){this.$store.dispatch("resendConfirmation"),Z(this.$t("APP_GLOBAL.EMAIL_VERIFICATION_SENT"))}}};function Hj(t,n,a,e,s,r){const o=H("Banner");return r.shouldShowBanner?(p(),L(o,{key:0,"color-scheme":"alert","banner-message":r.bannerMessage,"action-button-label":r.actionButtonMessage,"action-button-icon":"i-lucide-mail","has-action-button":"",onPrimaryAction:r.resendVerificationEmail},null,8,["banner-message","action-button-label","onPrimaryAction"])):O("v-if",!0)}const jj=G(Vj,[["render",Hj],["__file","/app/app/javascript/dashboard/components/app/PendingEmailVerificationBanner.vue"]]);function Wj(){return!Jk()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function _v(){return typeof window<"u"&&(!Wj()||zj())}function zj(){return Ys.process!==void 0&&Ys.process.type==="renderer"}function Yj(t,n){let a=0;for(let e=t.length-1;e>=0;e--){const s=t[e];s==="."?t.splice(e,1):s===".."?(t.splice(e,1),a++):a&&(t.splice(e,1),a--)}if(n)for(;a--;a)t.unshift("..");return t}const Kj=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function Xj(t){const n=t.length>1024?`<truncated>${t.slice(-1024)}`:t,a=Kj.exec(n);return a?a.slice(1):[]}function A0(...t){let n="",a=!1;for(let e=t.length-1;e>=-1&&!a;e--){const s=e>=0?t[e]:"/";s&&(n=`${s}/${n}`,a=s.charAt(0)==="/")}return n=Yj(n.split("/").filter(e=>!!e),!a).join("/"),(a?"/":"")+n||"."}function y0(t){let n=0;for(;n<t.length&&t[n]==="";n++);let a=t.length-1;for(;a>=0&&t[a]==="";a--);return n>a?[]:t.slice(n,a-n+1)}function qj(t,n){t=A0(t).slice(1),n=A0(n).slice(1);const a=y0(t.split("/")),e=y0(n.split("/")),s=Math.min(a.length,e.length);let r=s;for(let i=0;i<s;i++)if(a[i]!==e[i]){r=i;break}let o=[];for(let i=r;i<a.length;i++)o.push("..");return o=o.concat(e.slice(r)),o.join("/")}function Zj(t,n){return Xj(t)[2]||""}function Qj(t,n){return t??n()}function Jj(){M2()}const I0=100,C0=5e3,eW=36e5;function tW(t){function n(...a){_E&&vn.info("[Offline]:",...a)}return a=>{const e=t(a);if(!a.createStore)throw new Error("No `createStore` function was provided");const s=a.createStore(a);let r=C0,o;function i(u,m,h){return iT(u,["client_report"])?!1:a.shouldStore?a.shouldStore(u,m,h):!0}function l(u){o&&clearTimeout(o),o=setTimeout(async()=>{o=void 0;const m=await s.shift();m&&(n("Attempting to send previously queued event"),m[0].sent_at=new Date().toISOString(),d(m,!0).catch(h=>{n("Failed to retry sending",h)}))},u),typeof o!="number"&&o.unref&&o.unref()}function c(){o||(l(r),r=Math.min(r*2,eW))}async function d(u,m=!1){if(!m&&iT(u,["replay_event","replay_recording"]))return await s.push(u),l(I0),{};try{const h=await e.send(u);let _=I0;if(h){if(h.headers&&h.headers["retry-after"])_=e8(h.headers["retry-after"]);else if(h.headers&&h.headers["x-sentry-rate-limits"])_=6e4;else if((h.statusCode||0)>=400)return h}return l(_),r=C0,h}catch(h){if(await i(u,h,r))return m?await s.unshift(u):await s.push(u),c(),n("Error sending. Event queued.",h),{};throw h}}return a.flushAtStartup&&c(),{send:d,flush:u=>e.flush(u)}}}function tR(t,n){let a;return ih(t,(e,s)=>(n.includes(s)&&(a=Array.isArray(e)?e[1]:void 0),!!a)),a}function nW(t,n){return a=>{const e=t(a);return{...e,send:async s=>{const r=tR(s,["event","transaction","profile","replay_event"]);return r&&(r.release=n),e.send(s)}}}}function aW(t,n){return TE(n?{...t[0],dsn:n}:t[0],t[1])}function sW(t,n){return a=>{const e=t(a),s=new Map;function r(l,c){const d=c?`${l}:${c}`:l;let u=s.get(d);if(!u){const m=t8(l);if(!m)return;const h=n8(m,a.tunnel);u=c?nW(t,c)({...a,url:h}):t({...a,url:h}),s.set(d,u)}return[l,u]}async function o(l){function c(h){const _=h&&h.length?h:["event"];return tR(l,_)}const d=n({envelope:l,getEvent:c}).map(h=>typeof h=="string"?r(h,void 0):r(h.dsn,h.release)).filter(h=>!!h),u=d.length?d:[["",e]];return(await Promise.all(u.map(([h,_])=>_.send(aW(l,h)))))[0]}async function i(l){const c=[...s.values(),e];return(await Promise.all(c.map(u=>u.flush(l)))).every(u=>u)}return{send:o,flush:i}}}function nR(t,n){const a=n&&n.getDsn(),e=n&&n.getOptions().tunnel;return rW(t,a)||oW(t,e)}function oW(t,n){return n?O0(t)===O0(n):!1}function rW(t,n){return n?t.includes(n.host):!1}function O0(t){return t[t.length-1]==="/"?t.slice(0,-1):t}function iW(t,...n){const a=new String(String.raw(t,...n));return a.__sentry_template_string__=t.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),a.__sentry_template_values__=n,a}const aR=new Map,N0=new Set;function lW(t){if(Ys._sentryModuleMetadata)for(const n of Object.keys(Ys._sentryModuleMetadata)){const a=Ys._sentryModuleMetadata[n];if(N0.has(n))continue;N0.add(n);const e=t(n);for(const s of e.reverse())if(s.filename){aR.set(s.filename,a);break}}}function cW(t,n){return lW(t),aR.get(n)}function sR(t,n){try{n.exception.values.forEach(a=>{if(a.stacktrace)for(const e of a.stacktrace.frames||[]){if(!e.filename||e.module_metadata)continue;const s=cW(t,e.filename);s&&(e.module_metadata=s)}})}catch{}}function oR(t){try{t.exception.values.forEach(n=>{if(n.stacktrace)for(const a of n.stacktrace.frames||[])delete a.module_metadata})}catch{}}const dW=fo(()=>({name:"ModuleMetadata",setup(t){t.on("beforeEnvelope",n=>{ih(n,(a,e)=>{if(e==="event"){const s=Array.isArray(a)?a[1]:void 0;s&&(oR(s),a[1]=s)}})}),t.on("applyFrameMetadata",n=>{if(n.type)return;const a=t.getOptions().stackParser;sR(a,n)})}})),uW="CaptureConsole",pW=(t={})=>{const n=t.levels||Sk;return{name:uW,setup(a){"console"in Ys&&a8(({args:e,level:s})=>{ia()!==a||!n.includes(s)||mW(e,s)})}}},fW=fo(pW);function mW(t,n){const a={level:L2(n),extra:{arguments:t}};nh(e=>{if(e.addEventProcessor(o=>(o.logger="console",_2(o,{handled:!1,type:"console"}),o)),n==="assert"){if(!t[0]){const o=`Assertion failed: ${J1(t.slice(1)," ")||"console.assert"}`;e.setExtra("arguments",t.slice(1)),Wf(o,a)}return}const s=t.find(o=>o instanceof Error);if(s){vd(s,a);return}const r=J1(t," ");Wf(r,a)})}const hW="Debug",_W=(t={})=>{const n={debugger:!1,stringify:!1,...t};return{name:hW,setup(a){a.on("beforeSendEvent",(e,s)=>{if(n.debugger)debugger;g2(()=>{n.stringify?(console.log(JSON.stringify(e,null,2)),s&&Object.keys(s).length&&console.log(JSON.stringify(s,null,2))):(console.log(e),s&&Object.keys(s).length&&console.log(s))})})}}},gW=fo(_W),bW="ExtraErrorData",vW=(t={})=>{const{depth:n=3,captureErrorCause:a=!0}=t;return{name:bW,processEvent(e,s,r){const{maxValueLength:o=250}=r.getOptions();return SW(e,s,n,a,o)}}},EW=fo(vW);function SW(t,n={},a,e,s){if(!n.originalException||!iu(n.originalException))return t;const r=n.originalException.name||n.originalException.constructor.name,o=TW(n.originalException,e,s);if(o){const i={...t.contexts},l=gE(o,a);return Tk(l)&&(Ak(l,"__sentry_skip_normalization__",!0),i[r]=l),{...t,contexts:i}}return t}function TW(t,n,a){try{const e=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],s={};for(const r of Object.keys(t)){if(e.indexOf(r)!==-1)continue;const o=t[r];s[r]=iu(o)||typeof o=="string"?b2(`${o}`,a):o}if(n&&t.cause!==void 0&&(s.cause=iu(t.cause)?t.cause.toString():t.cause),typeof t.toJSON=="function"){const r=t.toJSON();for(const o of Object.keys(r)){const i=r[o];s[o]=iu(i)?i.toString():i}}return s}catch(e){_E&&vn.error("Unable to extract extra data from the Error object:",e)}return null}const AW="RewriteFrames",yW=fo((t={})=>{const n=t.root,a=t.prefix||"app:///",e="window"in Ys&&Ys.window!==void 0,s=t.iteratee||IW({isBrowser:e,root:n,prefix:a});function r(i){try{return{...i,exception:{...i.exception,values:i.exception.values.map(l=>({...l,...l.stacktrace&&{stacktrace:o(l.stacktrace)}}))}}}catch{return i}}function o(i){return{...i,frames:i&&i.frames&&i.frames.map(l=>s(l))}}return{name:AW,processEvent(i){let l=i;return i.exception&&Array.isArray(i.exception.values)&&(l=r(l)),l}}});function IW({isBrowser:t,root:n,prefix:a}){return e=>{if(!e.filename)return e;const s=/^[a-zA-Z]:\\/.test(e.filename)||e.filename.includes("\\")&&!e.filename.includes("/"),r=/^\//.test(e.filename);if(t){if(n){const o=e.filename;o.indexOf(n)===0&&(e.filename=o.replace(n,a))}}else if(s||r){const o=s?e.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):e.filename,i=n?qj(n,o):Zj(o);e.filename=`${a}${i}`}return e}}const CW="SessionTiming",OW=()=>{const t=Li()*1e3;return{name:CW,processEvent(n){const a=Li()*1e3;return{...n,extra:{...n.extra,"session:start":t,"session:duration":a-t,"session:end":a}}}}},NW=fo(OW),xW=10,RW="ZodErrors";function wW(t){return iu(t)&&t.name==="ZodError"&&Array.isArray(t.errors)}function MW(t){return{...t,path:"path"in t&&Array.isArray(t.path)?t.path.join("."):void 0,keys:"keys"in t?JSON.stringify(t.keys):void 0,unionErrors:"unionErrors"in t?JSON.stringify(t.unionErrors):void 0}}function LW(t){const n=new Set;for(const e of t.issues)e.path&&e.path[0]&&n.add(e.path[0]);const a=Array.from(n);return`Failed to validate keys: ${b2(a.join(", "),100)}`}function DW(t,n,a){return!n.exception||!n.exception.values||!a||!a.originalException||!wW(a.originalException)||a.originalException.issues.length===0?n:{...n,exception:{...n.exception,values:[{...n.exception.values[0],value:LW(a.originalException)},...n.exception.values.slice(1)]},extra:{...n.extra,"zoderror.issues":a.originalException.errors.slice(0,t).map(MW)}}}const PW=(t={})=>{const n=t.limit||xW;return{name:RW,processEvent(a,e){return DW(n,a,e)}}},kW=fo(PW),BW=fo(t=>({name:"ThirdPartyErrorsFilter",setup(n){n.on("beforeEnvelope",a=>{ih(a,(e,s)=>{if(s==="event"){const r=Array.isArray(e)?e[1]:void 0;r&&(oR(r),e[1]=r)}})}),n.on("applyFrameMetadata",a=>{if(a.type)return;const e=n.getOptions().stackParser;sR(e,a)})},processEvent(n){const a=FW(n);if(a){const e=t.behaviour==="drop-error-if-contains-third-party-frames"||t.behaviour==="apply-tag-if-contains-third-party-frames"?"some":"every";if(a[e](r=>!r.some(o=>t.filterKeys.includes(o)))){if(t.behaviour==="drop-error-if-contains-third-party-frames"||t.behaviour==="drop-error-if-exclusively-contains-third-party-frames")return null;n.tags={...n.tags,third_party_code:!0}}}return n}}));function FW(t){const n=yk(t);if(n)return n.filter(a=>!!a.filename).map(a=>a.module_metadata?Object.keys(a.module_metadata).filter(e=>e.startsWith(x0)).map(e=>e.slice(x0.length)):[])}const x0="_sentryBundlerPluginAppKey:",rR="c",iR="g",QE="s",lR="d",UW=5e3;function cR(t,n){const a=Ik("globalMetricsAggregators",()=>new WeakMap),e=a.get(t);if(e)return e;const s=new n(t);return t.on("flush",()=>s.flush()),t.on("close",()=>s.close()),a.set(t,s),s}function yh(t,n,a,e,s={}){const r=s.client||ia();if(!r)return;const o=ah(),i=o?Iu(o):void 0,l=i&&Gr(i).description,{unit:c,tags:d,timestamp:u}=s,{release:m,environment:h}=r.getOptions(),_={};m&&(_.release=m),h&&(_.environment=h),l&&(_.transaction=l),_E&&vn.log(`Adding value of ${e} to ${n} metric ${a}`),cR(r,t).add(n,a,e,c,{..._,...d},u)}function $W(t,n,a=1,e){yh(t,rR,n,JE(a),e)}function gv(t,n,a,e){yh(t,lR,n,JE(a),e)}function GW(t,n,a,e="second",s){if(typeof a=="function"){const r=Li();return D2({op:"metrics.timing",name:n,startTime:r,onlyIfParent:!0},o=>s8(()=>a(),()=>{},()=>{const i=Li(),l=i-r;gv(t,n,l,{...s,unit:"second"}),o.end(i)}))}gv(t,n,a,{...s,unit:e})}function VW(t,n,a,e){yh(t,QE,n,a,e)}function HW(t,n,a,e){yh(t,iR,n,JE(a),e)}const Qu={increment:$W,distribution:gv,set:VW,gauge:HW,timing:GW,getMetricsAggregatorForClient:cR};function JE(t){return typeof t=="string"?parseInt(t):t}function jW(t,n,a,e){const s=Object.entries(sh(e)).sort((r,o)=>r[0].localeCompare(o[0]));return`${t}${n}${a}${s}`}function WW(t){let n=0;for(let a=0;a<t.length;a++){const e=t.charCodeAt(a);n=(n<<5)-n+e,n&=n}return n>>>0}function zW(t){let n="";for(const a of t){const e=Object.entries(a.tags),s=e.length>0?`|#${e.map(([r,o])=>`${r}:${o}`).join(",")}`:"";n+=`${a.name}@${a.unit}:${a.metric}|${a.metricType}${s}|T${a.timestamp}
`}return n}function YW(t){return t.replace(/[^\w]+/gi,"_")}function KW(t){return t.replace(/[^\w\-.]+/gi,"_")}function XW(t){return t.replace(/[^\w\-./]+/gi,"")}const qW=[[`
`,"\\n"],["\r","\\r"],["	","\\t"],["\\","\\\\"],["|","\\u{7c}"],[",","\\u{2c}"]];function ZW(t){for(const[n,a]of qW)if(t===n)return a;return t}function QW(t){return[...t].reduce((n,a)=>n+ZW(a),"")}function JW(t){const n={};for(const a in t)if(Object.prototype.hasOwnProperty.call(t,a)){const e=XW(a);n[e]=QW(String(t[a]))}return n}function ez(t,n){vn.log(`Flushing aggregated metrics, number of metrics: ${n.length}`);const a=t.getDsn(),e=t.getSdkMetadata(),s=t.getOptions().tunnel,r=tz(n,a,e,s);t.sendEnvelope(r)}function tz(t,n,a,e){const s={sent_at:new Date().toISOString()};a&&a.sdk&&(s.sdk={name:a.sdk.name,version:a.sdk.version}),e&&n&&(s.dsn=o8(n));const r=nz(t);return TE(s,[r])}function nz(t){const n=zW(t);return[{type:"statsd",length:n.length},n]}class az{constructor(n){this._value=n}get weight(){return 1}add(n){this._value+=n}toString(){return`${this._value}`}}class sz{constructor(n){this._last=n,this._min=n,this._max=n,this._sum=n,this._count=1}get weight(){return 5}add(n){this._last=n,n<this._min&&(this._min=n),n>this._max&&(this._max=n),this._sum+=n,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}}class oz{constructor(n){this._value=[n]}get weight(){return this._value.length}add(n){this._value.push(n)}toString(){return this._value.join(":")}}class rz{constructor(n){this.first=n,this._value=new Set([n])}get weight(){return this._value.size}add(n){this._value.add(n)}toString(){return Array.from(this._value).map(n=>typeof n=="string"?WW(n):n).join(":")}}const iz={[rR]:az,[iR]:sz,[lR]:oz,[QE]:rz};class Ju{constructor(n){this._client=n,this._buckets=new Map,this._interval=setInterval(()=>this.flush(),UW)}add(n,a,e,s="none",r={},o=Li()){const i=Math.floor(o),l=KW(a),c=JW(r),d=YW(s),u=jW(n,l,d,c);let m=this._buckets.get(u);const h=m&&n===QE?m.metric.weight:0;m?(m.metric.add(e),m.timestamp<i&&(m.timestamp=i)):(m={metric:new iz[n](e),timestamp:i,metricType:n,name:l,unit:d,tags:c},this._buckets.set(u,m));const _=typeof e=="string"?m.metric.weight-h:e;Ck(n,l,_,d,r,u)}flush(){if(this._buckets.size===0)return;const n=Array.from(this._buckets.values());ez(this._client,n),this._buckets.clear()}close(){clearInterval(this._interval),this.flush()}}function dR(t,n={},a=Yo()){const{message:e,name:s,email:r,url:o,source:i,associatedEventId:l,tags:c}=t,d={contexts:{feedback:sh({contact_email:r,name:s,message:e,url:o,source:i,associated_event_id:l})},type:"feedback",level:"info",tags:c},u=a&&a.getClient()||ia();return u&&u.emit("beforeSendFeedback",d,n),a.captureEvent(d,n)}function lz(){return{bindClient(t){Yo().setClient(t)},withScope:nh,getClient:()=>ia(),getScope:Yo,getIsolationScope:rh,captureException:(t,n)=>Yo().captureException(t,n),captureMessage:(t,n,a)=>Yo().captureMessage(t,n,a),captureEvent:oh,addBreadcrumb:AE,setUser:y2,setTags:A2,setTag:T2,setExtra:S2,setExtras:E2,setContext:bE,getIntegration(t){const n=ia();return n&&n.getIntegrationByName(t.id)||null},startSession:v2,endSession:qb,captureSession(t){if(t)return qb();dz()}}}const cz=lz;function dz(){const t=Yo(),n=ia(),a=t.getSession();n&&a&&n.captureSession(a)}const uz={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",debugIntegration:"debug",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",sessionTimingIntegration:"sessiontiming",browserProfilingIntegration:"browserprofiling"},R0=Wa;async function eS(t,n){const a=uz[t],e=R0.Sentry=R0.Sentry||{};if(!a)throw new Error(`Cannot lazy load integration: ${t}`);const s=e[t];if(typeof s=="function"&&!("_isShim"in s))return s;const r=pz(a),o=Wa.document.createElement("script");o.src=r,o.crossOrigin="anonymous",o.referrerPolicy="origin",n&&o.setAttribute("nonce",n);const i=new Promise((u,m)=>{o.addEventListener("load",()=>u()),o.addEventListener("error",m)}),l=Wa.document.currentScript,c=Wa.document.body||Wa.document.head||l&&l.parentElement;if(c)c.appendChild(o);else throw new Error(`Could not find parent element to insert lazy-loaded ${t} script`);try{await i}catch{throw new Error(`Error when loading integration: ${t}`)}const d=e[t];if(typeof d!="function")throw new Error(`Could not load integration: ${t}`);return d}function pz(t){const n=ia(),a=n&&n.getOptions(),e=a&&a.cdnBaseUrl||"https://browser.sentry-cdn.com";return new URL(`/${I2}/${t}.min.js`,e).toString()}const fz=Ys,mz="ReportingObserver",w0=new WeakMap,hz=(t={})=>{const n=t.types||["crash","deprecation","intervention"];function a(e){if(w0.has(ia()))for(const s of e)nh(r=>{r.setExtra("url",s.url);const o=`ReportingObserver [${s.type}]`;let i="No details available";if(s.body){const l={};for(const c in s.body)l[c]=s.body[c];if(r.setExtra("body",l),s.type==="crash"){const c=s.body;i=[c.crashId||"",c.reason||""].join(" ").trim()||i}else i=s.body.message||i}Wf(`${o}: ${i}`)})}return{name:mz,setupOnce(){if(!r8())return;new fz.ReportingObserver(a,{buffered:!0,types:n}).observe()},setup(e){w0.set(e,!0)}}},_z=fo(hz),gz="HttpClient",bz=(t={})=>{const n={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...t};return{name:gz,setup(a){Oz(a,n),Nz(a,n)}}},vz=fo(bz);function Ez(t,n,a,e){if(pR(t,a.status,a.url)){const s=xz(n,e);let r,o,i,l;mR()&&([r,i]=M0("Cookie",s),[o,l]=M0("Set-Cookie",a));const c=fR({url:s.url,method:s.method,status:a.status,requestHeaders:r,responseHeaders:o,requestCookies:i,responseCookies:l});oh(c)}}function M0(t,n){const a=Az(n.headers);let e;try{const s=a[t]||a[t.toLowerCase()]||void 0;s&&(e=uR(s))}catch{ua&&vn.log(`Could not extract cookies from header ${t}`)}return[a,e]}function Sz(t,n,a,e){if(pR(t,n.status,n.responseURL)){let s,r,o;if(mR()){try{const l=n.getResponseHeader("Set-Cookie")||n.getResponseHeader("set-cookie")||void 0;l&&(r=uR(l))}catch{ua&&vn.log("Could not extract cookies from response headers")}try{o=yz(n)}catch{ua&&vn.log("Could not extract headers from response")}s=e}const i=fR({url:n.responseURL,method:a,status:n.status,requestHeaders:s,responseHeaders:o,responseCookies:r});oh(i)}}function Tz(t){if(t){const n=t["Content-Length"]||t["content-length"];if(n)return parseInt(n,10)}}function uR(t){return t.split("; ").reduce((n,a)=>{const[e,s]=a.split("=");return e&&s&&(n[e]=s),n},{})}function Az(t){const n={};return t.forEach((a,e)=>{n[e]=a}),n}function yz(t){const n=t.getAllResponseHeaders();return n?n.split(`\r
`).reduce((a,e)=>{const[s,r]=e.split(": ");return s&&r&&(a[s]=r),a},{}):{}}function Iz(t,n){return t.some(a=>typeof a=="string"?n.includes(a):a.test(n))}function Cz(t,n){return t.some(a=>typeof a=="number"?a===n:n>=a[0]&&n<=a[1])}function Oz(t,n){i8()&&l8(a=>{if(ia()!==t)return;const{response:e,args:s}=a,[r,o]=s;e&&Ez(n,r,e,o)})}function Nz(t,n){"XMLHttpRequest"in Ys&&c8(a=>{if(ia()!==t)return;const e=a.xhr,s=e[P2];if(!s)return;const{method:r,request_headers:o}=s;try{Sz(n,e,r,o)}catch(i){ua&&vn.warn("Error while extracting response event form XHR response",i)}})}function pR(t,n,a){return Cz(t.failedRequestStatusCodes,n)&&Iz(t.failedRequestTargets,a)&&!nR(a,ia())}function fR(t){const n=`HTTP Client Error with status code: ${t.status}`,a={message:n,exception:{values:[{type:"Error",value:n}]},request:{url:t.url,method:t.method,headers:t.requestHeaders,cookies:t.requestCookies},contexts:{response:{status_code:t.status,headers:t.responseHeaders,cookies:t.responseCookies,body_size:Tz(t.responseHeaders)}}};return _2(a,{type:"http.client",handled:!1}),a}function xz(t,n){return!n&&t instanceof Request||t instanceof Request&&t.bodyUsed?t:new Request(t,n)}function mR(){const t=ia();return t?!!t.getOptions().sendDefaultPii:!1}const Ig=Ys,Rz=7,wz="ContextLines",Mz=(t={})=>{const n=t.frameContextLines!=null?t.frameContextLines:Rz;return{name:wz,processEvent(a){return Dz(a,n)}}},Lz=fo(Mz);function Dz(t,n){const a=Ig.document,e=Ig.location&&d8(Ig.location.href);if(!a||!e)return t;const s=t.exception&&t.exception.values;if(!s||!s.length)return t;const r=a.documentElement.innerHTML;if(!r)return t;const o=["<!DOCTYPE html>","<html>",...r.split(`
`),"</html>"];return s.forEach(i=>{const l=i.stacktrace;l&&l.frames&&(l.frames=l.frames.map(c=>Pz(c,o,e,n)))}),t}function Pz(t,n,a,e){return t.filename!==a||!t.lineno||!n.length||Ok(n,t,e),t}const ra=Ys,tS="sentryReplaySession",kz="replay_event",nS="Unable to send Replay",Bz=3e5,Fz=9e5,Uz=5e3,$z=5500,Gz=6e4,Vz=5e3,Hz=3,L0=15e4,wp=5e3,jz=3e3,Wz=300,aS=2e7,zz=4999,Yz=15e3,D0=36e5;function bv(t,n){return t??n()}function Fu(t){let n,a=t[0],e=1;for(;e<t.length;){const s=t[e],r=t[e+1];if(e+=2,(s==="optionalAccess"||s==="optionalCall")&&a==null)return;s==="access"||s==="optionalAccess"?(n=a,a=r(a)):(s==="call"||s==="optionalCall")&&(a=r((...o)=>a.call(n,...o)),n=void 0)}return a}var ja;(function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"})(ja||(ja={}));function Kz(t){return t.nodeType===t.ELEMENT_NODE}function fu(t){const n=Fu([t,"optionalAccess",a=>a.host]);return Fu([n,"optionalAccess",a=>a.shadowRoot])===t}function mu(t){return Object.prototype.toString.call(t)==="[object ShadowRoot]"}function Xz(t){return t.includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),t}function qz(t){const{cssText:n}=t;if(n.split('"').length<3)return n;const a=["@import",`url(${JSON.stringify(t.href)})`];return t.layerName===""?a.push("layer"):t.layerName&&a.push(`layer(${t.layerName})`),t.supportsText&&a.push(`supports(${t.supportsText})`),t.media.length&&a.push(t.media.mediaText),a.join(" ")+";"}function hm(t){try{const n=t.rules||t.cssRules;return n?Xz(Array.from(n,hR).join("")):null}catch{return null}}function hR(t){let n;if(Qz(t))try{n=hm(t.styleSheet)||qz(t)}catch{}else if(Jz(t)&&t.selectorText.includes(":"))return Zz(t.cssText);return n||t.cssText}function Zz(t){const n=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return t.replace(n,"$1\\$2")}function Qz(t){return"styleSheet"in t}function Jz(t){return"selectorText"in t}class _R{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(n){if(!n)return-1;const a=Fu([this,"access",e=>e.getMeta,"call",e=>e(n),"optionalAccess",e=>e.id]);return bv(a,()=>-1)}getNode(n){return this.idNodeMap.get(n)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(n){return this.nodeMetaMap.get(n)||null}removeNodeFromMap(n){const a=this.getId(n);this.idNodeMap.delete(a),n.childNodes&&n.childNodes.forEach(e=>this.removeNodeFromMap(e))}has(n){return this.idNodeMap.has(n)}hasNode(n){return this.nodeMetaMap.has(n)}add(n,a){const e=a.id;this.idNodeMap.set(e,n),this.nodeMetaMap.set(n,a)}replace(n,a){const e=this.getNode(n);if(e){const s=this.nodeMetaMap.get(e);s&&this.nodeMetaMap.set(a,s)}this.idNodeMap.set(n,a)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function eY(){return new _R}function Ih({maskInputOptions:t,tagName:n,type:a}){return n==="OPTION"&&(n="SELECT"),!!(t[n.toLowerCase()]||a&&t[a]||a==="password"||n==="INPUT"&&!a&&t.text)}function Uu({isMasked:t,element:n,value:a,maskInputFn:e}){let s=a||"";return t?(e&&(s=e(s,n)),"*".repeat(s.length)):s}function ad(t){return t.toLowerCase()}function vv(t){return t.toUpperCase()}const P0="__rrweb_original__";function tY(t){const n=t.getContext("2d");if(!n)return!0;const a=50;for(let e=0;e<t.width;e+=a)for(let s=0;s<t.height;s+=a){const r=n.getImageData,o=P0 in r?r[P0]:r;if(new Uint32Array(o.call(n,e,s,Math.min(a,t.width-e),Math.min(a,t.height-s)).data.buffer).some(l=>l!==0))return!1}return!0}function sS(t){const n=t.type;return t.hasAttribute("data-rr-is-password")?"password":n?ad(n):null}function _m(t,n,a){return n==="INPUT"&&(a==="radio"||a==="checkbox")?t.getAttribute("value")||"":t.value}function gR(t,n){let a;try{a=new URL(t,bv(n,()=>window.location.href))}catch{return null}const e=/\.([0-9a-z]+)(?:$)/i,s=a.pathname.match(e);return bv(Fu([s,"optionalAccess",r=>r[1]]),()=>null)}const k0={};function bR(t){const n=k0[t];if(n)return n;const a=window.document;let e=window[t];if(a&&typeof a.createElement=="function")try{const s=a.createElement("iframe");s.hidden=!0,a.head.appendChild(s);const r=s.contentWindow;r&&r[t]&&(e=r[t]),a.head.removeChild(s)}catch{}return k0[t]=e.bind(window)}function Ev(...t){return bR("setTimeout")(...t)}function vR(...t){return bR("clearTimeout")(...t)}let nY=1;const aY=new RegExp("[^a-z0-9-_:]"),$u=-2;function oS(){return nY++}function sY(t){if(t instanceof HTMLFormElement)return"form";const n=ad(t.tagName);return aY.test(n)?"div":n}function oY(t){let n="";return t.indexOf("//")>-1?n=t.split("/").slice(0,3).join("/"):n=t.split("/")[0],n=n.split("?")[0],n}let oc,B0;const rY=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,iY=/^(?:[a-z+]+:)?\/\//i,lY=/^www\..*/i,cY=/^(data:)([^,]*),(.*)/i;function gm(t,n){return(t||"").replace(rY,(a,e,s,r,o,i)=>{const l=s||o||i,c=e||r||"";if(!l)return a;if(iY.test(l)||lY.test(l))return`url(${c}${l}${c})`;if(cY.test(l))return`url(${c}${l}${c})`;if(l[0]==="/")return`url(${c}${oY(n)+l}${c})`;const d=n.split("/"),u=l.split("/");d.pop();for(const m of u)m!=="."&&(m===".."?d.pop():d.push(m));return`url(${c}${d.join("/")}${c})`})}const dY=/^[^ \t\n\r\u000c]+/,uY=/^[, \t\n\r\u000c]+/;function pY(t,n){if(n.trim()==="")return n;let a=0;function e(r){let o;const i=r.exec(n.substring(a));return i?(o=i[0],a+=o.length,o):""}const s=[];for(;e(uY),!(a>=n.length);){let r=e(dY);if(r.slice(-1)===",")r=Nc(t,r.substring(0,r.length-1)),s.push(r);else{let o="";r=Nc(t,r);let i=!1;for(;;){const l=n.charAt(a);if(l===""){s.push((r+o).trim());break}else if(i)l===")"&&(i=!1);else if(l===","){a+=1,s.push((r+o).trim());break}else l==="("&&(i=!0);o+=l,a+=1}}}return s.join(", ")}function Nc(t,n){if(!n||n.trim()==="")return n;const a=t.createElement("a");return a.href=n,a.href}function fY(t){return!!(t.tagName==="svg"||t.ownerSVGElement)}function rS(){const t=document.createElement("a");return t.href="",t.href}function ER(t,n,a,e,s,r){return e&&(a==="src"||a==="href"&&!(n==="use"&&e[0]==="#")||a==="xlink:href"&&e[0]!=="#"||a==="background"&&(n==="table"||n==="td"||n==="th")?Nc(t,e):a==="srcset"?pY(t,e):a==="style"?gm(e,rS()):n==="object"&&a==="data"?Nc(t,e):typeof r=="function"?r(a,e,s):e)}function SR(t,n,a){return(t==="video"||t==="audio")&&n==="autoplay"}function mY(t,n,a,e){try{if(e&&t.matches(e))return!1;if(typeof n=="string"){if(t.classList.contains(n))return!0}else for(let s=t.classList.length;s--;){const r=t.classList[s];if(n.test(r))return!0}if(a)return t.matches(a)}catch{}return!1}function hY(t,n){for(let a=t.classList.length;a--;){const e=t.classList[a];if(n.test(e))return!0}return!1}function Al(t,n,a=1/0,e=0){return!t||t.nodeType!==t.ELEMENT_NODE||e>a?-1:n(t)?e:Al(t.parentNode,n,a,e+1)}function xc(t,n){return a=>{const e=a;if(e===null)return!1;try{if(t){if(typeof t=="string"){if(e.matches(`.${t}`))return!0}else if(hY(e,t))return!0}return!!(n&&e.matches(n))}catch{return!1}}}function sd(t,n,a,e,s,r){try{const o=t.nodeType===t.ELEMENT_NODE?t:t.parentElement;if(o===null)return!1;if(o.tagName==="INPUT"){const c=o.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(c))return!0}let i=-1,l=-1;if(r){if(l=Al(o,xc(e,s)),l<0)return!0;i=Al(o,xc(n,a),l>=0?l:1/0)}else{if(i=Al(o,xc(n,a)),i<0)return!1;l=Al(o,xc(e,s),i>=0?i:1/0)}return i>=0?l>=0?i<=l:!0:l>=0?!1:!!r}catch{}return!!r}function _Y(t,n,a){const e=t.contentWindow;if(!e)return;let s=!1,r;try{r=e.document.readyState}catch{return}if(r!=="complete"){const i=Ev(()=>{s||(n(),s=!0)},a);t.addEventListener("load",()=>{vR(i),s=!0,n()});return}const o="about:blank";if(e.location.href!==o||t.src===o||t.src==="")return Ev(n,0),t.addEventListener("load",n);t.addEventListener("load",n)}function gY(t,n,a){let e=!1,s;try{s=t.sheet}catch{return}if(s)return;const r=Ev(()=>{e||(n(),e=!0)},a);t.addEventListener("load",()=>{vR(r),e=!0,n()})}function bY(t,n){const{doc:a,mirror:e,blockClass:s,blockSelector:r,unblockSelector:o,maskAllText:i,maskAttributeFn:l,maskTextClass:c,unmaskTextClass:d,maskTextSelector:u,unmaskTextSelector:m,inlineStylesheet:h,maskInputOptions:_={},maskTextFn:E,maskInputFn:y,dataURLOptions:b={},inlineImages:A,recordCanvas:T,keepIframeSrcFn:I,newlyAddedElement:N=!1}=n,x=vY(a,e);switch(t.nodeType){case t.DOCUMENT_NODE:return t.compatMode!=="CSS1Compat"?{type:ja.Document,childNodes:[],compatMode:t.compatMode}:{type:ja.Document,childNodes:[]};case t.DOCUMENT_TYPE_NODE:return{type:ja.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId,rootId:x};case t.ELEMENT_NODE:return SY(t,{doc:a,blockClass:s,blockSelector:r,unblockSelector:o,inlineStylesheet:h,maskAttributeFn:l,maskInputOptions:_,maskInputFn:y,dataURLOptions:b,inlineImages:A,recordCanvas:T,keepIframeSrcFn:I,newlyAddedElement:N,rootId:x,maskTextClass:c,unmaskTextClass:d,maskTextSelector:u,unmaskTextSelector:m});case t.TEXT_NODE:return EY(t,{maskAllText:i,maskTextClass:c,unmaskTextClass:d,maskTextSelector:u,unmaskTextSelector:m,maskTextFn:E,maskInputOptions:_,maskInputFn:y,rootId:x});case t.CDATA_SECTION_NODE:return{type:ja.CDATA,textContent:"",rootId:x};case t.COMMENT_NODE:return{type:ja.Comment,textContent:t.textContent||"",rootId:x};default:return!1}}function vY(t,n){if(!n.hasNode(t))return;const a=n.getId(t);return a===1?void 0:a}function EY(t,n){const{maskAllText:a,maskTextClass:e,unmaskTextClass:s,maskTextSelector:r,unmaskTextSelector:o,maskTextFn:i,maskInputOptions:l,maskInputFn:c,rootId:d}=n,u=t.parentNode&&t.parentNode.tagName;let m=t.textContent;const h=u==="STYLE"?!0:void 0,_=u==="SCRIPT"?!0:void 0,E=u==="TEXTAREA"?!0:void 0;if(h&&m){try{t.nextSibling||t.previousSibling||Fu([t,"access",b=>b.parentNode,"access",b=>b.sheet,"optionalAccess",b=>b.cssRules])&&(m=hm(t.parentNode.sheet))}catch(b){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${b}`,t)}m=gm(m,rS())}_&&(m="SCRIPT_PLACEHOLDER");const y=sd(t,e,r,s,o,a);if(!h&&!_&&!E&&m&&y&&(m=i?i(m,t.parentElement):m.replace(/[\S]/g,"*")),E&&m&&(l.textarea||y)&&(m=c?c(m,t.parentNode):m.replace(/[\S]/g,"*")),u==="OPTION"&&m){const b=Ih({type:null,tagName:u,maskInputOptions:l});m=Uu({isMasked:sd(t,e,r,s,o,b),element:t,value:m,maskInputFn:c})}return{type:ja.Text,textContent:m||"",isStyle:h,rootId:d}}function SY(t,n){const{doc:a,blockClass:e,blockSelector:s,unblockSelector:r,inlineStylesheet:o,maskInputOptions:i={},maskAttributeFn:l,maskInputFn:c,dataURLOptions:d={},inlineImages:u,recordCanvas:m,keepIframeSrcFn:h,newlyAddedElement:_=!1,rootId:E,maskTextClass:y,unmaskTextClass:b,maskTextSelector:A,unmaskTextSelector:T}=n,I=mY(t,e,s,r),N=sY(t);let x={};const R=t.attributes.length;for(let w=0;w<R;w++){const D=t.attributes[w];D.name&&!SR(N,D.name,D.value)&&(x[D.name]=ER(a,N,ad(D.name),D.value,t,l))}if(N==="link"&&o){const w=Array.from(a.styleSheets).find(B=>B.href===t.href);let D=null;w&&(D=hm(w)),D&&(delete x.rel,delete x.href,x._cssText=gm(D,w.href))}if(N==="style"&&t.sheet&&!(t.innerText||t.textContent||"").trim().length){const w=hm(t.sheet);w&&(x._cssText=gm(w,rS()))}if(N==="input"||N==="textarea"||N==="select"||N==="option"){const w=t,D=sS(w),B=_m(w,vv(N),D),k=w.checked;if(D!=="submit"&&D!=="button"&&B){const V=sd(w,y,A,b,T,Ih({type:D,tagName:vv(N),maskInputOptions:i}));x.value=Uu({isMasked:V,element:w,value:B,maskInputFn:c})}k&&(x.checked=k)}if(N==="option"&&(t.selected&&!i.select?x.selected=!0:delete x.selected),N==="canvas"&&m){if(t.__context==="2d")tY(t)||(x.rr_dataURL=t.toDataURL(d.type,d.quality));else if(!("__context"in t)){const w=t.toDataURL(d.type,d.quality),D=document.createElement("canvas");D.width=t.width,D.height=t.height;const B=D.toDataURL(d.type,d.quality);w!==B&&(x.rr_dataURL=w)}}if(N==="img"&&u){oc||(oc=a.createElement("canvas"),B0=oc.getContext("2d"));const w=t,D=w.crossOrigin;w.crossOrigin="anonymous";const B=()=>{w.removeEventListener("load",B);try{oc.width=w.naturalWidth,oc.height=w.naturalHeight,B0.drawImage(w,0,0),x.rr_dataURL=oc.toDataURL(d.type,d.quality)}catch(k){console.warn(`Cannot inline img src=${w.currentSrc}! Error: ${k}`)}D?x.crossOrigin=D:w.removeAttribute("crossorigin")};w.complete&&w.naturalWidth!==0?B():w.addEventListener("load",B)}if((N==="audio"||N==="video")&&(x.rr_mediaState=t.paused?"paused":"played",x.rr_mediaCurrentTime=t.currentTime),_||(t.scrollLeft&&(x.rr_scrollLeft=t.scrollLeft),t.scrollTop&&(x.rr_scrollTop=t.scrollTop)),I){const{width:w,height:D}=t.getBoundingClientRect();x={class:x.class,rr_width:`${w}px`,rr_height:`${D}px`}}N==="iframe"&&!h(x.src)&&(!I&&!t.contentDocument&&(x.rr_src=x.src),delete x.src);let M;try{customElements.get(N)&&(M=!0)}catch{}return{type:ja.Element,tagName:N,attributes:x,childNodes:[],isSVG:fY(t)||void 0,needBlock:I,rootId:E,isCustom:M}}function sa(t){return t==null?"":t.toLowerCase()}function TY(t,n){if(n.comment&&t.type===ja.Comment)return!0;if(t.type===ja.Element){if(n.script&&(t.tagName==="script"||t.tagName==="link"&&(t.attributes.rel==="preload"||t.attributes.rel==="modulepreload")&&t.attributes.as==="script"||t.tagName==="link"&&t.attributes.rel==="prefetch"&&typeof t.attributes.href=="string"&&gR(t.attributes.href)==="js"))return!0;if(n.headFavicon&&(t.tagName==="link"&&t.attributes.rel==="shortcut icon"||t.tagName==="meta"&&(sa(t.attributes.name).match(/^msapplication-tile(image|color)$/)||sa(t.attributes.name)==="application-name"||sa(t.attributes.rel)==="icon"||sa(t.attributes.rel)==="apple-touch-icon"||sa(t.attributes.rel)==="shortcut icon")))return!0;if(t.tagName==="meta"){if(n.headMetaDescKeywords&&sa(t.attributes.name).match(/^description|keywords$/))return!0;if(n.headMetaSocial&&(sa(t.attributes.property).match(/^(og|twitter|fb):/)||sa(t.attributes.name).match(/^(og|twitter):/)||sa(t.attributes.name)==="pinterest"))return!0;if(n.headMetaRobots&&(sa(t.attributes.name)==="robots"||sa(t.attributes.name)==="googlebot"||sa(t.attributes.name)==="bingbot"))return!0;if(n.headMetaHttpEquiv&&t.attributes["http-equiv"]!==void 0)return!0;if(n.headMetaAuthorship&&(sa(t.attributes.name)==="author"||sa(t.attributes.name)==="generator"||sa(t.attributes.name)==="framework"||sa(t.attributes.name)==="publisher"||sa(t.attributes.name)==="progid"||sa(t.attributes.property).match(/^article:/)||sa(t.attributes.property).match(/^product:/)))return!0;if(n.headMetaVerification&&(sa(t.attributes.name)==="google-site-verification"||sa(t.attributes.name)==="yandex-verification"||sa(t.attributes.name)==="csrf-token"||sa(t.attributes.name)==="p:domain_verify"||sa(t.attributes.name)==="verify-v1"||sa(t.attributes.name)==="verification"||sa(t.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function Rc(t,n){const{doc:a,mirror:e,blockClass:s,blockSelector:r,unblockSelector:o,maskAllText:i,maskTextClass:l,unmaskTextClass:c,maskTextSelector:d,unmaskTextSelector:u,skipChild:m=!1,inlineStylesheet:h=!0,maskInputOptions:_={},maskAttributeFn:E,maskTextFn:y,maskInputFn:b,slimDOMOptions:A,dataURLOptions:T={},inlineImages:I=!1,recordCanvas:N=!1,onSerialize:x,onIframeLoad:R,iframeLoadTimeout:M=5e3,onStylesheetLoad:w,stylesheetLoadTimeout:D=5e3,keepIframeSrcFn:B=()=>!1,newlyAddedElement:k=!1}=n;let{preserveWhiteSpace:V=!0}=n;const F=bY(t,{doc:a,mirror:e,blockClass:s,blockSelector:r,maskAllText:i,unblockSelector:o,maskTextClass:l,unmaskTextClass:c,maskTextSelector:d,unmaskTextSelector:u,inlineStylesheet:h,maskInputOptions:_,maskAttributeFn:E,maskTextFn:y,maskInputFn:b,dataURLOptions:T,inlineImages:I,recordCanvas:N,keepIframeSrcFn:B,newlyAddedElement:k});if(!F)return console.warn(t,"not serialized"),null;let $;e.hasNode(t)?$=e.getId(t):TY(F,A)||!V&&F.type===ja.Text&&!F.isStyle&&!F.textContent.replace(/^\s+|\s+$/gm,"").length?$=$u:$=oS();const Y=Object.assign(F,{id:$});if(e.add(t,Y),$===$u)return null;x&&x(t);let j=!m;if(Y.type===ja.Element){j=j&&!Y.needBlock,delete Y.needBlock;const U=t.shadowRoot;U&&mu(U)&&(Y.isShadowHost=!0)}if((Y.type===ja.Document||Y.type===ja.Element)&&j){A.headWhitespace&&Y.type===ja.Element&&Y.tagName==="head"&&(V=!1);const U={doc:a,mirror:e,blockClass:s,blockSelector:r,maskAllText:i,unblockSelector:o,maskTextClass:l,unmaskTextClass:c,maskTextSelector:d,unmaskTextSelector:u,skipChild:m,inlineStylesheet:h,maskInputOptions:_,maskAttributeFn:E,maskTextFn:y,maskInputFn:b,slimDOMOptions:A,dataURLOptions:T,inlineImages:I,recordCanvas:N,preserveWhiteSpace:V,onSerialize:x,onIframeLoad:R,iframeLoadTimeout:M,onStylesheetLoad:w,stylesheetLoadTimeout:D,keepIframeSrcFn:B};for(const J of Array.from(t.childNodes)){const te=Rc(J,U);te&&Y.childNodes.push(te)}if(Kz(t)&&t.shadowRoot)for(const J of Array.from(t.shadowRoot.childNodes)){const te=Rc(J,U);te&&(mu(t.shadowRoot)&&(te.isShadow=!0),Y.childNodes.push(te))}}return t.parentNode&&fu(t.parentNode)&&mu(t.parentNode)&&(Y.isShadow=!0),Y.type===ja.Element&&Y.tagName==="iframe"&&_Y(t,()=>{const U=t.contentDocument;if(U&&R){const J=Rc(U,{doc:U,mirror:e,blockClass:s,blockSelector:r,unblockSelector:o,maskAllText:i,maskTextClass:l,unmaskTextClass:c,maskTextSelector:d,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:h,maskInputOptions:_,maskAttributeFn:E,maskTextFn:y,maskInputFn:b,slimDOMOptions:A,dataURLOptions:T,inlineImages:I,recordCanvas:N,preserveWhiteSpace:V,onSerialize:x,onIframeLoad:R,iframeLoadTimeout:M,onStylesheetLoad:w,stylesheetLoadTimeout:D,keepIframeSrcFn:B});J&&R(t,J)}},M),Y.type===ja.Element&&Y.tagName==="link"&&typeof Y.attributes.rel=="string"&&(Y.attributes.rel==="stylesheet"||Y.attributes.rel==="preload"&&typeof Y.attributes.href=="string"&&gR(Y.attributes.href)==="css")&&gY(t,()=>{if(w){const U=Rc(t,{doc:a,mirror:e,blockClass:s,blockSelector:r,unblockSelector:o,maskAllText:i,maskTextClass:l,unmaskTextClass:c,maskTextSelector:d,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:h,maskInputOptions:_,maskAttributeFn:E,maskTextFn:y,maskInputFn:b,slimDOMOptions:A,dataURLOptions:T,inlineImages:I,recordCanvas:N,preserveWhiteSpace:V,onSerialize:x,onIframeLoad:R,iframeLoadTimeout:M,onStylesheetLoad:w,stylesheetLoadTimeout:D,keepIframeSrcFn:B});U&&w(t,U)}},D),Y}function AY(t,n){const{mirror:a=new _R,blockClass:e="rr-block",blockSelector:s=null,unblockSelector:r=null,maskAllText:o=!1,maskTextClass:i="rr-mask",unmaskTextClass:l=null,maskTextSelector:c=null,unmaskTextSelector:d=null,inlineStylesheet:u=!0,inlineImages:m=!1,recordCanvas:h=!1,maskAllInputs:_=!1,maskAttributeFn:E,maskTextFn:y,maskInputFn:b,slimDOM:A=!1,dataURLOptions:T,preserveWhiteSpace:I,onSerialize:N,onIframeLoad:x,iframeLoadTimeout:R,onStylesheetLoad:M,stylesheetLoadTimeout:w,keepIframeSrcFn:D=()=>!1}=n||{};return Rc(t,{doc:t,mirror:a,blockClass:e,blockSelector:s,unblockSelector:r,maskAllText:o,maskTextClass:i,unmaskTextClass:l,maskTextSelector:c,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:u,maskInputOptions:_===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:_===!1?{}:_,maskAttributeFn:E,maskTextFn:y,maskInputFn:b,slimDOMOptions:A===!0||A==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:A==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:A===!1?{}:A,dataURLOptions:T,inlineImages:m,recordCanvas:h,preserveWhiteSpace:I,onSerialize:N,onIframeLoad:x,iframeLoadTimeout:R,onStylesheetLoad:M,stylesheetLoadTimeout:w,keepIframeSrcFn:D,newlyAddedElement:!1})}function vi(t){let n,a=t[0],e=1;for(;e<t.length;){const s=t[e],r=t[e+1];if(e+=2,(s==="optionalAccess"||s==="optionalCall")&&a==null)return;s==="access"||s==="optionalAccess"?(n=a,a=r(a)):(s==="call"||s==="optionalCall")&&(a=r((...o)=>a.call(n,...o)),n=void 0)}return a}function Cs(t,n,a=document){const e={capture:!0,passive:!0};return a.addEventListener(t,n,e),()=>a.removeEventListener(t,n,e)}const bc=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let F0={map:{},getId(){return console.error(bc),-1},getNode(){return console.error(bc),null},removeNodeFromMap(){console.error(bc)},has(){return console.error(bc),!1},reset(){console.error(bc)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(F0=new Proxy(F0,{get(t,n,a){return n==="map"&&console.error(bc),Reflect.get(t,n,a)}}));function Gu(t,n,a={}){let e=null,s=0;return function(...r){const o=Date.now();!s&&a.leading===!1&&(s=o);const i=n-(o-s),l=this;i<=0||i>n?(e&&(RY(e),e=null),s=o,t.apply(l,r)):!e&&a.trailing!==!1&&(e=Ch(()=>{s=a.leading===!1?0:Date.now(),e=null,t.apply(l,r)},i))}}function TR(t,n,a,e,s=window){const r=s.Object.getOwnPropertyDescriptor(t,n);return s.Object.defineProperty(t,n,e?a:{set(o){Ch(()=>{a.set.call(this,o)},0),r&&r.set&&r.set.call(this,o)}}),()=>TR(t,n,r||{},!0)}function iS(t,n,a){try{if(!(n in t))return()=>{};const e=t[n],s=a(e);return typeof s=="function"&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:e}})),t[n]=s,()=>{t[n]=e}}catch{return()=>{}}}let bm=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(bm=()=>new Date().getTime());function AR(t){const n=t.document;return{left:n.scrollingElement?n.scrollingElement.scrollLeft:t.pageXOffset!==void 0?t.pageXOffset:vi([n,"optionalAccess",a=>a.documentElement,"access",a=>a.scrollLeft])||vi([n,"optionalAccess",a=>a.body,"optionalAccess",a=>a.parentElement,"optionalAccess",a=>a.scrollLeft])||vi([n,"optionalAccess",a=>a.body,"optionalAccess",a=>a.scrollLeft])||0,top:n.scrollingElement?n.scrollingElement.scrollTop:t.pageYOffset!==void 0?t.pageYOffset:vi([n,"optionalAccess",a=>a.documentElement,"access",a=>a.scrollTop])||vi([n,"optionalAccess",a=>a.body,"optionalAccess",a=>a.parentElement,"optionalAccess",a=>a.scrollTop])||vi([n,"optionalAccess",a=>a.body,"optionalAccess",a=>a.scrollTop])||0}}function yR(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function IR(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function CR(t){return t?t.nodeType===t.ELEMENT_NODE?t:t.parentElement:null}function to(t,n,a,e,s){if(!t)return!1;const r=CR(t);if(!r)return!1;const o=xc(n,a);if(!s){const c=e&&r.matches(e);return o(r)&&!c}const i=Al(r,o);let l=-1;return i<0?!1:(e&&(l=Al(r,xc(null,e))),i>-1&&l<0?!0:i<l)}function yY(t,n){return n.getId(t)!==-1}function Cg(t,n){return n.getId(t)===$u}function OR(t,n){if(fu(t))return!1;const a=n.getId(t);return n.has(a)?t.parentNode&&t.parentNode.nodeType===t.DOCUMENT_NODE?!1:t.parentNode?OR(t.parentNode,n):!0:!0}function Sv(t){return!!t.changedTouches}function IY(t=window){"NodeList"in t&&!t.NodeList.prototype.forEach&&(t.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in t&&!t.DOMTokenList.prototype.forEach&&(t.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...n)=>{let a=n[0];if(!(0 in n))throw new TypeError("1 argument is required");do if(this===a)return!0;while(a=a&&a.parentNode);return!1})}function NR(t,n){return!!(t.nodeName==="IFRAME"&&n.getMeta(t))}function xR(t,n){return!!(t.nodeName==="LINK"&&t.nodeType===t.ELEMENT_NODE&&t.getAttribute&&t.getAttribute("rel")==="stylesheet"&&n.getMeta(t))}function Tv(t){return!!vi([t,"optionalAccess",n=>n.shadowRoot])}class CY{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(n){return Qj(this.styleIDMap.get(n),()=>-1)}has(n){return this.styleIDMap.has(n)}add(n,a){if(this.has(n))return this.getId(n);let e;return a===void 0?e=this.id++:e=a,this.styleIDMap.set(n,e),this.idStyleMap.set(e,n),e}getStyle(n){return this.idStyleMap.get(n)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function RR(t){let n=null;return vi([t,"access",a=>a.getRootNode,"optionalCall",a=>a(),"optionalAccess",a=>a.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&t.getRootNode().host&&(n=t.getRootNode().host),n}function OY(t){let n=t,a;for(;a=RR(n);)n=a;return n}function NY(t){const n=t.ownerDocument;if(!n)return!1;const a=OY(t);return n.contains(a)}function wR(t){const n=t.ownerDocument;return n?n.contains(t)||NY(t):!1}const U0={};function lS(t){const n=U0[t];if(n)return n;const a=window.document;let e=window[t];if(a&&typeof a.createElement=="function")try{const s=a.createElement("iframe");s.hidden=!0,a.head.appendChild(s);const r=s.contentWindow;r&&r[t]&&(e=r[t]),a.head.removeChild(s)}catch{}return U0[t]=e.bind(window)}function xY(...t){return lS("requestAnimationFrame")(...t)}function Ch(...t){return lS("setTimeout")(...t)}function RY(...t){return lS("clearTimeout")(...t)}var mn=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(mn||{}),tn=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(tn||{}),Is=(t=>(t[t.MouseUp=0]="MouseUp",t[t.MouseDown=1]="MouseDown",t[t.Click=2]="Click",t[t.ContextMenu=3]="ContextMenu",t[t.DblClick=4]="DblClick",t[t.Focus=5]="Focus",t[t.Blur=6]="Blur",t[t.TouchStart=7]="TouchStart",t[t.TouchMove_Departed=8]="TouchMove_Departed",t[t.TouchEnd=9]="TouchEnd",t[t.TouchCancel=10]="TouchCancel",t))(Is||{}),Mr=(t=>(t[t.Mouse=0]="Mouse",t[t.Pen=1]="Pen",t[t.Touch=2]="Touch",t))(Mr||{});function wY(t){let n,a=t[0],e=1;for(;e<t.length;){const s=t[e],r=t[e+1];if(e+=2,(s==="optionalAccess"||s==="optionalCall")&&a==null)return;s==="access"||s==="optionalAccess"?(n=a,a=r(a)):(s==="call"||s==="optionalCall")&&(a=r((...o)=>a.call(n,...o)),n=void 0)}return a}function $0(t){return"__ln"in t}class MY{constructor(){this.length=0,this.head=null,this.tail=null}get(n){if(n>=this.length)throw new Error("Position outside of list range");let a=this.head;for(let e=0;e<n;e++)a=wY([a,"optionalAccess",s=>s.next])||null;return a}addNode(n){const a={value:n,previous:null,next:null};if(n.__ln=a,n.previousSibling&&$0(n.previousSibling)){const e=n.previousSibling.__ln.next;a.next=e,a.previous=n.previousSibling.__ln,n.previousSibling.__ln.next=a,e&&(e.previous=a)}else if(n.nextSibling&&$0(n.nextSibling)&&n.nextSibling.__ln.previous){const e=n.nextSibling.__ln.previous;a.previous=e,a.next=n.nextSibling.__ln,n.nextSibling.__ln.previous=a,e&&(e.next=a)}else this.head&&(this.head.previous=a),a.next=this.head,this.head=a;a.next===null&&(this.tail=a),this.length++}removeNode(n){const a=n.__ln;this.head&&(a.previous?(a.previous.next=a.next,a.next?a.next.previous=a.previous:this.tail=a.previous):(this.head=a.next,this.head?this.head.previous=null:this.tail=null),n.__ln&&delete n.__ln,this.length--)}}const G0=(t,n)=>`${t}@${n}`;class LY{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=n=>{n.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const n=[],a=new Set,e=new MY,s=l=>{let c=l,d=$u;for(;d===$u;)c=c&&c.nextSibling,d=c&&this.mirror.getId(c);return d},r=l=>{if(!l.parentNode||!wR(l))return;const c=fu(l.parentNode)?this.mirror.getId(RR(l)):this.mirror.getId(l.parentNode),d=s(l);if(c===-1||d===-1)return e.addNode(l);const u=Rc(l,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:m=>{NR(m,this.mirror)&&!to(m,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(m),xR(m,this.mirror)&&this.stylesheetManager.trackLinkElement(m),Tv(l)&&this.shadowDomManager.addShadowRoot(l.shadowRoot,this.doc)},onIframeLoad:(m,h)=>{to(m,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(m,h),m.contentWindow&&this.canvasManager.addWindow(m.contentWindow),this.shadowDomManager.observeAttachShadow(m))},onStylesheetLoad:(m,h)=>{this.stylesheetManager.attachLinkElement(m,h)}});u&&(n.push({parentId:c,nextId:d,node:u}),a.add(u.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const l of this.movedSet)V0(this.removes,l,this.mirror)&&!this.movedSet.has(l.parentNode)||r(l);for(const l of this.addedSet)!H0(this.droppedSet,l)&&!V0(this.removes,l,this.mirror)||H0(this.movedSet,l)?r(l):this.droppedSet.add(l);let o=null;for(;e.length;){let l=null;if(o){const c=this.mirror.getId(o.value.parentNode),d=s(o.value);c!==-1&&d!==-1&&(l=o)}if(!l){let c=e.tail;for(;c;){const d=c;if(c=c.previous,d){const u=this.mirror.getId(d.value.parentNode);if(s(d.value)===-1)continue;if(u!==-1){l=d;break}else{const h=d.value;if(h.parentNode&&h.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const _=h.parentNode.host;if(this.mirror.getId(_)!==-1){l=d;break}}}}}}if(!l){for(;e.head;)e.removeNode(e.head.value);break}o=l.previous,e.removeNode(l.value),r(l.value)}const i={texts:this.texts.map(l=>({id:this.mirror.getId(l.node),value:l.value})).filter(l=>!a.has(l.id)).filter(l=>this.mirror.has(l.id)),attributes:this.attributes.map(l=>{const{attributes:c}=l;if(typeof c.style=="string"){const d=JSON.stringify(l.styleDiff),u=JSON.stringify(l._unchangedStyles);d.length<c.style.length&&(d+u).split("var(").length===c.style.split("var(").length&&(c.style=l.styleDiff)}return{id:this.mirror.getId(l.node),attributes:c}}).filter(l=>!a.has(l.id)).filter(l=>this.mirror.has(l.id)),removes:this.removes,adds:n};!i.texts.length&&!i.attributes.length&&!i.removes.length&&!i.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(i))},this.processMutation=n=>{if(!Cg(n.target,this.mirror))switch(n.type){case"characterData":{const a=n.target.textContent;!to(n.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&a!==n.oldValue&&this.texts.push({value:sd(n.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&a?this.maskTextFn?this.maskTextFn(a,CR(n.target)):a.replace(/[\S]/g,"*"):a,node:n.target});break}case"attributes":{const a=n.target;let e=n.attributeName,s=n.target.getAttribute(e);if(e==="value"){const o=sS(a),i=a.tagName;s=_m(a,i,o);const l=Ih({maskInputOptions:this.maskInputOptions,tagName:i,type:o}),c=sd(n.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,l);s=Uu({isMasked:c,element:a,value:s,maskInputFn:this.maskInputFn})}if(to(n.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||s===n.oldValue)return;let r=this.attributeMap.get(n.target);if(a.tagName==="IFRAME"&&e==="src"&&!this.keepIframeSrcFn(s))if(!a.contentDocument)e="rr_src";else return;if(r||(r={node:n.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(r),this.attributeMap.set(n.target,r)),e==="type"&&a.tagName==="INPUT"&&(n.oldValue||"").toLowerCase()==="password"&&a.setAttribute("data-rr-is-password","true"),!SR(a.tagName,e)&&(r.attributes[e]=ER(this.doc,ad(a.tagName),ad(e),s,a,this.maskAttributeFn),e==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const o=this.unattachedDoc.createElement("span");n.oldValue&&o.setAttribute("style",n.oldValue);for(const i of Array.from(a.style)){const l=a.style.getPropertyValue(i),c=a.style.getPropertyPriority(i);l!==o.style.getPropertyValue(i)||c!==o.style.getPropertyPriority(i)?c===""?r.styleDiff[i]=l:r.styleDiff[i]=[l,c]:r._unchangedStyles[i]=[l,c]}for(const i of Array.from(o.style))a.style.getPropertyValue(i)===""&&(r.styleDiff[i]=!1)}break}case"childList":{if(to(n.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;n.addedNodes.forEach(a=>this.genAdds(a,n.target)),n.removedNodes.forEach(a=>{const e=this.mirror.getId(a),s=fu(n.target)?this.mirror.getId(n.target.host):this.mirror.getId(n.target);to(n.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||Cg(a,this.mirror)||!yY(a,this.mirror)||(this.addedSet.has(a)?(Av(this.addedSet,a),this.droppedSet.add(a)):this.addedSet.has(n.target)&&e===-1||OR(n.target,this.mirror)||(this.movedSet.has(a)&&this.movedMap[G0(e,s)]?Av(this.movedSet,a):this.removes.push({parentId:s,id:e,isShadow:fu(n.target)&&mu(n.target)?!0:void 0})),this.mapRemoves.push(a))});break}}},this.genAdds=(n,a)=>{if(!this.processedNodeManager.inOtherBuffer(n,this)&&!(this.addedSet.has(n)||this.movedSet.has(n))){if(this.mirror.hasNode(n)){if(Cg(n,this.mirror))return;this.movedSet.add(n);let e=null;a&&this.mirror.hasNode(a)&&(e=this.mirror.getId(a)),e&&e!==-1&&(this.movedMap[G0(this.mirror.getId(n),e)]=!0)}else this.addedSet.add(n),this.droppedSet.delete(n);to(n,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(n.childNodes.forEach(e=>this.genAdds(e)),Tv(n)&&n.shadowRoot.childNodes.forEach(e=>{this.processedNodeManager.add(e,this),this.genAdds(e,n)}))}}}init(n){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(a=>{this[a]=n[a]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Av(t,n){t.delete(n),n.childNodes.forEach(a=>Av(t,a))}function V0(t,n,a){return t.length===0?!1:MR(t,n,a)}function MR(t,n,a){const{parentNode:e}=n;if(!e)return!1;const s=a.getId(e);return t.some(r=>r.id===s)?!0:MR(t,e,a)}function H0(t,n){return t.size===0?!1:LR(t,n)}function LR(t,n){const{parentNode:a}=n;return a?t.has(a)?!0:LR(t,a):!1}let hu;function DY(t){hu=t}function PY(){hu=void 0}const On=t=>hu?(...a)=>{try{return t(...a)}catch(e){if(hu&&hu(e)===!0)return()=>{};throw e}}:t;function Vo(t){let n,a=t[0],e=1;for(;e<t.length;){const s=t[e],r=t[e+1];if(e+=2,(s==="optionalAccess"||s==="optionalCall")&&a==null)return;s==="access"||s==="optionalAccess"?(n=a,a=r(a)):(s==="call"||s==="optionalCall")&&(a=r((...o)=>a.call(n,...o)),n=void 0)}return a}const wc=[];function ep(t){try{if("composedPath"in t){const n=t.composedPath();if(n.length)return n[0]}else if("path"in t&&t.path.length)return t.path[0]}catch{}return t&&t.target}function DR(t,n){const a=new LY;wc.push(a),a.init(t);let e=window.MutationObserver||window.__rrMutationObserver;const s=Vo([window,"optionalAccess",o=>o.Zone,"optionalAccess",o=>o.__symbol__,"optionalCall",o=>o("MutationObserver")]);s&&window[s]&&(e=window[s]);const r=new e(On(o=>{t.onMutation&&t.onMutation(o)===!1||a.processMutations.bind(a)(o)}));return r.observe(n,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),r}function kY({mousemoveCb:t,sampling:n,doc:a,mirror:e}){if(n.mousemove===!1)return()=>{};const s=typeof n.mousemove=="number"?n.mousemove:50,r=typeof n.mousemoveCallback=="number"?n.mousemoveCallback:500;let o=[],i;const l=Gu(On(u=>{const m=Date.now()-i;t(o.map(h=>(h.timeOffset-=m,h)),u),o=[],i=null}),r),c=On(Gu(On(u=>{const m=ep(u),{clientX:h,clientY:_}=Sv(u)?u.changedTouches[0]:u;i||(i=bm()),o.push({x:h,y:_,id:e.getId(m),timeOffset:bm()-i}),l(typeof DragEvent<"u"&&u instanceof DragEvent?tn.Drag:u instanceof MouseEvent?tn.MouseMove:tn.TouchMove)}),s,{trailing:!1})),d=[Cs("mousemove",c,a),Cs("touchmove",c,a),Cs("drag",c,a)];return On(()=>{d.forEach(u=>u())})}function BY({mouseInteractionCb:t,doc:n,mirror:a,blockClass:e,blockSelector:s,unblockSelector:r,sampling:o}){if(o.mouseInteraction===!1)return()=>{};const i=o.mouseInteraction===!0||o.mouseInteraction===void 0?{}:o.mouseInteraction,l=[];let c=null;const d=u=>m=>{const h=ep(m);if(to(h,e,s,r,!0))return;let _=null,E=u;if("pointerType"in m){switch(m.pointerType){case"mouse":_=Mr.Mouse;break;case"touch":_=Mr.Touch;break;case"pen":_=Mr.Pen;break}_===Mr.Touch?Is[u]===Is.MouseDown?E="TouchStart":Is[u]===Is.MouseUp&&(E="TouchEnd"):Mr.Pen}else Sv(m)&&(_=Mr.Touch);_!==null?(c=_,(E.startsWith("Touch")&&_===Mr.Touch||E.startsWith("Mouse")&&_===Mr.Mouse)&&(_=null)):Is[u]===Is.Click&&(_=c,c=null);const y=Sv(m)?m.changedTouches[0]:m;if(!y)return;const b=a.getId(h),{clientX:A,clientY:T}=y;On(t)({type:Is[E],id:b,x:A,y:T,..._!==null&&{pointerType:_}})};return Object.keys(Is).filter(u=>Number.isNaN(Number(u))&&!u.endsWith("_Departed")&&i[u]!==!1).forEach(u=>{let m=ad(u);const h=d(u);if(window.PointerEvent)switch(Is[u]){case Is.MouseDown:case Is.MouseUp:m=m.replace("mouse","pointer");break;case Is.TouchStart:case Is.TouchEnd:return}l.push(Cs(m,h,n))}),On(()=>{l.forEach(u=>u())})}function PR({scrollCb:t,doc:n,mirror:a,blockClass:e,blockSelector:s,unblockSelector:r,sampling:o}){const i=On(Gu(On(l=>{const c=ep(l);if(!c||to(c,e,s,r,!0))return;const d=a.getId(c);if(c===n&&n.defaultView){const u=AR(n.defaultView);t({id:d,x:u.left,y:u.top})}else t({id:d,x:c.scrollLeft,y:c.scrollTop})}),o.scroll||100));return Cs("scroll",i,n)}function FY({viewportResizeCb:t},{win:n}){let a=-1,e=-1;const s=On(Gu(On(()=>{const r=yR(),o=IR();(a!==r||e!==o)&&(t({width:Number(o),height:Number(r)}),a=r,e=o)}),200));return Cs("resize",s,n)}const UY=["INPUT","TEXTAREA","SELECT"],j0=new WeakMap;function $Y({inputCb:t,doc:n,mirror:a,blockClass:e,blockSelector:s,unblockSelector:r,ignoreClass:o,ignoreSelector:i,maskInputOptions:l,maskInputFn:c,sampling:d,userTriggeredOnInput:u,maskTextClass:m,unmaskTextClass:h,maskTextSelector:_,unmaskTextSelector:E}){function y(R){let M=ep(R);const w=R.isTrusted,D=M&&vv(M.tagName);if(D==="OPTION"&&(M=M.parentElement),!M||!D||UY.indexOf(D)<0||to(M,e,s,r,!0))return;const B=M;if(B.classList.contains(o)||i&&B.matches(i))return;const k=sS(M);let V=_m(B,D,k),F=!1;const $=Ih({maskInputOptions:l,tagName:D,type:k}),Y=sd(M,m,_,h,E,$);(k==="radio"||k==="checkbox")&&(F=M.checked),V=Uu({isMasked:Y,element:M,value:V,maskInputFn:c}),b(M,u?{text:V,isChecked:F,userTriggered:w}:{text:V,isChecked:F});const j=M.name;k==="radio"&&j&&F&&n.querySelectorAll(`input[type="radio"][name="${j}"]`).forEach(U=>{if(U!==M){const J=Uu({isMasked:Y,element:U,value:_m(U,D,k),maskInputFn:c});b(U,u?{text:J,isChecked:!F,userTriggered:!1}:{text:J,isChecked:!F})}})}function b(R,M){const w=j0.get(R);if(!w||w.text!==M.text||w.isChecked!==M.isChecked){j0.set(R,M);const D=a.getId(R);On(t)({...M,id:D})}}const T=(d.input==="last"?["change"]:["input","change"]).map(R=>Cs(R,On(y),n)),I=n.defaultView;if(!I)return()=>{T.forEach(R=>R())};const N=I.Object.getOwnPropertyDescriptor(I.HTMLInputElement.prototype,"value"),x=[[I.HTMLInputElement.prototype,"value"],[I.HTMLInputElement.prototype,"checked"],[I.HTMLSelectElement.prototype,"value"],[I.HTMLTextAreaElement.prototype,"value"],[I.HTMLSelectElement.prototype,"selectedIndex"],[I.HTMLOptionElement.prototype,"selected"]];return N&&N.set&&T.push(...x.map(R=>TR(R[0],R[1],{set(){On(y)({target:this,isTrusted:!1})}},!1,I))),On(()=>{T.forEach(R=>R())})}function vm(t){const n=[];function a(e,s){if(Mp("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||Mp("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||Mp("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||Mp("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const o=Array.from(e.parentRule.cssRules).indexOf(e);s.unshift(o)}else if(e.parentStyleSheet){const o=Array.from(e.parentStyleSheet.cssRules).indexOf(e);s.unshift(o)}return s}return a(t,n)}function Ei(t,n,a){let e,s;return t?(t.ownerNode?e=n.getId(t.ownerNode):s=a.getId(t),{styleId:s,id:e}):{}}function GY({styleSheetRuleCb:t,mirror:n,stylesheetManager:a},{win:e}){if(!e.CSSStyleSheet||!e.CSSStyleSheet.prototype)return()=>{};const s=e.CSSStyleSheet.prototype.insertRule;e.CSSStyleSheet.prototype.insertRule=new Proxy(s,{apply:On((d,u,m)=>{const[h,_]=m,{id:E,styleId:y}=Ei(u,n,a.styleMirror);return(E&&E!==-1||y&&y!==-1)&&t({id:E,styleId:y,adds:[{rule:h,index:_}]}),d.apply(u,m)})});const r=e.CSSStyleSheet.prototype.deleteRule;e.CSSStyleSheet.prototype.deleteRule=new Proxy(r,{apply:On((d,u,m)=>{const[h]=m,{id:_,styleId:E}=Ei(u,n,a.styleMirror);return(_&&_!==-1||E&&E!==-1)&&t({id:_,styleId:E,removes:[{index:h}]}),d.apply(u,m)})});let o;e.CSSStyleSheet.prototype.replace&&(o=e.CSSStyleSheet.prototype.replace,e.CSSStyleSheet.prototype.replace=new Proxy(o,{apply:On((d,u,m)=>{const[h]=m,{id:_,styleId:E}=Ei(u,n,a.styleMirror);return(_&&_!==-1||E&&E!==-1)&&t({id:_,styleId:E,replace:h}),d.apply(u,m)})}));let i;e.CSSStyleSheet.prototype.replaceSync&&(i=e.CSSStyleSheet.prototype.replaceSync,e.CSSStyleSheet.prototype.replaceSync=new Proxy(i,{apply:On((d,u,m)=>{const[h]=m,{id:_,styleId:E}=Ei(u,n,a.styleMirror);return(_&&_!==-1||E&&E!==-1)&&t({id:_,styleId:E,replaceSync:h}),d.apply(u,m)})}));const l={};Lp("CSSGroupingRule")?l.CSSGroupingRule=e.CSSGroupingRule:(Lp("CSSMediaRule")&&(l.CSSMediaRule=e.CSSMediaRule),Lp("CSSConditionRule")&&(l.CSSConditionRule=e.CSSConditionRule),Lp("CSSSupportsRule")&&(l.CSSSupportsRule=e.CSSSupportsRule));const c={};return Object.entries(l).forEach(([d,u])=>{c[d]={insertRule:u.prototype.insertRule,deleteRule:u.prototype.deleteRule},u.prototype.insertRule=new Proxy(c[d].insertRule,{apply:On((m,h,_)=>{const[E,y]=_,{id:b,styleId:A}=Ei(h.parentStyleSheet,n,a.styleMirror);return(b&&b!==-1||A&&A!==-1)&&t({id:b,styleId:A,adds:[{rule:E,index:[...vm(h),y||0]}]}),m.apply(h,_)})}),u.prototype.deleteRule=new Proxy(c[d].deleteRule,{apply:On((m,h,_)=>{const[E]=_,{id:y,styleId:b}=Ei(h.parentStyleSheet,n,a.styleMirror);return(y&&y!==-1||b&&b!==-1)&&t({id:y,styleId:b,removes:[{index:[...vm(h),E]}]}),m.apply(h,_)})})}),On(()=>{e.CSSStyleSheet.prototype.insertRule=s,e.CSSStyleSheet.prototype.deleteRule=r,o&&(e.CSSStyleSheet.prototype.replace=o),i&&(e.CSSStyleSheet.prototype.replaceSync=i),Object.entries(l).forEach(([d,u])=>{u.prototype.insertRule=c[d].insertRule,u.prototype.deleteRule=c[d].deleteRule})})}function kR({mirror:t,stylesheetManager:n},a){let e=null;a.nodeName==="#document"?e=t.getId(a):e=t.getId(a.host);const s=a.nodeName==="#document"?Vo([a,"access",o=>o.defaultView,"optionalAccess",o=>o.Document]):Vo([a,"access",o=>o.ownerDocument,"optionalAccess",o=>o.defaultView,"optionalAccess",o=>o.ShadowRoot]),r=Vo([s,"optionalAccess",o=>o.prototype])?Object.getOwnPropertyDescriptor(Vo([s,"optionalAccess",o=>o.prototype]),"adoptedStyleSheets"):void 0;return e===null||e===-1||!s||!r?()=>{}:(Object.defineProperty(a,"adoptedStyleSheets",{configurable:r.configurable,enumerable:r.enumerable,get(){return Vo([r,"access",o=>o.get,"optionalAccess",o=>o.call,"call",o=>o(this)])},set(o){const i=Vo([r,"access",l=>l.set,"optionalAccess",l=>l.call,"call",l=>l(this,o)]);if(e!==null&&e!==-1)try{n.adoptStyleSheets(o,e)}catch{}return i}}),On(()=>{Object.defineProperty(a,"adoptedStyleSheets",{configurable:r.configurable,enumerable:r.enumerable,get:r.get,set:r.set})}))}function VY({styleDeclarationCb:t,mirror:n,ignoreCSSAttributes:a,stylesheetManager:e},{win:s}){const r=s.CSSStyleDeclaration.prototype.setProperty;s.CSSStyleDeclaration.prototype.setProperty=new Proxy(r,{apply:On((i,l,c)=>{const[d,u,m]=c;if(a.has(d))return r.apply(l,[d,u,m]);const{id:h,styleId:_}=Ei(Vo([l,"access",E=>E.parentRule,"optionalAccess",E=>E.parentStyleSheet]),n,e.styleMirror);return(h&&h!==-1||_&&_!==-1)&&t({id:h,styleId:_,set:{property:d,value:u,priority:m},index:vm(l.parentRule)}),i.apply(l,c)})});const o=s.CSSStyleDeclaration.prototype.removeProperty;return s.CSSStyleDeclaration.prototype.removeProperty=new Proxy(o,{apply:On((i,l,c)=>{const[d]=c;if(a.has(d))return o.apply(l,[d]);const{id:u,styleId:m}=Ei(Vo([l,"access",h=>h.parentRule,"optionalAccess",h=>h.parentStyleSheet]),n,e.styleMirror);return(u&&u!==-1||m&&m!==-1)&&t({id:u,styleId:m,remove:{property:d},index:vm(l.parentRule)}),i.apply(l,c)})}),On(()=>{s.CSSStyleDeclaration.prototype.setProperty=r,s.CSSStyleDeclaration.prototype.removeProperty=o})}function HY({mediaInteractionCb:t,blockClass:n,blockSelector:a,unblockSelector:e,mirror:s,sampling:r,doc:o}){const i=On(c=>Gu(On(d=>{const u=ep(d);if(!u||to(u,n,a,e,!0))return;const{currentTime:m,volume:h,muted:_,playbackRate:E}=u;t({type:c,id:s.getId(u),currentTime:m,volume:h,muted:_,playbackRate:E})}),r.media||500)),l=[Cs("play",i(0),o),Cs("pause",i(1),o),Cs("seeked",i(2),o),Cs("volumechange",i(3),o),Cs("ratechange",i(4),o)];return On(()=>{l.forEach(c=>c())})}function jY({fontCb:t,doc:n}){const a=n.defaultView;if(!a)return()=>{};const e=[],s=new WeakMap,r=a.FontFace;a.FontFace=function(l,c,d){const u=new r(l,c,d);return s.set(u,{family:l,buffer:typeof c!="string",descriptors:d,fontSource:typeof c=="string"?c:JSON.stringify(Array.from(new Uint8Array(c)))}),u};const o=iS(n.fonts,"add",function(i){return function(l){return Ch(On(()=>{const c=s.get(l);c&&(t(c),s.delete(l))}),0),i.apply(this,[l])}});return e.push(()=>{a.FontFace=r}),e.push(o),On(()=>{e.forEach(i=>i())})}function WY(t){const{doc:n,mirror:a,blockClass:e,blockSelector:s,unblockSelector:r,selectionCb:o}=t;let i=!0;const l=On(()=>{const c=n.getSelection();if(!c||i&&Vo([c,"optionalAccess",m=>m.isCollapsed]))return;i=c.isCollapsed||!1;const d=[],u=c.rangeCount||0;for(let m=0;m<u;m++){const h=c.getRangeAt(m),{startContainer:_,startOffset:E,endContainer:y,endOffset:b}=h;to(_,e,s,r,!0)||to(y,e,s,r,!0)||d.push({start:a.getId(_),startOffset:E,end:a.getId(y),endOffset:b})}o({ranges:d})});return l(),Cs("selectionchange",l)}function zY({doc:t,customElementCb:n}){const a=t.defaultView;return!a||!a.customElements?()=>{}:iS(a.customElements,"define",function(s){return function(r,o,i){try{n({define:{name:r}})}catch{}return s.apply(this,[r,o,i])}})}function YY(t,n={}){const a=t.doc.defaultView;if(!a)return()=>{};let e;t.recordDOM&&(e=DR(t,t.doc));const s=kY(t),r=BY(t),o=PR(t),i=FY(t,{win:a}),l=$Y(t),c=HY(t);let d=()=>{},u=()=>{},m=()=>{},h=()=>{};t.recordDOM&&(d=GY(t,{win:a}),u=kR(t,t.doc),m=VY(t,{win:a}),t.collectFonts&&(h=jY(t)));const _=WY(t),E=zY(t),y=[];for(const b of t.plugins)y.push(b.observer(b.callback,a,b.options));return On(()=>{wc.forEach(b=>b.reset()),Vo([e,"optionalAccess",b=>b.disconnect,"call",b=>b()]),s(),r(),o(),i(),l(),c(),d(),u(),m(),h(),_(),E(),y.forEach(b=>b())})}function Mp(t){return typeof window[t]<"u"}function Lp(t){return!!(typeof window[t]<"u"&&window[t].prototype&&"insertRule"in window[t].prototype&&"deleteRule"in window[t].prototype)}class yv{constructor(n){this.generateIdFn=n,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(n,a,e,s){const r=e||this.getIdToRemoteIdMap(n),o=s||this.getRemoteIdToIdMap(n);let i=r.get(a);return i||(i=this.generateIdFn(),r.set(a,i),o.set(i,a)),i}getIds(n,a){const e=this.getIdToRemoteIdMap(n),s=this.getRemoteIdToIdMap(n);return a.map(r=>this.getId(n,r,e,s))}getRemoteId(n,a,e){const s=e||this.getRemoteIdToIdMap(n);if(typeof a!="number")return a;const r=s.get(a);return r||-1}getRemoteIds(n,a){const e=this.getRemoteIdToIdMap(n);return a.map(s=>this.getRemoteId(n,s,e))}reset(n){if(!n){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(n),this.iframeRemoteIdToIdMap.delete(n)}getIdToRemoteIdMap(n){let a=this.iframeIdToRemoteIdMap.get(n);return a||(a=new Map,this.iframeIdToRemoteIdMap.set(n,a)),a}getRemoteIdToIdMap(n){let a=this.iframeRemoteIdToIdMap.get(n);return a||(a=new Map,this.iframeRemoteIdToIdMap.set(n,a)),a}}function W0(t){let n,a=t[0],e=1;for(;e<t.length;){const s=t[e],r=t[e+1];if(e+=2,(s==="optionalAccess"||s==="optionalCall")&&a==null)return;s==="access"||s==="optionalAccess"?(n=a,a=r(a)):(s==="call"||s==="optionalCall")&&(a=r((...o)=>a.call(n,...o)),n=void 0)}return a}class KY{constructor(){this.crossOriginIframeMirror=new yv(oS),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class XY{constructor(n){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new yv(oS),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=n.mutationCb,this.wrappedEmit=n.wrappedEmit,this.stylesheetManager=n.stylesheetManager,this.recordCrossOriginIframes=n.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new yv(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=n.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(n){this.iframes.set(n,!0),n.contentWindow&&this.crossOriginIframeMap.set(n.contentWindow,n)}addLoadListener(n){this.loadListener=n}attachIframe(n,a){this.mutationCb({adds:[{parentId:this.mirror.getId(n),nextId:null,node:a}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),W0([this,"access",e=>e.loadListener,"optionalCall",e=>e(n)]),n.contentDocument&&n.contentDocument.adoptedStyleSheets&&n.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(n.contentDocument.adoptedStyleSheets,this.mirror.getId(n.contentDocument))}handleMessage(n){const a=n;if(a.data.type!=="rrweb"||a.origin!==a.data.origin||!n.source)return;const s=this.crossOriginIframeMap.get(n.source);if(!s)return;const r=this.transformCrossOriginEvent(s,a.data.event);r&&this.wrappedEmit(r,a.data.isCheckout)}transformCrossOriginEvent(n,a){switch(a.type){case mn.FullSnapshot:{this.crossOriginIframeMirror.reset(n),this.crossOriginIframeStyleMirror.reset(n),this.replaceIdOnNode(a.data.node,n);const e=a.data.node.id;return this.crossOriginIframeRootIdMap.set(n,e),this.patchRootIdOnNode(a.data.node,e),{timestamp:a.timestamp,type:mn.IncrementalSnapshot,data:{source:tn.Mutation,adds:[{parentId:this.mirror.getId(n),nextId:null,node:a.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case mn.Meta:case mn.Load:case mn.DomContentLoaded:return!1;case mn.Plugin:return a;case mn.Custom:return this.replaceIds(a.data.payload,n,["id","parentId","previousId","nextId"]),a;case mn.IncrementalSnapshot:switch(a.data.source){case tn.Mutation:return a.data.adds.forEach(e=>{this.replaceIds(e,n,["parentId","nextId","previousId"]),this.replaceIdOnNode(e.node,n);const s=this.crossOriginIframeRootIdMap.get(n);s&&this.patchRootIdOnNode(e.node,s)}),a.data.removes.forEach(e=>{this.replaceIds(e,n,["parentId","id"])}),a.data.attributes.forEach(e=>{this.replaceIds(e,n,["id"])}),a.data.texts.forEach(e=>{this.replaceIds(e,n,["id"])}),a;case tn.Drag:case tn.TouchMove:case tn.MouseMove:return a.data.positions.forEach(e=>{this.replaceIds(e,n,["id"])}),a;case tn.ViewportResize:return!1;case tn.MediaInteraction:case tn.MouseInteraction:case tn.Scroll:case tn.CanvasMutation:case tn.Input:return this.replaceIds(a.data,n,["id"]),a;case tn.StyleSheetRule:case tn.StyleDeclaration:return this.replaceIds(a.data,n,["id"]),this.replaceStyleIds(a.data,n,["styleId"]),a;case tn.Font:return a;case tn.Selection:return a.data.ranges.forEach(e=>{this.replaceIds(e,n,["start","end"])}),a;case tn.AdoptedStyleSheet:return this.replaceIds(a.data,n,["id"]),this.replaceStyleIds(a.data,n,["styleIds"]),W0([a,"access",e=>e.data,"access",e=>e.styles,"optionalAccess",e=>e.forEach,"call",e=>e(s=>{this.replaceStyleIds(s,n,["styleId"])})]),a}}return!1}replace(n,a,e,s){for(const r of s)!Array.isArray(a[r])&&typeof a[r]!="number"||(Array.isArray(a[r])?a[r]=n.getIds(e,a[r]):a[r]=n.getId(e,a[r]));return a}replaceIds(n,a,e){return this.replace(this.crossOriginIframeMirror,n,a,e)}replaceStyleIds(n,a,e){return this.replace(this.crossOriginIframeStyleMirror,n,a,e)}replaceIdOnNode(n,a){this.replaceIds(n,a,["id","rootId"]),"childNodes"in n&&n.childNodes.forEach(e=>{this.replaceIdOnNode(e,a)})}patchRootIdOnNode(n,a){n.type!==ja.Document&&!n.rootId&&(n.rootId=a),"childNodes"in n&&n.childNodes.forEach(e=>{this.patchRootIdOnNode(e,a)})}}class qY{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class ZY{constructor(n){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=n.mutationCb,this.scrollCb=n.scrollCb,this.bypassOptions=n.bypassOptions,this.mirror=n.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(n,a){if(!mu(n)||this.shadowDoms.has(n))return;this.shadowDoms.add(n),this.bypassOptions.canvasManager.addShadowRoot(n);const e=DR({...this.bypassOptions,doc:a,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},n);this.restoreHandlers.push(()=>e.disconnect()),this.restoreHandlers.push(PR({...this.bypassOptions,scrollCb:this.scrollCb,doc:n,mirror:this.mirror})),Ch(()=>{n.adoptedStyleSheets&&n.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(n.adoptedStyleSheets,this.mirror.getId(n.host)),this.restoreHandlers.push(kR({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},n))},0)}observeAttachShadow(n){!n.contentWindow||!n.contentDocument||this.patchAttachShadow(n.contentWindow.Element,n.contentDocument)}patchAttachShadow(n,a){const e=this;this.restoreHandlers.push(iS(n.prototype,"attachShadow",function(s){return function(r){const o=s.call(this,r);return this.shadowRoot&&wR(this)&&e.addShadowRoot(this.shadowRoot,a),o}}))}reset(){this.restoreHandlers.forEach(n=>{try{n()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}}class z0{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class QY{constructor(n){this.trackedLinkElements=new WeakSet,this.styleMirror=new CY,this.mutationCb=n.mutationCb,this.adoptedStyleSheetCb=n.adoptedStyleSheetCb}attachLinkElement(n,a){"_cssText"in a.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:a.id,attributes:a.attributes}]}),this.trackLinkElement(n)}trackLinkElement(n){this.trackedLinkElements.has(n)||(this.trackedLinkElements.add(n),this.trackStylesheetInLinkElement(n))}adoptStyleSheets(n,a){if(n.length===0)return;const e={id:a,styleIds:[]},s=[];for(const r of n){let o;this.styleMirror.has(r)?o=this.styleMirror.getId(r):(o=this.styleMirror.add(r),s.push({styleId:o,rules:Array.from(r.rules||CSSRule,(i,l)=>({rule:hR(i),index:l}))})),e.styleIds.push(o)}s.length>0&&(e.styles=s),this.adoptedStyleSheetCb(e)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(n){}}class JY{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){xY(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(n,a){const e=this.nodeMap.get(n);return e&&Array.from(e).some(s=>s!==a)}add(n,a){this.nodeMap.set(n,(this.nodeMap.get(n)||new Set).add(a))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}let ya,Em;try{if(Array.from([1],t=>t*2)[0]!==2){const t=document.createElement("iframe");document.body.appendChild(t),Array.from=xl([t,"access",n=>n.contentWindow,"optionalAccess",n=>n.Array,"access",n=>n.from])||Array.from,document.body.removeChild(t)}}catch(t){console.debug("Unable to override Array.from",t)}const Uo=eY();function jr(t={}){const{emit:n,checkoutEveryNms:a,checkoutEveryNth:e,blockClass:s="rr-block",blockSelector:r=null,unblockSelector:o=null,ignoreClass:i="rr-ignore",ignoreSelector:l=null,maskAllText:c=!1,maskTextClass:d="rr-mask",unmaskTextClass:u=null,maskTextSelector:m=null,unmaskTextSelector:h=null,inlineStylesheet:_=!0,maskAllInputs:E,maskInputOptions:y,slimDOMOptions:b,maskAttributeFn:A,maskInputFn:T,maskTextFn:I,maxCanvasSize:N=null,packFn:x,sampling:R={},dataURLOptions:M={},mousemoveWait:w,recordDOM:D=!0,recordCanvas:B=!1,recordCrossOriginIframes:k=!1,recordAfter:V=t.recordAfter==="DOMContentLoaded"?t.recordAfter:"load",userTriggeredOnInput:F=!1,collectFonts:$=!1,inlineImages:Y=!1,plugins:j,keepIframeSrcFn:U=()=>!1,ignoreCSSAttributes:J=new Set([]),errorHandler:te,onMutation:q,getCanvasManager:K}=t;DY(te);const W=k?window.parent===window:!0;let ee=!1;if(!W)try{window.parent.document&&(ee=!1)}catch{ee=!0}if(W&&!n)throw new Error("emit function is required");w!==void 0&&R.mousemove===void 0&&(R.mousemove=w),Uo.reset();const ae=E===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:y!==void 0?y:{},ve=b===!0||b==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:b==="all",headMetaDescKeywords:b==="all"}:b||{};IY();let Ce,ue=0;const ge=se=>{for(const ie of j||[])ie.eventProcessor&&(se=ie.eventProcessor(se));return x&&!ee&&(se=x(se)),se};ya=(se,ie)=>{const fe=se;if(fe.timestamp=bm(),xl([wc,"access",me=>me[0],"optionalAccess",me=>me.isFrozen,"call",me=>me()])&&fe.type!==mn.FullSnapshot&&!(fe.type===mn.IncrementalSnapshot&&fe.data.source===tn.Mutation)&&wc.forEach(me=>me.unfreeze()),W)xl([n,"optionalCall",me=>me(ge(fe),ie)]);else if(ee){const me={type:"rrweb",event:ge(fe),origin:window.location.origin,isCheckout:ie};window.parent.postMessage(me,"*")}if(fe.type===mn.FullSnapshot)Ce=fe,ue=0;else if(fe.type===mn.IncrementalSnapshot){if(fe.data.source===tn.Mutation&&fe.data.isAttachIframe)return;ue++;const me=e&&ue>=e,De=a&&Ce&&fe.timestamp-Ce.timestamp>a;(me||De)&&X(!0)}};const Me=se=>{ya({type:mn.IncrementalSnapshot,data:{source:tn.Mutation,...se}})},We=se=>ya({type:mn.IncrementalSnapshot,data:{source:tn.Scroll,...se}}),Ue=se=>ya({type:mn.IncrementalSnapshot,data:{source:tn.CanvasMutation,...se}}),Re=se=>ya({type:mn.IncrementalSnapshot,data:{source:tn.AdoptedStyleSheet,...se}}),Le=new QY({mutationCb:Me,adoptedStyleSheetCb:Re}),Xe=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new KY:new XY({mirror:Uo,mutationCb:Me,stylesheetManager:Le,recordCrossOriginIframes:k,wrappedEmit:ya});for(const se of j||[])se.getMirror&&se.getMirror({nodeMirror:Uo,crossOriginIframeMirror:Xe.crossOriginIframeMirror,crossOriginIframeStyleMirror:Xe.crossOriginIframeStyleMirror});const et=new JY,yt=tK(K,{mirror:Uo,win:window,mutationCb:se=>ya({type:mn.IncrementalSnapshot,data:{source:tn.CanvasMutation,...se}}),recordCanvas:B,blockClass:s,blockSelector:r,unblockSelector:o,maxCanvasSize:N,sampling:R.canvas,dataURLOptions:M,errorHandler:te}),Dt=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new qY:new ZY({mutationCb:Me,scrollCb:We,bypassOptions:{onMutation:q,blockClass:s,blockSelector:r,unblockSelector:o,maskAllText:c,maskTextClass:d,unmaskTextClass:u,maskTextSelector:m,unmaskTextSelector:h,inlineStylesheet:_,maskInputOptions:ae,dataURLOptions:M,maskAttributeFn:A,maskTextFn:I,maskInputFn:T,recordCanvas:B,inlineImages:Y,sampling:R,slimDOMOptions:ve,iframeManager:Xe,stylesheetManager:Le,canvasManager:yt,keepIframeSrcFn:U,processedNodeManager:et},mirror:Uo}),X=(se=!1)=>{if(!D)return;ya({type:mn.Meta,data:{href:window.location.href,width:IR(),height:yR()}},se),Le.reset(),Dt.init(),wc.forEach(fe=>fe.lock());const ie=AY(document,{mirror:Uo,blockClass:s,blockSelector:r,unblockSelector:o,maskAllText:c,maskTextClass:d,unmaskTextClass:u,maskTextSelector:m,unmaskTextSelector:h,inlineStylesheet:_,maskAllInputs:ae,maskAttributeFn:A,maskInputFn:T,maskTextFn:I,slimDOM:ve,dataURLOptions:M,recordCanvas:B,inlineImages:Y,onSerialize:fe=>{NR(fe,Uo)&&Xe.addIframe(fe),xR(fe,Uo)&&Le.trackLinkElement(fe),Tv(fe)&&Dt.addShadowRoot(fe.shadowRoot,document)},onIframeLoad:(fe,me)=>{Xe.attachIframe(fe,me),fe.contentWindow&&yt.addWindow(fe.contentWindow),Dt.observeAttachShadow(fe)},onStylesheetLoad:(fe,me)=>{Le.attachLinkElement(fe,me)},keepIframeSrcFn:U});if(!ie)return console.warn("Failed to snapshot the document");ya({type:mn.FullSnapshot,data:{node:ie,initialOffset:AR(window)}}),wc.forEach(fe=>fe.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Le.adoptStyleSheets(document.adoptedStyleSheets,Uo.getId(document))};Em=X;try{const se=[],ie=me=>On(YY)({onMutation:q,mutationCb:Me,mousemoveCb:(De,Ye)=>ya({type:mn.IncrementalSnapshot,data:{source:Ye,positions:De}}),mouseInteractionCb:De=>ya({type:mn.IncrementalSnapshot,data:{source:tn.MouseInteraction,...De}}),scrollCb:We,viewportResizeCb:De=>ya({type:mn.IncrementalSnapshot,data:{source:tn.ViewportResize,...De}}),inputCb:De=>ya({type:mn.IncrementalSnapshot,data:{source:tn.Input,...De}}),mediaInteractionCb:De=>ya({type:mn.IncrementalSnapshot,data:{source:tn.MediaInteraction,...De}}),styleSheetRuleCb:De=>ya({type:mn.IncrementalSnapshot,data:{source:tn.StyleSheetRule,...De}}),styleDeclarationCb:De=>ya({type:mn.IncrementalSnapshot,data:{source:tn.StyleDeclaration,...De}}),canvasMutationCb:Ue,fontCb:De=>ya({type:mn.IncrementalSnapshot,data:{source:tn.Font,...De}}),selectionCb:De=>{ya({type:mn.IncrementalSnapshot,data:{source:tn.Selection,...De}})},customElementCb:De=>{ya({type:mn.IncrementalSnapshot,data:{source:tn.CustomElement,...De}})},blockClass:s,ignoreClass:i,ignoreSelector:l,maskAllText:c,maskTextClass:d,unmaskTextClass:u,maskTextSelector:m,unmaskTextSelector:h,maskInputOptions:ae,inlineStylesheet:_,sampling:R,recordDOM:D,recordCanvas:B,inlineImages:Y,userTriggeredOnInput:F,collectFonts:$,doc:me,maskAttributeFn:A,maskInputFn:T,maskTextFn:I,keepIframeSrcFn:U,blockSelector:r,unblockSelector:o,slimDOMOptions:ve,dataURLOptions:M,mirror:Uo,iframeManager:Xe,stylesheetManager:Le,shadowDomManager:Dt,processedNodeManager:et,canvasManager:yt,ignoreCSSAttributes:J,plugins:xl([j,"optionalAccess",De=>De.filter,"call",De=>De(Ye=>Ye.observer),"optionalAccess",De=>De.map,"call",De=>De(Ye=>({observer:Ye.observer,options:Ye.options,callback:ze=>ya({type:mn.Plugin,data:{plugin:Ye.name,payload:ze}})}))])||[]},{});Xe.addLoadListener(me=>{try{se.push(ie(me.contentDocument))}catch(De){console.warn(De)}});const fe=()=>{X(),se.push(ie(document))};return document.readyState==="interactive"||document.readyState==="complete"?fe():(se.push(Cs("DOMContentLoaded",()=>{ya({type:mn.DomContentLoaded,data:{}}),V==="DOMContentLoaded"&&fe()})),se.push(Cs("load",()=>{ya({type:mn.Load,data:{}}),V==="load"&&fe()},window))),()=>{se.forEach(me=>me()),et.destroy(),Em=void 0,PY()}}catch(se){console.warn(se)}}function eK(t){if(!Em)throw new Error("please take full snapshot after start recording");Em(t)}jr.mirror=Uo;jr.takeFullSnapshot=eK;function tK(t,n){try{return t?t(n):new z0}catch{return console.warn("Unable to initialize CanvasManager"),new z0}}const Yt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Y0=["info","warn","error","log"],Ef="[Replay] ";function Og(t,n="info"){AE({category:"console",data:{logger:"replay"},level:n,message:`${Ef}${t}`},{level:n})}function nK(){let t=!1,n=!1;const a={exception:()=>{},infoTick:()=>{},setConfig:e=>{t=e.captureExceptions,n=e.traceInternals}};return Yt?(Y0.forEach(e=>{a[e]=(...s)=>{vn[e](Ef,...s),n&&Og(s.join(""),L2(e))}}),a.exception=(e,...s)=>{s.length&&a.error&&a.error(...s),vn.error(Ef,e),t?vd(e):n&&Og(e,"error")},a.infoTick=(...e)=>{vn.info(Ef,...e),n&&setTimeout(()=>Og(e[0]),0)}):Y0.forEach(e=>{a[e]=()=>{}}),a}const Qt=nK(),aK=3,sK=5;function cS(t){return t>9999999999?t:t*1e3}function Ng(t){return t>9999999999?t/1e3:t}function tp(t,n){n.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(n.category)?t.triggerUserActivity():t.checkAndHandleExpiredSession(),t.addUpdate(()=>(t.throttledAddEvent({type:mn.Custom,timestamp:(n.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:gE(n,10,1e3)}}),n.category==="console")))}const oK="button,a";function BR(t){return t.closest(oK)||t}function FR(t){const n=UR(t);return!n||!(n instanceof Element)?n:BR(n)}function UR(t){return rK(t)?t.target:t}function rK(t){return typeof t=="object"&&!!t&&"target"in t}let Si;function iK(t){return Si||(Si=[],lK()),Si.push(t),()=>{const n=Si?Si.indexOf(t):-1;n>-1&&Si.splice(n,1)}}function lK(){Nk(ra,"open",function(t){return function(...n){if(Si)try{Si.forEach(a=>a())}catch{}return t.apply(ra,n)}})}const cK=new Set([tn.Mutation,tn.StyleSheetRule,tn.StyleDeclaration,tn.AdoptedStyleSheet,tn.CanvasMutation,tn.Selection,tn.MediaInteraction]);function dK(t,n,a){t.handleClick(n,a)}class uK{constructor(n,a,e=tp){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=a.timeout/1e3,this._threshold=a.threshold/1e3,this._scollTimeout=a.scrollTimeout/1e3,this._replay=n,this._ignoreSelector=a.ignoreSelector,this._addBreadcrumbEvent=e}addListeners(){const n=iK(()=>{this._lastMutation=K0()});this._teardown=()=>{n(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(n,a){if(fK(a,this._ignoreSelector)||!mK(n))return;const e={timestamp:Ng(n.timestamp),clickBreadcrumb:n,clickCount:0,node:a};this._clicks.some(s=>s.node===e.node&&Math.abs(s.timestamp-e.timestamp)<1)||(this._clicks.push(e),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(n=Date.now()){this._lastMutation=Ng(n)}registerScroll(n=Date.now()){this._lastScroll=Ng(n)}registerClick(n){const a=BR(n);this._handleMultiClick(a)}_handleMultiClick(n){this._getClicks(n).forEach(a=>{a.clickCount++})}_getClicks(n){return this._clicks.filter(a=>a.node===n)}_checkClicks(){const n=[],a=K0();this._clicks.forEach(e=>{!e.mutationAfter&&this._lastMutation&&(e.mutationAfter=e.timestamp<=this._lastMutation?this._lastMutation-e.timestamp:void 0),!e.scrollAfter&&this._lastScroll&&(e.scrollAfter=e.timestamp<=this._lastScroll?this._lastScroll-e.timestamp:void 0),e.timestamp+this._timeout<=a&&n.push(e)});for(const e of n){const s=this._clicks.indexOf(e);s>-1&&(this._generateBreadcrumbs(e),this._clicks.splice(s,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(n){const a=this._replay,e=n.scrollAfter&&n.scrollAfter<=this._scollTimeout,s=n.mutationAfter&&n.mutationAfter<=this._threshold,r=!e&&!s,{clickCount:o,clickBreadcrumb:i}=n;if(r){const l=Math.min(n.mutationAfter||this._timeout,this._timeout)*1e3,c=l<this._timeout*1e3?"mutation":"timeout",d={type:"default",message:i.message,timestamp:i.timestamp,category:"ui.slowClickDetected",data:{...i.data,url:ra.location.href,route:a.getCurrentRoute(),timeAfterClickMs:l,endReason:c,clickCount:o||1}};this._addBreadcrumbEvent(a,d);return}if(o>1){const l={type:"default",message:i.message,timestamp:i.timestamp,category:"ui.multiClick",data:{...i.data,url:ra.location.href,route:a.getCurrentRoute(),clickCount:o,metric:!0}};this._addBreadcrumbEvent(a,l)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=Yc(()=>this._checkClicks(),1e3)}}const pK=["A","BUTTON","INPUT"];function fK(t,n){return!!(!pK.includes(t.tagName)||t.tagName==="INPUT"&&!["submit","button"].includes(t.getAttribute("type")||"")||t.tagName==="A"&&(t.hasAttribute("download")||t.hasAttribute("target")&&t.getAttribute("target")!=="_self")||n&&t.matches(n))}function mK(t){return!!(t.data&&typeof t.data.nodeId=="number"&&t.timestamp)}function K0(){return Date.now()/1e3}function hK(t,n){try{if(!_K(n))return;const{source:a}=n.data;if(cK.has(a)&&t.registerMutation(n.timestamp),a===tn.Scroll&&t.registerScroll(n.timestamp),gK(n)){const{type:e,id:s}=n.data,r=jr.mirror.getNode(s);r instanceof HTMLElement&&e===Is.Click&&t.registerClick(r)}}catch{}}function _K(t){return t.type===aK}function gK(t){return t.data.source===tn.MouseInteraction}function cr(t){return{timestamp:Date.now()/1e3,type:"default",...t}}var Sm;(function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"})(Sm||(Sm={}));const bK=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function vK(t){const n={};!t["data-sentry-component"]&&t["data-sentry-element"]&&(t["data-sentry-component"]=t["data-sentry-element"]);for(const a in t)if(bK.has(a)){let e=a;(a==="data-testid"||a==="data-test-id")&&(e="testId"),n[e]=t[a]}return n}const EK=t=>n=>{if(!t.isEnabled())return;const a=SK(n);if(!a)return;const e=n.name==="click",s=e?n.event:void 0;e&&t.clickDetector&&s&&s.target&&!s.altKey&&!s.metaKey&&!s.ctrlKey&&!s.shiftKey&&dK(t.clickDetector,a,FR(n.event)),tp(t,a)};function $R(t,n){const a=jr.mirror.getId(t),e=a&&jr.mirror.getNode(a),s=e&&jr.mirror.getMeta(e),r=s&&AK(s)?s:null;return{message:n,data:r?{nodeId:a,node:{id:a,tagName:r.tagName,textContent:Array.from(r.childNodes).map(o=>o.type===Sm.Text&&o.textContent).filter(Boolean).map(o=>o.trim()).join(""),attributes:vK(r.attributes)}}:{}}}function SK(t){const{target:n,message:a}=TK(t);return cr({category:`ui.${t.name}`,...$R(n,a)})}function TK(t){const n=t.name==="click";let a,e=null;try{e=n?FR(t.event):UR(t.event),a=N2(e,{maxStringLength:200})||"<unknown>"}catch{a="<unknown>"}return{target:e,message:a}}function AK(t){return t.type===Sm.Element}function yK(t,n){if(!t.isEnabled())return;t.updateUserActivity();const a=IK(n);a&&tp(t,a)}function IK(t){const{metaKey:n,shiftKey:a,ctrlKey:e,altKey:s,key:r,target:o}=t;if(!o||CK(o)||!r)return null;const i=n||e||s,l=r.length===1;if(!i&&l)return null;const c=N2(o,{maxStringLength:200})||"<unknown>",d=$R(o,c);return cr({category:"ui.keyDown",message:c,data:{...d.data,metaKey:n,shiftKey:a,ctrlKey:e,altKey:s,key:r}})}function CK(t){return t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable}const OK={resource:MK,paint:RK,navigation:wK};function Dp(t,n){return({metric:a})=>void n.replayPerformanceEntries.push(t(a))}function NK(t){return t.map(xK).filter(Boolean)}function xK(t){const n=OK[t.entryType];return n?n(t):null}function od(t){return((Zb||ra.performance.timeOrigin)+t)/1e3}function RK(t){const{duration:n,entryType:a,name:e,startTime:s}=t,r=od(s);return{type:a,name:e,start:r,end:r+n,data:void 0}}function wK(t){const{entryType:n,name:a,decodedBodySize:e,duration:s,domComplete:r,encodedBodySize:o,domContentLoadedEventStart:i,domContentLoadedEventEnd:l,domInteractive:c,loadEventStart:d,loadEventEnd:u,redirectCount:m,startTime:h,transferSize:_,type:E}=t;return s===0?null:{type:`${n}.${E}`,start:od(h),end:od(r),name:a,data:{size:_,decodedBodySize:e,encodedBodySize:o,duration:s,domInteractive:c,domContentLoadedEventStart:i,domContentLoadedEventEnd:l,loadEventStart:d,loadEventEnd:u,domComplete:r,redirectCount:m}}}function MK(t){const{entryType:n,initiatorType:a,name:e,responseEnd:s,startTime:r,decodedBodySize:o,encodedBodySize:i,responseStatus:l,transferSize:c}=t;return["fetch","xmlhttprequest"].includes(a)?null:{type:`${n}.${a}`,start:od(r),end:od(s),name:e,data:{size:c,statusCode:l,decodedBodySize:o,encodedBodySize:i}}}function LK(t){const n=t.entries[t.entries.length-1],a=n&&n.element?[n.element]:void 0;return Oh(t,"largest-contentful-paint",a)}function DK(t){return t.sources!==void 0}function PK(t){const n=[],a=[];for(const e of t.entries)if(DK(e)){const s=[];for(const r of e.sources)if(r.node){a.push(r.node);const o=jr.mirror.getId(r.node);o&&s.push(o)}n.push({value:e.value,nodeIds:s.length?s:void 0})}return Oh(t,"cumulative-layout-shift",a,n)}function kK(t){const n=t.entries[t.entries.length-1],a=n&&n.target?[n.target]:void 0;return Oh(t,"first-input-delay",a)}function BK(t){const n=t.entries[t.entries.length-1],a=n&&n.target?[n.target]:void 0;return Oh(t,"interaction-to-next-paint",a)}function Oh(t,n,a,e){const s=t.value,r=t.rating,o=od(s);return{type:"web-vital",name:n,start:o,end:o,data:{value:s,size:s,rating:r,nodeIds:a?a.map(i=>jr.mirror.getId(i)):void 0,attributions:e}}}function FK(t){function n(s){t.performanceEntries.includes(s)||t.performanceEntries.push(s)}function a({entries:s}){s.forEach(n)}const e=[];return["navigation","paint","resource"].forEach(s=>{e.push(f8(s,a))}),e.push(m8(Dp(LK,t)),h8(Dp(PK,t)),_8(Dp(kK,t)),g8(Dp(BK,t))),()=>{e.forEach(s=>s())}}const UK='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}},L=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},O=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},j=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},q=function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&j(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}},B=function(t){return 10+(t.filename?t.filename.length+1:0)},G=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(O(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();var H=function(){function t(t,n){this.c=L(),this.v=1,G.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),G.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=O(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=L();i.p(n.dictionary),j(t,2,i.d())}}(r,this.o),this.v=0),n&&j(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),J="undefined"!=typeof TextEncoder&&new TextEncoder,K="undefined"!=typeof TextDecoder&&new TextDecoder;try{K.decode(F,{stream:!0})}catch(t){}var N=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(P(t),this.d=n||!1)},t}();function P(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(J)return J.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}function Q(t){return function(t,n){n||(n={});var r=S(),e=t.length;r.p(t);var i=O(t,n,B(n),8),a=i.length;return q(i,n),j(i,a-8,r.d()),j(i,a-4,e),i}(P(t))}const R=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new H,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new N(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},V={clear:()=>{R.clear()},addEvent:t=>R.addEvent(t),finish:()=>R.finish(),compress:t=>Q(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in V&&"function"==typeof V[n])try{const t=V[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function $K(){const t=new Blob([UK]);return URL.createObjectURL(t)}class dS extends Error{constructor(){super(`Event buffer exceeded maximum size of ${aS}.`)}}class GR{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(n){const a=JSON.stringify(n).length;if(this._totalSize+=a,this._totalSize>aS)throw new dS;this.events.push(n)}finish(){return new Promise(n=>{const a=this.events;this.clear(),n(JSON.stringify(a))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const n=this.events.map(a=>a.timestamp).sort()[0];return n?cS(n):null}}class GK{constructor(n){this._worker=n,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((n,a)=>{this._worker.addEventListener("message",({data:e})=>{e.success?n():a()},{once:!0}),this._worker.addEventListener("error",e=>{a(e)},{once:!0})}),this._ensureReadyPromise)}destroy(){Yt&&Qt.info("Destroying compression worker"),this._worker.terminate()}postMessage(n,a){const e=this._getAndIncrementId();return new Promise((s,r)=>{const o=({data:i})=>{const l=i;if(l.method===n&&l.id===e){if(this._worker.removeEventListener("message",o),!l.success){Yt&&Qt.error("Error in compression worker: ",l.response),r(new Error("Error in compression worker"));return}s(l.response)}};this._worker.addEventListener("message",o),this._worker.postMessage({id:e,method:n,arg:a})})}_getAndIncrementId(){return this._id++}}class VK{constructor(n){this._worker=new GK(n),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(n){const a=cS(n.timestamp);(!this._earliestTimestamp||a<this._earliestTimestamp)&&(this._earliestTimestamp=a);const e=JSON.stringify(n);return this._totalSize+=e.length,this._totalSize>aS?Promise.reject(new dS):this._sendEventToWorker(e)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,n=>{Yt&&Qt.exception(n,'Sending "clear" message to worker failed',n)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(n){return this._worker.postMessage("addEvent",n)}async _finishRequest(){const n=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,n}}class HK{constructor(n){this._fallback=new GR,this._compression=new VK(n),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(n){this._used.hasCheckout=n}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(n){return this._used.addEvent(n)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(n){Yt&&Qt.exception(n,"Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:n,hasCheckout:a}=this._fallback,e=[];for(const s of n)e.push(this._compression.addEvent(s));this._compression.hasCheckout=a,this._used=this._compression;try{await Promise.all(e)}catch(s){Yt&&Qt.exception(s,"Failed to add events when switching buffers.")}}}function jK({useCompression:t,workerUrl:n}){if(t&&window.Worker){const a=WK(n);if(a)return a}return Yt&&Qt.info("Using simple buffer"),new GR}function WK(t){try{const n=t||zK();if(!n)return;Yt&&Qt.info(`Using compression worker${t?` from ${t}`:""}`);const a=new Worker(n);return new HK(a)}catch(n){Yt&&Qt.exception(n,"Failed to create compression worker")}}function zK(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?$K():""}function uS(){try{return"sessionStorage"in ra&&!!ra.sessionStorage}catch{return!1}}function YK(t){KK(),t.session=void 0}function KK(){if(uS())try{ra.sessionStorage.removeItem(tS)}catch{}}function VR(t){return t===void 0?!1:Math.random()<t}function HR(t){const n=Date.now(),a=t.id||vE(),e=t.started||n,s=t.lastActivity||n,r=t.segmentId||0,o=t.sampled,i=t.previousSessionId;return{id:a,started:e,lastActivity:s,segmentId:r,sampled:o,previousSessionId:i}}function pS(t){if(uS())try{ra.sessionStorage.setItem(tS,JSON.stringify(t))}catch{}}function XK(t,n){return VR(t)?"session":n?"buffer":!1}function X0({sessionSampleRate:t,allowBuffering:n,stickySession:a=!1},{previousSessionId:e}={}){const s=XK(t,n),r=HR({sampled:s,previousSessionId:e});return a&&pS(r),r}function qK(){if(!uS())return null;try{const t=ra.sessionStorage.getItem(tS);if(!t)return null;const n=JSON.parse(t);return Yt&&Qt.infoTick("Loading existing session"),HR(n)}catch{return null}}function Iv(t,n,a=+new Date){return t===null||n===void 0||n<0?!0:n===0?!1:t+n<=a}function jR(t,{maxReplayDuration:n,sessionIdleExpire:a,targetTime:e=Date.now()}){return Iv(t.started,n,e)||Iv(t.lastActivity,a,e)}function WR(t,{sessionIdleExpire:n,maxReplayDuration:a}){return!(!jR(t,{sessionIdleExpire:n,maxReplayDuration:a})||t.sampled==="buffer"&&t.segmentId===0)}function xg({sessionIdleExpire:t,maxReplayDuration:n,previousSessionId:a},e){const s=e.stickySession&&qK();return s?WR(s,{sessionIdleExpire:t,maxReplayDuration:n})?(Yt&&Qt.infoTick("Session in sessionStorage is expired, creating new one..."),X0(e,{previousSessionId:s.id})):s:(Yt&&Qt.infoTick("Creating new session"),X0(e,{previousSessionId:a}))}function ZK(t){return t.type===mn.Custom}function fS(t,n,a){return YR(t,n)?(zR(t,n,a),!0):!1}function QK(t,n,a){return YR(t,n)?zR(t,n,a):Promise.resolve(null)}async function zR(t,n,a){if(!t.eventBuffer)return null;try{a&&t.recordingMode==="buffer"&&t.eventBuffer.clear(),a&&(t.eventBuffer.hasCheckout=!0);const e=t.getOptions(),s=JK(n,e.beforeAddRecordingEvent);return s?await t.eventBuffer.addEvent(s):void 0}catch(e){const s=e&&e instanceof dS?"addEventSizeExceeded":"addEvent";t.handleException(e),await t.stop({reason:s});const r=ia();r&&r.recordDroppedEvent("internal_sdk_error","replay")}}function YR(t,n){if(!t.eventBuffer||t.isPaused()||!t.isEnabled())return!1;const a=cS(n.timestamp);return a+t.timeouts.sessionIdlePause<Date.now()?!1:a>t.getContext().initialTimestamp+t.getOptions().maxReplayDuration?(Yt&&Qt.infoTick(`Skipping event with timestamp ${a} because it is after maxReplayDuration`),!1):!0}function JK(t,n){try{if(typeof n=="function"&&ZK(t))return n(t)}catch(a){return Yt&&Qt.exception(a,"An error occured in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return t}function mS(t){return!t.type}function Cv(t){return t.type==="transaction"}function eX(t){return t.type==="replay_event"}function q0(t){return t.type==="feedback"}function tX(t){return(n,a)=>{if(!t.isEnabled()||!mS(n)&&!Cv(n))return;const e=a&&a.statusCode;if(!(!e||e<200||e>=300)){if(Cv(n)){nX(t,n);return}aX(t,n)}}}function nX(t,n){const a=t.getContext();n.contexts&&n.contexts.trace&&n.contexts.trace.trace_id&&a.traceIds.size<100&&a.traceIds.add(n.contexts.trace.trace_id)}function aX(t,n){const a=t.getContext();if(n.event_id&&a.errorIds.size<100&&a.errorIds.add(n.event_id),t.recordingMode!=="buffer"||!n.tags||!n.tags.replayId)return;const{beforeErrorSampling:e}=t.getOptions();typeof e=="function"&&!e(n)||Yc(()=>{t.sendBufferedReplayOrFlush()})}function sX(t){return n=>{!t.isEnabled()||!mS(n)||oX(t,n)}}function oX(t,n){const a=n.exception&&n.exception.values&&n.exception.values[0]&&n.exception.values[0].value;if(typeof a=="string"&&(a.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||a.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const e=cr({category:"replay.hydrate-error",data:{url:x2()}});tp(t,e)}}function rX(t){const n=ia();n&&n.on("beforeAddBreadcrumb",a=>iX(t,a))}function iX(t,n){if(!t.isEnabled()||!KR(n))return;const a=lX(n);a&&tp(t,a)}function lX(t){return!KR(t)||["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui.")?null:t.category==="console"?cX(t):cr(t)}function cX(t){const n=t.data&&t.data.arguments;if(!Array.isArray(n)||n.length===0)return cr(t);let a=!1;const e=n.map(s=>{if(!s)return s;if(typeof s=="string")return s.length>wp?(a=!0,`${s.slice(0,wp)}`):s;if(typeof s=="object")try{const r=gE(s,7);return JSON.stringify(r).length>wp?(a=!0,`${JSON.stringify(r,null,2).slice(0,wp)}`):r}catch{}return s});return cr({...t,data:{...t.data,arguments:e,...a?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function KR(t){return!!t.category}function dX(t,n){return t.type||!t.exception||!t.exception.values||!t.exception.values.length?!1:!!(n.originalException&&n.originalException.__rrweb__)}function uX(t,n){t.triggerUserActivity(),t.addUpdate(()=>n.timestamp?(t.throttledAddEvent({type:mn.Custom,timestamp:n.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:n.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:n.event_id}}}}),!1):!0)}function pX(t,n){return t.recordingMode!=="buffer"||n.message===nS||!n.exception||n.type?!1:VR(t.getOptions().errorSampleRate)}function fX(t){return Object.assign((n,a)=>t.isEnabled()?eX(n)?(delete n.breadcrumbs,n):!mS(n)&&!Cv(n)&&!q0(n)||!t.checkAndHandleExpiredSession()?n:q0(n)?(t.flush(),n.contexts.feedback.replay_id=t.getSessionId(),uX(t,n),n):dX(n,a)&&!t.getOptions()._experiments.captureExceptions?(Yt&&Qt.log("Ignoring error from rrweb internals",n),null):((pX(t,n)||t.recordingMode==="session")&&(n.tags={...n.tags,replayId:t.getSessionId()}),n):n,{id:"Replay"})}function Nh(t,n){return n.map(({type:a,start:e,end:s,name:r,data:o})=>{const i=t.throttledAddEvent({type:mn.Custom,timestamp:e,data:{tag:"performanceSpan",payload:{op:a,description:r,startTimestamp:e,endTimestamp:s,data:o}}});return typeof i=="string"?Promise.resolve(null):i})}function mX(t){const{from:n,to:a}=t,e=Date.now()/1e3;return{type:"navigation.push",start:e,end:e,name:a,data:{previous:n}}}function hX(t){return n=>{if(!t.isEnabled())return;const a=mX(n);a!==null&&(t.getContext().urls.push(a.name),t.triggerUserActivity(),t.addUpdate(()=>(Nh(t,[a]),!1)))}}function _X(t,n){return Yt&&t.getOptions()._experiments.traceInternals?!1:nR(n,ia())}function XR(t,n){t.isEnabled()&&n!==null&&(_X(t,n.name)||t.addUpdate(()=>(Nh(t,[n]),!0)))}function xh(t){if(!t)return;const n=new TextEncoder;try{if(typeof t=="string")return n.encode(t).length;if(t instanceof URLSearchParams)return n.encode(t.toString()).length;if(t instanceof FormData){const a=JR(t);return n.encode(a).length}if(t instanceof Blob)return t.size;if(t instanceof ArrayBuffer)return t.byteLength}catch{}}function qR(t){if(!t)return;const n=parseInt(t,10);return isNaN(n)?void 0:n}function ZR(t){try{if(typeof t=="string")return[t];if(t instanceof URLSearchParams)return[t.toString()];if(t instanceof FormData)return[JR(t)];if(!t)return[void 0]}catch(n){return Yt&&Qt.exception(n,"Failed to serialize body",t),[void 0,"BODY_PARSE_ERROR"]}return Yt&&Qt.info("Skipping network body because of body type",t),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Tm(t,n){if(!t)return{headers:{},size:void 0,_meta:{warnings:[n]}};const a={...t._meta},e=a.warnings||[];return a.warnings=[...e,n],t._meta=a,t}function QR(t,n){if(!n)return null;const{startTimestamp:a,endTimestamp:e,url:s,method:r,statusCode:o,request:i,response:l}=n;return{type:t,start:a/1e3,end:e/1e3,name:s,data:sh({method:r,statusCode:o,request:i,response:l})}}function Vu(t){return{headers:{},size:t,_meta:{warnings:["URL_SKIPPED"]}}}function wi(t,n,a){if(!n&&Object.keys(t).length===0)return;if(!n)return{headers:t};if(!a)return{headers:t,size:n};const e={headers:t,size:n},{body:s,warnings:r}=gX(a);return e.body=s,r&&r.length>0&&(e._meta={warnings:r}),e}function Ov(t,n){return Object.entries(t).reduce((a,[e,s])=>{const r=e.toLowerCase();return n.includes(r)&&t[e]&&(a[r]=s),a},{})}function JR(t){return new URLSearchParams(t).toString()}function gX(t){if(!t||typeof t!="string")return{body:t};const n=t.length>L0,a=bX(t);if(n){const e=t.slice(0,L0);return a?{body:e,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${e}`,warnings:["TEXT_TRUNCATED"]}}if(a)try{return{body:JSON.parse(t)}}catch{}return{body:t}}function bX(t){const n=t[0],a=t[t.length-1];return n==="["&&a==="]"||n==="{"&&a==="}"}function Am(t,n){const a=vX(t);return Rk(a,n)}function vX(t,n=ra.document.baseURI){if(t.startsWith("http://")||t.startsWith("https://")||t.startsWith(ra.location.origin))return t;const a=new URL(t,n);if(a.origin!==new URL(n).origin)return t;const e=a.href;return!t.endsWith("/")&&e.endsWith("/")?e.slice(0,-1):e}async function EX(t,n,a){try{const e=await TX(t,n,a),s=QR("resource.fetch",e);XR(a.replay,s)}catch(e){Yt&&Qt.exception(e,"Failed to capture fetch breadcrumb")}}function SX(t,n){const{input:a,response:e}=n,s=a?ew(a):void 0,r=xh(s),o=e?qR(e.headers.get("content-length")):void 0;r!==void 0&&(t.data.request_body_size=r),o!==void 0&&(t.data.response_body_size=o)}async function TX(t,n,a){const e=Date.now(),{startTimestamp:s=e,endTimestamp:r=e}=n,{url:o,method:i,status_code:l=0,request_body_size:c,response_body_size:d}=t.data,u=Am(o,a.networkDetailAllowUrls)&&!Am(o,a.networkDetailDenyUrls),m=u?AX(a,n.input,c):Vu(c),h=await yX(u,a,n.response,d);return{startTimestamp:s,endTimestamp:r,url:o,method:i,statusCode:l,request:m,response:h}}function AX({networkCaptureBodies:t,networkRequestHeaders:n},a,e){const s=a?OX(a,n):{};if(!t)return wi(s,e,void 0);const r=ew(a),[o,i]=ZR(r),l=wi(s,e,o);return i?Tm(l,i):l}async function yX(t,{networkCaptureBodies:n,networkResponseHeaders:a},e,s){if(!t&&s!==void 0)return Vu(s);const r=e?tw(e.headers,a):{};if(!e||!n&&s!==void 0)return wi(r,s,void 0);const[o,i]=await CX(e),l=IX(o,{networkCaptureBodies:n,responseBodySize:s,captureDetails:t,headers:r});return i?Tm(l,i):l}function IX(t,{networkCaptureBodies:n,responseBodySize:a,captureDetails:e,headers:s}){try{const r=t&&t.length&&a===void 0?xh(t):a;return e?n?wi(s,r,t):wi(s,r,void 0):Vu(r)}catch(r){return Yt&&Qt.exception(r,"Failed to serialize response body"),wi(s,a,void 0)}}async function CX(t){const n=NX(t);if(!n)return[void 0,"BODY_PARSE_ERROR"];try{return[await xX(n)]}catch(a){return Yt&&Qt.exception(a,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"]}}function ew(t=[]){if(!(t.length!==2||typeof t[1]!="object"))return t[1].body}function tw(t,n){const a={};return n.forEach(e=>{t.get(e)&&(a[e]=t.get(e))}),a}function OX(t,n){return t.length===1&&typeof t[0]!="string"?Z0(t[0],n):t.length===2?Z0(t[1],n):{}}function Z0(t,n){if(!t)return{};const a=t.headers;return a?a instanceof Headers?tw(a,n):Array.isArray(a)?{}:Ov(a,n):{}}function NX(t){try{return t.clone()}catch(n){Yt&&Qt.exception(n,"Failed to clone response body")}}function xX(t){return new Promise((n,a)=>{const e=Yc(()=>a(new Error("Timeout while trying to read response body")),500);RX(t).then(s=>n(s),s=>a(s)).finally(()=>clearTimeout(e))})}async function RX(t){return await t.text()}async function wX(t,n,a){try{const e=LX(t,n,a),s=QR("resource.xhr",e);XR(a.replay,s)}catch(e){Yt&&Qt.exception(e,"Failed to capture xhr breadcrumb")}}function MX(t,n){const{xhr:a,input:e}=n;if(!a)return;const s=xh(e),r=a.getResponseHeader("content-length")?qR(a.getResponseHeader("content-length")):BX(a.response,a.responseType);s!==void 0&&(t.data.request_body_size=s),r!==void 0&&(t.data.response_body_size=r)}function LX(t,n,a){const e=Date.now(),{startTimestamp:s=e,endTimestamp:r=e,input:o,xhr:i}=n,{url:l,method:c,status_code:d=0,request_body_size:u,response_body_size:m}=t.data;if(!l)return null;if(!i||!Am(l,a.networkDetailAllowUrls)||Am(l,a.networkDetailDenyUrls)){const x=Vu(u),R=Vu(m);return{startTimestamp:s,endTimestamp:r,url:l,method:c,statusCode:d,request:x,response:R}}const h=i[P2],_=h?Ov(h.request_headers,a.networkRequestHeaders):{},E=Ov(DX(i),a.networkResponseHeaders),[y,b]=a.networkCaptureBodies?ZR(o):[void 0],[A,T]=a.networkCaptureBodies?PX(i):[void 0],I=wi(_,u,y),N=wi(E,m,A);return{startTimestamp:s,endTimestamp:r,url:l,method:c,statusCode:d,request:b?Tm(I,b):I,response:T?Tm(N,T):N}}function DX(t){const n=t.getAllResponseHeaders();return n?n.split(`\r
`).reduce((a,e)=>{const[s,r]=e.split(": ");return r&&(a[s.toLowerCase()]=r),a},{}):{}}function PX(t){const n=[];try{return[t.responseText]}catch(a){n.push(a)}try{return kX(t.response,t.responseType)}catch(a){n.push(a)}return Yt&&Qt.warn("Failed to get xhr response body",...n),[void 0]}function kX(t,n){try{if(typeof t=="string")return[t];if(t instanceof Document)return[t.body.outerHTML];if(n==="json"&&t&&typeof t=="object")return[JSON.stringify(t)];if(!t)return[void 0]}catch(a){return Yt&&Qt.exception(a,"Failed to serialize body",t),[void 0,"BODY_PARSE_ERROR"]}return Yt&&Qt.info("Skipping network body because of body type",t),[void 0,"UNPARSEABLE_BODY_TYPE"]}function BX(t,n){try{const a=n==="json"&&t&&typeof t=="object"?JSON.stringify(t):t;return xh(a)}catch{return}}function FX(t){const n=ia();try{const{networkDetailAllowUrls:a,networkDetailDenyUrls:e,networkCaptureBodies:s,networkRequestHeaders:r,networkResponseHeaders:o}=t.getOptions(),i={replay:t,networkDetailAllowUrls:a,networkDetailDenyUrls:e,networkCaptureBodies:s,networkRequestHeaders:r,networkResponseHeaders:o};n&&n.on("beforeAddBreadcrumb",(l,c)=>UX(i,l,c))}catch{}}function UX(t,n,a){if(n.data)try{$X(n)&&VX(a)&&(MX(n,a),wX(n,a,t)),GX(n)&&HX(a)&&(SX(n,a),EX(n,a,t))}catch(e){Yt&&Qt.exception(e,"Error when enriching network breadcrumb")}}function $X(t){return t.category==="xhr"}function GX(t){return t.category==="fetch"}function VX(t){return t&&t.xhr}function HX(t){return t&&t.response}function jX(t){const n=ia();u8(EK(t)),p8(hX(t)),rX(t),FX(t);const a=fX(t);O2(a),n&&(n.on("beforeSendEvent",sX(t)),n.on("afterSendEvent",tX(t)),n.on("createDsc",e=>{const s=t.getSessionId();s&&t.isEnabled()&&t.recordingMode==="session"&&t.checkAndHandleExpiredSession()&&(e.replay_id=s)}),n.on("spanStart",e=>{t.lastActiveSpan=e}),n.on("spanEnd",e=>{t.lastActiveSpan=e}),n.on("beforeSendFeedback",(e,s)=>{const r=t.getSessionId();s&&s.includeReplay&&t.isEnabled()&&r&&e.contexts&&e.contexts.feedback&&(e.contexts.feedback.replay_id=r)}))}async function WX(t){try{return Promise.all(Nh(t,[zX(ra.performance.memory)]))}catch{return[]}}function zX(t){const{jsHeapSizeLimit:n,totalJSHeapSize:a,usedJSHeapSize:e}=t,s=Date.now()/1e3;return{type:"memory",name:"memory",start:s,end:s,data:{memory:{jsHeapSizeLimit:n,totalJSHeapSize:a,usedJSHeapSize:e}}}}function YX(t,n,a){let e,s,r;const o=a&&a.maxWait?Math.max(a.maxWait,n):0;function i(){return l(),e=t(),e}function l(){s!==void 0&&clearTimeout(s),r!==void 0&&clearTimeout(r),s=r=void 0}function c(){return s!==void 0||r!==void 0?i():e}function d(){return s&&clearTimeout(s),s=Yc(i,n),o&&r===void 0&&(r=Yc(i,o)),e}return d.cancel=l,d.flush=c,d}function KX(t){let n=!1;return(a,e)=>{if(!t.checkAndHandleExpiredSession()){Yt&&Qt.warn("Received replay event after session expired.");return}const s=e||!n;n=!0,t.clickDetector&&hK(t.clickDetector,a),t.addUpdate(()=>{if(t.recordingMode==="buffer"&&s&&t.setInitialState(),!fS(t,a,s))return!0;if(!s)return!1;const r=t.session;if(qX(t,s),r&&r.previousSessionId)return!0;if(t.recordingMode==="buffer"&&r&&t.eventBuffer){const o=t.eventBuffer.getEarliestTimestamp();o&&(Yt&&Qt.info(`Updating session start time to earliest event in buffer to ${new Date(o)}`),r.started=o,t.getOptions().stickySession&&pS(r))}return t.recordingMode==="session"&&t.flush(),!0})}}function XX(t){const n=t.getOptions();return{type:mn.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:t.isRecordingCanvas(),sessionSampleRate:n.sessionSampleRate,errorSampleRate:n.errorSampleRate,useCompressionOption:n.useCompression,blockAllMedia:n.blockAllMedia,maskAllText:n.maskAllText,maskAllInputs:n.maskAllInputs,useCompression:t.eventBuffer?t.eventBuffer.type==="worker":!1,networkDetailHasUrls:n.networkDetailAllowUrls.length>0,networkCaptureBodies:n.networkCaptureBodies,networkRequestHasHeaders:n.networkRequestHeaders.length>0,networkResponseHasHeaders:n.networkResponseHeaders.length>0}}}}function qX(t,n){!n||!t.session||t.session.segmentId!==0||fS(t,XX(t),!1)}function ZX(t,n,a,e){return TE(E8(t,S8(t),e,a),[[{type:"replay_event"},t],[{type:"replay_recording",length:typeof n=="string"?new TextEncoder().encode(n).length:n.length},n]])}function QX({recordingData:t,headers:n}){let a;const e=`${JSON.stringify(n)}
`;if(typeof t=="string")a=`${e}${t}`;else{const r=new TextEncoder().encode(e);a=new Uint8Array(r.length+t.length),a.set(r),a.set(t,r.length)}return a}async function JX({client:t,scope:n,replayId:a,event:e}){const s=typeof t._integrations=="object"&&t._integrations!==null&&!Array.isArray(t._integrations)?Object.keys(t._integrations):void 0,r={event_id:a,integrations:s};t.emit("preprocessEvent",e,r);const o=await xk(t.getOptions(),e,r,n,t,rh());if(!o)return null;o.platform=o.platform||"javascript";const i=t.getSdkMetadata(),{name:l,version:c}=i&&i.sdk||{};return o.sdk={...o.sdk,name:l||"sentry.javascript.unknown",version:c||"0.0.0"},o}async function eq({recordingData:t,replayId:n,segmentId:a,eventContext:e,timestamp:s,session:r}){const o=QX({recordingData:t,headers:{segment_id:a}}),{urls:i,errorIds:l,traceIds:c,initialTimestamp:d}=e,u=ia(),m=Yo(),h=u&&u.getTransport(),_=u&&u.getDsn();if(!u||!h||!_||!r.sampled)return eT({});const E={type:kz,replay_start_timestamp:d/1e3,timestamp:s/1e3,error_ids:l,trace_ids:c,urls:i,replay_id:n,segment_id:a,replay_type:r.sampled},y=await JX({scope:m,client:u,replayId:n,event:E});if(!y)return u.recordDroppedEvent("event_processor","replay",E),Yt&&Qt.info("An event processor returned `null`, will not send event."),eT({});delete y.sdkProcessingMetadata;const b=ZX(y,o,_,u.getOptions().tunnel);let A;try{A=await h.send(b)}catch(I){const N=new Error(nS);try{N.cause=I}catch{}throw N}if(typeof A.statusCode=="number"&&(A.statusCode<200||A.statusCode>=300))throw new nw(A.statusCode);const T=b8({},A);if(v8(T,"replay"))throw new hS(T);return A}class nw extends Error{constructor(n){super(`Transport returned status code ${n}`)}}class hS extends Error{constructor(n){super("Rate limit hit"),this.rateLimits=n}}async function aw(t,n={count:0,interval:Vz}){const{recordingData:a,onError:e}=t;if(a.length)try{return await eq(t),!0}catch(s){if(s instanceof nw||s instanceof hS)throw s;if(bE("Replays",{_retryCount:n.count}),e&&e(s),n.count>=Hz){const r=new Error(`${nS} - max retries exceeded`);try{r.cause=s}catch{}throw r}return n.interval*=++n.count,new Promise((r,o)=>{Yc(async()=>{try{await aw(t,n),r(!0)}catch(i){o(i)}},n.interval)})}}const sw="__THROTTLED",tq="__SKIPPED";function nq(t,n,a){const e=new Map,s=i=>{const l=i-a;e.forEach((c,d)=>{d<l&&e.delete(d)})},r=()=>[...e.values()].reduce((i,l)=>i+l,0);let o=!1;return(...i)=>{const l=Math.floor(Date.now()/1e3);if(s(l),r()>=n){const d=o;return o=!0,d?tq:sw}o=!1;const c=e.get(l)||0;return e.set(l,c+1),t(...i)}}class Ti{constructor({options:n,recordingOptions:a}){Ti.prototype.__init.call(this),Ti.prototype.__init2.call(this),Ti.prototype.__init3.call(this),Ti.prototype.__init4.call(this),Ti.prototype.__init5.call(this),Ti.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:Bz,sessionIdleExpire:Fz},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=a,this._options=n,this._debouncedFlush=YX(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=nq((o,i)=>QK(this,o,i),300,5);const{slowClickTimeout:e,slowClickIgnoreSelectors:s}=this.getOptions(),r=e?{threshold:Math.min(jz,e),timeout:e,scrollTimeout:Wz,ignoreSelector:s?s.join(","):""}:void 0;if(r&&(this.clickDetector=new uK(this,r)),Yt){const o=n._experiments;Qt.setConfig({captureExceptions:!!o.captureExceptions,traceInternals:!!o.traceInternals})}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(n){Yt&&Qt.exception(n),this._options.onError&&this._options.onError(n)}initializeSampling(n){const{errorSampleRate:a,sessionSampleRate:e}=this._options,s=a<=0&&e<=0;if(this._requiresManualStart=s,!s){if(this._initializeSessionForSampling(n),!this.session){Yt&&Qt.exception(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",Yt&&Qt.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session"){Yt&&Qt.info("Recording is already in progress");return}if(this._isEnabled&&this.recordingMode==="buffer"){Yt&&Qt.info("Buffering is in progress, call `flush()` to save the replay");return}Yt&&Qt.infoTick("Starting replay in session mode"),this._updateUserActivity();const n=xg({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=n,this._initializeRecording()}startBuffering(){if(this._isEnabled){Yt&&Qt.info("Buffering is in progress, call `flush()` to save the replay");return}Yt&&Qt.infoTick("Starting replay in buffer mode");const n=xg({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=n,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const n=this._canvas;this._stopRecording=jr({...this._recordingOptions,...this.recordingMode==="buffer"?{checkoutEveryNms:Gz}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:KX(this),onMutation:this._onMutationHandler,...n?{recordCanvas:n.recordCanvas,getCanvasManager:n.getCanvasManager,sampling:n.sampling,dataURLOptions:n.dataURLOptions}:{}})}catch(n){this.handleException(n)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(n){return this.handleException(n),!1}}async stop({forceFlush:n=!1,reason:a}={}){if(this._isEnabled){this._isEnabled=!1;try{Yt&&Qt.info(`Stopping Replay${a?` triggered by ${a}`:""}`),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),n&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,YK(this)}catch(e){this.handleException(e)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),Yt&&Qt.info("Pausing replay"))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),Yt&&Qt.info("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:n=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const a=Date.now();Yt&&Qt.info("Converting buffer to session"),await this.flushImmediate();const e=this.stopRecording();!n||!e||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this._updateUserActivity(a),this._updateSessionActivity(a),this._maybeSaveSession()),this.startRecording())}addUpdate(n){const a=n();this.recordingMode!=="buffer"&&a!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(this._lastActivity&&Iv(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const n=`${ra.location.pathname}${ra.location.hash}${ra.location.search}`,a=`${ra.location.origin}${n}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=a,this._context.initialTimestamp=Date.now(),this._context.urls.push(a)}throttledAddEvent(n,a){const e=this._throttledAddEvent(n,a);if(e===sw){const s=cr({category:"replay.throttled"});this.addUpdate(()=>!fS(this,{type:sK,timestamp:s.timestamp||0,data:{tag:"breadcrumb",payload:s,metric:!0}}))}return e}getCurrentRoute(){const n=this.lastActiveSpan||ah(),a=n&&Iu(n),s=(a&&Gr(a).data||{})[C2];if(!(!a||!s||!["route","custom"].includes(s)))return Gr(a).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=jK({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(n){const a=this._options.errorSampleRate>0,e=xg({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:n},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:a});this.session=e}_checkSession(){if(!this.session)return!1;const n=this.session;return WR(n,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(n),!1):!0}async _refreshSession(n){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(n.id))}_addListeners(){try{ra.document.addEventListener("visibilitychange",this._handleVisibilityChange),ra.addEventListener("blur",this._handleWindowBlur),ra.addEventListener("focus",this._handleWindowFocus),ra.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(jX(this),this._hasInitializedCoreListeners=!0)}catch(n){this.handleException(n)}this._performanceCleanupCallback=FK(this)}_removeListeners(){try{ra.document.removeEventListener("visibilitychange",this._handleVisibilityChange),ra.removeEventListener("blur",this._handleWindowBlur),ra.removeEventListener("focus",this._handleWindowFocus),ra.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(n){this.handleException(n)}}__init(){this._handleVisibilityChange=()=>{ra.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const n=cr({category:"ui.blur"});this._doChangeToBackgroundTasks(n)}}__init3(){this._handleWindowFocus=()=>{const n=cr({category:"ui.focus"});this._doChangeToForegroundTasks(n)}}__init4(){this._handleKeyboardEvent=n=>{yK(this,n)}}_doChangeToBackgroundTasks(n){!this.session||jR(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(n&&this._createCustomBreadcrumb(n),this.conditionalFlush())}_doChangeToForegroundTasks(n){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){Yt&&Qt.info("Document has become active, but session has expired");return}n&&this._createCustomBreadcrumb(n)}_updateUserActivity(n=Date.now()){this._lastActivity=n}_updateSessionActivity(n=Date.now()){this.session&&(this.session.lastActivity=n,this._maybeSaveSession())}_createCustomBreadcrumb(n){this.addUpdate(()=>{this.throttledAddEvent({type:mn.Custom,timestamp:n.timestamp||0,data:{tag:"breadcrumb",payload:n}})})}_addPerformanceEntries(){const n=NK(this.performanceEntries).concat(this.replayPerformanceEntries);return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(Nh(this,n))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:n,eventBuffer:a}=this;if(!n||!a||this._requiresManualStart||n.segmentId)return;const e=a.getEarliestTimestamp();e&&e<this._context.initialTimestamp&&(this._context.initialTimestamp=e)}_popEventContext(){const n={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),n}async _runFlush(){const n=this.getSessionId();if(!this.session||!this.eventBuffer||!n){Yt&&Qt.error("No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!(!this.eventBuffer||!this.eventBuffer.hasEvents)&&(await WX(this),!!this.eventBuffer&&n===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const a=Date.now();if(a-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const e=this._popEventContext(),s=this.session.segmentId++;this._maybeSaveSession();const r=await this.eventBuffer.finish();await aw({replayId:n,recordingData:r,segmentId:s,eventContext:e,session:this.session,timestamp:a,onError:o=>this.handleException(o)})}catch(a){this.handleException(a),this.stop({reason:"sendReplay"});const e=ia();if(e){const s=a instanceof hS?"ratelimit_backoff":"send_error";e.recordDroppedEvent(s,"replay")}}}__init5(){this._flush=async({force:n=!1}={})=>{if(!this._isEnabled&&!n)return;if(!this.checkAndHandleExpiredSession()){Yt&&Qt.error("Attempting to finish replay event after session expired.");return}if(!this.session)return;const a=this.session.started,s=Date.now()-a;this._debouncedFlush.cancel();const r=s<this._options.minReplayDuration,o=s>this._options.maxReplayDuration+5e3;if(r||o){Yt&&Qt.info(`Session duration (${Math.floor(s/1e3)}s) is too ${r?"short":"long"}, not sending replay.`),r&&this._debouncedFlush();return}const i=this.eventBuffer;i&&this.session.segmentId===0&&!i.hasCheckout&&Yt&&Qt.info("Flushing initial segment without checkout.");const l=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(c){this.handleException(c)}finally{this._flushLock=void 0,l&&this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&pS(this.session)}__init6(){this._onMutationHandler=n=>{const a=n.length,e=this._options.mutationLimit,s=this._options.mutationBreadcrumbLimit,r=e&&a>e;if(a>s||r){const o=cr({category:"replay.mutations",data:{count:a,limit:r}});this._createCustomBreadcrumb(o)}return r?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}}function Bd(t,n){return[...t,...n].join(",")}function aq({mask:t,unmask:n,block:a,unblock:e,ignore:s}){const r=['base[href="/"]'],o=Bd(t,[".sentry-mask","[data-sentry-mask]"]),i=Bd(n,[]);return{maskTextSelector:o,unmaskTextSelector:i,blockSelector:Bd(a,[".sentry-block","[data-sentry-block]",...r]),unblockSelector:Bd(e,[]),ignoreSelector:Bd(s,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}function sq({el:t,key:n,maskAttributes:a,maskAllText:e,privacyOptions:s,value:r}){return!e||s.unmaskTextSelector&&t.matches(s.unmaskTextSelector)?r:a.includes(n)||n==="value"&&t.tagName==="INPUT"&&["submit","button"].includes(t.getAttribute("type")||"")?r.replace(/[\S]/g,"*"):r}const Q0='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',oq=["content-length","content-type","accept"];let J0=!1;const rq=t=>new Rh(t);class Rh{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:n=Uz,flushMaxDelay:a=$z,minReplayDuration:e=zz,maxReplayDuration:s=D0,stickySession:r=!0,useCompression:o=!0,workerUrl:i,_experiments:l={},maskAllText:c=!0,maskAllInputs:d=!0,blockAllMedia:u=!0,mutationBreadcrumbLimit:m=750,mutationLimit:h=1e4,slowClickTimeout:_=7e3,slowClickIgnoreSelectors:E=[],networkDetailAllowUrls:y=[],networkDetailDenyUrls:b=[],networkCaptureBodies:A=!0,networkRequestHeaders:T=[],networkResponseHeaders:I=[],mask:N=[],maskAttributes:x=["title","placeholder"],unmask:R=[],block:M=[],unblock:w=[],ignore:D=[],maskFn:B,beforeAddRecordingEvent:k,beforeErrorSampling:V}={}){this.name=Rh.id;const F=aq({mask:N,unmask:R,block:M,unblock:w,ignore:D});if(this._recordingOptions={maskAllInputs:d,maskAllText:c,maskInputOptions:{password:!0},maskTextFn:B,maskInputFn:B,maskAttributeFn:($,Y,j)=>sq({maskAttributes:x,maskAllText:c,privacyOptions:F,key:$,value:Y,el:j}),...F,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:$=>{try{$.__rrweb__=!0}catch{}}},this._initialOptions={flushMinDelay:n,flushMaxDelay:a,minReplayDuration:Math.min(e,Yz),maxReplayDuration:Math.min(s,D0),stickySession:r,useCompression:o,workerUrl:i,blockAllMedia:u,maskAllInputs:d,maskAllText:c,mutationBreadcrumbLimit:m,mutationLimit:h,slowClickTimeout:_,slowClickIgnoreSelectors:E,networkDetailAllowUrls:y,networkDetailDenyUrls:b,networkCaptureBodies:A,networkRequestHeaders:eI(T),networkResponseHeaders:eI(I),beforeAddRecordingEvent:k,beforeErrorSampling:V,_experiments:l},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Q0}`:Q0),this._isInitialized&&_v())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return J0}set _isInitialized(n){J0=n}afterAllSetup(n){!_v()||this._replay||(this._setup(n),this._initialize(n))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(n){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(n):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(){if(!(!this._replay||!this._replay.isEnabled()))return this._replay.getSessionId()}_initialize(n){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(n),this._replay.initializeSampling())}_setup(n){const a=iq(this._initialOptions,n);this._replay=new Ti({options:a,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(n){try{const a=n.getIntegrationByName("ReplayCanvas");if(!a)return;this._replay._canvas=a.getOptions()}catch{}}}Rh.__initStatic();function iq(t,n){const a=n.getOptions(),e={sessionSampleRate:0,errorSampleRate:0,...sh(t)},s=lT(a.replaysSessionSampleRate),r=lT(a.replaysOnErrorSampleRate);return s==null&&r==null&&g2(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),s!=null&&(e.sessionSampleRate=s),r!=null&&(e.errorSampleRate=r),e}function eI(t){return[...oq,...t.map(n=>n.toLowerCase())]}function lq(){const t=ia();return t&&t.getIntegrationByName("Replay")}var tI;(function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"})(tI||(tI={}));function cq(t,n){for(let a=t.classList.length;a--;){const e=t.classList[a];if(n.test(e))return!0}return!1}function Nv(t,n,a=1/0,e=0){return!t||t.nodeType!==t.ELEMENT_NODE||e>a?-1:n(t)?e:Nv(t.parentNode,n,a,e+1)}function nI(t,n){return a=>{const e=a;if(e===null)return!1;try{if(t){if(typeof t=="string"){if(e.matches(`.${t}`))return!0}else if(cq(e,t))return!0}return!!(n&&e.matches(n))}catch{return!1}}}const vc=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let aI={map:{},getId(){return console.error(vc),-1},getNode(){return console.error(vc),null},removeNodeFromMap(){console.error(vc)},has(){return console.error(vc),!1},reset(){console.error(vc)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(aI=new Proxy(aI,{get(t,n,a){return n==="map"&&console.error(vc),Reflect.get(t,n,a)}}));function _S(t,n,a,e,s=window){const r=s.Object.getOwnPropertyDescriptor(t,n);return s.Object.defineProperty(t,n,e?a:{set(o){rw(()=>{a.set.call(this,o)},0),r&&r.set&&r.set.call(this,o)}}),()=>_S(t,n,r||{},!0)}function gS(t,n,a){try{if(!(n in t))return()=>{};const e=t[n],s=a(e);return typeof s=="function"&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:e}})),t[n]=s,()=>{t[n]=e}}catch{return()=>{}}}/[1-9][0-9]{12}/.test(Date.now().toString());function dq(t){return t?t.nodeType===t.ELEMENT_NODE?t:t.parentElement:null}function wh(t,n,a,e,s){if(!t)return!1;const r=dq(t);if(!r)return!1;const o=nI(n,a),i=Nv(r,o);let l=-1;return i<0?!1:(e&&(l=Nv(r,nI(null,e))),i>-1&&l<0?!0:i<l)}const sI={};function ow(t){const n=sI[t];if(n)return n;const a=window.document;let e=window[t];if(a&&typeof a.createElement=="function")try{const s=a.createElement("iframe");s.hidden=!0,a.head.appendChild(s);const r=s.contentWindow;r&&r[t]&&(e=r[t]),a.head.removeChild(s)}catch{}return sI[t]=e.bind(window)}function ll(...t){return ow("requestAnimationFrame")(...t)}function rw(...t){return ow("setTimeout")(...t)}var rd=(t=>(t[t["2D"]=0]="2D",t[t.WebGL=1]="WebGL",t[t.WebGL2=2]="WebGL2",t))(rd||{});let Sf;function uq(t){Sf=t}const Rg=t=>Sf?(...a)=>{try{return t(...a)}catch(e){if(Sf&&Sf(e)===!0)return()=>{};throw e}}:t;var Mc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pq=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Pp=0;Pp<Mc.length;Pp++)pq[Mc.charCodeAt(Pp)]=Pp;var fq=function(t){var n=new Uint8Array(t),a,e=n.length,s="";for(a=0;a<e;a+=3)s+=Mc[n[a]>>2],s+=Mc[(n[a]&3)<<4|n[a+1]>>4],s+=Mc[(n[a+1]&15)<<2|n[a+2]>>6],s+=Mc[n[a+2]&63];return e%3===2?s=s.substring(0,s.length-1)+"=":e%3===1&&(s=s.substring(0,s.length-2)+"=="),s};const oI=new Map;function mq(t,n){let a=oI.get(t);return a||(a=new Map,oI.set(t,a)),a.has(n)||a.set(n,[]),a.get(n)}const iw=(t,n,a)=>{if(!t||!(cw(t,n)||typeof t=="object"))return;const e=t.constructor.name,s=mq(a,e);let r=s.indexOf(t);return r===-1&&(r=s.length,s.push(t)),r};function Tf(t,n,a){if(t instanceof Array)return t.map(e=>Tf(e,n,a));if(t===null)return t;if(t instanceof Float32Array||t instanceof Float64Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Int16Array||t instanceof Int8Array||t instanceof Uint8ClampedArray)return{rr_type:t.constructor.name,args:[Object.values(t)]};if(t instanceof ArrayBuffer){const e=t.constructor.name,s=fq(t);return{rr_type:e,base64:s}}else{if(t instanceof DataView)return{rr_type:t.constructor.name,args:[Tf(t.buffer,n,a),t.byteOffset,t.byteLength]};if(t instanceof HTMLImageElement){const e=t.constructor.name,{src:s}=t;return{rr_type:e,src:s}}else if(t instanceof HTMLCanvasElement){const e="HTMLImageElement",s=t.toDataURL();return{rr_type:e,src:s}}else{if(t instanceof ImageData)return{rr_type:t.constructor.name,args:[Tf(t.data,n,a),t.width,t.height]};if(cw(t,n)||typeof t=="object"){const e=t.constructor.name,s=iw(t,n,a);return{rr_type:e,index:s}}}}return t}const lw=(t,n,a)=>t.map(e=>Tf(e,n,a)),cw=(t,n)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(s=>typeof n[s]=="function").find(s=>t instanceof n[s]);function hq(t,n,a,e,s){const r=[],o=Object.getOwnPropertyNames(n.CanvasRenderingContext2D.prototype);for(const i of o)try{if(typeof n.CanvasRenderingContext2D.prototype[i]!="function")continue;const l=gS(n.CanvasRenderingContext2D.prototype,i,function(c){return function(...d){return wh(this.canvas,a,e,s,!0)||rw(()=>{const u=lw(d,n,this);t(this.canvas,{type:rd["2D"],property:i,args:u})},0),c.apply(this,d)}});r.push(l)}catch{const c=_S(n.CanvasRenderingContext2D.prototype,i,{set(d){t(this.canvas,{type:rd["2D"],property:i,args:[d],setter:!0})}});r.push(c)}return()=>{r.forEach(i=>i())}}function _q(t){return t==="experimental-webgl"?"webgl":t}function rI(t,n,a,e,s){const r=[];try{const o=gS(t.HTMLCanvasElement.prototype,"getContext",function(i){return function(l,...c){if(!wh(this,n,a,e,!0)){const d=_q(l);if("__context"in this||(this.__context=d),s&&["webgl","webgl2"].includes(d))if(c[0]&&typeof c[0]=="object"){const u=c[0];u.preserveDrawingBuffer||(u.preserveDrawingBuffer=!0)}else c.splice(0,1,{preserveDrawingBuffer:!0})}return i.apply(this,[l,...c])}});r.push(o)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{r.forEach(o=>o())}}function iI(t,n,a,e,s,r,o,i){const l=[],c=Object.getOwnPropertyNames(t);for(const d of c)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(d))try{if(typeof t[d]!="function")continue;const u=gS(t,d,function(m){return function(...h){const _=m.apply(this,h);if(iw(_,i,this),"tagName"in this.canvas&&!wh(this.canvas,e,s,r,!0)){const E=lw(h,i,this),y={type:n,property:d,args:E};a(this.canvas,y)}return _}});l.push(u)}catch{const m=_S(t,d,{set(h){a(this.canvas,{type:n,property:d,args:[h],setter:!0})}});l.push(m)}return l}function gq(t,n,a,e,s,r){const o=[];return o.push(...iI(n.WebGLRenderingContext.prototype,rd.WebGL,t,a,e,s,r,n)),typeof n.WebGL2RenderingContext<"u"&&o.push(...iI(n.WebGL2RenderingContext.prototype,rd.WebGL2,t,a,e,s,r,n)),()=>{o.forEach(i=>i())}}var bq='for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};';function vq(){const t=new Blob([bq]);return URL.createObjectURL(t)}class Eq{reset(){this.pendingCanvasMutations.clear(),this.restoreHandlers.forEach(n=>{try{n()}catch{}}),this.restoreHandlers=[],this.windowsSet=new WeakSet,this.windows=[],this.shadowDoms=new Set,xl([this,"access",n=>n.worker,"optionalAccess",n=>n.terminate,"call",n=>n()]),this.worker=null,this.snapshotInProgressMap=new Map,(this.options.recordCanvas&&typeof this.options.sampling=="number"||this.options.enableManualSnapshot)&&(this.worker=this.initFPSWorker())}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(n){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.shadowDoms=new Set,this.windowsSet=new WeakSet,this.windows=[],this.restoreHandlers=[],this.frozen=!1,this.locked=!1,this.snapshotInProgressMap=new Map,this.worker=null,this.processMutation=(u,m)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(u)||this.pendingCanvasMutations.set(u,[]),this.pendingCanvasMutations.get(u).push(m)};const{sampling:a="all",win:e,blockClass:s,blockSelector:r,unblockSelector:o,maxCanvasSize:i,recordCanvas:l,dataURLOptions:c,errorHandler:d}=n;this.mutationCb=n.mutationCb,this.mirror=n.mirror,this.options=n,d&&uq(d),(l&&typeof a=="number"||n.enableManualSnapshot)&&(this.worker=this.initFPSWorker()),this.addWindow(e),!n.enableManualSnapshot&&Rg(()=>{l&&a==="all"&&(this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher()),l&&typeof a=="number"&&this.initCanvasFPSObserver(a,s,r,o,i,{dataURLOptions:c})})()}addWindow(n){const{sampling:a="all",blockClass:e,blockSelector:s,unblockSelector:r,recordCanvas:o,enableManualSnapshot:i}=this.options;if(!this.windowsSet.has(n)){if(i){this.windowsSet.add(n),this.windows.push(new WeakRef(n));return}Rg(()=>{if(o&&a==="all"&&this.initCanvasMutationObserver(n,e,s,r),o&&typeof a=="number"){const l=rI(n,e,s,r,!0);this.restoreHandlers.push(()=>{l()})}})(),this.windowsSet.add(n),this.windows.push(new WeakRef(n))}}addShadowRoot(n){this.shadowDoms.add(new WeakRef(n))}resetShadowRoots(){this.shadowDoms=new Set}initFPSWorker(){const n=new Worker(vq());return n.onmessage=a=>{const e=a.data,{id:s}=e;if(this.snapshotInProgressMap.set(s,!1),!("base64"in e))return;const{base64:r,type:o,width:i,height:l}=e;this.mutationCb({id:s,type:rd["2D"],commands:[{property:"clearRect",args:[0,0,i,l]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:r}],type:o}]},0,0,i,l]}]})},n}initCanvasFPSObserver(n,a,e,s,r,o){const i=this.takeSnapshot(!1,n,a,e,s,r,o.dataURLOptions);this.restoreHandlers.push(()=>{cancelAnimationFrame(i)})}initCanvasMutationObserver(n,a,e,s){const r=rI(n,a,e,s,!1),o=hq(this.processMutation.bind(this),n,a,e,s),i=gq(this.processMutation.bind(this),n,a,e,s,this.mirror);this.restoreHandlers.push(()=>{r(),o(),i()})}snapshot(n){const{options:a}=this,e=this.takeSnapshot(!0,a.sampling==="all"?2:a.sampling||2,a.blockClass,a.blockSelector,a.unblockSelector,a.maxCanvasSize,a.dataURLOptions,n);this.restoreHandlers.push(()=>{cancelAnimationFrame(e)})}takeSnapshot(n,a,e,s,r,o,i,l){const c=1e3/a;let d=0,u;const m=_=>{if(_)return[_];const E=[],y=b=>{b.querySelectorAll("canvas").forEach(A=>{wh(A,e,s,r)||E.push(A)})};for(const b of this.windows){const A=b.deref();A&&y(A.document)}for(const b of this.shadowDoms){const A=b.deref();A&&y(A)}return E},h=_=>{if(this.windows.length){if(d&&_-d<c){u=ll(h);return}d=_,m(l).forEach(E=>{if(!this.mirror.hasNode(E))return;const y=this.mirror.getId(E);if(!this.snapshotInProgressMap.get(y)&&!(!E.width||!E.height)){if(this.snapshotInProgressMap.set(y,!0),!n&&["webgl","webgl2"].includes(E.__context)){const b=E.getContext(E.__context);xl([b,"optionalAccess",A=>A.getContextAttributes,"call",A=>A(),"optionalAccess",A=>A.preserveDrawingBuffer])===!1&&b.clear(b.COLOR_BUFFER_BIT)}createImageBitmap(E).then(b=>{xl([this,"access",A=>A.worker,"optionalAccess",A=>A.postMessage,"call",A=>A({id:y,bitmap:b,width:E.width,height:E.height,dataURLOptions:i,maxCanvasSize:o},[b])])}).catch(b=>{Rg(()=>{throw b})()})}}),n||(u=ll(h))}};return u=ll(h),u}startPendingCanvasMutationFlusher(){ll(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const n=a=>{this.rafStamps.latestId=a,ll(n)};ll(n)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((n,a)=>{const e=this.mirror.getId(a);this.flushPendingCanvasMutationFor(a,e)}),ll(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(n,a){if(this.frozen||this.locked)return;const e=this.pendingCanvasMutations.get(n);if(!e||a===-1)return;const s=e.map(o=>{const{type:i,...l}=o;return l}),{type:r}=e[0];this.mutationCb({id:a,type:r,commands:s}),this.pendingCanvasMutations.delete(n)}}const lI={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},Sq="ReplayCanvas",kp=1280,Tq=(t={})=>{const[n,a]=t.maxCanvasSize||[],e={quality:t.quality||"medium",enableManualSnapshot:t.enableManualSnapshot,maxCanvasSize:[n?Math.min(n,kp):kp,a?Math.min(a,kp):kp]};let s;const r=new Promise(o=>s=o);return{name:Sq,getOptions(){const{quality:o,enableManualSnapshot:i,maxCanvasSize:l}=e;return{enableManualSnapshot:i,recordCanvas:!0,getCanvasManager:c=>{const d=new Eq({...c,enableManualSnapshot:i,maxCanvasSize:l,errorHandler:u=>{try{typeof u=="object"&&(u.__rrweb__=!0)}catch{}}});return s(d),d},...lI[o]||lI.medium}},async snapshot(o){(await r).snapshot(o)}}},Aq=fo(Tq),dr=Ys,Hn=dr.document,Qd=dr.navigator,dw="Report a Bug",yq="Cancel",Iq="Send Bug Report",Cq="Confirm",Oq="Report a Bug",Nq="your.email@example.org",xq="Email",Rq="What's the bug? What did you expect?",wq="Description",Mq="Your Name",Lq="Name",Dq="Thank you for your report!",Pq="(required)",kq="Add a screenshot",Bq="Remove screenshot",Fq="widget",Uq="api",$q=5e3,uw=(t,n={includeReplay:!0})=>{if(!t.message)throw new Error("Unable to submit feedback with empty message");const a=ia();if(!a)throw new Error("No client setup, cannot send feedback.");t.tags&&Object.keys(t.tags).length&&Yo().setTags(t.tags);const e=dR({source:Uq,url:x2(),...t},n);return new Promise((s,r)=>{const o=setTimeout(()=>r("Unable to determine if Feedback was correctly sent."),5e3),i=a.on("afterSendEvent",(l,c)=>{if(l.event_id===e)return clearTimeout(o),i(),c&&typeof c.statusCode=="number"&&c.statusCode>=200&&c.statusCode<300&&s(e),c&&typeof c.statusCode=="number"&&c.statusCode===0?r("Unable to send Feedback. This is because of network issues, or because you are using an ad-blocker."):c&&typeof c.statusCode=="number"&&c.statusCode===403?r("Unable to send Feedback. This could be because this domain is not in your list of allowed domains."):r("Unable to send Feedback. This could be because of network issues, or because you are using an ad-blocker")})})},Af=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function Gq(){return!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(Qd.userAgent)||/Macintosh/i.test(Qd.userAgent)&&Qd.maxTouchPoints&&Qd.maxTouchPoints>1||!isSecureContext)}function Bp(t,n){return{...t,...n,tags:{...t.tags,...n.tags},onFormOpen:()=>{n.onFormOpen&&n.onFormOpen(),t.onFormOpen&&t.onFormOpen()},onFormClose:()=>{n.onFormClose&&n.onFormClose(),t.onFormClose&&t.onFormClose()},onSubmitSuccess:a=>{n.onSubmitSuccess&&n.onSubmitSuccess(a),t.onSubmitSuccess&&t.onSubmitSuccess(a)},onSubmitError:a=>{n.onSubmitError&&n.onSubmitError(a),t.onSubmitError&&t.onSubmitError(a)},onFormSubmitted:()=>{n.onFormSubmitted&&n.onFormSubmitted(),t.onFormSubmitted&&t.onFormSubmitted()},themeDark:{...t.themeDark,...n.themeDark},themeLight:{...t.themeLight,...n.themeLight}}}function Vq(t){const n=Hn.createElement("style");return n.textContent=`
.widget__actor {
  position: fixed;
  z-index: var(--z-index);
  margin: var(--page-margin);
  inset: var(--actor-inset);

  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px;

  font-family: inherit;
  font-size: var(--font-size);
  font-weight: 600;
  line-height: 1.14em;
  text-decoration: none;

  background: var(--actor-background, var(--background));
  border-radius: var(--actor-border-radius, 1.7em/50%);
  border: var(--actor-border, var(--border));
  box-shadow: var(--actor-box-shadow, var(--box-shadow));
  color: var(--actor-color, var(--foreground));
  fill: var(--actor-color, var(--foreground));
  cursor: pointer;
  opacity: 1;
  transition: transform 0.2s ease-in-out;
  transform: translate(0, 0) scale(1);
}
.widget__actor[aria-hidden="true"] {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
  transform: translate(0, 16px) scale(0.98);
}

.widget__actor:hover {
  background: var(--actor-hover-background, var(--background));
  filter: var(--interactive-filter);
}

.widget__actor svg {
  width: 1.14em;
  height: 1.14em;
}

@media (max-width: 600px) {
  .widget__actor span {
    display: none;
  }
}
`,t&&n.setAttribute("nonce",t),n}function no(t,n){return Object.entries(n).forEach(([a,e])=>{t.setAttributeNS(null,a,e)}),t}const rc=20,Hq="http://www.w3.org/2000/svg";function jq(){const t=i=>dr.document.createElementNS(Hq,i),n=no(t("svg"),{width:`${rc}`,height:`${rc}`,viewBox:`0 0 ${rc} ${rc}`,fill:"var(--actor-color, var(--foreground))"}),a=no(t("g"),{clipPath:"url(#clip0_57_80)"}),e=no(t("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});n.appendChild(a).appendChild(e);const s=t("defs"),r=no(t("clipPath"),{id:"clip0_57_80"}),o=no(t("rect"),{width:`${rc}`,height:`${rc}`,fill:"white"});return r.appendChild(o),s.appendChild(r),n.appendChild(s).appendChild(r).appendChild(o),n}function Wq({triggerLabel:t,triggerAriaLabel:n,shadow:a,styleNonce:e}){const s=Hn.createElement("button");if(s.type="button",s.className="widget__actor",s.ariaHidden="false",s.ariaLabel=n||t||dw,s.appendChild(jq()),t){const o=Hn.createElement("span");o.appendChild(Hn.createTextNode(t)),s.appendChild(o)}const r=Vq(e);return{el:s,appendToDom(){a.appendChild(r),a.appendChild(s)},removeFromDom(){a.removeChild(s),a.removeChild(r)},show(){s.ariaHidden="false"},hide(){s.ariaHidden="true"}}}const pw="rgba(88, 74, 192, 1)",zq={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:pw,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},cI={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:pw,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(235, 230, 239, 0.15)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function dI(t){return`
  --foreground: ${t.foreground};
  --background: ${t.background};
  --accent-foreground: ${t.accentForeground};
  --accent-background: ${t.accentBackground};
  --success-color: ${t.successColor};
  --error-color: ${t.errorColor};
  --border: ${t.border};
  --box-shadow: ${t.boxShadow};
  --outline: ${t.outline};
  --interactive-filter: ${t.interactiveFilter};
  `}function Yq({colorScheme:t,themeDark:n,themeLight:a,styleNonce:e}){const s=Hn.createElement("style");return s.textContent=`
:host {
  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;
  --font-size: 14px;
  --z-index: 100000;

  --page-margin: 16px;
  --inset: auto 0 0 auto;
  --actor-inset: var(--inset);

  font-family: var(--font-family);
  font-size: var(--font-size);

  ${t!=="system"?"color-scheme: only light;":""}

  ${dI(t==="dark"?{...cI,...n}:{...zq,...a})}
}

${t==="system"?`
@media (prefers-color-scheme: dark) {
  :host {
    ${dI({...cI,...n})}
  }
}`:""}
}
`,e&&s.setAttribute("nonce",e),s}const fw=({lazyLoadIntegration:t,getModalIntegration:n,getScreenshotIntegration:a})=>({id:s="sentry-feedback",autoInject:r=!0,showBranding:o=!0,isEmailRequired:i=!1,isNameRequired:l=!1,showEmail:c=!0,showName:d=!0,enableScreenshot:u=!0,useSentryUser:m={email:"email",name:"username"},tags:h,styleNonce:_,scriptNonce:E,colorScheme:y="system",themeLight:b={},themeDark:A={},addScreenshotButtonLabel:T=kq,cancelButtonLabel:I=yq,confirmButtonLabel:N=Cq,emailLabel:x=xq,emailPlaceholder:R=Nq,formTitle:M=Oq,isRequiredLabel:w=Pq,messageLabel:D=wq,messagePlaceholder:B=Rq,nameLabel:k=Lq,namePlaceholder:V=Mq,removeScreenshotButtonLabel:F=Bq,submitButtonLabel:$=Iq,successMessageText:Y=Dq,triggerLabel:j=dw,triggerAriaLabel:U="",onFormOpen:J,onFormClose:te,onSubmitSuccess:q,onSubmitError:K,onFormSubmitted:W}={})=>{const ee={id:s,autoInject:r,showBranding:o,isEmailRequired:i,isNameRequired:l,showEmail:c,showName:d,enableScreenshot:u,useSentryUser:m,tags:h,styleNonce:_,scriptNonce:E,colorScheme:y,themeDark:A,themeLight:b,triggerLabel:j,triggerAriaLabel:U,cancelButtonLabel:I,submitButtonLabel:$,confirmButtonLabel:N,formTitle:M,emailLabel:x,emailPlaceholder:R,messageLabel:D,messagePlaceholder:B,nameLabel:k,namePlaceholder:V,successMessageText:Y,isRequiredLabel:w,addScreenshotButtonLabel:T,removeScreenshotButtonLabel:F,onFormClose:te,onFormOpen:J,onSubmitError:K,onSubmitSuccess:q,onFormSubmitted:W};let ae=null,ve=[];const Ce=Ue=>{if(!ae){const Re=Hn.createElement("div");Re.id=String(Ue.id),Hn.body.appendChild(Re),ae=Re.attachShadow({mode:"open"}),ae.appendChild(Yq(Ue))}return ae},ue=async(Ue,Re,Le)=>{const Xe=ia(),et=Xe&&Xe.getIntegrationByName(Ue);if(et)return et;const Dt=(Re&&Re()||await t(Le,E))();return Xe&&Xe.addIntegration(Dt),Dt},ge=async Ue=>{const Re=Ue.enableScreenshot&&Gq(),[Le,Xe]=await Promise.all([ue("FeedbackModal",n,"feedbackModalIntegration"),Re?ue("FeedbackScreenshot",a,"feedbackScreenshotIntegration"):void 0]);if(!Le)throw Af&&vn.error("[Feedback] Missing feedback modal integration. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!");Re&&!Xe&&Af&&vn.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots.");const et=Le.createDialog({options:{...Ue,onFormClose:()=>{et&&et.close(),Ue.onFormClose&&Ue.onFormClose()},onFormSubmitted:()=>{et&&et.close(),Ue.onFormSubmitted&&Ue.onFormSubmitted()}},screenshotIntegration:Re?Xe:void 0,sendFeedback:uw,shadow:Ce(Ue)});return et},Me=(Ue,Re={})=>{const Le=Bp(ee,Re),Xe=typeof Ue=="string"?Hn.querySelector(Ue):typeof Ue.addEventListener=="function"?Ue:null;if(!Xe)throw Af&&vn.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let et=null;const yt=async()=>{et||(et=await ge({...Le,onFormSubmitted:()=>{et&&et.removeFromDom(),Le.onFormSubmitted&&Le.onFormSubmitted()}})),et.appendToDom(),et.open()};Xe.addEventListener("click",yt);const Dt=()=>{ve=ve.filter(X=>X!==Dt),et&&et.removeFromDom(),et=null,Xe.removeEventListener("click",yt)};return ve.push(Dt),Dt},We=(Ue={})=>{const Re=Bp(ee,Ue),Le=Ce(Re),Xe=Wq({triggerLabel:Re.triggerLabel,triggerAriaLabel:Re.triggerAriaLabel,shadow:Le,styleNonce:_});return Me(Xe.el,{...Re,onFormOpen(){Xe.hide()},onFormClose(){Xe.show()},onFormSubmitted(){Xe.show()}}),Xe};return{name:"Feedback",setupOnce(){!_v()||!ee.autoInject||(Hn.readyState==="loading"?Hn.addEventListener("DOMContentLoaded",()=>We().appendToDom()):We().appendToDom())},attachTo:Me,createWidget(Ue={}){const Re=We(Bp(ee,Ue));return Re.appendToDom(),Re},async createForm(Ue={}){return ge(Bp(ee,Ue))},remove(){ae&&(ae.parentElement&&ae.parentElement.remove(),ae=null),ve.forEach(Ue=>Ue()),ve=[]}}};function Kq(){const t=ia();return t&&t.getIntegrationByName("Feedback")}var Mh,ea,mw,El,uI,hw,xv,Hu={},bS=[],Xq=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,vS=Array.isArray;function Ci(t,n){for(var a in n)t[a]=n[a];return t}function _w(t){var n=t.parentNode;n&&n.removeChild(t)}function _n(t,n,a){var e,s,r,o={};for(r in n)r=="key"?e=n[r]:r=="ref"?s=n[r]:o[r]=n[r];if(arguments.length>2&&(o.children=arguments.length>3?Mh.call(arguments,2):a),typeof t=="function"&&t.defaultProps!=null)for(r in t.defaultProps)o[r]===void 0&&(o[r]=t.defaultProps[r]);return yf(t,o,e,s,null)}function yf(t,n,a,e,s){var r={type:t,props:n,key:a,ref:e,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:s??++mw,__i:-1,__u:0};return s==null&&ea.vnode!=null&&ea.vnode(r),r}function np(t){return t.children}function If(t,n){this.props=t,this.context=n}function id(t,n){if(n==null)return t.__?id(t.__,t.__i+1):null;for(var a;n<t.__k.length;n++)if((a=t.__k[n])!=null&&a.__e!=null)return a.__e;return typeof t.type=="function"?id(t):null}function qq(t,n,a){var e,s=t.__v,r=s.__e,o=t.__P;if(o)return(e=Ci({},s)).__v=s.__v+1,ea.vnode&&ea.vnode(e),ES(o,e,s,t.__n,o.ownerSVGElement!==void 0,32&s.__u?[r]:null,n,r??id(s),!!(32&s.__u),a),e.__.__k[e.__i]=e,e.__d=void 0,e.__e!=r&&gw(e),e}function gw(t){var n,a;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,n=0;n<t.__k.length;n++)if((a=t.__k[n])!=null&&a.__e!=null){t.__e=t.__c.base=a.__e;break}return gw(t)}}function pI(t){(!t.__d&&(t.__d=!0)&&El.push(t)&&!ym.__r++||uI!==ea.debounceRendering)&&((uI=ea.debounceRendering)||hw)(ym)}function ym(){var t,n,a,e=[],s=[];for(El.sort(xv);t=El.shift();)t.__d&&(a=El.length,n=qq(t,e,s)||n,a===0||El.length>a?(Rv(e,n,s),s.length=e.length=0,n=void 0,El.sort(xv)):n&&ea.__c&&ea.__c(n,bS));n&&Rv(e,n,s),ym.__r=0}function bw(t,n,a,e,s,r,o,i,l,c,d){var u,m,h,_,E,y=e&&e.__k||bS,b=n.length;for(a.__d=l,Zq(a,n,y),l=a.__d,u=0;u<b;u++)(h=a.__k[u])!=null&&typeof h!="boolean"&&typeof h!="function"&&(m=h.__i===-1?Hu:y[h.__i]||Hu,h.__i=u,ES(t,h,m,s,r,o,i,l,c,d),_=h.__e,h.ref&&m.ref!=h.ref&&(m.ref&&SS(m.ref,null,h),d.push(h.ref,h.__c||_,h)),E==null&&_!=null&&(E=_),65536&h.__u||m.__k===h.__k?l=vw(h,l,t):typeof h.type=="function"&&h.__d!==void 0?l=h.__d:_&&(l=_.nextSibling),h.__d=void 0,h.__u&=-196609);a.__d=l,a.__e=E}function Zq(t,n,a){var e,s,r,o,i,l=n.length,c=a.length,d=c,u=0;for(t.__k=[],e=0;e<l;e++)(s=t.__k[e]=(s=n[e])==null||typeof s=="boolean"||typeof s=="function"?null:typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?yf(null,s,null,null,s):vS(s)?yf(np,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?yf(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s)!=null?(s.__=t,s.__b=t.__b+1,i=Qq(s,a,o=e+u,d),s.__i=i,r=null,i!==-1&&(d--,(r=a[i])&&(r.__u|=131072)),r==null||r.__v===null?(i==-1&&u--,typeof s.type!="function"&&(s.__u|=65536)):i!==o&&(i===o+1?u++:i>o?d>l-o?u+=i-o:u--:u=i<o&&i==o-1?i-o:0,i!==e+u&&(s.__u|=65536))):(r=a[e])&&r.key==null&&r.__e&&(r.__e==t.__d&&(t.__d=id(r)),wv(r,r,!1),a[e]=null,d--);if(d)for(e=0;e<c;e++)(r=a[e])!=null&&!(131072&r.__u)&&(r.__e==t.__d&&(t.__d=id(r)),wv(r,r))}function vw(t,n,a){var e,s;if(typeof t.type=="function"){for(e=t.__k,s=0;e&&s<e.length;s++)e[s]&&(e[s].__=t,n=vw(e[s],n,a));return n}t.__e!=n&&(a.insertBefore(t.__e,n||null),n=t.__e);do n=n&&n.nextSibling;while(n!=null&&n.nodeType===8);return n}function Qq(t,n,a,e){var s=t.key,r=t.type,o=a-1,i=a+1,l=n[a];if(l===null||l&&s==l.key&&r===l.type)return a;if(e>(l!=null&&!(131072&l.__u)?1:0))for(;o>=0||i<n.length;){if(o>=0){if((l=n[o])&&!(131072&l.__u)&&s==l.key&&r===l.type)return o;o--}if(i<n.length){if((l=n[i])&&!(131072&l.__u)&&s==l.key&&r===l.type)return i;i++}}return-1}function fI(t,n,a){n[0]==="-"?t.setProperty(n,a??""):t[n]=a==null?"":typeof a!="number"||Xq.test(n)?a:a+"px"}function Fp(t,n,a,e,s){var r;e:if(n==="style")if(typeof a=="string")t.style.cssText=a;else{if(typeof e=="string"&&(t.style.cssText=e=""),e)for(n in e)a&&n in a||fI(t.style,n,"");if(a)for(n in a)e&&a[n]===e[n]||fI(t.style,n,a[n])}else if(n[0]==="o"&&n[1]==="n")r=n!==(n=n.replace(/(PointerCapture)$|Capture$/i,"$1")),n=n.toLowerCase()in t?n.toLowerCase().slice(2):n.slice(2),t.l||(t.l={}),t.l[n+r]=a,a?e?a.u=e.u:(a.u=Date.now(),t.addEventListener(n,r?hI:mI,r)):t.removeEventListener(n,r?hI:mI,r);else{if(s)n=n.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(n!=="width"&&n!=="height"&&n!=="href"&&n!=="list"&&n!=="form"&&n!=="tabIndex"&&n!=="download"&&n!=="rowSpan"&&n!=="colSpan"&&n!=="role"&&n in t)try{t[n]=a??"";break e}catch{}typeof a=="function"||(a==null||a===!1&&n[4]!=="-"?t.removeAttribute(n):t.setAttribute(n,a))}}function mI(t){if(this.l){var n=this.l[t.type+!1];if(t.t){if(t.t<=n.u)return}else t.t=Date.now();return n(ea.event?ea.event(t):t)}}function hI(t){if(this.l)return this.l[t.type+!0](ea.event?ea.event(t):t)}function ES(t,n,a,e,s,r,o,i,l,c){var d,u,m,h,_,E,y,b,A,T,I,N,x,R,M,w=n.type;if(n.constructor!==void 0)return null;128&a.__u&&(l=!!(32&a.__u),r=[i=n.__e=a.__e]),(d=ea.__b)&&d(n);e:if(typeof w=="function")try{if(b=n.props,A=(d=w.contextType)&&e[d.__c],T=d?A?A.props.value:d.__:e,a.__c?y=(u=n.__c=a.__c).__=u.__E:("prototype"in w&&w.prototype.render?n.__c=u=new w(b,T):(n.__c=u=new If(b,T),u.constructor=w,u.render=eZ),A&&A.sub(u),u.props=b,u.state||(u.state={}),u.context=T,u.__n=e,m=u.__d=!0,u.__h=[],u._sb=[]),u.__s==null&&(u.__s=u.state),w.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=Ci({},u.__s)),Ci(u.__s,w.getDerivedStateFromProps(b,u.__s))),h=u.props,_=u.state,u.__v=n,m)w.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(w.getDerivedStateFromProps==null&&b!==h&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(b,T),!u.__e&&(u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(b,u.__s,T)===!1||n.__v===a.__v)){for(n.__v!==a.__v&&(u.props=b,u.state=u.__s,u.__d=!1),n.__e=a.__e,n.__k=a.__k,n.__k.forEach(function(D){D&&(D.__=n)}),I=0;I<u._sb.length;I++)u.__h.push(u._sb[I]);u._sb=[],u.__h.length&&o.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(b,u.__s,T),u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(h,_,E)})}if(u.context=T,u.props=b,u.__P=t,u.__e=!1,N=ea.__r,x=0,"prototype"in w&&w.prototype.render){for(u.state=u.__s,u.__d=!1,N&&N(n),d=u.render(u.props,u.state,u.context),R=0;R<u._sb.length;R++)u.__h.push(u._sb[R]);u._sb=[]}else do u.__d=!1,N&&N(n),d=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++x<25);u.state=u.__s,u.getChildContext!=null&&(e=Ci(Ci({},e),u.getChildContext())),m||u.getSnapshotBeforeUpdate==null||(E=u.getSnapshotBeforeUpdate(h,_)),bw(t,vS(M=d!=null&&d.type===np&&d.key==null?d.props.children:d)?M:[M],n,a,e,s,r,o,i,l,c),u.base=n.__e,n.__u&=-161,u.__h.length&&o.push(u),y&&(u.__E=u.__=null)}catch(D){n.__v=null,l||r!=null?(n.__e=i,n.__u|=l?160:32,r[r.indexOf(i)]=null):(n.__e=a.__e,n.__k=a.__k),ea.__e(D,n,a)}else r==null&&n.__v===a.__v?(n.__k=a.__k,n.__e=a.__e):n.__e=Jq(a.__e,n,a,e,s,r,o,l,c);(d=ea.diffed)&&d(n)}function Rv(t,n,a){for(var e=0;e<a.length;e++)SS(a[e],a[++e],a[++e]);ea.__c&&ea.__c(n,t),t.some(function(s){try{t=s.__h,s.__h=[],t.some(function(r){r.call(s)})}catch(r){ea.__e(r,s.__v)}})}function Jq(t,n,a,e,s,r,o,i,l){var c,d,u,m,h,_,E,y=a.props,b=n.props,A=n.type;if(A==="svg"&&(s=!0),r!=null){for(c=0;c<r.length;c++)if((h=r[c])&&"setAttribute"in h==!!A&&(A?h.localName===A:h.nodeType===3)){t=h,r[c]=null;break}}if(t==null){if(A===null)return document.createTextNode(b);t=s?document.createElementNS("http://www.w3.org/2000/svg",A):document.createElement(A,b.is&&b),r=null,i=!1}if(A===null)y===b||i&&t.data===b||(t.data=b);else{if(r=r&&Mh.call(t.childNodes),y=a.props||Hu,!i&&r!=null)for(y={},c=0;c<t.attributes.length;c++)y[(h=t.attributes[c]).name]=h.value;for(c in y)h=y[c],c=="children"||(c=="dangerouslySetInnerHTML"?u=h:c==="key"||c in b||Fp(t,c,null,h,s));for(c in b)h=b[c],c=="children"?m=h:c=="dangerouslySetInnerHTML"?d=h:c=="value"?_=h:c=="checked"?E=h:c==="key"||i&&typeof h!="function"||y[c]===h||Fp(t,c,h,y[c],s);if(d)i||u&&(d.__html===u.__html||d.__html===t.innerHTML)||(t.innerHTML=d.__html),n.__k=[];else if(u&&(t.innerHTML=""),bw(t,vS(m)?m:[m],n,a,e,s&&A!=="foreignObject",r,o,r?r[0]:a.__k&&id(a,0),i,l),r!=null)for(c=r.length;c--;)r[c]!=null&&_w(r[c]);i||(c="value",_!==void 0&&(_!==t[c]||A==="progress"&&!_||A==="option"&&_!==y[c])&&Fp(t,c,_,y[c],!1),c="checked",E!==void 0&&E!==t[c]&&Fp(t,c,E,y[c],!1))}return t}function SS(t,n,a){try{typeof t=="function"?t(n):t.current=n}catch(e){ea.__e(e,a)}}function wv(t,n,a){var e,s;if(ea.unmount&&ea.unmount(t),(e=t.ref)&&(e.current&&e.current!==t.__e||SS(e,null,n)),(e=t.__c)!=null){if(e.componentWillUnmount)try{e.componentWillUnmount()}catch(r){ea.__e(r,n)}e.base=e.__P=null,t.__c=void 0}if(e=t.__k)for(s=0;s<e.length;s++)e[s]&&wv(e[s],n,a||typeof t.type!="function");a||t.__e==null||_w(t.__e),t.__=t.__e=t.__d=void 0}function eZ(t,n,a){return this.constructor(t,a)}function tZ(t,n,a){var e,s,r,o;ea.__&&ea.__(t,n),s=(e=!1)?null:n.__k,r=[],o=[],ES(n,t=n.__k=_n(np,null,[t]),s||Hu,Hu,n.ownerSVGElement!==void 0,s?null:n.firstChild?Mh.call(n.childNodes):null,r,s?s.__e:n.firstChild,e,o),t.__d=void 0,Rv(r,t,o)}Mh=bS.slice,ea={__e:function(t,n,a,e){for(var s,r,o;n=n.__;)if((s=n.__c)&&!s.__)try{if((r=s.constructor)&&r.getDerivedStateFromError!=null&&(s.setState(r.getDerivedStateFromError(t)),o=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(t,e||{}),o=s.__d),o)return s.__E=s}catch(i){t=i}throw t}},mw=0,If.prototype.setState=function(t,n){var a;a=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Ci({},this.state),typeof t=="function"&&(t=t(Ci({},a),this.props)),t&&Ci(a,t),t!=null&&this.__v&&(n&&this._sb.push(n),pI(this))},If.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),pI(this))},If.prototype.render=np,El=[],hw=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,xv=function(t,n){return t.__v.__b-n.__v.__b},ym.__r=0;var Zr,Qn,wg,_I,ld=0,Ew=[],Cf=[],va=ea,gI=va.__b,bI=va.__r,vI=va.diffed,EI=va.__c,SI=va.unmount,TI=va.__;function jl(t,n){va.__h&&va.__h(Qn,t,ld||n),ld=0;var a=Qn.__H||(Qn.__H={__:[],__h:[]});return t>=a.__.length&&a.__.push({__V:Cf}),a.__[t]}function Uc(t){return ld=1,Sw(Aw,t)}function Sw(t,n,a){var e=jl(Zr++,2);if(e.t=t,!e.__c&&(e.__=[a?a(n):Aw(void 0,n),function(i){var l=e.__N?e.__N[0]:e.__[0],c=e.t(l,i);l!==c&&(e.__N=[c,e.__[1]],e.__c.setState({}))}],e.__c=Qn,!Qn.u)){var s=function(i,l,c){if(!e.__c.__H)return!0;var d=e.__c.__H.__.filter(function(m){return!!m.__c});if(d.every(function(m){return!m.__N}))return!r||r.call(this,i,l,c);var u=!1;return d.forEach(function(m){if(m.__N){var h=m.__[0];m.__=m.__N,m.__N=void 0,h!==m.__[0]&&(u=!0)}}),!(!u&&e.__c.props===i)&&(!r||r.call(this,i,l,c))};Qn.u=!0;var r=Qn.shouldComponentUpdate,o=Qn.componentWillUpdate;Qn.componentWillUpdate=function(i,l,c){if(this.__e){var d=r;r=void 0,s(i,l,c),r=d}o&&o.call(this,i,l,c)},Qn.shouldComponentUpdate=s}return e.__N||e.__}function nZ(t,n){var a=jl(Zr++,3);!va.__s&&TS(a.__H,n)&&(a.__=t,a.i=n,Qn.__H.__h.push(a))}function Tw(t,n){var a=jl(Zr++,4);!va.__s&&TS(a.__H,n)&&(a.__=t,a.i=n,Qn.__h.push(a))}function aZ(t){return ld=5,ap(function(){return{current:t}},[])}function sZ(t,n,a){ld=6,Tw(function(){return typeof t=="function"?(t(n()),function(){return t(null)}):t?(t.current=n(),function(){return t.current=null}):void 0},a==null?a:a.concat(t))}function ap(t,n){var a=jl(Zr++,7);return TS(a.__H,n)?(a.__V=t(),a.i=n,a.__h=t,a.__V):a.__}function $c(t,n){return ld=8,ap(function(){return t},n)}function oZ(t){var n=Qn.context[t.__c],a=jl(Zr++,9);return a.c=t,n?(a.__==null&&(a.__=!0,n.sub(Qn)),n.props.value):t.__}function rZ(t,n){va.useDebugValue&&va.useDebugValue(n?n(t):t)}function iZ(t){var n=jl(Zr++,10),a=Uc();return n.__=t,Qn.componentDidCatch||(Qn.componentDidCatch=function(e,s){n.__&&n.__(e,s),a[1](e)}),[a[0],function(){a[1](void 0)}]}function lZ(){var t=jl(Zr++,11);if(!t.__){for(var n=Qn.__v;n!==null&&!n.__m&&n.__!==null;)n=n.__;var a=n.__m||(n.__m=[0,0]);t.__="P"+a[0]+"-"+a[1]++}return t.__}function cZ(){for(var t;t=Ew.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Of),t.__H.__h.forEach(Mv),t.__H.__h=[]}catch(n){t.__H.__h=[],va.__e(n,t.__v)}}va.__b=function(t){Qn=null,gI&&gI(t)},va.__=function(t,n){n.__k&&n.__k.__m&&(t.__m=n.__k.__m),TI&&TI(t,n)},va.__r=function(t){bI&&bI(t),Zr=0;var n=(Qn=t.__c).__H;n&&(wg===Qn?(n.__h=[],Qn.__h=[],n.__.forEach(function(a){a.__N&&(a.__=a.__N),a.__V=Cf,a.__N=a.i=void 0})):(n.__h.forEach(Of),n.__h.forEach(Mv),n.__h=[],Zr=0)),wg=Qn},va.diffed=function(t){vI&&vI(t);var n=t.__c;n&&n.__H&&(n.__H.__h.length&&(Ew.push(n)!==1&&_I===va.requestAnimationFrame||((_I=va.requestAnimationFrame)||dZ)(cZ)),n.__H.__.forEach(function(a){a.i&&(a.__H=a.i),a.__V!==Cf&&(a.__=a.__V),a.i=void 0,a.__V=Cf})),wg=Qn=null},va.__c=function(t,n){n.some(function(a){try{a.__h.forEach(Of),a.__h=a.__h.filter(function(e){return!e.__||Mv(e)})}catch(e){n.some(function(s){s.__h&&(s.__h=[])}),n=[],va.__e(e,a.__v)}}),EI&&EI(t,n)},va.unmount=function(t){SI&&SI(t);var n,a=t.__c;a&&a.__H&&(a.__H.__.forEach(function(e){try{Of(e)}catch(s){n=s}}),a.__H=void 0,n&&va.__e(n,a.__v))};var AI=typeof requestAnimationFrame=="function";function dZ(t){var n,a=function(){clearTimeout(e),AI&&cancelAnimationFrame(n),setTimeout(t)},e=setTimeout(a,100);AI&&(n=requestAnimationFrame(a))}function Of(t){var n=Qn,a=t.__c;typeof a=="function"&&(t.__c=void 0,a()),Qn=n}function Mv(t){var n=Qn;t.__c=t.__(),Qn=n}function TS(t,n){return!t||t.length!==n.length||n.some(function(a,e){return a!==t[e]})}function Aw(t,n){return typeof n=="function"?n(t):n}const uZ={__proto__:null,useCallback:$c,useContext:oZ,useDebugValue:rZ,useEffect:nZ,useErrorBoundary:iZ,useId:lZ,useImperativeHandle:sZ,useLayoutEffect:Tw,useMemo:ap,useReducer:Sw,useRef:aZ,useState:Uc},pZ="http://www.w3.org/2000/svg";function fZ(){const t=e=>Hn.createElementNS(pZ,e),n=no(t("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),a=no(t("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return n.appendChild(a),n}const yI="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/DialogHeader.tsx";function mZ({options:t}){const n=ap(()=>({__html:fZ().outerHTML}),[]);return _n("h2",{class:"dialog__header",__self:this,__source:{fileName:yI,lineNumber:16}},t.formTitle,t.showBranding?_n("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:n,__self:this,__source:{fileName:yI,lineNumber:19}}):null)}function hZ(t,n){const a=[];return n.isNameRequired&&!t.name&&a.push(n.nameLabel),n.isEmailRequired&&!t.email&&a.push(n.emailLabel),t.message||a.push(n.messageLabel),a}const pa="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Form.tsx";function Mg(t,n){const a=t.get(n);return typeof a=="string"?a.trim():""}function _Z({options:t,defaultEmail:n,defaultName:a,onFormClose:e,onSubmit:s,onSubmitSuccess:r,onSubmitError:o,showEmail:i,showName:l,screenshotInput:c}){const{tags:d,addScreenshotButtonLabel:u,removeScreenshotButtonLabel:m,cancelButtonLabel:h,emailLabel:_,emailPlaceholder:E,isEmailRequired:y,isNameRequired:b,messageLabel:A,messagePlaceholder:T,nameLabel:I,namePlaceholder:N,submitButtonLabel:x,isRequiredLabel:R}=t,[M,w]=Uc(null),[D,B]=Uc(!1),k=c&&c.input,[V,F]=Uc(null),$=$c(U=>{F(U),B(!1)},[]),Y=$c(U=>{const J=hZ(U,{emailLabel:_,isEmailRequired:y,isNameRequired:b,messageLabel:A,nameLabel:I});return J.length>0?w(`Please enter in the following required fields: ${J.join(", ")}`):w(null),J.length===0},[_,y,b,A,I]),j=$c(async U=>{try{if(U.preventDefault(),!(U.target instanceof HTMLFormElement))return;const J=new FormData(U.target),te=await(c&&D?c.value():void 0),q={name:Mg(J,"name"),email:Mg(J,"email"),message:Mg(J,"message"),attachments:te?[te]:void 0};if(!Y(q))return;try{await s({name:q.name,email:q.email,message:q.message,source:Fq,tags:d},{attachments:q.attachments}),r(q)}catch(K){Af&&vn.error(K),w(K),o(K)}}catch{}},[c&&D,r,o]);return _n("form",{class:"form",onSubmit:j,__self:this,__source:{fileName:pa,lineNumber:144}},k&&D?_n(k,{onError:$,__self:this,__source:{fileName:pa,lineNumber:146}}):null,_n("div",{class:"form__right","data-sentry-feedback":!0,__self:this,__source:{fileName:pa,lineNumber:149}},_n("div",{class:"form__top",__self:this,__source:{fileName:pa,lineNumber:150}},M?_n("div",{class:"form__error-container",__self:this,__source:{fileName:pa,lineNumber:151}},M):null,l?_n("label",{for:"name",class:"form__label",__self:this,__source:{fileName:pa,lineNumber:154}},_n(Lg,{label:I,isRequiredLabel:R,isRequired:b,__self:this,__source:{fileName:pa,lineNumber:155}}),_n("input",{class:"form__input",defaultValue:a,id:"name",name:"name",placeholder:N,required:b,type:"text",__self:this,__source:{fileName:pa,lineNumber:156}})):_n("input",{"aria-hidden":!0,value:a,name:"name",type:"hidden",__self:this,__source:{fileName:pa,lineNumber:167}}),i?_n("label",{for:"email",class:"form__label",__self:this,__source:{fileName:pa,lineNumber:171}},_n(Lg,{label:_,isRequiredLabel:R,isRequired:y,__self:this,__source:{fileName:pa,lineNumber:172}}),_n("input",{class:"form__input",defaultValue:n,id:"email",name:"email",placeholder:E,required:y,type:"email",__self:this,__source:{fileName:pa,lineNumber:173}})):_n("input",{"aria-hidden":!0,value:n,name:"email",type:"hidden",__self:this,__source:{fileName:pa,lineNumber:184}}),_n("label",{for:"message",class:"form__label",__self:this,__source:{fileName:pa,lineNumber:187}},_n(Lg,{label:A,isRequiredLabel:R,isRequired:!0,__self:this,__source:{fileName:pa,lineNumber:188}}),_n("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:T,required:!0,rows:5,__self:this,__source:{fileName:pa,lineNumber:189}})),k?_n("label",{for:"screenshot",class:"form__label",__self:this,__source:{fileName:pa,lineNumber:201}},_n("button",{class:"btn btn--default",type:"button",onClick:()=>{F(null),B(U=>!U)},__self:this,__source:{fileName:pa,lineNumber:202}},D?m:u),V?_n("div",{class:"form__error-container",__self:this,__source:{fileName:pa,lineNumber:212}},V.message):null):null),_n("div",{class:"btn-group",__self:this,__source:{fileName:pa,lineNumber:216}},_n("button",{class:"btn btn--primary",type:"submit",__self:this,__source:{fileName:pa,lineNumber:217}},x),_n("button",{class:"btn btn--default",type:"button",onClick:e,__self:this,__source:{fileName:pa,lineNumber:220}},h))))}function Lg({label:t,isRequired:n,isRequiredLabel:a}){return _n("span",{class:"form__label__text",__self:this,__source:{fileName:pa,lineNumber:239}},t,n&&_n("span",{class:"form__label__text--required",__self:this,__source:{fileName:pa,lineNumber:241}},a))}const Up=16,II=17,gZ="http://www.w3.org/2000/svg";function bZ(){const t=l=>dr.document.createElementNS(gZ,l),n=no(t("svg"),{width:`${Up}`,height:`${II}`,viewBox:`0 0 ${Up} ${II}`,fill:"inherit"}),a=no(t("g"),{clipPath:"url(#clip0_57_156)"}),e=no(t("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),s=no(t("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});n.appendChild(a).append(s,e);const r=t("defs"),o=no(t("clipPath"),{id:"clip0_57_156"}),i=no(t("rect"),{width:`${Up}`,height:`${Up}`,fill:"white",transform:"translate(0 0.5)"});return o.appendChild(i),r.appendChild(o),n.appendChild(r).appendChild(o).appendChild(i),n}const wr="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Dialog.tsx";function vZ({open:t,onFormSubmitted:n,...a}){const e=a.options,s=ap(()=>({__html:bZ().outerHTML}),[]),[r,o]=Uc(null),i=$c(()=>{r&&(clearTimeout(r),o(null)),n()},[r]),l=$c(c=>{a.onSubmitSuccess(c),o(setTimeout(()=>{n(),o(null)},$q))},[n]);return _n(np,{__self:this,__source:{fileName:wr,lineNumber:48}},r?_n("div",{class:"success__position",onClick:i,__self:this,__source:{fileName:wr,lineNumber:50}},_n("div",{class:"success__content",__self:this,__source:{fileName:wr,lineNumber:51}},e.successMessageText,_n("span",{class:"success__icon",dangerouslySetInnerHTML:s,__self:this,__source:{fileName:wr,lineNumber:53}}))):_n("dialog",{class:"dialog",onClick:e.onFormClose,open:t,__self:this,__source:{fileName:wr,lineNumber:57}},_n("div",{class:"dialog__position",__self:this,__source:{fileName:wr,lineNumber:58}},_n("div",{class:"dialog__content",onClick:c=>{c.stopPropagation()},__self:this,__source:{fileName:wr,lineNumber:59}},_n(mZ,{options:e,__self:this,__source:{fileName:wr,lineNumber:66}}),_n(_Z,{...a,onSubmitSuccess:l,__self:this,__source:{fileName:wr,lineNumber:67}})))))}const EZ=`
.dialog {
  position: fixed;
  z-index: var(--z-index);
  margin: 0;
  inset: 0;

  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  height: 100vh;
  width: 100vw;

  color: var(--dialog-color, var(--foreground));
  fill: var(--dialog-color, var(--foreground));
  line-height: 1.75em;

  background-color: rgba(0, 0, 0, 0.05);
  border: none;
  inset: 0;
  opacity: 1;
  transition: opacity 0.2s ease-in-out;
}

.dialog__position {
  position: fixed;
  z-index: var(--z-index);
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  display: flex;
  max-height: calc(100vh - (2 * var(--page-margin)));
}
@media (max-width: 600px) {
  .dialog__position {
    inset: var(--page-margin);
    padding: 0;
  }
}

.dialog__position:has(.editor) {
  inset: var(--page-margin);
  padding: 0;
}

.dialog:not([open]) {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}
.dialog:not([open]) .dialog__content {
  transform: translate(0, -16px) scale(0.98);
}

.dialog__content {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: var(--dialog-padding, 24px);
  max-width: 100%;
  width: 100%;
  max-height: 100%;
  overflow: auto;

  background: var(--dialog-background, var(--background));
  border-radius: var(--dialog-border-radius, 20px);
  border: var(--dialog-border, var(--border));
  box-shadow: var(--dialog-box-shadow, var(--box-shadow));
  transform: translate(0, 0) scale(1);
  transition: transform 0.2s ease-in-out;
}
`,SZ=`
.dialog__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-weight: var(--dialog-header-weight, 600);
  margin: 0;
}

.brand-link {
  display: inline-flex;
}
.brand-link:focus-visible {
  outline: var(--outline);
}
`,TZ=`
.form {
  display: flex;
  overflow: auto;
  flex-direction: row;
  gap: 16px;
  flex: 1 0;
}

.form__right {
  flex: 0 0 auto;
  width: var(--form-width, 272px);
  display: flex;
  overflow: auto;
  flex-direction: column;
  justify-content: space-between;
  gap: 20px;
}

@media (max-width: 600px) {
  .form__right {
    width: var(--form-width, 100%);
  }
}

.form__top {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form__error-container {
  color: var(--error-color);
  fill: var(--error-color);
}

.form__label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin: 0px;
}

.form__label__text {
  display: flex;
  gap: 4px;
  align-items: center;
}

.form__label__text--required {
  font-size: 0.85em;
}

.form__input {
  font-family: inherit;
  line-height: inherit;
  background: transparent;
  box-sizing: border-box;
  border: var(--input-border, var(--border));
  border-radius: var(--input-border-radius, 6px);
  color: var(--input-color, inherit);
  fill: var(--input-color, inherit);
  font-size: var(--input-font-size, inherit);
  font-weight: var(--input-font-weight, 500);
  padding: 6px 12px;
}

.form__input::placeholder {
  opacity: 0.65;
  color: var(--input-placeholder-color, inherit);
  filter: var(--interactive-filter);
}

.form__input:focus-visible {
  outline: var(--input-focus-outline, var(--outline));
}

.form__input--textarea {
  font-family: inherit;
  resize: vertical;
}

.error {
  color: var(--error-color);
  fill: var(--error-color);
}
`,AZ=`
.btn-group {
  display: grid;
  gap: 8px;
}

.btn {
  line-height: inherit;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  cursor: pointer;
  font-family: inherit;
  font-size: var(--button-font-size, inherit);
  font-weight: var(--button-font-weight, 600);
  padding: var(--button-padding, 6px 16px);
}
.btn[disabled] {
  opacity: 0.6;
  pointer-events: none;
}

.btn--primary {
  color: var(--button-primary-color, var(--accent-foreground));
  fill: var(--button-primary-color, var(--accent-foreground));
  background: var(--button-primary-background, var(--accent-background));
  border: var(--button-primary-border, var(--border));
  border-radius: var(--button-primary-border-radius, 6px);
  font-weight: var(--button-primary-font-weight, 500);
}
.btn--primary:hover {
  color: var(--button-primary-hover-color, var(--accent-foreground));
  fill: var(--button-primary-hover-color, var(--accent-foreground));
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
}
.btn--primary:focus-visible {
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
  outline: var(--button-primary-focus-outline, var(--outline));
}

.btn--default {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-background, var(--background));
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  font-weight: var(--button-font-weight, 500);
}
.btn--default:hover {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
}
.btn--default:focus-visible {
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
  outline: var(--button-focus-outline, var(--outline));
}
`,yZ=`
.success__position {
  position: fixed;
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  z-index: var(--z-index);
}
.success__content {
  background: var(--success-background, var(--background));
  border: var(--success-border, var(--border));
  border-radius: var(--success-border-radius, 1.7em/50%);
  box-shadow: var(--success-box-shadow, var(--box-shadow));
  font-weight: var(--success-font-weight, 600);
  color: var(--success-color);
  fill: var(--success-color);
  padding: 12px 24px;
  line-height: 1.75em;

  display: grid;
  align-items: center;
  grid-auto-flow: column;
  gap: 6px;
  cursor: default;
}

.success__icon {
  display: flex;
}
`;function IZ(t){const n=Hn.createElement("style");return n.textContent=`
:host {
  --dialog-inset: var(--inset);
}

${EZ}
${SZ}
${TZ}
${AZ}
${yZ}
`,t&&n.setAttribute("nonce",t),n}const CZ="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/integration.tsx";function OZ(){const t=Yo().getUser(),n=rh().getUser(),a=R2().getUser();return t&&Object.keys(t).length?t:n&&Object.keys(n).length?n:a}const NZ=()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:t,screenshotIntegration:n,sendFeedback:a,shadow:e})=>{const s=e,r=t.useSentryUser,o=OZ(),i=Hn.createElement("div"),l=IZ(t.styleNonce);let c="";const d={get el(){return i},appendToDom(){!s.contains(l)&&!s.contains(i)&&(s.appendChild(l),s.appendChild(i))},removeFromDom(){s.removeChild(i),s.removeChild(l),Hn.body.style.overflow=c},open(){m(!0),t.onFormOpen&&t.onFormOpen(),c=Hn.body.style.overflow,Hn.body.style.overflow="hidden"},close(){m(!1),Hn.body.style.overflow=c}},u=n&&n.createInput({h:_n,hooks:uZ,dialog:d,options:t}),m=h=>{tZ(_n(vZ,{options:t,screenshotInput:u,showName:t.showName||t.isNameRequired,showEmail:t.showEmail||t.isEmailRequired,defaultName:r&&o&&o[r.name]||"",defaultEmail:r&&o&&o[r.email]||"",onFormClose:()=>{m(!1),t.onFormClose&&t.onFormClose()},onSubmit:a,onSubmitSuccess:_=>{m(!1),t.onSubmitSuccess&&t.onSubmitSuccess(_)},onSubmitError:_=>{t.onSubmitError&&t.onSubmitError(_)},onFormSubmitted:()=>{t.onFormSubmitted&&t.onFormSubmitted()},open:h,__self:void 0,__source:{fileName:CZ,lineNumber:67}}),i)};return d}}),xZ="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/screenshot/components/CropCorner.tsx";function RZ({h:t}){return function({top:a,left:e,corner:s,onGrabButton:r}){return t("button",{class:`editor__crop-corner editor__crop-corner--${s} `,style:{top:a,left:e},onMouseDown:o=>{o.preventDefault(),r(o,s)},onClick:o=>{o.preventDefault()},__self:this,__source:{fileName:xZ,lineNumber:22}})}}function wZ(t){const n=Hn.createElement("style"),a="#1A141F",e="#302735";return n.textContent=`
.editor {
  padding: 10px;
  padding-top: 65px;
  padding-bottom: 65px;
  flex-grow: 1;

  background-color: ${a};
  background-image: repeating-linear-gradient(
      -145deg,
      transparent,
      transparent 8px,
      ${a} 8px,
      ${a} 11px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 15px,
      ${e} 15px,
      ${e} 16px
    );
}

.editor__canvas-container {
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.editor__canvas-container canvas {
  object-fit: contain;
  position: relative;
}

.editor__crop-btn-group {
  padding: 8px;
  gap: 8px;
  border-radius: var(--menu-border-radius, 6px);
  background: var(--button-primary-background, var(--background));
  width: 175px;
  position: absolute;
}

.editor__crop-corner {
  width: 30px;
  height: 30px;
  position: absolute;
  background: none;
  border: 3px solid #ffffff;
}

.editor__crop-corner--top-left {
  cursor: nwse-resize;
  border-right: none;
  border-bottom: none;
}
.editor__crop-corner--top-right {
  cursor: nesw-resize;
  border-left: none;
  border-bottom: none;
}
.editor__crop-corner--bottom-left {
  cursor: nesw-resize;
  border-right: none;
  border-top: none;
}
.editor__crop-corner--bottom-right {
  cursor: nwse-resize;
  border-left: none;
  border-top: none;
}
`,t&&n.setAttribute("nonce",t),n}function MZ({hooks:t}){return function({onBeforeScreenshot:a,onScreenshot:e,onAfterScreenshot:s,onError:r}){t.useEffect(()=>{(async()=>{a();const i=await Qd.mediaDevices.getDisplayMedia({video:{width:dr.innerWidth*dr.devicePixelRatio,height:dr.innerHeight*dr.devicePixelRatio},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),l=Hn.createElement("video");await new Promise((c,d)=>{l.srcObject=i,l.onloadedmetadata=()=>{e(l),i.getTracks().forEach(u=>u.stop()),c()},l.play().catch(d)}),s()})().catch(r)},[])}}const vo="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/screenshot/components/ScreenshotEditor.tsx",Jd=30,Lr=3,fi=Jd+Lr,Bs=dr.devicePixelRatio,Fd=t=>({x:Math.min(t.startX,t.endX),y:Math.min(t.startY,t.endY),width:Math.abs(t.startX-t.endX),height:Math.abs(t.startY-t.endY)}),Dg=t=>{const n=t.clientHeight,a=t.clientWidth,e=t.width/t.height;let s=n*e,r=n;s>a&&(s=a,r=a/e);const o=(a-s)/2,i=(n-r)/2;return{startX:o,startY:i,endX:s+o,endY:r+i}};function LZ({h:t,hooks:n,imageBuffer:a,dialog:e,options:s}){const r=MZ({hooks:n});return function({onError:i}){const l=n.useMemo(()=>({__html:wZ(s.styleNonce).innerText}),[]),c=RZ({h:t}),d=n.useRef(null),u=n.useRef(null),m=n.useRef(null),[h,_]=n.useState({startX:0,startY:0,endX:0,endY:0}),[E,y]=n.useState(!1),[b,A]=n.useState(!1);n.useEffect(()=>{dr.addEventListener("resize",T,!1)},[]);function T(){const w=m.current,D=Fd(Dg(a));if(w){w.width=D.width*Bs,w.height=D.height*Bs,w.style.width=`${D.width}px`,w.style.height=`${D.height}px`;const k=w.getContext("2d");k&&k.scale(Bs,Bs)}const B=u.current;B&&(B.style.width=`${D.width}px`,B.style.height=`${D.height}px`),_({startX:0,startY:0,endX:D.width,endY:D.height})}n.useEffect(()=>{const w=m.current;if(!w)return;const D=w.getContext("2d");if(!D)return;const B=Fd(Dg(a)),k=Fd(h);D.clearRect(0,0,B.width,B.height),D.fillStyle="rgba(0, 0, 0, 0.5)",D.fillRect(0,0,B.width,B.height),D.clearRect(k.x,k.y,k.width,k.height),D.strokeStyle="#ffffff",D.lineWidth=3,D.strokeRect(k.x+1,k.y+1,k.width-2,k.height-2),D.strokeStyle="#000000",D.lineWidth=1,D.strokeRect(k.x+3,k.y+3,k.width-6,k.height-6)},[h]);function I(w,D){y(!1),A(!0);const B=N(D),k=()=>{Hn.removeEventListener("mousemove",B),Hn.removeEventListener("mouseup",k),y(!0),A(!1)};Hn.addEventListener("mouseup",k),Hn.addEventListener("mousemove",B)}const N=n.useCallback(w=>function(D){if(!m.current)return;const B=m.current,k=B.getBoundingClientRect(),V=D.clientX-k.x,F=D.clientY-k.y;switch(w){case"top-left":_($=>({...$,startX:Math.min(Math.max(0,V),$.endX-fi),startY:Math.min(Math.max(0,F),$.endY-fi)}));break;case"top-right":_($=>({...$,endX:Math.max(Math.min(V,B.width/Bs),$.startX+fi),startY:Math.min(Math.max(0,F),$.endY-fi)}));break;case"bottom-left":_($=>({...$,startX:Math.min(Math.max(0,V),$.endX-fi),endY:Math.max(Math.min(F,B.height/Bs),$.startY+fi)}));break;case"bottom-right":_($=>({...$,endX:Math.max(Math.min(V,B.width/Bs),$.startX+fi),endY:Math.max(Math.min(F,B.height/Bs),$.startY+fi)}));break}},[]),x=n.useRef({initialX:0,initialY:0});function R(w){if(b)return;x.current={initialX:w.clientX,initialY:w.clientY};const D=k=>{const V=m.current;if(!V)return;const F=k.clientX-x.current.initialX,$=k.clientY-x.current.initialY;_(Y=>{const j=Math.max(0,Math.min(Y.startX+F,V.width/Bs-(Y.endX-Y.startX))),U=Math.max(0,Math.min(Y.startY+$,V.height/Bs-(Y.endY-Y.startY))),J=j+(Y.endX-Y.startX),te=U+(Y.endY-Y.startY);return x.current.initialX=k.clientX,x.current.initialY=k.clientY,{startX:j,startY:U,endX:J,endY:te}})},B=()=>{Hn.removeEventListener("mousemove",D),Hn.removeEventListener("mouseup",B)};Hn.addEventListener("mousemove",D),Hn.addEventListener("mouseup",B)}function M(){const w=Hn.createElement("canvas"),D=Fd(Dg(a)),B=Fd(h);w.width=B.width*Bs,w.height=B.height*Bs;const k=w.getContext("2d");k&&a&&k.drawImage(a,B.x/D.width*a.width,B.y/D.height*a.height,B.width/D.width*a.width,B.height/D.height*a.height,0,0,w.width,w.height);const V=a.getContext("2d");V&&(V.clearRect(0,0,a.width,a.height),a.width=w.width,a.height=w.height,a.style.width=`${B.width}px`,a.style.height=`${B.height}px`,V.drawImage(w,0,0),T())}return r({onBeforeScreenshot:n.useCallback(()=>{e.el.style.display="none"},[]),onScreenshot:n.useCallback(w=>{const D=a.getContext("2d");if(!D)throw new Error("Could not get canvas context");a.width=w.videoWidth,a.height=w.videoHeight,a.style.width="100%",a.style.height="100%",D.drawImage(w,0,0)},[a]),onAfterScreenshot:n.useCallback(()=>{e.el.style.display="block";const w=d.current;w&&w.appendChild(a),T()},[]),onError:n.useCallback(w=>{e.el.style.display="block",i(w)},[])}),t("div",{class:"editor",__self:this,__source:{fileName:vo,lineNumber:315}},t("style",{nonce:s.styleNonce,dangerouslySetInnerHTML:l,__self:this,__source:{fileName:vo,lineNumber:316}}),t("div",{class:"editor__canvas-container",ref:d,__self:this,__source:{fileName:vo,lineNumber:317}},t("div",{class:"editor__crop-container",style:{position:"absolute",zIndex:1},ref:u,__self:this,__source:{fileName:vo,lineNumber:318}},t("canvas",{onMouseDown:R,style:{position:"absolute",cursor:E?"move":"auto"},ref:m,__self:this,__source:{fileName:vo,lineNumber:319}}),t(c,{left:h.startX-Lr,top:h.startY-Lr,onGrabButton:I,corner:"top-left",__self:this,__source:{fileName:vo,lineNumber:324}}),t(c,{left:h.endX-Jd+Lr,top:h.startY-Lr,onGrabButton:I,corner:"top-right",__self:this,__source:{fileName:vo,lineNumber:330}}),t(c,{left:h.startX-Lr,top:h.endY-Jd+Lr,onGrabButton:I,corner:"bottom-left",__self:this,__source:{fileName:vo,lineNumber:336}}),t(c,{left:h.endX-Jd+Lr,top:h.endY-Jd+Lr,onGrabButton:I,corner:"bottom-right",__self:this,__source:{fileName:vo,lineNumber:342}}),t("div",{style:{left:Math.max(0,h.endX-191),top:Math.max(0,h.endY+8),display:E?"flex":"none"},class:"editor__crop-btn-group",__self:this,__source:{fileName:vo,lineNumber:348}},t("button",{onClick:w=>{w.preventDefault(),m.current&&_({startX:0,startY:0,endX:m.current.width/Bs,endY:m.current.height/Bs}),y(!1)},class:"btn btn--default",__self:this,__source:{fileName:vo,lineNumber:356}},s.cancelButtonLabel),t("button",{onClick:w=>{w.preventDefault(),M(),y(!1)},class:"btn btn--primary",__self:this,__source:{fileName:vo,lineNumber:373}},s.confirmButtonLabel)))))}}const DZ=()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:({h:t,hooks:n,dialog:a,options:e})=>{const s=Hn.createElement("canvas");return{input:LZ({h:t,hooks:n,imageBuffer:s,dialog:a,options:e}),value:async()=>{const r=await new Promise(o=>{s.toBlob(o,"image/png")});if(r)return{data:new Uint8Array(await r.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}}),PZ=fw({lazyLoadIntegration:eS}),CI=fw({lazyLoadIntegration:eS,getModalIntegration:()=>NZ,getScreenshotIntegration:()=>DZ});function kZ(t,n=1,a){Qu.increment(Ju,t,n,a)}function BZ(t,n,a){Qu.distribution(Ju,t,n,a)}function FZ(t,n,a){Qu.set(Ju,t,n,a)}function UZ(t,n,a){Qu.gauge(Ju,t,n,a)}function $Z(t,n,a="second",e){return Qu.timing(Ju,t,n,a,e)}const GZ={increment:kZ,distribution:BZ,set:FZ,gauge:UZ,timing:$Z};function cd(t){return new Promise((n,a)=>{t.oncomplete=t.onsuccess=()=>n(t.result),t.onabort=t.onerror=()=>a(t.error)})}function VZ(t,n){const a=indexedDB.open(t);a.onupgradeneeded=()=>a.result.createObjectStore(n);const e=cd(a);return s=>e.then(r=>s(r.transaction(n,"readwrite").objectStore(n)))}function AS(t){return cd(t.getAllKeys())}function HZ(t,n,a){return t(e=>AS(e).then(s=>{if(!(s.length>=a))return e.put(n,Math.max(...s,0)+1),cd(e.transaction)}))}function jZ(t,n,a){return t(e=>AS(e).then(s=>{if(!(s.length>=a))return e.put(n,Math.min(...s,0)-1),cd(e.transaction)}))}function WZ(t){return t(n=>AS(n).then(a=>{const e=a[0];if(e!=null)return cd(n.get(e)).then(s=>(n.delete(e),cd(n.transaction).then(()=>s)))}))}function zZ(t){let n;function a(){return n==null&&(n=VZ(t.dbName||"sentry-offline",t.storeName||"queue")),n}return{push:async e=>{try{const s=await cT(e);await HZ(a(),s,t.maxQueueSize||30)}catch{}},unshift:async e=>{try{const s=await cT(e);await jZ(a(),s,t.maxQueueSize||30)}catch{}},shift:async()=>{try{const e=await WZ(a());if(e)return T8(e)}catch{}}}}function YZ(t){return n=>t({...n,createStore:zZ})}function KZ(t=k2){return YZ(tW(t))}const OI=1e6,Nf=String(0),XZ="main";let yw="",Iw="",Cw="",Lv=Wa.navigator&&Wa.navigator.userAgent||"",Ow="";const qZ=Wa.navigator&&Wa.navigator.language||Wa.navigator&&Wa.navigator.languages&&Wa.navigator.languages[0]||"";function ZZ(t){return typeof t=="object"&&t!==null&&"getHighEntropyValues"in t}const NI=Wa.navigator&&Wa.navigator.userAgentData;ZZ(NI)&&NI.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(t=>{if(yw=t.platform||"",Cw=t.architecture||"",Ow=t.model||"",Iw=t.platformVersion||"",t.fullVersionList&&t.fullVersionList.length>0){const n=t.fullVersionList[t.fullVersionList.length-1];Lv=`${n.brand} ${n.version}`}}).catch(t=>{});function QZ(t){return!("thread_metadata"in t)}function JZ(t){return QZ(t)?nQ(t):t}function eQ(t){const n=t&&t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id;return typeof n=="string"&&n.length!==32&&ua&&vn.log(`[Profiling] Invalid traceId: ${n} on profiled event`),typeof n!="string"?"":n}function tQ(t,n,a,e){if(e.type!=="transaction")throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(a==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${a} instead.`);const s=eQ(e),r=JZ(a),o=n||(typeof e.start_timestamp=="number"?e.start_timestamp*1e3:Li()*1e3),i=typeof e.timestamp=="number"?e.timestamp*1e3:Li()*1e3;return{event_id:t,timestamp:new Date(o).toISOString(),platform:"javascript",version:"1",release:e.release||"",environment:e.environment||wk,runtime:{name:"javascript",version:Wa.navigator.userAgent},os:{name:yw,version:Iw,build_number:Lv},device:{locale:qZ,model:Ow,manufacturer:Lv,architecture:Cw,is_emulator:!1},debug_meta:{images:oQ(a.resources)},profile:r,transactions:[{name:e.transaction||"",id:e.event_id||vE(),trace_id:s,active_thread_id:Nf,relative_start_ns:"0",relative_end_ns:((i-o)*1e6).toFixed(0)}]}}function Nw(t){return Gr(t).op==="pageload"}function nQ(t){let n,a=0;const e={samples:[],stacks:[],frames:[],thread_metadata:{[Nf]:{name:XZ}}},s=t.samples[0];if(!s)return e;const r=s.timestamp,o=typeof performance.timeOrigin=="number"?performance.timeOrigin:Zb||0,i=o-(Zb||o);return t.samples.forEach((l,c)=>{if(l.stackId===void 0){n===void 0&&(n=a,e.stacks[n]=[],a++),e.samples[c]={elapsed_since_start_ns:((l.timestamp+i-r)*OI).toFixed(0),stack_id:n,thread_id:Nf};return}let d=t.stacks[l.stackId];const u=[];for(;d;){u.push(d.frameId);const h=t.frames[d.frameId];h&&e.frames[d.frameId]===void 0&&(e.frames[d.frameId]={function:h.name,abs_path:typeof h.resourceId=="number"?t.resources[h.resourceId]:void 0,lineno:h.line,colno:h.column}),d=d.parentId===void 0?void 0:t.stacks[d.parentId]}const m={elapsed_since_start_ns:((l.timestamp+i-r)*OI).toFixed(0),stack_id:a,thread_id:Nf};e.stacks[a]=u,e.samples[c]=m,a++}),e}function aQ(t,n){if(!n.length)return t;for(const a of n)t[1].push([{type:"profile"},a]);return t}function sQ(t){const n=[];return ih(t,(a,e)=>{if(e==="transaction")for(let s=1;s<a.length;s++){const r=a[s];r&&r.contexts&&r.contexts.profile&&r.contexts.profile.profile_id&&n.push(a[s])}}),n}const xI=new WeakMap;function oQ(t){const n=Ys._sentryDebugIds;if(!n)return[];const a=ia(),e=a&&a.getOptions(),s=e&&e.stackParser;if(!s)return[];let r;const o=xI.get(s);o?r=o:(r=new Map,xI.set(s,r));const i=Object.keys(n).reduce((c,d)=>{let u;const m=r.get(d);m?u=m:(u=s(d),r.set(d,u));for(let h=u.length-1;h>=0;h--){const _=u[h],E=_&&_.filename;if(_&&E){c[E]=n[d];break}}return c},{}),l=[];for(const c of t)c&&i[c]&&l.push({type:"sourcemap",code_file:c,debug_id:i[c]});return l}function rQ(t){return typeof t!="number"&&typeof t!="boolean"||typeof t=="number"&&isNaN(t)?(ua&&vn.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(t)} of type ${JSON.stringify(typeof t)}.`),!1):t===!0||t===!1?!0:t<0||t>1?(ua&&vn.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${t}.`),!1):!0}function iQ(t){return t.samples.length<2?(ua&&vn.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):t.frames.length?!0:(ua&&vn.log("[Profiling] Discarding profile because it contains no frames"),!1)}let xw=!1;const Rw=3e4;function lQ(t){return typeof t=="function"}function cQ(){const t=Wa.Profiler;if(!lQ(t)){ua&&vn.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object.");return}const n=10,a=Math.floor(Rw/n);try{return new t({sampleInterval:n,maxBufferSize:a})}catch{ua&&(vn.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),vn.log("[Profiling] Disabling profiling for current user session.")),xw=!0}}function RI(t){if(xw)return ua&&vn.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!t.isRecording())return ua&&vn.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const n=ia(),a=n&&n.getOptions();if(!a)return ua&&vn.log("[Profiling] Profiling disabled, no options found."),!1;const e=a.profilesSampleRate;return rQ(e)?e?(e===!0?!0:Math.random()<e)?!0:(ua&&vn.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(e)})`),!1):(ua&&vn.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(ua&&vn.warn("[Profiling] Discarding profile because of invalid sample rate."),!1)}function dQ(t,n,a,e){return iQ(a)?tQ(t,n,a,e):null}const yl=new Map;function uQ(){return yl.size}function pQ(t){const n=yl.get(t);return n&&yl.delete(t),n}function fQ(t,n){if(yl.set(t,n),yl.size>30){const a=yl.keys().next().value;yl.delete(a)}}function wI(t){let n;Nw(t)&&(n=Li()*1e3);const a=cQ();if(!a)return;ua&&vn.log(`[Profiling] started profiling span: ${Gr(t).description}`);const e=vE();Yo().setContext("profile",{profile_id:e,start_timestamp:n});async function s(){if(t&&a)return a.stop().then(l=>{if(r&&(Wa.clearTimeout(r),r=void 0),ua&&vn.log(`[Profiling] stopped profiling of span: ${Gr(t).description}`),!l){ua&&vn.log(`[Profiling] profiler returned null profile for: ${Gr(t).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started");return}fQ(e,l)}).catch(l=>{ua&&vn.log("[Profiling] error while stopping profiler:",l)})}let r=Wa.setTimeout(()=>{ua&&vn.log("[Profiling] max profile duration elapsed, stopping profiling for:",Gr(t).description),s()},Rw);const o=t.end.bind(t);function i(){return t?(s().then(()=>{o()},()=>{o()}),t):o()}t.end=i}const mQ="BrowserProfiling",hQ=()=>({name:mQ,setup(t){const n=ah(),a=n&&Iu(n);a&&Nw(a)&&RI(a)&&wI(a),t.on("spanStart",e=>{e===Iu(e)&&RI(e)&&wI(e)}),t.on("beforeEnvelope",e=>{if(!uQ())return;const s=sQ(e);if(!s.length)return;const r=[];for(const o of s){const i=o&&o.contexts,l=i&&i.profile&&i.profile.profile_id,c=i&&i.profile&&i.profile.start_timestamp;if(typeof l!="string"){ua&&vn.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!l){ua&&vn.log("[Profiling] cannot find profile for a span without a profile context");continue}i&&i.profile&&delete i.profile;const d=pQ(l);if(!d){ua&&vn.log(`[Profiling] Could not retrieve profile for span: ${l}`);continue}const u=dQ(l,c,d,o);u&&r.push(u)}aQ(e,r)})}}),_Q=fo(hQ),gQ=Object.freeze(Object.defineProperty({__proto__:null,BrowserClient:A8,SDK_VERSION:I2,SEMANTIC_ATTRIBUTE_SENTRY_OP:Mk,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:Lk,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:Dk,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:C2,Scope:Pk,WINDOW:Wa,addBreadcrumb:AE,addEventProcessor:O2,addIntegration:y8,addTracingExtensions:Jj,attachErrorHandler:I8,breadcrumbsIntegration:C8,browserApiErrorsIntegration:O8,browserProfilingIntegration:_Q,browserTracingIntegration:B2,captureConsoleIntegration:fW,captureEvent:oh,captureException:vd,captureFeedback:dR,captureMessage:Wf,captureSession:kk,captureUserFeedback:N8,chromeStackLineParser:x8,close:Bk,contextLinesIntegration:Lz,continueTrace:R8,createTracingMixins:w8,createTransport:M8,createUserFeedbackEnvelope:L8,debugIntegration:gW,dedupeIntegration:D8,defaultRequestInstrumentationOptions:P8,defaultStackLineParsers:k8,defaultStackParser:B8,endSession:qb,eventFromException:F8,eventFromMessage:U8,exceptionFromError:$8,extraErrorDataIntegration:EW,feedbackAsyncIntegration:PZ,feedbackIntegration:CI,feedbackSyncIntegration:CI,flush:Fk,forceLoad:G8,functionToStringIntegration:V8,geckoStackLineParser:H8,getActiveSpan:ah,getClient:ia,getCurrentHub:cz,getCurrentScope:Yo,getDefaultIntegrations:j8,getFeedback:Kq,getGlobalScope:R2,getIsolationScope:rh,getReplay:lq,getRootSpan:Iu,getSpanDescendants:Uk,getSpanStatusFromHttpCode:$k,globalHandlersIntegration:W8,httpClientIntegration:vz,httpContextIntegration:z8,inboundFiltersIntegration:Y8,init:F2,instrumentOutgoingRequests:K8,isInitialized:Gk,lastEventId:Vk,lazyLoadIntegration:eS,linkedErrorsIntegration:X8,makeBrowserOfflineTransport:KZ,makeFetchTransport:k2,makeMultiplexedTransport:sW,metrics:GZ,moduleMetadataIntegration:dW,onLoad:q8,opera10StackLineParser:Z8,opera11StackLineParser:Q8,parameterize:iW,registerSpanErrorInstrumentation:M2,replayCanvasIntegration:Aq,replayIntegration:rq,reportingObserverIntegration:_z,rewriteFramesIntegration:yW,sendFeedback:uw,sessionTimingIntegration:NW,setContext:bE,setCurrentClient:J8,setExtra:S2,setExtras:E2,setHttpStatus:Hk,setMeasurement:e4,setTag:T2,setTags:A2,setUser:y2,showReportDialog:t4,spanToBaggageHeader:jk,spanToJSON:Gr,spanToTraceHeader:Wk,startBrowserTracingNavigationSpan:n4,startBrowserTracingPageLoadSpan:a4,startInactiveSpan:s4,startNewTrace:o4,startSession:v2,startSpan:r4,startSpanManual:D2,thirdPartyErrorFilterIntegration:BW,vueIntegration:i4,winjsStackLineParser:l4,withActiveSpan:c4,withIsolationScope:zk,withScope:nh,zodErrorsIntegration:kW},Symbol.toStringTag,{value:"Module"}));function Dv(){return{isImpersonating:S(()=>gc.get(d4.IMPERSONATION_USER))}}const{isImpersonating:bQ}=Dv();class vQ extends dk{constructor(a,e){const{websocketURL:s=""}=window.chatwootConfig||{};super(a,e,s);rn(this,"onReconnect",()=>{Mt.emit(cn.WEBSOCKET_RECONNECT)});rn(this,"onDisconnected",()=>{Mt.emit(cn.WEBSOCKET_DISCONNECT)});rn(this,"isAValidEvent",a=>this.app.$store.getters.getCurrentAccountId===a.account_id);rn(this,"onMessageUpdated",a=>{this.app.$store.dispatch("updateMessage",a)});rn(this,"onPresenceUpdate",a=>{bQ.value||(this.app.$store.dispatch("contacts/updatePresence",a.contacts),this.app.$store.dispatch("agents/updatePresence",a.users),this.app.$store.dispatch("setCurrentUserAvailability",a.users))});rn(this,"onConversationContactChange",a=>{const{meta:e={},id:s}=a,{sender:r}=e||{};s&&this.app.$store.dispatch("updateConversationContact",{conversationId:s,...r})});rn(this,"onAssigneeChanged",a=>{const{id:e}=a;e&&this.app.$store.dispatch("updateConversation",a),this.fetchConversationStats()});rn(this,"onConversationCreated",a=>{this.app.$store.dispatch("addConversation",a),this.fetchConversationStats()});rn(this,"onConversationRead",a=>{this.app.$store.dispatch("updateConversation",a)});rn(this,"onLogout",()=>Pi.logout());rn(this,"onMessageCreated",a=>{const{conversation:{last_activity_at:e},conversation_id:s}=a;u4.onNewMessage(a),this.app.$store.dispatch("addMessage",a),this.app.$store.dispatch("updateConversationLastActivity",{lastActivityAt:e,conversationId:s})});rn(this,"onReload",()=>window.location.reload());rn(this,"onStatusChange",a=>{this.app.$store.dispatch("updateConversation",a),this.fetchConversationStats()});rn(this,"onConversationUpdated",a=>{this.app.$store.dispatch("updateConversation",a),this.fetchConversationStats()});rn(this,"onTypingOn",({conversation:a,user:e})=>{const s=a.id;this.clearTimer(s),this.app.$store.dispatch("conversationTypingStatus/create",{conversationId:s,user:e}),this.initTimer({conversation:a,user:e})});rn(this,"onTypingOff",({conversation:a,user:e})=>{const s=a.id;this.clearTimer(s),this.app.$store.dispatch("conversationTypingStatus/destroy",{conversationId:s,user:e})});rn(this,"onConversationMentioned",a=>{this.app.$store.dispatch("addMentions",a)});rn(this,"clearTimer",a=>{const e=this.CancelTyping[a];e&&(clearTimeout(e),this.CancelTyping[a]=null)});rn(this,"initTimer",({conversation:a,user:e})=>{const s=a.id;this.CancelTyping[s]=setTimeout(()=>{this.onTypingOff({conversation:a,user:e})},3e4)});rn(this,"fetchConversationStats",()=>{Mt.emit("fetch_conversation_stats")});rn(this,"onContactDelete",a=>{this.app.$store.dispatch("contacts/deleteContactThroughConversations",a.id),this.fetchConversationStats()});rn(this,"onContactUpdate",a=>{this.app.$store.dispatch("contacts/updateContact",a)});rn(this,"onNotificationCreated",a=>{this.app.$store.dispatch("notifications/addNotification",a)});rn(this,"onNotificationDeleted",a=>{this.app.$store.dispatch("notifications/deleteNotification",a)});rn(this,"onNotificationUpdated",a=>{this.app.$store.dispatch("notifications/updateNotification",a)});rn(this,"onCopilotMessageCreated",a=>{this.app.$store.dispatch("copilotMessages/upsert",a)});rn(this,"onCacheInvalidate",a=>{const e=a.cache_keys;this.app.$store.dispatch("labels/revalidate",{newKey:e.label}),this.app.$store.dispatch("inboxes/revalidate",{newKey:e.inbox}),this.app.$store.dispatch("teams/revalidate",{newKey:e.team})});this.CancelTyping=[],this.events={"message.created":this.onMessageCreated,"message.updated":this.onMessageUpdated,"conversation.created":this.onConversationCreated,"conversation.status_changed":this.onStatusChange,"user:logout":this.onLogout,"page:reload":this.onReload,"assignee.changed":this.onAssigneeChanged,"conversation.typing_on":this.onTypingOn,"conversation.typing_off":this.onTypingOff,"conversation.contact_changed":this.onConversationContactChange,"presence.update":this.onPresenceUpdate,"contact.deleted":this.onContactDelete,"contact.updated":this.onContactUpdate,"conversation.mentioned":this.onConversationMentioned,"notification.created":this.onNotificationCreated,"notification.deleted":this.onNotificationDeleted,"notification.updated":this.onNotificationUpdated,"conversation.read":this.onConversationRead,"conversation.updated":this.onConversationUpdated,"account.cache_invalidated":this.onCacheInvalidate,"copilot.message.created":this.onCopilotMessageCreated}}}const SQ={init(t,n){return new vQ({$store:t},n)}},TQ={props:{message:{type:String,default:""},action:{type:Object,default:()=>{}}},data(){return{toggleAfterTimeout:!1}},mounted(){},methods:{}},AQ={class:"shadow-sm bg-n-slate-12 dark:bg-n-slate-7 rounded-lg items-center gap-3 inline-flex mb-2 max-w-[25rem] min-h-[1.875rem] min-w-[15rem] px-6 py-3 text-left"},yQ={class:"text-sm font-medium text-white dark:text-white"},IQ={key:0};function CQ(t,n,a,e,s,r){const o=H("router-link");return p(),g("div",null,[f("div",AQ,[f("div",yQ,C(a.message),1),a.action?(p(),g("div",IQ,[a.action.type=="link"?(p(),L(o,{key:0,to:a.action.to,class:"font-medium cursor-pointer select-none text-n-blue-10 hover:text-n-brand"},{default:z(()=>[Oe(C(a.action.message),1)]),_:1},8,["to"])):O("v-if",!0)])):O("v-if",!0)])])}const OQ=G(TQ,[["render",CQ],["__file","/app/app/javascript/dashboard/components/Snackbar.vue"]]),NQ={__name:"SnackbarContainer",props:{duration:{type:Number,default:2500}},setup(t,{expose:n}){n();const a=t,{t:e}=Q(),s=P([]),r=P(null),o=()=>{try{const c=r.value;c!=null&&c.matches(":popover-open")&&c.hidePopover(),c==null||c.showPopover()}catch{}},i=({message:c,action:d})=>{const u=d!=null&&d.usei18n?e(c):c,m=(d==null?void 0:d.duration)||a.duration;s.value.push({key:Date.now(),message:u,action:d}),At(o),setTimeout(()=>{s.value.shift()},m)};Pe(()=>{Mt.on("newToastMessage",i)}),is(()=>{Mt.off("newToastMessage",i)});const l={props:a,t:e,snackMessages:s,snackbarContainer:r,showPopover:o,onNewToastMessage:i,ref:P,onMounted:Pe,onUnmounted:is,nextTick:At,WootSnackbar:OQ,get emitter(){return Mt},get useI18n(){return Q}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}},xQ={ref:"snackbarContainer",popover:"manual",class:"fixed top-4 left-1/2 -translate-x-1/2 max-w-[25rem] w-[calc(100%-2rem)] text-center bg-transparent border-0 p-0 m-0 outline-none overflow-visible"};function RQ(t,n,a,e,s,r){return p(),g("div",xQ,[v(n2,{name:"toast-fade",tag:"div"},{default:z(()=>[(p(!0),g(de,null,Ae(e.snackMessages,o=>(p(),L(e.WootSnackbar,{key:o.key,message:o.message,action:o.action},null,8,["message","action"]))),128))]),_:1})],512)}const wQ=G(NQ,[["render",RQ],["__file","/app/app/javascript/dashboard/components/SnackbarContainer.vue"]]),MI=t=>{const n=ro.get(xo.COLOR_SCHEME)||"auto";n==="auto"&&t||n==="dark"?(document.body.classList.add("dark"),document.documentElement.style.setProperty("color-scheme","dark")):(document.body.classList.remove("dark"),document.documentElement.style.setProperty("color-scheme","light"))},LI=Object.freeze([{name:"conversation_actions"},{name:"macros"},{name:"conversation_info"},{name:"contact_attributes"},{name:"contact_notes"},{name:"previous_conversation"},{name:"conversation_participants"},{name:"linear_issues"},{name:"shopify_orders"}]),MQ=Object.freeze([{name:"contact_attributes"},{name:"contact_labels"},{name:"previous_conversation"}]),Lh=t=>t==null?void 0:t.toLowerCase().replace(" ","_").replace("-","_").replace("::","_"),LQ=t=>S(()=>{const{conversation_sidebar_items_order:n}=t.value;if(!n)return[...LI];const a=[...n];return LI.forEach(e=>{a.find(s=>s.name===e.name)||a.push(e)}),a}),DQ=t=>S(()=>{const{contact_sidebar_items_order:n}=t.value;return n||MQ}),PQ=(t,n,a)=>{a({[t]:!n.value[t]})},kQ=(t,n,a)=>{if(!t)return;const e=Lh(t);a({[`${e}_signature_enabled`]:n})},BQ=(t,n,a)=>{if(!t)return;const e=Lh(t);a({[`${e}_quoted_reply_enabled`]:n})},FQ=(t,n)=>{if(!t)return!1;const a=Lh(t);return n.value[`${a}_signature_enabled`]},UQ=(t,n)=>{if(!t)return!1;const a=Lh(t);return n.value[`${a}_quoted_reply_enabled`]},$Q=(t,n)=>{const{editor_message_key:a,enter_to_send_enabled:e}=n.value||{};return a?a===t:t===(e?"enter":"cmd_enter")};function Ct(){const t=xt(),n=Fe(),a=S(()=>t.getUISettings.value),e=(s={})=>{n.dispatch("updateUISettings",{uiSettings:{...a.value,...s}})};return{uiSettings:a,updateUISettings:e,conversationSidebarItemsOrder:LQ(a),contactSidebarItemsOrder:DQ(a),isContactSidebarItemOpen:s=>!!a.value[s],toggleSidebarUIState:s=>PQ(s,a,e),setSignatureFlagForInbox:(s,r)=>kQ(s,r,e),fetchSignatureFlagFromUISettings:s=>FQ(s,a),setQuotedReplyFlagForInbox:(s,r)=>BQ(s,r,e),fetchQuotedReplyFlagFromUISettings:s=>UQ(s,a),isEditorHotKeyEnabled:s=>$Q(s,a)}}const Dh={SMALLER:"14px",SMALL:"15px",DEFAULT:"16px",LARGE:"18px",LARGER:"20px"},GQ=Object.keys(Dh),VQ=t=>`PROFILE_SETTINGS.FORM.INTERFACE_SECTION.FONT_SIZE.OPTIONS.${t}`,HQ=(t,n)=>({value:Dh[n],label:t(VQ(n))}),jQ=t=>{document.documentElement.style.setProperty("font-size",t??Dh.DEFAULT)},Im=()=>{const{uiSettings:t,updateUISettings:n}=Ct(),{t:a}=Q(),e=S(()=>GQ.map(i=>HQ(a,i))),s=S(()=>t.value.font_size||Dh.DEFAULT),r=i=>{requestAnimationFrame(()=>jQ(i))},o=async i=>{try{await n({font_size:i}),r(i),Z(a("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.FONT_SIZE.UPDATE_SUCCESS"))}catch{Z(a("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.FONT_SIZE.UPDATE_ERROR"))}};return je(()=>t.value.font_size,i=>{r(i)},{immediate:!0}),{fontSizeOptions:e,currentFontSize:s,applyFontSize:r,updateFontSize:o}};class WQ extends Xs{constructor(){super("notification_subscriptions")}}const zQ=new WQ,Pv=(t=()=>{})=>{"serviceWorker"in navigator&&"PushManager"in window&&navigator.serviceWorker.register("/sw.js").then(n=>t(n)).catch(n=>{console.log("SW registration failed: ",n)})},YQ=()=>"Notification"in window?Notification.permission==="granted":!1,DI=t=>btoa(String.fromCharCode.apply(null,new Uint8Array(t))).replace(/\+/g,"-").replace(/\//g,"_"),KQ=t=>({subscription_type:"browser_push",subscription_attributes:{endpoint:t.endpoint,p256dh:DI(t.getKey("p256dh")),auth:DI(t.getKey("auth"))}}),XQ=t=>Pi.hasAuthCookie()?zQ.create(KQ(t)):null,kv=(t=()=>{})=>{window.chatwootConfig.vapidPublicKey&&navigator.serviceWorker.ready.then(n=>n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:window.chatwootConfig.vapidPublicKey})).then(XQ).then(()=>{t()}).catch(n=>{console.error("Push subscription registration failed:",n),Z("This browser does not support desktop notification")})},qQ=({onSuccess:t})=>{"Notification"in window?Notification.permission==="granted"?kv(t):Notification.permission!=="denied"&&Notification.requestPermission(n=>{n==="granted"&&kv(t)}):(console.warn("Notification is not supported"),Z("This browser does not support desktop notification"))},ZQ=10800,QQ=15;class JQ{constructor(n,a){rn(this,"disconnect",()=>this.removeEventListeners());rn(this,"setupEventListeners",()=>{window.addEventListener("online",this.handleOnlineEvent),Mt.on(cn.WEBSOCKET_RECONNECT,this.onReconnect),Mt.on(cn.WEBSOCKET_DISCONNECT,this.onDisconnect)});rn(this,"removeEventListeners",()=>{window.removeEventListener("online",this.handleOnlineEvent),Mt.off(cn.WEBSOCKET_RECONNECT,this.onReconnect),Mt.off(cn.WEBSOCKET_DISCONNECT,this.onDisconnect)});rn(this,"getSecondsSinceDisconnect",()=>this.disconnectTime?Math.max(G2(new Date,this.disconnectTime),0):0);rn(this,"handleOnlineEvent",()=>{this.getSecondsSinceDisconnect()>=ZQ&&window.location.reload()});rn(this,"fetchConversations",async()=>{await this.store.dispatch("updateChatListFilters",{page:null,updatedWithin:this.getSecondsSinceDisconnect()+QQ}),await this.store.dispatch("fetchAllConversations"),await this.store.dispatch("updateChatListFilters",{updatedWithin:null})});rn(this,"fetchFilteredOrSavedConversations",async n=>{await this.store.dispatch("fetchFilteredConversations",{queryData:n,page:1})});rn(this,"fetchConversationsOnReconnect",async()=>{var s;const{getAppliedConversationFiltersQuery:n,"customViews/getActiveConversationFolder":a}=this.store.getters,e=(s=n==null?void 0:n.payload)!=null&&s.length?n:a==null?void 0:a.query;e?await this.fetchFilteredOrSavedConversations(e):await this.fetchConversations()});rn(this,"fetchConversationMessagesOnReconnect",async()=>{const{conversation_id:n}=this.router.currentRoute.value.params;n&&await this.store.dispatch("syncActiveConversationMessages",{conversationId:Number(n)})});rn(this,"fetchNotificationsOnReconnect",async n=>{await this.store.dispatch("notifications/index",{...n,page:1})});rn(this,"revalidateCaches",async()=>{const{label:n,inbox:a,team:e}=await this.store.dispatch("accounts/getCacheKeys");await Promise.all([this.store.dispatch("labels/revalidate",{newKey:n}),this.store.dispatch("inboxes/revalidate",{newKey:a}),this.store.dispatch("teams/revalidate",{newKey:e})])});rn(this,"handleRouteSpecificFetch",async()=>{const n=this.router.currentRoute.value.name;fm(n,!0)?(await this.fetchConversationsOnReconnect(),await this.fetchConversationMessagesOnReconnect()):mm(n,!0)?await this.fetchNotificationsOnReconnect(this.store.getters["notifications/getNotificationFilters"]):mv(n)&&await this.fetchNotificationsOnReconnect()});rn(this,"setConversationLastMessageId",async()=>{const{conversation_id:n}=this.router.currentRoute.value.params;n&&await this.store.dispatch("setConversationLastMessageId",{conversationId:Number(n)})});rn(this,"onDisconnect",()=>{this.disconnectTime=new Date,this.setConversationLastMessageId()});rn(this,"onReconnect",async()=>{await this.handleRouteSpecificFetch(),await this.revalidateCaches(),Mt.emit(cn.WEBSOCKET_RECONNECT_COMPLETED)});this.store=n,this.router=a,this.disconnectTime=null,this.setupEventListeners()}}const eJ={name:"App",components:{AddAccountModal:Yx,LoadingState:Ed,NetworkNotification:BG,UpdateBanner:Fj,PaymentPendingBanner:Gj,WootSnackbarBox:wQ,PendingEmailVerificationBanner:jj},setup(){const t=ft(),n=Fe(),{accountId:a}=Ut(),{currentFontSize:e}=Im(),{uiSettings:s}=Ct();return{router:t,store:n,currentAccountId:a,currentFontSize:e,uiSettings:s}},data(){return{showAddAccountModal:!1,latestChatwootVersion:null,reconnectService:null}},computed:{..._t({getAccount:"accounts/getAccount",isRTL:"accounts/isRTL",currentUser:"getCurrentUser",authUIFlags:"getAuthUIFlags",accountUIFlags:"accounts/getUIFlags"}),hasAccounts(){const{accounts:t=[]}=this.currentUser||{};return t.length>0},hideOnOnboardingView(){return!p4(this.$route)}},watch:{currentUser(){this.hasAccounts||(this.showAddAccountModal=!0)},currentAccountId:{immediate:!0,handler(){this.currentAccountId&&this.initializeAccount()}}},mounted(){var t;this.initializeColorTheme(),this.listenToThemeChanges(),this.setLocale(((t=this.uiSettings)==null?void 0:t.locale)||window.chatwootConfig.selectedLocale)},unmounted(){this.reconnectService&&this.reconnectService.disconnect()},methods:{initializeColorTheme(){MI(window.matchMedia("(prefers-color-scheme: dark)").matches)},listenToThemeChanges(){const t=window.matchMedia("(prefers-color-scheme: dark)");t.onchange=n=>MI(n.matches)},setLocale(t){this.$root.$i18n.locale=t},async initializeAccount(){var e;await this.$store.dispatch("accounts/get"),this.$store.dispatch("setActiveAccount",{accountId:this.currentAccountId});const{locale:t,latest_chatwoot_version:n}=this.getAccount(this.currentAccountId),{pubsub_token:a}=this.currentUser||{};this.setLocale(((e=this.uiSettings)==null?void 0:e.locale)||t),this.latestChatwootVersion=n,SQ.init(this.store,a),this.reconnectService=new JQ(this.store,this.router),window.reconnectService=this.reconnectService,Pv(s=>s.pushManager.getSubscription().then(r=>{r&&kv()}))}}},tJ=["dir"];function nJ(t,n,a,e,s,r){const o=H("UpdateBanner"),i=H("PendingEmailVerificationBanner"),l=H("PaymentPendingBanner"),c=H("router-view"),d=H("AddAccountModal"),u=H("WootSnackbarBox"),m=H("NetworkNotification"),h=H("LoadingState");return!t.authUIFlags.isFetching&&!t.accountUIFlags.isFetchingItem?(p(),g("div",{key:0,id:"app",class:"flex flex-col w-full h-screen min-h-0",dir:t.isRTL?"rtl":"ltr"},[v(o,{"latest-chatwoot-version":s.latestChatwootVersion},null,8,["latest-chatwoot-version"]),e.currentAccountId?(p(),g(de,{key:0},[r.hideOnOnboardingView?(p(),L(i,{key:0})):O("v-if",!0),r.hideOnOnboardingView?(p(),L(l,{key:1})):O("v-if",!0)],64)):O("v-if",!0),v(c,null,{default:z(({Component:_})=>[v(Qa,{name:"fade",mode:"out-in"},{default:z(()=>[(p(),L(Da(_)))]),_:2},1024)]),_:1}),v(d,{show:s.showAddAccountModal,"has-accounts":r.hasAccounts},null,8,["show","has-accounts"]),v(u),v(m)],8,tJ)):(p(),L(h,{key:1}))}const aJ=G(eJ,[["render",nJ],["__file","/app/app/javascript/dashboard/App.vue"]]),sJ=t=>Promise.reject(t),oJ=t=>{const{apiHost:n=""}=window.chatwootConfig||{},a=t.create({baseURL:`${n}/`});if(Pi.hasAuthCookie()){const{"access-token":e,"token-type":s,client:r,expiry:o,uid:i}=Pi.getAuthData();Object.assign(a.defaults.headers.common,{"access-token":e,"token-type":s,client:r,expiry:o,uid:i})}return a.interceptors.response.use(e=>e,e=>sJ(e)),a};/*!
 /**
  * vuex-router-sync v6.0.0-rc.1
  * (c) 2021 Evan You
  * @license MIT
  */function rJ(t,n,a){const e={}.moduleName||"route";t.registerModule(e,{namespaced:!0,state:Bv(n.currentRoute.value),mutations:{ROUTE_CHANGED(l,c){t.state[e]=Bv(c.to,c.from)}}});let s=!1,r;const o=t.watch(l=>l[e],l=>{const{fullPath:c}=l;c!==r&&(r!=null&&(s=!0,n.push(l)),r=c)},{flush:"sync"}),i=n.afterEach((l,c)=>{if(s){s=!1;return}r=l.fullPath,t.commit(e+"/ROUTE_CHANGED",{to:l,from:c})});return function(){i(),o(),t.unregisterModule(e)}}function Bv(t,n){const a={name:t.name,path:t.path,hash:t.hash,query:t.query,params:t.params,fullPath:t.fullPath,meta:t.meta};return n&&(a.from=Bv(n)),Object.freeze(a)}function io(){const t=window.chatwootConfig||{},n=t.hostURL,a=t.vapidPublicKey,e=t.enabledLanguages,s=t.isEnterprise==="true",r=t.enterprisePlanName;return{hostURL:n,vapidPublicKey:a,enabledLanguages:e,isEnterprise:s,enterprisePlanName:r}}const pt={AGENT_BOTS:"agent_bots",AGENT_MANAGEMENT:"agent_management",ASSIGNMENT_V2:"assignment_v2",AUTO_RESOLVE_CONVERSATIONS:"auto_resolve_conversations",AUTOMATIONS:"automations",CAMPAIGNS:"campaigns",WHATSAPP_CAMPAIGNS:"whatsapp_campaign",CANNED_RESPONSES:"canned_responses",CRM:"crm",CUSTOM_ATTRIBUTES:"custom_attributes",INBOX_MANAGEMENT:"inbox_management",INTEGRATIONS:"integrations",LABELS:"labels",MACROS:"macros",HELP_CENTER:"help_center",REPORTS:"reports",TEAM_MANAGEMENT:"team_management",VOICE_RECORDER:"voice_recorder",AUDIT_LOGS:"audit_logs",INBOX_VIEW:"inbox_view",SLA:"sla",RESPONSE_BOT:"response_bot",CHANNEL_EMAIL:"channel_email",CHANNEL_FACEBOOK:"channel_facebook",CHANNEL_TWITTER:"channel_twitter",CHANNEL_WEBSITE:"channel_website",CUSTOM_REPLY_DOMAIN:"custom_reply_domain",CUSTOM_REPLY_EMAIL:"custom_reply_email",DISABLE_BRANDING:"disable_branding",EMAIL_CONTINUITY_ON_API_CHANNEL:"email_continuity_on_api_channel",INBOUND_EMAILS:"inbound_emails",IP_LOOKUP:"ip_lookup",LINEAR:"linear_integration",CAPTAIN:"captain_integration",CUSTOM_ROLES:"custom_roles",CHATWOOT_V4:"chatwoot_v4",REPORT_V4:"report_v4",CHANNEL_INSTAGRAM:"channel_instagram",CONTACT_CHATWOOT_SUPPORT_TEAM:"contact_chatwoot_support_team",CAPTAIN_V2:"captain_integration_v2",SAML:"saml",QUOTED_EMAIL_REPLY:"quoted_email_reply"},iJ=[pt.SLA,pt.CAPTAIN,pt.CUSTOM_ROLES,pt.AUDIT_LOGS,pt.HELP_CENTER,pt.SAML],lJ={__name:"Input",props:{modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},customInputClass:{type:[String,Object,Array],default:""},placeholder:{type:String,default:""},label:{type:String,default:""},id:{type:String,default:""},size:{type:String,default:"md",validator:t=>["sm","md"].includes(t)},message:{type:String,default:""},disabled:{type:Boolean,default:!1},messageType:{type:String,default:"info",validator:t=>["info","error","success"].includes(t)},min:{type:String,default:""},max:{type:String,default:""},autofocus:{type:Boolean,default:!1}},emits:["update:modelValue","blur","input","focus","enter"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{uid:r}=Bf(),o=S(()=>e.id||`input-${r}`),i=P(!1),l=P(null),c=S(()=>{switch(e.messageType){case"error":return"text-n-ruby-9 dark:text-n-ruby-9";case"success":return"text-n-teal-10 dark:text-n-teal-10";default:return"text-n-slate-11 dark:text-n-slate-11"}}),d=S(()=>{switch(e.messageType){case"error":return"outline-n-ruby-8 dark:outline-n-ruby-8 hover:outline-n-ruby-9 dark:hover:outline-n-ruby-9 disabled:outline-n-ruby-8 dark:disabled:outline-n-ruby-8";default:return"outline-n-weak dark:outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6 disabled:outline-n-weak dark:disabled:outline-n-weak focus:outline-n-brand dark:focus:outline-n-brand"}}),u=b=>{let A=b.target.value;e.type==="number"&&A!==""&&(A=Number(A)),s("update:modelValue",A),s("input",b)},m=b=>{s("focus",b),i.value=!0},h=S(()=>{switch(e.size){case"sm":return"h-8 !px-3 !py-2";case"md":return"h-10 !px-3 !py-2.5";default:return"h-10 !px-3 !py-2.5"}}),_=b=>{s("blur",b),i.value=!1},E=b=>{s("enter",b)};Pe(()=>{e.autofocus&&At(()=>{var b;(b=l.value)==null||b.focus()})});const y={props:e,emit:s,uid:r,uniqueId:o,isFocused:i,inputRef:l,messageClass:c,inputOutlineClass:d,handleInput:u,handleFocus:m,sizeClass:h,handleBlur:_,handleEnter:E,computed:S,ref:P,onMounted:Pe,nextTick:At,getCurrentInstance:Bf};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}},cJ={class:"relative flex flex-col min-w-0 gap-1"},dJ=["for"],uJ=["id","value","type","placeholder","disabled","min","max"];function pJ(t,n,a,e,s,r){return p(),g("div",cJ,[a.label?(p(),g("label",{key:0,for:e.uniqueId,class:"mb-0.5 text-sm font-medium text-n-slate-12"},C(a.label),9,dJ)):O("v-if",!0),O(" Added prefix slot to allow adding icons to the input "),qe(t.$slots,"prefix"),f("input",Ta({id:e.uniqueId},t.$attrs,{ref:"inputRef",value:a.modelValue,class:[[a.customInputClass,e.inputOutlineClass,e.sizeClass,{error:a.messageType==="error",focus:e.isFocused}],"block w-full reset-base text-sm !mb-0 outline outline-1 border-none border-0 outline-offset-[-1px] rounded-lg bg-n-alpha-black2 file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-n-slate-10 dark:placeholder:text-n-slate-10 disabled:cursor-not-allowed disabled:opacity-50 text-n-slate-12 transition-all duration-500 ease-in-out [appearance:textfield] [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none"],type:a.type,placeholder:a.placeholder,disabled:a.disabled,min:["date","datetime-local","time"].includes(a.type)?a.min:void 0,max:["date","datetime-local","time","number"].includes(a.type)?a.max:void 0,onInput:e.handleInput,onFocus:e.handleFocus,onBlur:e.handleBlur,onKeyup:Vn(e.handleEnter,["enter"])}),null,16,uJ),a.message?(p(),g("p",{key:1,class:oe(["min-w-0 mt-1 mb-0 text-xs truncate transition-all duration-500 ease-in-out",e.messageClass])},C(a.message),3)):O("v-if",!0)])}const sn=G(lJ,[["render",pJ],["__file","/app/app/javascript/dashboard/components-next/input/Input.vue"]]),fJ={__name:"CustomBrandPolicyWrapper",props:{showOnCustomBrandedInstance:{type:Boolean,default:!0}},setup(t,{expose:n}){n();const a=t,e=xt(),s=e["globalConfig/isACustomBrandedInstance"],r=S(()=>a.showOnCustomBrandedInstance||!s.value),o={props:a,getters:e,isACustomBrandedInstance:s,shouldShowContent:r,get useStoreGetters(){return xt},computed:S};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},mJ={key:0};function hJ(t,n,a,e,s,r){return e.shouldShowContent?(p(),g("div",mJ,[qe(t.$slots,"default")])):O("v-if",!0)}const ww=G(fJ,[["render",hJ],["__file","/app/app/javascript/dashboard/components/CustomBrandPolicyWrapper.vue"]]),_J={agent_bots:"https://chwt.app/hc/agent-bots",agents:"https://chwt.app/hc/agents",audit_logs:"https://chwt.app/hc/audit-logs",campaigns:"https://chwt.app/hc/campaigns",canned_responses:"https://chwt.app/hc/canned",channel_email:"https://chwt.app/hc/email",channel_facebook:"https://chwt.app/hc/fb",custom_attributes:"https://chwt.app/hc/custom-attributes",dashboard_apps:"https://chwt.app/hc/dashboard-apps",help_center:"https://chwt.app/hc/help-center",inboxes:"https://chwt.app/hc/inboxes",integrations:"https://chwt.app/hc/integrations",labels:"https://chwt.app/hc/labels",macros:"https://chwt.app/hc/macros",message_reply_to:"https://chwt.app/hc/reply-to",reports:"https://chwt.app/hc/reports",sla:"https://chwt.app/hc/sla",team_management:"https://chwt.app/hc/teams",webhook:"https://chwt.app/hc/webhooks",billing:"https://chwt.app/pricing",saml:"https://chwt.app/hc/saml"};function PI(t){return _J[t]}const gJ={__name:"BackButton",props:{backUrl:{type:[String,Object],default:""},buttonLabel:{type:String,default:""},compact:{type:Boolean,default:!1}},setup(t,{expose:n}){n();const a=t,e=()=>{a.backUrl!==""?wa.push(a.backUrl):wa.go(-1)},s=a.compact?"text-sm":"text-base",r={props:a,goBack:e,buttonStyleClass:s,get router(){return wa}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}};function bJ(t,n,a,e,s,r){return p(),g("button",{class:oe(["flex items-center p-0 font-normal cursor-pointer text-n-slate-11",e.buttonStyleClass]),onClickCapture:e.goBack},[n[0]||(n[0]=f("i",{class:"i-lucide-chevron-left -ml-1 text-lg"},null,-1)),Oe(" "+C(a.buttonLabel||t.$t("GENERAL_SETTINGS.BACK")),1)],34)}const Wl=G(gJ,[["render",bJ],["__file","/app/app/javascript/dashboard/components/widgets/BackButton.vue"]]),vJ={__name:"BaseSettingsHeader",props:{title:{type:String,required:!0},description:{type:String,required:!0},iconName:{type:String,default:""},linkText:{type:String,default:""},featureName:{type:String,default:""},backButtonLabel:{type:String,default:""}},setup(t,{expose:n}){n();const a=t,e=PI(a.featureName),r={props:a,helpURL:e,openInNewTab:o=>{o&&window.open(o,"_blank","noopener noreferrer")},CustomBrandPolicyWrapper:ww,get getHelpUrlForFeature(){return PI},BackButton:Wl,Button:Se,Icon:Bt};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},EJ={class:"flex flex-col items-start w-full gap-2"},SJ={class:"flex items-center justify-between w-full gap-4"},TJ={class:"flex items-center gap-3"},AJ={key:0,class:"flex items-center w-10 h-10 p-1 rounded-full bg-n-blue-2"},yJ={class:"flex items-center justify-center w-full h-full rounded-full bg-n-blue-3"},IJ={class:"text-xl font-medium tracking-tight text-n-slate-12"},CJ={class:"hidden gap-2 sm:flex"},OJ={class:"flex flex-col w-full gap-3 text-n-slate-11"},NJ={class:"mb-0 text-sm font-normal line-clamp-5 sm:line-clamp-none max-w-3xl"},xJ=["href"],RJ={class:"flex flex-wrap items-start justify-start w-full gap-3 sm:hidden"};function wJ(t,n,a,e,s,r){const o=H("fluent-icon");return p(),g("div",EJ,[a.backButtonLabel?(p(),L(e.BackButton,{key:0,compact:"","button-label":a.backButtonLabel},null,8,["button-label"])):O("v-if",!0),f("div",SJ,[f("div",TJ,[a.iconName?(p(),g("div",AJ,[f("div",yJ,[v(o,{size:"14",icon:a.iconName,type:"outline",class:"flex-shrink-0 text-n-brand"},null,8,["icon"])])])):O("v-if",!0),f("h1",IJ,C(a.title),1)]),O(" Slot for additional actions on larger screens "),f("div",CJ,[qe(t.$slots,"actions")])]),f("div",OJ,[f("p",NJ,[qe(t.$slots,"description",{},()=>[Oe(C(a.description),1)])]),v(e.CustomBrandPolicyWrapper,{"show-on-custom-branded-instance":!1},{default:z(()=>[e.helpURL&&a.linkText?(p(),g("a",{key:0,href:e.helpURL,target:"_blank",rel:"noopener noreferrer",class:"items-center hidden gap-1 text-sm font-medium sm:inline-flex w-fit text-n-blue-text hover:underline"},[Oe(C(a.linkText)+" ",1),v(e.Icon,{icon:"i-lucide-chevron-right",class:"flex-shrink-0 text-n-blue-text size-4"})],8,xJ)):O("v-if",!0)]),_:1})]),f("div",RJ,[qe(t.$slots,"actions"),v(e.CustomBrandPolicyWrapper,{"show-on-custom-branded-instance":!1},{default:z(()=>[e.helpURL&&a.linkText?(p(),L(e.Button,{key:0,blue:"",link:"",icon:"i-lucide-chevron-right","trailing-icon":"",label:a.linkText,onClick:n[0]||(n[0]=i=>e.openInNewTab(e.helpURL))},null,8,["label"])):O("v-if",!0)]),_:1})])])}const Va=G(vJ,[["render",wJ],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/components/BaseSettingsHeader.vue"]]),MJ={__name:"SectionLayout",props:{title:{type:String,required:!0},description:{type:String,required:!0},withBorder:{type:Boolean,default:!1},hideContent:{type:Boolean,default:!1},beta:{type:Boolean,default:!1}},setup(t,{expose:n}){n();const{t:a}=Q(),e={t:a,get useI18n(){return Q}};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}},LJ={class:"grid grid-cols-4"},DJ={class:"col-span-3"},PJ={class:"text-lg font-medium text-n-slate-12 flex items-center gap-2"},kJ={key:0,class:"text-xs uppercase text-n-iris-11 border border-1 border-n-iris-10 leading-none rounded-lg px-1 py-0.5"},BJ={class:"text-n-slate-11 text-sm mt-2"},FJ={class:"col-span-1"};function UJ(t,n,a,e,s,r){const o=nt("tooltip");return p(),g("section",{class:oe(["grid grid-cols-1 pt-8 gap-5 [interpolate-size:allow-keywords]",{"border-t border-n-weak":a.withBorder,"pb-8":!a.hideContent}])},[f("header",LJ,[f("div",DJ,[f("h4",PJ,[qe(t.$slots,"title",{},()=>[Oe(C(a.title),1)]),a.beta?ce((p(),g("div",kJ,[Oe(C(e.t("GENERAL.BETA")),1)])),[[o,e.t("GENERAL.BETA_DESCRIPTION"),void 0,{top:!0}]]):O("v-if",!0)]),f("p",BJ,[qe(t.$slots,"description",{},()=>[Oe(C(a.description),1)])])]),f("div",FJ,[qe(t.$slots,"headerActions")])]),f("div",{class:oe(["transition-[height] duration-300 ease-in-out text-n-slate-12",{"overflow-hidden h-0":a.hideContent,"h-auto":!a.hideContent}])},[qe(t.$slots,"default")],2)],2)}const zl=G(MJ,[["render",UJ],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/account/components/SectionLayout.vue"]]),$J={__name:"AccountId",setup(t,{expose:n}){n();const{t:a}=Q(),{currentAccount:e}=Ut(),s=S(()=>e.value.id.toString()),r={t:a,currentAccount:e,getAccountId:s,computed:S,get useAccount(){return Ut},get useI18n(){return Q},SectionLayout:zl};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}};function GJ(t,n,a,e,s,r){const o=H("woot-code");return p(),L(e.SectionLayout,{title:e.t("GENERAL_SETTINGS.FORM.ACCOUNT_ID.TITLE"),description:e.t("GENERAL_SETTINGS.FORM.ACCOUNT_ID.NOTE"),"with-border":""},{default:z(()=>[v(o,{script:e.getAccountId},null,8,["script"])]),_:1},8,["title","description"])}const VJ=G($J,[["render",GJ],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/account/components/AccountId.vue"]]),HJ={__name:"BuildInfo",setup(t,{expose:n}){n();const{t:a}=Q(),{currentAccount:e}=Ut(),s=S(()=>e.value.latest_chatwoot_version),r=le("globalConfig/get"),o=S(()=>pu.valid(s.value)?pu.lt(r.value.appVersion,s.value):!1),i=S(()=>r.value.gitSha.substring(0,7)),c={t:a,currentAccount:e,latestChatwootVersion:s,globalConfig:r,hasAnUpdateAvailable:o,gitSha:i,copyGitSha:()=>{Ra(r.value.gitSha)},computed:S,get useAccount(){return Ut},get useMapGetter(){return le},get copyTextToClipboard(){return Ra},get useI18n(){return Q},get semver(){return pu}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}},jJ={class:"p-4 text-sm text-center"},WJ={key:0},zJ={class:"divide-x divide-n-slate-9"},YJ={class:"px-2"};function KJ(t,n,a,e,s,r){const o=nt("tooltip");return p(),g("div",jJ,[e.hasAnUpdateAvailable&&e.globalConfig.displayManifest?(p(),g("div",WJ,C(e.t("GENERAL_SETTINGS.UPDATE_CHATWOOT",{latestChatwootVersion:e.latestChatwootVersion})),1)):O("v-if",!0),f("div",zJ,[f("span",YJ,C(`v${e.globalConfig.appVersion}`),1),ce((p(),g("span",{class:"px-2 build-id cursor-pointer",onClick:e.copyGitSha},[Oe(C(`Build ${e.gitSha}`),1)])),[[o,e.t("COMPONENTS.CODE.BUTTON_TEXT")]])])])}const XJ=G(HJ,[["render",KJ],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/account/components/BuildInfo.vue"]]),qJ={__name:"AccountDelete",setup(t,{expose:n}){n();const{t:a}=Q(),e=Fe(),s=le("accounts/getUIFlags"),{currentAccount:r}=Ut(),[o,i]=$t(),l=S(()=>`${a("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.CONFIRM.PLACE_HOLDER",{accountName:r.value.name})}`),c=S(()=>{const{custom_attributes:A={}}=r.value;return!!A.marked_for_deletion_at}),d=S(()=>{const{custom_attributes:A={}}=r.value;return A.marked_for_deletion_at?new Date(A.marked_for_deletion_at):null}),u=S(()=>{const{custom_attributes:A={}}=r.value;return A.marked_for_deletion_reason||"manual_deletion"}),m=S(()=>d.value?d.value.toLocaleString():""),h=S(()=>{const A={deletionDate:m.value};return u.value==="manual_deletion"?a("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.SCHEDULED_DELETION.MESSAGE_MANUAL",A):a("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.SCHEDULED_DELETION.MESSAGE_INACTIVITY",A)});function _(A){var I,N;const T=(N=(I=A.response)==null?void 0:I.data)==null?void 0:N.message;if(T){Z(T);return}Z(a("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.FAILURE"))}async function E(){i(!1);try{await e.dispatch("accounts/toggleDeletion",{action_type:"delete"}),await e.dispatch("accounts/get"),Z(a("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.SUCCESS"))}catch(A){_(A)}}async function y(){try{await e.dispatch("accounts/toggleDeletion",{action_type:"undelete"}),await e.dispatch("accounts/get"),Z(a("GENERAL_SETTINGS.UPDATE.SUCCESS"))}catch{Z(a("GENERAL_SETTINGS.UPDATE.ERROR"))}}const b={t:a,store:e,uiFlags:s,currentAccount:r,showDeletePopup:o,toggleDeletePopup:i,confirmPlaceHolderText:l,isMarkedForDeletion:c,markedForDeletionDate:d,markedForDeletionReason:u,formattedDeletionDate:m,markedForDeletionMessage:h,handleDeletionError:_,markAccountForDeletion:E,clearDeletionMark:y,computed:S,get useStore(){return Fe},get useMapGetter(){return le},get useAccount(){return Ut},get useI18n(){return Q},get useToggle(){return $t},get useAlert(){return Z},WootConfirmDeleteModal:wx,NextButton:Se,SectionLayout:zl};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}},ZJ={key:0},QJ={class:"p-4 flex-grow-0 flex-shrink-0 flex-[50%] bg-n-ruby-4 rounded"},JJ={class:"mb-4"},eee={key:1};function tee(t,n,a,e,s,r){return p(),g(de,null,[v(e.SectionLayout,{title:e.t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.TITLE"),description:e.t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.NOTE"),"with-border":""},{default:z(()=>[e.isMarkedForDeletion?(p(),g("div",ZJ,[f("div",QJ,[f("p",JJ,C(e.markedForDeletionMessage),1),v(e.NextButton,{label:t.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.SCHEDULED_DELETION.CLEAR_BUTTON"),color:"ruby","is-loading":e.uiFlags.isUpdating,onClick:e.clearDeletionMark},null,8,["label","is-loading"])])])):O("v-if",!0),e.isMarkedForDeletion?O("v-if",!0):(p(),g("div",eee,[v(e.NextButton,{label:t.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.BUTTON_TEXT"),color:"ruby",onClick:n[0]||(n[0]=o=>e.toggleDeletePopup(!0))},null,8,["label"])]))]),_:1},8,["title","description"]),e.showDeletePopup?(p(),L(e.WootConfirmDeleteModal,{key:0,show:e.showDeletePopup,"onUpdate:show":n[1]||(n[1]=o=>e.showDeletePopup=o),title:t.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.CONFIRM.TITLE"),message:t.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.CONFIRM.MESSAGE"),"confirm-text":t.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.CONFIRM.BUTTON_TEXT"),"reject-text":t.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.CONFIRM.DISMISS"),"confirm-value":e.currentAccount.name,"confirm-place-holder-text":e.confirmPlaceHolderText,onOnConfirm:e.markAccountForDeletion,onOnClose:n[2]||(n[2]=o=>e.toggleDeletePopup(!1))},null,8,["show","title","message","confirm-text","reject-text","confirm-value","confirm-place-holder-text"])):O("v-if",!0)],64)}const nee=G(qJ,[["render",tee],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/account/components/AccountDelete.vue"]]),aee={__name:"TextArea",props:{modelValue:{type:String,default:""},label:{type:String,default:""},placeholder:{type:String,default:""},maxLength:{type:Number,default:200},id:{type:String,default:""},disabled:{type:Boolean,default:!1},customTextAreaClass:{type:String,default:""},customTextAreaWrapperClass:{type:String,default:""},showCharacterCount:{type:Boolean,default:!1},autoHeight:{type:Boolean,default:!1},resize:{type:Boolean,default:!1},minHeight:{type:String,default:"4rem"},maxHeight:{type:String,default:"12rem"},autofocus:{type:Boolean,default:!1},message:{type:String,default:""},messageType:{type:String,default:"info",validator:t=>["info","error","success"].includes(t)},signature:{type:String,default:""},sendWithSignature:{type:Boolean,default:!1},allowSignature:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=P(null),o=P(!1),i=S(()=>e.modelValue.length),l=S(()=>Xo(e.signature)),c=S(()=>{switch(e.messageType){case"error":return"text-n-ruby-9 dark:text-n-ruby-9";case"success":return"text-n-teal-10 dark:text-n-teal-10";default:return"text-n-slate-11 dark:text-n-slate-11"}}),d=()=>{!e.autoHeight||!r.value||(r.value.style.height="auto",r.value.style.height=`${r.value.scrollHeight}px`)},u=()=>{if(!r.value)return;const A=Ks(e.modelValue,l.value).trimEnd().length;r.value.focus(),r.value.setSelectionRange(A,A)},m=b=>{if(!e.allowSignature)return;const A=b?Oo(e.modelValue,l.value):Ks(e.modelValue,l.value);s("update:modelValue",A),At(()=>{d(),u()})},h=b=>{s("update:modelValue",b.target.value),e.autoHeight&&At(d)},_=()=>{e.disabled||(o.value=!0)},E=()=>{e.disabled||(o.value=!1)};je(()=>e.modelValue,()=>{e.autoHeight&&At(d)}),je(()=>e.sendWithSignature,b=>{e.allowSignature&&m(b)}),Pe(()=>{var b;e.autoHeight&&At(d),e.autofocus&&((b=r.value)==null||b.focus())});const y={props:e,emit:s,textareaRef:r,isFocused:o,characterCount:i,cleanedSignature:l,messageClass:c,adjustHeight:d,setCursor:u,toggleSignatureInEditor:m,handleInput:h,handleFocus:_,handleBlur:E,computed:S,ref:P,onMounted:Pe,nextTick:At,watch:je,get appendSignature(){return Oo},get removeSignature(){return Ks},get extractTextFromMarkdown(){return Xo}};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}},see={class:"relative flex flex-col gap-1"},oee=["for"],ree=["id","value","placeholder","maxlength","disabled"],iee={key:0,class:"flex items-center justify-end h-4 mt-1 bottom-3 ltr:right-3 rtl:left-3"},lee={class:"text-xs tabular-nums text-n-slate-10"};function cee(t,n,a,e,s,r){return p(),g("div",see,[a.label?(p(),g("label",{key:0,for:a.id,class:"mb-0.5 text-sm font-medium text-n-slate-12"},C(a.label),9,oee)):O("v-if",!0),f("div",{class:oe(["flex flex-col gap-2 px-3 pt-3 pb-3 transition-all duration-500 ease-in-out border rounded-lg bg-n-alpha-black2",[a.customTextAreaWrapperClass,{"cursor-not-allowed opacity-50 !bg-n-alpha-black2 disabled:border-n-weak dark:disabled:border-n-weak":a.disabled,"border-n-brand dark:border-n-brand":e.isFocused,"hover:border-n-slate-6 dark:hover:border-n-slate-6 border-n-weak dark:border-n-weak":!e.isFocused&&a.messageType!=="error","border-n-ruby-8 dark:border-n-ruby-8 hover:border-n-ruby-9 dark:hover:border-n-ruby-9":a.messageType==="error"&&!e.isFocused}]])},[qe(t.$slots,"default"),O(" Slot for adding popover "),f("textarea",{id:a.id,ref:"textareaRef",value:a.modelValue,placeholder:a.placeholder,maxlength:a.showCharacterCount?a.maxLength:void 0,class:oe([[a.customTextAreaClass,{"resize-none":!a.resize}],"flex w-full reset-base text-sm p-0 !rounded-none !bg-transparent dark:!bg-transparent !border-0 !outline-0 !mb-0 placeholder:text-n-slate-10 dark:placeholder:text-n-slate-10 text-n-slate-12 dark:text-n-slate-12 disabled:cursor-not-allowed disabled:opacity-50"]),style:nn({minHeight:a.autoHeight?a.minHeight:void 0,maxHeight:a.autoHeight?a.maxHeight:void 0}),disabled:a.disabled,rows:"1",onInput:e.handleInput,onFocus:e.handleFocus,onBlur:e.handleBlur},null,46,ree),a.showCharacterCount?(p(),g("div",iee,[f("span",lee,C(e.characterCount)+" / "+C(a.maxLength),1)])):O("v-if",!0)],2),a.message?(p(),g("p",{key:1,class:oe(["min-w-0 mt-1 mb-0 text-xs truncate transition-all duration-500 ease-in-out",e.messageClass])},C(a.message),3)):O("v-if",!0)])}const ni=G(aee,[["render",cee],["__file","/app/app/javascript/dashboard/components-next/textarea/TextArea.vue"]]),dee={__name:"Switch",props:{modelValue:{type:Boolean,default:!1},modelModifiers:{}},emits:an(["change"],["update:modelValue"]),setup(t,{expose:n,emit:a}){n();const e=a,{t:s}=Q(),r=dn(t,"modelValue"),i={emit:e,t:s,modelValue:r,updateValue:()=>{r.value=!r.value,e("change",!r.value)},get useI18n(){return Q}};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}},uee=["aria-checked"],pee={class:"sr-only"};function fee(t,n,a,e,s,r){return p(),g("button",{type:"button",class:oe(["relative h-4 transition-colors duration-200 ease-in-out rounded-full w-7 focus:outline-none focus:ring-1 focus:ring-n-brand focus:ring-offset-n-slate-2 focus:ring-offset-2 flex-shrink-0",e.modelValue?"bg-n-brand":"bg-n-slate-6 disabled:bg-n-slate-6/60"]),role:"switch","aria-checked":e.modelValue,onClick:e.updateValue},[f("span",pee,C(e.t("SWITCH.TOGGLE")),1),f("span",{class:oe(["absolute top-0.5 left-0.5 h-3 w-3 transform rounded-full shadow-sm transition-transform duration-200 ease-in-out",e.modelValue?"translate-x-3 bg-n-background":"translate-x-0 bg-n-background"])},null,2)],10,uee)}const mo=G(dee,[["render",fee],["__file","/app/app/javascript/dashboard/components-next/switch/Switch.vue"]]),da={MINUTES:"minutes",HOURS:"hours",DAYS:"days"},mee={__name:"DurationInput",props:an({min:{type:Number,default:0},max:{type:Number,default:1/0},disabled:{type:Boolean,default:!1}},{modelValue:{type:Number,default:null},modelModifiers:{},unit:{type:String,default:da.MINUTES,validate(t){return Object.values(da).includes(t)}},unitModifiers:{}}),emits:["update:modelValue","update:unit"],setup(t,{expose:n}){n();const a=t,{t:e}=Q(),s=dn(t,"modelValue"),r=dn(t,"unit"),o=c=>r.value===da.MINUTES?Math.floor(c):r.value===da.HOURS?Math.floor(c)*60:Math.floor(c)*24*60,i=S({get(){return r.value===da.MINUTES?s.value:r.value===da.HOURS?Math.floor(s.value/60):r.value===da.DAYS?Math.floor(s.value/24/60):0},set(c){let d=o(c);s.value=Math.min(Math.max(d,a.min),a.max)}});je(r,()=>{let c=o(i.value);s.value=Math.min(Math.max(c,a.min),a.max)});const l={props:a,t:e,duration:s,unit:r,convertToMinutes:o,transformedValue:i,computed:S,watch:je,Input:sn,get useI18n(){return Q},get DURATION_UNITS(){return da}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}},hee=["disabled"],_ee=["value"],gee=["value"],bee=["value"];function vee(t,n,a,e,s,r){return p(),g(de,null,[v(e.Input,{modelValue:e.transformedValue,"onUpdate:modelValue":n[0]||(n[0]=o=>e.transformedValue=o),type:"number",autocomplete:"off",disabled:a.disabled,placeholder:e.t("DURATION_INPUT.PLACEHOLDER"),class:"flex-grow w-full disabled:"},null,8,["modelValue","disabled","placeholder"]),ce(f("select",{"onUpdate:modelValue":n[1]||(n[1]=o=>e.unit=o),disabled:a.disabled,class:"mb-0 text-sm disabled:outline-n-weak disabled:opacity-40"},[f("option",{value:e.DURATION_UNITS.MINUTES},C(e.t("DURATION_INPUT.MINUTES")),9,_ee),f("option",{value:e.DURATION_UNITS.HOURS},C(e.t("DURATION_INPUT.HOURS")),9,gee),f("option",{value:e.DURATION_UNITS.DAYS},C(e.t("DURATION_INPUT.DAYS")),9,bee)],8,hee),[[Un,e.unit]])],64)}const yS=G(mee,[["render",vee],["__file","/app/app/javascript/dashboard/components-next/input/DurationInput.vue"]]);function Eee(t,n){t.length<n.length&&([t,n]=[n,t]);let a=t.length,e=n.length;if(a===0||e===0)return 0;let s=Math.floor(a/2)-1,r=Array(e).fill(!1),o=Array(a).fill(""),i=0;for(let h=0;h<a;h++){let _=t[h];for(let E=0;E<e;E++){let y=n[E];if(E<=h+s&&E+s>=1&&_===y&&!r[E]){r[E]=!0,o[i++]=_;break}}}if(!i)return 0;let l=0;for(let h=0,_=0;_<e;_++)r[_]&&(n[_]!==o[h]&&l++,h++);let c=i,d=(c/a+c/e+(c-l/2)/c)/3,u=0,m=Math.min(4,e);for(let h=0;h<m;h++)t[h]===n[h]&&u++;return d+u*.1*(1-d)}function Mw(t,n){let a=0,e=0;if(n&&t.length!==n.length)throw new Error("The number of values must be equal to the number of weights");for(let s=0;s<t.length;s++){let r=n?n[s]:1;a+=t[s]*r,e+=r}return a/e}function See(t){return Math.max(0,Math.min(1,t))}function Lw(t){return t.split(/\s+/).filter((n,a,e)=>n&&e.indexOf(n)===a)}var Dw={CONTAINS_MATCH:1.2,FIRST_SIMILARITY:1.1};function lo(t,n,a,e){if(!n||typeof n!="string")return t;let s=[],r=(e==null?void 0:e.threshold)??.8,o=n.trim().toLowerCase(),i=Lw(o);return t.forEach(l=>{let c=[],d=[];a.forEach(m=>{var y;let h,_=1;typeof m=="string"?h=m:(h=m.name,_=m.weight),d.push(_);let E=(y=l[h])==null?void 0:y.trim().toLowerCase();if(E){let b=Tee(E,i);c.push(b)}else c.push(0)});let u=Mw(c,d);u>=r&&s.push({object:l,similarity:u})}),s.sort((l,c)=>c.similarity-l.similarity),s.map(l=>l.object)}function Tee(t,n){let a=Lw(t),e=n.map(s=>{let r=a.map(i=>Aee(i,s)),o=Math.max(...r);return o===r[0]?o*Dw.FIRST_SIMILARITY:See(o)});return Mw(e)}function Aee(t,n){let a=Eee(t,n);return t.includes(n)?a*Dw.CONTAINS_MATCH:a}const Pw=Symbol("DropdownControl");function kI(){const t=so(Pw,null);if(t===null)throw new Error("Component is missing a parent <DropdownContainer /> component.");return t}function BI(t){qn(Pw,t)}const yee={__name:"DropdownContainer",emits:["close"],setup(t,{expose:n,emit:a}){n();const e=a,[s,r]=$t(!1),o=()=>{s.value&&(e("close"),r(!1))};BI({isOpen:s,toggle:r,closeMenu:o});const i={emit:e,isOpen:s,toggle:r,closeMenu:o,get useToggle(){return $t},get vOnClickOutside(){return Ga},get provideDropdownContext(){return BI}};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}},Iee={class:"relative space-y-2"},Cee={key:0,class:"absolute"};function Oee(t,n,a,e,s,r){return ce((p(),g("div",Iee,[qe(t.$slots,"trigger",{isOpen:e.isOpen,toggle:()=>e.toggle()}),e.isOpen?(p(),g("div",Cee,[qe(t.$slots,"default")])):O("v-if",!0)])),[[e.vOnClickOutside,e.closeMenu]])}const Yl=G(yee,[["render",Oee],["__file","/app/app/javascript/dashboard/components-next/dropdown-menu/base/DropdownContainer.vue"]]),Nee={__name:"DropdownSection",props:{title:{type:String,default:""}},setup(t,{expose:n}){n();const a={};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},xee={class:"-mx-2 n-dropdown-section"},Ree={key:0,class:"px-4 mb-3 mt-1 leading-4 font-medium tracking-[0.2px] text-n-slate-10 text-xs"},wee={class:"gap-2 grid reset-base list-none px-2 max-h-96 overflow-y-auto"};function Mee(t,n,a,e,s,r){return p(),g("div",xee,[a.title?(p(),g("div",Ree,C(a.title),1)):O("v-if",!0),f("ul",wee,[qe(t.$slots,"default")])])}const Td=G(Nee,[["render",Mee],["__file","/app/app/javascript/dashboard/components-next/dropdown-menu/base/DropdownSection.vue"]]),Lee={__name:"DropdownBody",props:{strong:{type:Boolean,default:!1}},setup(t,{expose:n}){n();const a=S(()=>t.strong?"border-n-strong":"border-n-weak"),e=S(()=>t.strong?"before:content-['\0A0'] before:absolute before:bottom-0 before:left-0 before:w-full before:h-full before:rounded-xl before:backdrop-contrast-70 before:backdrop-blur-sm before:z-0 [&>*]:relative":""),s={borderClass:a,beforeClass:e,computed:S};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}},Dee={class:"absolute"};function Pee(t,n,a,e,s,r){return p(),g("div",Dee,[f("ul",{class:oe(["text-sm bg-n-alpha-3 backdrop-blur-[100px] border rounded-xl shadow-sm py-2 n-dropdown-body gap-2 grid list-none px-2 reset-base relative",[e.borderClass,e.beforeClass]])},[qe(t.$slots,"default")],2)])}const Kl=G(Lee,[["render",Pee],["__file","/app/app/javascript/dashboard/components-next/dropdown-menu/base/DropdownBody.vue"]]),kee=Object.assign({inheritAttrs:!1},{__name:"DropdownItem",props:{label:{type:String,default:""},icon:{type:[String,Object,Function],default:""},link:{type:[String,Object],default:""},nativeLink:{type:Boolean,default:!1},click:{type:Function,default:null},preserveOpen:{type:Boolean,default:!1}},setup(t,{expose:n}){n();const a=t,{closeMenu:e}=kI(),s=S(()=>a.link?a.nativeLink&&typeof a.link=="string"?"a":"router-link":a.click?"button":"div"),o={props:a,closeMenu:e,componentIs:s,triggerClick:()=>{a.click&&a.click(),a.preserveOpen||e()},computed:S,Icon:Bt,get useDropdownContext(){return kI}};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}}),Bee={class:"n-dropdown-item"};function Fee(t,n,a,e,s,r){return p(),g("li",Bee,[(p(),L(Da(e.componentIs),Ta(t.$attrs,{class:["flex text-left rtl:text-right items-center p-2 reset-base text-sm text-n-slate-12 w-full border-0",{"hover:bg-n-alpha-2 rounded-lg w-full gap-3":!t.$slots.default}],href:e.componentIs==="a"?e.props.link:null,to:e.componentIs==="router-link"?e.props.link:null,onClick:e.triggerClick}),{default:z(()=>[qe(t.$slots,"default",{},()=>[qe(t.$slots,"icon",{},()=>[a.icon?(p(),L(e.Icon,{key:0,class:"size-4 text-n-slate-11",icon:a.icon},null,8,["icon"])):O("v-if",!0)]),qe(t.$slots,"label",{},()=>[Oe(C(a.label),1)])])]),_:3},16,["class","href","to"]))])}const Xi=G(kee,[["render",Fee],["__file","/app/app/javascript/dashboard/components-next/dropdown-menu/base/DropdownItem.vue"]]),Uee={__name:"SingleSelect",props:an({options:{type:Array,required:!0},disableSearch:{type:Boolean,default:!1},placeholderIcon:{type:String,default:"i-lucide-plus"},placeholder:{type:String,default:""},placeholderTrailingIcon:{type:Boolean,default:!1},searchPlaceholder:{type:String,default:""}},{modelValue:{type:Object,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t,{expose:n}){n();const{t:a}=Q(),e=dn(t,"modelValue"),s=P(""),r=S(()=>t.options?lo(t.options,s.value,["name"]):[]),o=S(()=>{if(!t.options||!e.value)return null;const c=Array.isArray(e.value)?e.value[0]:e.value;return t.options.find(d=>d.id===c.id)}),l={t:a,selected:e,searchTerm:s,searchResults:r,selectedItem:o,toggleSelected:c=>{const d={id:c.id,name:c.name};e.value&&e.value.id===d.id?e.value=null:e.value=d},computed:S,ref:P,get useI18n(){return Q},get picoSearch(){return lo},Icon:Bt,Button:Se,DropdownContainer:Yl,DropdownSection:Td,DropdownBody:Kl,DropdownItem:Xi};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}},$ee={class:"text-n-slate-11"},Gee={key:0,class:"relative"},Vee=["placeholder"];function Hee(t,n,a,e,s,r){return p(),L(e.DropdownContainer,null,{trigger:z(({toggle:o})=>[e.selectedItem?(p(),L(e.Button,{key:0,sm:"",slate:"",faded:"",type:"button",icon:e.selectedItem.icon,label:e.selectedItem.name,onClick:o},null,8,["icon","label","onClick"])):(p(),L(e.Button,{key:1,sm:"",slate:"",faded:"",type:"button","trailing-icon":a.placeholderTrailingIcon,onClick:o},{icon:z(()=>[v(e.Icon,{icon:a.placeholderIcon,class:"text-n-slate-11"},null,8,["icon"])]),default:z(()=>[f("span",$ee,C(a.placeholder||e.t("COMBOBOX.PLACEHOLDER")),1)]),_:2},1032,["trailing-icon","onClick"]))]),default:z(()=>[v(e.DropdownBody,{class:"top-0 min-w-56 z-50",strong:""},{default:z(()=>[a.disableSearch?O("v-if",!0):(p(),g("div",Gee,[v(e.Icon,{class:"absolute size-4 left-2 top-2",icon:"i-lucide-search"}),ce(f("input",{"onUpdate:modelValue":n[0]||(n[0]=o=>e.searchTerm=o),autofocus:"",class:"p-1.5 pl-8 text-n-slate-11 bg-n-alpha-1 rounded-lg w-full",placeholder:a.searchPlaceholder||e.t("COMBOBOX.SEARCH_PLACEHOLDER")},null,8,Vee),[[Et,e.searchTerm]])])),v(e.DropdownSection,{class:"[&>ul]:max-h-80"},{default:z(()=>[e.searchResults.length?(p(!0),g(de,{key:0},Ae(e.searchResults,o=>(p(),L(e.DropdownItem,{key:o.id,icon:o.icon,onClick:i=>e.toggleSelected(o)},{label:z(()=>[Oe(C(o.name)+" ",1),e.selectedItem&&e.selectedItem.id===o.id?(p(),L(e.Icon,{key:0,icon:"i-lucide-check",class:"bg-n-blue-text pointer-events-none"})):O("v-if",!0)]),_:2},1032,["icon","onClick"]))),128)):e.searchTerm?(p(),L(e.DropdownItem,{key:1,disabled:""},{default:z(()=>[Oe(C(e.t("COMBOBOX.EMPTY_SEARCH_RESULTS",{searchTerm:e.searchTerm})),1)]),_:1})):(p(),L(e.DropdownItem,{key:2,disabled:""},{default:z(()=>[Oe(C(e.t("COMBOBOX.EMPTY_STATE")),1)]),_:1}))]),_:1})]),_:1})]),_:1})}const kw=G(Uee,[["render",Hee],["__file","/app/app/javascript/dashboard/components-next/filter/inputs/SingleSelect.vue"]]),jee={__name:"AutoResolve",setup(t,{expose:n}){n();const{t:a}=Q(),e=P(0),s=P(da.MINUTES),r=P(""),o=P({}),i=P(!1),l=P(!1),c=P(!1),{currentAccount:d,updateAccount:u}=Ut(),m=le("labels/getLabels"),h=S(()=>{var I;return(I=m.value)!=null&&I.length?m.value.map(N=>({id:N.title,name:N.title,icon:pn("span",{class:"size-[12px] ring-1 ring-n-alpha-1 dark:ring-white/20 ring-inset rounded-sm",style:{backgroundColor:N.color}})})):[]}),_=S(()=>{var I;return((I=o.value)==null?void 0:I.name)??null});je([d,h],()=>{var M;const{auto_resolve_after:I,auto_resolve_message:N,auto_resolve_ignore_waiting:x,auto_resolve_label:R}=((M=d.value)==null?void 0:M.settings)||{};e.value=I,r.value=N,i.value=x,o.value=h.value.find(w=>w.name===R),e.value&&(e.value%(24*60)===0?s.value=da.DAYS:e.value%60===0?s.value=da.HOURS:s.value=da.MINUTES),e.value&&(l.value=!0)},{deep:!0,immediate:!0});const E=async I=>{try{c.value=!0,await u(I,{silent:!0}),Z(a("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.DURATION.API.SUCCESS"))}catch{Z(a("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.DURATION.API.ERROR"))}finally{c.value=!1}},y=async()=>e.value<10?(Z(a("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.DURATION.ERROR")),Promise.resolve()):E({auto_resolve_after:e.value,auto_resolve_message:r.value,auto_resolve_ignore_waiting:i.value,auto_resolve_label:_.value}),b=async()=>(e.value=null,r.value="",E({auto_resolve_after:null,auto_resolve_message:"",auto_resolve_ignore_waiting:!1,auto_resolve_label:null})),T={t:a,duration:e,unit:s,message:r,labelToApply:o,ignoreWaiting:i,isEnabled:l,isSubmitting:c,currentAccount:d,updateAccount:u,labels:m,labelOptions:h,selectedLabelName:_,updateAccountSettings:E,handleSubmit:y,handleDisable:b,toggleAutoResolve:async()=>{l.value||b()},h:pn,ref:P,watch:je,computed:S,get useMapGetter(){return le},get useI18n(){return Q},get useAccount(){return Ut},get useAlert(){return Z},SectionLayout:zl,WithLabel:$l,TextArea:ni,Switch:mo,NextButton:Se,DurationInput:yS,SingleSelect:kw,get DURATION_UNITS(){return da}};return Object.defineProperty(T,"__isScriptSetup",{enumerable:!1,value:!0}),T}},Wee={class:"flex justify-end"},zee={class:"gap-2 w-full grid grid-cols-[3fr_1fr]"},Yee={class:"rounded-xl border border-n-weak bg-n-solid-1 w-full text-sm text-n-slate-12 divide-y divide-n-weak"},Kee={class:"p-3 h-12 flex items-center justify-between"},Xee={class:"p-3 h-12 flex items-center justify-between"},qee={class:"flex gap-2"};function Zee(t,n,a,e,s,r){return p(),L(e.SectionLayout,{title:e.t("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.TITLE"),description:e.t("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.NOTE"),"hide-content":!e.isEnabled,"with-border":""},{headerActions:z(()=>[f("div",Wee,[v(e.Switch,{modelValue:e.isEnabled,"onUpdate:modelValue":n[0]||(n[0]=o=>e.isEnabled=o),onChange:e.toggleAutoResolve},null,8,["modelValue"])])]),default:z(()=>[f("form",{class:"grid gap-5",onSubmit:Ve(e.handleSubmit,["prevent"])},[v(e.WithLabel,{label:e.t("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.DURATION.LABEL"),"help-message":e.t("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.DURATION.HELP")},{default:z(()=>[f("div",zee,[O(" allow 10 mins to 999 days "),v(e.DurationInput,{modelValue:e.duration,"onUpdate:modelValue":n[1]||(n[1]=o=>e.duration=o),unit:e.unit,"onUpdate:unit":n[2]||(n[2]=o=>e.unit=o),min:"0",max:"1438560",class:"w-full"},null,8,["modelValue","unit"])])]),_:1},8,["label","help-message"]),v(e.WithLabel,{label:e.t("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.MESSAGE.LABEL"),"help-message":e.t("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.MESSAGE.HELP")},{default:z(()=>[v(e.TextArea,{modelValue:e.message,"onUpdate:modelValue":n[3]||(n[3]=o=>e.message=o),class:"w-full",placeholder:e.t("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.MESSAGE.PLACEHOLDER")},null,8,["modelValue","placeholder"])]),_:1},8,["label","help-message"]),v(e.WithLabel,{label:e.t("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.PREFERENCES")},{default:z(()=>[f("div",Yee,[f("div",Kee,[f("span",null,C(e.t("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.IGNORE_WAITING.LABEL")),1),v(e.Switch,{modelValue:e.ignoreWaiting,"onUpdate:modelValue":n[4]||(n[4]=o=>e.ignoreWaiting=o)},null,8,["modelValue"])]),f("div",Xee,[f("span",null,C(e.t("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.LABEL.LABEL")),1),v(e.SingleSelect,{modelValue:e.labelToApply,"onUpdate:modelValue":n[5]||(n[5]=o=>e.labelToApply=o),options:e.labelOptions,placeholder:t.$t("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.LABEL.PLACEHOLDER"),"placeholder-icon":"i-lucide-chevron-down","placeholder-trailing-icon":"",variant:"faded"},null,8,["modelValue","options","placeholder"])])])]),_:1},8,["label"]),f("div",qee,[v(e.NextButton,{blue:"",type:"submit","is-loading":e.isSubmitting,label:e.t("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.UPDATE_BUTTON")},null,8,["is-loading","label"])])],32)]),_:1},8,["title","description","hide-content"])}const Qee=G(jee,[["render",Zee],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/account/components/AutoResolve.vue"]]),Jee={__name:"AudioTranscription",setup(t,{expose:n}){n();const{t:a}=Q(),e=P(!1),{currentAccount:s,updateAccount:r}=Ut();je(s,()=>{var d;const{audio_transcriptions:c}=((d=s.value)==null?void 0:d.settings)||{};e.value=!!c},{deep:!0,immediate:!0});const o=async c=>{try{await r(c),Z(a("GENERAL_SETTINGS.FORM.AUDIO_TRANSCRIPTION.API.SUCCESS"))}catch{Z(a("GENERAL_SETTINGS.FORM.AUDIO_TRANSCRIPTION.API.ERROR"))}},l={t:a,isEnabled:e,currentAccount:s,updateAccount:r,updateAccountSettings:o,toggleAudioTranscription:async()=>o({audio_transcriptions:e.value}),ref:P,watch:je,get useI18n(){return Q},get useAccount(){return Ut},get useAlert(){return Z},SectionLayout:zl,Switch:mo};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}},ete={class:"flex justify-end"};function tte(t,n,a,e,s,r){return p(),L(e.SectionLayout,{title:e.t("GENERAL_SETTINGS.FORM.AUDIO_TRANSCRIPTION.TITLE"),description:e.t("GENERAL_SETTINGS.FORM.AUDIO_TRANSCRIPTION.NOTE"),"with-border":""},{headerActions:z(()=>[f("div",ete,[v(e.Switch,{modelValue:e.isEnabled,"onUpdate:modelValue":n[0]||(n[0]=o=>e.isEnabled=o),onChange:e.toggleAudioTranscription},null,8,["modelValue"])])]),_:1},8,["title","description"])}const nte=G(Jee,[["render",tte],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/account/components/AudioTranscription.vue"]]),ate={components:{BaseSettingsHeader:Va,NextButton:Se,AccountId:VJ,BuildInfo:XJ,AccountDelete:nee,AutoResolve:Qee,AudioTranscription:nte,SectionLayout:zl,WithLabel:$l,NextInput:sn},setup(){const{updateUISettings:t,uiSettings:n}=Ct(),{enabledLanguages:a}=io(),{accountId:e}=Ut(),s=rt();return{updateUISettings:t,uiSettings:n,v$:s,enabledLanguages:a,accountId:e}},data(){return{id:"",name:"",locale:"en",domain:"",supportEmail:"",features:{}}},validations:{name:{required:Ge},locale:{required:Ge}},computed:{..._t({getAccount:"accounts/getAccount",uiFlags:"accounts/getUIFlags",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount",isOnChatwootCloud:"globalConfig/isOnChatwootCloud"}),showAutoResolutionConfig(){return this.isFeatureEnabledonAccount(this.accountId,pt.AUTO_RESOLVE_CONVERSATIONS)},showAudioTranscriptionConfig(){return this.isFeatureEnabledonAccount(this.accountId,pt.CAPTAIN)},languagesSortedByCode(){return[...this.enabledLanguages].sort((n,a)=>n.iso_639_1_code.localeCompare(a.iso_639_1_code))},isUpdating(){return this.uiFlags.isUpdating},featureInboundEmailEnabled(){var t;return!!((t=this.features)!=null&&t.inbound_emails)},featureCustomReplyDomainEnabled(){return this.featureInboundEmailEnabled&&!!this.features.custom_reply_domain},featureCustomReplyEmailEnabled(){return this.featureInboundEmailEnabled&&!!this.features.custom_reply_email},currentAccount(){return this.getAccount(this.accountId)||{}}},mounted(){this.initializeAccount()},methods:{async initializeAccount(){var t;try{const{name:n,locale:a,id:e,domain:s,support_email:r,features:o}=this.getAccount(this.accountId);this.$root.$i18n.locale=((t=this.uiSettings)==null?void 0:t.locale)||a,this.name=n,this.locale=a,this.id=e,this.domain=s,this.supportEmail=r,this.features=o}catch{}},async updateAccount(){var t,n;if(this.v$.$touch(),this.v$.$invalid){Z(this.$t("GENERAL_SETTINGS.FORM.ERROR"));return}try{await this.$store.dispatch("accounts/update",{locale:this.locale,name:this.name,domain:this.domain,support_email:this.supportEmail}),(t=this.uiSettings)!=null&&t.locale?this.$root.$i18n.locale=(n=this.uiSettings)==null?void 0:n.locale:this.$root.$i18n.locale=this.locale,this.getAccount(this.id).locale=this.locale,Z(this.$t("GENERAL_SETTINGS.UPDATE.SUCCESS"))}catch{Z(this.$t("GENERAL_SETTINGS.UPDATE.ERROR"))}}}},ste={class:"flex flex-col max-w-2xl mx-auto w-full"},ote={class:"flex-grow flex-shrink min-w-0 mt-3"},rte=["value"],ite={key:2};function lte(t,n,a,e,s,r){const o=H("BaseSettingsHeader"),i=H("NextInput"),l=H("WithLabel"),c=H("NextButton"),d=H("SectionLayout"),u=H("woot-loading-state"),m=H("AutoResolve"),h=H("AudioTranscription"),_=H("AccountId"),E=H("AccountDelete"),y=H("BuildInfo");return p(),g("div",ste,[v(o,{title:t.$t("GENERAL_SETTINGS.TITLE")},null,8,["title"]),f("div",ote,[v(d,{title:t.$t("GENERAL_SETTINGS.FORM.GENERAL_SECTION.TITLE"),description:t.$t("GENERAL_SETTINGS.FORM.GENERAL_SECTION.NOTE")},{default:z(()=>[t.uiFlags.isFetchingItem?O("v-if",!0):(p(),g("form",{key:0,class:"grid gap-4",onSubmit:n[4]||(n[4]=Ve((...b)=>r.updateAccount&&r.updateAccount(...b),["prevent"]))},[v(l,{"has-error":e.v$.name.$error,label:t.$t("GENERAL_SETTINGS.FORM.NAME.LABEL"),"error-message":t.$t("GENERAL_SETTINGS.FORM.NAME.ERROR")},{default:z(()=>[v(i,{modelValue:s.name,"onUpdate:modelValue":n[0]||(n[0]=b=>s.name=b),type:"text",class:"w-full",placeholder:t.$t("GENERAL_SETTINGS.FORM.NAME.PLACEHOLDER"),onBlur:e.v$.name.$touch},null,8,["modelValue","placeholder","onBlur"])]),_:1},8,["has-error","label","error-message"]),v(l,{"has-error":e.v$.locale.$error,label:t.$t("GENERAL_SETTINGS.FORM.LANGUAGE.LABEL"),"error-message":t.$t("GENERAL_SETTINGS.FORM.LANGUAGE.ERROR")},{default:z(()=>[ce(f("select",{"onUpdate:modelValue":n[1]||(n[1]=b=>s.locale=b),class:"!mb-0 text-sm"},[(p(!0),g(de,null,Ae(r.languagesSortedByCode,b=>(p(),g("option",{key:b.iso_639_1_code,value:b.iso_639_1_code},C(b.name),9,rte))),128))],512),[[Un,s.locale]])]),_:1},8,["has-error","label","error-message"]),r.featureCustomReplyDomainEnabled?(p(),L(l,{key:0,label:t.$t("GENERAL_SETTINGS.FORM.DOMAIN.LABEL")},{help:z(()=>[Oe(C(r.featureInboundEmailEnabled&&t.$t("GENERAL_SETTINGS.FORM.FEATURES.INBOUND_EMAIL_ENABLED"))+" "+C(r.featureCustomReplyDomainEnabled&&t.$t("GENERAL_SETTINGS.FORM.FEATURES.CUSTOM_EMAIL_DOMAIN_ENABLED")),1)]),default:z(()=>[v(i,{modelValue:s.domain,"onUpdate:modelValue":n[2]||(n[2]=b=>s.domain=b),type:"text",class:"w-full",placeholder:t.$t("GENERAL_SETTINGS.FORM.DOMAIN.PLACEHOLDER")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):O("v-if",!0),r.featureCustomReplyEmailEnabled?(p(),L(l,{key:1,label:t.$t("GENERAL_SETTINGS.FORM.SUPPORT_EMAIL.LABEL")},{default:z(()=>[v(i,{modelValue:s.supportEmail,"onUpdate:modelValue":n[3]||(n[3]=b=>s.supportEmail=b),type:"text",class:"w-full",placeholder:t.$t("GENERAL_SETTINGS.FORM.SUPPORT_EMAIL.PLACEHOLDER")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):O("v-if",!0),f("div",null,[v(c,{blue:"","is-loading":r.isUpdating,type:"submit"},{default:z(()=>[Oe(C(t.$t("GENERAL_SETTINGS.SUBMIT")),1)]),_:1},8,["is-loading"])])],32))]),_:1},8,["title","description"]),t.uiFlags.isFetchingItem?(p(),L(u,{key:0})):O("v-if",!0)]),r.showAutoResolutionConfig?(p(),L(m,{key:0})):O("v-if",!0),r.showAudioTranscriptionConfig?(p(),L(h,{key:1})):O("v-if",!0),v(_),!t.uiFlags.isFetchingItem&&t.isOnChatwootCloud?(p(),g("div",ite,[v(E)])):O("v-if",!0),v(y)])}const cte=G(ate,[["render",lte],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/account/Index.vue"]]),dte={__name:"SettingsWrapper",props:{keepAlive:{type:Boolean,default:!0}},setup(t,{expose:n}){n();const a={};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},ute={class:"flex flex-col w-full h-full m-0 p-6 sm:py-8 lg:px-16 overflow-auto bg-n-background font-inter"},pte={class:"flex items-start w-full max-w-6xl mx-auto"};function fte(t,n,a,e,s,r){const o=H("router-view");return p(),g("div",ute,[f("div",pte,[v(o,null,{default:z(({Component:i})=>[a.keepAlive?(p(),L(th,{key:0},[(p(),L(Da(i)))],1024)):(p(),L(Da(i),{key:1}))]),_:1})])])}const cs=G(dte,[["render",fte],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/SettingsWrapper.vue"]]),mte={routes:[{path:vt("accounts/:accountId/settings/general"),meta:{permissions:["administrator"]},component:cs,children:[{path:"",name:"general_settings_index",component:cte,meta:{permissions:["administrator"]}}]}]},hte={__name:"AddAgent",emits:["close"],setup(t,{expose:n,emit:a}){n();const e=a,s=Fe(),{t:r}=Q(),o=P(""),i=P(""),l=P("agent"),c={agentName:{required:Ge},agentEmail:{required:Ge,email:br},selectedRoleId:{required:Ge}},d=rt(c,{agentName:o,agentEmail:i,selectedRoleId:l}),u=le("agents/getUIFlags"),m=le("customRole/getCustomRoles"),h=S(()=>{const b=[{id:"administrator",name:"administrator",label:r("AGENT_MGMT.AGENT_TYPES.ADMINISTRATOR")},{id:"agent",name:"agent",label:r("AGENT_MGMT.AGENT_TYPES.AGENT")}],A=m.value.map(T=>({id:T.id,name:`custom_${T.id}`,label:T.name}));return[...b,...A]}),_=S(()=>h.value.find(b=>b.id===l.value||b.name===l.value)),y={emit:e,store:s,t:r,agentName:o,agentEmail:i,selectedRoleId:l,rules:c,v$:d,uiFlags:u,getCustomRoles:m,roles:h,selectedRole:_,addAgent:async()=>{var b;if(d.value.$touch(),!d.value.$invalid)try{const A={name:o.value,email:i.value};_.value.name.startsWith("custom_")?A.custom_role_id=_.value.id:A.role=_.value.name,await s.dispatch("agents/create",A),Z(r("AGENT_MGMT.ADD.API.SUCCESS_MESSAGE")),e("close")}catch(A){const{response:{data:{error:T="",attributes:I=[],message:N=""}={}}={}}=A;let x="";((b=A==null?void 0:A.response)==null?void 0:b.status)===422&&!I.includes("base")?x=r("AGENT_MGMT.ADD.API.EXIST_MESSAGE"):x=r("AGENT_MGMT.ADD.API.ERROR_MESSAGE"),Z(T||N||x)}},ref:P,computed:S,get useStore(){return Fe},get useMapGetter(){return le},get useI18n(){return Q},get useAlert(){return Z},get useVuelidate(){return rt},get required(){return Ge},get email(){return br},Button:Se};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}},_te={class:"flex flex-col h-auto overflow-auto"},gte={class:"w-full"},bte=["placeholder"],vte={class:"w-full"},Ete=["value"],Ste={key:0,class:"message"},Tte={class:"w-full"},Ate=["placeholder"],yte={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function Ite(t,n,a,e,s,r){const o=H("woot-modal-header");return p(),g("div",_te,[v(o,{"header-title":t.$t("AGENT_MGMT.ADD.TITLE"),"header-content":t.$t("AGENT_MGMT.ADD.DESC")},null,8,["header-title","header-content"]),f("form",{class:"flex flex-col items-start w-full",onSubmit:Ve(e.addAgent,["prevent"])},[f("div",gte,[f("label",{class:oe({error:e.v$.agentName.$error})},[Oe(C(t.$t("AGENT_MGMT.ADD.FORM.NAME.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[0]||(n[0]=i=>e.agentName=i),type:"text",placeholder:t.$t("AGENT_MGMT.ADD.FORM.NAME.PLACEHOLDER"),onInput:n[1]||(n[1]=(...i)=>e.v$.agentName.$touch&&e.v$.agentName.$touch(...i))},null,40,bte),[[Et,e.agentName]])],2)]),f("div",vte,[f("label",{class:oe({error:e.v$.selectedRoleId.$error})},[Oe(C(t.$t("AGENT_MGMT.ADD.FORM.AGENT_TYPE.LABEL"))+" ",1),ce(f("select",{"onUpdate:modelValue":n[2]||(n[2]=i=>e.selectedRoleId=i),onChange:n[3]||(n[3]=(...i)=>e.v$.selectedRoleId.$touch&&e.v$.selectedRoleId.$touch(...i))},[(p(!0),g(de,null,Ae(e.roles,i=>(p(),g("option",{key:i.id,value:i.id},C(i.label),9,Ete))),128))],544),[[Un,e.selectedRoleId]]),e.v$.selectedRoleId.$error?(p(),g("span",Ste,C(t.$t("AGENT_MGMT.ADD.FORM.AGENT_TYPE.ERROR")),1)):O("v-if",!0)],2)]),f("div",Tte,[f("label",{class:oe({error:e.v$.agentEmail.$error})},[Oe(C(t.$t("AGENT_MGMT.ADD.FORM.EMAIL.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[4]||(n[4]=i=>e.agentEmail=i),type:"email",placeholder:t.$t("AGENT_MGMT.ADD.FORM.EMAIL.PLACEHOLDER"),onInput:n[5]||(n[5]=(...i)=>e.v$.agentEmail.$touch&&e.v$.agentEmail.$touch(...i))},null,40,Ate),[[Et,e.agentEmail]])],2)]),f("div",yte,[v(e.Button,{faded:"",slate:"",type:"reset",label:t.$t("AGENT_MGMT.ADD.CANCEL_BUTTON_TEXT"),onClick:n[6]||(n[6]=Ve(i=>e.emit("close"),["prevent"]))},null,8,["label"]),v(e.Button,{type:"submit",label:t.$t("AGENT_MGMT.ADD.FORM.SUBMIT"),disabled:e.v$.$invalid||e.uiFlags.isCreating,"is-loading":e.uiFlags.isCreating},null,8,["label","disabled","is-loading"])])],32)])}const Cte=G(hte,[["render",Ite],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/agents/AddAgent.vue"]]),Ote={__name:"EditAgent",props:{id:{type:Number,required:!0},name:{type:String,required:!0},email:{type:String,default:""},type:{type:String,default:""},availability:{type:String,default:""},provider:{type:String,default:""},customRoleId:{type:Number,default:null}},emits:["close"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{AVAILABILITY_STATUS_KEYS:r}=gt,o=Fe(),{t:i}=Q(),l=P(e.name),c=P(e.availability),d=P(e.customRoleId||e.type),u=P({email:e.email}),m={agentName:{required:Ge,minLength:Rt(1)},selectedRoleId:{required:Ge},agentAvailability:{required:Ge}},h=rt(m,{agentName:l,selectedRoleId:d,agentAvailability:c}),_=S(()=>`${i("AGENT_MGMT.EDIT.TITLE")} - ${e.name}`),E=le("agents/getUIFlags"),y=le("customRole/getCustomRoles"),b=S(()=>{const M=[{id:"administrator",name:"administrator",label:i("AGENT_MGMT.AGENT_TYPES.ADMINISTRATOR")},{id:"agent",name:"agent",label:i("AGENT_MGMT.AGENT_TYPES.AGENT")}],w=y.value.map(D=>({id:D.id,name:`custom_${D.id}`,label:D.name}));return[...M,...w]}),A=S(()=>b.value.find(M=>M.id===d.value||M.name===d.value)),T=S(()=>[i("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.ONLINE"),i("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.BUSY"),i("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.OFFLINE")]),I=S(()=>T.value.map((M,w)=>({label:M,value:r[w],disabled:e.availability===r[w]}))),R={props:e,emit:s,AVAILABILITY_STATUS_KEYS:r,store:o,t:i,agentName:l,agentAvailability:c,selectedRoleId:d,agentCredentials:u,rules:m,v$:h,pageTitle:_,uiFlags:E,getCustomRoles:y,roles:b,selectedRole:A,statusList:T,availabilityStatuses:I,editAgent:async()=>{if(h.value.$touch(),!h.value.$invalid)try{const M={id:e.id,name:l.value,availability:c.value};A.value.name.startsWith("custom_")?M.custom_role_id=A.value.id:(M.role=A.value.name,M.custom_role_id=null),await o.dispatch("agents/update",M),Z(i("AGENT_MGMT.EDIT.API.SUCCESS_MESSAGE")),s("close")}catch{Z(i("AGENT_MGMT.EDIT.API.ERROR_MESSAGE"))}},resetPassword:async()=>{try{await Pi.resetPassword(u.value),Z(i("AGENT_MGMT.EDIT.PASSWORD_RESET.ADMIN_SUCCESS_MESSAGE"))}catch{Z(i("AGENT_MGMT.EDIT.PASSWORD_RESET.ERROR_MESSAGE"))}},ref:P,computed:S,get useVuelidate(){return rt},get required(){return Ge},get minLength(){return Rt},get useStore(){return Fe},get useMapGetter(){return le},get useI18n(){return Q},get useAlert(){return Z},Button:Se,get Auth(){return Pi},get wootConstants(){return gt}};return Object.defineProperty(R,"__isScriptSetup",{enumerable:!1,value:!0}),R}},Nte={class:"flex flex-col h-auto overflow-auto"},xte={class:"w-full"},Rte=["placeholder"],wte={class:"w-full"},Mte=["value"],Lte={key:0,class:"message"},Dte={class:"w-full"},Pte=["value"],kte={key:0,class:"message"},Bte={class:"flex flex-row justify-start w-full gap-2 px-0 py-2"},Fte={class:"w-[50%] ltr:text-left rtl:text-right"},Ute={class:"w-[50%] flex justify-end items-center gap-2"};function $te(t,n,a,e,s,r){const o=H("woot-modal-header");return p(),g("div",Nte,[v(o,{"header-title":e.pageTitle},null,8,["header-title"]),f("form",{class:"w-full",onSubmit:Ve(e.editAgent,["prevent"])},[f("div",xte,[f("label",{class:oe({error:e.v$.agentName.$error})},[Oe(C(t.$t("AGENT_MGMT.EDIT.FORM.NAME.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[0]||(n[0]=i=>e.agentName=i),type:"text",placeholder:t.$t("AGENT_MGMT.EDIT.FORM.NAME.PLACEHOLDER"),onInput:n[1]||(n[1]=(...i)=>e.v$.agentName.$touch&&e.v$.agentName.$touch(...i))},null,40,Rte),[[Et,e.agentName]])],2)]),f("div",wte,[f("label",{class:oe({error:e.v$.selectedRoleId.$error})},[Oe(C(t.$t("AGENT_MGMT.EDIT.FORM.AGENT_TYPE.LABEL"))+" ",1),ce(f("select",{"onUpdate:modelValue":n[2]||(n[2]=i=>e.selectedRoleId=i),onChange:n[3]||(n[3]=(...i)=>e.v$.selectedRoleId.$touch&&e.v$.selectedRoleId.$touch(...i))},[(p(!0),g(de,null,Ae(e.roles,i=>(p(),g("option",{key:i.id,value:i.id},C(i.label),9,Mte))),128))],544),[[Un,e.selectedRoleId]]),e.v$.selectedRoleId.$error?(p(),g("span",Lte,C(t.$t("AGENT_MGMT.EDIT.FORM.AGENT_TYPE.ERROR")),1)):O("v-if",!0)],2)]),f("div",Dte,[f("label",{class:oe({error:e.v$.agentAvailability.$error})},[Oe(C(t.$t("PROFILE_SETTINGS.FORM.AVAILABILITY.LABEL"))+" ",1),ce(f("select",{"onUpdate:modelValue":n[4]||(n[4]=i=>e.agentAvailability=i),onChange:n[5]||(n[5]=(...i)=>e.v$.agentAvailability.$touch&&e.v$.agentAvailability.$touch(...i))},[(p(!0),g(de,null,Ae(e.availabilityStatuses,i=>(p(),g("option",{key:i.value,value:i.value},C(i.label),9,Pte))),128))],544),[[Un,e.agentAvailability]]),e.v$.agentAvailability.$error?(p(),g("span",kte,C(t.$t("AGENT_MGMT.EDIT.FORM.AGENT_AVAILABILITY.ERROR")),1)):O("v-if",!0)],2)]),f("div",Bte,[f("div",Fte,[a.provider!=="saml"?(p(),L(e.Button,{key:0,ghost:"",type:"button",icon:"i-lucide-lock-keyhole",class:"!px-2",label:t.$t("AGENT_MGMT.EDIT.PASSWORD_RESET.ADMIN_RESET_BUTTON"),onClick:Ve(e.resetPassword,["prevent"])},null,8,["label"])):O("v-if",!0)]),f("div",Ute,[v(e.Button,{faded:"",slate:"",type:"reset",label:t.$t("AGENT_MGMT.EDIT.CANCEL_BUTTON_TEXT"),onClick:n[6]||(n[6]=Ve(i=>e.emit("close"),["prevent"]))},null,8,["label"]),v(e.Button,{type:"submit",label:t.$t("AGENT_MGMT.EDIT.FORM.SUBMIT"),disabled:e.v$.$invalid||e.uiFlags.isUpdating,"is-loading":e.uiFlags.isUpdating},null,8,["label","disabled","is-loading"])])])],32)])}const Gte=G(Ote,[["render",$te],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/agents/EditAgent.vue"]]),Vte={__name:"SettingsLayout",props:{isLoading:{type:Boolean,default:!1},noRecordsFound:{type:Boolean,default:!1},loadingMessage:{type:String,default:""},noRecordsMessage:{type:String,default:""}},setup(t,{expose:n}){n();const a={};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},Hte={class:"flex flex-col w-full h-full gap-8 font-inter"},jte={key:1,class:"flex-1 py-20 text-n-slate-12 flex items-center justify-center text-base"};function Wte(t,n,a,e,s,r){const o=H("woot-loading-state");return p(),g("div",Hte,[qe(t.$slots,"header"),O(" Added to render any templates that should be rendered before body "),f("main",null,[qe(t.$slots,"preBody"),a.isLoading?qe(t.$slots,"loading",{key:0},()=>[v(o,{message:a.loadingMessage},null,8,["message"])]):a.noRecordsFound?(p(),g("p",jte,C(a.noRecordsMessage),1)):qe(t.$slots,"body",{key:2}),O(" Do not delete the slot below. It is required to render anything that is not defined in the above slots. "),qe(t.$slots,"default")])])}const Ha=G(Vte,[["render",Wte],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/SettingsLayout.vue"]]),zte={__name:"Index",setup(t,{expose:n}){n();const a=xt(),e=Fe(),{t:s}=Q(),r=P({}),o=P(!1),i=P(!1),l=P(!1),c=P({message:""}),d=P({}),u=S(()=>`${s("AGENT_MGMT.DELETE.CONFIRM.YES")} ${d.value.name}`),m=S(()=>`${s("AGENT_MGMT.DELETE.CONFIRM.NO")} ${d.value.name}`),h=S(()=>` ${d.value.name}?`),_=S(()=>a["agents/getAgents"].value),E=S(()=>a["agents/getUIFlags"].value),y=S(()=>a.getCurrentUserID.value),b=le("customRole/getCustomRoles");Pe(()=>{e.dispatch("agents/get"),e.dispatch("customRole/getCustomRole")});const A=U=>b.value.find(J=>J.id===U.custom_role_id),T=U=>{if(!U.custom_role_id)return s(`AGENT_MGMT.AGENT_TYPES.${U.role.toUpperCase()}`);const J=A(U);return J?J.name:""},I=U=>{if(!U.custom_role_id)return[];const J=A(U);return(J==null?void 0:J.permissions)||[]},N=S(()=>_.value.filter(U=>U.role==="administrator"&&U.confirmed)),x=U=>y.value!==U.id,R=U=>y.value===U.id?!1:U.confirmed&&U.role==="administrator"?N.value.length!==1:!0,M=U=>{r.value[d.value.id]=!1,d.value={},c.value.message=U,Z(U)},w=()=>{o.value=!0},D=()=>{o.value=!1},B=U=>{l.value=!0,d.value=U},k=()=>{l.value=!1},V=U=>{i.value=!0,d.value=U},F=()=>{i.value=!1},$=async U=>{try{await e.dispatch("agents/delete",U),M(s("AGENT_MGMT.DELETE.API.SUCCESS_MESSAGE"))}catch{M(s("AGENT_MGMT.DELETE.API.ERROR_MESSAGE"))}},j={getters:a,store:e,t:s,loading:r,showAddPopup:o,showDeletePopup:i,showEditPopup:l,agentAPI:c,currentAgent:d,deleteConfirmText:u,deleteRejectText:m,deleteMessage:h,agentList:_,uiFlags:E,currentUserId:y,customRoles:b,findCustomRole:A,getAgentRoleName:T,getAgentRolePermissions:I,verifiedAdministrators:N,showEditAction:x,showDeleteAction:R,showAlertMessage:M,openAddPopup:w,hideAddPopup:D,openEditPopup:B,hideEditPopup:k,openDeletePopup:V,closeDeletePopup:F,deleteAgent:$,confirmDeletion:()=>{r.value[d.value.id]=!0,F(),$(d.value.id)},get useAlert(){return Z},computed:S,onMounted:Pe,ref:P,Avatar:qt,get useI18n(){return Q},get useStoreGetters(){return xt},get useStore(){return Fe},get useMapGetter(){return le},AddAgent:Cte,EditAgent:Gte,BaseSettingsHeader:Va,SettingsLayout:Ha,Button:Se};return Object.defineProperty(j,"__isScriptSetup",{enumerable:!1,value:!0}),j}},Yte={class:"divide-y divide-n-weak"},Kte={class:"divide-y divide-n-weak text-n-slate-11"},Xte={class:"py-4 ltr:pr-4 rtl:pl-4"},qte={class:"flex flex-row items-center gap-4"},Zte={class:"block font-medium capitalize"},Qte={class:"relative py-4 ltr:pr-4 rtl:pl-4"},Jte={class:"flex flex-col gap-1 p-4"},ene={class:"font-semibold"},tne={class:"pl-4 mb-0 list-disc"},nne={class:"py-4 ltr:pr-4 rtl:pl-4"},ane={key:0},sne={key:1},one={class:"py-4"},rne={class:"flex justify-end gap-1"};function ine(t,n,a,e,s,r){const o=H("woot-modal"),i=H("woot-delete-modal"),l=nt("tooltip");return p(),L(e.SettingsLayout,{"is-loading":e.uiFlags.isFetching,"loading-message":t.$t("AGENT_MGMT.LOADING"),"no-records-found":!e.agentList.length,"no-records-message":t.$t("AGENT_MGMT.LIST.404")},{header:z(()=>[v(e.BaseSettingsHeader,{title:t.$t("AGENT_MGMT.HEADER"),description:t.$t("AGENT_MGMT.DESCRIPTION"),"link-text":t.$t("AGENT_MGMT.LEARN_MORE"),"feature-name":"agents"},{actions:z(()=>[v(e.Button,{icon:"i-lucide-circle-plus",label:t.$t("AGENT_MGMT.HEADER_BTN_TXT"),onClick:e.openAddPopup},null,8,["label"])]),_:1},8,["title","description","link-text"])]),body:z(()=>[f("table",Yte,[f("tbody",Kte,[(p(!0),g(de,null,Ae(e.agentList,(c,d)=>(p(),g("tr",{key:c.email},[f("td",Xte,[f("div",qte,[v(e.Avatar,{src:c.thumbnail,name:c.name,status:c.availability_status,size:40,"hide-offline-status":"","rounded-full":""},null,8,["src","name","status"]),f("div",null,[f("span",Zte,C(c.name),1),f("span",null,C(c.email),1)])])]),f("td",Qte,[f("span",{class:oe(["block font-medium w-fit",{"hover:text-gray-900 group cursor-pointer":c.custom_role_id}])},[Oe(C(e.getAgentRoleName(c))+" ",1),f("div",{class:oe(["absolute left-0 z-10 hidden max-w-[300px] w-auto bg-white rounded-xl border border-n-weak shadow-lg top-14 md:top-12 dark:bg-n-solid-2",{"group-hover:block":c.custom_role_id}])},[f("div",Jte,[f("span",ene,C(t.$t("AGENT_MGMT.LIST.AVAILABLE_CUSTOM_ROLE")),1),f("ul",tne,[(p(!0),g(de,null,Ae(e.getAgentRolePermissions(c),u=>(p(),g("li",{key:u,class:"font-normal"},C(t.$t(`CUSTOM_ROLE.PERMISSIONS.${u.toUpperCase()}`)),1))),128))])])],2)],2)]),f("td",nne,[c.confirmed?(p(),g("span",ane,C(t.$t("AGENT_MGMT.LIST.VERIFIED")),1)):O("v-if",!0),c.confirmed?O("v-if",!0):(p(),g("span",sne,C(t.$t("AGENT_MGMT.LIST.VERIFICATION_PENDING")),1))]),f("td",one,[f("div",rne,[e.showEditAction(c)?ce((p(),L(e.Button,{key:0,icon:"i-lucide-pen",slate:"",xs:"",faded:"",onClick:u=>e.openEditPopup(c)},null,8,["onClick"])),[[l,t.$t("AGENT_MGMT.EDIT.BUTTON_TEXT"),void 0,{top:!0}]]):O("v-if",!0),e.showDeleteAction(c)?ce((p(),L(e.Button,{key:1,icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"","is-loading":e.loading[c.id],onClick:u=>e.openDeletePopup(c,d)},null,8,["is-loading","onClick"])),[[l,t.$t("AGENT_MGMT.DELETE.BUTTON_TEXT"),void 0,{top:!0}]]):O("v-if",!0)])])]))),128))])])]),default:z(()=>[v(o,{show:e.showAddPopup,"onUpdate:show":n[0]||(n[0]=c=>e.showAddPopup=c),"on-close":e.hideAddPopup},{default:z(()=>[v(e.AddAgent,{onClose:e.hideAddPopup})]),_:1},8,["show"]),v(o,{show:e.showEditPopup,"onUpdate:show":n[1]||(n[1]=c=>e.showEditPopup=c),"on-close":e.hideEditPopup},{default:z(()=>[e.showEditPopup?(p(),L(e.EditAgent,{key:0,id:e.currentAgent.id,name:e.currentAgent.name,provider:e.currentAgent.provider,type:e.currentAgent.role,email:e.currentAgent.email,availability:e.currentAgent.availability_status,"custom-role-id":e.currentAgent.custom_role_id,onClose:e.hideEditPopup},null,8,["id","name","provider","type","email","availability","custom-role-id"])):O("v-if",!0)]),_:1},8,["show"]),v(i,{show:e.showDeletePopup,"onUpdate:show":n[2]||(n[2]=c=>e.showDeletePopup=c),"on-close":e.closeDeletePopup,"on-confirm":e.confirmDeletion,title:t.$t("AGENT_MGMT.DELETE.CONFIRM.TITLE"),message:t.$t("AGENT_MGMT.DELETE.CONFIRM.MESSAGE"),"message-value":e.deleteMessage,"confirm-text":e.deleteConfirmText,"reject-text":e.deleteRejectText},null,8,["show","title","message","message-value","confirm-text","reject-text"])]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"])}const lne=G(zte,[["render",ine],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/agents/Index.vue"]]),cne={routes:[{path:vt("accounts/:accountId/settings/agents"),component:cs,children:[{path:"",redirect:t=>({name:"agent_list",params:t.params})},{path:"list",name:"agent_list",component:lne,meta:{featureFlag:pt.AGENT_MANAGEMENT,permissions:["administrator"]}}]}]},dne={__name:"CardLayout",props:{layout:{type:String,default:"col"},selectable:{type:Boolean,default:!1}},emits:["click"],setup(t,{expose:n,emit:a}){n();const e=a,r={emit:e,handleClick:()=>{e("click")}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},une={class:"flex flex-col w-full shadow outline-1 outline outline-n-container group/cardLayout rounded-2xl bg-n-solid-2"};function pne(t,n,a,e,s,r){return p(),g("div",une,[f("div",{class:oe(["flex w-full gap-3 py-5",[a.layout==="col"?"flex-col":"flex-row justify-between items-center",a.selectable?"px-10 py-6":"px-6"]]),onClick:e.handleClick},[qe(t.$slots,"default")],2),qe(t.$slots,"after")])}const ho=G(dne,[["render",pne],["__file","/app/app/javascript/dashboard/components-next/CardLayout.vue"]]),fne={__name:"AssignmentCard",props:{title:{type:String,default:""},description:{type:String,default:""},features:{type:Array,default:()=>[]}},emits:["click"],setup(t,{expose:n,emit:a}){n();const e=a,r={emit:e,handleClick:()=>{e("click")},Icon:Bt,Button:Se,CardLayout:ho};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},mne={class:"flex flex-col items-start gap-2"},hne={class:"flex justify-between w-full items-center"},_ne={class:"text-n-slate-12 text-base font-medium"},gne={class:"text-n-slate-11 text-sm mb-0"},bne={class:"flex flex-col items-start gap-3 mt-3"};function vne(t,n,a,e,s,r){return p(),L(e.CardLayout,{class:"[&>div]:px-5 cursor-pointer",onClick:e.handleClick},{default:z(()=>[f("div",mne,[f("div",hne,[f("h3",_ne,C(a.title),1),v(e.Button,{xs:"",slate:"",ghost:"",icon:"i-lucide-chevron-right",onClick:Ve(e.handleClick,["stop"])})]),f("p",gne,C(a.description),1)]),f("ul",bne,[(p(!0),g(de,null,Ae(a.features,o=>(p(),g("li",{key:o.id,class:"flex items-center gap-3 text-sm"},[v(e.Icon,{icon:o.icon,class:"text-n-slate-11 size-4 flex-shrink-0"},null,8,["icon"]),Oe(" "+C(o.label),1)]))),128))])]),_:1})}const Ene=G(fne,[["render",vne],["__file","/app/app/javascript/dashboard/components-next/AssignmentPolicy/AssignmentCard/AssignmentCard.vue"]]),Sne={__name:"Index",setup(t,{expose:n}){n();const a=ft(),{t:e}=Q(),s=S(()=>[{key:"agent_assignment_policy_index",title:e("ASSIGNMENT_POLICY.INDEX.ASSIGNMENT_POLICY.TITLE"),description:e("ASSIGNMENT_POLICY.INDEX.ASSIGNMENT_POLICY.DESCRIPTION"),features:[{icon:"i-lucide-circle-fading-arrow-up",label:e("ASSIGNMENT_POLICY.INDEX.ASSIGNMENT_POLICY.FEATURES.0")},{icon:"i-lucide-scale",label:e("ASSIGNMENT_POLICY.INDEX.ASSIGNMENT_POLICY.FEATURES.1")},{icon:"i-lucide-inbox",label:e("ASSIGNMENT_POLICY.INDEX.ASSIGNMENT_POLICY.FEATURES.2")}]},{key:"agent_capacity_policy_index",title:e("ASSIGNMENT_POLICY.INDEX.AGENT_CAPACITY_POLICY.TITLE"),description:e("ASSIGNMENT_POLICY.INDEX.AGENT_CAPACITY_POLICY.DESCRIPTION"),features:[{icon:"i-lucide-glass-water",label:e("ASSIGNMENT_POLICY.INDEX.AGENT_CAPACITY_POLICY.FEATURES.0")},{icon:"i-lucide-circle-minus",label:e("ASSIGNMENT_POLICY.INDEX.AGENT_CAPACITY_POLICY.FEATURES.1")},{icon:"i-lucide-users-round",label:e("ASSIGNMENT_POLICY.INDEX.AGENT_CAPACITY_POLICY.FEATURES.2")}]}]),o={router:a,t:e,agentAssignments:s,handleClick:i=>{a.push({name:i})},computed:S,get useI18n(){return Q},get useRouter(){return ft},BaseSettingsHeader:Va,SettingsLayout:Ha,AssignmentCard:Ene};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},Tne={class:"grid grid-cols-1 2xl:grid-cols-2 gap-6"};function Ane(t,n,a,e,s,r){return p(),L(e.SettingsLayout,{"no-records-found":!1,class:"gap-10"},{header:z(()=>[v(e.BaseSettingsHeader,{title:t.$t("ASSIGNMENT_POLICY.INDEX.HEADER.TITLE"),description:t.$t("ASSIGNMENT_POLICY.INDEX.HEADER.DESCRIPTION"),"feature-name":"assignment-policy"},null,8,["title","description"])]),body:z(()=>[f("div",Tne,[(p(!0),g(de,null,Ae(e.agentAssignments,o=>(p(),L(e.AssignmentCard,{key:o.key,title:o.title,description:o.description,features:o.features,onClick:i=>e.handleClick(o.key)},null,8,["title","description","features","onClick"]))),128))])]),_:1})}const yne=G(Sne,[["render",Ane],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/assignmentPolicy/Index.vue"]]),Ine={__name:"Breadcrumb",props:{items:{type:Array,required:!0}},emits:["click"],setup(t,{expose:n,emit:a}){n();const e=a,{t:s}=Q(),o={emit:e,t:s,onClick:(i,l)=>{e("click",i,l)},get useI18n(){return Q},Icon:Bt};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},Cne=["aria-label"],One={class:"flex items-center mb-0 min-w-0"},Nne=["onClick"],xne={class:"min-w-0 truncate"},Rne={class:"text-sm truncate text-n-slate-12 min-w-0 block"};function wne(t,n,a,e,s,r){return p(),g("nav",{"aria-label":e.t("BREADCRUMB.ARIA_LABEL"),class:"flex items-center h-8 min-w-0"},[f("ol",One,[(p(!0),g(de,null,Ae(a.items,(o,i)=>(p(),g("li",{key:i,class:oe(["flex items-center",{"min-w-0 flex-1":i===a.items.length-1}])},[i>0?(p(),L(e.Icon,{key:0,icon:"i-lucide-chevron-right",class:"flex-shrink-0 mx-2 size-4 text-n-slate-11 dark:text-n-slate-11"})):O("v-if",!0),O(" Render as button for all except the last item "),i!==a.items.length-1?(p(),g("button",{key:1,class:"inline-flex items-center justify-center min-w-0 gap-2 p-0 text-sm font-medium transition-all duration-200 ease-in-out border-0 rounded-lg text-n-slate-11 hover:text-n-slate-12 outline-transparent max-w-56",onClick:l=>e.onClick(o,i)},[f("span",xne,C(o.label),1)],8,Nne)):(p(),g(de,{key:2},[O(" The last breadcrumb item is plain text "),f("span",Rne,C(o.emoji?o.emoji:"")+" "+C(o.label),1)],2112))],2))),128))])],8,Cne)}const qi=G(Ine,[["render",wne],["__file","/app/app/javascript/dashboard/components-next/breadcrumb/Breadcrumb.vue"]]),Mne={__name:"CardPopover",props:{count:{type:Number,default:0},title:{type:String,default:""},icon:{type:String,default:""},items:{type:Array,default:()=>[]},isFetching:{type:Boolean,default:!1}},emits:["fetch"],setup(t,{expose:n,emit:a}){n();const e=a,[s,r]=$t(),l={emit:e,showPopover:s,togglePopover:r,handleButtonClick:()=>{e("fetch"),r(!s.value)},handleClickOutside:()=>{s.value&&r(!1)},get useToggle(){return $t},get vOnClickOutside(){return Ga},Avatar:qt,Icon:Bt,Spinner:$n};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}},Lne={class:"relative flex items-center group"},Dne={class:"text-n-slate-12 text-sm"},Pne={key:1,class:"top-full mt-1 ltr:left-0 rtl:right-0 z-50 flex flex-col items-start absolute bg-n-alpha-3 backdrop-blur-[50px] border-0 gap-4 outline outline-1 outline-n-weak p-3 rounded-xl max-w-96 min-w-80 max-h-[20rem] overflow-y-auto"},kne={class:"flex items-center gap-2.5 pb-2"},Bne={class:"text-sm text-n-slate-12 font-medium"},Fne={key:0,class:"flex items-center justify-center py-3 w-full text-n-slate-11"},Une={key:1,class:"flex flex-col gap-4 w-full"},$ne={class:"flex items-center gap-2 min-w-0 w-full"},Gne={class:"flex items-center gap-1 min-w-0 flex-1"},Vne=["title"],Hne={key:0,class:"text-sm text-n-slate-11 flex-shrink-0"},jne={key:0,class:"text-sm text-n-slate-11 flex-shrink-0"};function Wne(t,n,a,e,s,r){return ce((p(),g("div",Lne,[a.count?(p(),g("button",{key:0,class:"h-6 px-2 rounded-md bg-n-alpha-2 gap-1.5 flex items-center",onClick:n[0]||(n[0]=o=>e.handleButtonClick())},[v(e.Icon,{icon:a.icon,class:"size-3.5 text-n-slate-12"},null,8,["icon"]),f("span",Dne,C(a.count),1)])):O("v-if",!0),e.showPopover?(p(),g("div",Pne,[f("div",kne,[v(e.Icon,{icon:a.icon,class:"size-3.5"},null,8,["icon"]),f("span",Bne,C(a.title),1)]),a.isFetching?(p(),g("div",Fne,[v(e.Spinner)])):(p(),g("div",Une,[(p(!0),g(de,null,Ae(a.items,o=>(p(),g("div",{key:o.id,class:"flex items-center justify-between gap-2 min-w-0 w-full"},[f("div",$ne,[o.icon?(p(),L(e.Icon,{key:0,icon:o.icon,class:"size-4 text-n-slate-12 flex-shrink-0"},null,8,["icon"])):(p(),L(e.Avatar,{key:1,title:o.name,src:o.avatarUrl,name:o.name,size:20,"rounded-full":""},null,8,["title","src","name"])),f("div",Gne,[f("span",{title:o.name,class:"text-sm text-n-slate-12 truncate min-w-0"},C(o.name),9,Vne),o.id?(p(),g("span",Hne,C(`#${o.id}`),1)):O("v-if",!0)])]),o.email?(p(),g("span",jne,C(o.email),1)):O("v-if",!0)]))),128))]))])):O("v-if",!0)])),[[e.vOnClickOutside,e.handleClickOutside]])}const Bw=G(Mne,[["render",Wne],["__file","/app/app/javascript/dashboard/components-next/AssignmentPolicy/components/CardPopover.vue"]]),zne={__name:"AssignmentPolicyCard",props:{id:{type:Number,required:!0},name:{type:String,default:""},description:{type:String,default:""},assignmentOrder:{type:String,default:""},conversationPriority:{type:String,default:""},assignedInboxCount:{type:Number,default:0},enabled:{type:Boolean,default:!1},inboxes:{type:Array,default:()=>[]},isFetchingInboxes:{type:Boolean,default:!1}},emits:["edit","delete","fetchInboxes"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=S(()=>e.inboxes.map(h=>({name:h.name,id:h.id,icon:vs(h.channelType,h.medium,"line")}))),i=S(()=>E_(e.assignmentOrder)),l=S(()=>E_(e.conversationPriority)),m={props:e,emit:s,t:r,inboxes:o,order:i,priority:l,handleEdit:()=>{s("edit",e.id)},handleDelete:()=>{s("delete",e.id)},handleFetchInboxes:()=>{var h;((h=e.inboxes)==null?void 0:h.length)>0||s("fetchInboxes",e.id)},computed:S,get useI18n(){return Q},get getInboxIconByType(){return vs},get formatToTitleCase(){return E_},Button:Se,CardLayout:ho,CardPopover:Bw};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}},Yne={class:"flex flex-col gap-2 relative justify-between w-full"},Kne={class:"flex items-center gap-3 justify-between w-full"},Xne={class:"flex items-center gap-3"},qne={class:"text-base font-medium text-n-slate-12 line-clamp-1"},Zne={class:"flex items-center gap-2"},Qne={class:"flex items-center rounded-md bg-n-alpha-2 h-6 px-2"},Jne={class:"flex items-center gap-2"},eae={key:0,class:"w-px h-2.5 bg-n-slate-5"},tae={class:"text-n-slate-11 text-sm line-clamp-1 mb-0 py-1"},nae={class:"flex items-center gap-3 py-1.5"},aae={key:0,class:"text-n-slate-11 text-sm"},sae={class:"text-n-slate-12"},oae={key:1,class:"w-px h-3 bg-n-strong"},rae={key:2,class:"text-n-slate-11 text-sm"},iae={class:"text-n-slate-12"};function lae(t,n,a,e,s,r){return p(),L(e.CardLayout,{class:"[&>div]:px-5"},{default:z(()=>[f("div",Yne,[f("div",Kne,[f("div",Xne,[f("h3",qne,C(a.name),1),f("div",Zne,[f("div",Qne,[f("span",{class:oe(["text-xs",a.enabled?"text-n-teal-11":"text-n-slate-12"])},C(a.enabled?e.t("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.INDEX.CARD.ACTIVE"):e.t("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.INDEX.CARD.INACTIVE")),3)]),v(e.CardPopover,{title:e.t("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.INDEX.CARD.POPOVER"),icon:"i-lucide-inbox",count:a.assignedInboxCount,items:e.inboxes,"is-fetching":a.isFetchingInboxes,onFetch:e.handleFetchInboxes},null,8,["title","count","items","is-fetching"])])]),f("div",Jne,[v(e.Button,{label:e.t("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.INDEX.CARD.EDIT"),sm:"",slate:"",link:"",class:"px-2",onClick:e.handleEdit},null,8,["label"]),e.order?(p(),g("div",eae)):O("v-if",!0),v(e.Button,{icon:"i-lucide-trash",sm:"",slate:"",ghost:"",onClick:e.handleDelete})])]),f("p",tae,C(a.description),1),f("div",nae,[e.order?(p(),g("span",aae,[Oe(C(`${e.t("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.INDEX.CARD.ORDER")}:`)+" ",1),f("span",sae,C(e.order),1)])):O("v-if",!0),e.order?(p(),g("div",oae)):O("v-if",!0),e.priority?(p(),g("span",rae,[Oe(C(`${e.t("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.INDEX.CARD.PRIORITY")}:`)+" ",1),f("span",iae,C(e.priority),1)])):O("v-if",!0)])])]),_:1})}const cae=G(zne,[["render",lae],["__file","/app/app/javascript/dashboard/components-next/AssignmentPolicy/AssignmentPolicyCard/AssignmentPolicyCard.vue"]]),dae={__name:"ConfirmDeletePolicyDialog",emits:["delete"],setup(t,{expose:n,emit:a}){const e=a,{t:s}=Q(),r=P(null),o=P(null),i=u=>{o.value=u,r.value.open()},l=()=>{r.value.close()},c=()=>{e("delete",o.value)};n({openDialog:i,closeDialog:l});const d={emit:e,t:s,dialogRef:r,currentPolicyId:o,openDialog:i,closeDialog:l,handleDialogConfirm:c,ref:P,get useI18n(){return Q},Dialog:la};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}};function uae(t,n,a,e,s,r){return p(),L(e.Dialog,{ref:"dialogRef",type:"alert",title:e.t("ASSIGNMENT_POLICY.DELETE_POLICY.TITLE"),description:e.t("ASSIGNMENT_POLICY.DELETE_POLICY.DESCRIPTION"),"confirm-button-label":e.t("ASSIGNMENT_POLICY.DELETE_POLICY.CONFIRM_BUTTON_LABEL"),"cancel-button-label":e.t("ASSIGNMENT_POLICY.DELETE_POLICY.CANCEL_BUTTON_LABEL"),onConfirm:e.handleDialogConfirm},null,8,["title","description","confirm-button-label","cancel-button-label"])}const Fw=G(dae,[["render",uae],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/assignmentPolicy/pages/components/ConfirmDeletePolicyDialog.vue"]]),pae={__name:"AgentAssignmentIndexPage",setup(t,{expose:n}){n();const a=Fe(),{t:e}=Q(),s=ft(),r=le("assignmentPolicies/getAssignmentPolicies"),o=le("assignmentPolicies/getUIFlags"),i=le("assignmentPolicies/getInboxUiFlags"),l=P(null),c=S(()=>[{label:e("ASSIGNMENT_POLICY.INDEX.HEADER.TITLE"),routeName:"assignment_policy_index"},{label:e("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.INDEX.HEADER.TITLE")}]),d=b=>{s.push({name:b.routeName})},u=()=>{s.push({name:"agent_assignment_policy_create"})},m=b=>{s.push({name:"agent_assignment_policy_edit",params:{id:b}})},h=b=>{i.value.isFetching||a.dispatch("assignmentPolicies/getInboxes",b)},_=b=>{l.value.openDialog(b)},E=async b=>{try{await a.dispatch("assignmentPolicies/delete",b),Z(e("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.DELETE_POLICY.SUCCESS_MESSAGE")),l.value.closeDialog()}catch{Z(e("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.DELETE_POLICY.ERROR_MESSAGE"))}};Pe(()=>{a.dispatch("assignmentPolicies/get")});const y={store:a,t:e,router:s,agentAssignmentsPolicies:r,uiFlags:o,inboxUiFlags:i,confirmDeletePolicyDialogRef:l,breadcrumbItems:c,handleBreadcrumbClick:d,onClickCreatePolicy:u,onClickEditPolicy:m,handleFetchInboxes:h,handleDelete:_,handleDeletePolicy:E,computed:S,onMounted:Pe,ref:P,get useI18n(){return Q},get useStore(){return Fe},get useMapGetter(){return le},get useRouter(){return ft},get useAlert(){return Z},Breadcrumb:qi,Button:Se,SettingsLayout:Ha,AssignmentPolicyCard:cae,ConfirmDeletePolicyDialog:Fw};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}},fae={class:"flex items-center gap-2 w-full justify-between"},mae={class:"flex flex-col gap-4 pt-8"};function hae(t,n,a,e,s,r){return p(),L(e.SettingsLayout,{"is-loading":e.uiFlags.isFetching,"no-records-found":e.agentAssignmentsPolicies.length===0,"no-records-message":t.$t("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.INDEX.NO_RECORDS_FOUND")},{header:z(()=>[f("div",fae,[v(e.Breadcrumb,{items:e.breadcrumbItems,onClick:e.handleBreadcrumbClick},null,8,["items"]),v(e.Button,{icon:"i-lucide-plus",md:"",onClick:e.onClickCreatePolicy},{default:z(()=>[Oe(C(t.$t("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.INDEX.HEADER.CREATE_POLICY")),1)]),_:1})])]),body:z(()=>[f("div",mae,[(p(!0),g(de,null,Ae(e.agentAssignmentsPolicies,o=>(p(),L(e.AssignmentPolicyCard,Ta({key:o.id,ref_for:!0},o,{"is-fetching-inboxes":e.inboxUiFlags.isFetching,onFetchInboxes:e.handleFetchInboxes,onEdit:e.onClickEditPolicy,onDelete:e.handleDelete}),null,16,["is-fetching-inboxes"]))),128))])]),default:z(()=>[v(e.ConfirmDeletePolicyDialog,{ref:"confirmDeletePolicyDialogRef",onDelete:e.handleDeletePolicy},null,512)]),_:1},8,["is-loading","no-records-found","no-records-message"])}const _ae=G(pae,[["render",hae],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/assignmentPolicy/pages/AgentAssignmentIndexPage.vue"]]),gae={__name:"BaseInfo",props:an({nameLabel:{type:String,default:""},namePlaceholder:{type:String,default:""},descriptionLabel:{type:String,default:""},descriptionPlaceholder:{type:String,default:""},statusLabel:{type:String,default:""},statusPlaceholder:{type:String,default:""}},{policyName:{type:String,default:""},policyNameModifiers:{},description:{type:String,default:""},descriptionModifiers:{},enabled:{type:Boolean,default:!0},enabledModifiers:{}}),emits:an(["validationChange"],["update:policyName","update:description","update:enabled"]),setup(t,{expose:n,emit:a}){n();const e=a,s=dn(t,"policyName"),r=dn(t,"description"),o=dn(t,"enabled"),i={policyName:{required:Ge,minLength:Rt(1)},description:{required:Ge,minLength:Rt(1)}},l=rt(i,{policyName:s,description:r}),c=S(()=>!l.value.$invalid);je(c,()=>{e("validationChange",{isValid:c.value,section:"baseInfo"})},{immediate:!0});const d={emit:e,policyName:s,description:r,enabled:o,validationRules:i,v$:l,isValid:c,computed:S,watch:je,get useVuelidate(){return rt},get required(){return Ge},get minLength(){return Rt},WithLabel:$l,Input:sn,Switch:mo};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}},bae={class:"flex flex-col gap-4 pb-4"},vae={class:"flex items-center gap-6"},Eae={class:"flex-1"},Sae={class:"flex items-center gap-6"},Tae={class:"flex-1"},Aae={key:0,class:"flex items-center gap-6"},yae={class:"flex items-center gap-2"},Iae={class:"text-sm text-n-slate-11"};function Cae(t,n,a,e,s,r){return p(),g("div",bae,[O(" Policy Name Field "),f("div",vae,[v(e.WithLabel,{label:a.nameLabel,name:"policyName",class:"flex items-center w-full [&>label]:min-w-[120px]"},{default:z(()=>[f("div",Eae,[v(e.Input,{modelValue:e.policyName,"onUpdate:modelValue":n[0]||(n[0]=o=>e.policyName=o),type:"text",placeholder:a.namePlaceholder},null,8,["modelValue","placeholder"])])]),_:1},8,["label"])]),O(" Description Field "),f("div",Sae,[v(e.WithLabel,{label:a.descriptionLabel,name:"description",class:"flex items-center w-full [&>label]:min-w-[120px]"},{default:z(()=>[f("div",Tae,[v(e.Input,{modelValue:e.description,"onUpdate:modelValue":n[1]||(n[1]=o=>e.description=o),type:"text",placeholder:a.descriptionPlaceholder},null,8,["modelValue","placeholder"])])]),_:1},8,["label"])]),O(" Status Field "),a.statusLabel?(p(),g("div",Aae,[v(e.WithLabel,{label:a.statusLabel,name:"enabled",class:"flex items-center w-full [&>label]:min-w-[120px]"},{default:z(()=>[f("div",yae,[v(e.Switch,{modelValue:e.enabled,"onUpdate:modelValue":n[2]||(n[2]=o=>e.enabled=o)},null,8,["modelValue"]),f("span",Iae,C(a.statusPlaceholder),1)])]),_:1},8,["label"])])):O("v-if",!0)])}const Uw=G(gae,[["render",Cae],["__file","/app/app/javascript/dashboard/components-next/AssignmentPolicy/components/BaseInfo.vue"]]),Oae={__name:"RadioCard",props:{id:{type:String,required:!0},label:{type:String,required:!0},description:{type:String,required:!0},isActive:{type:Boolean,default:!1}},emits:["select"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,o={props:e,emit:s,handleChange:()=>{e.isActive||s("select",e.id)}};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},Nae={class:"absolute top-4 right-4"},xae=["id","checked","value","name"],Rae={class:"flex flex-col gap-3 items-start"},wae={class:"text-sm font-medium text-n-slate-12"},Mae={class:"text-sm text-n-slate-11"};function Lae(t,n,a,e,s,r){return p(),g("div",{class:oe(["relative cursor-pointer rounded-xl outline outline-1 p-4 transition-all duration-200 bg-n-solid-1 py-4 ltr:pl-4 rtl:pr-4 ltr:pr-6 rtl:pl-6",[a.isActive?"outline-n-blue-9":"outline-n-weak hover:outline-n-strong"]]),onClick:e.handleChange},[f("div",Nae,[f("input",{id:`${a.id}`,checked:a.isActive,value:a.id,name:a.id,type:"radio",class:"h-4 w-4 border-n-slate-6 text-n-brand focus:ring-n-brand focus:ring-offset-0",onChange:e.handleChange},null,40,xae)]),O(" Content "),f("div",Rae,[f("h3",wae,C(a.label),1),f("p",Mae,C(a.description),1)])],2)}const Dae=G(Oae,[["render",Lae],["__file","/app/app/javascript/dashboard/components-next/AssignmentPolicy/components/RadioCard.vue"]]),Pae={__name:"FairDistribution",props:{fairDistributionLimit:{type:Number,default:100},fairDistributionLimitModifiers:{},fairDistributionWindow:{type:Number,default:3600},fairDistributionWindowModifiers:{}},emits:["update:fairDistributionLimit","update:fairDistributionWindow"],setup(t,{expose:n}){n();const{t:a}=Q(),e=dn(t,"fairDistributionLimit",{set(l){return Number(l)||0}}),s=dn(t,"fairDistributionWindow",{set(l){return Number(l)||0}}),r=P(da.MINUTES),o=l=>{const c=Number(l)||0;return c===0?da.MINUTES:c%(24*60)===0?da.DAYS:c%60===0?da.HOURS:da.MINUTES};Pe(()=>{r.value=o(s.value)});const i={t:a,fairDistributionLimit:e,fairDistributionWindow:s,windowUnit:r,detectUnit:o,ref:P,onMounted:Pe,get useI18n(){return Q},Input:sn,DurationInput:yS,get DURATION_UNITS(){return da}};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}},kae={class:"flex items-start xl:items-center flex-col md:flex-row gap-4 lg:gap-3 bg-n-solid-1 p-4 outline outline-1 outline-n-weak rounded-xl"},Bae={class:"flex items-center gap-3"},Fae={class:"text-sm font-medium text-n-slate-12"},Uae={class:"flex-1"},$ae={class:"flex sm:flex-row flex-col items-start sm:items-center gap-4"},Gae={class:"text-sm font-medium text-n-slate-12"},Vae={class:"flex items-center gap-2 flex-1 [&>select]:!bg-n-alpha-2 [&>select]:!outline-none [&>select]:hover:brightness-110"};function Hae(t,n,a,e,s,r){return p(),g("div",kae,[f("div",Bae,[f("label",Fae,C(e.t("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.FORM.FAIR_DISTRIBUTION.INPUT_MAX")),1),f("div",Uae,[v(e.Input,{modelValue:e.fairDistributionLimit,"onUpdate:modelValue":n[0]||(n[0]=o=>e.fairDistributionLimit=o),type:"number",placeholder:"100",max:"100000",class:"w-full"},null,8,["modelValue"])])]),f("div",$ae,[f("label",Gae,C(e.t("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.FORM.FAIR_DISTRIBUTION.DURATION")),1),f("div",Vae,[O(" allow 10 mins to 999 days "),v(e.DurationInput,{"model-value":e.fairDistributionWindow,"onUpdate:modelValue":n[1]||(n[1]=o=>e.fairDistributionWindow=o),unit:e.windowUnit,"onUpdate:unit":n[2]||(n[2]=o=>e.windowUnit=o),min:10,max:1438560},null,8,["model-value","unit"])])])])}const jae=G(Pae,[["render",Hae],["__file","/app/app/javascript/dashboard/components-next/AssignmentPolicy/components/FairDistribution.vue"]]),Wae={__name:"DataTable",props:{items:{type:Array,default:()=>[]},isFetching:{type:Boolean,default:!1},emptyStateMessage:{type:String,default:""}},emits:["delete"],setup(t,{expose:n,emit:a}){n();const e=a,r={emit:e,handleDelete:o=>{e("delete",o)},Avatar:qt,Icon:Bt,Button:Se,Spinner:$n};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},zae={key:0,class:"flex items-center justify-center py-3 w-full text-n-slate-11"},Yae={key:1,class:"custom-dashed-border flex items-center justify-center py-6 w-full"},Kae={class:"text-sm text-n-slate-11"},Xae={key:2,class:"flex flex-col divide-y divide-n-weak"},qae={class:"flex items-center gap-2 col-span-2"},Zae={class:"text-sm text-n-slate-12 truncate min-w-0"},Qae={class:"flex items-start gap-2 col-span-1"},Jae=["title"],ese={class:"col-span-1 justify-end flex items-center"};function tse(t,n,a,e,s,r){return a.isFetching?(p(),g("div",zae,[v(e.Spinner)])):a.items.length===0&&a.emptyStateMessage?(p(),g("div",Yae,[f("span",Kae,C(a.emptyStateMessage),1)])):(p(),g("div",Xae,[(p(!0),g(de,null,Ae(a.items,o=>(p(),g("div",{key:o.id,class:"grid grid-cols-4 items-center gap-3 min-w-0 w-full justify-between h-[3.25rem] ltr:pr-2 rtl:pl-2"},[f("div",qae,[o.icon?(p(),L(e.Icon,{key:0,icon:o.icon,class:"size-4 text-n-slate-12 flex-shrink-0"},null,8,["icon"])):(p(),L(e.Avatar,{key:1,title:o.name,src:o.avatarUrl,name:o.name,size:20,"rounded-full":""},null,8,["title","src","name"])),f("span",Zae,C(o.name),1)]),f("div",Qae,[f("span",{title:o.email||o.phoneNumber,class:"text-sm text-n-slate-12 truncate min-w-0"},C(o.email||o.phoneNumber),9,Jae)]),f("div",ese,[v(e.Button,{icon:"i-lucide-trash",slate:"",ghost:"",sm:"",type:"button",onClick:i=>e.handleDelete(o.id)},null,8,["onClick"])])]))),128))]))}const $w=G(Wae,[["render",tse],["__file","/app/app/javascript/dashboard/components-next/AssignmentPolicy/components/DataTable.vue"]]),Pg=20,nse={__name:"AddDataDropdown",props:{label:{type:String,default:""},searchPlaceholder:{type:String,default:""},items:{type:Array,default:()=>[]}},emits:["add"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,[r,o]=$t(),i=P(),l=P(),c=P(""),{width:d,height:u}=ws(),{top:m,left:h,width:_,height:E}=mr(i),{width:y,height:b}=mr(l),A=S(()=>{if(!c.value)return e.items;const M=c.value.toLowerCase();return lo(e.items,M,["name"])}),T=M=>{s("add",M),o(!1)},I=S(()=>{if(!i.value||!l.value)return!1;const M=u.value-(m.value+E.value),w=m.value;return M<b.value+Pg&&w>M}),N=S(()=>{if(!i.value||!l.value)return!1;const M=d.value-h.value,w=h.value+_.value;return M<y.value+Pg&&w>M}),R={props:e,emit:s,BUFFER_SPACE:Pg,showPopover:r,togglePopover:o,buttonRef:i,dropdownRef:l,searchValue:c,windowWidth:d,windowHeight:u,buttonTop:m,buttonLeft:h,buttonWidth:_,buttonHeight:E,dropdownWidth:y,dropdownHeight:b,filteredItems:A,handleAdd:T,shouldShowAbove:I,shouldAlignRight:N,handleClickOutside:()=>{r.value&&o(!1)},computed:S,ref:P,get useToggle(){return $t},get useWindowSize(){return ws},get useElementBounding(){return mr},get vOnClickOutside(){return Ga},get picoSearch(){return lo},Avatar:qt,Icon:Bt,Button:Se,Input:sn};return Object.defineProperty(R,"__isScriptSetup",{enumerable:!1,value:!0}),R}},ase={class:"relative flex items-center group"},sse={class:"flex flex-col divide-y divide-n-slate-4 w-full"},ose=["onClick"],rse={class:"flex flex-col items-start gap-2 min-w-0 flex-1"},ise={class:"flex items-center gap-1 min-w-0 w-full"},lse=["title"],cse=["title"];function dse(t,n,a,e,s,r){return ce((p(),g("div",ase,[v(e.Button,{ref:"buttonRef",slate:"",type:"button",icon:"i-lucide-plus",sm:"",label:a.label,onClick:n[0]||(n[0]=o=>e.togglePopover(!e.showPopover))},null,8,["label"]),e.showPopover?(p(),g("div",{key:0,ref:"dropdownRef",class:oe(["z-50 flex flex-col items-start absolute bg-n-alpha-3 backdrop-blur-[50px] border-0 gap-4 outline outline-1 outline-n-weak rounded-xl max-w-96 min-w-80 max-h-[20rem] overflow-y-auto py-2",[e.shouldShowAbove?"bottom-full mb-2":"top-full mt-2",e.shouldAlignRight?"right-0":"left-0"]])},[f("div",sse,[v(e.Input,{modelValue:e.searchValue,"onUpdate:modelValue":n[1]||(n[1]=o=>e.searchValue=o),placeholder:a.searchPlaceholder,"custom-input-class":"bg-transparent !outline-none w-full ltr:!pl-10 rtl:!pr-10 h-10"},{prefix:z(()=>[v(e.Icon,{icon:"i-lucide-search",class:"absolute -translate-y-1/2 text-n-slate-11 size-4 top-1/2 ltr:left-3 rtl:right-3"})]),_:1},8,["modelValue","placeholder"]),(p(!0),g(de,null,Ae(e.filteredItems,o=>(p(),g("div",{key:o.id,class:oe(["flex gap-3 min-w-0 w-full py-4 px-3 hover:bg-n-alpha-2 cursor-pointer",{"items-center":o.color,"items-start":!o.color}]),onClick:i=>e.handleAdd(o)},[o.icon?(p(),L(e.Icon,{key:0,icon:o.icon,class:"size-4 text-n-slate-12 flex-shrink-0 mt-0.5"},null,8,["icon"])):o.color?(p(),g("span",{key:1,style:nn({backgroundColor:o.color}),class:"size-3 rounded-sm"},null,4)):(p(),L(e.Avatar,{key:2,title:o.name,src:o.avatarUrl,name:o.name,size:20,"rounded-full":""},null,8,["title","src","name"])),f("div",rse,[f("div",ise,[f("span",{title:o.name||o.title,class:"text-sm text-n-slate-12 truncate min-w-0 flex-1"},C(o.name||o.title),9,lse)]),o.email||o.phoneNumber?(p(),g("span",{key:0,title:o.email||o.phoneNumber,class:"text-sm text-n-slate-11 truncate min-w-0 w-full block"},C(o.email||o.phoneNumber),9,cse)):O("v-if",!0)])],10,ose))),128))])],2)):O("v-if",!0)])),[[e.vOnClickOutside,e.handleClickOutside]])}const Ph=G(nse,[["render",dse],["__file","/app/app/javascript/dashboard/components-next/AssignmentPolicy/components/AddDataDropdown.vue"]]),Il="round_robin",use="balanced",Cl="earliest_created",pse="longest_waiting",$p=100,Gp=3600,kg={ORDER:[Il,use],PRIORITY:[Cl,pse]},ic="ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY",fse={__name:"AgentAssignmentPolicyForm",props:{initialData:{type:Object,default:()=>({name:"",description:"",enabled:!1,assignmentOrder:Il,conversationPriority:Cl,fairDistributionLimit:$p,fairDistributionWindow:Gp})},mode:{type:String,required:!0,validator:t=>["CREATE","EDIT"].includes(t)},policyInboxes:{type:Array,default:()=>[]},inboxList:{type:Array,default:()=>[]},showInboxSection:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isInboxLoading:{type:Boolean,default:!1}},emits:["submit","addInbox","deleteInbox","validationChange"],setup(t,{expose:n,emit:a}){const e=t,s=a,{t:r}=Q(),{isEnterprise:o}=io(),i=Lt({name:"",description:"",enabled:!1,assignmentOrder:Il,conversationPriority:Cl,fairDistributionLimit:$p,fairDistributionWindow:Gp}),l=P({isValid:!1}),c=(A,T,I)=>({key:T,label:r(`${ic}.FORM.${A}.${T.toUpperCase()}.LABEL`),description:r(`${ic}.FORM.${A}.${T.toUpperCase()}.DESCRIPTION`),isActive:i[I]===T}),d=S(()=>kg.ORDER.filter(T=>o||T!=="balanced").map(T=>c("ASSIGNMENT_ORDER",T,"assignmentOrder"))),u=S(()=>kg.PRIORITY.map(A=>c("ASSIGNMENT_PRIORITY",A,"conversationPriority"))),m=S(()=>[{key:"assignmentOrder",label:r(`${ic}.FORM.ASSIGNMENT_ORDER.LABEL`),options:d.value},{key:"conversationPriority",label:r(`${ic}.FORM.ASSIGNMENT_PRIORITY.LABEL`),options:u.value}]),h=S(()=>r(`${ic}.${e.mode.toUpperCase()}.${e.mode}_BUTTON`)),_=A=>{l.value=A,s("validationChange",A)},E=()=>{Object.assign(i,{name:"",description:"",enabled:!1,assignmentOrder:Il,conversationPriority:Cl,fairDistributionLimit:$p,fairDistributionWindow:Gp})},y=()=>{s("submit",{...i})};je(()=>e.initialData,A=>{Object.assign(i,A)},{immediate:!0,deep:!0}),n({resetForm:E});const b={props:e,emit:s,t:r,isEnterprise:o,BASE_KEY:ic,state:i,validationState:l,createOption:c,assignmentOrderOptions:d,assignmentPriorityOptions:u,radioSections:m,buttonLabel:h,handleValidationChange:_,resetForm:E,handleSubmit:y,computed:S,reactive:Lt,ref:P,watch:je,get useI18n(){return Q},get useConfig(){return io},BaseInfo:Uw,RadioCard:Dae,FairDistribution:jae,DataTable:$w,AddDataDropdown:Ph,WithLabel:$l,Button:Se,get OPTIONS(){return kg},get ROUND_ROBIN(){return Il},get EARLIEST_CREATED(){return Cl},get DEFAULT_FAIR_DISTRIBUTION_LIMIT(){return $p},get DEFAULT_FAIR_DISTRIBUTION_WINDOW(){return Gp}};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}},mse={class:"flex flex-col gap-4 divide-y divide-n-weak mb-4"},hse={class:"flex flex-col items-center"},_se={class:"grid grid-cols-1 xs:grid-cols-2 gap-4 w-full"},gse={class:"pt-4 pb-2 flex-col flex gap-4"},bse={class:"flex flex-col items-start gap-1 py-1"},vse={class:"text-sm font-medium text-n-slate-12 py-1"},Ese={class:"mb-0 text-n-slate-11 text-sm"},Sse={key:0,class:"py-4 flex-col flex gap-4 border-t border-n-weak mt-6"},Tse={class:"flex items-end gap-4 w-full justify-between"},Ase={class:"flex flex-col items-start gap-1 py-1"},yse={class:"text-sm font-medium text-n-slate-12 py-1"},Ise={class:"mb-0 text-n-slate-11 text-sm"};function Cse(t,n,a,e,s,r){return p(),g("form",{onSubmit:Ve(e.handleSubmit,["prevent"])},[f("div",mse,[v(e.BaseInfo,{"policy-name":e.state.name,"onUpdate:policyName":n[0]||(n[0]=o=>e.state.name=o),description:e.state.description,"onUpdate:description":n[1]||(n[1]=o=>e.state.description=o),enabled:e.state.enabled,"onUpdate:enabled":n[2]||(n[2]=o=>e.state.enabled=o),"name-label":e.t(`${e.BASE_KEY}.FORM.NAME.LABEL`),"name-placeholder":e.t(`${e.BASE_KEY}.FORM.NAME.PLACEHOLDER`),"description-label":e.t(`${e.BASE_KEY}.FORM.DESCRIPTION.LABEL`),"description-placeholder":e.t(`${e.BASE_KEY}.FORM.DESCRIPTION.PLACEHOLDER`),"status-label":e.t(`${e.BASE_KEY}.FORM.STATUS.LABEL`),"status-placeholder":e.t(`${e.BASE_KEY}.FORM.STATUS.${e.state.enabled?"ACTIVE":"INACTIVE"}`),onValidationChange:e.handleValidationChange},null,8,["policy-name","description","enabled","name-label","name-placeholder","description-label","description-placeholder","status-label","status-placeholder"]),f("div",hse,[(p(!0),g(de,null,Ae(e.radioSections,o=>(p(),g("div",{key:o.key,class:"py-4 flex flex-col items-start gap-3 w-full"},[v(e.WithLabel,{label:o.label,name:"assignmentPolicy",class:"w-full flex items-start flex-col gap-3"},{default:z(()=>[f("div",_se,[(p(!0),g(de,null,Ae(o.options,i=>(p(),L(e.RadioCard,{id:i.key,key:i.key,label:i.label,description:i.description,"is-active":i.isActive,onSelect:l=>e.state[o.key]=l},null,8,["id","label","description","is-active","onSelect"]))),128))])]),_:2},1032,["label"])]))),128))]),f("div",gse,[f("div",bse,[f("label",vse,C(e.t(`${e.BASE_KEY}.FORM.FAIR_DISTRIBUTION.LABEL`)),1),f("p",Ese,C(e.t(`${e.BASE_KEY}.FORM.FAIR_DISTRIBUTION.DESCRIPTION`)),1)]),v(e.FairDistribution,{"fair-distribution-limit":e.state.fairDistributionLimit,"onUpdate:fairDistributionLimit":n[3]||(n[3]=o=>e.state.fairDistributionLimit=o),"fair-distribution-window":e.state.fairDistributionWindow,"onUpdate:fairDistributionWindow":n[4]||(n[4]=o=>e.state.fairDistributionWindow=o),"window-unit":e.state.windowUnit,"onUpdate:windowUnit":n[5]||(n[5]=o=>e.state.windowUnit=o)},null,8,["fair-distribution-limit","fair-distribution-window","window-unit"])])]),v(e.Button,{type:"submit",label:e.buttonLabel,disabled:!e.validationState.isValid||a.isLoading,"is-loading":a.isLoading},null,8,["label","disabled","is-loading"]),a.showInboxSection?(p(),g("div",Sse,[f("div",Tse,[f("div",Ase,[f("label",yse,C(e.t(`${e.BASE_KEY}.FORM.INBOXES.LABEL`)),1),f("p",Ise,C(e.t(`${e.BASE_KEY}.FORM.INBOXES.DESCRIPTION`)),1)]),v(e.AddDataDropdown,{label:e.t(`${e.BASE_KEY}.FORM.INBOXES.ADD_BUTTON`),"search-placeholder":e.t(`${e.BASE_KEY}.FORM.INBOXES.DROPDOWN.SEARCH_PLACEHOLDER`),items:a.inboxList,onAdd:n[6]||(n[6]=o=>t.$emit("addInbox",o))},null,8,["label","search-placeholder","items"])]),v(e.DataTable,{items:a.policyInboxes,"is-fetching":a.isInboxLoading,"empty-state-message":e.t(`${e.BASE_KEY}.FORM.INBOXES.EMPTY_STATE`),onDelete:n[7]||(n[7]=o=>t.$emit("deleteInbox",o))},null,8,["items","is-fetching","empty-state-message"])])):O("v-if",!0)],32)}const Gw=G(fse,[["render",Cse],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/assignmentPolicy/pages/components/AgentAssignmentPolicyForm.vue"]]),Ose={__name:"AgentAssignmentCreatePage",setup(t,{expose:n}){n();const a=ft(),e=Fe(),{t:s}=Q(),r=P(null),o=le("assignmentPolicies/getUIFlags"),i=S(()=>[{label:s("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.INDEX.HEADER.TITLE"),routeName:"agent_assignment_policy_index"},{label:s("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.CREATE.HEADER.TITLE")}]),d={router:a,store:e,t:s,formRef:r,uiFlags:o,breadcrumbItems:i,handleBreadcrumbClick:u=>{a.push({name:u.routeName})},handleSubmit:async u=>{var m;try{const h=await e.dispatch("assignmentPolicies/create",u);Z(s("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.CREATE.API.SUCCESS_MESSAGE")),(m=r.value)==null||m.resetForm(),a.push({name:"agent_assignment_policy_edit",params:{id:h.id}})}catch{Z(s("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.CREATE.API.ERROR_MESSAGE"))}},computed:S,ref:P,get useI18n(){return Q},get useStore(){return Fe},get useMapGetter(){return le},get useRouter(){return ft},get useAlert(){return Z},Breadcrumb:qi,SettingsLayout:Ha,AssignmentPolicyForm:Gw};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}},Nse={class:"flex items-center gap-2 w-full justify-between"};function xse(t,n,a,e,s,r){return p(),L(e.SettingsLayout,{class:"xl:px-44"},{header:z(()=>[f("div",Nse,[v(e.Breadcrumb,{items:e.breadcrumbItems,onClick:e.handleBreadcrumbClick},null,8,["items"])])]),body:z(()=>[v(e.AssignmentPolicyForm,{ref:"formRef",mode:"CREATE","is-loading":e.uiFlags.isCreating,onSubmit:e.handleSubmit},null,8,["is-loading"])]),_:1})}const Rse=G(Ose,[["render",xse],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/assignmentPolicy/pages/AgentAssignmentCreatePage.vue"]]),wse={__name:"ConfirmInboxDialog",emits:["add"],setup(t,{expose:n,emit:a}){const e=a,{t:s}=Q(),r=P(null),o=P(null),i=u=>{o.value=u,r.value.open()},l=()=>{r.value.close()},c=()=>{e("add",o.value.id)};n({openDialog:i,closeDialog:l});const d={emit:e,t:s,dialogRef:r,currentInbox:o,openDialog:i,closeDialog:l,handleDialogConfirm:c,ref:P,get useI18n(){return Q},Dialog:la};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}};function Mse(t,n,a,e,s,r){var o;return p(),L(e.Dialog,{ref:"dialogRef",type:"alert",title:e.t("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.EDIT.CONFIRM_ADD_INBOX_DIALOG.TITLE"),description:e.t("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.EDIT.CONFIRM_ADD_INBOX_DIALOG.DESCRIPTION",{inboxName:(o=e.currentInbox)==null?void 0:o.name}),"confirm-button-label":e.t("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.EDIT.CONFIRM_ADD_INBOX_DIALOG.CONFIRM_BUTTON_LABEL"),"cancel-button-label":e.t("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.EDIT.CONFIRM_ADD_INBOX_DIALOG.CANCEL_BUTTON_LABEL"),onConfirm:e.handleDialogConfirm},null,8,["title","description","confirm-button-label","cancel-button-label"])}const Lse=G(wse,[["render",Mse],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/assignmentPolicy/pages/components/ConfirmInboxDialog.vue"]]),cl="ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY",Dse={__name:"AgentAssignmentEditPage",setup(t,{expose:n}){n();const{t:a}=Q(),e=lt(),s=ft(),r=Fe(),o=le("assignmentPolicies/getUIFlags"),i=le("inboxes/getAllInboxes"),l=le("assignmentPolicies/getInboxUiFlags"),c=le("assignmentPolicies/getAssignmentPolicyById"),d=S(()=>e.params.id),u=S(()=>c.value(d.value)),m=P(null),h=P(null),_=S(()=>[{label:a(`${cl}.INDEX.HEADER.TITLE`),routeName:"agent_assignment_policy_index"},{label:a(`${cl}.EDIT.HEADER.TITLE`)}]),E=B=>(B==null?void 0:B.map(({name:k,id:V,email:F,phoneNumber:$,channelType:Y,medium:j})=>({name:k,id:V,email:F,phoneNumber:$,icon:vs(Y,j,"line")})))||[],y=S(()=>{var B;return E((B=u.value)==null?void 0:B.inboxes)}),b=S(()=>{var B;return E((B=i.value)==null?void 0:B.slice().sort((k,V)=>k.name.localeCompare(V.name)))}),A=S(()=>{var B,k,V,F,$,Y,j;return{name:((B=u.value)==null?void 0:B.name)||"",description:((k=u.value)==null?void 0:k.description)||"",enabled:((V=u.value)==null?void 0:V.enabled)||!1,assignmentOrder:((F=u.value)==null?void 0:F.assignmentOrder)||Il,conversationPriority:(($=u.value)==null?void 0:$.conversationPriority)||Cl,fairDistributionLimit:((Y=u.value)==null?void 0:Y.fairDistributionLimit)||10,fairDistributionWindow:((j=u.value)==null?void 0:j.fairDistributionWindow)||60}}),T=B=>{var k;return r.dispatch("assignmentPolicies/removeInboxPolicy",{policyId:(k=u.value)==null?void 0:k.id,inboxId:B})},I=({routeName:B})=>s.push({name:B}),N=async(B,k)=>{try{return await r.dispatch("assignmentPolicies/setInboxPolicy",{inboxId:B,policyId:k}),Z(a(`${cl}.FORM.INBOXES.API.SUCCESS_MESSAGE`)),await r.dispatch("assignmentPolicies/getInboxes",Number(d.value)),!0}catch{return Z(a(`${cl}.FORM.INBOXES.API.ERROR_MESSAGE`)),!1}},x=async B=>{var k,V;try{const F=await r.dispatch("assignmentPolicies/getInboxPolicy",{inboxId:B==null?void 0:B.id});if((F==null?void 0:F.id)!==((k=u.value)==null?void 0:k.id)){h.value={...F,assignedInboxCount:F.assignedInboxCount-1},m.value.openDialog(B);return}}catch{}await N(B==null?void 0:B.id,(V=u.value)==null?void 0:V.id)},R=async B=>{var V,F;await N(B,(V=u.value)==null?void 0:V.id)&&(await r.dispatch("assignmentPolicies/updateInboxPolicy",{policy:h.value}),r.dispatch("assignmentPolicies/getInboxes",(F=h.value)==null?void 0:F.id),h.value=null,m.value.closeDialog())},M=async B=>{var k;try{await r.dispatch("assignmentPolicies/update",{id:(k=u.value)==null?void 0:k.id,...B}),Z(a(`${cl}.EDIT.API.SUCCESS_MESSAGE`))}catch{Z(a(`${cl}.EDIT.API.ERROR_MESSAGE`))}},w=async()=>{var B;d.value&&((B=u.value)!=null&&B.id||await r.dispatch("assignmentPolicies/show",d.value),await r.dispatch("assignmentPolicies/getInboxes",Number(d.value)))};je(d,w,{immediate:!0});const D={BASE_KEY:cl,t:a,route:e,router:s,store:r,uiFlags:o,inboxes:i,inboxUiFlags:l,selectedPolicyById:c,routeId:d,selectedPolicy:u,confirmInboxDialogRef:m,inboxLinkedPolicy:h,breadcrumbItems:_,buildInboxList:E,policyInboxes:y,inboxList:b,formData:A,handleDeleteInbox:T,handleBreadcrumbClick:I,setInboxPolicy:N,handleAddInbox:x,handleConfirmAddInbox:R,handleSubmit:M,fetchPolicyData:w,computed:S,ref:P,watch:je,get useI18n(){return Q},get useStore(){return Fe},get useMapGetter(){return le},get useRoute(){return lt},get useRouter(){return ft},get useAlert(){return Z},get getInboxIconByType(){return vs},get ROUND_ROBIN(){return Il},get EARLIEST_CREATED(){return Cl},Breadcrumb:qi,SettingsLayout:Ha,AssignmentPolicyForm:Gw,ConfirmInboxDialog:Lse};return Object.defineProperty(D,"__isScriptSetup",{enumerable:!1,value:!0}),D}},Pse={class:"flex items-center gap-2 w-full justify-between"};function kse(t,n,a,e,s,r){return p(),L(e.SettingsLayout,{"is-loading":e.uiFlags.isFetchingItem,class:"xl:px-44"},{header:z(()=>[f("div",Pse,[v(e.Breadcrumb,{items:e.breadcrumbItems,onClick:e.handleBreadcrumbClick},null,8,["items"])])]),body:z(()=>[(p(),L(e.AssignmentPolicyForm,{key:e.routeId,mode:"EDIT","initial-data":e.formData,"policy-inboxes":e.policyInboxes,"inbox-list":e.inboxList,"show-inbox-section":"","is-loading":e.uiFlags.isUpdating,"is-inbox-loading":e.inboxUiFlags.isFetching,onSubmit:e.handleSubmit,onAddInbox:e.handleAddInbox,onDeleteInbox:e.handleDeleteInbox},null,8,["initial-data","policy-inboxes","inbox-list","is-loading","is-inbox-loading"]))]),default:z(()=>[v(e.ConfirmInboxDialog,{ref:"confirmInboxDialogRef",onAdd:e.handleConfirmAddInbox},null,512)]),_:1},8,["is-loading"])}const Bse=G(Dse,[["render",kse],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/assignmentPolicy/pages/AgentAssignmentEditPage.vue"]]),Fse={__name:"AgentCapacityPolicyCard",props:{id:{type:Number,required:!0},name:{type:String,default:""},description:{type:String,default:""},assignedAgentCount:{type:Number,default:0},users:{type:Array,default:()=>[]},isFetchingUsers:{type:Boolean,default:!1}},emits:["edit","delete","fetchUsers"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=S(()=>e.users.map(u=>({name:u.name,key:u.id,email:u.email,avatarUrl:u.avatarUrl}))),d={props:e,emit:s,t:r,users:o,handleEdit:()=>{s("edit",e.id)},handleDelete:()=>{s("delete",e.id)},handleFetchUsers:()=>{var u;((u=e.users)==null?void 0:u.length)>0||s("fetchUsers",e.id)},computed:S,get useI18n(){return Q},Button:Se,CardLayout:ho,CardPopover:Bw};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}},Use={class:"flex flex-col gap-2 relative justify-between w-full"},$se={class:"flex items-center gap-3 justify-between w-full"},Gse={class:"flex items-center gap-3"},Vse={class:"text-base font-medium text-n-slate-12 line-clamp-1"},Hse={class:"flex items-center gap-2"},jse={class:"text-n-slate-11 text-sm line-clamp-1 mb-0 py-1"};function Wse(t,n,a,e,s,r){return p(),L(e.CardLayout,{class:"[&>div]:px-5"},{default:z(()=>[f("div",Use,[f("div",$se,[f("div",Gse,[f("h3",Vse,C(a.name),1),v(e.CardPopover,{title:e.t("ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY.INDEX.CARD.POPOVER"),icon:"i-lucide-users-round",count:a.assignedAgentCount,items:e.users,"is-fetching":a.isFetchingUsers,onFetch:e.handleFetchUsers},null,8,["title","count","items","is-fetching"])]),f("div",Hse,[v(e.Button,{label:e.t("ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY.INDEX.CARD.EDIT"),sm:"",slate:"",link:"",class:"px-2",onClick:e.handleEdit},null,8,["label"]),n[0]||(n[0]=f("div",{class:"w-px h-2.5 bg-n-slate-5"},null,-1)),v(e.Button,{icon:"i-lucide-trash",sm:"",slate:"",ghost:"",onClick:e.handleDelete})])]),f("p",jse,C(a.description),1)])]),_:1})}const zse=G(Fse,[["render",Wse],["__file","/app/app/javascript/dashboard/components-next/AssignmentPolicy/AgentCapacityPolicyCard/AgentCapacityPolicyCard.vue"]]),Yse={__name:"AgentCapacityIndexPage",setup(t,{expose:n}){n();const a=Fe(),{t:e}=Q(),s=ft(),r=le("agentCapacityPolicies/getAgentCapacityPolicies"),o=le("agentCapacityPolicies/getUIFlags"),i=le("agentCapacityPolicies/getUsersUIFlags"),l=P(null),c=S(()=>[{label:e("ASSIGNMENT_POLICY.INDEX.HEADER.TITLE"),routeName:"assignment_policy_index"},{label:e("ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY.INDEX.HEADER.TITLE")}]),d=b=>{s.push({name:b.routeName})},u=()=>{s.push({name:"agent_capacity_policy_create"})},m=b=>{s.push({name:"agent_capacity_policy_edit",params:{id:b}})},h=b=>{i.value.isFetching||a.dispatch("agentCapacityPolicies/getUsers",b)},_=b=>{l.value.openDialog(b)},E=async b=>{try{await a.dispatch("agentCapacityPolicies/delete",b),Z(e("ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY.DELETE_POLICY.SUCCESS_MESSAGE")),l.value.closeDialog()}catch{Z(e("ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY.DELETE_POLICY.ERROR_MESSAGE"))}};Pe(()=>{a.dispatch("agentCapacityPolicies/get")});const y={store:a,t:e,router:s,agentCapacityPolicies:r,uiFlags:o,usersUiFlags:i,confirmDeletePolicyDialogRef:l,breadcrumbItems:c,handleBreadcrumbClick:d,onClickCreatePolicy:u,onClickEditPolicy:m,handleFetchUsers:h,handleDelete:_,handleDeletePolicy:E,computed:S,onMounted:Pe,ref:P,get useI18n(){return Q},get useStore(){return Fe},get useMapGetter(){return le},get useRouter(){return ft},get useAlert(){return Z},Breadcrumb:qi,Button:Se,SettingsLayout:Ha,AgentCapacityPolicyCard:zse,ConfirmDeletePolicyDialog:Fw};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}},Kse={class:"flex items-center gap-2 w-full justify-between"},Xse={class:"flex flex-col gap-4 pt-8"};function qse(t,n,a,e,s,r){return p(),L(e.SettingsLayout,{"is-loading":e.uiFlags.isFetching,"no-records-found":e.agentCapacityPolicies.length===0,"no-records-message":t.$t("ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY.INDEX.NO_RECORDS_FOUND")},{header:z(()=>[f("div",Kse,[v(e.Breadcrumb,{items:e.breadcrumbItems,onClick:e.handleBreadcrumbClick},null,8,["items"]),v(e.Button,{icon:"i-lucide-plus",md:"",onClick:e.onClickCreatePolicy},{default:z(()=>[Oe(C(t.$t("ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY.INDEX.HEADER.CREATE_POLICY")),1)]),_:1})])]),body:z(()=>[f("div",Xse,[(p(!0),g(de,null,Ae(e.agentCapacityPolicies,o=>(p(),L(e.AgentCapacityPolicyCard,Ta({key:o.id,ref_for:!0},o,{"is-fetching-users":e.usersUiFlags.isFetching,onFetchUsers:e.handleFetchUsers,onEdit:e.onClickEditPolicy,onDelete:e.handleDelete}),null,16,["is-fetching-users"]))),128))])]),default:z(()=>[v(e.ConfirmDeletePolicyDialog,{ref:"confirmDeletePolicyDialogRef",onDelete:e.handleDeletePolicy},null,512)]),_:1},8,["is-loading","no-records-found","no-records-message"])}const Zse=G(Yse,[["render",qse],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/assignmentPolicy/pages/AgentCapacityIndexPage.vue"]]),Qse={__name:"LabelItem",props:{label:{type:Object,default:null},isHovered:{type:Boolean,default:!1}},emits:["remove","hover"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,i={props:e,emit:s,handleRemoveLabel:()=>{s("remove",e.label)},handleMouseEnter:()=>{var l;s("hover",(l=e.label)==null?void 0:l.id)},Button:Se};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}},Jse={class:"text-sm text-n-slate-12 ltr:mr-px rtl:ml-px"};function eoe(t,n,a,e,s,r){return p(),g("div",{class:"flex items-center px-1 py-1 overflow-hidden transition-all duration-300 ease-out rounded-md bg-n-alpha-2 h-7",onMouseenter:e.handleMouseEnter},[f("div",{class:"w-2 h-2 m-1 rounded-sm",style:nn({backgroundColor:a.label.color})},null,4),f("span",Jse,C(a.label.title),1),f("div",{class:oe(["w-0 flex relative ltr:left-1 rtl:right-1 flex-shrink-0 overflow-hidden transition-[width] duration-300 ease-out",{"w-6":a.isHovered}])},[v(e.Button,{class:oe(["transition-opacity duration-200 !h-7 ltr:rounded-r-md rtl:rounded-l-md ltr:rounded-l-none rtl:rounded-r-none w-6 bg-transparent",{"opacity-0":!a.isHovered,"opacity-100":a.isHovered}]),type:"button",slate:"",xs:"",faded:"",icon:"i-lucide-x",onClick:e.handleRemoveLabel},null,8,["class"])],2)],32)}const Vw=G(Qse,[["render",eoe],["__file","/app/app/javascript/dashboard/components-next/Label/LabelItem.vue"]]),toe=10,noe=1438560,aoe={__name:"ExclusionRules",props:an({tagsList:{type:Array,default:()=>[]}},{excludedLabels:{type:Array,default:()=>[]},excludedLabelsModifiers:{},excludeOlderThanMinutes:{type:Number,default:10},excludeOlderThanMinutesModifiers:{}}),emits:["update:excludedLabels","update:excludeOlderThanMinutes"],setup(t,{expose:n}){n();const a=t,e=dn(t,"excludedLabels"),s=dn(t,"excludeOlderThanMinutes"),{t:r}=Q(),o=P(null),i=P(da.MINUTES),l=S(()=>a.tagsList.filter(_=>e.value.includes(_.name)).map(_=>({id:_.id,title:_.name,..._}))),c=S(()=>a.tagsList.filter(_=>!l.value.some(E=>E.id===_.id))),d=_=>{const E=Number(_)||0;return E===0?da.MINUTES:E%(24*60)===0?da.DAYS:E%60===0?da.HOURS:da.MINUTES},u=_=>{e.value=[...e.value,_.name]},m=_=>{e.value=e.value.filter(E=>E!==_.title)};Pe(()=>{i.value=d(s.value)});const h={props:a,excludedLabels:e,excludeOlderThanMinutes:s,MIN_DURATION_MINUTES:toe,MAX_DURATION_MINUTES:noe,t:r,hoveredLabel:o,windowUnit:i,addedTags:l,filteredTags:c,detectUnit:d,onClickAddTag:u,onClickRemoveTag:m,computed:S,ref:P,onMounted:Pe,get useI18n(){return Q},AddDataDropdown:Ph,LabelItem:Vw,DurationInput:yS,get DURATION_UNITS(){return da}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}},soe={class:"py-4 flex-col flex gap-6"},ooe={class:"flex flex-col items-start gap-1 py-1"},roe={class:"text-sm font-medium text-n-slate-12 py-1"},ioe={class:"mb-0 text-n-slate-11 text-sm"},loe={class:"flex flex-col items-start gap-4"},coe={class:"text-sm font-medium text-n-slate-12 py-1"},doe={class:"flex flex-col items-start gap-4"},uoe={class:"text-sm font-medium text-n-slate-12 py-1"},poe={class:"flex items-center gap-2 flex-1 [&>select]:!bg-n-alpha-2 [&>select]:!outline-none [&>select]:hover:brightness-110"};function foe(t,n,a,e,s,r){return p(),g("div",soe,[f("div",ooe,[f("label",roe,C(e.t("ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY.FORM.EXCLUSION_RULES.LABEL")),1),f("p",ioe,C(e.t("ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY.FORM.EXCLUSION_RULES.DESCRIPTION")),1)]),f("div",loe,[f("label",coe,C(e.t("ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY.FORM.EXCLUSION_RULES.TAGS.LABEL")),1),f("div",{class:"flex items-start gap-2 flex-wrap",onMouseleave:n[0]||(n[0]=o=>e.hoveredLabel=null)},[(p(!0),g(de,null,Ae(e.addedTags,o=>(p(),L(e.LabelItem,{key:o.id,label:o,"is-hovered":e.hoveredLabel===o.id,class:"h-8",onRemove:e.onClickRemoveTag,onHover:i=>e.hoveredLabel=o.id},null,8,["label","is-hovered","onHover"]))),128)),v(e.AddDataDropdown,{label:e.t("ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY.FORM.EXCLUSION_RULES.TAGS.ADD_TAG"),"search-placeholder":e.t("ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY.FORM.EXCLUSION_RULES.TAGS.DROPDOWN.SEARCH_PLACEHOLDER"),items:e.filteredTags,class:"[&>button]:!text-n-blue-text [&>div]:min-w-64",onAdd:e.onClickAddTag},null,8,["label","search-placeholder","items"])],32)]),f("div",doe,[f("label",uoe,C(e.t("ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY.FORM.EXCLUSION_RULES.DURATION.LABEL")),1),f("div",poe,[O(" allow 10 mins to 999 days "),v(e.DurationInput,{unit:e.windowUnit,"onUpdate:unit":n[1]||(n[1]=o=>e.windowUnit=o),"model-value":e.excludeOlderThanMinutes,"onUpdate:modelValue":n[2]||(n[2]=o=>e.excludeOlderThanMinutes=o),min:e.MIN_DURATION_MINUTES,max:e.MAX_DURATION_MINUTES},null,8,["unit","model-value"])])])])}const moe=G(aoe,[["render",foe],["__file","/app/app/javascript/dashboard/components-next/AssignmentPolicy/components/ExclusionRules.vue"]]),hoe="ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY",FI=10,UI=1,$I=1e5,_oe={__name:"InboxCapacityLimits",props:an({inboxList:{type:Array,default:()=>[]},isFetching:{type:Boolean,default:!1}},{inboxCapacityLimits:{type:Array,default:()=>[]},inboxCapacityLimitsModifiers:{}}),emits:an(["delete","add","update"],["update:inboxCapacityLimits"]),setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=dn(t,"inboxCapacityLimits"),{t:o}=Q(),i=S(()=>new Set(r.value.map(y=>y.inboxId))),l=S(()=>e.inboxList.filter(y=>y&&!i.value.has(y.id))),c=y=>y.conversationLimit>=UI&&y.conversationLimit<=$I,d=S(()=>new Map(e.inboxList.map(y=>[y.id,y]))),E={props:e,emit:s,inboxCapacityLimits:r,t:o,BASE_KEY:hoe,DEFAULT_CONVERSATION_LIMIT:FI,MIN_CONVERSATION_LIMIT:UI,MAX_CONVERSATION_LIMIT:$I,selectedInboxIds:i,availableInboxes:l,isLimitValid:c,inboxMap:d,handleAddInbox:y=>{s("add",{inboxId:y.id,conversationLimit:FI})},handleRemoveLimit:y=>{s("delete",y)},handleLimitChange:y=>{c(y)&&s("update",y)},getInboxName:y=>{var b;return((b=d.value.get(y))==null?void 0:b.name)||""},computed:S,get useI18n(){return Q},Button:Se,Spinner:$n,AddDataDropdown:Ph};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}},goe={class:"py-4 flex-col flex gap-3"},boe={class:"flex items-center w-full gap-8 justify-between pt-1 pb-3"},voe={class:"text-sm font-medium text-n-slate-12"},Eoe={key:0,class:"flex items-center justify-center py-3 w-full text-n-slate-11"},Soe={key:1,class:"custom-dashed-border flex items-center justify-center py-6 w-full"},Toe={class:"text-sm text-n-slate-11"},Aoe={key:2,class:"flex-col flex gap-3"},yoe=["title"],Ioe={class:"truncate min-w-0"},Coe={class:"flex items-center gap-3 w-full xs:w-auto"},Ooe=["title"],Noe=["onUpdate:modelValue","placeholder","onBlur"];function xoe(t,n,a,e,s,r){return p(),g("div",goe,[f("div",boe,[f("label",voe,C(e.t(`${e.BASE_KEY}.FORM.INBOX_CAPACITY_LIMIT.LABEL`)),1),v(e.AddDataDropdown,{label:e.t(`${e.BASE_KEY}.FORM.INBOX_CAPACITY_LIMIT.ADD_BUTTON`),"search-placeholder":e.t(`${e.BASE_KEY}.FORM.INBOX_CAPACITY_LIMIT.FIELD.SELECT_INBOX`),items:e.availableInboxes,onAdd:e.handleAddInbox},null,8,["label","search-placeholder","items"])]),a.isFetching?(p(),g("div",Eoe,[v(e.Spinner)])):e.inboxCapacityLimits.length?(p(),g("div",Aoe,[(p(!0),g(de,null,Ae(e.inboxCapacityLimits,(o,i)=>(p(),g("div",{key:o.id||`temp-${i}`,class:"flex flex-col xs:flex-row items-stretch gap-3"},[f("div",{class:"flex items-center rounded-lg outline-1 outline cursor-not-allowed text-n-slate-11 outline-n-weak py-2.5 px-3 text-sm w-full min-w-0",title:e.getInboxName(o.inboxId)},[f("span",Ioe,C(e.getInboxName(o.inboxId)),1)],8,yoe),f("div",Coe,[f("div",{class:oe(["py-2.5 px-3 rounded-lg gap-2 outline outline-1 flex-1 xs:flex-shrink-0 flex items-center min-w-0",[e.isLimitValid(o)?"outline-n-weak":"outline-n-ruby-8"]])},[f("label",{class:"text-sm text-n-slate-12 ltr:pr-2 rtl:pl-2 truncate min-w-0 flex-shrink",title:e.t(`${e.BASE_KEY}.FORM.INBOX_CAPACITY_LIMIT.FIELD.MAX_CONVERSATIONS`)},C(e.t(`${e.BASE_KEY}.FORM.INBOX_CAPACITY_LIMIT.FIELD.MAX_CONVERSATIONS`)),9,Ooe),n[0]||(n[0]=f("div",{class:"h-5 w-px bg-n-weak"},null,-1)),ce(f("input",{"onUpdate:modelValue":l=>o.conversationLimit=l,type:"number",min:e.MIN_CONVERSATION_LIMIT,max:e.MAX_CONVERSATION_LIMIT,class:oe(["reset-base bg-transparent focus:outline-none min-w-16 w-24 text-sm flex-shrink-0",[e.isLimitValid(o)?"placeholder:text-n-slate-10 text-n-slate-12":"placeholder:text-n-ruby-9 !text-n-ruby-9"]]),placeholder:e.t(`${e.BASE_KEY}.FORM.INBOX_CAPACITY_LIMIT.FIELD.SET_LIMIT`),onBlur:l=>e.handleLimitChange(o)},null,42,Noe),[[Et,o.conversationLimit,void 0,{number:!0}]])],2),v(e.Button,{type:"button",slate:"",icon:"i-lucide-trash",class:"flex-shrink-0",onClick:l=>e.handleRemoveLimit(o.id)},null,8,["onClick"])])]))),128))])):(p(),g("div",Soe,[f("span",Toe,C(e.t(`${e.BASE_KEY}.FORM.INBOX_CAPACITY_LIMIT.EMPTY_STATE`)),1)]))])}const Roe=G(_oe,[["render",xoe],["__file","/app/app/javascript/dashboard/components-next/AssignmentPolicy/components/InboxCapacityLimits.vue"]]),GI="ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY",woe={__name:"AgentCapacityPolicyForm",props:{initialData:{type:Object,default:()=>({name:"",description:"",enabled:!1,exclusionRules:{excludedLabels:[],excludeOlderThanHours:10},inboxCapacityLimits:[]})},mode:{type:String,required:!0,validator:t=>["CREATE","EDIT"].includes(t)},policyUsers:{type:Array,default:()=>[]},agentList:{type:Array,default:()=>[]},labelList:{type:Array,default:()=>[]},inboxList:{type:Array,default:()=>[]},showUserSection:{type:Boolean,default:!1},showInboxLimitSection:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isUsersLoading:{type:Boolean,default:!1},isInboxesLoading:{type:Boolean,default:!1}},emits:["submit","addUser","deleteUser","validationChange","deleteInboxLimit","addInboxLimit","updateInboxLimit"],setup(t,{expose:n,emit:a}){const e=t,s=a,{t:r}=Q(),o=Lt({name:"",description:"",exclusionRules:{excludedLabels:[],excludeOlderThanHours:10},inboxCapacityLimits:[]}),i=P({isValid:!1}),l=S(()=>r(`${GI}.${e.mode.toUpperCase()}.${e.mode}_BUTTON`)),c=y=>{i.value=y,s("validationChange",y)},d=y=>{s("deleteInboxLimit",y)},u=y=>{s("addInboxLimit",y)},m=y=>{s("updateInboxLimit",y)},h=()=>{Object.assign(o,{name:"",description:"",exclusionRules:{excludedLabels:[],excludeOlderThanHours:10},inboxCapacityLimits:[]})},_=()=>{s("submit",{...o})};je(()=>e.initialData,y=>{Object.assign(o,y)},{immediate:!0,deep:!0}),n({resetForm:h});const E={props:e,emit:s,t:r,BASE_KEY:GI,state:o,validationState:i,buttonLabel:l,handleValidationChange:c,handleDeleteInboxLimit:d,handleAddInboxLimit:u,handleLimitChange:m,resetForm:h,handleSubmit:_,computed:S,reactive:Lt,ref:P,watch:je,get useI18n(){return Q},BaseInfo:Uw,DataTable:$w,AddDataDropdown:Ph,Button:Se,ExclusionRules:moe,InboxCapacityLimits:Roe};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}},Moe={class:"flex flex-col gap-4 mb-2 divide-y divide-n-weak"},Loe={key:0,class:"flex flex-col gap-4 divide-y divide-n-weak border-t border-n-weak mt-6"},Doe={key:1,class:"py-4 flex-col flex gap-4"},Poe={class:"flex items-end gap-4 w-full justify-between"},koe={class:"flex flex-col items-start gap-1 py-1"},Boe={class:"text-sm font-medium text-n-slate-12 py-1"},Foe={class:"mb-0 text-n-slate-11 text-sm"};function Uoe(t,n,a,e,s,r){return p(),g("form",{onSubmit:Ve(e.handleSubmit,["prevent"])},[f("div",Moe,[v(e.BaseInfo,{"policy-name":e.state.name,"onUpdate:policyName":n[0]||(n[0]=o=>e.state.name=o),description:e.state.description,"onUpdate:description":n[1]||(n[1]=o=>e.state.description=o),"name-label":e.t(`${e.BASE_KEY}.FORM.NAME.LABEL`),"name-placeholder":e.t(`${e.BASE_KEY}.FORM.NAME.PLACEHOLDER`),"description-label":e.t(`${e.BASE_KEY}.FORM.DESCRIPTION.LABEL`),"description-placeholder":e.t(`${e.BASE_KEY}.FORM.DESCRIPTION.PLACEHOLDER`),onValidationChange:e.handleValidationChange},null,8,["policy-name","description","name-label","name-placeholder","description-label","description-placeholder"]),v(e.ExclusionRules,{"excluded-labels":e.state.exclusionRules.excludedLabels,"onUpdate:excludedLabels":n[2]||(n[2]=o=>e.state.exclusionRules.excludedLabels=o),"exclude-older-than-minutes":e.state.exclusionRules.excludeOlderThanHours,"onUpdate:excludeOlderThanMinutes":n[3]||(n[3]=o=>e.state.exclusionRules.excludeOlderThanHours=o),"tags-list":a.labelList},null,8,["excluded-labels","exclude-older-than-minutes","tags-list"])]),v(e.Button,{type:"submit",label:e.buttonLabel,disabled:!e.validationState.isValid||a.isLoading,"is-loading":a.isLoading},null,8,["label","disabled","is-loading"]),a.showInboxLimitSection||a.showUserSection?(p(),g("div",Loe,[a.showInboxLimitSection?(p(),L(e.InboxCapacityLimits,{key:0,"inbox-capacity-limits":e.state.inboxCapacityLimits,"onUpdate:inboxCapacityLimits":n[4]||(n[4]=o=>e.state.inboxCapacityLimits=o),"inbox-list":a.inboxList,"is-fetching":a.isInboxesLoading,onDelete:e.handleDeleteInboxLimit,onAdd:e.handleAddInboxLimit,onUpdate:e.handleLimitChange},null,8,["inbox-capacity-limits","inbox-list","is-fetching"])):O("v-if",!0),a.showUserSection?(p(),g("div",Doe,[f("div",Poe,[f("div",koe,[f("label",Boe,C(e.t(`${e.BASE_KEY}.FORM.USERS.LABEL`)),1),f("p",Foe,C(e.t(`${e.BASE_KEY}.FORM.USERS.DESCRIPTION`)),1)]),v(e.AddDataDropdown,{label:e.t(`${e.BASE_KEY}.FORM.USERS.ADD_BUTTON`),"search-placeholder":e.t(`${e.BASE_KEY}.FORM.USERS.DROPDOWN.SEARCH_PLACEHOLDER`),items:a.agentList,onAdd:n[5]||(n[5]=o=>t.$emit("addUser",o))},null,8,["label","search-placeholder","items"])]),v(e.DataTable,{items:a.policyUsers,"is-fetching":a.isUsersLoading,"empty-state-message":e.t(`${e.BASE_KEY}.FORM.USERS.EMPTY_STATE`),onDelete:n[6]||(n[6]=o=>t.$emit("deleteUser",o))},null,8,["items","is-fetching","empty-state-message"])])):O("v-if",!0)])):O("v-if",!0)],32)}const Hw=G(woe,[["render",Uoe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/assignmentPolicy/pages/components/AgentCapacityPolicyForm.vue"]]),$oe={__name:"AgentCapacityCreatePage",setup(t,{expose:n}){n();const a=ft(),e=Fe(),{t:s}=Q(),r=P(null),o=le("agentCapacityPolicies/getUIFlags"),i=le("labels/getLabels"),l=S(()=>{var h;return(h=i.value)==null?void 0:h.map(({title:_,color:E,id:y})=>({id:y,name:_,color:E}))}),c=S(()=>[{label:s("ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY.INDEX.HEADER.TITLE"),routeName:"agent_capacity_policy_index"},{label:s("ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY.CREATE.HEADER.TITLE")}]),m={router:a,store:e,t:s,formRef:r,uiFlags:o,labelsList:i,allLabels:l,breadcrumbItems:c,handleBreadcrumbClick:h=>{a.push({name:h.routeName})},handleSubmit:async h=>{var _;try{const E=await e.dispatch("agentCapacityPolicies/create",h);Z(s("ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY.CREATE.API.SUCCESS_MESSAGE")),(_=r.value)==null||_.resetForm(),a.push({name:"agent_capacity_policy_edit",params:{id:E.id}})}catch{Z(s("ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY.CREATE.API.ERROR_MESSAGE"))}},computed:S,ref:P,get useI18n(){return Q},get useStore(){return Fe},get useMapGetter(){return le},get useRouter(){return ft},get useAlert(){return Z},Breadcrumb:qi,SettingsLayout:Ha,AgentCapacityPolicyForm:Hw};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}},Goe={class:"flex items-center gap-2 w-full justify-between"};function Voe(t,n,a,e,s,r){return p(),L(e.SettingsLayout,{class:"xl:px-44"},{header:z(()=>[f("div",Goe,[v(e.Breadcrumb,{items:e.breadcrumbItems,onClick:e.handleBreadcrumbClick},null,8,["items"])])]),body:z(()=>[v(e.AgentCapacityPolicyForm,{ref:"formRef",mode:"CREATE","is-loading":e.uiFlags.isCreating,"label-list":e.allLabels,onSubmit:e.handleSubmit},null,8,["is-loading","label-list"])]),_:1})}const Hoe=G($oe,[["render",Voe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/assignmentPolicy/pages/AgentCapacityCreatePage.vue"]]),Ud="ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY",joe={__name:"AgentCapacityEditPage",setup(t,{expose:n}){n();const{t:a}=Q(),e=lt(),s=ft(),r=Fe(),o=le("agentCapacityPolicies/getUIFlags"),i=le("agentCapacityPolicies/getUsersUIFlags"),l=le("agentCapacityPolicies/getAgentCapacityPolicyById"),c=le("agents/getAgents"),d=le("labels/getLabels"),u=le("inboxes/getAllInboxes"),m=le("inboxes/getUIFlags"),h=S(()=>e.params.id),_=S(()=>l.value(h.value)),E=S(()=>{var Y;return(Y=_.value)==null?void 0:Y.id}),y=S(()=>[{label:a(`${Ud}.INDEX.HEADER.TITLE`),routeName:"agent_capacity_policy_index"},{label:a(`${Ud}.EDIT.HEADER.TITLE`)}]),b=Y=>(Y==null?void 0:Y.map(({name:j,title:U,id:J,email:te,avatarUrl:q,thumbnail:K,color:W})=>({name:j||U,id:J,email:te,avatarUrl:q||K,color:W})))||[],A=S(()=>{var Y;return b((Y=_.value)==null?void 0:Y.users)}),T=S(()=>b(Di(c.value)).filter(Y=>{var j;return!((j=A.value)!=null&&j.some(U=>U.id===Y.id))})),I=S(()=>b(d.value)),N=S(()=>{var Y;return((Y=u.value)==null?void 0:Y.slice().sort((j,U)=>j.name.localeCompare(U.name)).map(({name:j,id:U,email:J,phoneNumber:te,channelType:q,medium:K})=>({name:j,id:U,email:J,phoneNumber:te,icon:vs(q,K,"line")})))||[]}),x=S(()=>{var Y,j,U,J,te,q,K,W;return{name:((Y=_.value)==null?void 0:Y.name)||"",description:((j=_.value)==null?void 0:j.description)||"",exclusionRules:{excludedLabels:[...((J=(U=_.value)==null?void 0:U.exclusionRules)==null?void 0:J.excludedLabels)||[]],excludeOlderThanHours:((q=(te=_.value)==null?void 0:te.exclusionRules)==null?void 0:q.excludeOlderThanHours)||10},inboxCapacityLimits:((W=(K=_.value)==null?void 0:K.inboxCapacityLimits)==null?void 0:W.map(ee=>({...ee})))||[]}}),R=({routeName:Y})=>s.push({name:Y}),M=Y=>{r.dispatch("agentCapacityPolicies/removeUser",{policyId:E.value,userId:Y})},w=Y=>{r.dispatch("agentCapacityPolicies/addUser",{policyId:E.value,userData:{id:Y.id,capacity:20}})},D=Y=>{r.dispatch("agentCapacityPolicies/deleteInboxLimit",{policyId:E.value,limitId:Y})},B=Y=>{r.dispatch("agentCapacityPolicies/createInboxLimit",{policyId:E.value,limitData:{inboxId:Y.inboxId,conversationLimit:Y.conversationLimit}})},k=Y=>{r.dispatch("agentCapacityPolicies/updateInboxLimit",{policyId:E.value,limitId:Y.id,limitData:{conversationLimit:Y.conversationLimit}})},V=async Y=>{try{await r.dispatch("agentCapacityPolicies/update",{id:E.value,...Y}),Z(a(`${Ud}.EDIT.API.SUCCESS_MESSAGE`))}catch{Z(a(`${Ud}.EDIT.API.ERROR_MESSAGE`))}},F=async()=>{h.value&&(E.value||await r.dispatch("agentCapacityPolicies/show",h.value),await r.dispatch("agentCapacityPolicies/getUsers",Number(h.value)))};je(h,F,{immediate:!0}),Pe(()=>r.dispatch("agents/get"));const $={BASE_KEY:Ud,t:a,route:e,router:s,store:r,uiFlags:o,usersUiFlags:i,selectedPolicyById:l,agentsList:c,labelsList:d,inboxes:u,inboxesUiFlags:m,routeId:h,selectedPolicy:_,selectedPolicyId:E,breadcrumbItems:y,buildList:b,policyUsers:A,allAgents:T,allLabels:I,allInboxes:N,formData:x,handleBreadcrumbClick:R,handleDeleteUser:M,handleAddUser:w,handleDeleteInboxLimit:D,handleAddInboxLimit:B,handleLimitChange:k,handleSubmit:V,fetchPolicyData:F,computed:S,watch:je,onMounted:Pe,get useI18n(){return Q},get useStore(){return Fe},get useMapGetter(){return le},get useRoute(){return lt},get useRouter(){return ft},get useAlert(){return Z},get camelcaseKeys(){return Di},get getInboxIconByType(){return vs},Breadcrumb:qi,SettingsLayout:Ha,AgentCapacityPolicyForm:Hw};return Object.defineProperty($,"__isScriptSetup",{enumerable:!1,value:!0}),$}},Woe={class:"flex items-center gap-2 w-full justify-between"};function zoe(t,n,a,e,s,r){return p(),L(e.SettingsLayout,{"is-loading":e.uiFlags.isFetchingItem,class:"xl:px-44"},{header:z(()=>[f("div",Woe,[v(e.Breadcrumb,{items:e.breadcrumbItems,onClick:e.handleBreadcrumbClick},null,8,["items"])])]),body:z(()=>[(p(),L(e.AgentCapacityPolicyForm,{key:e.routeId,mode:"EDIT","initial-data":e.formData,"policy-users":e.policyUsers,"agent-list":e.allAgents,"label-list":e.allLabels,"inbox-list":e.allInboxes,"show-user-section":"","show-inbox-limit-section":"","is-loading":e.uiFlags.isUpdating,"is-users-loading":e.usersUiFlags.isFetching,"is-inboxes-loading":e.inboxesUiFlags.isFetching,onSubmit:e.handleSubmit,onAddUser:e.handleAddUser,onDeleteUser:e.handleDeleteUser,onAddInboxLimit:e.handleAddInboxLimit,onUpdateInboxLimit:e.handleLimitChange,onDeleteInboxLimit:e.handleDeleteInboxLimit},null,8,["initial-data","policy-users","agent-list","label-list","inbox-list","is-loading","is-users-loading","is-inboxes-loading"]))]),_:1},8,["is-loading"])}const Yoe=G(joe,[["render",zoe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/assignmentPolicy/pages/AgentCapacityEditPage.vue"]]),Koe={routes:[{path:vt("accounts/:accountId/settings/assignment-policy"),component:cs,children:[{path:"",redirect:t=>({name:"assignment_policy_index",params:t.params})},{path:"index",name:"assignment_policy_index",component:yne,meta:{featureFlag:pt.ASSIGNMENT_V2,permissions:["administrator"]}},{path:"assignment",name:"agent_assignment_policy_index",component:_ae,meta:{featureFlag:pt.ASSIGNMENT_V2,permissions:["administrator"]}},{path:"assignment/create",name:"agent_assignment_policy_create",component:Rse,meta:{featureFlag:pt.ASSIGNMENT_V2,permissions:["administrator"]}},{path:"assignment/edit/:id",name:"agent_assignment_policy_edit",component:Bse,meta:{featureFlag:pt.ASSIGNMENT_V2,permissions:["administrator"]}},{path:"capacity",name:"agent_capacity_policy_index",component:Zse,meta:{featureFlag:pt.ASSIGNMENT_V2,permissions:["administrator"]}},{path:"capacity/create",name:"agent_capacity_policy_create",component:Hoe,meta:{featureFlag:pt.ASSIGNMENT_V2,permissions:["administrator"]}},{path:"capacity/edit/:id",name:"agent_capacity_policy_edit",component:Yoe,meta:{featureFlag:pt.ASSIGNMENT_V2,permissions:["administrator"]}}]}]},Xoe={__name:"ConfirmButton",props:{label:{type:[String,Number],default:""},confirmLabel:{type:[String,Number],default:""},color:{type:String,default:"blue"},confirmColor:{type:String,default:"ruby"},confirmHint:{type:String,default:""},variant:{type:String,default:null},size:{type:String,default:null},justify:{type:String,default:null},icon:{type:[String,Object,Function],default:""},trailingIcon:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1}},emits:["click"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=P(!1),o=P(!1),i=S(()=>r.value?e.confirmLabel:e.label),l=S(()=>r.value?e.confirmColor:e.color),c=()=>{r.value=!1,o.value=!1},u={props:e,emit:s,isConfirmMode:r,isClicked:o,currentLabel:i,currentColor:l,resetConfirmMode:c,handleClick:()=>{r.value?(o.value=!0,s("click"),setTimeout(c,400)):r.value=!0},ref:P,computed:S,Button:Se};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}},qoe={key:0,class:"absolute mt-1 w-full text-[10px] text-center text-n-slate-10"};function Zoe(t,n,a,e,s,r){return p(),g("div",{class:oe(["relative",{"animate-bounce-complete":e.isClicked}])},[v(e.Button,{type:"button",label:e.currentLabel,color:e.currentColor,variant:a.variant,size:a.size,justify:a.justify,icon:a.icon,"trailing-icon":a.trailingIcon,"is-loading":a.isLoading,onClick:e.handleClick,onBlur:e.resetConfirmMode},Ro({_:2},[t.$slots.default?{name:"default",fn:z(()=>[qe(t.$slots,"default",{},void 0,!0)]),key:"0"}:void 0,t.$slots.icon?{name:"icon",fn:z(()=>[qe(t.$slots,"icon",{},void 0,!0)]),key:"1"}:void 0]),1032,["label","color","variant","size","justify","icon","trailing-icon","is-loading"]),e.isConfirmMode&&a.confirmHint?(p(),g("div",qoe,C(a.confirmHint),1)):O("v-if",!0)],2)}const Qoe=G(Xoe,[["render",Zoe],["__scopeId","data-v-1fc583a1"],["__file","/app/app/javascript/dashboard/components-next/button/ConfirmButton.vue"]]),Joe={__name:"AccessToken",props:{value:{type:String,default:""},showResetButton:{type:Boolean,default:!0}},emits:["onCopy","onReset"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=P("password"),o=()=>{r.value=r.value==="password"?"text":"password"},i=S(()=>r.value==="password"?"eye-hide":"eye-show"),d={props:e,emit:s,inputType:r,toggleMasked:o,maskIcon:i,onClick:()=>{s("onCopy",e.value)},onReset:()=>{s("onReset")},ref:P,computed:S,NextButton:Se,ConfirmButton:Qoe};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}},ere={class:"flex flex-row justify-between gap-4"},tre={class:"flex flex-row gap-2"};function nre(t,n,a,e,s,r){const o=H("fluent-icon"),i=H("woot-input");return p(),g("div",ere,[v(i,{name:"access_token",class:"flex-1 [&>input]:!py-1.5 ltr:[&>input]:!pr-9 ltr:[&>input]:!pl-3 rtl:[&>input]:!pl-9 rtl:[&>input]:!pr-3 focus:[&>input]:!border-n-weak [&>input]:cursor-not-allowed relative",styles:{borderRadius:"12px",fontSize:"14px",marginBottom:"2px"},type:e.inputType,"model-value":a.value,readonly:""},{masked:z(()=>[f("button",{class:"absolute top-0 bottom-0 ltr:right-0.5 rtl:left-0.5",type:"button",onClick:e.toggleMasked},[v(o,{icon:e.maskIcon,size:16},null,8,["icon"])])]),_:1},8,["type","model-value"]),f("div",tre,[v(e.NextButton,{label:t.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.COPY"),slate:"",outline:"",type:"button",icon:"i-lucide-copy",class:"rounded-xl",onClick:e.onClick},null,8,["label"]),a.showResetButton?(p(),L(e.ConfirmButton,{key:0,label:t.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.RESET"),"confirm-label":t.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.CONFIRM_RESET"),"confirm-hint":t.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.CONFIRM_HINT"),color:"slate","confirm-color":"ruby",variant:"outline",icon:"i-lucide-key-round",class:"rounded-xl",onClick:e.onReset},null,8,["label","confirm-label","confirm-hint"])):O("v-if",!0)])])}const jw=G(Joe,[["render",nre],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/profile/AccessToken.vue"]]),are={__name:"AgentBotModal",props:{type:{type:String,default:"create",validator:t=>["create","edit"].includes(t)},selectedBot:{type:Object,default:()=>({})}},setup(t,{expose:n}){const a=t,e={CREATE:"create",EDIT:"edit"},s=Fe(),{t:r}=Q(),o=P(null),i=le("agentBots/getUIFlags"),l=Lt({botName:"",botDescription:"",botUrl:"",botAvatar:null,botAvatarUrl:""}),[c,d]=$t(),u=P(""),m=rt({botName:{required:Sl.withMessage(()=>r("AGENT_BOTS.FORM.ERRORS.NAME"),Ge)},botUrl:{required:Sl.withMessage(()=>r("AGENT_BOTS.FORM.ERRORS.URL"),Ge),url:Sl.withMessage(()=>r("AGENT_BOTS.FORM.ERRORS.VALID_URL"),Pl)}},l),h=S(()=>a.type===e.CREATE?i.value.isCreating:i.value.isUpdating),_=S(()=>c.value?r("AGENT_BOTS.ACCESS_TOKEN.TITLE"):a.type===e.CREATE?r("AGENT_BOTS.ADD.TITLE"):r("AGENT_BOTS.EDIT.TITLE")),E=S(()=>c.value?r("AGENT_BOTS.ACCESS_TOKEN.DESCRIPTION"):""),y=S(()=>a.type===e.CREATE?r("AGENT_BOTS.FORM.CREATE"):r("AGENT_BOTS.FORM.UPDATE")),b=S(()=>{var F;return m.value.botName.$error?(F=m.value.botName.$errors[0])==null?void 0:F.$message:""}),A=S(()=>{var F;return m.value.botUrl.$error?(F=m.value.botUrl.$errors[0])==null?void 0:F.$message:""}),T=S(()=>c.value||a.type===e.EDIT||u.value),I=()=>{Object.assign(l,{botName:"",botDescription:"",botUrl:"",botAvatar:null,botAvatarUrl:""}),m.value.$reset()},N=({file:F,url:$})=>{l.botAvatar=F,l.botAvatarUrl=$},x=async()=>{var F;if((F=a.selectedBot)!=null&&F.id)try{await s.dispatch("agentBots/deleteAgentBotAvatar",a.selectedBot.id),l.botAvatar=null,l.botAvatarUrl="",Z(r("AGENT_BOTS.AVATAR.SUCCESS_DELETE"))}catch{Z(r("AGENT_BOTS.AVATAR.ERROR_DELETE"))}else l.botAvatar=null,l.botAvatarUrl=""},R=async()=>{if(m.value.$touch(),m.value.$invalid||c.value)return;const F={name:l.botName,description:l.botDescription,outgoing_url:l.botUrl,bot_type:"webhook",avatar:l.botAvatar},$=a.type===e.CREATE;try{const Y=$?F:{id:a.selectedBot.id,data:F},j=await s.dispatch(`agentBots/${$?"create":"update"}`,Y),U=r($?"AGENT_BOTS.ADD.API.SUCCESS_MESSAGE":"AGENT_BOTS.EDIT.API.SUCCESS_MESSAGE");if(Z(U),$){const{access_token:J,id:te}=j||{};te&&J?(u.value=J,d(!0)):(u.value="",o.value.close())}else o.value.close();I()}catch{const j=r($?"AGENT_BOTS.ADD.API.ERROR_MESSAGE":"AGENT_BOTS.EDIT.API.ERROR_MESSAGE");Z(j)}},M=()=>{if(a.selectedBot&&Object.keys(a.selectedBot).length){const{name:F,description:$,outgoing_url:Y,thumbnail:j,bot_config:U,access_token:J}=a.selectedBot;l.botName=F||"",l.botDescription=$||"",l.botUrl=Y||(U==null?void 0:U.webhook_url)||"",l.botAvatarUrl=j||"",J&&a.type===e.EDIT&&(u.value=J)}else I()},w=async F=>{await Ra(F),Z(r("AGENT_BOTS.ACCESS_TOKEN.COPY_SUCCESSFUL"))},D=async()=>{const F=await s.dispatch("agentBots/resetAccessToken",a.selectedBot.id);F?(u.value=F.access_token,Z(r("AGENT_BOTS.ACCESS_TOKEN.RESET_SUCCESS"))):Z(r("AGENT_BOTS.ACCESS_TOKEN.RESET_ERROR"))},B=()=>{var F;c.value||(F=m.value)==null||F.$reset(),u.value="",d(!1)},k=()=>{B(),o.value.close()};je(()=>a.selectedBot,M,{immediate:!0,deep:!0}),n({dialogRef:o});const V={props:a,MODAL_TYPES:e,store:s,t:r,dialogRef:o,uiFlags:i,formState:l,showAccessToken:c,toggleAccessToken:d,accessToken:u,v$:m,isLoading:h,dialogTitle:_,dialogDescription:E,confirmButtonLabel:y,botNameError:b,botUrlError:A,showAccessTokenInput:T,resetForm:I,handleImageUpload:N,handleAvatarDelete:x,handleSubmit:R,initializeForm:M,onCopyToken:w,onResetToken:D,closeModal:B,onClickClose:k,ref:P,computed:S,reactive:Lt,watch:je,get useStore(){return Fe},get useMapGetter(){return le},get useAlert(){return Z},get useI18n(){return Q},get required(){return Ge},get helpers(){return Sl},get url(){return Pl},get useVuelidate(){return rt},get copyTextToClipboard(){return Ra},get useToggle(){return $t},Dialog:la,NextButton:Se,Input:sn,TextArea:ni,Avatar:qt,AccessToken:jw};return Object.defineProperty(V,"__isScriptSetup",{enumerable:!1,value:!0}),V}},sre={key:0,class:"flex flex-col gap-4"},ore={class:"mb-2 flex flex-col items-start"},rre={class:"mb-2 text-sm font-medium text-n-slate-12"},ire={key:1,class:"flex flex-col gap-1"},lre={key:0,class:"mb-0.5 text-sm font-medium text-n-slate-12"},cre={class:"flex items-center justify-end w-full gap-2 px-0 py-2"};function dre(t,n,a,e,s,r){return p(),L(e.Dialog,{ref:"dialogRef",type:"edit",title:e.dialogTitle,description:e.dialogDescription,"show-cancel-button":!1,"show-confirm-button":!1,onClose:e.closeModal},{default:z(()=>[f("form",{class:"flex flex-col gap-4",onSubmit:Ve(e.handleSubmit,["prevent"])},[!e.showAccessToken||a.type===e.MODAL_TYPES.EDIT?(p(),g("div",sre,[f("div",ore,[f("span",rre,C(t.$t("AGENT_BOTS.FORM.AVATAR.LABEL")),1),v(e.Avatar,{src:e.formState.botAvatarUrl,name:e.formState.botName,size:68,"allow-upload":"","icon-name":"i-lucide-bot-message-square",onUpload:e.handleImageUpload,onDelete:e.handleAvatarDelete},null,8,["src","name"])]),v(e.Input,{id:"bot-name",modelValue:e.formState.botName,"onUpdate:modelValue":n[0]||(n[0]=o=>e.formState.botName=o),label:t.$t("AGENT_BOTS.FORM.NAME.LABEL"),placeholder:t.$t("AGENT_BOTS.FORM.NAME.PLACEHOLDER"),message:e.botNameError,"message-type":e.botNameError?"error":"info",onBlur:n[1]||(n[1]=o=>e.v$.botName.$touch())},null,8,["modelValue","label","placeholder","message","message-type"]),v(e.TextArea,{id:"bot-description",modelValue:e.formState.botDescription,"onUpdate:modelValue":n[2]||(n[2]=o=>e.formState.botDescription=o),label:t.$t("AGENT_BOTS.FORM.DESCRIPTION.LABEL"),placeholder:t.$t("AGENT_BOTS.FORM.DESCRIPTION.PLACEHOLDER")},null,8,["modelValue","label","placeholder"]),v(e.Input,{id:"bot-url",modelValue:e.formState.botUrl,"onUpdate:modelValue":n[3]||(n[3]=o=>e.formState.botUrl=o),label:t.$t("AGENT_BOTS.FORM.WEBHOOK_URL.LABEL"),placeholder:t.$t("AGENT_BOTS.FORM.WEBHOOK_URL.PLACEHOLDER"),message:e.botUrlError,"message-type":e.botUrlError?"error":"info",onBlur:n[4]||(n[4]=o=>e.v$.botUrl.$touch())},null,8,["modelValue","label","placeholder","message","message-type"])])):O("v-if",!0),e.showAccessTokenInput?(p(),g("div",ire,[a.type===e.MODAL_TYPES.EDIT?(p(),g("label",lre,C(t.$t("AGENT_BOTS.ACCESS_TOKEN.TITLE")),1)):O("v-if",!0),a.type===e.MODAL_TYPES.EDIT?(p(),L(e.AccessToken,{key:1,value:e.accessToken,onOnCopy:e.onCopyToken,onOnReset:e.onResetToken},null,8,["value"])):(p(),L(e.AccessToken,{key:2,value:e.accessToken,"show-reset-button":!1,onOnCopy:e.onCopyToken},null,8,["value"]))])):O("v-if",!0),f("div",cre,[v(e.NextButton,{faded:"",slate:"",type:"reset",label:t.$t("AGENT_BOTS.FORM.CANCEL"),onClick:n[5]||(n[5]=o=>e.onClickClose())},null,8,["label"]),e.showAccessToken?O("v-if",!0):(p(),L(e.NextButton,{key:0,type:"submit","data-testid":"label-submit",label:e.confirmButtonLabel,"is-loading":e.isLoading,disabled:e.v$.$invalid},null,8,["label","is-loading","disabled"]))])],32)]),_:1},8,["title","description"])}const ure=G(are,[["render",dre],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/agentBots/components/AgentBotModal.vue"]]),pre={__name:"Index",setup(t,{expose:n}){n();const a={CREATE:"create",EDIT:"edit"},e=Fe(),{t:s}=Q(),r=le("agentBots/getBots"),o=le("agentBots/getUIFlags"),i=P({}),l=P({}),c=P(a.CREATE),d=P(null),u=P(null),m=S(()=>[s("AGENT_BOTS.LIST.TABLE_HEADER.DETAILS"),s("AGENT_BOTS.LIST.TABLE_HEADER.URL")]),h=S(()=>{var I;return((I=i.value)==null?void 0:I.name)||""}),_=()=>{c.value=a.CREATE,i.value={},d.value.dialogRef.open()},E=I=>{c.value=a.EDIT,i.value=I,d.value.dialogRef.open()},y=I=>{i.value=I,u.value.open()},b=async I=>{try{await e.dispatch("agentBots/delete",I),Z(s("AGENT_BOTS.DELETE.API.SUCCESS_MESSAGE"))}catch{Z(s("AGENT_BOTS.DELETE.API.ERROR_MESSAGE"))}finally{l.value[I]=!1,i.value={}}},A=()=>{l.value[i.value.id]=!0,b(i.value.id),u.value.close()};Pe(()=>{e.dispatch("agentBots/get")});const T={MODAL_TYPES:a,store:e,t:s,agentBots:r,uiFlags:o,selectedBot:i,loading:l,modalType:c,agentBotModalRef:d,agentBotDeleteDialogRef:u,tableHeaders:m,selectedBotName:h,openAddModal:_,openEditModal:E,openDeletePopup:y,deleteAgentBot:b,confirmDeletion:A,ref:P,computed:S,onMounted:Pe,get useMapGetter(){return le},get useStore(){return Fe},get useAlert(){return Z},get useI18n(){return Q},SettingsLayout:Ha,BaseSettingsHeader:Va,Button:Se,Avatar:qt,AgentBotModal:ure,Dialog:la};return Object.defineProperty(T,"__isScriptSetup",{enumerable:!1,value:!0}),T}},fre={class:"min-w-full overflow-x-auto divide-y divide-n-strong"},mre={class:"flex-1 divide-y divide-n-weak text-n-slate-12"},hre={class:"py-4 ltr:pr-4 rtl:pl-4"},_re={class:"flex flex-row items-center gap-4"},gre={class:"block font-medium break-words"},bre={key:0,class:"text-xs text-n-slate-12 bg-n-blue-5 inline-block rounded-md py-0.5 px-1 ltr:ml-1 rtl:mr-1"},vre={class:"text-sm text-n-slate-11"},Ere={class:"py-4 ltr:pr-4 rtl:pl-4 text-sm"},Sre={class:"py-4 min-w-xs"},Tre={class:"flex gap-1 justify-end"};function Are(t,n,a,e,s,r){const o=nt("tooltip");return p(),L(e.SettingsLayout,{"is-loading":e.uiFlags.isFetching,"loading-message":e.t("AGENT_BOTS.LIST.LOADING"),"no-records-found":!e.agentBots.length,"no-records-message":e.t("AGENT_BOTS.LIST.404")},{header:z(()=>[v(e.BaseSettingsHeader,{title:e.t("AGENT_BOTS.HEADER"),description:e.t("AGENT_BOTS.DESCRIPTION"),"link-text":e.t("AGENT_BOTS.LEARN_MORE"),"feature-name":"agent_bots"},{actions:z(()=>[v(e.Button,{icon:"i-lucide-circle-plus",label:t.$t("AGENT_BOTS.ADD.TITLE"),onClick:e.openAddModal},null,8,["label"])]),_:1},8,["title","description","link-text"])]),body:z(()=>[f("table",fre,[f("thead",null,[(p(!0),g(de,null,Ae(e.tableHeaders,i=>(p(),g("th",{key:i,class:"py-4 font-semibold text-left ltr:pr-4 rtl:pl-4 text-n-slate-11"},C(i),1))),128))]),f("tbody",mre,[(p(!0),g(de,null,Ae(e.agentBots,i=>{var l;return p(),g("tr",{key:i.id},[f("td",hre,[f("div",_re,[v(e.Avatar,{name:i.name,src:i.thumbnail,size:40,"rounded-full":""},null,8,["name","src"]),f("div",null,[f("span",gre,[Oe(C(i.name)+" ",1),i.system_bot?(p(),g("span",bre,C(t.$t("AGENT_BOTS.GLOBAL_BOT_BADGE")),1)):O("v-if",!0)]),f("span",vre,C(i.description),1)])])]),f("td",Ere,C(i.outgoing_url||((l=i.bot_config)==null?void 0:l.webhook_url)),1),f("td",Sre,[f("div",Tre,[i.system_bot?O("v-if",!0):ce((p(),L(e.Button,{key:0,icon:"i-lucide-pen",slate:"",xs:"",faded:"","is-loading":e.loading[i.id],onClick:c=>e.openEditModal(i)},null,8,["is-loading","onClick"])),[[o,e.t("AGENT_BOTS.EDIT.BUTTON_TEXT"),void 0,{top:!0}]]),i.system_bot?O("v-if",!0):ce((p(),L(e.Button,{key:1,icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"","is-loading":e.loading[i.id],onClick:c=>e.openDeletePopup(i)},null,8,["is-loading","onClick"])),[[o,e.t("AGENT_BOTS.DELETE.BUTTON_TEXT"),void 0,{top:!0}]])])])])}),128))])])]),default:z(()=>[v(e.AgentBotModal,{ref:"agentBotModalRef",type:e.modalType,"selected-bot":e.selectedBot},null,8,["type","selected-bot"]),v(e.Dialog,{ref:"agentBotDeleteDialogRef",type:"alert",title:e.t("AGENT_BOTS.DELETE.CONFIRM.TITLE"),description:e.t("AGENT_BOTS.DELETE.CONFIRM.MESSAGE",{name:e.selectedBotName}),"is-loading":e.uiFlags.isDeleting,"confirm-button-label":e.t("AGENT_BOTS.DELETE.CONFIRM.YES"),"cancel-button-label":e.t("AGENT_BOTS.DELETE.CONFIRM.NO"),onConfirm:e.confirmDeletion},null,8,["title","description","is-loading","confirm-button-label","cancel-button-label"])]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"])}const yre=G(pre,[["render",Are],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/agentBots/Index.vue"]]),Ire={routes:[{path:vt("accounts/:accountId/settings/agent-bots"),meta:{permissions:["administrator"]},component:cs,children:[{path:"",name:"agent_bots",component:yre,meta:{featureFlag:pt.AGENT_BOTS,permissions:["administrator"]}}]}]},Cre=[{id:0,key:"CONVERSATION"},{id:1,key:"CONTACT"}],Ww=[{id:0,key:"TEXT"},{id:1,key:"NUMBER"},{id:4,key:"LINK"},{id:5,key:"DATE"},{id:6,key:"LIST"},{id:7,key:"CHECKBOX"}],Ore={components:{NextButton:Se},props:{onClose:{type:Function,default:()=>{}},selectedAttributeModelTab:{type:Number,default:0}},setup(){return{v$:rt()}},data(){return{displayName:"",description:"",attributeModel:this.selectedAttributeModelTab||0,attributeType:0,attributeKey:"",regexPattern:null,regexCue:null,regexEnabled:!1,values:[],options:[],show:!0,isTouched:!1}},computed:{..._t({uiFlags:"getUIFlags"}),models(){return Cre.map(t=>({...t,option:this.$t(`ATTRIBUTES_MGMT.ATTRIBUTE_MODELS.${t.key}`)}))},types(){return Ww.map(t=>({...t,option:this.$t(`ATTRIBUTES_MGMT.ATTRIBUTE_TYPES.${t.key}`)}))},isMultiselectInvalid(){return this.isTouched&&this.values.length===0},isTagInputInvalid(){return this.isAttributeTypeList&&this.values.length===0},attributeListValues(){return this.values.map(t=>t.name)},isButtonDisabled(){return this.v$.displayName.$invalid||this.v$.description.$invalid||this.uiFlags.isCreating||this.isTagInputInvalid},keyErrorMessage(){return this.v$.attributeKey.isKey?this.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.ERROR"):this.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.IN_VALID")},isAttributeTypeList(){return this.attributeType===6},isAttributeTypeText(){return this.attributeType===0},isRegexEnabled(){return this.regexEnabled}},validations:{displayName:{required:Ge,minLength:Rt(1)},description:{required:Ge},attributeModel:{required:Ge},attributeType:{required:Ge},attributeKey:{required:Ge,isKey(t){return!(t.indexOf(" ")>=0)}}},methods:{addTagValue(t){const n={name:t};this.values.push(n),this.$refs.tagInput.$el.focus()},onTouch(){this.isTouched=!0},onDisplayNameChange(){this.attributeKey=f4(this.displayName)},toggleRegexEnabled(){this.regexEnabled=!this.regexEnabled},async addAttributes(){if(this.v$.$touch(),!this.v$.$invalid){this.regexEnabled||(this.regexPattern=null,this.regexCue=null);try{await this.$store.dispatch("attributes/create",{attribute_display_name:this.displayName,attribute_description:this.description,attribute_model:this.attributeModel,attribute_display_type:this.attributeType,attribute_key:this.attributeKey,attribute_values:this.attributeListValues,regex_pattern:this.regexPattern?new RegExp(this.regexPattern).toString():null,regex_cue:this.regexCue}),this.alertMessage=this.$t("ATTRIBUTES_MGMT.ADD.API.SUCCESS_MESSAGE"),this.onClose()}catch(t){const n=t==null?void 0:t.message;this.alertMessage=n||this.$t("ATTRIBUTES_MGMT.ADD.API.ERROR_MESSAGE")}finally{Z(this.alertMessage)}}}}},Nre={class:"flex flex-col h-auto overflow-auto"},xre={class:"w-full"},Rre=["value"],wre={key:0,class:"message"},Mre=["placeholder"],Lre={key:0,class:"message"},Dre=["value"],Pre={key:0,class:"message"},kre={key:0,class:"multiselect--wrap"},Bre={key:1},Fre={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function Ure(t,n,a,e,s,r){const o=H("woot-modal-header"),i=H("woot-input"),l=H("multiselect"),c=H("NextButton"),d=H("woot-modal");return p(),L(d,{show:s.show,"onUpdate:show":n[12]||(n[12]=u=>s.show=u),"on-close":a.onClose},{default:z(()=>[f("div",Nre,[v(o,{"header-title":t.$t("ATTRIBUTES_MGMT.ADD.TITLE")},null,8,["header-title"]),f("form",{class:"flex w-full",onSubmit:n[11]||(n[11]=Ve((...u)=>r.addAttributes&&r.addAttributes(...u),["prevent"]))},[f("div",xre,[f("label",{class:oe({error:e.v$.attributeModel.$error})},[Oe(C(t.$t("ATTRIBUTES_MGMT.ADD.FORM.MODEL.LABEL"))+" ",1),ce(f("select",{"onUpdate:modelValue":n[0]||(n[0]=u=>s.attributeModel=u)},[(p(!0),g(de,null,Ae(r.models,u=>(p(),g("option",{key:u.id,value:u.id},C(u.option),9,Rre))),128))],512),[[Un,s.attributeModel]]),e.v$.attributeModel.$error?(p(),g("span",wre,C(t.$t("ATTRIBUTES_MGMT.ADD.FORM.MODEL.ERROR")),1)):O("v-if",!0)],2),v(i,{modelValue:s.displayName,"onUpdate:modelValue":[n[1]||(n[1]=u=>s.displayName=u),r.onDisplayNameChange],label:t.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.LABEL"),type:"text",class:oe({error:e.v$.displayName.$error}),error:e.v$.displayName.$error?t.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.ERROR"):"",placeholder:t.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.PLACEHOLDER"),onBlur:e.v$.displayName.$touch},null,8,["modelValue","label","class","error","placeholder","onUpdate:modelValue","onBlur"]),v(i,{modelValue:s.attributeKey,"onUpdate:modelValue":n[2]||(n[2]=u=>s.attributeKey=u),label:t.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.LABEL"),type:"text",class:oe({error:e.v$.attributeKey.$error}),error:e.v$.attributeKey.$error?r.keyErrorMessage:"",placeholder:t.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.PLACEHOLDER"),onBlur:e.v$.attributeKey.$touch},null,8,["modelValue","label","class","error","placeholder","onBlur"]),f("label",{class:oe({error:e.v$.description.$error})},[Oe(C(t.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.LABEL"))+" ",1),ce(f("textarea",{"onUpdate:modelValue":n[3]||(n[3]=u=>s.description=u),rows:"3",type:"text",placeholder:t.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.PLACEHOLDER"),onBlur:n[4]||(n[4]=(...u)=>e.v$.description.$touch&&e.v$.description.$touch(...u))},null,40,Mre),[[Et,s.description]]),e.v$.description.$error?(p(),g("span",Lre,C(t.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.ERROR")),1)):O("v-if",!0)],2),f("label",{class:oe({error:e.v$.attributeType.$error})},[Oe(C(t.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LABEL"))+" ",1),ce(f("select",{"onUpdate:modelValue":n[5]||(n[5]=u=>s.attributeType=u)},[(p(!0),g(de,null,Ae(r.types,u=>(p(),g("option",{key:u.id,value:u.id},C(u.option),9,Dre))),128))],512),[[Un,s.attributeType]]),e.v$.attributeType.$error?(p(),g("span",Pre,C(t.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.ERROR")),1)):O("v-if",!0)],2),r.isAttributeTypeList?(p(),g("div",kre,[f("label",null,C(t.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LIST.LABEL")),1),v(l,{ref:"tagInput",modelValue:s.values,"onUpdate:modelValue":n[6]||(n[6]=u=>s.values=u),placeholder:t.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LIST.PLACEHOLDER"),label:"name","track-by":"name",class:oe({invalid:r.isMultiselectInvalid}),options:s.options,multiple:"",taggable:"",onClose:r.onTouch,onTag:r.addTagValue},null,8,["modelValue","placeholder","class","options","onClose","onTag"]),ce(f("label",{class:"text-n-ruby-9 dark:text-n-ruby-9 text-sm font-normal mt-1"},C(t.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LIST.ERROR")),513),[[En,r.isMultiselectInvalid]])])):O("v-if",!0),r.isAttributeTypeText?(p(),g("div",Bre,[ce(f("input",{"onUpdate:modelValue":n[7]||(n[7]=u=>s.regexEnabled=u),type:"checkbox",onInput:n[8]||(n[8]=(...u)=>r.toggleRegexEnabled&&r.toggleRegexEnabled(...u))},null,544),[[bn,s.regexEnabled]]),Oe(" "+C(t.$t("ATTRIBUTES_MGMT.ADD.FORM.ENABLE_REGEX.LABEL")),1)])):O("v-if",!0),r.isAttributeTypeText&&r.isRegexEnabled?(p(),L(i,{key:2,modelValue:s.regexPattern,"onUpdate:modelValue":n[9]||(n[9]=u=>s.regexPattern=u),label:t.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_PATTERN.LABEL"),type:"text",placeholder:t.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_PATTERN.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):O("v-if",!0),r.isAttributeTypeText&&r.isRegexEnabled?(p(),L(i,{key:3,modelValue:s.regexCue,"onUpdate:modelValue":n[10]||(n[10]=u=>s.regexCue=u),label:t.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_CUE.LABEL"),type:"text",placeholder:t.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_CUE.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):O("v-if",!0),f("div",Fre,[v(c,{faded:"",slate:"",type:"reset",label:t.$t("ATTRIBUTES_MGMT.ADD.CANCEL_BUTTON_TEXT"),onClick:Ve(a.onClose,["prevent"])},null,8,["label","onClick"]),v(c,{type:"submit",label:t.$t("ATTRIBUTES_MGMT.ADD.SUBMIT"),disabled:r.isButtonDisabled},null,8,["label","disabled"])])])],32)])]),_:1},8,["show","on-close"])}const $re=G(Ore,[["render",Ure],["__scopeId","data-v-51d56ac2"],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/attributes/AddAttribute.vue"]]),Gre={components:{NextButton:Se},props:{selectedAttribute:{type:Object,default:()=>{}},isUpdating:{type:Boolean,default:!1}},emits:["onClose"],setup(){return{v$:rt()}},data(){return{displayName:"",description:"",attributeType:0,regexPattern:null,regexCue:null,regexEnabled:!1,show:!0,attributeKey:"",values:[],options:[],isTouched:!0}},validations:{displayName:{required:Ge},attributeType:{required:Ge},description:{required:Ge,minLength:Rt(1)},attributeKey:{required:Ge,isKey(t){return!(t.indexOf(" ")>=0)}}},computed:{types(){return Ww.map(t=>({...t,option:this.$t(`ATTRIBUTES_MGMT.ATTRIBUTE_TYPES.${t.key}`)}))},setAttributeListValue(){return this.selectedAttribute.attribute_values.map(t=>({name:t}))},updatedAttributeListValues(){return this.values.map(t=>t.name)},isButtonDisabled(){return this.v$.description.$invalid||this.isMultiselectInvalid},isMultiselectInvalid(){return this.isAttributeTypeList&&this.isTouched&&this.values.length===0},pageTitle(){return`${this.$t("ATTRIBUTES_MGMT.EDIT.TITLE")} - ${this.selectedAttribute.attribute_display_name}`},selectedAttributeType(){var t;return(t=this.types.find(n=>n.key.toLowerCase()===this.selectedAttribute.attribute_display_type))==null?void 0:t.id},keyErrorMessage(){return this.v$.attributeKey.isKey?this.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.ERROR"):this.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.IN_VALID")},isAttributeTypeList(){return this.attributeType===6},isAttributeTypeText(){return this.attributeType===0},isRegexEnabled(){return this.regexEnabled}},mounted(){this.setFormValues()},methods:{onClose(){this.$emit("onClose")},addTagValue(t){const n={name:t};this.values.push(n),this.$refs.tagInput.$el.focus()},setFormValues(){const t=this.selectedAttribute.regex_pattern?zf(this.selectedAttribute.regex_pattern).source:null;this.displayName=this.selectedAttribute.attribute_display_name,this.description=this.selectedAttribute.attribute_description,this.attributeType=this.selectedAttributeType,this.attributeKey=this.selectedAttribute.attribute_key,this.regexPattern=t,this.regexCue=this.selectedAttribute.regex_cue,this.regexEnabled=t!=null,this.values=this.setAttributeListValue},async editAttributes(){if(this.v$.$touch(),!this.v$.$invalid){this.regexEnabled||(this.regexPattern=null,this.regexCue=null);try{await this.$store.dispatch("attributes/update",{id:this.selectedAttribute.id,attribute_description:this.description,attribute_display_name:this.displayName,attribute_values:this.updatedAttributeListValues,regex_pattern:this.regexPattern?new RegExp(this.regexPattern).toString():null,regex_cue:this.regexCue}),this.alertMessage=this.$t("ATTRIBUTES_MGMT.EDIT.API.SUCCESS_MESSAGE"),this.onClose()}catch(t){const n=t==null?void 0:t.message;this.alertMessage=n||this.$t("ATTRIBUTES_MGMT.EDIT.API.ERROR_MESSAGE")}finally{Z(this.alertMessage)}}},toggleRegexEnabled(){this.regexEnabled=!this.regexEnabled}}},Vre={class:"flex flex-col h-auto overflow-auto"},Hre={class:"w-full"},jre=["placeholder"],Wre={key:0,class:"message"},zre=["value"],Yre={key:0,class:"message"},Kre={key:0,class:"multiselect--wrap"},Xre={key:1},qre={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function Zre(t,n,a,e,s,r){const o=H("woot-modal-header"),i=H("woot-input"),l=H("multiselect"),c=H("NextButton");return p(),g("div",Vre,[v(o,{"header-title":r.pageTitle},null,8,["header-title"]),f("form",{class:"flex flex-col w-full",onSubmit:n[10]||(n[10]=Ve((...d)=>r.editAttributes&&r.editAttributes(...d),["prevent"]))},[f("div",Hre,[v(i,{modelValue:s.displayName,"onUpdate:modelValue":n[0]||(n[0]=d=>s.displayName=d),label:t.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.LABEL"),type:"text",class:oe({error:e.v$.displayName.$error}),error:e.v$.displayName.$error?t.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.ERROR"):"",placeholder:t.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.PLACEHOLDER"),onBlur:e.v$.displayName.$touch},null,8,["modelValue","label","class","error","placeholder","onBlur"]),v(i,{modelValue:s.attributeKey,"onUpdate:modelValue":n[1]||(n[1]=d=>s.attributeKey=d),label:t.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.LABEL"),type:"text",class:oe({error:e.v$.attributeKey.$error}),error:e.v$.attributeKey.$error?r.keyErrorMessage:"",placeholder:t.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.PLACEHOLDER"),readonly:"",onBlur:e.v$.attributeKey.$touch},null,8,["modelValue","label","class","error","placeholder","onBlur"]),f("label",{class:oe({error:e.v$.description.$error})},[Oe(C(t.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.LABEL"))+" ",1),ce(f("textarea",{"onUpdate:modelValue":n[2]||(n[2]=d=>s.description=d),rows:"5",type:"text",placeholder:t.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.PLACEHOLDER"),onBlur:n[3]||(n[3]=(...d)=>e.v$.description.$touch&&e.v$.description.$touch(...d))},null,40,jre),[[Et,s.description]]),e.v$.description.$error?(p(),g("span",Wre,C(t.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.ERROR")),1)):O("v-if",!0)],2),f("label",{class:oe({error:e.v$.attributeType.$error})},[Oe(C(t.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LABEL"))+" ",1),ce(f("select",{"onUpdate:modelValue":n[4]||(n[4]=d=>s.attributeType=d),disabled:""},[(p(!0),g(de,null,Ae(r.types,d=>(p(),g("option",{key:d.id,value:d.id},C(d.option),9,zre))),128))],512),[[Un,s.attributeType]]),e.v$.attributeType.$error?(p(),g("span",Yre,C(t.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.ERROR")),1)):O("v-if",!0)],2),r.isAttributeTypeList?(p(),g("div",Kre,[f("label",null,C(t.$t("ATTRIBUTES_MGMT.EDIT.TYPE.LIST.LABEL")),1),v(l,{ref:"tagInput",modelValue:s.values,"onUpdate:modelValue":n[5]||(n[5]=d=>s.values=d),placeholder:t.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LIST.PLACEHOLDER"),label:"name","track-by":"name",class:oe({invalid:r.isMultiselectInvalid}),options:s.options,multiple:"",taggable:"",onTag:r.addTagValue},null,8,["modelValue","placeholder","class","options","onTag"]),ce(f("label",{class:"text-n-ruby-9 dark:text-n-ruby-9 text-sm font-normal mt-1"},C(t.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LIST.ERROR")),513),[[En,r.isMultiselectInvalid]])])):O("v-if",!0),r.isAttributeTypeText?(p(),g("div",Xre,[ce(f("input",{"onUpdate:modelValue":n[6]||(n[6]=d=>s.regexEnabled=d),type:"checkbox",onInput:n[7]||(n[7]=(...d)=>r.toggleRegexEnabled&&r.toggleRegexEnabled(...d))},null,544),[[bn,s.regexEnabled]]),Oe(" "+C(t.$t("ATTRIBUTES_MGMT.ADD.FORM.ENABLE_REGEX.LABEL")),1)])):O("v-if",!0),r.isAttributeTypeText&&r.isRegexEnabled?(p(),L(i,{key:2,modelValue:s.regexPattern,"onUpdate:modelValue":n[8]||(n[8]=d=>s.regexPattern=d),label:t.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_PATTERN.LABEL"),type:"text",placeholder:t.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_PATTERN.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):O("v-if",!0),r.isAttributeTypeText&&r.isRegexEnabled?(p(),L(i,{key:3,modelValue:s.regexCue,"onUpdate:modelValue":n[9]||(n[9]=d=>s.regexCue=d),label:t.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_CUE.LABEL"),type:"text",placeholder:t.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_CUE.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):O("v-if",!0)]),f("div",qre,[v(c,{faded:"",slate:"",type:"reset",label:t.$t("ATTRIBUTES_MGMT.ADD.CANCEL_BUTTON_TEXT"),onClick:Ve(r.onClose,["prevent"])},null,8,["label","onClick"]),v(c,{type:"submit",label:t.$t("ATTRIBUTES_MGMT.EDIT.UPDATE_BUTTON_TEXT"),"is-loading":a.isUpdating,disabled:r.isButtonDisabled},null,8,["label","is-loading","disabled"])])],32)])}const Qre=G(Gre,[["render",Zre],["__scopeId","data-v-519f4589"],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/attributes/EditAttribute.vue"]]),Jre={__name:"CustomAttribute",props:{attributeModel:{type:String,default:"conversation_attribute"}},setup(t,{expose:n}){n();const a=t,{t:e}=Q(),s=P(!1),r=P(!1),o=P({}),i=xt(),l=Fe(),c=S(()=>i["attributes/getAttributesByModel"].value(a.attributeModel)),d=S(()=>i["attributes/getUIFlags"].value),u=S(()=>o.value.attribute_display_name),m=S(()=>`${e("ATTRIBUTES_MGMT.DELETE.CONFIRM.YES")} ${u.value}`),h=S(()=>e("ATTRIBUTES_MGMT.DELETE.CONFIRM.NO")),_=S(()=>e("ATTRIBUTES_MGMT.DELETE.CONFIRM.TITLE",{attributeName:u.value})),E=S(()=>`${e("ATTRIBUTES_MGMT.DELETE.CONFIRM.PLACE_HOLDER",{attributeName:u.value})}`),y=async({id:M})=>{var w;try{await l.dispatch("attributes/delete",M),Z(e("ATTRIBUTES_MGMT.DELETE.API.SUCCESS_MESSAGE"))}catch(D){const B=((w=D==null?void 0:D.response)==null?void 0:w.message)||e("ATTRIBUTES_MGMT.DELETE.API.ERROR_MESSAGE");Z(B)}},b=M=>{s.value=!0,o.value=M},A=()=>{s.value=!1},T=()=>{r.value=!1,o.value={}},I=()=>{y(o.value),T()},N=M=>{r.value=!0,o.value=M},x=S(()=>[e("ATTRIBUTES_MGMT.LIST.TABLE_HEADER.NAME"),e("ATTRIBUTES_MGMT.LIST.TABLE_HEADER.DESCRIPTION"),e("ATTRIBUTES_MGMT.LIST.TABLE_HEADER.TYPE"),e("ATTRIBUTES_MGMT.LIST.TABLE_HEADER.KEY")]),R={props:a,t:e,showEditPopup:s,showDeletePopup:r,selectedAttribute:o,getters:i,store:l,attributes:c,uiFlags:d,attributeDisplayName:u,deleteConfirmText:m,deleteRejectText:h,confirmDeleteTitle:_,confirmPlaceHolderText:E,deleteAttributes:y,openEditPopup:b,hideEditPopup:A,closeDelete:T,confirmDeletion:I,openDelete:N,tableHeaders:x,get useAlert(){return Z},EditAttribute:Qre,get useStoreGetters(){return xt},get useStore(){return Fe},computed:S,ref:P,get useI18n(){return Q},Button:Se};return Object.defineProperty(R,"__isScriptSetup",{enumerable:!1,value:!0}),R}},eie={class:"flex flex-col"},tie={class:"min-w-full overflow-x-auto"},nie={class:"divide-y divide-n-weak flex-1 text-n-slate-12"},aie={class:"py-4 ltr:pr-4 rtl:pl-4 overflow-hidden whitespace-nowrap text-ellipsis"},sie={class:"py-4 ltr:pr-4 rtl:pl-4"},oie={class:"py-4 ltr:pr-4 rtl:pl-4 overflow-hidden whitespace-nowrap text-ellipsis"},rie={class:"py-4 ltr:pr-4 rtl:pl-4 attribute-key overflow-hidden whitespace-nowrap text-ellipsis"},iie={class:"py-4 min-w-xs"},lie={class:"flex gap-1 justify-end"};function cie(t,n,a,e,s,r){const o=H("woot-modal"),i=H("woot-confirm-delete-modal"),l=nt("tooltip");return p(),g("div",eie,[f("table",tie,[f("thead",null,[(p(!0),g(de,null,Ae(e.tableHeaders,c=>(p(),g("th",{key:c,class:"py-4 ltr:pr-4 rtl:pl-4 text-left font-semibold text-n-slate-11"},C(c),1))),128))]),f("tbody",nie,[(p(!0),g(de,null,Ae(e.attributes,c=>{var d;return p(),g("tr",{key:c.attribute_key},[f("td",aie,C(c.attribute_display_name),1),f("td",sie,C(c.attribute_description),1),f("td",oie,C(t.$t(`ATTRIBUTES_MGMT.ATTRIBUTE_TYPES.${(d=c.attribute_display_type)==null?void 0:d.toUpperCase()}`)),1),f("td",rie,C(c.attribute_key),1),f("td",iie,[f("div",lie,[ce(v(e.Button,{icon:"i-lucide-pen",slate:"",xs:"",faded:"",onClick:u=>e.openEditPopup(c)},null,8,["onClick"]),[[l,t.$t("ATTRIBUTES_MGMT.LIST.BUTTONS.EDIT"),void 0,{top:!0}]]),ce(v(e.Button,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:u=>e.openDelete(c)},null,8,["onClick"]),[[l,t.$t("ATTRIBUTES_MGMT.LIST.BUTTONS.DELETE"),void 0,{top:!0}]])])])])}),128))])]),v(o,{show:e.showEditPopup,"onUpdate:show":n[0]||(n[0]=c=>e.showEditPopup=c),"on-close":e.hideEditPopup},{default:z(()=>[v(e.EditAttribute,{"selected-attribute":e.selectedAttribute,"is-updating":e.uiFlags.isUpdating,onOnClose:e.hideEditPopup},null,8,["selected-attribute","is-updating"])]),_:1},8,["show"]),e.showDeletePopup?(p(),L(i,{key:0,show:e.showDeletePopup,"onUpdate:show":n[1]||(n[1]=c=>e.showDeletePopup=c),title:e.confirmDeleteTitle,message:t.$t("ATTRIBUTES_MGMT.DELETE.CONFIRM.MESSAGE"),"confirm-text":e.deleteConfirmText,"reject-text":e.deleteRejectText,"confirm-value":e.selectedAttribute.attribute_display_name,"confirm-place-holder-text":e.confirmPlaceHolderText,onOnConfirm:e.confirmDeletion,onOnClose:e.closeDelete},null,8,["show","title","message","confirm-text","reject-text","confirm-value","confirm-place-holder-text"])):O("v-if",!0)])}const die=G(Jre,[["render",cie],["__scopeId","data-v-ac630f4e"],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/attributes/CustomAttribute.vue"]]),uie={__name:"Index",setup(t,{expose:n}){n();const{t:a}=Q(),e=xt(),s=Fe(),r=P(!1),o=P(0),i=S(()=>e["attributes/getUIFlags"].value),l=()=>{r.value=!0},c=()=>{r.value=!1},d=S(()=>[{key:0,name:a("ATTRIBUTES_MGMT.TABS.CONVERSATION")},{key:1,name:a("ATTRIBUTES_MGMT.TABS.CONTACT")}]);Pe(()=>{s.dispatch("attributes/get")});const u=S(()=>o.value?"contact_attribute":"conversation_attribute"),m=S(()=>e["attributes/getAttributesByModel"].value(u.value)),_={t:a,getters:e,store:s,showAddPopup:r,selectedTabIndex:o,uiFlags:i,openAddPopup:l,hideAddPopup:c,tabs:d,attributeModel:u,attributes:m,onClickTabChange:E=>{o.value=E},computed:S,onMounted:Pe,ref:P,BaseSettingsHeader:Va,AddAttribute:$re,CustomAttribute:die,SettingsLayout:Ha,Button:Se,get useI18n(){return Q},get useStoreGetters(){return xt},get useStore(){return Fe}};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}};function pie(t,n,a,e,s,r){const o=H("woot-tabs-item"),i=H("woot-tabs");return p(),L(e.SettingsLayout,{"is-loading":e.uiFlags.isFetching,"loading-message":t.$t("ATTRIBUTES_MGMT.LOADING"),"no-records-found":!e.attributes.length,"no-records-message":t.$t("ATTRIBUTES_MGMT.LIST.EMPTY_RESULT.404")},{header:z(()=>[v(e.BaseSettingsHeader,{title:t.$t("ATTRIBUTES_MGMT.HEADER"),description:t.$t("ATTRIBUTES_MGMT.DESCRIPTION"),"link-text":t.$t("ATTRIBUTES_MGMT.LEARN_MORE"),"feature-name":"custom_attributes"},{actions:z(()=>[v(e.Button,{icon:"i-lucide-circle-plus",label:t.$t("ATTRIBUTES_MGMT.HEADER_BTN_TXT"),onClick:e.openAddPopup},null,8,["label"])]),_:1},8,["title","description","link-text"])]),preBody:z(()=>[v(i,{class:"font-medium [&_ul]:p-0 mb-4",index:e.selectedTabIndex,onChange:e.onClickTabChange},{default:z(()=>[(p(!0),g(de,null,Ae(e.tabs,(l,c)=>(p(),L(o,{key:l.key,index:c,name:l.name,"show-badge":!1,"is-compact":""},null,8,["index","name"]))),128))]),_:1},8,["index"])]),body:z(()=>[(p(),L(e.CustomAttribute,{key:e.attributeModel,"attribute-model":e.attributeModel},null,8,["attribute-model"]))]),default:z(()=>[e.showAddPopup?(p(),L(e.AddAttribute,{key:0,show:e.showAddPopup,"onUpdate:show":n[0]||(n[0]=l=>e.showAddPopup=l),"on-close":e.hideAddPopup,"selected-attribute-model-tab":e.selectedTabIndex},null,8,["show","selected-attribute-model-tab"])):O("v-if",!0)]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"])}const fie=G(uie,[["render",pie],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/attributes/Index.vue"]]),mie={routes:[{path:vt("accounts/:accountId/settings/custom-attributes"),component:cs,children:[{path:"",redirect:t=>({name:"attributes_list",params:t.params})},{path:"list",name:"attributes_list",component:fie,meta:{featureFlag:pt.CUSTOM_ATTRIBUTES,permissions:["administrator"]}}]}]},hie={name:"FilterInput",components:{NextButton:Se},props:{modelValue:{type:Object,default:()=>{}},filterAttributes:{type:Array,default:()=>[]},inputType:{type:String,default:"plain_text"},operators:{type:Array,default:()=>[]},dropdownValues:{type:Array,default:()=>[]},showQueryOperator:{type:Boolean,default:!1},showUserInput:{type:Boolean,default:!0},groupedFilters:{type:Boolean,default:!1},filterGroups:{type:Array,default:()=>[]},customAttributeType:{type:String,default:""},errorMessage:{type:String,default:""}},emits:["update:modelValue","removeFilter","resetFilter"],computed:{attributeKey:{get(){return this.modelValue?this.modelValue.attribute_key:null},set(t){const n=this.modelValue||{};this.$emit("update:modelValue",{...n,attribute_key:t})}},filterOperator:{get(){return this.modelValue?this.modelValue.filter_operator:null},set(t){const n=this.modelValue||{};this.$emit("update:modelValue",{...n,filter_operator:t})}},values:{get(){return this.modelValue?this.modelValue.values:null},set(t){const n=this.modelValue||{};this.$emit("update:modelValue",{...n,values:t})}},query_operator:{get(){return this.modelValue?this.modelValue.query_operator:null},set(t){const n=this.modelValue||{};this.$emit("update:modelValue",{...n,query_operator:t})}},custom_attribute_type:{get(){return this.customAttributeType?this.customAttributeType:""},set(){const t=this.modelValue||{};this.$emit("update:modelValue",{...t,custom_attribute_type:this.customAttributeType})}}},watch:{customAttributeType:{handler(t){t==="conversation_attribute"||t==="contact_attribute"?this.modelValue.custom_attribute_type=this.customAttributeType:this.modelValue.custom_attribute_type=""},immediate:!0}},methods:{removeFilter(){this.$emit("removeFilter")},resetFilter(){this.$emit("resetFilter")},getInputErrorClass(t){return t?"bg-n-ruby-8/20 border-n-ruby-5 dark:border-n-ruby-5":"bg-n-background border-n-weak dark:border-n-weak"}}},_ie={class:"flex gap-1"},gie=["label"],bie=["value"],vie=["value","disabled"],Eie=["value"],Sie={key:2,class:"flex-grow mr-1 filter__answer--wrap"},Tie={key:0,class:"multiselect-wrap--small"},Aie={key:1,class:"multiselect-wrap--small"},yie={key:2,class:"multiselect-wrap--small"},Iie=["placeholder"],Cie={key:0,class:"filter-error"},Oie={key:0,class:"flex items-center justify-center relative my-2.5 mx-0"},Nie={value:"and"},xie={value:"or"};function Rie(t,n,a,e,s,r){const o=H("multiselect"),i=H("NextButton");return p(),g("div",null,[f("div",{class:oe(["p-2 border border-solid rounded-lg",r.getInputErrorClass(a.errorMessage)])},[f("div",_ie,[a.groupedFilters?ce((p(),g("select",{key:0,"onUpdate:modelValue":n[0]||(n[0]=l=>r.attributeKey=l),class:"max-w-[30%] mb-0 mr-1",onChange:n[1]||(n[1]=l=>r.resetFilter())},[(p(!0),g(de,null,Ae(a.filterGroups,(l,c)=>(p(),g("optgroup",{key:c,label:l.name},[(p(!0),g(de,null,Ae(l.attributes,d=>(p(),g("option",{key:d.key,value:d.key,selected:!0},C(d.name),9,bie))),128))],8,gie))),128))],544)),[[Un,r.attributeKey]]):ce((p(),g("select",{key:1,"onUpdate:modelValue":n[2]||(n[2]=l=>r.attributeKey=l),class:"max-w-[30%] mb-0 mr-1",onChange:n[3]||(n[3]=l=>r.resetFilter())},[(p(!0),g(de,null,Ae(a.filterAttributes,l=>(p(),g("option",{key:l.key,value:l.key,disabled:l.disabled},C(l.name),9,vie))),128))],544)),[[Un,r.attributeKey]]),ce(f("select",{"onUpdate:modelValue":n[4]||(n[4]=l=>r.filterOperator=l),class:"max-w-[20%] mb-0 mr-1"},[(p(!0),g(de,null,Ae(a.operators,(l,c)=>(p(),g("option",{key:c,value:l.value},C(t.$t(`FILTER.OPERATOR_LABELS.${l.value}`)),9,Eie))),128))],512),[[Un,r.filterOperator]]),a.showUserInput?(p(),g("div",Sie,[a.inputType==="multi_select"?(p(),g("div",Tie,[v(o,{modelValue:r.values,"onUpdate:modelValue":n[5]||(n[5]=l=>r.values=l),"track-by":"id",label:"name",placeholder:t.$t("FORMS.MULTISELECT.SELECT"),multiple:"","selected-label":"","select-label":t.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:a.dropdownValues,"allow-empty":!1},{noOptions:z(()=>[Oe(C(t.$t("FORMS.MULTISELECT.NO_OPTIONS")),1)]),_:1},8,["modelValue","placeholder","select-label","options"])])):a.inputType==="search_select"?(p(),g("div",Aie,[v(o,{modelValue:r.values,"onUpdate:modelValue":n[6]||(n[6]=l=>r.values=l),"track-by":"id",label:"name",placeholder:t.$t("FORMS.MULTISELECT.SELECT"),"selected-label":"","select-label":t.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:a.dropdownValues,"allow-empty":!1,"option-height":104},{noOptions:z(()=>[Oe(C(t.$t("FORMS.MULTISELECT.NO_OPTIONS")),1)]),_:1},8,["modelValue","placeholder","select-label","options"])])):a.inputType==="date"?(p(),g("div",yie,[ce(f("input",{"onUpdate:modelValue":n[7]||(n[7]=l=>r.values=l),type:"date",editable:!1,class:"!mb-0 datepicker"},null,512),[[Et,r.values]])])):ce((p(),g("input",{key:3,"onUpdate:modelValue":n[8]||(n[8]=l=>r.values=l),type:"text",class:"!mb-0",placeholder:t.$t("FILTER.INPUT_PLACEHOLDER")},null,8,Iie)),[[Et,r.values]])])):O("v-if",!0),v(i,{icon:"i-lucide-x",slate:"",ghost:"",class:"flex-shrink-0",onClick:r.removeFilter},null,8,["onClick"])]),a.errorMessage?(p(),g("p",Cie,C(a.errorMessage),1)):O("v-if",!0)],2),a.showQueryOperator?(p(),g("div",Oie,[n[10]||(n[10]=f("hr",{class:"absolute w-full border-b border-solid border-n-weak"},null,-1)),ce(f("select",{"onUpdate:modelValue":n[9]||(n[9]=l=>r.query_operator=l),class:"relative w-auto mb-0 bg-n-background text-n-slate-12 border-n-weak"},[f("option",Nie,C(t.$t("FILTER.QUERY_DROPDOWN_LABELS.AND")),1),f("option",xie,C(t.$t("FILTER.QUERY_DROPDOWN_LABELS.OR")),1)],512),[[Un,r.query_operator]])])):O("v-if",!0)])}const zw=G(hie,[["render",Rie],["__scopeId","data-v-778d8e6b"],["__file","/app/app/javascript/dashboard/components/widgets/FilterInput/Index.vue"]]),wie={props:{teams:{type:Array,required:!0},modelValue:{type:Object,required:!0}},emits:["update:modelValue"],data(){return{selectedTeams:[],message:""}},mounted(){const{team_ids:t}=this.modelValue;this.selectedTeams=t,this.message=this.modelValue.message},methods:{updateValue(){this.$emit("update:modelValue",{team_ids:this.selectedTeams.map(t=>t.id),message:this.message})}}},Mie={class:"multiselect-wrap--small flex flex-col gap-1 mt-1"},Lie=["placeholder"];function Die(t,n,a,e,s,r){const o=H("multiselect");return p(),g("div",null,[f("div",Mie,[v(o,{modelValue:s.selectedTeams,"onUpdate:modelValue":[n[0]||(n[0]=i=>s.selectedTeams=i),r.updateValue],"track-by":"id",label:"name",placeholder:t.$t("AUTOMATION.ACTION.TEAM_DROPDOWN_PLACEHOLDER"),multiple:"","selected-label":"","select-label":t.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:a.teams,"allow-empty":!1},null,8,["modelValue","placeholder","select-label","options","onUpdate:modelValue"]),ce(f("textarea",{"onUpdate:modelValue":n[1]||(n[1]=i=>s.message=i),rows:"4",placeholder:t.$t("AUTOMATION.ACTION.TEAM_MESSAGE_INPUT_PLACEHOLDER"),onInput:n[2]||(n[2]=(...i)=>r.updateValue&&r.updateValue(...i))},null,40,Lie),[[Et,s.message]])])])}const Pie=G(wie,[["render",Die],["__scopeId","data-v-cbb452a5"],["__file","/app/app/javascript/dashboard/components/widgets/AutomationActionTeamMessageInput.vue"]]),kie={components:{Spinner:ls},props:{initialFileName:{type:String,default:""}},emits:["update:modelValue"],data(){return{uploadState:"idle",label:this.$t("AUTOMATION.ATTACHMENT.LABEL_IDLE")}},mounted(){this.initialFileName&&(this.label=this.initialFileName,this.uploadState="uploaded")},methods:{async onChangeFile(t){this.uploadState="processing",this.label=this.$t("AUTOMATION.ATTACHMENT.LABEL_UPLOADING");try{const n=t.target.files[0],a=await this.$store.dispatch("automations/uploadAttachment",n);this.$emit("update:modelValue",[a]),this.uploadState="uploaded",this.label=this.$t("AUTOMATION.ATTACHMENT.LABEL_UPLOADED")}catch{this.uploadState="failed",this.label=this.$t("AUTOMATION.ATTACHMENT.LABEL_UPLOAD_FAILED"),Z(this.$t("AUTOMATION.ATTACHMENT.UPLOAD_ERROR"))}}}},Bie={class:"file-button"};function Fie(t,n,a,e,s,r){const o=H("Spinner"),i=H("fluent-icon");return p(),g("label",{class:oe(["input-wrapper",s.uploadState])},[s.uploadState!=="processing"?(p(),g("input",{key:0,type:"file",name:"attachment",class:oe(s.uploadState==="processing"?"disabled":""),onChange:n[0]||(n[0]=(...l)=>r.onChangeFile&&r.onChangeFile(...l))},null,34)):O("v-if",!0),s.uploadState==="processing"?(p(),L(o,{key:1})):O("v-if",!0),s.uploadState==="idle"?(p(),L(i,{key:2,icon:"file-upload"})):O("v-if",!0),s.uploadState==="uploaded"?(p(),L(i,{key:3,icon:"checkmark-circle",type:"outline",class:"success-icon"})):O("v-if",!0),s.uploadState==="failed"?(p(),L(i,{key:4,icon:"dismiss-circle",type:"outline",class:"error-icon"})):O("v-if",!0),f("p",Bie,C(s.label),1)],2)}const Uie=G(kie,[["render",Fie],["__scopeId","data-v-0e5e3521"],["__file","/app/app/javascript/dashboard/components/widgets/AutomationFileInput.vue"]]),$ie={__name:"MentionBox",props:{items:{type:Array,default:()=>[]},type:{type:String,default:"canned"}},emits:["mentionSelect"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=P(null),o=P(0),i=()=>{At(()=>{const h=r.value;if(!h)return;const _=h.querySelector(`#mention-item-${o.value}`);_&&_.scrollIntoView({block:"nearest",behavior:"auto"})})},l=()=>{s("mentionSelect",e.items[o.value])};ed({items:S(()=>e.items),onSelect:l,adjustScroll:i,selectedIndex:o}),je(()=>e.items,h=>{h.length<o.value+1&&(o.value=0)}),je(o,i);const m={props:e,emit:s,mentionsListContainerRef:r,selectedIndex:o,adjustScroll:i,onSelect:l,onHover:h=>{o.value=h},onListItemSelection:h=>{o.value=h,l()},variableKey:(h={})=>e.type==="variable"?`{{${h.label}}}`:`/${h.label}`,ref:P,watch:je,computed:S,nextTick:At,get useKeyboardNavigableList(){return ed}};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}},Gie={ref:"mentionsListContainerRef",class:"bg-n-solid-1 p-1 rounded-xl overflow-auto absolute w-full z-20 shadow-md left-0 bottom-full max-h-[9.75rem] border border-solid border-n-strong mention--box"},Vie={class:"mb-0 vertical dropdown menu"},Hie=["onClick"];function jie(t,n,a,e,s,r){const o=H("woot-dropdown-item");return p(),g("div",Gie,[f("ul",Vie,[(p(!0),g(de,null,Ae(a.items,(i,l)=>(p(),L(o,{id:`mention-item-${l}`,key:i.key,class:"!mb-1",onMouseover:c=>e.onHover(l)},{default:z(()=>[f("button",{class:oe(["flex rounded-lg group flex-col gap-0.5 overflow-hidden cursor-pointer items-start px-3 py-2 justify-center w-full h-full text-left hover:bg-n-alpha-black2",{"bg-n-alpha-black2":l===e.selectedIndex}]),onClick:c=>e.onListItemSelection(l)},[qe(t.$slots,"default",{item:i,index:l,selected:l===e.selectedIndex},()=>[f("p",{class:oe(["max-w-full min-w-0 mb-0 overflow-hidden text-sm font-medium text-n-slate-11 group-hover:text-n-slate-12 text-ellipsis whitespace-nowrap",{"text-n-slate-12":l===e.selectedIndex}])},C(i.description),3),f("p",{class:oe(["max-w-full min-w-0 mb-0 overflow-hidden text-xs text-n-slate-11 group-hover:text-n-slate-12 text-ellipsis whitespace-nowrap",{"text-n-slate-12":l===e.selectedIndex}])},C(e.variableKey(i)),3)],!0)],10,Hie)]),_:2},1032,["id","onMouseover"]))),128))])],512)}const IS=G($ie,[["render",jie],["__scopeId","data-v-2fc548e7"],["__file","/app/app/javascript/dashboard/components/widgets/mentions/MentionBox.vue"]]),Wie={components:{MentionBox:IS},props:{searchKey:{type:String,default:""}},emits:["replace"],computed:{..._t({cannedMessages:"getCannedResponses"}),items(){return this.cannedMessages.map(t=>({label:t.short_code,key:t.short_code,description:t.content}))}},watch:{searchKey(){this.fetchCannedResponses()}},mounted(){this.fetchCannedResponses()},methods:{fetchCannedResponses(){this.$store.dispatch("getCannedResponse",{searchKey:this.searchKey})},handleMentionClick(t={}){this.$emit("replace",t.description)}}};function zie(t,n,a,e,s,r){const o=H("MentionBox");return r.items.length?(p(),L(o,{key:0,items:r.items,onMentionSelect:r.handleMentionClick},null,8,["items","onMentionSelect"])):O("v-if",!0)}const CS=G(Wie,[["render",zie],["__file","/app/app/javascript/dashboard/components/widgets/conversation/CannedResponse.vue"]]),Yie={__name:"keyboardEmojiSelector",props:{searchKey:{type:String,default:""}},emits:["selectEmoji"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=Ff([]),o=S(()=>{if(!e.searchKey)return[];const d=e.searchKey.toLowerCase();return r.value.filter(u=>u.searchString.includes(d))});function i(){r.value=UT.flatMap(({emojis:d})=>d.map(({name:u,slug:m,...h})=>({...h,name:u,slug:m,searchString:`${u.replace(/\s+/g,"")} ${m}`.toLowerCase()})))}function l(d={}){s("selectEmoji",d.emoji)}Pe(()=>{i()});const c={props:e,emit:s,allEmojis:r,items:o,loadEmojis:i,handleMentionClick:l,shallowRef:Ff,computed:S,onMounted:Pe,get emojiGroups(){return UT},MentionBox:IS};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}},Kie={class:"max-w-full inline-flex items-center gap-0.5 min-w-0 mb-0 text-sm font-medium text-n-slate-12 group-hover:text-n-brand truncate"};function Xie(t,n,a,e,s,r){return e.items.length?(p(),L(e.MentionBox,{key:0,type:"emoji",items:e.items,onMentionSelect:e.handleMentionClick},{default:z(({item:o,selected:i})=>[f("span",Kie,[Oe(C(o.emoji)+" ",1),f("p",{class:oe(["relative mb-0 truncate bottom-px",{"text-n-brand":i,"font-normal":!i}])}," :"+C(o.name),3)])]),_:1},8,["items"])):O("v-if",!0)}const qie=G(Yie,[["render",Xie],["__file","/app/app/javascript/dashboard/components/widgets/WootWriter/keyboardEmojiSelector.vue"]]),Zie={__name:"TagAgents",props:{searchKey:{type:String,default:""}},emits:["selectAgent"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=xt(),i=S(()=>o["agents/getVerifiedAgents"].value),l=le("teams/getTeams"),c=P(null),d=P(0),u=S(()=>{var x;const T=((x=e.searchKey)==null?void 0:x.trim().toLowerCase())||"",I=(R,M,w)=>R.map(D=>({...D,type:M,displayName:D.name,displayInfo:D[w]})).filter(D=>T?D.displayName.toLowerCase().includes(T):!0);return[{title:r("CONVERSATION.MENTION.AGENTS"),data:I(i.value,"user","email")},{title:r("CONVERSATION.MENTION.TEAMS"),data:I(l.value,"team","description")}].flatMap(({title:R,data:M})=>M.length?[{type:"header",title:R,id:`${R.toLowerCase()}-header`},...M]:[])}),m=S(()=>u.value.filter(T=>T.type!=="header")),h=T=>m.value.findIndex(I=>I.type===T.type&&I.id===T.id),_=()=>{At(()=>{if(c.value){const T=c.value.querySelector(`#mention-item-${d.value}`);T&&T.scrollIntoView({block:"nearest",behavior:"auto"})}})},E=()=>{s("selectAgent",m.value[d.value])};ed({items:m,onSelect:E,adjustScroll:_,selectedIndex:d}),je(m,T=>{T.length<d.value+1&&(d.value=0)});const A={props:e,emit:s,t:r,getters:o,agents:i,teams:l,tagAgentsRef:c,selectedIndex:d,items:u,selectableItems:m,getSelectableIndex:h,adjustScroll:_,onSelect:E,onHover:T=>{d.value=T},onAgentSelect:T=>{d.value=T,E()},Avatar:qt,ref:P,computed:S,watch:je,nextTick:At,get useStoreGetters(){return xt},get useMapGetter(){return le},get useKeyboardNavigableList(){return ed},get useI18n(){return Q}};return Object.defineProperty(A,"__isScriptSetup",{enumerable:!1,value:!0}),A}},Qie={key:0,ref:"tagAgentsRef",class:"vertical dropdown menu mention--box bg-n-solid-1 p-1 rounded-xl text-sm overflow-auto absolute w-full z-20 shadow-md left-0 leading-[1.2] bottom-full max-h-[12.5rem] border border-solid border-n-strong",role:"listbox"},Jie=["id"],ele={key:0,class:"px-2 py-2 text-xs font-medium tracking-wide capitalize text-n-slate-11"},tle=["onClick","onMouseover"],nle={class:"ltr:mr-2 rtl:ml-2"},ale={class:"overflow-hidden flex-1 max-w-full whitespace-nowrap text-ellipsis"};function sle(t,n,a,e,s,r){return p(),g("div",null,[e.items.length?(p(),g("ul",Qie,[(p(!0),g(de,null,Ae(e.items,o=>(p(),g("li",{id:o.type==="header"?void 0:`mention-item-${e.getSelectableIndex(o)}`,key:`${o.type}-${o.id}`},[O(" Section Header "),o.type==="header"?(p(),g("div",ele,C(o.title),1)):(p(),g(de,{key:1},[O(" Selectable Item "),f("div",{class:oe([{"bg-n-alpha-black2":e.getSelectableIndex(o)===e.selectedIndex},"flex items-center px-2 py-1 rounded-md cursor-pointer"]),role:"option",onClick:i=>e.onAgentSelect(e.getSelectableIndex(o)),onMouseover:i=>e.onHover(e.getSelectableIndex(o))},[f("div",nle,[v(e.Avatar,{src:o.thumbnail,name:o.displayName,"rounded-full":""},null,8,["src","name"])]),f("div",ale,[f("h5",{class:oe(["overflow-hidden mb-0 text-sm capitalize whitespace-nowrap text-n-slate-11 text-ellipsis",{"text-n-slate-12":e.getSelectableIndex(o)===e.selectedIndex}])},C(o.displayName),3),f("div",{class:oe(["overflow-hidden text-xs whitespace-nowrap text-ellipsis text-n-slate-10",{"text-n-slate-11":e.getSelectableIndex(o)===e.selectedIndex}])},C(o.displayInfo),3)])],42,tle)],2112))],8,Jie))),128))],512)):O("v-if",!0)])}const ole=G(Zie,[["render",sle],["__file","/app/app/javascript/dashboard/components/widgets/conversation/TagAgents.vue"]]),rle={components:{MentionBox:IS},props:{searchKey:{type:String,default:""}},emits:["selectVariable"],computed:{..._t({customAttributes:"attributes/getAttributes"}),sanitizedSearchKey(){return m4(this.searchKey)},items(){return[...this.standardAttributeVariables,...this.customAttributeVariables]},standardAttributeVariables(){return Y3.filter(t=>t.label.includes(this.sanitizedSearchKey)||t.key.includes(this.sanitizedSearchKey)).map(t=>({label:t.key,key:t.key,description:t.label}))},customAttributeVariables(){return this.customAttributes.map(t=>{const n=t.attribute_model==="conversation_attribute"?"conversation":"contact";return{label:`${n}.custom_attribute.${t.attribute_key}`,key:`${n}.custom_attribute.${t.attribute_key}`,description:t.attribute_description}})}},methods:{handleVariableClick(t={}){this.$emit("selectVariable",t.key)}}};function ile(t,n,a,e,s,r){const o=H("MentionBox");return r.items.length?(p(),L(o,{key:0,type:"variable",items:r.items,onMentionSelect:r.handleVariableClick},null,8,["items","onMentionSelect"])):O("v-if",!0)}const lle=G(rle,[["render",ile],["__scopeId","data-v-52c710f6"],["__file","/app/app/javascript/dashboard/components/widgets/conversation/VariableList.vue"]]),cle={__name:"ToolsDropdown",props:{items:{type:Array,required:!0},selectedIndex:{type:Number,default:0}},emits:["select"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=P(null),o=l=>s("select",l);je(()=>e.selectedIndex,()=>{At(()=>{var c;const l=(c=r.value)==null?void 0:c.querySelector(`#tool-item-${e.selectedIndex}`);l&&l.scrollIntoView({block:"nearest",behavior:"auto"})})},{immediate:!0});const i={props:e,emit:s,toolsDropdownRef:r,onItemClick:o,ref:P,watch:je,nextTick:At};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}},dle={ref:"toolsDropdownRef",class:"w-[22.5rem] p-2 flex flex-col gap-1 z-50 absolute rounded-xl bg-n-alpha-3 shadow outline outline-1 outline-n-weak backdrop-blur-[50px] max-h-[20rem] overflow-y-auto"},ule=["id","onClick"],ple={class:"text-n-slate-12 font-medium text-sm"},fle={class:"text-n-slate-11 text-sm"};function mle(t,n,a,e,s,r){return p(),g("div",dle,[(p(!0),g(de,null,Ae(a.items,(o,i)=>(p(),g("div",{id:`tool-item-${i}`,key:o.id||i,class:oe([{"bg-n-alpha-black2":i===a.selectedIndex},"flex flex-col gap-1 rounded-md py-2 px-2 cursor-pointer hover:bg-n-alpha-black2"]),onClick:l=>e.onItemClick(i)},[f("span",ple,C(o.title),1),f("span",fle,C(o.description),1)],10,ule))),128))],512)}const hle=G(cle,[["render",mle],["__file","/app/app/javascript/dashboard/components-next/captain/assistant/ToolsDropdown.vue"]]),_le={__name:"TagTools",props:{searchKey:{type:String,default:""}},emits:["selectTool"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=le("captainTools/getRecords"),o=P(0),i=S(()=>{var m;const u=((m=e.searchKey)==null?void 0:m.trim().toLowerCase())||"";return r.value.filter(h=>h.title.toLowerCase().includes(u))}),l=()=>{},c=u=>{u&&(o.value=u),s("selectTool",i.value[o.value])};ed({items:i,onSelect:c,adjustScroll:l,selectedIndex:o}),je(i,u=>{u.length<o.value+1&&(o.value=0)});const d={props:e,emit:s,tools:r,selectedIndex:o,filteredTools:i,adjustScroll:l,onSelect:c,ref:P,computed:S,watch:je,ToolsDropdown:hle,get useKeyboardNavigableList(){return ed},get useMapGetter(){return le}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}};function gle(t,n,a,e,s,r){return e.filteredTools.length?(p(),L(e.ToolsDropdown,{key:0,items:e.filteredTools,"selected-index":e.selectedIndex,class:"bottom-20",onSelect:e.onSelect},null,8,["items","selected-index"])):(p(),g(de,{key:1},[],64))}const ble=G(_le,[["render",gle],["__file","/app/app/javascript/dashboard/components/widgets/conversation/TagTools.vue"]]),VI=["strong","em","link","undo","redo","bulletList","orderedList","code"],HI=["strong","em","link","undo","redo","imageUpload"],wDt=["strong","em","link","undo","redo","bulletList","orderedList","h1","h2","h3","imageUpload","code"],OS=["strong","em","link","undo","redo"],jI=[{name:"Small",height:"24px"},{name:"Medium",height:"48px"},{name:"Large",height:"72px"},{name:"Original Size",height:"auto"}],WI=(t,n=0)=>a=>{const e=new RegExp(`(?:^)?${t}[^\\s${t}]{${n},}`,"g"),s=a.before(),r=a.end(),o=a.doc.textBetween(s,r,"\0","\0");let i;for(;i=e.exec(o);){const l=i.input.slice(Math.max(0,i.index-1),i.index);if(!/^[\s\0]?$/.test(l))continue;const c=i.index+a.start(),d=c+i[0].length;if(c<a.pos&&d>=a.pos){const u=i[0],m=u?u.slice(t.length):"";return{range:{from:c,to:d},text:m}}}return null},zI=({matcher:t,suggestionClass:n="prosemirror-mention-node",onEnter:a=()=>!1,onChange:e=()=>!1,onExit:s=()=>!1,onKeyDown:r=()=>!1})=>new k4({key:new B4("mentions"),view(){return{update:(o,i)=>{const l=this.key.getState(i),c=this.key.getState(o.state),d=l.active&&c.active&&l.range.from!==c.range.from,u=!l.active&&c.active,m=l.active&&!c.active,h=!u&&!m&&l.text!==c.text;(m||d)&&s({view:o,range:l.range,text:l.text}),h&&!d&&e({view:o,range:c.range,text:c.text}),(u||d)&&a({view:o,range:c.range,text:c.text})}}},state:{init(){return{active:!1,range:{},text:null}},apply(o,i){const{selection:l}=o,c={...i};if(l.from===l.to){(l.from<i.range.from||l.from>i.range.to)&&(c.active=!1);const d=l.$from,u=t(d);u?(c.active=!0,c.range=u.range,c.text=u.text):c.active=!1}else c.active=!1;return c.active||(c.range={},c.text=null),c}},props:{handleKeyDown(o,i){const{active:l}=this.getState(o.state);return l?r({view:o,event:i}):!1},decorations(o){const{active:i,range:l}=this.getState(o);return i?F4.create(o.doc,[U4.inline(l.from,l.to,{nodeName:"span",class:n})]):null}}}),YI=4e3,Bg=4,vle={__name:"Editor",props:{modelValue:{type:String,default:""},editorId:{type:String,default:""},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},isPrivate:{type:Boolean,default:!1},enableSuggestions:{type:Boolean,default:!0},overrideLineBreaks:{type:Boolean,default:!1},updateSelectionWith:{type:String,default:""},enableVariables:{type:Boolean,default:!1},enableCannedResponses:{type:Boolean,default:!0},enableCaptainTools:{type:Boolean,default:!1},variables:{type:Object,default:()=>({})},enabledMenuOptions:{type:Array,default:()=>[]},signature:{type:String,default:""},allowSignature:{type:Boolean,default:!1},channelType:{type:String,default:""},showImageResizeToolbar:{type:Boolean,default:!1},focusOnMount:{type:Boolean,default:!0}},emits:["typingOn","typingOff","toggleUserMention","toggleCannedMenu","toggleVariablesMenu","toggleToolsMenu","clearSelection","blur","focus","input","update:modelValue"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=(xe,pe,ye=[],Be={},ne=[])=>GT.create({doc:new y_(Sp).parse(xe),plugins:VT({schema:Sp,placeholder:pe,methods:Be,plugins:ye,enabledMenuOptions:ne})}),{isEditorHotKeyEnabled:i,fetchSignatureFlagFromUISettings:l}=Ct(),c=j1(()=>s("typingOn"),()=>s("typingOff"),YI);let d=null,u=null;const m=P(!1),h=P(!1),_=P(!1),E=P(!1),y=P(!1),b=P(""),A=P(""),T=P(""),I=P(""),N=P(""),x=P(null),R=P(!1),M=P({top:0,left:0}),w=P(null),D=jI,B=xn("editorRoot"),k=xn("imageUpload"),V=xn("editor"),F=()=>$T.serialize(d.state.doc),$=S(()=>e.enableVariables&&_.value&&!e.isPrivate),Y=S(()=>e.enableCannedResponses&&h.value&&!e.isPrivate),j=S(()=>e.enabledMenuOptions.length?e.enabledMenuOptions:VI);function U({trigger:xe,minChars:pe=0,showMenu:ye,searchTerm:Be,isAllowed:ne=()=>!0}){return zI({matcher:WI(xe,pe),suggestionClass:"",onEnter:re=>(ne()&&(ye.value=!0,x.value=re.range,d=re.view,Be&&(Be.value=re.text||"")),!1),onChange:re=>(d=re.view,x.value=re.range,Be&&(Be.value=re.text),!1),onExit:()=>(Be&&(Be.value=""),ye.value=!1,!1),onKeyDown:({event:re})=>re.keyCode===13&&ye.value})}const J=S(()=>e.enableSuggestions?[U({trigger:"@",showMenu:y,searchTerm:A,isAllowed:()=>e.enableCaptainTools}),U({trigger:"@",showMenu:m,searchTerm:b,isAllowed:()=>e.isPrivate||!e.enableCaptainTools}),U({trigger:"/",showMenu:h,searchTerm:T,isAllowed:()=>!e.isPrivate}),U({trigger:"{{",showMenu:_,searchTerm:I,isAllowed:()=>!e.isPrivate}),U({trigger:":",minChars:2,showMenu:E,searchTerm:N})]:[]),te=S(()=>e.allowSignature&&!e.isPrivate&&e.channelType?l(e.channelType):!1);je(m,xe=>{s("toggleUserMention",e.isPrivate&&xe)}),je(h,xe=>{s("toggleCannedMenu",!e.isPrivate&&xe)}),je(_,xe=>{s("toggleVariablesMenu",!e.isPrivate&&xe)}),je(y,xe=>{s("toggleToolsMenu",e.enableCaptainTools&&xe)});function q(xe="end"){const{tr:pe}=d.state,ye=xe==="end"?A_.atEnd(pe.doc):A_.atStart(pe.doc);d.dispatch(pe.setSelection(ye)),d.focus()}function K(xe){return xe?(e.signature?Ks(xe,e.signature):xe).trim().length===0:!0}function W(){const{schema:xe,tr:pe}=u,ye=xe.nodes.paragraph.create(),Be=pe.insert(0,ye);d.dispatch(Be),q("start")}function ee(xe){if(e.disabled)return;const pe=Sa(xe);K(pe)&&te.value?W():e.focusOnMount&&q("end")}function ae(){k.value.click()}function ve(xe=e.modelValue){const pe=Sa(xe);u=o(pe,e.placeholder,J.value,{onImageUpload:ae},j.value),d.updateState(u),ee(pe)}function Ce(){let xe=e.modelValue;const pe=K(xe);xe=Oo(xe,e.signature),ve(xe),pe&&W()}function ue(){if(!e.signature)return;let xe=e.modelValue;xe=Ks(xe,e.signature),ve(xe)}function ge(xe){xe?Ce():ue()}function Me(){const xe=B.value.getBoundingClientRect(),pe=w.value.getBoundingClientRect();M.value={top:`${pe.top-xe.top-30}px`,left:`${pe.left-xe.left-4}px`}}function We(xe){e.showImageResizeToolbar&&(jT(w.value,xe,d),R.value=!1)}function Ue(){e.showImageResizeToolbar&&(w.value=document.querySelector("img.ProseMirror-selectednode"),w.value?(R.value=!!w.value,Me()):R.value=!1)}function Re(){s("input",F()),s("update:modelValue",F())}function Le(){w.value&&(document.querySelector("img.ProseMirror-selectednode")||(R.value=!1))}function Xe(){return i("enter")}function et(){return i("cmd_enter")}jn({"Alt+KeyP":{action:q,allowOnFocusedInput:!0},"Alt+KeyL":{action:q,allowOnFocusedInput:!0}});function yt(xe){const{tr:pe}=d.state,ye=KT(d.state,xe);ye&&(d.dispatch(pe.insert(ye.pos,ye.node).scrollIntoView()),q())}async function Dt(xe){try{const{fileUrl:pe}=await dT(xe);pe&&yt(pe),Z(r("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.IMAGE_UPLOAD_SUCCESS"))}catch{Z(r("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.IMAGE_UPLOAD_ERROR"))}}function X(){const xe=k.value.files[0];Jc(xe,Bg)?Dt(xe):Z(r("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.IMAGE_UPLOAD_SIZE_ERROR",{size:Bg})),k.value=""}function se(xe){eA(xe)&&Xe()&&!e.overrideLineBreaks&&xe.preventDefault()}async function ie(xe,pe=0,ye=0){u=zT(d,xe,pe,ye),Re(),await At(),WT(d)}function fe(xe,pe=0){const ye=pe||d.state.selection.from||0;let Be=new y_(Sp).parse(xe);ie(Be,ye,void 0)}function me(xe,pe){if(!d)return;let{node:ye,from:Be,to:ne}=YT(d,xe,pe,x.value,e.variables);if(!ye)return;ie(ye,Be,ne);const re={mention:$a.USED_MENTIONS,cannedResponse:$a.INSERTED_A_CANNED_RESPONSE,variable:$a.INSERTED_A_VARIABLE,emoji:$a.INSERTED_AN_EMOJI,tool:$a.INSERTED_A_TOOL};Nt(re[xe])}function De(xe){JT(xe)&&et()&&!e.overrideLineBreaks&&xe.preventDefault()}function Ye(xe){Xe()&&se(xe),et()&&De(xe)}function ze(){d=new HT(V.value,{state:u,editable:()=>!e.disabled,dispatchTransaction:xe=>{u=u.apply(xe),d.updateState(u),xe.docChanged&&Re()},handleDOMEvents:{keyup:()=>{e.disabled||(c.start(),Le())},keydown:(xe,pe)=>!e.disabled&&Ye(pe),focus:()=>!e.disabled&&s("focus"),click:()=>!e.disabled&&Ue(),blur:()=>{e.disabled||(c.stop(),s("blur"))},paste:(xe,pe)=>{if(e.disabled)return;pe.clipboardData.files.length>0&&pe.preventDefault()}}})}je(S(()=>e.modelValue),(xe="")=>{xe!==F()&&ve(xe)}),je(S(()=>e.editorId),()=>{h.value=!1,E.value=!1,_.value=!1,T.value="",ve(e.modelValue)}),je(S(()=>e.isPrivate),()=>{ve(e.modelValue)}),je(S(()=>e.updateSelectionWith),(xe,pe)=>{if(d&&xe!==pe&&e.updateSelectionWith!==""){const ye=d.state.schema.text(e.updateSelectionWith),Be=d.state.tr.replaceSelectionWith(ye);d.focus(),u=d.state.apply(Be),d.updateState(u),Re(),s("clearSelection")}}),je(te,xe=>{e.allowSignature&&ge(xe)}),Pe(()=>{u=o(e.modelValue,e.placeholder,J.value,{onImageUpload:ae},j.value),ze(),d.updateState(u),e.focusOnMount&&q()}),Ns(cn.INSERT_INTO_RICH_EDITOR,fe);const He={props:e,emit:s,t:r,TYPING_INDICATOR_IDLE_TIME:YI,MAXIMUM_FILE_UPLOAD_SIZE:Bg,createState:o,isEditorHotKeyEnabled:i,fetchSignatureFlagFromUISettings:l,typingIndicator:c,get editorView(){return d},set editorView(xe){d=xe},get state(){return u},set state(xe){u=xe},showUserMentions:m,showCannedMenu:h,showVariables:_,showEmojiMenu:E,showToolsMenu:y,mentionSearchKey:b,toolSearchKey:A,cannedSearchTerm:T,variableSearchTerm:I,emojiSearchTerm:N,range:x,isImageNodeSelected:R,toolbarPosition:M,selectedImageNode:w,sizes:D,editorRoot:B,imageUpload:k,editor:V,contentFromEditor:F,shouldShowVariables:$,shouldShowCannedResponses:Y,editorMenuOptions:j,createSuggestionPlugin:U,plugins:J,sendWithSignature:te,focusEditorInputField:q,isBodyEmpty:K,handleEmptyBodyWithSignature:W,focusEditor:ee,openFileBrowser:ae,reloadState:ve,addSignature:Ce,removeSignature:ue,toggleSignatureInEditor:ge,setToolbarPosition:Me,setURLWithQueryAndImageSize:We,isEditorMouseFocusedOnAnImage:Ue,emitOnChange:Re,updateImgToolbarOnDelete:Le,isEnterToSendEnabled:Xe,isCmdPlusEnterToSendEnabled:et,onImageInsertInEditor:yt,uploadImageToStorage:Dt,onFileChange:X,handleLineBreakWhenEnterToSendEnabled:se,insertNodeIntoEditor:ie,insertContentIntoEditor:fe,insertSpecialContent:me,handleLineBreakWhenCmdAndEnterToSendEnabled:De,onKeydown:Ye,createEditorView:ze,ref:P,unref:Sa,computed:S,watch:je,onMounted:Pe,useTemplateRef:xn,nextTick:At,CannedResponse:CS,KeyboardEmojiSelector:qie,TagAgents:ole,VariableList:lle,TagTools:ble,get useEmitter(){return Ns},get useI18n(){return Q},get useKeyboardEvents(){return jn},get useTrack(){return Nt},get useUISettings(){return Ct},get useAlert(){return Z},get BUS_EVENTS(){return cn},get CONVERSATION_EVENTS(){return $a},get MESSAGE_EDITOR_MENU_OPTIONS(){return VI},get MESSAGE_EDITOR_IMAGE_RESIZES(){return jI},get messageSchema(){return Sp},get buildEditor(){return VT},get EditorView(){return HT},get MessageMarkdownTransformer(){return y_},get MessageMarkdownSerializer(){return $T},get EditorState(){return GT},get Selection(){return A_},get suggestionsPlugin(){return zI},get triggerCharacters(){return WI},get appendSignature(){return Oo},get findNodeToInsertImage(){return KT},get getContentNode(){return YT},get insertAtCursor(){return zT},get removeSignatureHelper(){return Ks},get scrollCursorIntoView(){return WT},get setURLWithQueryAndSize(){return jT},get hasPressedEnterAndNotCmdOrShift(){return eA},get hasPressedCommandAndEnter(){return JT},get createTypingIndicator(){return j1},get checkFileSizeLimit(){return Jc},get uploadFile(){return dT}};return Object.defineProperty(He,"__isScriptSetup",{enumerable:!1,value:!0}),He}},Ele={ref:"editorRoot",class:"relative w-full"},Sle={ref:"editor"},Tle=["onClick"];function Ale(t,n,a,e,s,r){return p(),g("div",Ele,[e.showUserMentions&&a.isPrivate?(p(),L(e.TagAgents,{key:0,"search-key":e.mentionSearchKey,onSelectAgent:n[0]||(n[0]=o=>e.insertSpecialContent("mention",o))},null,8,["search-key"])):O("v-if",!0),e.shouldShowCannedResponses?(p(),L(e.CannedResponse,{key:1,"search-key":e.cannedSearchTerm,onReplace:n[1]||(n[1]=o=>e.insertSpecialContent("cannedResponse",o))},null,8,["search-key"])):O("v-if",!0),e.shouldShowVariables?(p(),L(e.VariableList,{key:2,"search-key":e.variableSearchTerm,onSelectVariable:n[2]||(n[2]=o=>e.insertSpecialContent("variable",o))},null,8,["search-key"])):O("v-if",!0),e.showEmojiMenu?(p(),L(e.KeyboardEmojiSelector,{key:3,"search-key":e.emojiSearchTerm,onSelectEmoji:n[3]||(n[3]=o=>e.insertSpecialContent("emoji",o))},null,8,["search-key"])):O("v-if",!0),e.showToolsMenu?(p(),L(e.TagTools,{key:4,"search-key":e.toolSearchKey,onSelectTool:n[4]||(n[4]=o=>e.insertSpecialContent("tool",o))},null,8,["search-key"])):O("v-if",!0),f("input",{ref:"imageUpload",type:"file",accept:"image/png, image/jpeg, image/jpg, image/gif, image/webp",hidden:"",onChange:e.onFileChange},null,544),f("div",Sle,null,512),ce(f("div",{class:"absolute shadow-md rounded-[6px] flex gap-1 py-1 px-1 bg-n-solid-3 outline outline-1 outline-n-weak text-n-slate-12",style:nn({top:e.toolbarPosition.top,left:e.toolbarPosition.left})},[(p(!0),g(de,null,Ae(e.sizes,o=>(p(),g("button",{key:o.name,class:"text-xs font-medium rounded-[4px] outline outline-1 outline-n-strong px-1.5 py-0.5 hover:bg-n-slate-5",onClick:i=>e.setURLWithQueryAndImageSize(o)},C(o.name),9,Tle))),128))],4),[[En,e.isImageNodeSelected&&a.showImageResizeToolbar]]),qe(t.$slots,"footer")],512)}const ai=G(vle,[["render",Ale],["__file","/app/app/javascript/dashboard/components/widgets/WootWriter/Editor.vue"]]),yle={components:{AutomationActionTeamMessageInput:Pie,AutomationActionFileInput:Uie,WootMessageEditor:ai,NextButton:Se},props:{modelValue:{type:Object,default:()=>null},actionTypes:{type:Array,default:()=>[]},dropdownValues:{type:Array,default:()=>[]},errorMessage:{type:String,default:""},showActionInput:{type:Boolean,default:!0},initialFileName:{type:String,default:""},isMacro:{type:Boolean,default:!1}},emits:["update:modelValue","input","removeAction","resetAction"],computed:{action_name:{get(){return this.modelValue?this.modelValue.action_name:null},set(t){const n=this.modelValue||{};this.$emit("update:modelValue",{...n,action_name:t}),this.$emit("input",{...n,action_name:t})}},action_params:{get(){return this.modelValue?this.modelValue.action_params:null},set(t){const n=this.modelValue||{};this.$emit("update:modelValue",{...n,action_params:t}),this.$emit("input",{...n,action_params:t})}},inputType(){return this.actionTypes.find(t=>t.key===this.action_name).inputType},actionInputStyles(){return{"has-error":this.errorMessage,"is-a-macro":this.isMacro}},castMessageVmodel:{get(){return Array.isArray(this.action_params)?this.action_params[0]:this.action_params},set(t){this.action_params=t}}},methods:{removeAction(){this.$emit("removeAction")},resetAction(){this.$emit("resetAction")}}},Ile={class:"filter-inputs"},Cle=["value"],Ole={key:0,class:"filter__answer--wrap"},Nle={key:0,class:"w-full"},xle={key:0,class:"multiselect-wrap--small"},Rle={key:1,class:"multiselect-wrap--small"},wle=["placeholder"],Mle=["placeholder"],Lle={key:2,class:"filter-error"};function Dle(t,n,a,e,s,r){const o=H("multiselect"),i=H("AutomationActionFileInput"),l=H("NextButton"),c=H("AutomationActionTeamMessageInput"),d=H("WootMessageEditor");return p(),g("div",{class:oe(["filter",r.actionInputStyles])},[f("div",Ile,[ce(f("select",{"onUpdate:modelValue":n[0]||(n[0]=u=>r.action_name=u),class:oe(["action__question",{"full-width":!a.showActionInput}]),onChange:n[1]||(n[1]=u=>r.resetAction())},[(p(!0),g(de,null,Ae(a.actionTypes,u=>(p(),g("option",{key:u.key,value:u.key},C(u.label),9,Cle))),128))],34),[[Un,r.action_name]]),a.showActionInput?(p(),g("div",Ole,[r.inputType?(p(),g("div",Nle,[r.inputType==="search_select"?(p(),g("div",xle,[v(o,{modelValue:r.action_params,"onUpdate:modelValue":n[2]||(n[2]=u=>r.action_params=u),"track-by":"id",label:"name",placeholder:t.$t("FORMS.MULTISELECT.SELECT"),"selected-label":"","select-label":t.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:a.dropdownValues,"allow-empty":!1,"option-height":104},{noOptions:z(()=>[Oe(C(t.$t("FORMS.MULTISELECT.NO_OPTIONS")),1)]),_:1},8,["modelValue","placeholder","select-label","options"])])):r.inputType==="multi_select"?(p(),g("div",Rle,[v(o,{modelValue:r.action_params,"onUpdate:modelValue":n[3]||(n[3]=u=>r.action_params=u),"track-by":"id",label:"name",placeholder:t.$t("FORMS.MULTISELECT.SELECT"),multiple:"","selected-label":"","select-label":t.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:a.dropdownValues,"allow-empty":!1,"option-height":104},{noOptions:z(()=>[Oe(C(t.$t("FORMS.MULTISELECT.NO_OPTIONS")),1)]),_:1},8,["modelValue","placeholder","select-label","options"])])):r.inputType==="email"?ce((p(),g("input",{key:2,"onUpdate:modelValue":n[4]||(n[4]=u=>r.action_params=u),type:"email",class:"answer--text-input",placeholder:t.$t("AUTOMATION.ACTION.EMAIL_INPUT_PLACEHOLDER")},null,8,wle)),[[Et,r.action_params]]):r.inputType==="url"?ce((p(),g("input",{key:3,"onUpdate:modelValue":n[5]||(n[5]=u=>r.action_params=u),type:"url",class:"answer--text-input",placeholder:t.$t("AUTOMATION.ACTION.URL_INPUT_PLACEHOLDER")},null,8,Mle)),[[Et,r.action_params]]):O("v-if",!0),r.inputType==="attachment"?(p(),L(i,{key:4,modelValue:r.action_params,"onUpdate:modelValue":n[6]||(n[6]=u=>r.action_params=u),"initial-file-name":a.initialFileName},null,8,["modelValue","initial-file-name"])):O("v-if",!0)])):O("v-if",!0)])):O("v-if",!0),a.isMacro?O("v-if",!0):(p(),L(l,{key:1,icon:"i-lucide-x",slate:"",ghost:"",class:"flex-shrink-0",onClick:r.removeAction},null,8,["onClick"]))]),r.inputType==="team_message"?(p(),L(c,{key:0,modelValue:r.action_params,"onUpdate:modelValue":n[7]||(n[7]=u=>r.action_params=u),teams:a.dropdownValues},null,8,["modelValue","teams"])):O("v-if",!0),r.inputType==="textarea"?(p(),L(d,{key:1,modelValue:r.castMessageVmodel,"onUpdate:modelValue":n[8]||(n[8]=u=>r.castMessageVmodel=u),rows:"4","enable-variables":"",placeholder:t.$t("AUTOMATION.ACTION.TEAM_MESSAGE_INPUT_PLACEHOLDER"),class:"action-message"},null,8,["modelValue","placeholder"])):O("v-if",!0),a.errorMessage?(p(),g("p",Lle,C(a.errorMessage),1)):O("v-if",!0)],2)}const NS=G(yle,[["render",Dle],["__scopeId","data-v-20103b87"],["__file","/app/app/javascript/dashboard/components/widgets/AutomationActionInput.vue"]]),wn=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"}],Fs=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"contains",label:"Contains"},{value:"does_not_contain",label:"Does not contain"}],qs=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"is_present",label:"Is present"},{value:"is_not_present",label:"Is not present"}],Ple=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"is_present",label:"Is present"},{value:"is_not_present",label:"Is not present"},{value:"is_greater_than",label:"Is greater than"},{value:"is_less_than",label:"Is less than"}],$d=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"contains",label:"Contains"},{value:"does_not_contain",label:"Does not contain"},{value:"starts_with",label:"Starts With"}],kle=[{attribute_key:"message_type",filter_operator:"equal_to",values:"",query_operator:"and",custom_attribute_type:""}],Ble=[{attribute_key:"browser_language",filter_operator:"equal_to",values:"",query_operator:"and",custom_attribute_type:""}],Fle=[{attribute_key:"status",filter_operator:"equal_to",values:"",query_operator:"and",custom_attribute_type:""}],Ule=[{action_name:"assign_agent",action_params:[]}],$le=[{id:"incoming",name:"Incoming",i18nKey:"INCOMING"},{id:"outgoing",name:"Outgoing",i18nKey:"OUTGOING"}],Yw=[{id:"nil",name:"None",i18nKey:"NONE"},{id:"low",name:"Low",i18nKey:"LOW"},{id:"medium",name:"Medium",i18nKey:"MEDIUM"},{id:"high",name:"High",i18nKey:"HIGH"},{id:"urgent",name:"Urgent",i18nKey:"URGENT"}],Gle=t=>t.every(n=>typeof n=="string"),Vle=t=>t.every(n=>typeof n=="number"),Hle=t=>(t.length<=0?t=[]:Gle(t)||Vle(t)?t=[...t]:t=t.map(n=>n.id),t),jle=t=>(t.action_params.id?t.action_params=[t.action_params.id]:t.action_params=[t.action_params],t.action_params),Fv=t=>JSON.parse(JSON.stringify(t)).map(e=>(Array.isArray(e.action_params)?e.action_params=Hle(e.action_params):typeof e.action_params=="object"?e.action_params=jle(e):e.action_params?e.action_params=[e.action_params]:e.action_params=[],e)),xS=t=>({date:"date",text:"plain_text",list:"search_select",checkbox:"search_select"})[t]||"plain_text",Kw=(t,n)=>t.find(a=>a.attribute_key===n),Wle=(t,n)=>t.find(a=>a.attribute_key===n).attribute_values.map(a=>({id:a,name:a})),zle=(t,n)=>t.find(a=>a.attribute_key===n&&a.attribute_display_type==="checkbox"),Yle=(t,n)=>t.find(a=>a.attribute_key===n&&a.attribute_display_type==="list"),Xw=t=>({list:wn,text:qs,number:wn,link:wn,date:Ple,checkbox:wn})[t]||wn,KI=(t,n)=>t.map(a=>({key:a.attribute_key,name:a.attribute_display_name,inputType:xS(a.attribute_display_type),filterOperators:Xw(a.attribute_display_type),customAttributeType:n})),Cm=(t,n="id")=>!t||!Array.isArray(t)?[]:t.map(a=>({id:a[n],name:a.title})),Kle=({agents:t,teams:n,labels:a,slaPolicies:e,type:s,addNoneToListFn:r,priorityOptions:o})=>({assign_agent:r?r(t):t,assign_team:r?r(n):n,send_email_to_team:n,add_label:Cm(a,"title"),remove_label:Cm(a,"title"),change_priority:o,add_sla:e})[s],Xle=({agents:t,booleanFilterOptions:n,campaigns:a,contacts:e,countries:s,customAttributes:r,inboxes:o,languages:i,labels:l,statusFilterOptions:c,teams:d,type:u,priorityOptions:m,messageTypeOptions:h})=>zle(r,u)?n:Yle(r,u)?Wle(r,u):{status:c,assignee_id:t,contact:e,inbox_id:o,team_id:d,campaigns:Cm(a),browser_language:i,conversation_language:i,country_code:s,message_type:h,priority:m,labels:Cm(l,"title")}[u],qle=(t,n=[])=>{const a=t.action_params[0];if(!a)return"";if(t.action_name==="send_attachment"){const e=n.find(s=>s.blob_id===a);if(e)return e.filename.toString()}return""},XI=t=>t==="message_created"?kle:t==="conversation_opened"||t==="conversation_resolved"?Ble:Fle,qI=()=>Ule,Zle=t=>t.map(n=>({key:n.attribute_key,name:n.attribute_display_name,type:n.attribute_display_type})),Qle=(t,n,a)=>t[n].conditions.find(e=>e.key===a).inputType,qw=t=>{const n=JSON.parse(JSON.stringify(t));return n.conditions[n.conditions.length-1].query_operator=null,n.conditions=zs(n.conditions).payload,n.actions=Fv(n.actions),n},Jle=(t,n)=>t.find(a=>a.key===n),ece=(t=[],n=[],a,e)=>{const s=[];return t.length&&s.push({key:"conversation_custom_attribute",name:a,disabled:!0},...t),n.length&&s.push({key:"contact_custom_attribute",name:e,disabled:!0},...n),s},Om=(t,n)=>t[n].conditions,Zw=(t,n,a)=>t[n.event_name].conditions.find(e=>e.key===a),Qw=(t,n,a,e)=>{const s=Kw(t,e);return s?xS(s.attribute_display_type):Zw(n,a,e).inputType},Jw=(t,n,a,e,s)=>{if(e==="edit"){const o=Kw(t,s);if(o)return Xw(o.attribute_display_type)}return Zw(n,a,s).filterOperators},eM=(t,n,a)=>t[n.event_name].conditions.find(e=>e.key===a).customAttributeType,tM=(t,n)=>n==="send_email_to_team"||n==="send_message"?!1:!!t.find(e=>e.key===n).inputType;function nM(){const t=xt(),{t:n}=Q(),a=le("agents/getAgents"),e=le("campaigns/getAllCampaigns"),s=le("contacts/getContacts"),r=le("inboxes/getInboxes"),o=le("labels/getLabels"),i=le("teams/getTeams"),l=le("sla/getSLA"),c=S(()=>[{id:!0,name:n("FILTER.ATTRIBUTE_LABELS.TRUE")},{id:!1,name:n("FILTER.ATTRIBUTE_LABELS.FALSE")}]),d=S(()=>({open:{TEXT:n("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.open.TEXT")},resolved:{TEXT:n("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.resolved.TEXT")},pending:{TEXT:n("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.pending.TEXT")},snoozed:{TEXT:n("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.snoozed.TEXT")},all:{TEXT:n("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.all.TEXT")}})),u=S(()=>{const b=d.value;return[...Object.keys(b).map(A=>({id:A,name:b[A].TEXT})),{id:"all",name:n("CHAT_LIST.FILTER_ALL")}]}),m=S(()=>$le.map(b=>({id:b.id,name:n(`AUTOMATION.MESSAGE_TYPES.${b.i18nKey}`)}))),h=S(()=>Yw.map(b=>({id:b.id,name:n(`AUTOMATION.PRIORITY_TYPES.${b.i18nKey}`)}))),_=b=>[{id:"nil",name:n("AUTOMATION.NONE_OPTION")||"None"},...b||[]];return{booleanFilterOptions:c,statusFilterItems:d,statusFilterOptions:u,priorityOptions:h,messageTypeOptions:m,getConditionDropdownValues:b=>Xle({agents:a.value,booleanFilterOptions:c.value,campaigns:e.value,contacts:s.value,customAttributes:t["attributes/getAttributes"].value,inboxes:r.value,labels:o.value,statusFilterOptions:u.value,priorityOptions:h.value,messageTypeOptions:m.value,teams:i.value,languages:Qf,countries:rs,type:b}),getActionDropdownValues:b=>Kle({agents:a.value,labels:o.value,teams:i.value,slaPolicies:l.value,type:b,addNoneToListFn:_,priorityOptions:h.value}),agents:a,campaigns:e,contacts:s,inboxes:r,labels:o,teams:i,slaPolicies:l}}const tce={message_created:{conditions:[{key:"message_type",name:"MESSAGE_TYPE",inputType:"search_select",filterOperators:wn},{key:"content",name:"MESSAGE_CONTAINS",inputType:"comma_separated_plain_text",filterOperators:Fs},{key:"email",name:"EMAIL",inputType:"plain_text",filterOperators:Fs},{key:"inbox_id",name:"INBOX",inputType:"multi_select",filterOperators:wn},{key:"status",name:"STATUS",inputType:"multi_select",filterOperators:wn},{key:"assignee_id",name:"ASSIGNEE_NAME",inputType:"search_select",filterOperators:qs},{key:"team_id",name:"TEAM_NAME",inputType:"search_select",filterOperators:qs},{key:"priority",name:"PRIORITY",inputType:"multi_select",filterOperators:wn},{key:"conversation_language",name:"CONVERSATION_LANGUAGE",inputType:"multi_select",filterOperators:wn},{key:"phone_number",name:"PHONE_NUMBER",inputType:"plain_text",filterOperators:$d},{key:"labels",name:"LABELS",inputType:"multi_select",filterOperators:qs}],actions:[{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"assign_team",name:"ASSIGN_TEAM"},{key:"add_label",name:"ADD_LABEL"},{key:"remove_label",name:"REMOVE_LABEL"},{key:"send_email_to_team",name:"SEND_EMAIL_TO_TEAM"},{key:"send_message",name:"SEND_MESSAGE"},{key:"send_email_transcript",name:"SEND_EMAIL_TRANSCRIPT"},{key:"mute_conversation",name:"MUTE_CONVERSATION"},{key:"snooze_conversation",name:"SNOOZE_CONVERSATION"},{key:"open_conversation",name:"OPEN_CONVERSATION"},{key:"resolve_conversation",name:"RESOLVE_CONVERSATION"},{key:"send_webhook_event",name:"SEND_WEBHOOK_EVENT"},{key:"send_attachment",name:"SEND_ATTACHMENT"}]},conversation_created:{conditions:[{key:"status",name:"STATUS",inputType:"multi_select",filterOperators:wn},{key:"browser_language",name:"BROWSER_LANGUAGE",inputType:"search_select",filterOperators:wn},{key:"mail_subject",name:"MAIL_SUBJECT",inputType:"plain_text",filterOperators:Fs},{key:"country_code",name:"COUNTRY_NAME",inputType:"search_select",filterOperators:wn},{key:"phone_number",name:"PHONE_NUMBER",inputType:"plain_text",filterOperators:$d},{key:"referer",name:"REFERER_LINK",inputType:"plain_text",filterOperators:Fs},{key:"email",name:"EMAIL",inputType:"plain_text",filterOperators:Fs},{key:"inbox_id",name:"INBOX",inputType:"multi_select",filterOperators:wn},{key:"conversation_language",name:"CONVERSATION_LANGUAGE",inputType:"multi_select",filterOperators:wn},{key:"priority",name:"PRIORITY",inputType:"multi_select",filterOperators:wn},{key:"labels",name:"LABELS",inputType:"multi_select",filterOperators:qs}],actions:[{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"assign_team",name:"ASSIGN_TEAM"},{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"send_email_to_team",name:"SEND_EMAIL_TO_TEAM"},{key:"send_message",name:"SEND_MESSAGE"},{key:"send_email_transcript",name:"SEND_EMAIL_TRANSCRIPT"},{key:"mute_conversation",name:"MUTE_CONVERSATION"},{key:"snooze_conversation",name:"SNOOZE_CONVERSATION"},{key:"resolve_conversation",name:"RESOLVE_CONVERSATION"},{key:"send_webhook_event",name:"SEND_WEBHOOK_EVENT"},{key:"send_attachment",name:"SEND_ATTACHMENT"}]},conversation_updated:{conditions:[{key:"status",name:"STATUS",inputType:"multi_select",filterOperators:wn},{key:"browser_language",name:"BROWSER_LANGUAGE",inputType:"search_select",filterOperators:wn},{key:"mail_subject",name:"MAIL_SUBJECT",inputType:"plain_text",filterOperators:Fs},{key:"country_code",name:"COUNTRY_NAME",inputType:"search_select",filterOperators:wn},{key:"referer",name:"REFERER_LINK",inputType:"plain_text",filterOperators:Fs},{key:"phone_number",name:"PHONE_NUMBER",inputType:"plain_text",filterOperators:$d},{key:"assignee_id",name:"ASSIGNEE_NAME",inputType:"search_select",filterOperators:qs},{key:"team_id",name:"TEAM_NAME",inputType:"search_select",filterOperators:qs},{key:"email",name:"EMAIL",inputType:"plain_text",filterOperators:Fs},{key:"inbox_id",name:"INBOX",inputType:"multi_select",filterOperators:wn},{key:"conversation_language",name:"CONVERSATION_LANGUAGE",inputType:"multi_select",filterOperators:wn},{key:"priority",name:"PRIORITY",inputType:"multi_select",filterOperators:wn},{key:"labels",name:"LABELS",inputType:"multi_select",filterOperators:qs}],actions:[{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"assign_team",name:"ASSIGN_TEAM"},{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"send_email_to_team",name:"SEND_EMAIL_TO_TEAM"},{key:"send_message",name:"SEND_MESSAGE"},{key:"send_email_transcript",name:"SEND_EMAIL_TRANSCRIPT"},{key:"mute_conversation",name:"MUTE_CONVERSATION"},{key:"snooze_conversation",name:"SNOOZE_CONVERSATION"},{key:"resolve_conversation",name:"RESOLVE_CONVERSATION"},{key:"send_webhook_event",name:"SEND_WEBHOOK_EVENT"},{key:"send_attachment",name:"SEND_ATTACHMENT"}]},conversation_opened:{conditions:[{key:"browser_language",name:"BROWSER_LANGUAGE",inputType:"search_select",filterOperators:wn},{key:"email",name:"EMAIL",inputType:"plain_text",filterOperators:Fs},{key:"mail_subject",name:"MAIL_SUBJECT",inputType:"plain_text",filterOperators:Fs},{key:"country_code",name:"COUNTRY_NAME",inputType:"search_select",filterOperators:wn},{key:"referer",name:"REFERER_LINK",inputType:"plain_text",filterOperators:Fs},{key:"assignee_id",name:"ASSIGNEE_NAME",inputType:"search_select",filterOperators:qs},{key:"phone_number",name:"PHONE_NUMBER",inputType:"plain_text",filterOperators:$d},{key:"team_id",name:"TEAM_NAME",inputType:"search_select",filterOperators:qs},{key:"inbox_id",name:"INBOX",inputType:"multi_select",filterOperators:wn},{key:"conversation_language",name:"CONVERSATION_LANGUAGE",inputType:"multi_select",filterOperators:wn},{key:"priority",name:"PRIORITY",inputType:"multi_select",filterOperators:wn},{key:"labels",name:"LABELS",inputType:"multi_select",filterOperators:qs}],actions:[{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"assign_team",name:"ASSIGN_TEAM"},{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"send_email_to_team",name:"SEND_EMAIL_TO_TEAM"},{key:"send_message",name:"SEND_MESSAGE"},{key:"send_email_transcript",name:"SEND_EMAIL_TRANSCRIPT"},{key:"mute_conversation",name:"MUTE_CONVERSATION"},{key:"snooze_conversation",name:"SNOOZE_CONVERSATION"},{key:"send_webhook_event",name:"SEND_WEBHOOK_EVENT"},{key:"send_attachment",name:"SEND_ATTACHMENT"}]},conversation_resolved:{conditions:[{key:"browser_language",name:"BROWSER_LANGUAGE",inputType:"search_select",filterOperators:wn},{key:"email",name:"EMAIL",inputType:"plain_text",filterOperators:Fs},{key:"mail_subject",name:"MAIL_SUBJECT",inputType:"plain_text",filterOperators:Fs},{key:"country_code",name:"COUNTRY_NAME",inputType:"search_select",filterOperators:wn},{key:"referer",name:"REFERER_LINK",inputType:"plain_text",filterOperators:Fs},{key:"assignee_id",name:"ASSIGNEE_NAME",inputType:"search_select",filterOperators:qs},{key:"phone_number",name:"PHONE_NUMBER",inputType:"plain_text",filterOperators:$d},{key:"team_id",name:"TEAM_NAME",inputType:"search_select",filterOperators:qs},{key:"inbox_id",name:"INBOX",inputType:"multi_select",filterOperators:wn},{key:"conversation_language",name:"CONVERSATION_LANGUAGE",inputType:"multi_select",filterOperators:wn},{key:"priority",name:"PRIORITY",inputType:"multi_select",filterOperators:wn}],actions:[{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"assign_team",name:"ASSIGN_TEAM"},{key:"send_email_to_team",name:"SEND_EMAIL_TO_TEAM"},{key:"send_message",name:"SEND_MESSAGE"},{key:"send_email_transcript",name:"SEND_EMAIL_TRANSCRIPT"},{key:"send_webhook_event",name:"SEND_WEBHOOK_EVENT"},{key:"send_attachment",name:"SEND_ATTACHMENT"}]}},Nm=[{key:"conversation_created",value:"CONVERSATION_CREATED"},{key:"conversation_updated",value:"CONVERSATION_UPDATED"},{key:"conversation_resolved",value:"CONVERSATION_RESOLVED"},{key:"message_created",value:"MESSAGE_CREATED"},{key:"conversation_opened",value:"CONVERSATION_OPENED"}],xm=[{key:"assign_agent",label:"ASSIGN_AGENT",inputType:"search_select"},{key:"assign_team",label:"ASSIGN_TEAM",inputType:"search_select"},{key:"add_label",label:"ADD_LABEL",inputType:"multi_select"},{key:"remove_label",label:"REMOVE_LABEL",inputType:"multi_select"},{key:"send_email_to_team",label:"SEND_EMAIL_TO_TEAM",inputType:"team_message"},{key:"send_email_transcript",label:"SEND_EMAIL_TRANSCRIPT",inputType:"email"},{key:"mute_conversation",label:"MUTE_CONVERSATION",inputType:null},{key:"snooze_conversation",label:"SNOOZE_CONVERSATION",inputType:null},{key:"resolve_conversation",label:"RESOLVE_CONVERSATION",inputType:null},{key:"open_conversation",label:"OPEN_CONVERSATION",inputType:null},{key:"send_webhook_event",label:"SEND_WEBHOOK_EVENT",inputType:"url"},{key:"send_attachment",label:"SEND_ATTACHMENT",inputType:"attachment"},{key:"send_message",label:"SEND_MESSAGE",inputType:"textarea"},{key:"add_private_note",label:"ADD_PRIVATE_NOTE",inputType:"textarea"},{key:"change_priority",label:"CHANGE_PRIORITY",inputType:"search_select"},{key:"add_sla",label:"ADD_SLA",inputType:"search_select"}];function aM(t=null){const n=xt(),{t:a}=Q(),{booleanFilterOptions:e,statusFilterOptions:s,getConditionDropdownValues:r,getActionDropdownValues:o,agents:i,campaigns:l,contacts:c,inboxes:d,labels:u,teams:m,slaPolicies:h}=nM(),_=P(t),E=structuredClone(tce),y=S(()=>{var w;return(w=_.value)==null?void 0:w.event_name});return{automation:_,automationTypes:E,agents:i,campaigns:l,contacts:c,inboxes:d,labels:u,teams:m,slaPolicies:h,booleanFilterOptions:e,statusFilterOptions:s,onEventChange:()=>{_.value.conditions=XI(y.value),_.value.actions=qI()},getConditionDropdownValues:r,appendNewCondition:()=>{const w=XI(y.value);_.value.conditions=[..._.value.conditions,...w]},appendNewAction:()=>{const w=qI();_.value.actions=[..._.value.actions,...w]},removeFilter:w=>{_.value.conditions.length<=1?Z(a("AUTOMATION.CONDITION.DELETE_MESSAGE")):_.value.conditions=_.value.conditions.filter((D,B)=>B!==w)},removeAction:w=>{_.value.actions.length<=1?Z(a("AUTOMATION.ACTION.DELETE_MESSAGE")):_.value.actions=_.value.actions.filter((D,B)=>B!==w)},resetFilter:(w,D)=>{const B=[..._.value.conditions];B[w]={...B[w],filter_operator:E[y.value].conditions.find(k=>k.key===D.attribute_key).filterOperators[0].value,values:""},_.value.conditions=B},resetAction:w=>{const D=[..._.value.actions];D[w]={...D[w],action_params:[]},_.value.actions=D},getActionDropdownValues:o,manifestCustomAttributes:()=>{const w=n["attributes/getAttributesByModel"].value("conversation_attribute"),D=n["attributes/getAttributesByModel"].value("contact_attribute"),B=KI(w,"conversation_attribute"),k=KI(D,"contact_attribute"),V=ece(B,k,a("AUTOMATION.CONDITION.CONVERSATION_CUSTOM_ATTR_LABEL"),a("AUTOMATION.CONDITION.CONTACT_CUSTOM_ATTR_LABEL"));["message_created","conversation_created","conversation_updated","conversation_opened"].forEach(F=>{E[F].conditions=[...E[F].conditions,...V]})}}}const nce="ATTRIBUTE_KEY_REQUIRED",ace="FILTER_OPERATOR_REQUIRED",sce="VALUE_REQUIRED",oce="VALUE_MUST_BE_BETWEEN_1_AND_998",rce="ACTION_PARAMETERS_REQUIRED",ice="ATLEAST_ONE_CONDITION_REQUIRED",lce="ATLEAST_ONE_ACTION_REQUIRED",cce=t=>t?Array.isArray(t)?!t.length:typeof t=="object"?!Object.keys(t).length:!1:!0,Uv=t=>t.attribute_key?t.filter_operator?!["is_present","is_not_present"].includes(t.filter_operator)&&cce(t.values)?sce:t.filter_operator==="days_before"&&(parseInt(t.values,10)<=0||parseInt(t.values,10)>=999)?oce:null:ace:nce,dce=t=>{const n={};return["name","description","event_name"].forEach(e=>{t[e]||(n[e]=`${e.charAt(0).toUpperCase()+e.slice(1)} is required`)}),n},uce=t=>{const n={};return!t||t.length===0?(n.conditions=ice,n):(t.forEach((a,e)=>{const s=Uv(a);s&&(n[`condition_${e}`]=s)}),n)},pce=t=>!["mute_conversation","snooze_conversation","resolve_conversation","remove_assigned_team","open_conversation"].includes(t.action_name)&&(!t.action_params||t.action_params.length===0)?rce:null,sM=t=>!t||t.length===0?{actions:lce}:t.reduce((n,a,e)=>{const s=pce(a);return s&&(n[`action_${e}`]=s),n},{}),oM=t=>{const n=dce(t),a=uce(t.conditions),e=sM(t.actions);return{...n,...a,...e}},fce={name:null,description:null,event_name:"conversation_created",conditions:[{attribute_key:"status",filter_operator:"equal_to",values:"",query_operator:"and",custom_attribute_type:""}],actions:[{action_name:"assign_agent",action_params:[]}]},mce={components:{FilterInputBox:zw,AutomationActionInput:NS,NextButton:Se},props:{onClose:{type:Function,default:()=>{}}},emits:["saveAutomation"],setup(){const{automation:t,automationTypes:n,onEventChange:a,getConditionDropdownValues:e,appendNewCondition:s,appendNewAction:r,removeFilter:o,removeAction:i,resetFilter:l,resetAction:c,getActionDropdownValues:d,manifestCustomAttributes:u}=aM(fce);return{automation:t,automationTypes:n,onEventChange:a,getConditionDropdownValues:e,appendNewCondition:s,appendNewAction:r,removeFilter:o,removeAction:i,resetFilter:l,resetAction:c,getActionDropdownValues:d,manifestCustomAttributes:u}},data(){return{automationRuleEvent:Nm[0].key,automationMutated:!1,show:!0,showDeleteConfirmationModal:!1,allCustomAttributes:[],mode:"create",errors:{}}},computed:{..._t({accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"}),automationRuleEvents(){return Nm.map(t=>({...t,value:this.$t(`AUTOMATION.EVENTS.${t.value}`)}))},hasAutomationMutated(){return!!(this.automation.conditions[0].values||this.automation.actions[0].action_params.length)},automationActionTypes(){return(this.isFeatureEnabled("sla")?xm:xm.filter(({key:n})=>n!=="add_sla")).map(n=>({...n,label:this.$t(`AUTOMATION.ACTIONS.${n.label}`)}))}},mounted(){this.$store.dispatch("inboxes/get"),this.$store.dispatch("agents/get"),this.$store.dispatch("contacts/get"),this.$store.dispatch("teams/get"),this.$store.dispatch("labels/get"),this.$store.dispatch("campaigns/get"),this.allCustomAttributes=this.$store.getters["attributes/getAttributes"],this.manifestCustomAttributes()},methods:{getAttributes:Om,getInputType:Qw,getOperators:Jw,getCustomAttributeType:eM,showActionInput:tM,isFeatureEnabled(t){return this.isFeatureEnabledonAccount(this.accountId,t)},emitSaveAutomation(){if(this.errors=oM(this.automation),Object.keys(this.errors).length===0){const t=qw(this.automation);this.$emit("saveAutomation",t,this.mode)}},getTranslatedAttributes(t,n){return Om(t,n).map(a=>{const e=a.customAttributeType||["contact_custom_attribute","conversation_custom_attribute"].includes(a.key);return{...a,name:e?a.name:this.$t(`AUTOMATION.ATTRIBUTES.${a.name}`)}})}}},hce={class:"flex flex-col modal-content"},_ce={class:"w-full"},gce={class:"mb-6"},bce=["value"],vce={key:0,class:"message"},Ece={key:0,class:"text-xs text-right text-n-teal-10 pt-1"},Sce={class:"w-full p-4 mb-4 border border-solid rounded-lg bg-n-slate-2 dark:bg-n-solid-2 border-n-strong"},Tce={class:"mt-4"},Ace={class:"w-full p-4 mb-4 border border-solid rounded-lg bg-n-slate-2 dark:bg-n-solid-2 border-n-strong"},yce={class:"mt-4"},Ice={class:"w-full"},Cce={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function Oce(t,n,a,e,s,r){const o=H("woot-modal-header"),i=H("woot-input"),l=H("FilterInputBox"),c=H("NextButton"),d=H("AutomationActionInput");return p(),g("div",null,[v(o,{"header-title":t.$t("AUTOMATION.ADD.TITLE")},null,8,["header-title"]),f("div",hce,[f("div",_ce,[v(i,{modelValue:e.automation.name,"onUpdate:modelValue":n[0]||(n[0]=u=>e.automation.name=u),label:t.$t("AUTOMATION.ADD.FORM.NAME.LABEL"),type:"text",class:oe({error:s.errors.name}),error:s.errors.name?t.$t("AUTOMATION.ADD.FORM.NAME.ERROR"):"",placeholder:t.$t("AUTOMATION.ADD.FORM.NAME.PLACEHOLDER")},null,8,["modelValue","label","class","error","placeholder"]),v(i,{modelValue:e.automation.description,"onUpdate:modelValue":n[1]||(n[1]=u=>e.automation.description=u),label:t.$t("AUTOMATION.ADD.FORM.DESC.LABEL"),type:"text",class:oe({error:s.errors.description}),error:s.errors.description?t.$t("AUTOMATION.ADD.FORM.DESC.ERROR"):"",placeholder:t.$t("AUTOMATION.ADD.FORM.DESC.PLACEHOLDER")},null,8,["modelValue","label","class","error","placeholder"]),f("div",gce,[f("label",{class:oe({error:s.errors.event_name})},[Oe(C(t.$t("AUTOMATION.ADD.FORM.EVENT.LABEL"))+" ",1),ce(f("select",{"onUpdate:modelValue":n[2]||(n[2]=u=>e.automation.event_name=u),class:"m-0",onChange:n[3]||(n[3]=u=>e.onEventChange(e.automation))},[(p(!0),g(de,null,Ae(r.automationRuleEvents,u=>(p(),g("option",{key:u.key,value:u.key},C(u.value),9,bce))),128))],544),[[Un,e.automation.event_name]]),s.errors.event_name?(p(),g("span",vce,C(t.$t("AUTOMATION.ADD.FORM.EVENT.ERROR")),1)):O("v-if",!0)],2),r.hasAutomationMutated?(p(),g("p",Ece,C(t.$t("AUTOMATION.FORM.RESET_MESSAGE")),1)):O("v-if",!0)]),O(" // Conditions Start "),f("section",null,[f("label",null,C(t.$t("AUTOMATION.ADD.FORM.CONDITIONS.LABEL")),1),f("div",Sce,[(p(!0),g(de,null,Ae(e.automation.conditions,(u,m)=>(p(),L(l,{key:m,modelValue:e.automation.conditions[m],"onUpdate:modelValue":h=>e.automation.conditions[m]=h,"filter-attributes":r.getTranslatedAttributes(e.automationTypes,e.automation.event_name),"input-type":r.getInputType(s.allCustomAttributes,e.automationTypes,e.automation,e.automation.conditions[m].attribute_key),operators:r.getOperators(s.allCustomAttributes,e.automationTypes,e.automation,s.mode,e.automation.conditions[m].attribute_key),"dropdown-values":e.getConditionDropdownValues(e.automation.conditions[m].attribute_key),"show-query-operator":m!==e.automation.conditions.length-1,"custom-attribute-type":r.getCustomAttributeType(e.automationTypes,e.automation,e.automation.conditions[m].attribute_key),"error-message":s.errors[`condition_${m}`]?t.$t(`AUTOMATION.ERRORS.${s.errors[`condition_${m}`]}`):"",onResetFilter:h=>e.resetFilter(m,e.automation.conditions[m]),onRemoveFilter:h=>e.removeFilter(m)},null,8,["modelValue","onUpdate:modelValue","filter-attributes","input-type","operators","dropdown-values","show-query-operator","custom-attribute-type","error-message","onResetFilter","onRemoveFilter"]))),128)),f("div",Tce,[v(c,{icon:"i-lucide-plus",blue:"",faded:"",sm:"",label:t.$t("AUTOMATION.ADD.CONDITION_BUTTON_LABEL"),onClick:e.appendNewCondition},null,8,["label","onClick"])])])]),O(" // Conditions End "),O(" // Actions Start "),f("section",null,[f("label",null,C(t.$t("AUTOMATION.ADD.FORM.ACTIONS.LABEL")),1),f("div",Ace,[(p(!0),g(de,null,Ae(e.automation.actions,(u,m)=>(p(),L(d,{key:m,modelValue:e.automation.actions[m],"onUpdate:modelValue":h=>e.automation.actions[m]=h,"action-types":r.automationActionTypes,"dropdown-values":e.getActionDropdownValues(e.automation.actions[m].action_name),"show-action-input":r.showActionInput(r.automationActionTypes,e.automation.actions[m].action_name),"error-message":s.errors[`action_${m}`]?t.$t(`AUTOMATION.ERRORS.${s.errors[`action_${m}`]}`):"",onResetAction:h=>e.resetAction(m),onRemoveAction:h=>e.removeAction(m)},null,8,["modelValue","onUpdate:modelValue","action-types","dropdown-values","show-action-input","error-message","onResetAction","onRemoveAction"]))),128)),f("div",yce,[v(c,{icon:"i-lucide-plus",blue:"",faded:"",sm:"",label:t.$t("AUTOMATION.ADD.ACTION_BUTTON_LABEL"),onClick:e.appendNewAction},null,8,["label","onClick"])])])]),O(" // Actions End "),f("div",Ice,[f("div",Cce,[v(c,{faded:"",slate:"",type:"reset",label:t.$t("AUTOMATION.ADD.CANCEL_BUTTON_TEXT"),onClick:Ve(a.onClose,["prevent"])},null,8,["label","onClick"]),v(c,{solid:"",blue:"",type:"submit",label:t.$t("AUTOMATION.ADD.SUBMIT"),onClick:r.emitSaveAutomation},null,8,["label","onClick"])])])])])])}const Nce=G(mce,[["render",Oce],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/automation/AddAutomationRule.vue"]]);function xce(){const{getConditionDropdownValues:t,getActionDropdownValues:n}=nM(),a=(o,i,l)=>{const c=Zle(i);return o.conditions.map(d=>{const u=Jle(c,d.attribute_key);let m="plain_text";return u?m=xS(u.type):m=Qle(l,o.event_name,d.attribute_key),m==="plain_text"||m==="date"?{...d,values:d.values[0]}:m==="comma_separated_plain_text"?{...d,values:d.values.join(",")}:{...d,query_operator:d.query_operator||"and",values:[...t(d.attribute_key)].filter(h=>[...d.values].includes(h.id))}})},e=(o,i)=>{const l=o.action_params,c=i.find(d=>d.key===o.action_name).inputType;return c==="multi_select"||c==="search_select"?[...n(o.action_name)].filter(d=>[...l].includes(d.id)):c==="team_message"?{team_ids:[...n(o.action_name)].filter(d=>[...l[0].team_ids].includes(d.id)),message:l[0].message}:[...l]},s=(o,i)=>o.actions.map(l=>({...l,action_params:l.action_params.length?e(l,i):[]}));return{formatAutomation:(o,i,l,c)=>({...o,conditions:a(o,i,l),actions:s(o,c)})}}const Rce={components:{FilterInputBox:zw,NextButton:Se,AutomationActionInput:NS},props:{onClose:{type:Function,default:()=>{}},selectedResponse:{type:Object,default:()=>{}}},emits:["saveAutomation"],setup(){const{automation:t,automationTypes:n,onEventChange:a,getConditionDropdownValues:e,appendNewCondition:s,appendNewAction:r,removeFilter:o,removeAction:i,resetFilter:l,resetAction:c,getActionDropdownValues:d,manifestCustomAttributes:u}=aM(),{formatAutomation:m}=xce();return{automation:t,automationTypes:n,onEventChange:a,getConditionDropdownValues:e,appendNewCondition:s,appendNewAction:r,removeFilter:o,removeAction:i,resetFilter:l,resetAction:c,getActionDropdownValues:d,formatAutomation:m,manifestCustomAttributes:u}},data(){return{automationRuleEvent:Nm[0].key,automationMutated:!1,show:!0,showDeleteConfirmationModal:!1,allCustomAttributes:[],mode:"edit",errors:{}}},computed:{..._t({accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"}),automationRuleEvents(){return Nm.map(t=>({...t,value:this.$t(`AUTOMATION.EVENTS.${t.value}`)}))},hasAutomationMutated(){return!!(this.automation.conditions[0].values||this.automation.actions[0].action_params.length)},automationActionTypes(){return(this.isFeatureEnabled("sla")?xm:xm.filter(({key:n})=>n!=="add_sla")).map(n=>({...n,label:this.$t(`AUTOMATION.ACTIONS.${n.label}`)}))}},mounted(){this.manifestCustomAttributes(),this.allCustomAttributes=this.$store.getters["attributes/getAttributes"],this.automation=this.formatAutomation(this.selectedResponse,this.allCustomAttributes,this.automationTypes,this.automationActionTypes)},methods:{getFileName:qle,getAttributes:Om,getInputType:Qw,getOperators:Jw,getCustomAttributeType:eM,showActionInput:tM,isFeatureEnabled(t){return this.isFeatureEnabledonAccount(this.accountId,t)},emitSaveAutomation(){if(this.errors=oM(this.automation),Object.keys(this.errors).length===0){const t=qw(this.automation);this.$emit("saveAutomation",t,this.mode)}},getTranslatedAttributes(t,n){return Om(t,n).map(a=>{const e=a.customAttributeType||["contact_custom_attribute","conversation_custom_attribute"].includes(a.key);return{...a,name:e?a.name:this.$t(`AUTOMATION.ATTRIBUTES.${a.name}`)}})}}},wce={class:"flex flex-col modal-content"},Mce={key:0,class:"w-full"},Lce={class:"event_wrapper"},Dce=["value"],Pce={key:0,class:"message"},kce={class:"w-full p-4 mb-4 border border-solid rounded-lg bg-n-slate-2 dark:bg-n-solid-2 border-n-strong"},Bce={class:"mt-4"},Fce={class:"w-full p-4 mb-4 border border-solid rounded-lg bg-n-slate-2 dark:bg-n-solid-2 border-n-strong"},Uce={class:"mt-4"},$ce={class:"w-full"},Gce={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function Vce(t,n,a,e,s,r){const o=H("woot-modal-header"),i=H("woot-input"),l=H("FilterInputBox"),c=H("NextButton"),d=H("AutomationActionInput");return p(),g("div",null,[v(o,{"header-title":t.$t("AUTOMATION.EDIT.TITLE")},null,8,["header-title"]),f("div",wce,[e.automation?(p(),g("div",Mce,[v(i,{modelValue:e.automation.name,"onUpdate:modelValue":n[0]||(n[0]=u=>e.automation.name=u),label:t.$t("AUTOMATION.ADD.FORM.NAME.LABEL"),type:"text",class:oe({error:s.errors.name}),error:s.errors.name?t.$t("AUTOMATION.ADD.FORM.NAME.ERROR"):"",placeholder:t.$t("AUTOMATION.ADD.FORM.NAME.PLACEHOLDER")},null,8,["modelValue","label","class","error","placeholder"]),v(i,{modelValue:e.automation.description,"onUpdate:modelValue":n[1]||(n[1]=u=>e.automation.description=u),label:t.$t("AUTOMATION.ADD.FORM.DESC.LABEL"),type:"text",class:oe({error:s.errors.description}),error:s.errors.description?t.$t("AUTOMATION.ADD.FORM.DESC.ERROR"):"",placeholder:t.$t("AUTOMATION.ADD.FORM.DESC.PLACEHOLDER")},null,8,["modelValue","label","class","error","placeholder"]),f("div",Lce,[f("label",{class:oe({error:s.errors.event_name})},[Oe(C(t.$t("AUTOMATION.ADD.FORM.EVENT.LABEL"))+" ",1),ce(f("select",{"onUpdate:modelValue":n[2]||(n[2]=u=>e.automation.event_name=u),onChange:n[3]||(n[3]=u=>e.onEventChange(e.automation))},[(p(!0),g(de,null,Ae(r.automationRuleEvents,u=>(p(),g("option",{key:u.key,value:u.key},C(u.value),9,Dce))),128))],544),[[Un,e.automation.event_name]]),s.errors.event_name?(p(),g("span",Pce,C(t.$t("AUTOMATION.ADD.FORM.EVENT.ERROR")),1)):O("v-if",!0)],2)]),O(" // Conditions Start "),f("section",null,[f("label",null,C(t.$t("AUTOMATION.ADD.FORM.CONDITIONS.LABEL")),1),f("div",kce,[(p(!0),g(de,null,Ae(e.automation.conditions,(u,m)=>(p(),L(l,{key:m,modelValue:e.automation.conditions[m],"onUpdate:modelValue":h=>e.automation.conditions[m]=h,"filter-attributes":r.getTranslatedAttributes(e.automationTypes,e.automation.event_name),"input-type":r.getInputType(s.allCustomAttributes,e.automationTypes,e.automation,e.automation.conditions[m].attribute_key),operators:r.getOperators(s.allCustomAttributes,e.automationTypes,e.automation,s.mode,e.automation.conditions[m].attribute_key),"dropdown-values":e.getConditionDropdownValues(e.automation.conditions[m].attribute_key),"custom-attribute-type":r.getCustomAttributeType(e.automationTypes,e.automation,e.automation.conditions[m].attribute_key),"show-query-operator":m!==e.automation.conditions.length-1,"error-message":s.errors[`condition_${m}`]?t.$t(`AUTOMATION.ERRORS.${s.errors[`condition_${m}`]}`):"",onResetFilter:h=>e.resetFilter(m,e.automation.conditions[m]),onRemoveFilter:h=>e.removeFilter(m)},null,8,["modelValue","onUpdate:modelValue","filter-attributes","input-type","operators","dropdown-values","custom-attribute-type","show-query-operator","error-message","onResetFilter","onRemoveFilter"]))),128)),f("div",Bce,[v(c,{icon:"i-lucide-plus",blue:"",faded:"",sm:"",label:t.$t("AUTOMATION.ADD.CONDITION_BUTTON_LABEL"),onClick:e.appendNewCondition},null,8,["label","onClick"])])])]),O(" // Conditions End "),O(" // Actions Start "),f("section",null,[f("label",null,C(t.$t("AUTOMATION.ADD.FORM.ACTIONS.LABEL")),1),f("div",Fce,[(p(!0),g(de,null,Ae(e.automation.actions,(u,m)=>(p(),L(d,{key:m,modelValue:e.automation.actions[m],"onUpdate:modelValue":h=>e.automation.actions[m]=h,"action-types":r.automationActionTypes,"dropdown-values":e.getActionDropdownValues(u.action_name),"show-action-input":r.showActionInput(r.automationActionTypes,u.action_name),"error-message":s.errors[`action_${m}`]?t.$t(`AUTOMATION.ERRORS.${s.errors[`action_${m}`]}`):"","initial-file-name":r.getFileName(u,e.automation.files),onResetAction:h=>e.resetAction(m),onRemoveAction:h=>e.removeAction(m)},null,8,["modelValue","onUpdate:modelValue","action-types","dropdown-values","show-action-input","error-message","initial-file-name","onResetAction","onRemoveAction"]))),128)),f("div",Uce,[v(c,{icon:"i-lucide-plus",blue:"",faded:"",sm:"",label:t.$t("AUTOMATION.ADD.ACTION_BUTTON_LABEL"),onClick:e.appendNewAction},null,8,["label","onClick"])])])]),O(" // Actions End "),f("div",$ce,[f("div",Gce,[v(c,{faded:"",slate:"",type:"reset",label:t.$t("AUTOMATION.EDIT.CANCEL_BUTTON_TEXT"),onClick:Ve(a.onClose,["prevent"])},null,8,["label","onClick"]),v(c,{solid:"",blue:"",type:"submit",label:t.$t("AUTOMATION.EDIT.SUBMIT"),onClick:r.emitSaveAutomation},null,8,["label","onClick"])])])])):O("v-if",!0)])])}const Hce=G(Rce,[["render",Vce],["__scopeId","data-v-52728e69"],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/automation/EditAutomationRule.vue"]]),jce={__name:"AutomationRuleRow",props:{automation:{type:Object,required:!0},loading:{type:Boolean,default:!1}},emits:["toggle","edit","delete","clone"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=c=>Bc(new Date(c),"LLL d, yyyy"),o=c=>Bc(new Date(c),"LLL d, yyyy hh:mm a"),i=S({get:()=>e.automation.active,set:c=>{const{id:d,name:u}=e.automation;s("toggle",{id:d,name:u,status:!c})}}),l={props:e,emit:s,readableDate:r,readableDateWithTime:o,automationActive:i,computed:S,get messageStamp(){return Bc},Button:Se,ToggleSwitch:mo};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}},Wce={class:"py-4 ltr:pr-4 rtl:pl-4 min-w-[200px]"},zce={class:"py-4 ltr:pr-4 rtl:pl-4"},Yce={class:"py-4 ltr:pr-4 rtl:pl-4"},Kce=["title"],Xce={class:"py-4 min-w-xs"},qce={class:"flex gap-1 justify-end flex-shrink-0"};function Zce(t,n,a,e,s,r){const o=nt("tooltip");return p(),g("tr",null,[f("td",Wce,C(a.automation.name),1),f("td",zce,C(a.automation.description),1),f("td",Yce,[v(e.ToggleSwitch,{modelValue:e.automationActive,"onUpdate:modelValue":n[0]||(n[0]=i=>e.automationActive=i)},null,8,["modelValue"])]),f("td",{class:"py-4 ltr:pr-4 rtl:pl-4 min-w-[12px]",title:e.readableDateWithTime(a.automation.created_on)},C(e.readableDate(a.automation.created_on)),9,Kce),f("td",Xce,[f("div",qce,[ce(v(e.Button,{icon:"i-lucide-pen",slate:"",xs:"",faded:"","is-loading":a.loading,onClick:n[1]||(n[1]=i=>t.$emit("edit",a.automation))},null,8,["is-loading"]),[[o,t.$t("AUTOMATION.FORM.EDIT"),void 0,{top:!0}]]),ce(v(e.Button,{icon:"i-lucide-copy-plus",xs:"",faded:"","is-loading":a.loading,onClick:n[2]||(n[2]=i=>t.$emit("clone",a.automation))},null,8,["is-loading"]),[[o,t.$t("AUTOMATION.CLONE.TOOLTIP"),void 0,{top:!0}]]),ce(v(e.Button,{"is-loading":a.loading,icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:n[3]||(n[3]=i=>t.$emit("delete",a.automation))},null,8,["is-loading"]),[[o,t.$t("AUTOMATION.FORM.DELETE"),void 0,{top:!0}]])])])])}const Qce=G(jce,[["render",Zce],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/automation/AutomationRuleRow.vue"]]),Jce={__name:"Index",setup(t,{expose:n}){n();const a=xt(),e=Fe(),{t:s}=Q(),r=P(null),o=P({}),i=P(!1),l=P(!1),c=P(!1),d=P({}),u=P(s("AUTOMATION.TOGGLE.ACTIVATION_TITLE")),m=P(s("AUTOMATION.TOGGLE.ACTIVATION_DESCRIPTION")),h=S(()=>a["automations/getAutomations"].value),_=S(()=>a["automations/getUIFlags"].value),E=S(()=>a.getCurrentAccountId.value),y=S(()=>`${s("AUTOMATION.DELETE.CONFIRM.YES")} ${d.value.name}`),b=S(()=>`${s("AUTOMATION.DELETE.CONFIRM.NO")} ${d.value.name}`),A=S(()=>` ${d.value.name}?`),T=S(()=>a["accounts/isFeatureEnabledonAccount"].value(E.value,"sla"));Pe(()=>{e.dispatch("inboxes/get"),e.dispatch("agents/get"),e.dispatch("contacts/get"),e.dispatch("teams/get"),e.dispatch("labels/get"),e.dispatch("campaigns/get"),e.dispatch("automations/get"),T.value&&e.dispatch("sla/get")});const I=()=>{i.value=!0},N=()=>{i.value=!1},x=j=>{d.value=j,l.value=!0},R=()=>{l.value=!1},M=j=>{c.value=!0,d.value=j},w=()=>{c.value=!1},D=async j=>{try{await e.dispatch("automations/delete",j),Z(s("AUTOMATION.DELETE.API.SUCCESS_MESSAGE"))}catch{Z(s("AUTOMATION.DELETE.API.ERROR_MESSAGE"))}finally{o.value[d.value.id]=!1}},B=()=>{o.value[d.value.id]=!0,w(),D(d.value.id)},k=async({id:j})=>{try{await e.dispatch("automations/clone",j),Z(s("AUTOMATION.CLONE.API.SUCCESS_MESSAGE")),e.dispatch("automations/get")}catch{Z(s("AUTOMATION.CLONE.API.ERROR_MESSAGE"))}finally{o.value[d.value.id]=!1}},V=async(j,U)=>{try{const J=U==="edit"?"automations/update":"automations/create",te=s(U==="edit"?"AUTOMATION.EDIT.API.SUCCESS_MESSAGE":"AUTOMATION.ADD.API.SUCCESS_MESSAGE");await e.dispatch(J,j),Z(te),N(),R()}catch{const te=s(U==="edit"?"AUTOMATION.EDIT.API.ERROR_MESSAGE":"AUTOMATION.ADD.API.ERROR_MESSAGE");Z(te)}},F=async({id:j,name:U,status:J})=>{try{if(J?(u.value=s("AUTOMATION.TOGGLE.DEACTIVATION_TITLE"),m.value=s("AUTOMATION.TOGGLE.DEACTIVATION_DESCRIPTION",{automationName:U})):(u.value=s("AUTOMATION.TOGGLE.ACTIVATION_TITLE"),m.value=s("AUTOMATION.TOGGLE.ACTIVATION_DESCRIPTION",{automationName:U})),await r.value.showConfirmation()){await e.dispatch("automations/update",{id:j,active:!J});const q=s(J?"AUTOMATION.TOGGLE.DEACTIVATION_SUCCESFUL":"AUTOMATION.TOGGLE.ACTIVATION_SUCCESFUL");Z(q)}}catch{Z(s("AUTOMATION.EDIT.API.ERROR_MESSAGE"))}},$=S(()=>[s("AUTOMATION.LIST.TABLE_HEADER.NAME"),s("AUTOMATION.LIST.TABLE_HEADER.DESCRIPTION"),s("AUTOMATION.LIST.TABLE_HEADER.ACTIVE"),s("AUTOMATION.LIST.TABLE_HEADER.CREATED_ON")]),Y={getters:a,store:e,t:s,confirmDialog:r,loading:o,showAddPopup:i,showEditPopup:l,showDeleteConfirmationPopup:c,selectedAutomation:d,toggleModalTitle:u,toggleModalDescription:m,records:h,uiFlags:_,accountId:E,deleteConfirmText:y,deleteRejectText:b,deleteMessage:A,isSLAEnabled:T,openAddPopup:I,hideAddPopup:N,openEditPopup:x,hideEditPopup:R,openDeletePopup:M,closeDeletePopup:w,deleteAutomation:D,confirmDeletion:B,cloneAutomation:k,submitAutomation:V,toggleAutomation:F,tableHeaders:$,get useAlert(){return Z},AddAutomationRule:Nce,EditAutomationRule:Hce,BaseSettingsHeader:Va,SettingsLayout:Ha,computed:S,onMounted:Pe,ref:P,get useI18n(){return Q},get useStoreGetters(){return xt},get useStore(){return Fe},AutomationRuleRow:Qce,Button:Se};return Object.defineProperty(Y,"__isScriptSetup",{enumerable:!1,value:!0}),Y}},ede={class:"min-w-full divide-y divide-n-weak"},tde={class:"divide-y divide-n-weak text-n-slate-11"};function nde(t,n,a,e,s,r){const o=H("woot-modal"),i=H("woot-delete-modal"),l=H("woot-confirm-modal");return p(),L(e.SettingsLayout,{"is-loading":e.uiFlags.isFetching,"loading-message":t.$t("AUTOMATION.LOADING"),"no-records-found":!e.records.length,"no-records-message":t.$t("AUTOMATION.LIST.404")},{header:z(()=>[v(e.BaseSettingsHeader,{title:t.$t("AUTOMATION.HEADER"),description:t.$t("AUTOMATION.DESCRIPTION"),"link-text":t.$t("AUTOMATION.LEARN_MORE"),"feature-name":"automation"},{actions:z(()=>[v(e.Button,{icon:"i-lucide-circle-plus",label:t.$t("AUTOMATION.HEADER_BTN_TXT"),onClick:e.openAddPopup},null,8,["label"])]),_:1},8,["title","description","link-text"])]),body:z(()=>[f("table",ede,[f("thead",null,[(p(!0),g(de,null,Ae(e.tableHeaders,c=>(p(),g("th",{key:c,class:"py-4 ltr:pr-4 rtl:pl-4 rtl:text-right ltr:text-left font-semibold text-n-slate-11"},C(c),1))),128))]),f("tbody",tde,[(p(!0),g(de,null,Ae(e.records,c=>(p(),L(e.AutomationRuleRow,{key:c.id,automation:c,loading:e.loading[c.id],onClone:e.cloneAutomation,onToggle:e.toggleAutomation,onEdit:e.openEditPopup,onDelete:e.openDeletePopup},null,8,["automation","loading"]))),128))])])]),default:z(()=>[v(o,{show:e.showAddPopup,"onUpdate:show":n[0]||(n[0]=c=>e.showAddPopup=c),size:"medium","on-close":e.hideAddPopup},{default:z(()=>[e.showAddPopup?(p(),L(e.AddAutomationRule,{key:0,"on-close":e.hideAddPopup,onSaveAutomation:e.submitAutomation})):O("v-if",!0)]),_:1},8,["show"]),v(i,{show:e.showDeleteConfirmationPopup,"onUpdate:show":n[1]||(n[1]=c=>e.showDeleteConfirmationPopup=c),"on-close":e.closeDeletePopup,"on-confirm":e.confirmDeletion,title:t.$t("LABEL_MGMT.DELETE.CONFIRM.TITLE"),message:t.$t("AUTOMATION.DELETE.CONFIRM.MESSAGE"),"message-value":e.deleteMessage,"confirm-text":e.deleteConfirmText,"reject-text":e.deleteRejectText},null,8,["show","title","message","message-value","confirm-text","reject-text"]),v(o,{show:e.showEditPopup,"onUpdate:show":n[2]||(n[2]=c=>e.showEditPopup=c),size:"medium","on-close":e.hideEditPopup},{default:z(()=>[e.showEditPopup?(p(),L(e.EditAutomationRule,{key:0,"on-close":e.hideEditPopup,"selected-response":e.selectedAutomation,onSaveAutomation:e.submitAutomation},null,8,["selected-response"])):O("v-if",!0)]),_:1},8,["show"]),v(l,{ref:"confirmDialog",title:e.toggleModalTitle,description:e.toggleModalDescription},null,8,["title","description"])]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"])}const ade=G(Jce,[["render",nde],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/automation/Index.vue"]]),sde={routes:[{path:vt("accounts/:accountId/settings/automation"),component:cs,children:[{path:"",redirect:t=>({name:"automation_list",params:t.params})},{path:"list",name:"automation_list",component:ade,meta:{featureFlag:pt.AUTOMATIONS,permissions:["administrator"]}}]}]},gn={CLOUD:"cloud",ENTERPRISE:"enterprise",COMMUNITY:"community"},ode={__name:"TableFooterResults",props:{firstIndex:{type:Number,default:0},lastIndex:{type:Number,default:0},totalCount:{type:Number,default:0}},setup(t,{expose:n}){n();const a={};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},rde={class:"text-sm text-n-slate-11 font-medium"};function ide(t,n,a,e,s,r){return p(),g("span",rde,C(t.$t("GENERAL.SHOWING_RESULTS",{firstIndex:a.firstIndex,lastIndex:a.lastIndex,totalCount:a.totalCount})),1)}const lde=G(ode,[["render",ide],["__file","/app/app/javascript/dashboard/components/widgets/TableFooterResults.vue"]]),cde={__name:"TableFooterPagination",props:{currentPage:{type:Number,default:1},totalPages:{type:Number,default:0}},emits:["pageChange"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=S(()=>e.currentPage===e.totalPages||e.totalPages===1),o=S(()=>e.currentPage===1),i=S(()=>e.currentPage===e.totalPages),l=S(()=>e.currentPage===1);function c(E){s("pageChange",E)}const d=()=>{d.value||c(e.currentPage+1)},_={props:e,emit:s,hasLastPage:r,hasFirstPage:o,hasNextPage:i,hasPrevPage:l,onPageChange:c,onNextPage:d,onPrevPage:()=>{l.value||c(e.currentPage-1)},onFirstPage:()=>{o.value||c(1)},onLastPage:()=>{r.value||c(e.totalPages)},computed:S,NextButton:Se};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}},dde={class:"flex items-center h-8 outline outline-1 outline-n-weak rounded-lg"},ude={class:"flex items-center gap-3 px-3 tabular-nums bg-n-slate-9/10 h-full"},pde={class:"text-sm text-n-slate-12"},fde={class:"text-sm text-n-slate-11"};function mde(t,n,a,e,s,r){return p(),g("div",dde,[v(e.NextButton,{faded:"",sm:"",slate:"",icon:"i-lucide-chevrons-left",class:"ltr:rounded-l-lg ltr:rounded-r-none rtl:rounded-r-lg rtl:rounded-l-none",disabled:e.hasFirstPage,onClick:e.onFirstPage},null,8,["disabled"]),n[1]||(n[1]=f("div",{class:"flex items-center justify-center bg-n-slate-9/10 h-full"},[f("div",{class:"w-px h-4 rounded-sm bg-n-strong"})],-1)),v(e.NextButton,{faded:"",sm:"",slate:"",icon:"i-lucide-chevron-left",class:"rounded-none",disabled:e.hasPrevPage,onClick:e.onPrevPage},null,8,["disabled"]),f("div",ude,[f("span",pde,C(a.currentPage),1),n[0]||(n[0]=f("span",{class:"text-n-slate-11"},"/",-1)),f("span",fde,C(a.totalPages),1)]),v(e.NextButton,{faded:"",sm:"",slate:"",icon:"i-lucide-chevron-right",class:"rounded-none",disabled:e.hasNextPage,onClick:e.onNextPage},null,8,["disabled"]),n[2]||(n[2]=f("div",{class:"flex items-center justify-center bg-n-slate-9/10 h-full"},[f("div",{class:"w-px h-4 rounded-sm bg-n-strong"})],-1)),v(e.NextButton,{faded:"",sm:"",slate:"",icon:"i-lucide-chevrons-right",class:"ltr:rounded-r-lg ltr:rounded-l-none rtl:rounded-l-lg rtl:rounded-r-none",disabled:e.hasLastPage,onClick:e.onLastPage},null,8,["disabled"])])}const hde=G(cde,[["render",mde],["__file","/app/app/javascript/dashboard/components/widgets/TableFooterPagination.vue"]]),_de={__name:"TableFooter",props:{currentPage:{type:Number,default:1},pageSize:{type:Number,default:25},totalCount:{type:Number,default:0}},emits:["pageChange"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=S(()=>Math.ceil(e.totalCount/e.pageSize)),o=S(()=>e.pageSize*(e.currentPage-1)+1),i=S(()=>Math.min(e.totalCount,e.pageSize*e.currentPage)),l=S(()=>e.totalCount&&!(o.value>e.totalCount)),c={props:e,emit:s,totalPages:r,firstIndex:o,lastIndex:i,isFooterVisible:l,computed:S,TableFooterResults:lde,TableFooterPagination:hde};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}},gde={key:0,class:"flex items-center justify-between h-12 px-6"};function bde(t,n,a,e,s,r){return e.isFooterVisible?(p(),g("footer",gde,[v(e.TableFooterResults,{"first-index":e.firstIndex,"last-index":e.lastIndex,"total-count":a.totalCount},null,8,["first-index","last-index","total-count"]),a.totalCount?(p(),L(e.TableFooterPagination,{key:0,"current-page":a.currentPage,"total-pages":e.totalPages,"total-count":a.totalCount,"page-size":a.pageSize,onPageChange:n[0]||(n[0]=o=>e.emit("pageChange",o))},null,8,["current-page","total-pages","total-count","page-size"])):O("v-if",!0)])):O("v-if",!0)}const RS=G(_de,[["render",bde],["__file","/app/app/javascript/dashboard/components/widgets/TableFooter.vue"]]),rM={0:"agent",1:"administrator"},vde={0:"online",1:"offline",2:"busy"},Ede={"automationrule:create":"AUDIT_LOGS.AUTOMATION_RULE.ADD","automationrule:update":"AUDIT_LOGS.AUTOMATION_RULE.EDIT","automationrule:destroy":"AUDIT_LOGS.AUTOMATION_RULE.DELETE","webhook:create":"AUDIT_LOGS.WEBHOOK.ADD","webhook:update":"AUDIT_LOGS.WEBHOOK.EDIT","webhook:destroy":"AUDIT_LOGS.WEBHOOK.DELETE","inbox:create":"AUDIT_LOGS.INBOX.ADD","inbox:update":"AUDIT_LOGS.INBOX.EDIT","inbox:destroy":"AUDIT_LOGS.INBOX.DELETE","user:sign_in":"AUDIT_LOGS.USER_ACTION.SIGN_IN","user:sign_out":"AUDIT_LOGS.USER_ACTION.SIGN_OUT","team:create":"AUDIT_LOGS.TEAM.ADD","team:update":"AUDIT_LOGS.TEAM.EDIT","team:destroy":"AUDIT_LOGS.TEAM.DELETE","macro:create":"AUDIT_LOGS.MACRO.ADD","macro:update":"AUDIT_LOGS.MACRO.EDIT","macro:destroy":"AUDIT_LOGS.MACRO.DELETE","accountuser:create":"AUDIT_LOGS.ACCOUNT_USER.ADD","accountuser:update:self":"AUDIT_LOGS.ACCOUNT_USER.EDIT.SELF","accountuser:update:other":"AUDIT_LOGS.ACCOUNT_USER.EDIT.OTHER","accountuser:update:deleted":"AUDIT_LOGS.ACCOUNT_USER.EDIT.DELETED","inboxmember:create":"AUDIT_LOGS.INBOX_MEMBER.ADD","inboxmember:destroy":"AUDIT_LOGS.INBOX_MEMBER.REMOVE","teammember:create":"AUDIT_LOGS.TEAM_MEMBER.ADD","teammember:destroy":"AUDIT_LOGS.TEAM_MEMBER.REMOVE","account:update":"AUDIT_LOGS.ACCOUNT.EDIT","conversation:destroy":"AUDIT_LOGS.CONVERSATION.DELETE"};function ZI(t){return Array.isArray(t)?t[t.length-1]:t}function Sde(t){let n=[],a=[];return t.role&&t.role.length&&(n.push("role"),a.push(rM[ZI(t.role)])),t.availability&&t.availability.length&&(n.push("availability"),a.push(vde[ZI(t.availability)])),{changes:n,values:a}}function kh(t,n){var e;return t===null?"System":((e=n.find(s=>s.id===t))==null?void 0:e.name)||t}function Tde(t,n,a){n.invitee=kh(t.audited_changes.user_id,a);const e=t.audited_changes.role;return n.role=rM[e]||"unknown",n}function Ade(t,n,a){var s,r;t.user_id!==((s=t.auditable)==null?void 0:s.user_id)&&(n.user=kh((r=t.auditable)==null?void 0:r.user_id,a));const e=Sde(t.audited_changes);return e&&(n.attributes=e.changes,n.values=e.values),n}function yde(t,n,a){const e=t.audited_changes.user_id;return e&&e!==void 0&&(n.user=kh(e,a)),n}function Ide(t,n){return t.audited_changes.team_id&&(n.team_id=t.audited_changes.team_id),n}function Cde(t,n){return t.audited_changes.inbox_id&&(n.inbox_id=t.audited_changes.inbox_id),n}function Ode(t,n,a){return t.audited_changes&&(n=yde(t,n,a),n=Ide(t,n),n=Cde(t,n)),n}function Nde(t,n,a,e){return e==="create"?Tde(t,n,a):e==="update"?Ade(t,n,a):n}function QI(t,n){var r;let a={agentName:kh(t.user_id,n),id:t.auditable_id};const e=t.auditable_type.toLowerCase(),s=t.action.toLowerCase();return e==="conversation"&&s==="destroy"&&(a.id=((r=t.audited_changes)==null?void 0:r.display_id)||t.auditable_id),e==="accountuser"&&(a=Nde(t,a,n,s)),(e==="inboxmember"||e==="teammember")&&(a=Ode(t,a,n)),a}function xde(t){return t.auditable===null?":deleted":t.user_id===t.auditable.user_id?":self":":other"}const JI=t=>{const n=t.auditable_type.toLowerCase(),a=t.action.toLowerCase();let e=`${n}:${a}`;return n==="accountuser"&&a==="update"&&(e+=xde(t)),Ede[e]||""},Rde={__name:"Index",setup(t,{expose:n}){n();const a=xt(),e=Fe(),s=ft(),r=S(()=>a["auditlogs/getAuditLogs"].value),o=S(()=>a["auditlogs/getUIFlags"].value),i=S(()=>a["auditlogs/getMeta"].value),l=S(()=>a["agents/getAgents"].value),{t:c}=Q(),d=lt(),u=S(()=>Number(d.query.page??1)),m=b=>{try{e.dispatch("auditlogs/fetch",{page:b})}catch(A){const T=(A==null?void 0:A.message)||c("AUDIT_LOGS.API.ERROR_MESSAGE");Z(T)}},h=b=>{const A=QI(b,l.value),T=JI(b),I=x=>Array.isArray(x)?x.join(", "):x,N={...A,attributes:I(A.attributes),values:I(A.values)};return c(T,N)},_=b=>{s.push({name:"auditlogs_list",query:{page:b}})};Pe(()=>{e.dispatch("agents/get"),m(u.value)}),je(u,(b,A)=>{b!==A&&m(b)});const E=S(()=>[c("AUDIT_LOGS.LIST.TABLE_HEADER.ACTIVITY"),c("AUDIT_LOGS.LIST.TABLE_HEADER.TIME"),c("AUDIT_LOGS.LIST.TABLE_HEADER.IP_ADDRESS")]),y={getters:a,store:e,router:s,records:r,uiFlags:o,meta:i,agentList:l,t:c,route:d,routerPage:u,fetchAuditLogs:m,generateLogText:h,onPageChange:_,tableHeaders:E,get useAlert(){return Z},get messageTimestamp(){return Fl},get useStoreGetters(){return xt},get useStore(){return Fe},TableFooter:RS,BaseSettingsHeader:Va,get generateTranslationPayload(){return QI},get generateLogActionKey(){return JI},computed:S,onMounted:Pe,watch:je,get useI18n(){return Q},get useRoute(){return lt},get useRouter(){return ft}};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}},wde={class:"flex-1 overflow-auto"},Mde={class:"mt-6 flex-1 text-n-slate-11"},Lde={key:1,class:"flex flex-col items-center justify-center h-full text-base p-8"},Dde={key:2,class:"min-w-full overflow-x-auto"},Pde={class:"divide-y divide-n-weak"},kde={class:"divide-y divide-n-weak text-n-slate-11"},Bde={class:"py-4 ltr:pr-4 rtl:pl-4 break-all whitespace-nowrap"},Fde={class:"py-4 ltr:pr-4 rtl:pl-4 break-all whitespace-nowrap"},Ude={class:"py-4 w-[8.75rem]"};function $de(t,n,a,e,s,r){const o=H("woot-loading-state");return p(),g("div",wde,[v(e.BaseSettingsHeader,{title:t.$t("AUDIT_LOGS.HEADER"),description:t.$t("AUDIT_LOGS.DESCRIPTION"),"link-text":t.$t("AUDIT_LOGS.LEARN_MORE"),"feature-name":"audit_logs"},null,8,["title","description","link-text"]),f("div",Mde,[e.uiFlags.fetchingList?(p(),L(o,{key:0,message:t.$t("AUDIT_LOGS.LOADING")},null,8,["message"])):e.records.length?(p(),g("div",Dde,[f("table",Pde,[f("thead",null,[(p(!0),g(de,null,Ae(e.tableHeaders,i=>(p(),g("th",{key:i,class:"py-4 ltr:pr-4 rtl:pl-4 text-left font-semibold text-n-slate-11"},C(i),1))),128))]),f("tbody",kde,[(p(!0),g(de,null,Ae(e.records,i=>(p(),g("tr",{key:i.id},[f("td",Bde,C(e.generateLogText(i)),1),f("td",Fde,C(e.messageTimestamp(i.created_at,"MMM dd, yyyy hh:mm a")),1),f("td",Ude,C(i.remote_address),1)]))),128))])]),v(e.TableFooter,{"current-page":Number(e.meta.currentPage),"total-count":e.meta.totalEntries,"page-size":e.meta.perPage,class:"border-n-weak border-t !px-0 py-4",onPageChange:e.onPageChange},null,8,["current-page","total-count","page-size"])])):(p(),g("p",Lde,C(t.$t("AUDIT_LOGS.LIST.404")),1))])])}const Gde=G(Rde,[["render",$de],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/auditlogs/Index.vue"]]),Vde={routes:[{path:vt("accounts/:accountId/settings/audit-logs"),component:cs,children:[{path:"",redirect:t=>({name:"auditlogs_list",params:t.params})},{path:"list",name:"auditlogs_list",meta:{featureFlag:pt.AUDIT_LOGS,installationTypes:[gn.CLOUD,gn.ENTERPRISE],permissions:["administrator"]},component:Gde}]}]};function dd(){const t=Fe(),{isCloudFeatureEnabled:n,currentAccount:a}=Ut(),{isEnterprise:e}=io(),s=S(()=>n(pt.CAPTAIN)),r=S(()=>{var c,d;return(d=(c=a.value)==null?void 0:c.limits)==null?void 0:d.captain}),o=S(()=>{var c;return(c=r.value)!=null&&c.documents?Os(r.value.documents):null}),i=S(()=>{var c;return(c=r.value)!=null&&c.responses?Os(r.value.responses):null});return{captainEnabled:s,captainLimits:r,documentLimits:o,responseLimits:i,fetchLimits:()=>{e&&t.dispatch("accounts/limits")}}}const Hde={__name:"BillingMeter",props:{title:{type:String,required:!0},consumed:{type:Number,required:!0},totalCount:{type:Number,required:!0}},setup(t,{expose:n}){n();const a=t,e=S(()=>Math.round(a.consumed/a.totalCount*100)),s=S(()=>e.value<50?"bg-n-teal-10":e.value<80?"bg-n-amber-10":"bg-n-ruby-10"),r={props:a,percent:e,colorClass:s,computed:S};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},jde={class:"flex gap-5 items-center justify-between text-xs uppercase text-n-slate-10"},Wde={class:"font-medium tracking-wider"},zde={class:"tabular-nums"},Yde={class:"rounded-full overflow-hidden h-2 w-full bg-n-slate-4 mt-2"};function Kde(t,n,a,e,s,r){return p(),g(de,null,[f("div",jde,[f("div",Wde,C(a.title),1),f("div",zde,C(a.consumed)+" / "+C(a.totalCount),1)]),f("div",Yde,[f("div",{class:oe(["h-2",e.colorClass]),style:nn({width:`${e.percent}%`})},null,6)])],64)}const Xde=G(Hde,[["render",Kde],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/billing/components/BillingMeter.vue"]]),qde={__name:"BillingHeader",props:{title:{type:String,required:!0},description:{type:String,required:!0}},setup(t,{expose:n}){n();const a={};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},Zde={class:"grid grid-cols-[1fr_auto] gap-5"},Qde={class:"text-base font-medium text-n-slate-12"},Jde={class:"text-sm mt-1 text-n-slate-11"};function eue(t,n,a,e,s,r){return p(),g("div",Zde,[f("div",null,[f("span",Qde,C(a.title),1),f("p",Jde,C(a.description),1)]),qe(t.$slots,"default")])}const iM=G(qde,[["render",eue],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/billing/components/BillingHeader.vue"]]),tue={__name:"BillingCard",props:{title:{type:String,required:!0},description:{type:String,required:!0}},setup(t,{expose:n}){n();const a={BillingHeader:iM};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},nue={class:"rounded-xl shadow-sm border border-n-weak bg-n-solid-2 py-5 space-y-5"};function aue(t,n,a,e,s,r){return p(),g("div",nue,[v(e.BillingHeader,{title:a.title,description:a.description,class:"px-5"},{default:z(()=>[qe(t.$slots,"action")]),_:3},8,["title","description"]),qe(t.$slots,"default")])}const sue=G(tue,[["render",aue],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/billing/components/BillingCard.vue"]]),oue={__name:"DetailItem",props:{label:{type:String,required:!0},value:{type:String,required:!0}},setup(t,{expose:n}){n();const a={};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},rue={class:"px-5"},iue={class:"text-n-slate-11 text-xs"},lue={class:"mt-2 text-xl font-medium text-n-slate-12"};function cue(t,n,a,e,s,r){return p(),g("div",rue,[f("span",iue,C(a.label),1),f("div",lue,C(a.value),1)])}const due=G(oue,[["render",cue],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/billing/components/DetailItem.vue"]]),Gd="billing_refresh_attempted",uue={__name:"Index",setup(t,{expose:n}){n();const a=ft(),{currentAccount:e,isOnChatwootCloud:s}=Ut(),{captainEnabled:r,captainLimits:o,documentLimits:i,responseLimits:l,fetchLimits:c}=dd(),d=le("accounts/getUIFlags"),u=Fe(),m=P(!1),h=S(()=>e.value.custom_attributes||{}),_=S(()=>h.value.plan_name),E=S(()=>h.value.subscribed_quantity),y=S(()=>{if(!h.value.subscription_ends_on)return"";const R=new Date(h.value.subscription_ends_on);return Mn(R,"dd MMM, yyyy")}),b=S(()=>!!_.value),A=async()=>{b.value||(await u.dispatch("accounts/subscription"),c())},T=async()=>{if(!s.value){a.push({name:"home"});return}const R=gc.get(Gd);await A(),b.value?gc.remove(Gd):R?gc.remove(Gd):(m.value=!0,gc.set(Gd,!0),setTimeout(()=>{window.location.reload()},5e3))},I=()=>{u.dispatch("accounts/checkout")},N=()=>{window.$chatwoot&&window.$chatwoot.toggle()};Pe(T);const x={router:a,currentAccount:e,isOnChatwootCloud:s,captainEnabled:r,captainLimits:o,documentLimits:i,responseLimits:l,fetchLimits:c,uiFlags:d,store:u,BILLING_REFRESH_ATTEMPTED:Gd,isWaitingForBilling:m,customAttributes:h,planName:_,subscribedQuantity:E,subscriptionRenewsOn:y,hasABillingPlan:b,fetchAccountDetails:A,handleBillingPageLogic:T,onClickBillingPortal:I,onToggleChatWindow:N,computed:S,onMounted:Pe,ref:P,get useRouter(){return ft},get useMapGetter(){return le},get useStore(){return Fe},get useAccount(){return Ut},get useCaptain(){return dd},get format(){return Mn},get sessionStorage(){return gc},BillingMeter:Xde,BillingCard:sue,BillingHeader:iM,DetailItem:due,BaseSettingsHeader:Va,SettingsLayout:Ha,ButtonV4:Se};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}},pue={class:"grid gap-4"},fue={key:0,class:"grid lg:grid-cols-4 sm:grid-cols-3 grid-cols-1 gap-2 divide-x divide-n-weak"},mue={key:0,class:"px-5"},hue={key:1,class:"px-5"};function _ue(t,n,a,e,s,r){return p(),L(e.SettingsLayout,{"is-loading":e.uiFlags.isFetchingItem||e.isWaitingForBilling,"loading-message":e.isWaitingForBilling?t.$t("BILLING_SETTINGS.NO_BILLING_USER"):t.$t("ATTRIBUTES_MGMT.LOADING"),"no-records-found":!e.hasABillingPlan&&!e.isWaitingForBilling,"no-records-message":t.$t("BILLING_SETTINGS.NO_BILLING_USER")},{header:z(()=>[v(e.BaseSettingsHeader,{title:t.$t("BILLING_SETTINGS.TITLE"),description:t.$t("BILLING_SETTINGS.DESCRIPTION"),"link-text":t.$t("BILLING_SETTINGS.VIEW_PRICING"),"feature-name":"billing"},null,8,["title","description","link-text"])]),body:z(()=>[f("section",pue,[v(e.BillingCard,{title:t.$t("BILLING_SETTINGS.MANAGE_SUBSCRIPTION.TITLE"),description:t.$t("BILLING_SETTINGS.MANAGE_SUBSCRIPTION.DESCRIPTION")},{action:z(()=>[v(e.ButtonV4,{sm:"",solid:"",blue:"",onClick:e.onClickBillingPortal},{default:z(()=>[Oe(C(t.$t("BILLING_SETTINGS.MANAGE_SUBSCRIPTION.BUTTON_TXT")),1)]),_:1})]),default:z(()=>[e.planName||e.subscribedQuantity||e.subscriptionRenewsOn?(p(),g("div",fue,[v(e.DetailItem,{label:t.$t("BILLING_SETTINGS.CURRENT_PLAN.TITLE"),value:e.planName},null,8,["label","value"]),e.subscribedQuantity?(p(),L(e.DetailItem,{key:0,label:t.$t("BILLING_SETTINGS.CURRENT_PLAN.SEAT_COUNT"),value:e.subscribedQuantity},null,8,["label","value"])):O("v-if",!0),e.subscriptionRenewsOn?(p(),L(e.DetailItem,{key:1,label:t.$t("BILLING_SETTINGS.CURRENT_PLAN.RENEWS_ON"),value:e.subscriptionRenewsOn},null,8,["label","value"])):O("v-if",!0)])):O("v-if",!0)]),_:1},8,["title","description"]),e.captainEnabled?(p(),L(e.BillingCard,{key:0,title:t.$t("BILLING_SETTINGS.CAPTAIN.TITLE"),description:t.$t("BILLING_SETTINGS.CAPTAIN.DESCRIPTION")},{action:z(()=>[v(e.ButtonV4,{sm:"",faded:"",slate:"",disabled:""},{default:z(()=>[Oe(C(t.$t("BILLING_SETTINGS.CAPTAIN.BUTTON_TXT")),1)]),_:1})]),default:z(()=>[e.captainLimits&&e.responseLimits?(p(),g("div",mue,[v(e.BillingMeter,Ta({title:t.$t("BILLING_SETTINGS.CAPTAIN.RESPONSES")},e.responseLimits),null,16,["title"])])):O("v-if",!0),e.captainLimits&&e.documentLimits?(p(),g("div",hue,[v(e.BillingMeter,Ta({title:t.$t("BILLING_SETTINGS.CAPTAIN.DOCUMENTS")},e.documentLimits),null,16,["title"])])):O("v-if",!0)]),_:1},8,["title","description"])):(p(),L(e.BillingCard,{key:1,title:t.$t("BILLING_SETTINGS.CAPTAIN.TITLE"),description:t.$t("BILLING_SETTINGS.CAPTAIN.UPGRADE")},{action:z(()=>[v(e.ButtonV4,{sm:"",solid:"",slate:"",onClick:e.onClickBillingPortal},{default:z(()=>[Oe(C(t.$t("CAPTAIN.PAYWALL.UPGRADE_NOW")),1)]),_:1})]),_:1},8,["title","description"])),v(e.BillingHeader,{class:"px-1 mt-5",title:t.$t("BILLING_SETTINGS.CHAT_WITH_US.TITLE"),description:t.$t("BILLING_SETTINGS.CHAT_WITH_US.DESCRIPTION")},{default:z(()=>[v(e.ButtonV4,{sm:"",solid:"",slate:"",icon:"i-lucide-life-buoy",onOpen:e.onToggleChatWindow},{default:z(()=>[Oe(C(t.$t("BILLING_SETTINGS.CHAT_WITH_US.BUTTON_TXT")),1)]),_:1})]),_:1},8,["title","description"])])]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"])}const gue=G(uue,[["render",_ue],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/billing/Index.vue"]]),bue={routes:[{path:vt("accounts/:accountId/settings/billing"),meta:{permissions:["administrator"],installationTypes:[gn.CLOUD]},component:cs,props:{headerTitle:"BILLING_SETTINGS.TITLE",icon:"credit-card-person",showNewButton:!1},children:[{path:"",name:"billing_settings_index",component:gue,meta:{installationTypes:[gn.CLOUD],permissions:["administrator"]}}]}]},vue={name:"AddCanned",components:{NextButton:Se,Modal:Hl,WootMessageEditor:ai},props:{responseContent:{type:String,default:""},onClose:{type:Function,default:()=>{}}},setup(){return{v$:rt()}},data(){return{shortCode:"",content:this.responseContent||"",addCanned:{showLoading:!1,message:""},show:!0}},validations:{shortCode:{required:Ge,minLength:Rt(2)},content:{required:Ge}},methods:{resetForm(){this.shortCode="",this.content="",this.v$.shortCode.$reset(),this.v$.content.$reset()},addCannedResponse(){this.addCanned.showLoading=!0,this.$store.dispatch("createCannedResponse",{short_code:this.shortCode,content:this.content}).then(()=>{this.addCanned.showLoading=!1,Z(this.$t("CANNED_MGMT.ADD.API.SUCCESS_MESSAGE")),this.resetForm(),this.onClose()}).catch(t=>{this.addCanned.showLoading=!1;const n=(t==null?void 0:t.message)||this.$t("CANNED_MGMT.ADD.API.ERROR_MESSAGE");Z(n)})}}},Eue={class:"flex flex-col h-auto overflow-auto"},Sue={class:"w-full"},Tue=["placeholder"],Aue={class:"w-full"},yue={class:"editor-wrap"},Iue={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function Cue(t,n,a,e,s,r){const o=H("woot-modal-header"),i=H("WootMessageEditor"),l=H("NextButton"),c=H("Modal");return p(),L(c,{show:s.show,"onUpdate:show":n[4]||(n[4]=d=>s.show=d),"on-close":a.onClose},{default:z(()=>[f("div",Eue,[v(o,{"header-title":t.$t("CANNED_MGMT.ADD.TITLE"),"header-content":t.$t("CANNED_MGMT.ADD.DESC")},null,8,["header-title","header-content"]),f("form",{class:"flex flex-col w-full",onSubmit:n[3]||(n[3]=Ve(d=>r.addCannedResponse(),["prevent"]))},[f("div",Sue,[f("label",{class:oe({error:e.v$.shortCode.$error})},[Oe(C(t.$t("CANNED_MGMT.ADD.FORM.SHORT_CODE.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[0]||(n[0]=d=>s.shortCode=d),type:"text",placeholder:t.$t("CANNED_MGMT.ADD.FORM.SHORT_CODE.PLACEHOLDER"),onBlur:n[1]||(n[1]=(...d)=>e.v$.shortCode.$touch&&e.v$.shortCode.$touch(...d))},null,40,Tue),[[Et,s.shortCode]])],2)]),f("div",Aue,[f("label",{class:oe({error:e.v$.content.$error})},C(t.$t("CANNED_MGMT.ADD.FORM.CONTENT.LABEL")),3),f("div",yue,[v(i,{modelValue:s.content,"onUpdate:modelValue":n[2]||(n[2]=d=>s.content=d),class:oe(["message-editor [&>div]:px-1",{editor_warning:e.v$.content.$error}]),"enable-variables":"","enable-canned-responses":!1,placeholder:t.$t("CANNED_MGMT.ADD.FORM.CONTENT.PLACEHOLDER"),onBlur:e.v$.content.$touch},null,8,["modelValue","class","placeholder","onBlur"])])]),f("div",Iue,[v(l,{faded:"",slate:"",type:"reset",label:t.$t("CANNED_MGMT.ADD.CANCEL_BUTTON_TEXT"),onClick:Ve(a.onClose,["prevent"])},null,8,["label","onClick"]),v(l,{type:"submit",label:t.$t("CANNED_MGMT.ADD.FORM.SUBMIT"),disabled:e.v$.content.$invalid||e.v$.shortCode.$invalid||s.addCanned.showLoading,"is-loading":s.addCanned.showLoading},null,8,["label","disabled","is-loading"])])],32)])]),_:1},8,["show","on-close"])}const lM=G(vue,[["render",Cue],["__scopeId","data-v-a3f4d34b"],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/canned/AddCanned.vue"]]),Oue={components:{NextButton:Se,Modal:Hl,WootMessageEditor:ai},props:{id:{type:Number,default:null},edcontent:{type:String,default:""},edshortCode:{type:String,default:""},onClose:{type:Function,default:()=>{}}},setup(){return{v$:rt()}},data(){return{editCanned:{showAlert:!1,showLoading:!1},shortCode:this.edshortCode,content:this.edcontent,show:!0}},validations:{shortCode:{required:Ge,minLength:Rt(2)},content:{required:Ge}},computed:{pageTitle(){return`${this.$t("CANNED_MGMT.EDIT.TITLE")} - ${this.edshortCode}`}},methods:{setPageName({name:t}){this.v$.content.$touch(),this.content=t},resetForm(){this.shortCode="",this.content="",this.v$.shortCode.$reset(),this.v$.content.$reset()},editCannedResponse(){this.editCanned.showLoading=!0,this.$store.dispatch("updateCannedResponse",{id:this.id,short_code:this.shortCode,content:this.content}).then(()=>{this.editCanned.showLoading=!1,Z(this.$t("CANNED_MGMT.EDIT.API.SUCCESS_MESSAGE")),this.resetForm(),setTimeout(()=>{this.onClose()},10)}).catch(t=>{this.editCanned.showLoading=!1;const n=(t==null?void 0:t.message)||this.$t("CANNED_MGMT.EDIT.API.ERROR_MESSAGE");Z(n)})}}},Nue={class:"flex flex-col h-auto overflow-auto"},xue={class:"w-full"},Rue=["placeholder"],wue={class:"w-full"},Mue={class:"editor-wrap"},Lue={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function Due(t,n,a,e,s,r){const o=H("woot-modal-header"),i=H("WootMessageEditor"),l=H("NextButton"),c=H("Modal");return p(),L(c,{show:s.show,"onUpdate:show":n[4]||(n[4]=d=>s.show=d),"on-close":a.onClose},{default:z(()=>[f("div",Nue,[v(o,{"header-title":r.pageTitle},null,8,["header-title"]),f("form",{class:"flex flex-col w-full",onSubmit:n[3]||(n[3]=Ve(d=>r.editCannedResponse(),["prevent"]))},[f("div",xue,[f("label",{class:oe({error:e.v$.shortCode.$error})},[Oe(C(t.$t("CANNED_MGMT.EDIT.FORM.SHORT_CODE.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[0]||(n[0]=d=>s.shortCode=d),type:"text",placeholder:t.$t("CANNED_MGMT.EDIT.FORM.SHORT_CODE.PLACEHOLDER"),onInput:n[1]||(n[1]=(...d)=>e.v$.shortCode.$touch&&e.v$.shortCode.$touch(...d))},null,40,Rue),[[Et,s.shortCode]])],2)]),f("div",wue,[f("label",{class:oe({error:e.v$.content.$error})},C(t.$t("CANNED_MGMT.EDIT.FORM.CONTENT.LABEL")),3),f("div",Mue,[v(i,{modelValue:s.content,"onUpdate:modelValue":n[2]||(n[2]=d=>s.content=d),class:oe(["message-editor [&>div]:px-1",{editor_warning:e.v$.content.$error}]),"enable-variables":"","enable-canned-responses":!1,placeholder:t.$t("CANNED_MGMT.EDIT.FORM.CONTENT.PLACEHOLDER"),onBlur:e.v$.content.$touch},null,8,["modelValue","class","placeholder","onBlur"])])]),f("div",Lue,[v(l,{faded:"",slate:"",type:"reset",label:t.$t("CANNED_MGMT.EDIT.CANCEL_BUTTON_TEXT"),onClick:Ve(a.onClose,["prevent"])},null,8,["label","onClick"]),v(l,{type:"submit",label:t.$t("CANNED_MGMT.EDIT.FORM.SUBMIT"),disabled:e.v$.content.$invalid||e.v$.shortCode.$invalid||s.editCanned.showLoading,"is-loading":s.editCanned.showLoading},null,8,["label","disabled","is-loading"])])],32)])]),_:1},8,["show","on-close"])}const Pue=G(Oue,[["render",Due],["__scopeId","data-v-56e1e316"],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/canned/EditCanned.vue"]]),kue=Object.assign({name:"CannedResponseSettings"},{__name:"Index",setup(t,{expose:n}){n();const a=xt(),e=Fe(),{t:s}=Q(),r=P(!1),o=P({}),i=P(!1),l=P(!1),c=P({}),d=P({message:""}),u=P("asc"),m=S(()=>a.getSortedCannedResponses.value(u.value)),h=S(()=>a.getUIFlags.value),_=S(()=>`${s("CANNED_MGMT.DELETE.CONFIRM.YES")} ${c.value.short_code}`),E=S(()=>`${s("CANNED_MGMT.DELETE.CONFIRM.NO")} ${c.value.short_code}`),y=S(()=>` ${c.value.short_code} ? `),b=()=>{u.value=u.value==="asc"?"desc":"asc"},A=async()=>{try{await e.dispatch("getCannedResponse")}catch{}};Pe(()=>{A()});const T=F=>{o[c.value.id]=!1,c.value={},d.value.message=F,Z(F)},I=()=>{r.value=!0},N=()=>{r.value=!1},x=F=>{i.value=!0,c.value=F},R=()=>{i.value=!1},M=F=>{l.value=!0,c.value=F},w=()=>{l.value=!1},D=async F=>{try{await e.dispatch("deleteCannedResponse",F),T(s("CANNED_MGMT.DELETE.API.SUCCESS_MESSAGE"))}catch($){const Y=($==null?void 0:$.message)||s("CANNED_MGMT.DELETE.API.ERROR_MESSAGE");T(Y)}},B=()=>{o[c.value.id]=!0,w(),D(c.value.id)},k=S(()=>[s("CANNED_MGMT.LIST.TABLE_HEADER.SHORT_CODE"),s("CANNED_MGMT.LIST.TABLE_HEADER.CONTENT"),s("CANNED_MGMT.LIST.TABLE_HEADER.ACTIONS")]),V={getters:a,store:e,t:s,showAddPopup:r,loading:o,showEditPopup:i,showDeleteConfirmationPopup:l,activeResponse:c,cannedResponseAPI:d,sortOrder:u,records:m,uiFlags:h,deleteConfirmText:_,deleteRejectText:E,deleteMessage:y,toggleSort:b,fetchCannedResponses:A,showAlertMessage:T,openAddPopup:I,hideAddPopup:N,openEditPopup:x,hideEditPopup:R,openDeletePopup:M,closeDeletePopup:w,deleteCannedResponse:D,confirmDeletion:B,tableHeaders:k,get useAlert(){return Z},AddCanned:lM,EditCanned:Pue,BaseSettingsHeader:Va,computed:S,onMounted:Pe,ref:P,get useI18n(){return Q},get useStoreGetters(){return xt},get useStore(){return Fe},Button:Se};return Object.defineProperty(V,"__isScriptSetup",{enumerable:!1,value:!0}),V}}),Bue={class:"flex-1 overflow-auto"},Fue={class:"mt-6 flex-1"},Uue={key:1,class:"flex flex-col items-center justify-center h-full text-base text-n-slate-11 py-8"},$ue={key:2,class:"min-w-full overflow-x-auto divide-y divide-n-weak"},Gue={key:0},Vue={class:"mb-0"},Hue={class:"divide-y divide-n-weak text-n-slate-11"},jue=["title"],Wue={class:"py-4 ltr:pr-4 rtl:pl-4 md:break-all whitespace-normal"},zue={class:"py-4 flex justify-end gap-1"};function Yue(t,n,a,e,s,r){const o=H("woot-loading-state"),i=H("fluent-icon"),l=H("woot-modal"),c=H("woot-delete-modal"),d=nt("tooltip");return p(),g("div",Bue,[v(e.BaseSettingsHeader,{title:t.$t("CANNED_MGMT.HEADER"),description:t.$t("CANNED_MGMT.DESCRIPTION"),"link-text":t.$t("CANNED_MGMT.LEARN_MORE"),"feature-name":"canned_responses"},{actions:z(()=>[v(e.Button,{icon:"i-lucide-circle-plus",label:t.$t("CANNED_MGMT.HEADER_BTN_TXT"),onClick:e.openAddPopup},null,8,["label"])]),_:1},8,["title","description","link-text"]),f("div",Fue,[e.uiFlags.fetchingList?(p(),L(o,{key:0,message:t.$t("CANNED_MGMT.LOADING")},null,8,["message"])):e.records.length?(p(),g("table",$ue,[f("thead",null,[(p(!0),g(de,null,Ae(e.tableHeaders,u=>(p(),g("th",{key:u,class:"py-4 ltr:pr-4 rtl:pl-4 text-left font-semibold text-n-slate-11 last:text-right"},[u!==e.tableHeaders[0]?(p(),g("span",Gue,C(u),1)):(p(),g("button",{key:1,class:"flex items-center p-0 cursor-pointer",onClick:e.toggleSort},[f("span",Vue,C(u),1),v(i,{class:"ml-2 size-4",icon:e.sortOrder==="desc"?"chevron-up":"chevron-down"},null,8,["icon"])]))]))),128))]),f("tbody",Hue,[(p(!0),g(de,null,Ae(e.records,(u,m)=>(p(),g("tr",{key:u.short_code},[f("td",{class:"py-4 ltr:pr-4 rtl:pl-4 truncate max-w-xs font-medium",title:u.short_code},C(u.short_code),9,jue),f("td",Wue,C(u.content),1),f("td",zue,[ce(v(e.Button,{icon:"i-lucide-pen",slate:"",xs:"",faded:"",onClick:h=>e.openEditPopup(u)},null,8,["onClick"]),[[d,t.$t("CANNED_MGMT.EDIT.BUTTON_TEXT"),void 0,{top:!0}]]),ce(v(e.Button,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"","is-loading":e.loading[u.id],onClick:h=>e.openDeletePopup(u,m)},null,8,["is-loading","onClick"]),[[d,t.$t("CANNED_MGMT.DELETE.BUTTON_TEXT"),void 0,{top:!0}]])])]))),128))])])):(p(),g("p",Uue,C(t.$t("CANNED_MGMT.LIST.404")),1))]),v(l,{show:e.showAddPopup,"onUpdate:show":n[0]||(n[0]=u=>e.showAddPopup=u),"on-close":e.hideAddPopup},{default:z(()=>[v(e.AddCanned,{"on-close":e.hideAddPopup})]),_:1},8,["show"]),v(l,{show:e.showEditPopup,"onUpdate:show":n[1]||(n[1]=u=>e.showEditPopup=u),"on-close":e.hideEditPopup},{default:z(()=>[e.showEditPopup?(p(),L(e.EditCanned,{key:0,id:e.activeResponse.id,"edshort-code":e.activeResponse.short_code,edcontent:e.activeResponse.content,"on-close":e.hideEditPopup},null,8,["id","edshort-code","edcontent"])):O("v-if",!0)]),_:1},8,["show"]),v(c,{show:e.showDeleteConfirmationPopup,"onUpdate:show":n[2]||(n[2]=u=>e.showDeleteConfirmationPopup=u),"on-close":e.closeDeletePopup,"on-confirm":e.confirmDeletion,title:t.$t("CANNED_MGMT.DELETE.CONFIRM.TITLE"),message:t.$t("CANNED_MGMT.DELETE.CONFIRM.MESSAGE"),"message-value":e.deleteMessage,"confirm-text":e.deleteConfirmText,"reject-text":e.deleteRejectText},null,8,["show","title","message","message-value","confirm-text","reject-text"])])}const Kue=G(kue,[["render",Yue],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/canned/Index.vue"]]),Xue={routes:[{path:vt("accounts/:accountId/settings/canned-response"),component:cs,children:[{path:"",redirect:t=>({name:"canned_list",params:t.params})},{path:"list",name:"canned_list",meta:{featureFlag:pt.CANNED_RESPONSES,permissions:[...Ua,..._s]},component:Kue}]}]},que={fetchFacebookPages(t,n){const a=h4("fetchFacebookPages");return a.params.omniauth_token=t,axios.post(a.url(n),a.params)}},Zue={props:{headerTitle:{type:String,default:""},headerContent:{type:String,default:""}}},Que={class:"flex flex-col w-full items-start mb-4"},Jue={class:"text-xl font-medium mb-1 text-n-slate-12 break-words"},epe={class:"text-sm w-full text-n-slate-11"};function tpe(t,n,a,e,s,r){const o=nt("dompurify-html");return p(),g("div",Que,[f("h2",Jue,C(a.headerTitle),1),ce(f("p",epe,null,512),[[o,a.headerContent]])])}const Ss=G(Zue,[["render",tpe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/SettingsSubPageHeader.vue"]]),npe="text/javascript",eC="data-loaded",ape=["defer","crossOrigin","noModule","referrerPolicy","id"];class spe extends Error{constructor(n,a="Failed to load script"){super(a),this.name="ScriptLoaderError",this.src=n}getErrorDetails(){return`Failed to load script from source: ${this.src}`}}const ope=(t,n)=>{const a=document.createElement("script");return a.type=n.type||npe,a.async=n.async!==!1,a.src=t,ape.forEach(e=>{e in n&&(a[e]=n[e])}),Object.entries(n.attrs||{}).forEach(([e,s])=>a.setAttribute(e,s)),a},rpe=t=>document.querySelector(`script[src="${t}"]`);async function wS(t,n){return typeof window>"u"||!window.document?Promise.resolve(!1):new Promise((a,e)=>{if(t.trim()===""){e(new Error("Invalid source URL provided"));return}let s=rpe(t);if(!s)s=ope(t,n),document.head.appendChild(s);else if(s.hasAttribute(eC)){a(s);return}const r=()=>e(new spe(t));s.addEventListener("error",r),s.addEventListener("abort",r),s.addEventListener("load",()=>{s.setAttribute(eC,"true"),a(s)})})}const ipe="/vite-dev/assets/facebook_login-_skaVloV.png",lpe={components:{LoadingState:Ed,PageHeader:Ss,NextButton:Se},setup(){const{accountId:t}=Ut(),{replaceInstallationName:n}=Rs();return{accountId:t,replaceInstallationName:n,v$:rt()}},data(){return{isCreating:!1,hasError:!1,omniauth_token:"",user_access_token:"",channel:"facebook",selectedPage:{name:null,id:null},pageName:"",pageList:[],emptyStateMessage:this.$t("INBOX_MGMT.DETAILS.LOADING_FB"),errorStateMessage:"",errorStateDescription:"",hasLoginStarted:!1}},validations:{pageName:{required:Ge},selectedPage:{isEmpty(){return this.selectedPage!==null&&!!this.selectedPage.name}}},computed:{showLoader(){return!this.user_access_token||this.isCreating},getSelectablePages(){return this.pageList.filter(t=>!t.exists)}},mounted(){window.fbAsyncInit=this.runFBInit},methods:{async startLogin(){this.hasLoginStarted=!0;try{await this.loadFBsdk(),this.runFBInit(),this.tryFBlogin()}catch(t){t.name==="ScriptLoaderError"?Z(this.$t("INBOX_MGMT.DETAILS.ERROR_FB_LOADING")):(vd(t),Z(this.$t("INBOX_MGMT.DETAILS.ERROR_FB_AUTH")))}},setPageName({name:t}){this.v$.selectedPage.$touch(),this.pageName=t},initChannelAuth(t){t==="facebook"&&this.loadFBsdk()},runFBInit(){FB.init({appId:window.chatwootConfig.fbAppId,xfbml:!0,version:window.chatwootConfig.fbApiVersion,status:!0}),window.fbSDKLoaded=!0,FB.AppEvents.logPageView()},async loadFBsdk(){return wS("https://connect.facebook.net/en_US/sdk.js",{id:"facebook-jssdk"})},tryFBlogin(){FB.login(t=>{this.hasError=!1,t.status==="connected"?this.fetchPages(t.authResponse.accessToken):t.status==="not_authorized"?(console.error("FACEBOOK AUTH ERROR",t),this.hasError=!0,this.errorStateMessage=this.$t("INBOX_MGMT.DETAILS.ERROR_FB_UNAUTHORIZED"),this.errorStateDescription=this.$t("INBOX_MGMT.DETAILS.ERROR_FB_UNAUTHORIZED_HELP")):(console.error("FACEBOOK AUTH ERROR",t),this.hasError=!0,this.errorStateMessage=this.$t("INBOX_MGMT.DETAILS.ERROR_FB_AUTH"),this.errorStateDescription="")},{scope:"pages_manage_metadata,business_management,pages_messaging,instagram_basic,pages_show_list,pages_read_engagement,instagram_manage_messages"})},async fetchPages(t){try{const n=await que.fetchFacebookPages(t,this.accountId),{data:{data:a}}=n;this.pageList=a.page_details,this.user_access_token=a.user_access_token}catch{}},channelParams(){var t;return{user_access_token:this.user_access_token,page_access_token:this.selectedPage.access_token,page_id:this.selectedPage.id,inbox_name:(t=this.selectedPage.name)==null?void 0:t.trim()}},createChannel(){this.v$.$touch(),this.v$.$error||(this.emptyStateMessage=this.$t("INBOX_MGMT.DETAILS.CREATING_CHANNEL"),this.isCreating=!0,this.$store.dispatch("inboxes/createFBChannel",this.channelParams()).then(t=>{wa.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:t.id}})}).catch(()=>{this.isCreating=!1}))}}},cpe={class:"w-full h-full col-span-6 p-6 overflow-auto"},dpe={key:0,class:"flex flex-col items-center justify-center h-full text-center"},upe={class:"py-6"},ppe={key:1},fpe={key:0,class:"max-w-lg mx-auto text-center"},mpe={key:0},hpe={class:"w-full"},_pe={class:"w-3/5"},gpe={class:"w-full"},bpe={key:0,class:"message"},vpe={class:"w-full"},Epe=["placeholder"],Spe={key:0,class:"message"},Tpe={class:"w-full text-right"};function Ape(t,n,a,e,s,r){const o=H("LoadingState"),i=H("PageHeader"),l=H("multiselect"),c=H("NextButton"),d=nt("dompurify-html");return p(),g("div",cpe,[s.hasLoginStarted?(p(),g("div",ppe,[s.hasError?(p(),g("div",fpe,[f("h5",null,C(s.errorStateMessage),1),s.errorStateDescription?ce((p(),g("p",mpe,null,512)),[[d,s.errorStateDescription]]):O("v-if",!0)])):r.showLoader?(p(),L(o,{key:1,message:s.emptyStateMessage},null,8,["message"])):(p(),g("form",{key:2,class:"flex flex-col flex-wrap mx-0",onSubmit:n[4]||(n[4]=Ve(u=>r.createChannel(),["prevent"]))},[f("div",hpe,[v(i,{"header-title":t.$t("INBOX_MGMT.ADD.DETAILS.TITLE"),"header-content":e.replaceInstallationName(t.$t("INBOX_MGMT.ADD.DETAILS.DESC"))},null,8,["header-title","header-content"])]),f("div",_pe,[f("div",gpe,[f("div",{class:oe(["input-wrap",{error:e.v$.selectedPage.$error}])},[Oe(C(t.$t("INBOX_MGMT.ADD.FB.CHOOSE_PAGE"))+" ",1),v(l,{modelValue:s.selectedPage,"onUpdate:modelValue":n[1]||(n[1]=u=>s.selectedPage=u),"close-on-select":"","allow-empty":"",options:r.getSelectablePages,"track-by":"id",label:"name","select-label":t.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":t.$t("FORMS.MULTISELECT.ENTER_TO_REMOVE"),placeholder:t.$t("INBOX_MGMT.ADD.FB.PICK_A_VALUE"),"selected-label":"",onSelect:r.setPageName},null,8,["modelValue","options","select-label","deselect-label","placeholder","onSelect"]),e.v$.selectedPage.$error?(p(),g("span",bpe,C(t.$t("INBOX_MGMT.ADD.FB.CHOOSE_PLACEHOLDER")),1)):O("v-if",!0)],2)]),f("div",vpe,[f("label",{class:oe({error:e.v$.pageName.$error})},[Oe(C(t.$t("INBOX_MGMT.ADD.FB.INBOX_NAME"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[2]||(n[2]=u=>s.pageName=u),type:"text",placeholder:t.$t("INBOX_MGMT.ADD.FB.PICK_NAME"),onInput:n[3]||(n[3]=(...u)=>e.v$.pageName.$touch&&e.v$.pageName.$touch(...u))},null,40,Epe),[[Et,s.pageName]]),e.v$.pageName.$error?(p(),g("span",Spe,C(t.$t("INBOX_MGMT.ADD.FB.ADD_NAME")),1)):O("v-if",!0)],2)]),f("div",Tpe,[v(c,{label:t.$t("INBOX_MGMT.ADD.FB.CREATE_INBOX")},null,8,["label"])])])],32))])):(p(),g("div",dpe,[f("a",{href:"#",onClick:n[0]||(n[0]=u=>r.startLogin())},n[5]||(n[5]=[f("img",{class:"w-auto h-10 rounded-md",src:ipe,alt:"Facebook-logo"},null,-1)])),f("p",upe,C(e.replaceInstallationName(t.$t("INBOX_MGMT.ADD.FB.HELP"))),1)]))])}const ype=G(lpe,[["render",Ape],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/channels/Facebook.vue"]]),Ipe={__name:"GreetingsEditor",props:{modelValue:{type:String,default:""},richtext:{type:Boolean,default:!1},label:{type:String,default:""},placeholder:{type:String,default:""}},emits:["update:modelValue"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=S({get:()=>e.modelValue,set:i=>s("update:modelValue",i)}),o={props:e,emit:s,greetingsMessage:r,computed:S,WootMessageEditor:ai,ResizableTextArea:IE};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},Cpe={key:0,class:"px-4 py-0 mx-0 mt-0 mb-4 rounded-lg outline outline-1 outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6 bg-n-alpha-black2"};function Ope(t,n,a,e,s,r){return p(),g("section",null,[a.richtext?(p(),g("div",Cpe,[v(e.WootMessageEditor,{modelValue:e.greetingsMessage,"onUpdate:modelValue":n[0]||(n[0]=o=>e.greetingsMessage=o),"is-format-mode":"","enable-variables":"",placeholder:a.placeholder,"min-height":4},null,8,["modelValue","placeholder"])])):(p(),L(e.ResizableTextArea,{key:1,modelValue:e.greetingsMessage,"onUpdate:modelValue":n[1]||(n[1]=o=>e.greetingsMessage=o),rows:4,type:"text",class:"greetings--textarea",label:a.label,placeholder:a.placeholder,onInput:t.handleInput},null,8,["modelValue","label","placeholder","onInput"]))])}const cM=G(Ipe,[["render",Ope],["__file","/app/app/javascript/shared/components/GreetingsEditor.vue"]]),Npe={__name:"Editor",props:{modelValue:{type:String,default:""},label:{type:String,default:""},placeholder:{type:String,default:""},focusOnMount:{type:Boolean,default:!1},maxLength:{type:Number,default:200},showCharacterCount:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},message:{type:String,default:""},messageType:{type:String,default:"info",validator:t=>["info","error","success"].includes(t)},enableVariables:{type:Boolean,default:!1},enableCannedResponses:{type:Boolean,default:!0},enabledMenuOptions:{type:Array,default:()=>[]},enableCaptainTools:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=Hc(),o=P(!1),i=S(()=>e.modelValue.length),l=S(()=>{switch(e.messageType){case"error":return"text-n-ruby-9 dark:text-n-ruby-9";case"success":return"text-n-teal-10 dark:text-n-teal-10";default:return"text-n-slate-11 dark:text-n-slate-11"}}),c=h=>{e.disabled||s("update:modelValue",h)},d=()=>{e.disabled||(o.value=!0)},u=()=>{e.disabled||(o.value=!1)};je(()=>e.modelValue,h=>{e.maxLength&&e.showCharacterCount&&!r.actions&&i.value>=e.maxLength&&s("update:modelValue",h.slice(0,e.maxLength))});const m={props:e,emit:s,slots:r,isFocused:o,characterCount:i,messageClass:l,handleInput:c,handleFocus:d,handleBlur:u,computed:S,ref:P,watch:je,useSlots:Hc,WootEditor:ai};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}},xpe={class:"flex flex-col min-w-0 gap-1"},Rpe={key:0,class:"mb-0.5 text-sm font-medium text-n-slate-12"},wpe={key:0,class:"flex items-center justify-end h-4 ltr:right-3 rtl:left-3"},Mpe={key:0,class:"text-xs tabular-nums text-n-slate-10"};function Lpe(t,n,a,e,s,r){return p(),g("div",xpe,[a.label?(p(),g("label",Rpe,C(a.label),1)):O("v-if",!0),f("div",{class:oe(["flex flex-col w-full gap-2 px-3 py-3 transition-all duration-500 ease-in-out border rounded-lg editor-wrapper bg-n-alpha-black2",[{"cursor-not-allowed opacity-50 pointer-events-none !bg-n-alpha-black2 disabled:border-n-weak dark:disabled:border-n-weak":a.disabled,"border-n-brand dark:border-n-brand":e.isFocused,"hover:border-n-slate-6 dark:hover:border-n-slate-6 border-n-weak dark:border-n-weak":!e.isFocused&&a.messageType!=="error","border-n-ruby-8 dark:border-n-ruby-8 hover:border-n-ruby-9 dark:hover:border-n-ruby-9":a.messageType==="error"&&!e.isFocused}]])},[v(e.WootEditor,{"model-value":a.modelValue,placeholder:a.placeholder,"focus-on-mount":a.focusOnMount,disabled:a.disabled,"enable-variables":a.enableVariables,"enable-canned-responses":a.enableCannedResponses,"enabled-menu-options":a.enabledMenuOptions,"enable-captain-tools":a.enableCaptainTools,onInput:e.handleInput,onFocus:e.handleFocus,onBlur:e.handleBlur},null,8,["model-value","placeholder","focus-on-mount","disabled","enable-variables","enable-canned-responses","enabled-menu-options","enable-captain-tools"]),a.showCharacterCount||e.slots.actions?(p(),g("div",wpe,[a.showCharacterCount&&!e.slots.actions?(p(),g("span",Mpe,C(e.characterCount)+" / "+C(a.maxLength),1)):qe(t.$slots,"actions",{key:1},void 0,!0)])):O("v-if",!0)],2),a.message?(p(),g("p",{key:1,class:oe(["min-w-0 mt-1 mb-0 text-xs truncate transition-all duration-500 ease-in-out",e.messageClass])},C(a.message),3)):O("v-if",!0)])}const Ds=G(Npe,[["render",Lpe],["__scopeId","data-v-28f4b91c"],["__file","/app/app/javascript/dashboard/components-next/Editor/Editor.vue"]]),Dpe={components:{PageHeader:Ss,GreetingsEditor:cM,NextButton:Se,Editor:Ds},data(){return{inboxName:"",channelWebsiteUrl:"",channelWidgetColor:"#009CE0",channelWelcomeTitle:"",channelWelcomeTagline:"",greetingEnabled:!1,greetingMessage:"",welcomeTaglineEditorMenuOptions:OS}},computed:{..._t({uiFlags:"inboxes/getUIFlags"}),textAreaChannels(){return!!(this.isATwilioChannel||this.isATwitterInbox||this.isAFacebookInbox)}},methods:{async createChannel(){var t;try{const n=await this.$store.dispatch("inboxes/createWebsiteChannel",{name:(t=this.inboxName)==null?void 0:t.trim(),greeting_enabled:this.greetingEnabled,greeting_message:this.greetingMessage,channel:{type:"web_widget",website_url:this.channelWebsiteUrl,widget_color:this.channelWidgetColor,welcome_title:this.channelWelcomeTitle,welcome_tagline:this.channelWelcomeTagline}});wa.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:n.id}})}catch(n){Z(n.message||this.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.API.ERROR_MESSAGE"))}}}},Ppe={class:"h-full w-full p-6 col-span-6"},kpe={class:"w-full"},Bpe=["placeholder"],Fpe={class:"w-full"},Upe=["placeholder"],$pe={class:"w-full"},Gpe={class:"w-full"},Vpe=["placeholder"],Hpe={class:"w-full"},jpe={value:!0},Wpe={value:!1},zpe={class:"help-text"},Ype={class:"flex flex-row justify-end w-full gap-2 px-0 py-2 mt-4"},Kpe={class:"w-full"};function Xpe(t,n,a,e,s,r){const o=H("PageHeader"),i=H("woot-loading-state"),l=H("woot-color-picker"),c=H("Editor"),d=H("GreetingsEditor"),u=H("NextButton");return p(),g("div",Ppe,[v(o,{"header-title":t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.TITLE"),"header-content":t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.DESC")},null,8,["header-title","header-content"]),t.uiFlags.isCreating?(p(),L(i,{key:0,message:t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.LOADING_MESSAGE")},null,8,["message"])):O("v-if",!0),t.uiFlags.isCreating?O("v-if",!0):(p(),g("form",{key:1,class:"flex flex-wrap flex-col mx-0",onSubmit:n[7]||(n[7]=Ve((...m)=>r.createChannel&&r.createChannel(...m),["prevent"]))},[f("div",kpe,[f("label",null,[Oe(C(t.$t("INBOX_MGMT.ADD.WEBSITE_NAME.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[0]||(n[0]=m=>s.inboxName=m),type:"text",placeholder:t.$t("INBOX_MGMT.ADD.WEBSITE_NAME.PLACEHOLDER")},null,8,Bpe),[[Et,s.inboxName]])])]),f("div",Fpe,[f("label",null,[Oe(C(t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_DOMAIN.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[1]||(n[1]=m=>s.channelWebsiteUrl=m),type:"text",placeholder:t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_DOMAIN.PLACEHOLDER")},null,8,Upe),[[Et,s.channelWebsiteUrl]])])]),f("div",$pe,[f("label",null,[Oe(C(t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.WIDGET_COLOR.LABEL"))+" ",1),v(l,{modelValue:s.channelWidgetColor,"onUpdate:modelValue":n[2]||(n[2]=m=>s.channelWidgetColor=m)},null,8,["modelValue"])])]),f("div",Gpe,[f("label",null,[Oe(C(t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TITLE.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[3]||(n[3]=m=>s.channelWelcomeTitle=m),type:"text",placeholder:t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TITLE.PLACEHOLDER")},null,8,Vpe),[[Et,s.channelWelcomeTitle]])])]),v(c,{modelValue:s.channelWelcomeTagline,"onUpdate:modelValue":n[4]||(n[4]=m=>s.channelWelcomeTagline=m),label:t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TAGLINE.LABEL"),placeholder:t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TAGLINE.PLACEHOLDER"),"max-length":255,"enabled-menu-options":s.welcomeTaglineEditorMenuOptions,class:"mb-4"},null,8,["modelValue","label","placeholder","enabled-menu-options"]),f("label",Hpe,[Oe(C(t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.LABEL"))+" ",1),ce(f("select",{"onUpdate:modelValue":n[5]||(n[5]=m=>s.greetingEnabled=m)},[f("option",jpe,C(t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.ENABLED")),1),f("option",Wpe,C(t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.DISABLED")),1)],512),[[Un,s.greetingEnabled]]),f("p",zpe,C(t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.HELP_TEXT")),1)]),s.greetingEnabled?(p(),L(d,{key:0,modelValue:s.greetingMessage,"onUpdate:modelValue":n[6]||(n[6]=m=>s.greetingMessage=m),class:"w-full",label:t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_MESSAGE.LABEL"),placeholder:t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_MESSAGE.PLACEHOLDER"),richtext:!r.textAreaChannels},null,8,["modelValue","label","placeholder","richtext"])):O("v-if",!0),f("div",Ype,[f("div",Kpe,[v(u,{type:"submit","is-loading":t.uiFlags.isCreating,disabled:!s.channelWebsiteUrl||!s.inboxName,solid:"",blue:"",label:t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.SUBMIT_BUTTON")},null,8,["is-loading","disabled","label"])])])],32))])}const qpe=G(Dpe,[["render",Xpe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/channels/Website.vue"]]);class Zpe extends Xs{constructor(){super("twitter",{accountScoped:!0})}generateAuthorization(){return axios.post(`${this.url}/authorization`)}}const Qpe=new Zpe,Jpe={components:{NextButton:Se},data(){return{isRequestingAuthorization:!1}},methods:{async requestAuthorization(){try{this.isRequestingAuthorization=!0;const t=await Qpe.generateAuthorization(),{data:{url:n}}=t;window.location.href=n}catch{Z(this.$t("INBOX_MGMT.ADD.TWITTER.ERROR_MESSAGE"))}finally{this.isRequestingAuthorization=!1}}}},efe={class:"h-full w-full p-6 col-span-6"},tfe={class:"login-init h-full text-center"};function nfe(t,n,a,e,s,r){const o=H("NextButton");return p(),g("div",efe,[f("div",tfe,[f("form",{onSubmit:n[0]||(n[0]=Ve((...i)=>r.requestAuthorization&&r.requestAuthorization(...i),["prevent"]))},[v(o,{type:"submit",icon:"i-ri-twitter-x-fill",label:"Sign in with Twitter","is-loading":s.isRequestingAuthorization},null,8,["is-loading"])],32),f("p",null,C(t.$t("INBOX_MGMT.ADD.TWITTER.HELP")),1)])])}const afe=G(Jpe,[["render",nfe],["__scopeId","data-v-1770061d"],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/channels/Twitter.vue"]]),sfe=(t="")=>t?t.startsWith("http"):!0,ofe={components:{PageHeader:Ss,NextButton:Se},setup(){return{v$:rt()}},data(){return{channelName:"",webhookUrl:""}},computed:{..._t({uiFlags:"inboxes/getUIFlags"})},validations:{channelName:{required:Ge},webhookUrl:{shouldBeWebhookUrl:sfe}},methods:{async createChannel(){var t;if(this.v$.$touch(),!this.v$.$invalid)try{const n=await this.$store.dispatch("inboxes/createChannel",{name:(t=this.channelName)==null?void 0:t.trim(),channel:{type:"api",webhook_url:this.webhookUrl}});wa.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:n.id}})}catch{Z(this.$t("INBOX_MGMT.ADD.API_CHANNEL.API.ERROR_MESSAGE"))}}}},rfe={class:"h-full w-full p-6 col-span-6"},ife={class:"flex-shrink-0 flex-grow-0"},lfe=["placeholder"],cfe={key:0,class:"message"},dfe={class:"flex-shrink-0 flex-grow-0"},ufe=["placeholder"],pfe={class:"help-text"},ffe={class:"w-full mt-4"};function mfe(t,n,a,e,s,r){const o=H("PageHeader"),i=H("NextButton");return p(),g("div",rfe,[v(o,{"header-title":t.$t("INBOX_MGMT.ADD.API_CHANNEL.TITLE"),"header-content":t.$t("INBOX_MGMT.ADD.API_CHANNEL.DESC")},null,8,["header-title","header-content"]),f("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:n[4]||(n[4]=Ve(l=>r.createChannel(),["prevent"]))},[f("div",ife,[f("label",{class:oe({error:e.v$.channelName.$error})},[Oe(C(t.$t("INBOX_MGMT.ADD.API_CHANNEL.CHANNEL_NAME.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[0]||(n[0]=l=>s.channelName=l),type:"text",placeholder:t.$t("INBOX_MGMT.ADD.API_CHANNEL.CHANNEL_NAME.PLACEHOLDER"),onBlur:n[1]||(n[1]=(...l)=>e.v$.channelName.$touch&&e.v$.channelName.$touch(...l))},null,40,lfe),[[Et,s.channelName]]),e.v$.channelName.$error?(p(),g("span",cfe,C(t.$t("INBOX_MGMT.ADD.API_CHANNEL.CHANNEL_NAME.ERROR")),1)):O("v-if",!0)],2)]),f("div",dfe,[f("label",{class:oe({error:e.v$.webhookUrl.$error})},[Oe(C(t.$t("INBOX_MGMT.ADD.API_CHANNEL.WEBHOOK_URL.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[2]||(n[2]=l=>s.webhookUrl=l),type:"text",placeholder:t.$t("INBOX_MGMT.ADD.API_CHANNEL.WEBHOOK_URL.PLACEHOLDER"),onBlur:n[3]||(n[3]=(...l)=>e.v$.webhookUrl.$touch&&e.v$.webhookUrl.$touch(...l))},null,40,ufe),[[Et,s.webhookUrl]])],2),f("p",pfe,C(t.$t("INBOX_MGMT.ADD.API_CHANNEL.WEBHOOK_URL.SUBTITLE")),1)]),f("div",ffe,[v(i,{"is-loading":t.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:t.$t("INBOX_MGMT.ADD.API_CHANNEL.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)])}const hfe=G(ofe,[["render",mfe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/channels/Api.vue"]]),_fe={components:{PageHeader:Ss,NextButton:Se},setup(){return{v$:rt()}},data(){return{channelName:"",email:"",alertMessage:""}},computed:{..._t({uiFlags:"inboxes/getUIFlags"})},validations:{channelName:{required:Ge},email:{required:Ge,email:br}},methods:{async createChannel(){var t;if(this.v$.$touch(),!this.v$.$invalid)try{const n=await this.$store.dispatch("inboxes/createChannel",{name:(t=this.channelName)==null?void 0:t.trim(),channel:{type:"email",email:this.email}});wa.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:n.id}})}catch(n){const a=n==null?void 0:n.message;this.alertMessage=a||this.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.API.ERROR_MESSAGE"),Z(this.alertMessage)}}}},gfe={class:"h-full w-full p-6 col-span-6"},bfe={class:"flex-shrink-0 flex-grow-0"},vfe=["placeholder"],Efe={key:0,class:"message"},Sfe={class:"flex-shrink-0 flex-grow-0 mb-4"},Tfe=["placeholder"],Afe={class:"help-text"},yfe={class:"w-full mt-4"};function Ife(t,n,a,e,s,r){const o=H("PageHeader"),i=H("NextButton");return p(),g("div",gfe,[v(o,{"header-title":t.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.TITLE"),"header-content":t.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.DESC")},null,8,["header-title","header-content"]),f("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:n[4]||(n[4]=Ve(l=>r.createChannel(),["prevent"]))},[f("div",bfe,[f("label",{class:oe({error:e.v$.channelName.$error})},[Oe(C(t.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.CHANNEL_NAME.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[0]||(n[0]=l=>s.channelName=l),type:"text",placeholder:t.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.CHANNEL_NAME.PLACEHOLDER"),onBlur:n[1]||(n[1]=(...l)=>e.v$.channelName.$touch&&e.v$.channelName.$touch(...l))},null,40,vfe),[[Et,s.channelName]]),e.v$.channelName.$error?(p(),g("span",Efe,C(t.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.CHANNEL_NAME.ERROR")),1)):O("v-if",!0)],2)]),f("div",Sfe,[f("label",{class:oe({error:e.v$.email.$error})},[Oe(C(t.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.EMAIL.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[2]||(n[2]=l=>s.email=l),type:"text",placeholder:t.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.EMAIL.PLACEHOLDER"),onBlur:n[3]||(n[3]=(...l)=>e.v$.email.$touch&&e.v$.email.$touch(...l))},null,40,Tfe),[[Et,s.email]]),f("p",Afe,C(t.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.EMAIL.SUBTITLE")),1)],2)]),f("div",yfe,[v(i,{"is-loading":t.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:t.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)])}const Cfe=G(_fe,[["render",Ife],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/channels/emailChannels/ForwardToOption.vue"]]);let Ofe=class extends Xs{constructor(){super("microsoft",{accountScoped:!0})}generateAuthorization(n){return axios.post(`${this.url}/authorization`,n)}};const Rm=new Ofe;class Nfe extends Xs{constructor(){super("google",{accountScoped:!0})}generateAuthorization(n){return axios.post(`${this.url}/authorization`,n)}}const wm=new Nfe,xfe={__name:"OAuthChannel",props:{provider:{type:String,required:!0,validate:t=>["microsoft","google"].includes(t)},title:{type:String,required:!0},description:{type:String,required:!0},submitButtonText:{type:String,required:!0},errorMessage:{type:String,required:!0}},setup(t,{expose:n}){n();const a=t,e=P(!1),s=S(()=>a.provider==="microsoft"?Rm:wm);async function r(){try{e.value=!0;const i=await s.value.generateAuthorization(),{data:{url:l}}=i;window.location.href=l}catch{Z(a.errorMessage)}finally{e.value=!1}}const o={props:a,isRequestingAuthorization:e,client:s,requestAuthorization:r,ref:P,computed:S,get microsoftClient(){return Rm},get googleClient(){return wm},SettingsSubPageHeader:Ss,NextButton:Se,get useAlert(){return Z}};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},Rfe={class:"h-full w-full p-6 col-span-6"};function wfe(t,n,a,e,s,r){return p(),g("div",Rfe,[v(e.SettingsSubPageHeader,{"header-title":a.title,"header-content":a.description},null,8,["header-title","header-content"]),f("form",{class:"mt-6",onSubmit:Ve(e.requestAuthorization,["prevent"])},[v(e.NextButton,{"is-loading":e.isRequestingAuthorization,type:"submit",solid:"",blue:"",label:a.submitButtonText},null,8,["is-loading","label"])],32)])}const dM=G(xfe,[["render",wfe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/channels/emailChannels/OAuthChannel.vue"]]),Mfe=Object.assign({name:"MicrosoftOAuthChannel"},{__name:"Microsoft",setup(t,{expose:n}){n();const a={OAuthChannel:dM};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}});function Lfe(t,n,a,e,s,r){return p(),L(e.OAuthChannel,{provider:"microsoft",title:t.$t("INBOX_MGMT.ADD.MICROSOFT.TITLE"),description:t.$t("INBOX_MGMT.ADD.MICROSOFT.DESCRIPTION"),"submit-button-text":t.$t("INBOX_MGMT.ADD.MICROSOFT.SIGN_IN"),"error-message":t.$t("INBOX_MGMT.ADD.MICROSOFT.ERROR_MESSAGE")},null,8,["title","description","submit-button-text","error-message"])}const Dfe=G(Mfe,[["render",Lfe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/channels/emailChannels/Microsoft.vue"]]),Pfe=Object.assign({name:"GoogleOAuthChannel"},{__name:"Google",setup(t,{expose:n}){n();const a={OAuthChannel:dM};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}});function kfe(t,n,a,e,s,r){return p(),L(e.OAuthChannel,{provider:"google",title:t.$t("INBOX_MGMT.ADD.GOOGLE.TITLE"),description:t.$t("INBOX_MGMT.ADD.GOOGLE.DESCRIPTION"),"submit-button-text":t.$t("INBOX_MGMT.ADD.GOOGLE.SIGN_IN"),"error-message":t.$t("INBOX_MGMT.ADD.GOOGLE.ERROR_MESSAGE")},null,8,["title","description","submit-button-text","error-message"])}const Bfe=G(Pfe,[["render",kfe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/channels/emailChannels/Google.vue"]]),Ffe={__name:"ChannelSelector",props:{title:{type:String,required:!0},description:{type:String,default:""},icon:{type:String,required:!0},isComingSoon:{type:Boolean,default:!1}},setup(t,{expose:n}){n();const a={Icon:Bt};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},Ufe={class:"flex size-10 items-center justify-center rounded-full bg-n-alpha-2"},$fe={class:"flex flex-col items-start gap-1.5"},Gfe={class:"text-n-slate-12 text-sm text-start font-medium capitalize"},Vfe={class:"text-n-slate-11 text-start text-sm"},Hfe={key:0,class:"absolute inset-0 flex items-center justify-center backdrop-blur-[2px] rounded-2xl bg-gradient-to-br from-n-background/90 via-n-background/70 to-n-background/95 cursor-not-allowed"},jfe={class:"text-n-slate-12 font-medium text-sm"};function Wfe(t,n,a,e,s,r){return p(),g("button",{class:oe(["relative bg-n-solid-1 gap-6 cursor-pointer rounded-2xl flex flex-col justify-start transition-all duration-200 ease-in -m-px py-6 px-5 items-start border border-solid border-n-weak",{"hover:enabled:border-n-blue-9 hover:enabled:shadow-md disabled:opacity-60 disabled:cursor-not-allowed":!a.isComingSoon,"cursor-not-allowed disabled:opacity-80":a.isComingSoon}])},[f("div",Ufe,[v(e.Icon,{icon:a.icon,class:"text-n-slate-10 size-6"},null,8,["icon"])]),f("div",$fe,[f("h3",Gfe,C(a.title),1),f("p",Vfe,C(a.description),1)]),a.isComingSoon?(p(),g("div",Hfe,[f("span",jfe,C(t.$t("CHANNEL_SELECTOR.COMING_SOON"))+"  ",1)])):O("v-if",!0)],2)}const MS=G(Ffe,[["render",Wfe],["__file","/app/app/javascript/dashboard/components/ChannelSelector.vue"]]),zfe={__name:"Email",setup(t,{expose:n}){n();const a=P(""),e=xt(),{t:s}=Q(),r=e["globalConfig/get"],o=e["globalConfig/isAChatwootInstance"],i=S(()=>[{title:s("INBOX_MGMT.EMAIL_PROVIDERS.MICROSOFT.TITLE"),description:s("INBOX_MGMT.EMAIL_PROVIDERS.MICROSOFT.DESCRIPTION"),isEnabled:!!r.value.azureAppId,key:"microsoft",icon:"i-woot-outlook"},{title:s("INBOX_MGMT.EMAIL_PROVIDERS.GOOGLE.TITLE"),description:s("INBOX_MGMT.EMAIL_PROVIDERS.GOOGLE.DESCRIPTION"),isEnabled:!!window.chatwootConfig.googleOAuthClientId,key:"google",icon:"i-woot-gmail"},{title:s("INBOX_MGMT.EMAIL_PROVIDERS.OTHER_PROVIDERS.TITLE"),description:s("INBOX_MGMT.EMAIL_PROVIDERS.OTHER_PROVIDERS.DESCRIPTION"),isEnabled:!0,key:"other_provider",icon:"i-woot-mail"}].filter(d=>o.value?!0:d.isEnabled));function l(d){d.isEnabled&&(a.value=d.key)}const c={provider:a,getters:e,t:s,globalConfig:r,isAChatwootInstance:o,emailProviderList:i,onClick:l,ref:P,computed:S,ForwardToOption:Cfe,Microsoft:Dfe,Google:Bfe,ChannelSelector:MS,PageHeader:Ss,get useStoreGetters(){return xt},get useI18n(){return Q}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}},Yfe={key:0,class:"h-full w-full p-6 col-span-6"},Kfe={class:"grid max-w-3xl grid-cols-4 gap-6 mx-0 mt-6"};function Xfe(t,n,a,e,s,r){return e.provider?e.provider==="microsoft"?(p(),L(e.Microsoft,{key:1})):e.provider==="google"?(p(),L(e.Google,{key:2})):e.provider==="other_provider"?(p(),L(e.ForwardToOption,{key:3})):O("v-if",!0):(p(),g("div",Yfe,[v(e.PageHeader,{class:"max-w-4xl","header-title":t.$t("INBOX_MGMT.ADD.EMAIL_PROVIDER.TITLE"),"header-content":t.$t("INBOX_MGMT.ADD.EMAIL_PROVIDER.DESCRIPTION")},null,8,["header-title","header-content"]),f("div",Kfe,[(p(!0),g(de,null,Ae(e.emailProviderList,o=>(p(),L(e.ChannelSelector,{key:o.key,title:o.title,description:o.description,icon:o.icon,disabled:!o.isEnabled,onClick:()=>e.onClick(o)},null,8,["title","description","icon","disabled","onClick"]))),128))])]))}const qfe=G(zfe,[["render",Xfe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/channels/Email.vue"]]),Zfe=(t="")=>t.startsWith("+"),Qfe={components:{NextButton:Se},setup(){return{v$:rt()}},data(){return{accountId:"",apiKey:"",apiSecret:"",applicationId:"",inboxName:"",phoneNumber:""}},computed:{..._t({uiFlags:"inboxes/getUIFlags"})},validations:{inboxName:{required:Ge},phoneNumber:{required:Ge,shouldStartWithPlusSign:Zfe},apiKey:{required:Ge},apiSecret:{required:Ge},applicationId:{required:Ge},accountId:{required:Ge}},methods:{async createChannel(){var t;if(this.v$.$touch(),!this.v$.$invalid)try{const n=await this.$store.dispatch("inboxes/createChannel",{name:(t=this.inboxName)==null?void 0:t.trim(),channel:{type:"sms",phone_number:this.phoneNumber,provider_config:{api_key:this.apiKey,api_secret:this.apiSecret,application_id:this.applicationId,account_id:this.accountId}}});wa.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:n.id}})}catch{Z(this.$t("INBOX_MGMT.ADD.SMS.API.ERROR_MESSAGE"))}}}},Jfe={class:"flex-shrink-0 flex-grow-0"},eme=["placeholder"],tme={key:0,class:"message"},nme={class:"flex-shrink-0 flex-grow-0"},ame=["placeholder"],sme={key:0,class:"message"},ome={class:"flex-shrink-0 flex-grow-0"},rme=["placeholder"],ime={key:0,class:"message"},lme={class:"flex-shrink-0 flex-grow-0"},cme=["placeholder"],dme={key:0,class:"message"},ume={class:"flex-shrink-0 flex-grow-0"},pme=["placeholder"],fme={key:0,class:"message"},mme={class:"flex-shrink-0 flex-grow-0"},hme=["placeholder"],_me={key:0,class:"message"},gme={class:"w-full mt-4"};function bme(t,n,a,e,s,r){const o=H("NextButton");return p(),g("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:n[12]||(n[12]=Ve(i=>r.createChannel(),["prevent"]))},[f("div",Jfe,[f("label",{class:oe({error:e.v$.inboxName.$error})},[Oe(C(t.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.INBOX_NAME.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[0]||(n[0]=i=>s.inboxName=i),type:"text",placeholder:t.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.INBOX_NAME.PLACEHOLDER"),onBlur:n[1]||(n[1]=(...i)=>e.v$.inboxName.$touch&&e.v$.inboxName.$touch(...i))},null,40,eme),[[Et,s.inboxName]]),e.v$.inboxName.$error?(p(),g("span",tme,C(t.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.INBOX_NAME.ERROR")),1)):O("v-if",!0)],2)]),f("div",nme,[f("label",{class:oe({error:e.v$.phoneNumber.$error})},[Oe(C(t.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.PHONE_NUMBER.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[2]||(n[2]=i=>s.phoneNumber=i),type:"text",placeholder:t.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.PHONE_NUMBER.PLACEHOLDER"),onBlur:n[3]||(n[3]=(...i)=>e.v$.phoneNumber.$touch&&e.v$.phoneNumber.$touch(...i))},null,40,ame),[[Et,s.phoneNumber]]),e.v$.phoneNumber.$error?(p(),g("span",sme,C(t.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.PHONE_NUMBER.ERROR")),1)):O("v-if",!0)],2)]),f("div",ome,[f("label",{class:oe({error:e.v$.accountId.$error})},[Oe(C(t.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.ACCOUNT_ID.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[4]||(n[4]=i=>s.accountId=i),type:"text",placeholder:t.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.ACCOUNT_ID.PLACEHOLDER"),onBlur:n[5]||(n[5]=(...i)=>e.v$.accountId.$touch&&e.v$.accountId.$touch(...i))},null,40,rme),[[Et,s.accountId]]),e.v$.accountId.$error?(p(),g("span",ime,C(t.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.ACCOUNT_ID.ERROR")),1)):O("v-if",!0)],2)]),f("div",lme,[f("label",{class:oe({error:e.v$.applicationId.$error})},[Oe(C(t.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.APPLICATION_ID.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[6]||(n[6]=i=>s.applicationId=i),type:"text",placeholder:t.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.APPLICATION_ID.PLACEHOLDER"),onBlur:n[7]||(n[7]=(...i)=>e.v$.applicationId.$touch&&e.v$.applicationId.$touch(...i))},null,40,cme),[[Et,s.applicationId]]),e.v$.applicationId.$error?(p(),g("span",dme,C(t.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.APPLICATION_ID.ERROR")),1)):O("v-if",!0)],2)]),f("div",ume,[f("label",{class:oe({error:e.v$.apiKey.$error})},[Oe(C(t.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_KEY.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[8]||(n[8]=i=>s.apiKey=i),type:"text",placeholder:t.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_KEY.PLACEHOLDER"),onBlur:n[9]||(n[9]=(...i)=>e.v$.apiKey.$touch&&e.v$.apiKey.$touch(...i))},null,40,pme),[[Et,s.apiKey]]),e.v$.apiKey.$error?(p(),g("span",fme,C(t.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_KEY.ERROR")),1)):O("v-if",!0)],2)]),f("div",mme,[f("label",{class:oe({error:e.v$.apiSecret.$error})},[Oe(C(t.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_SECRET.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[10]||(n[10]=i=>s.apiSecret=i),type:"text",placeholder:t.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_SECRET.PLACEHOLDER"),onBlur:n[11]||(n[11]=(...i)=>e.v$.apiSecret.$touch&&e.v$.apiSecret.$touch(...i))},null,40,hme),[[Et,s.apiSecret]]),e.v$.apiSecret.$error?(p(),g("span",_me,C(t.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_SECRET.ERROR")),1)):O("v-if",!0)],2)]),f("div",gme,[v(o,{"is-loading":t.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:t.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)}const vme=G(Qfe,[["render",bme],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/channels/BandwidthSms.vue"]]),Eme={components:{NextButton:Se},props:{type:{type:String,required:!0}},setup(){return{v$:rt()}},data(){return{accountSID:"",apiKeySID:"",authToken:"",medium:this.type,channelName:"",messagingServiceSID:"",useMessagingService:!1,useAPIKey:!1,phoneNumber:""}},computed:{..._t({uiFlags:"inboxes/getUIFlags"}),authTokeni18nKey(){return this.useAPIKey?"API_KEY_SECRET":"AUTH_TOKEN"}},validations(){let t={channelName:{required:Ge},authToken:{required:Ge},accountSID:{required:Ge},medium:{required:Ge}};return this.phoneNumber?t={...t,phoneNumber:{required:Ge,isPhoneE164OrEmpty:EE},messagingServiceSID:{}}:t={...t,messagingServiceSID:{required:Ge},phoneNumber:{}},this.useAPIKey&&(t={...t,apiKeySID:{required:Ge}}),t},methods:{async createChannel(){var t;if(this.v$.$touch(),!this.v$.$invalid)try{const n=await this.$store.dispatch("inboxes/createTwilioChannel",{twilio_channel:{name:(t=this.channelName)==null?void 0:t.trim(),medium:this.medium,account_sid:this.accountSID,api_key_sid:this.apiKeySID,auth_token:this.authToken,messaging_service_sid:this.messagingServiceSID,phone_number:this.messagingServiceSID?null:`+${this.phoneNumber.replace(/\D/g,"")}`}});wa.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:n.id}})}catch(n){const a=Kr(n)||this.$t("INBOX_MGMT.ADD.TWILIO.API.ERROR_MESSAGE");Z(a)}}}},Sme={class:"flex-shrink-0 flex-grow-0"},Tme=["placeholder"],Ame={key:0,class:"message"},yme={class:"flex-shrink-0 flex-grow-0"},Ime=["placeholder"],Cme={key:0,class:"message"},Ome={key:0,class:"flex-shrink-0 flex-grow-0"},Nme=["placeholder"],xme={key:0,class:"message"},Rme={class:"max-w-[65%] w-full messagingServiceHelptext"},wme={for:"useMessagingService"},Mme={class:"flex-shrink-0 flex-grow-0"},Lme=["placeholder"],Dme={key:0,class:"message"},Pme={class:"max-w-[65%] w-full messagingServiceHelptext"},kme={for:"useAPIKey"},Bme={key:1,class:"flex-shrink-0 flex-grow-0"},Fme=["placeholder"],Ume={key:0,class:"message"},$me={class:"flex-shrink-0 flex-grow-0"},Gme=["placeholder"],Vme={key:0,class:"message"},Hme={class:"w-full mt-4"};function jme(t,n,a,e,s,r){const o=H("NextButton");return p(),g("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:n[14]||(n[14]=Ve(i=>r.createChannel(),["prevent"]))},[f("div",Sme,[f("label",{class:oe({error:e.v$.channelName.$error})},[Oe(C(t.$t("INBOX_MGMT.ADD.TWILIO.CHANNEL_NAME.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[0]||(n[0]=i=>s.channelName=i),type:"text",placeholder:t.$t("INBOX_MGMT.ADD.TWILIO.CHANNEL_NAME.PLACEHOLDER"),onBlur:n[1]||(n[1]=(...i)=>e.v$.channelName.$touch&&e.v$.channelName.$touch(...i))},null,40,Tme),[[Et,s.channelName]]),e.v$.channelName.$error?(p(),g("span",Ame,C(t.$t("INBOX_MGMT.ADD.TWILIO.CHANNEL_NAME.ERROR")),1)):O("v-if",!0)],2)]),f("div",yme,[s.useMessagingService?(p(),g("label",{key:0,class:oe({error:e.v$.messagingServiceSID.$error})},[Oe(C(t.$t("INBOX_MGMT.ADD.TWILIO.MESSAGING_SERVICE_SID.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[2]||(n[2]=i=>s.messagingServiceSID=i),type:"text",placeholder:t.$t("INBOX_MGMT.ADD.TWILIO.MESSAGING_SERVICE_SID.PLACEHOLDER"),onBlur:n[3]||(n[3]=(...i)=>e.v$.messagingServiceSID.$touch&&e.v$.messagingServiceSID.$touch(...i))},null,40,Ime),[[Et,s.messagingServiceSID]]),e.v$.messagingServiceSID.$error?(p(),g("span",Cme,C(t.$t("INBOX_MGMT.ADD.TWILIO.MESSAGING_SERVICE_SID.ERROR")),1)):O("v-if",!0)],2)):O("v-if",!0)]),s.useMessagingService?O("v-if",!0):(p(),g("div",Ome,[f("label",{class:oe({error:e.v$.phoneNumber.$error})},[Oe(C(t.$t("INBOX_MGMT.ADD.TWILIO.PHONE_NUMBER.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[4]||(n[4]=i=>s.phoneNumber=i),type:"text",placeholder:t.$t("INBOX_MGMT.ADD.TWILIO.PHONE_NUMBER.PLACEHOLDER"),onBlur:n[5]||(n[5]=(...i)=>e.v$.phoneNumber.$touch&&e.v$.phoneNumber.$touch(...i))},null,40,Nme),[[Et,s.phoneNumber]]),e.v$.phoneNumber.$error?(p(),g("span",xme,C(t.$t("INBOX_MGMT.ADD.TWILIO.PHONE_NUMBER.ERROR")),1)):O("v-if",!0)],2)])),f("div",Rme,[f("label",wme,[ce(f("input",{id:"useMessagingService","onUpdate:modelValue":n[6]||(n[6]=i=>s.useMessagingService=i),type:"checkbox",class:"checkbox"},null,512),[[bn,s.useMessagingService]]),Oe(" "+C(t.$t("INBOX_MGMT.ADD.TWILIO.MESSAGING_SERVICE_SID.USE_MESSAGING_SERVICE")),1)])]),f("div",Mme,[f("label",{class:oe({error:e.v$.accountSID.$error})},[Oe(C(t.$t("INBOX_MGMT.ADD.TWILIO.ACCOUNT_SID.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[7]||(n[7]=i=>s.accountSID=i),type:"text",placeholder:t.$t("INBOX_MGMT.ADD.TWILIO.ACCOUNT_SID.PLACEHOLDER"),onBlur:n[8]||(n[8]=(...i)=>e.v$.accountSID.$touch&&e.v$.accountSID.$touch(...i))},null,40,Lme),[[Et,s.accountSID]]),e.v$.accountSID.$error?(p(),g("span",Dme,C(t.$t("INBOX_MGMT.ADD.TWILIO.ACCOUNT_SID.ERROR")),1)):O("v-if",!0)],2)]),f("div",Pme,[f("label",kme,[ce(f("input",{id:"useAPIKey","onUpdate:modelValue":n[9]||(n[9]=i=>s.useAPIKey=i),type:"checkbox",class:"checkbox"},null,512),[[bn,s.useAPIKey]]),Oe(" "+C(t.$t("INBOX_MGMT.ADD.TWILIO.API_KEY.USE_API_KEY")),1)])]),s.useAPIKey?(p(),g("div",Bme,[f("label",{class:oe({error:e.v$.apiKeySID.$error})},[Oe(C(t.$t("INBOX_MGMT.ADD.TWILIO.API_KEY.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[10]||(n[10]=i=>s.apiKeySID=i),type:"text",placeholder:t.$t("INBOX_MGMT.ADD.TWILIO.API_KEY.PLACEHOLDER"),onBlur:n[11]||(n[11]=(...i)=>e.v$.apiKeySID.$touch&&e.v$.apiKeySID.$touch(...i))},null,40,Fme),[[Et,s.apiKeySID]]),e.v$.apiKeySID.$error?(p(),g("span",Ume,C(t.$t("INBOX_MGMT.ADD.TWILIO.API_KEY.ERROR")),1)):O("v-if",!0)],2)])):O("v-if",!0),f("div",$me,[f("label",{class:oe({error:e.v$.authToken.$error})},[Oe(C(t.$t(`INBOX_MGMT.ADD.TWILIO.${r.authTokeni18nKey}.LABEL`))+" ",1),ce(f("input",{"onUpdate:modelValue":n[12]||(n[12]=i=>s.authToken=i),type:"text",placeholder:t.$t(`INBOX_MGMT.ADD.TWILIO.${r.authTokeni18nKey}.PLACEHOLDER`),onBlur:n[13]||(n[13]=(...i)=>e.v$.authToken.$touch&&e.v$.authToken.$touch(...i))},null,40,Gme),[[Et,s.authToken]]),e.v$.authToken.$error?(p(),g("span",Vme,C(t.$t(`INBOX_MGMT.ADD.TWILIO.${r.authTokeni18nKey}.ERROR`)),1)):O("v-if",!0)],2)]),f("div",Hme,[v(o,{"is-loading":t.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:t.$t("INBOX_MGMT.ADD.TWILIO.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)}const uM=G(Eme,[["render",jme],["__scopeId","data-v-4aaebf14"],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/channels/Twilio.vue"]]),Wme={components:{PageHeader:Ss,Twilio:uM,BandwidthSms:vme},data(){return{provider:"twilio"}}},zme={class:"h-full w-full p-6 col-span-6"},Yme={class:"flex-shrink-0 flex-grow-0"},Kme={value:"twilio"},Xme={value:"360dialog"};function qme(t,n,a,e,s,r){const o=H("PageHeader"),i=H("Twilio"),l=H("BandwidthSms");return p(),g("div",zme,[v(o,{"header-title":t.$t("INBOX_MGMT.ADD.SMS.TITLE"),"header-content":t.$t("INBOX_MGMT.ADD.SMS.DESC")},null,8,["header-title","header-content"]),f("div",Yme,[f("label",null,[Oe(C(t.$t("INBOX_MGMT.ADD.SMS.PROVIDERS.LABEL"))+" ",1),ce(f("select",{"onUpdate:modelValue":n[0]||(n[0]=c=>s.provider=c)},[f("option",Kme,C(t.$t("INBOX_MGMT.ADD.SMS.PROVIDERS.TWILIO")),1),f("option",Xme,C(t.$t("INBOX_MGMT.ADD.SMS.PROVIDERS.BANDWIDTH")),1)],512),[[Un,s.provider]])])]),s.provider==="twilio"?(p(),L(i,{key:0,type:"sms"})):(p(),L(l,{key:1}))])}const Zme=G(Wme,[["render",qme],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/channels/Sms.vue"]]),Qme={components:{NextButton:Se},setup(){return{v$:rt()}},data(){return{inboxName:"",phoneNumber:"",apiKey:""}},computed:{..._t({uiFlags:"inboxes/getUIFlags"})},validations:{inboxName:{required:Ge},phoneNumber:{required:Ge,isPhoneE164OrEmpty:EE},apiKey:{required:Ge}},methods:{async createChannel(){var t;if(this.v$.$touch(),!this.v$.$invalid)try{const n=await this.$store.dispatch("inboxes/createChannel",{name:(t=this.inboxName)==null?void 0:t.trim(),channel:{type:"whatsapp",phone_number:this.phoneNumber,provider_config:{api_key:this.apiKey}}});wa.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:n.id}})}catch(n){Z(n.message||this.$t("INBOX_MGMT.ADD.WHATSAPP.API.ERROR_MESSAGE"))}}}},Jme={class:"flex-shrink-0 flex-grow-0"},ehe=["placeholder"],the={key:0,class:"message"},nhe={class:"flex-shrink-0 flex-grow-0"},ahe=["placeholder"],she={key:0,class:"message"},ohe={class:"flex-shrink-0 flex-grow-0"},rhe=["placeholder"],ihe={key:0,class:"message"},lhe={class:"w-full"};function che(t,n,a,e,s,r){const o=H("NextButton");return p(),g("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:n[6]||(n[6]=Ve(i=>r.createChannel(),["prevent"]))},[f("div",Jme,[f("label",{class:oe({error:e.v$.inboxName.$error})},[Oe(C(t.$t("INBOX_MGMT.ADD.WHATSAPP.INBOX_NAME.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[0]||(n[0]=i=>s.inboxName=i),type:"text",placeholder:t.$t("INBOX_MGMT.ADD.WHATSAPP.INBOX_NAME.PLACEHOLDER"),onBlur:n[1]||(n[1]=(...i)=>e.v$.inboxName.$touch&&e.v$.inboxName.$touch(...i))},null,40,ehe),[[Et,s.inboxName]]),e.v$.inboxName.$error?(p(),g("span",the,C(t.$t("INBOX_MGMT.ADD.WHATSAPP.INBOX_NAME.ERROR")),1)):O("v-if",!0)],2)]),f("div",nhe,[f("label",{class:oe({error:e.v$.phoneNumber.$error})},[Oe(C(t.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[2]||(n[2]=i=>s.phoneNumber=i),type:"text",placeholder:t.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER.PLACEHOLDER"),onBlur:n[3]||(n[3]=(...i)=>e.v$.phoneNumber.$touch&&e.v$.phoneNumber.$touch(...i))},null,40,ahe),[[Et,s.phoneNumber]]),e.v$.phoneNumber.$error?(p(),g("span",she,C(t.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER.ERROR")),1)):O("v-if",!0)],2)]),f("div",ohe,[f("label",{class:oe({error:e.v$.apiKey.$error})},[f("span",null,C(t.$t("INBOX_MGMT.ADD.WHATSAPP.API_KEY.LABEL")),1),ce(f("input",{"onUpdate:modelValue":n[4]||(n[4]=i=>s.apiKey=i),type:"text",placeholder:t.$t("INBOX_MGMT.ADD.WHATSAPP.API_KEY.PLACEHOLDER"),onBlur:n[5]||(n[5]=(...i)=>e.v$.apiKey.$touch&&e.v$.apiKey.$touch(...i))},null,40,rhe),[[Et,s.apiKey]]),e.v$.apiKey.$error?(p(),g("span",ihe,C(t.$t("INBOX_MGMT.ADD.WHATSAPP.API_KEY.ERROR")),1)):O("v-if",!0)],2)]),f("div",lhe,[v(o,{type:"submit",label:t.$t("INBOX_MGMT.ADD.WHATSAPP.SUBMIT_BUTTON"),"is-loading":t.uiFlags.isCreating},null,8,["label","is-loading"])])],32)}const dhe=G(Qme,[["render",che],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/channels/360DialogWhatsapp.vue"]]),uhe={components:{NextButton:Se},setup(){return{v$:rt()}},data(){return{inboxName:"",phoneNumber:"",apiKey:"",phoneNumberId:"",businessAccountId:""}},computed:{..._t({uiFlags:"inboxes/getUIFlags"})},validations:{inboxName:{required:Ge},phoneNumber:{required:Ge,isPhoneE164OrEmpty:EE},apiKey:{required:Ge},phoneNumberId:{required:Ge,isNumber:tT},businessAccountId:{required:Ge,isNumber:tT}},methods:{async createChannel(){var t;if(this.v$.$touch(),!this.v$.$invalid)try{const n=await this.$store.dispatch("inboxes/createChannel",{name:(t=this.inboxName)==null?void 0:t.trim(),channel:{type:"whatsapp",phone_number:this.phoneNumber,provider:"whatsapp_cloud",provider_config:{api_key:this.apiKey,phone_number_id:this.phoneNumberId,business_account_id:this.businessAccountId}}});wa.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:n.id}})}catch(n){Z(n.message||this.$t("INBOX_MGMT.ADD.WHATSAPP.API.ERROR_MESSAGE"))}}}},phe={class:"flex-shrink-0 flex-grow-0"},fhe=["placeholder"],mhe={key:0,class:"message"},hhe={class:"flex-shrink-0 flex-grow-0"},_he=["placeholder"],ghe={key:0,class:"message"},bhe={class:"flex-shrink-0 flex-grow-0"},vhe=["placeholder"],Ehe={key:0,class:"message"},She={class:"flex-shrink-0 flex-grow-0"},The=["placeholder"],Ahe={key:0,class:"message"},yhe={class:"flex-shrink-0 flex-grow-0"},Ihe=["placeholder"],Che={key:0,class:"message"},Ohe={class:"w-full mt-4"};function Nhe(t,n,a,e,s,r){const o=H("NextButton");return p(),g("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:n[10]||(n[10]=Ve(i=>r.createChannel(),["prevent"]))},[f("div",phe,[f("label",{class:oe({error:e.v$.inboxName.$error})},[Oe(C(t.$t("INBOX_MGMT.ADD.WHATSAPP.INBOX_NAME.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[0]||(n[0]=i=>s.inboxName=i),type:"text",placeholder:t.$t("INBOX_MGMT.ADD.WHATSAPP.INBOX_NAME.PLACEHOLDER"),onBlur:n[1]||(n[1]=(...i)=>e.v$.inboxName.$touch&&e.v$.inboxName.$touch(...i))},null,40,fhe),[[Et,s.inboxName]]),e.v$.inboxName.$error?(p(),g("span",mhe,C(t.$t("INBOX_MGMT.ADD.WHATSAPP.INBOX_NAME.ERROR")),1)):O("v-if",!0)],2)]),f("div",hhe,[f("label",{class:oe({error:e.v$.phoneNumber.$error})},[Oe(C(t.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[2]||(n[2]=i=>s.phoneNumber=i),type:"text",placeholder:t.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER.PLACEHOLDER"),onBlur:n[3]||(n[3]=(...i)=>e.v$.phoneNumber.$touch&&e.v$.phoneNumber.$touch(...i))},null,40,_he),[[Et,s.phoneNumber]]),e.v$.phoneNumber.$error?(p(),g("span",ghe,C(t.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER.ERROR")),1)):O("v-if",!0)],2)]),f("div",bhe,[f("label",{class:oe({error:e.v$.phoneNumberId.$error})},[f("span",null,C(t.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER_ID.LABEL")),1),ce(f("input",{"onUpdate:modelValue":n[4]||(n[4]=i=>s.phoneNumberId=i),type:"text",placeholder:t.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER_ID.PLACEHOLDER"),onBlur:n[5]||(n[5]=(...i)=>e.v$.phoneNumberId.$touch&&e.v$.phoneNumberId.$touch(...i))},null,40,vhe),[[Et,s.phoneNumberId]]),e.v$.phoneNumberId.$error?(p(),g("span",Ehe,C(t.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER_ID.ERROR")),1)):O("v-if",!0)],2)]),f("div",She,[f("label",{class:oe({error:e.v$.businessAccountId.$error})},[f("span",null,C(t.$t("INBOX_MGMT.ADD.WHATSAPP.BUSINESS_ACCOUNT_ID.LABEL")),1),ce(f("input",{"onUpdate:modelValue":n[6]||(n[6]=i=>s.businessAccountId=i),type:"text",placeholder:t.$t("INBOX_MGMT.ADD.WHATSAPP.BUSINESS_ACCOUNT_ID.PLACEHOLDER"),onBlur:n[7]||(n[7]=(...i)=>e.v$.businessAccountId.$touch&&e.v$.businessAccountId.$touch(...i))},null,40,The),[[Et,s.businessAccountId]]),e.v$.businessAccountId.$error?(p(),g("span",Ahe,C(t.$t("INBOX_MGMT.ADD.WHATSAPP.BUSINESS_ACCOUNT_ID.ERROR")),1)):O("v-if",!0)],2)]),f("div",yhe,[f("label",{class:oe({error:e.v$.apiKey.$error})},[f("span",null,C(t.$t("INBOX_MGMT.ADD.WHATSAPP.API_KEY.LABEL")),1),ce(f("input",{"onUpdate:modelValue":n[8]||(n[8]=i=>s.apiKey=i),type:"text",placeholder:t.$t("INBOX_MGMT.ADD.WHATSAPP.API_KEY.PLACEHOLDER"),onBlur:n[9]||(n[9]=(...i)=>e.v$.apiKey.$touch&&e.v$.apiKey.$touch(...i))},null,40,Ihe),[[Et,s.apiKey]]),e.v$.apiKey.$error?(p(),g("span",Che,C(t.$t("INBOX_MGMT.ADD.WHATSAPP.API_KEY.ERROR")),1)):O("v-if",!0)],2)]),f("div",Ohe,[v(o,{"is-loading":t.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:t.$t("INBOX_MGMT.ADD.WHATSAPP.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)}const xhe=G(uhe,[["render",Nhe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/channels/CloudWhatsapp.vue"]]),Rhe=async()=>wS("https://connect.facebook.net/en_US/sdk.js",{async:!0,defer:!0,crossOrigin:"anonymous"}),whe=(t,n)=>{const a=n;return new Promise(e=>{const s=()=>{window.FB.init({appId:t,autoLogAppEvents:!0,xfbml:!0,version:a}),e()};window.FB?s():window.fbAsyncInit=s})},Mm=t=>t&&t.business_id&&t.waba_id,Lm=t=>n=>{if(n.origin.endsWith("facebook.com"))try{let a;if(typeof n.data=="string")a=JSON.parse(n.data);else if(typeof n.data=="object"&&n.data!==null)a=n.data;else return;a.type==="WA_EMBEDDED_SIGNUP"&&t(a)}catch{}},Dm=t=>new Promise((n,a)=>{window.FB.login(e=>{e.authResponse&&e.authResponse.code?n(e.authResponse.code):e.error?a(new Error(e.error)):a(new Error("Login cancelled"))},{config_id:t,response_type:"code",override_default_response_type:!0,extras:{setup:{},featureType:"whatsapp_business_app_onboarding",sessionInfoVersion:"3"}})}),Pm=async(t,n)=>{const a=n||"v22.0";await Rhe(),await whe(t,a)},Mhe={__name:"WhatsappEmbeddedSignup",setup(t,{expose:n}){n();const a=Bn(),e=ft(),{t:s}=Q(),r=P(!1),o=P(!1),i=P(""),l=P(!1),c=P(null),d=P(null),u=P(!1),m=S(()=>[{key:"EASY_SETUP",text:s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.BENEFITS.EASY_SETUP")},{key:"SECURE_AUTH",text:s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.BENEFITS.SECURE_AUTH")},{key:"AUTO_CONFIG",text:s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.BENEFITS.AUTO_CONFIG")}]),h=S(()=>u.value||o.value),_=w=>{o.value=!1,l.value=!1,u.value=!1;const D=w.error||w.message||s("INBOX_MGMT.ADD.WHATSAPP.API.ERROR_MESSAGE");Z(D)},E=()=>{o.value=!1,l.value=!1,u.value=!1},y=w=>{o.value=!1,u.value=!1,w&&w.id?(Z(s("INBOX_MGMT.FINISH.MESSAGE")),e.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:w.id}})):(Z(s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.SUCCESS_FALLBACK")),e.replace({name:"settings_inbox_list"}))},b=async w=>{if(!l.value||!c.value){_({error:s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.AUTH_NOT_COMPLETED")});return}o.value=!0,i.value=s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.PROCESSING");try{const D={code:c.value,business_id:w.business_id,waba_id:w.waba_id,phone_number_id:(w==null?void 0:w.phone_number_id)||""},B=await a.dispatch("inboxes/createWhatsAppEmbeddedSignup",D);c.value=null,y(B)}catch(D){const B=Kr(D)||s("INBOX_MGMT.ADD.WHATSAPP.API.ERROR_MESSAGE");_({error:B})}},A=async w=>{if(w.event==="FINISH"||w.event==="FINISH_WHATSAPP_BUSINESS_APP_ONBOARDING"){const D=w.data;Mm(D)?(d.value=D,l.value&&c.value?await b(D):i.value=s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.WAITING_FOR_AUTH")):_({error:s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.INVALID_BUSINESS_DATA")})}else w.event==="CANCEL"?E():w.event==="error"&&_({error:w.error_message||s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.SIGNUP_ERROR"),error_id:w.error_id,session_id:w.session_id})},T=Lm(A),I=async()=>{var w,D,B;try{u.value=!0,i.value=s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.AUTH_PROCESSING"),await Pm((w=window.chatwootConfig)==null?void 0:w.whatsappAppId,(D=window.chatwootConfig)==null?void 0:D.whatsappApiVersion),r.value=!0;const k=await Dm((B=window.chatwootConfig)==null?void 0:B.whatsappConfigurationId);c.value=k,l.value=!0,i.value=s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.WAITING_FOR_BUSINESS_INFO"),d.value&&b(d.value)}catch(k){k.message==="Login cancelled"?(o.value=!1,u.value=!1,Z(s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.CANCELLED"))):_({error:k.message||s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.SDK_LOAD_ERROR")})}},N=()=>{window.addEventListener("message",T)},x=()=>{window.removeEventListener("message",T)},R=()=>{N()};Pe(()=>{R()}),gr(()=>{x()});const M={store:a,router:e,t:s,fbSdkLoaded:r,isProcessing:o,processingMessage:i,authCodeReceived:l,authCode:c,businessData:d,isAuthenticating:u,benefits:m,showLoader:h,handleSignupError:_,handleSignupCancellation:E,handleSignupSuccess:y,completeSignupFlow:b,handleEmbeddedSignupData:A,handleSignupMessage:T,launchEmbeddedSignup:I,setupMessageListener:N,cleanupMessageListener:x,initialize:R,ref:P,computed:S,onMounted:Pe,onBeforeUnmount:gr,get useStore(){return Bn},get useRouter(){return ft},get useI18n(){return Q},get I18nT(){return d2},get useAlert(){return Z},Icon:Bt,NextButton:Se,LoadingState:Ed,get parseAPIErrorResponse(){return Kr},get globalConstants(){return gt},get setupFacebookSdk(){return Pm},get initWhatsAppEmbeddedSignup(){return Dm},get createMessageHandler(){return Lm},get isValidBusinessData(){return Mm}};return Object.defineProperty(M,"__isScriptSetup",{enumerable:!1,value:!0}),M}},Lhe={class:"h-full"},Dhe={key:1},Phe={class:"flex flex-col items-start mb-6 text-start"},khe={class:"flex justify-start mb-6"},Bhe={class:"flex size-11 items-center justify-center rounded-full bg-n-alpha-2"},Fhe={class:"mb-2 text-base font-medium text-n-slate-12"},Uhe={class:"text-sm leading-[24px] text-n-slate-12"},$he={class:"flex flex-col gap-2 mb-6"},Ghe={class:"flex flex-col gap-2 mb-6"},Vhe=["href"],Hhe={class:"flex mt-4"};function jhe(t,n,a,e,s,r){return p(),g("div",Lhe,[e.showLoader?(p(),L(e.LoadingState,{key:0,message:e.processingMessage},null,8,["message"])):(p(),g("div",Dhe,[f("div",Phe,[f("div",khe,[f("div",Bhe,[v(e.Icon,{icon:"i-woot-whatsapp",class:"text-n-slate-10 size-6"})])]),f("h3",Fhe,C(t.$t("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.TITLE")),1),f("p",Uhe,C(t.$t("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.DESC")),1)]),f("div",$he,[(p(!0),g(de,null,Ae(e.benefits,o=>(p(),g("div",{key:o.key,class:"flex gap-2 items-center text-sm text-n-slate-11"},[v(e.Icon,{icon:"i-lucide-check",class:"text-n-slate-11 size-4"}),Oe(" "+C(o.text),1)]))),128))]),f("div",Ghe,[v(e.I18nT,{keypath:"INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.LEARN_MORE.TEXT",tag:"span",class:"text-sm text-n-slate-11"},{link:z(()=>[f("a",{href:e.globalConstants.WHATSAPP_EMBEDDED_SIGNUP_DOCS_URL,target:"_blank",rel:"noopener noreferrer",class:"underline text-n-brand"},C(t.$t("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.LEARN_MORE.LINK_TEXT")),9,Vhe)]),_:1})]),f("div",Hhe,[v(e.NextButton,{disabled:e.isAuthenticating,"is-loading":e.isAuthenticating,faded:"",slate:"",class:"w-full",onClick:e.launchEmbeddedSignup},{default:z(()=>[Oe(C(t.$t("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.SUBMIT_BUTTON")),1)]),_:1},8,["disabled","is-loading"])])]))])}const Whe=G(Mhe,[["render",jhe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/channels/WhatsappEmbeddedSignup.vue"]]),zhe={__name:"Whatsapp",setup(t,{expose:n}){n();const a=lt(),e=ft(),{t:s}=Q(),r={WHATSAPP:"whatsapp",TWILIO:"twilio",WHATSAPP_CLOUD:"whatsapp_cloud",WHATSAPP_EMBEDDED:"whatsapp_embedded",WHATSAPP_MANUAL:"whatsapp_manual",THREE_SIXTY_DIALOG:"360dialog"},o=S(()=>{var E;return((E=window.chatwootConfig)==null?void 0:E.whatsappAppId)&&window.chatwootConfig.whatsappAppId!=="none"}),i=S(()=>a.query.provider),l=S(()=>!i.value),c=S(()=>!!i.value),d=S(()=>[{key:r.WHATSAPP,title:s("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.WHATSAPP_CLOUD"),description:s("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.WHATSAPP_CLOUD_DESC"),icon:"i-woot-whatsapp"},{key:r.TWILIO,title:s("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.TWILIO"),description:s("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.TWILIO_DESC"),icon:"i-woot-twilio"}]),u=E=>{e.push({name:a.name,params:a.params,query:{provider:E}})},_={route:a,router:e,t:s,PROVIDER_TYPES:r,hasWhatsappAppId:o,selectedProvider:i,showProviderSelection:l,showConfiguration:c,availableProviders:d,selectProvider:u,shouldShowCloudWhatsapp:E=>E===r.WHATSAPP_MANUAL||E===r.WHATSAPP&&!o.value,handleManualLinkClick:()=>{u(r.WHATSAPP_MANUAL)},computed:S,get useRoute(){return lt},get useRouter(){return ft},get useI18n(){return Q},get I18nT(){return d2},Twilio:uM,ThreeSixtyDialogWhatsapp:dhe,CloudWhatsapp:xhe,WhatsappEmbeddedSignup:Whe,ChannelSelector:MS};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}},Yhe={class:"overflow-auto col-span-6 p-6 w-full h-full"},Khe={key:0},Xhe={class:"mb-10 text-left"},qhe={class:"mb-2 text-lg font-medium text-slate-12"},Zhe={class:"text-sm leading-relaxed text-slate-11"},Qhe={class:"flex gap-6 justify-start"},Jhe={key:1},e_e={class:"px-6 py-5 rounded-2xl border border-n-weak"},t_e={key:0},n_e={class:"pt-6 mt-6 border-t border-n-weak"};function a_e(t,n,a,e,s,r){return p(),g("div",Yhe,[e.showProviderSelection?(p(),g("div",Khe,[f("div",Xhe,[f("h1",qhe,C(t.$t("INBOX_MGMT.ADD.WHATSAPP.SELECT_PROVIDER.TITLE")),1),f("p",Zhe,C(t.$t("INBOX_MGMT.ADD.WHATSAPP.SELECT_PROVIDER.DESCRIPTION")),1)]),f("div",Qhe,[(p(!0),g(de,null,Ae(e.availableProviders,o=>(p(),L(e.ChannelSelector,{key:o.key,title:o.title,description:o.description,icon:o.icon,onClick:i=>e.selectProvider(o.key)},null,8,["title","description","icon","onClick"]))),128))])])):e.showConfiguration?(p(),g("div",Jhe,[f("div",e_e,[O(" Show embedded signup if app ID is configured "),e.hasWhatsappAppId&&e.selectedProvider===e.PROVIDER_TYPES.WHATSAPP?(p(),g("div",t_e,[v(e.WhatsappEmbeddedSignup),O(" Manual setup fallback option "),f("div",n_e,[v(e.I18nT,{keypath:"INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.MANUAL_FALLBACK",tag:"p",class:"text-sm text-n-slate-11"},{link:z(()=>[f("a",{href:"#",class:"underline text-n-brand",onClick:Ve(e.handleManualLinkClick,["prevent"])},C(t.$t("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.MANUAL_LINK_TEXT")),1)]),_:1})])])):e.shouldShowCloudWhatsapp(e.selectedProvider)?(p(),g(de,{key:1},[O(" Show manual setup "),v(e.CloudWhatsapp)],2112)):e.selectedProvider===e.PROVIDER_TYPES.TWILIO?(p(),g(de,{key:2},[O(" Other providers "),v(e.Twilio,{type:"whatsapp"})],2112)):e.selectedProvider===e.PROVIDER_TYPES.THREE_SIXTY_DIALOG?(p(),L(e.ThreeSixtyDialogWhatsapp,{key:3})):(p(),L(e.CloudWhatsapp,{key:4}))])])):O("v-if",!0)])}const s_e=G(zhe,[["render",a_e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/channels/Whatsapp.vue"]]),o_e={components:{PageHeader:Ss,NextButton:Se},setup(){return{v$:rt()}},data(){return{channelName:"",lineChannelId:"",lineChannelSecret:"",lineChannelToken:""}},computed:{..._t({uiFlags:"inboxes/getUIFlags"})},validations:{channelName:{required:Ge},lineChannelId:{required:Ge},lineChannelSecret:{required:Ge},lineChannelToken:{required:Ge}},methods:{async createChannel(){var t;if(this.v$.$touch(),!this.v$.$invalid)try{const n=await this.$store.dispatch("inboxes/createChannel",{name:(t=this.channelName)==null?void 0:t.trim(),channel:{type:"line",line_channel_id:this.lineChannelId,line_channel_secret:this.lineChannelSecret,line_channel_token:this.lineChannelToken}});wa.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:n.id}})}catch{Z(this.$t("INBOX_MGMT.ADD.LINE_CHANNEL.API.ERROR_MESSAGE"))}}}},r_e={class:"h-full w-full p-6 col-span-6"},i_e={class:"flex-shrink-0 flex-grow-0"},l_e=["placeholder"],c_e={key:0,class:"message"},d_e={class:"flex-shrink-0 flex-grow-0"},u_e=["placeholder"],p_e={class:"flex-shrink-0 flex-grow-0"},f_e=["placeholder"],m_e={class:"flex-shrink-0 flex-grow-0"},h_e=["placeholder"],__e={class:"w-full mt-4"};function g_e(t,n,a,e,s,r){const o=H("PageHeader"),i=H("NextButton");return p(),g("div",r_e,[v(o,{"header-title":t.$t("INBOX_MGMT.ADD.LINE_CHANNEL.TITLE"),"header-content":t.$t("INBOX_MGMT.ADD.LINE_CHANNEL.DESC")},null,8,["header-title","header-content"]),f("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:n[8]||(n[8]=Ve(l=>r.createChannel(),["prevent"]))},[f("div",i_e,[f("label",{class:oe({error:e.v$.channelName.$error})},[Oe(C(t.$t("INBOX_MGMT.ADD.LINE_CHANNEL.CHANNEL_NAME.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[0]||(n[0]=l=>s.channelName=l),type:"text",placeholder:t.$t("INBOX_MGMT.ADD.LINE_CHANNEL.CHANNEL_NAME.PLACEHOLDER"),onBlur:n[1]||(n[1]=(...l)=>e.v$.channelName.$touch&&e.v$.channelName.$touch(...l))},null,40,l_e),[[Et,s.channelName]]),e.v$.channelName.$error?(p(),g("span",c_e,C(t.$t("INBOX_MGMT.ADD.LINE_CHANNEL.CHANNEL_NAME.ERROR")),1)):O("v-if",!0)],2)]),f("div",d_e,[f("label",{class:oe({error:e.v$.lineChannelId.$error})},[Oe(C(t.$t("INBOX_MGMT.ADD.LINE_CHANNEL.LINE_CHANNEL_ID.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[2]||(n[2]=l=>s.lineChannelId=l),type:"text",placeholder:t.$t("INBOX_MGMT.ADD.LINE_CHANNEL.LINE_CHANNEL_ID.PLACEHOLDER"),onBlur:n[3]||(n[3]=(...l)=>e.v$.lineChannelId.$touch&&e.v$.lineChannelId.$touch(...l))},null,40,u_e),[[Et,s.lineChannelId]])],2)]),f("div",p_e,[f("label",{class:oe({error:e.v$.lineChannelSecret.$error})},[Oe(C(t.$t("INBOX_MGMT.ADD.LINE_CHANNEL.LINE_CHANNEL_SECRET.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[4]||(n[4]=l=>s.lineChannelSecret=l),type:"text",placeholder:t.$t("INBOX_MGMT.ADD.LINE_CHANNEL.LINE_CHANNEL_SECRET.PLACEHOLDER"),onBlur:n[5]||(n[5]=(...l)=>e.v$.lineChannelSecret.$touch&&e.v$.lineChannelSecret.$touch(...l))},null,40,f_e),[[Et,s.lineChannelSecret]])],2)]),f("div",m_e,[f("label",{class:oe({error:e.v$.lineChannelToken.$error})},[Oe(C(t.$t("INBOX_MGMT.ADD.LINE_CHANNEL.LINE_CHANNEL_TOKEN.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[6]||(n[6]=l=>s.lineChannelToken=l),type:"text",placeholder:t.$t("INBOX_MGMT.ADD.LINE_CHANNEL.LINE_CHANNEL_TOKEN.PLACEHOLDER"),onBlur:n[7]||(n[7]=(...l)=>e.v$.lineChannelToken.$touch&&e.v$.lineChannelToken.$touch(...l))},null,40,h_e),[[Et,s.lineChannelToken]])],2)]),f("div",__e,[v(i,{"is-loading":t.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:t.$t("INBOX_MGMT.ADD.LINE_CHANNEL.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)])}const b_e=G(o_e,[["render",g_e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/channels/Line.vue"]]),v_e={components:{PageHeader:Ss,NextButton:Se},setup(){return{v$:rt()}},data(){return{botToken:""}},computed:{..._t({uiFlags:"inboxes/getUIFlags"})},validations:{botToken:{required:Ge}},methods:{async createChannel(){if(this.v$.$touch(),!this.v$.$invalid)try{const t=await this.$store.dispatch("inboxes/createChannel",{channel:{type:"telegram",bot_token:this.botToken}});wa.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:t.id}})}catch(t){Z(t.message||this.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.API.ERROR_MESSAGE"))}}}},E_e={class:"h-full w-full p-6 col-span-6"},S_e={class:"flex-shrink-0 flex-grow-0"},T_e=["placeholder"],A_e={class:"help-text"},y_e={class:"w-full mt-4"};function I_e(t,n,a,e,s,r){const o=H("PageHeader"),i=H("NextButton");return p(),g("div",E_e,[v(o,{"header-title":t.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.TITLE"),"header-content":t.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.DESC")},null,8,["header-title","header-content"]),f("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:n[2]||(n[2]=Ve(l=>r.createChannel(),["prevent"]))},[f("div",S_e,[f("label",{class:oe({error:e.v$.botToken.$error})},[Oe(C(t.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.BOT_TOKEN.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[0]||(n[0]=l=>s.botToken=l),type:"text",placeholder:t.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.BOT_TOKEN.PLACEHOLDER"),onBlur:n[1]||(n[1]=(...l)=>e.v$.botToken.$touch&&e.v$.botToken.$touch(...l))},null,40,T_e),[[Et,s.botToken]])],2),f("p",A_e,C(t.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.BOT_TOKEN.SUBTITLE")),1)]),f("div",y_e,[v(i,{"is-loading":t.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:t.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)])}const C_e=G(v_e,[["render",I_e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/channels/Telegram.vue"]]);class O_e extends Xs{constructor(){super("instagram",{accountScoped:!0})}generateAuthorization(n){return axios.post(`${this.url}/authorization`,n)}}const $v=new O_e,N_e={setup(){const{accountId:t}=Ut();return{accountId:t,v$:rt()}},data(){return{isCreating:!1,hasError:!1,errorStateMessage:"",errorStateDescription:"",isRequestingAuthorization:!1}},mounted(){const t=new URLSearchParams(window.location.search),n=t.get("code"),a=t.get("error_message");a&&(this.hasError=!0,n==="400"?(this.errorStateMessage=a,this.errorStateDescription=this.$t("INBOX_MGMT.ADD.INSTAGRAM.ERROR_AUTH")):(this.errorStateMessage=this.$t("INBOX_MGMT.ADD.INSTAGRAM.ERROR_MESSAGE"),this.errorStateDescription=a));const e=window.location.pathname;window.history.replaceState({},document.title,e)},methods:{async requestAuthorization(){this.isRequestingAuthorization=!0;const t=await $v.generateAuthorization(),{data:{url:n}}=t;window.location.href=n}}},x_e={class:"h-full p-6 w-full max-w-full flex-shrink-0 flex-grow-0"},R_e={class:"flex flex-col items-center justify-start h-full text-center"},w_e={key:0,class:"max-w-lg mx-auto text-center"},M_e={key:0},L_e={key:1,class:"flex flex-col items-center justify-center px-8 py-10 text-center rounded-2xl outline outline-1 outline-n-weak"},D_e={class:"text-2xl font-medium"},P_e={class:"py-6 text-sm text-n-slate-11"},k_e=["disabled"],B_e={class:"text-base font-medium"},F_e={key:0,class:"ml-2"};function U_e(t,n,a,e,s,r){const o=nt("dompurify-html");return p(),g("div",x_e,[f("div",R_e,[s.hasError?(p(),g("div",w_e,[f("h5",null,C(s.errorStateMessage),1),s.errorStateDescription?ce((p(),g("p",M_e,null,512)),[[o,s.errorStateDescription]]):O("v-if",!0)])):(p(),g("div",L_e,[f("h6",D_e,C(t.$t("INBOX_MGMT.ADD.INSTAGRAM.CONNECT_YOUR_INSTAGRAM_PROFILE")),1),f("p",P_e,C(t.$t("INBOX_MGMT.ADD.INSTAGRAM.HELP")),1),f("button",{class:"flex items-center justify-center px-8 py-3.5 gap-2 text-white rounded-full bg-gradient-to-r from-[#833AB4] via-[#FD1D1D] to-[#FCAF45] hover:shadow-lg transition-all duration-300 min-w-[240px] overflow-hidden",disabled:s.isRequestingAuthorization,onClick:n[0]||(n[0]=i=>r.requestAuthorization())},[n[2]||(n[2]=f("span",{class:"i-ri-instagram-line size-5"},null,-1)),f("span",B_e,C(t.$t("INBOX_MGMT.ADD.INSTAGRAM.CONTINUE_WITH_INSTAGRAM")),1),s.isRequestingAuthorization?(p(),g("span",F_e,n[1]||(n[1]=[f("svg",{class:"w-5 h-5 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[f("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),f("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):O("v-if",!0)],8,k_e)]))])])}const $_e=G(N_e,[["render",U_e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/channels/Instagram.vue"]]),G_e={__name:"Voice",setup(t,{expose:n}){n();const{t:a}=Q(),e=Fe(),s=ft(),r=Lt({phoneNumber:"",accountSid:"",authToken:"",apiKeySid:"",apiKeySecret:""}),o=le("inboxes/getUIFlags"),i={phoneNumber:{required:Ge,isPhoneE164:nT},accountSid:{required:Ge},authToken:{required:Ge},apiKeySid:{required:Ge},apiKeySecret:{required:Ge}},l=rt(i,r),c=S(()=>l.value.$invalid),d=S(()=>{var _,E,y,b,A;return{phoneNumber:(_=l.value.phoneNumber)!=null&&_.$error?a("INBOX_MGMT.ADD.VOICE.PHONE_NUMBER.ERROR"):"",accountSid:(E=l.value.accountSid)!=null&&E.$error?a("INBOX_MGMT.ADD.VOICE.TWILIO.ACCOUNT_SID.REQUIRED"):"",authToken:(y=l.value.authToken)!=null&&y.$error?a("INBOX_MGMT.ADD.VOICE.TWILIO.AUTH_TOKEN.REQUIRED"):"",apiKeySid:(b=l.value.apiKeySid)!=null&&b.$error?a("INBOX_MGMT.ADD.VOICE.TWILIO.API_KEY_SID.REQUIRED"):"",apiKeySecret:(A=l.value.apiKeySecret)!=null&&A.$error?a("INBOX_MGMT.ADD.VOICE.TWILIO.API_KEY_SECRET.REQUIRED"):""}});function u(){return{account_sid:r.accountSid,auth_token:r.authToken,api_key_sid:r.apiKeySid,api_key_secret:r.apiKeySecret}}async function m(){var E,y;if(await l.value.$validate())try{const b=await e.dispatch("inboxes/createVoiceChannel",{name:`Voice (${r.phoneNumber})`,voice:{phone_number:r.phoneNumber,provider:"twilio",provider_config:u()}});s.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:b.id}})}catch(b){Z(((y=(E=b.response)==null?void 0:E.data)==null?void 0:y.message)||a("INBOX_MGMT.ADD.VOICE.API.ERROR_MESSAGE"))}}const h={t:a,store:e,router:s,state:r,uiFlags:o,validationRules:i,v$:l,isSubmitDisabled:c,formErrors:d,getProviderConfig:u,createChannel:m,reactive:Lt,computed:S,get useI18n(){return Q},get useRouter(){return ft},get useVuelidate(){return rt},get required(){return Ge},get useAlert(){return Z},get isPhoneE164(){return nT},get useStore(){return Fe},get useMapGetter(){return le},PageHeader:Ss,Input:sn,NextButton:Se};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}},V_e={class:"overflow-auto col-span-6 p-6 w-full h-full"};function H_e(t,n,a,e,s,r){var o,i,l,c,d;return p(),g("div",V_e,[v(e.PageHeader,{"header-title":e.t("INBOX_MGMT.ADD.VOICE.TITLE"),"header-content":e.t("INBOX_MGMT.ADD.VOICE.DESC")},null,8,["header-title","header-content"]),f("form",{class:"flex flex-col gap-4 flex-wrap mx-0",onSubmit:Ve(e.createChannel,["prevent"])},[v(e.Input,{modelValue:e.state.phoneNumber,"onUpdate:modelValue":n[0]||(n[0]=u=>e.state.phoneNumber=u),label:e.t("INBOX_MGMT.ADD.VOICE.PHONE_NUMBER.LABEL"),placeholder:e.t("INBOX_MGMT.ADD.VOICE.PHONE_NUMBER.PLACEHOLDER"),message:e.formErrors.phoneNumber,"message-type":e.formErrors.phoneNumber?"error":"info",onBlur:(o=e.v$.phoneNumber)==null?void 0:o.$touch},null,8,["modelValue","label","placeholder","message","message-type","onBlur"]),v(e.Input,{modelValue:e.state.accountSid,"onUpdate:modelValue":n[1]||(n[1]=u=>e.state.accountSid=u),label:e.t("INBOX_MGMT.ADD.VOICE.TWILIO.ACCOUNT_SID.LABEL"),placeholder:e.t("INBOX_MGMT.ADD.VOICE.TWILIO.ACCOUNT_SID.PLACEHOLDER"),message:e.formErrors.accountSid,"message-type":e.formErrors.accountSid?"error":"info",onBlur:(i=e.v$.accountSid)==null?void 0:i.$touch},null,8,["modelValue","label","placeholder","message","message-type","onBlur"]),v(e.Input,{modelValue:e.state.authToken,"onUpdate:modelValue":n[2]||(n[2]=u=>e.state.authToken=u),type:"password",label:e.t("INBOX_MGMT.ADD.VOICE.TWILIO.AUTH_TOKEN.LABEL"),placeholder:e.t("INBOX_MGMT.ADD.VOICE.TWILIO.AUTH_TOKEN.PLACEHOLDER"),message:e.formErrors.authToken,"message-type":e.formErrors.authToken?"error":"info",onBlur:(l=e.v$.authToken)==null?void 0:l.$touch},null,8,["modelValue","label","placeholder","message","message-type","onBlur"]),v(e.Input,{modelValue:e.state.apiKeySid,"onUpdate:modelValue":n[3]||(n[3]=u=>e.state.apiKeySid=u),label:e.t("INBOX_MGMT.ADD.VOICE.TWILIO.API_KEY_SID.LABEL"),placeholder:e.t("INBOX_MGMT.ADD.VOICE.TWILIO.API_KEY_SID.PLACEHOLDER"),message:e.formErrors.apiKeySid,"message-type":e.formErrors.apiKeySid?"error":"info",onBlur:(c=e.v$.apiKeySid)==null?void 0:c.$touch},null,8,["modelValue","label","placeholder","message","message-type","onBlur"]),v(e.Input,{modelValue:e.state.apiKeySecret,"onUpdate:modelValue":n[4]||(n[4]=u=>e.state.apiKeySecret=u),type:"password",label:e.t("INBOX_MGMT.ADD.VOICE.TWILIO.API_KEY_SECRET.LABEL"),placeholder:e.t("INBOX_MGMT.ADD.VOICE.TWILIO.API_KEY_SECRET.PLACEHOLDER"),message:e.formErrors.apiKeySecret,"message-type":e.formErrors.apiKeySecret?"error":"info",onBlur:(d=e.v$.apiKeySecret)==null?void 0:d.$touch},null,8,["modelValue","label","placeholder","message","message-type","onBlur"]),f("div",null,[v(e.NextButton,{"is-loading":e.uiFlags.isCreating,disabled:e.isSubmitDisabled,label:e.t("INBOX_MGMT.ADD.VOICE.SUBMIT_BUTTON"),type:"submit"},null,8,["is-loading","disabled","label"])])],32)])}const j_e=G(G_e,[["render",H_e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/channels/Voice.vue"]]),W_e={facebook:ype,website:qpe,twitter:afe,api:hfe,email:qfe,sms:Zme,whatsapp:s_e,line:b_e,telegram:C_e,instagram:$_e,voice:j_e},z_e=ei({name:"NewChannelView",props:{channelName:{type:String,required:!0}},render(){const t=W_e[this.channelName];return t?pn(t):null}}),Y_e=G(z_e,[["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/ChannelFactory.vue"]]),K_e={components:{BackButton:Wl},props:{headerTitle:{default:"",type:String},icon:{default:"",type:String},showBackButton:{type:Boolean,default:!1},backUrl:{type:[String,Object],default:""},backButtonLabel:{type:String,default:""}},setup(){const{isAdmin:t}=Es();return{isAdmin:t}},computed:{iconClass(){return`icon ${this.icon} header--icon`}}},X_e={class:"flex justify-between items-center h-20 min-h-[3.5rem] px-4 py-2 bg-n-background"},q_e={class:"flex items-center mb-0 text-2xl text-n-slate-12"},Z_e={class:"text-xl font-medium text-n-slate-12"};function Q_e(t,n,a,e,s,r){const o=H("BackButton");return p(),g("div",X_e,[f("h1",q_e,[a.showBackButton?(p(),L(o,{key:0,"button-label":a.backButtonLabel,"back-url":a.backUrl,class:"ml-2 mr-4"},null,8,["button-label","back-url"])):O("v-if",!0),qe(t.$slots,"default"),f("span",Z_e,C(a.headerTitle),1)])])}const J_e=G(K_e,[["render",Q_e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/SettingsHeader.vue"]]),ege={__name:"Wrapper",props:{headerTitle:{type:String,default:""},icon:{type:String,default:""},keepAlive:{type:Boolean,default:!0},showBackButton:{type:Boolean,default:!1},backUrl:{type:[String,Object],default:""},fullWidth:{type:Boolean,default:!1}},setup(t,{expose:n}){n();const a=t,{t:e}=Q(),s=S(()=>a.headerTitle||a.icon||a.showBackButton),r={props:a,t:e,showSettingsHeader:s,computed:S,get useI18n(){return Q},SettingsHeader:J_e};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},tge={class:"flex flex-1 flex-col m-0 bg-n-background overflow-auto"};function nge(t,n,a,e,s,r){const o=H("router-view");return p(),g("div",tge,[f("div",{class:oe(["mx-auto w-full flex flex-col flex-1",{"max-w-6xl":!a.fullWidth}])},[e.showSettingsHeader?(p(),L(e.SettingsHeader,{key:0,icon:a.icon,"header-title":e.t(a.headerTitle),"show-back-button":a.showBackButton,"back-url":a.backUrl,class:oe(["sticky top-0 z-20",{"max-w-6xl w-full mx-auto":a.fullWidth}])},null,8,["icon","header-title","show-back-button","back-url","class"])):O("v-if",!0),v(o,{class:"px-5 flex-1 overflow-hidden"},{default:z(({Component:i})=>[a.keepAlive?(p(),L(th,{key:1},[(p(),L(Da(i),{key:t.$route.fullPath}))],1024)):(p(),L(Da(i),{key:t.$route.fullPath}))]),_:1})],2)])}const sp=G(ege,[["render",nge],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/Wrapper.vue"]]),age={__name:"ChannelName",props:{channelType:{type:String,required:!0},medium:{type:String,default:""}},setup(t,{expose:n}){n();const a=t,e=xt(),{t:s}=Q(),r=S(()=>e["globalConfig/get"].value),o={"Channel::FacebookPage":"MESSENGER","Channel::WebWidget":"WEB_WIDGET","Channel::TwitterProfile":"TWITTER_PROFILE","Channel::TwilioSms":"TWILIO_SMS","Channel::Whatsapp":"WHATSAPP","Channel::Sms":"SMS","Channel::Email":"EMAIL","Channel::Telegram":"TELEGRAM","Channel::Line":"LINE","Channel::Api":"API","Channel::Instagram":"INSTAGRAM","Channel::Voice":"VOICE"},i=()=>a.medium==="whatsapp"?s("INBOX_MGMT.CHANNELS.WHATSAPP"):s("INBOX_MGMT.CHANNELS.TWILIO_SMS"),l=S(()=>a.channelType==="Channel::Api"?r.value.apiChannelName||s("INBOX_MGMT.CHANNELS.API"):a.channelType==="Channel::TwilioSms"?i():s(`INBOX_MGMT.CHANNELS.${o[a.channelType]}`)),c={props:a,getters:e,t:s,globalConfig:r,i18nMap:o,twilioChannelName:i,readableChannelName:l,get useI18n(){return Q},get useStoreGetters(){return xt},computed:S};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}};function sge(t,n,a,e,s,r){return p(),g("span",null,C(e.readableChannelName),1)}const oge=G(age,[["render",sge],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/components/ChannelName.vue"]]),rge={__name:"Index",setup(t,{expose:n}){n();const a=xt(),e=Fe(),{t:s}=Q(),{isAdmin:r}=Es(),o=P(!1),i=P({}),l=le("inboxes/getInboxes"),c=S(()=>{var I;return(I=l.value)==null?void 0:I.slice().sort((N,x)=>N.name.localeCompare(x.name))}),d=S(()=>a["inboxes/getUIFlags"].value),u=S(()=>`${s("INBOX_MGMT.DELETE.CONFIRM.YES")} ${i.value.name}`),m=S(()=>`${s("INBOX_MGMT.DELETE.CONFIRM.NO")} ${i.value.name}`),h=S(()=>`${s("INBOX_MGMT.DELETE.CONFIRM.MESSAGE")} ${i.value.name}?`),_=S(()=>`${s("INBOX_MGMT.DELETE.CONFIRM.PLACE_HOLDER",{inboxName:i.value.name})}`),E=async({id:I})=>{try{await e.dispatch("inboxes/delete",I),Z(s("INBOX_MGMT.DELETE.API.SUCCESS_MESSAGE"))}catch{Z(s("INBOX_MGMT.DELETE.API.ERROR_MESSAGE"))}},y=()=>{o.value=!1,i.value={}},T={getters:a,store:e,t:s,isAdmin:r,showDeletePopup:o,selectedInbox:i,inboxes:l,inboxesList:c,uiFlags:d,deleteConfirmText:u,deleteRejectText:m,confirmDeleteMessage:h,confirmPlaceHolderText:_,deleteInbox:E,closeDelete:y,confirmDeletion:()=>{E(i.value),y()},openDelete:I=>{o.value=!0,i.value=I},computed:S,ref:P,get useI18n(){return Q},get useAlert(){return Z},Avatar:qt,get useAdmin(){return Es},SettingsLayout:Ha,BaseSettingsHeader:Va,get useMapGetter(){return le},get useStoreGetters(){return xt},get useStore(){return Fe},ChannelName:oge,ChannelIcon:hE,Button:Se};return Object.defineProperty(T,"__isScriptSetup",{enumerable:!1,value:!0}),T}},ige={class:"min-w-full overflow-x-auto"},lge={class:"divide-y divide-n-weak flex-1 text-n-slate-12"},cge={class:"py-4 ltr:pr-4 rtl:pl-4"},dge={class:"flex items-center flex-row gap-4"},uge={key:0,class:"bg-n-alpha-3 rounded-full size-12 p-2 ring ring-n-solid-1 border border-n-strong shadow-sm"},pge={key:1,class:"size-12 flex justify-center items-center bg-n-alpha-3 rounded-full p-2 ring ring-n-solid-1 border border-n-strong shadow-sm"},fge={class:"block font-medium capitalize"},mge={class:"py-4"},hge={class:"flex gap-1 justify-end"};function _ge(t,n,a,e,s,r){const o=H("router-link"),i=H("woot-confirm-delete-modal"),l=nt("tooltip");return p(),L(e.SettingsLayout,{"no-records-found":!e.inboxesList.length,"no-records-message":t.$t("INBOX_MGMT.LIST.404"),"is-loading":e.uiFlags.isFetching},{header:z(()=>[v(e.BaseSettingsHeader,{title:t.$t("INBOX_MGMT.HEADER"),description:t.$t("INBOX_MGMT.DESCRIPTION"),"link-text":t.$t("INBOX_MGMT.LEARN_MORE"),"feature-name":"inboxes"},{actions:z(()=>[e.isAdmin?(p(),L(o,{key:0,to:{name:"settings_inbox_new"}},{default:z(()=>[v(e.Button,{icon:"i-lucide-circle-plus",label:t.$t("SETTINGS.INBOXES.NEW_INBOX")},null,8,["label"])]),_:1})):O("v-if",!0)]),_:1},8,["title","description","link-text"])]),body:z(()=>[f("table",ige,[f("tbody",lge,[(p(!0),g(de,null,Ae(e.inboxesList,c=>(p(),g("tr",{key:c.id},[f("td",cge,[f("div",dge,[c.avatar_url?(p(),g("div",uge,[v(e.Avatar,{src:c.avatar_url,name:c.name,size:30,"rounded-full":""},null,8,["src","name"])])):(p(),g("div",pge,[v(e.ChannelIcon,{class:"size-5 text-n-slate-10",inbox:c},null,8,["inbox"])])),f("div",null,[f("span",fge,C(c.name),1),v(e.ChannelName,{"channel-type":c.channel_type,medium:c.medium},null,8,["channel-type","medium"])])])]),f("td",mge,[f("div",hge,[v(o,{to:{name:"settings_inbox_show",params:{inboxId:c.id}}},{default:z(()=>[e.isAdmin?ce((p(),L(e.Button,{key:0,icon:"i-lucide-settings",slate:"",xs:"",faded:""},null,512)),[[l,t.$t("INBOX_MGMT.SETTINGS"),void 0,{top:!0}]]):O("v-if",!0)]),_:2},1032,["to"]),e.isAdmin?ce((p(),L(e.Button,{key:0,icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:d=>e.openDelete(c)},null,8,["onClick"])),[[l,t.$t("INBOX_MGMT.DELETE.BUTTON_TEXT"),void 0,{top:!0}]]):O("v-if",!0)])])]))),128))])])]),default:z(()=>[e.showDeletePopup?(p(),L(i,{key:0,show:e.showDeletePopup,"onUpdate:show":n[0]||(n[0]=c=>e.showDeletePopup=c),title:t.$t("INBOX_MGMT.DELETE.CONFIRM.TITLE"),message:e.confirmDeleteMessage,"confirm-text":e.deleteConfirmText,"reject-text":e.deleteRejectText,"confirm-value":e.selectedInbox.name,"confirm-place-holder-text":e.confirmPlaceHolderText,onOnConfirm:e.confirmDeletion,onOnClose:e.closeDelete},null,8,["show","title","message","confirm-text","reject-text","confirm-value","confirm-place-holder-text"])):O("v-if",!0)]),_:1},8,["no-records-found","no-records-message","is-loading"])}const gge=G(rge,[["render",_ge],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/Index.vue"]]),bge={props:{headerTitle:{type:String,default:""},headerContent:{type:String,default:""}}},vge={class:"border-b border-solid border-n-weak/60"},Ege={class:"max-w-6xl w-full mx-auto pt-4 pb-0 px-8"},Sge={class:"text-2xl text-n-slate-12 mb-1 font-medium"},Tge={key:0,class:"w-full text-n-slate-11 text-sm mb-2"};function Age(t,n,a,e,s,r){return p(),g("div",vge,[f("div",Ege,[f("h2",Sge,C(a.headerTitle),1),a.headerContent?(p(),g("p",Tge,C(a.headerContent),1)):O("v-if",!0),qe(t.$slots,"default")])])}const yge=G(bge,[["render",Age],["__file","/app/app/javascript/dashboard/components/widgets/SettingIntroBanner.vue"]]),Ige={props:{title:{type:String,default:""},subTitle:{type:String,default:""},showBorder:{type:Boolean,default:!0},note:{type:String,default:""}}},Cge={class:"grid grid-cols-1 lg:grid-cols-8 gap-6"},Oge={class:"col-span-2"},Nge={key:0,class:"text-base text-n-brand mb-0 font-medium"},xge={class:"text-sm mb-2 text-n-slate-11 leading-5 tracking-normal mt-2"},Rge={key:1},wge={class:"font-semibold"},Mge={class:"col-span-6 xl:col-span-5"};function Lge(t,n,a,e,s,r){return p(),g("div",{class:oe(["ml-0 mr-0 py-8 w-full",{"border-b border-solid border-n-weak/60 dark:border-n-weak":a.showBorder}])},[f("div",Cge,[f("div",Oge,[a.title?(p(),g("p",Nge,C(a.title),1)):O("v-if",!0),f("p",xge,[a.subTitle?qe(t.$slots,"subTitle",{key:0},()=>[Oe(C(a.subTitle),1)]):O("v-if",!0)]),a.note?(p(),g("p",Rge,[f("span",wge,C(t.$t("INBOX_MGMT.NOTE")),1),Oe(" "+C(a.note),1)])):O("v-if",!0)]),f("div",Mge,[qe(t.$slots,"default")])])],2)}const Xl=G(Ige,[["render",Lge],["__file","/app/app/javascript/dashboard/components/SettingsSection.vue"]]),ju={REPLY_TO:"replyTo",REPLY_TO_OUTGOING:"replyToOutgoing"},Dge={[ju.REPLY_TO]:[ht.FB,ht.WEB,ht.TWITTER,ht.WHATSAPP,ht.TELEGRAM,ht.API],[ju.REPLY_TO_OUTGOING]:[ht.WEB,ht.TWITTER,ht.WHATSAPP,ht.TELEGRAM,ht.API]},Ad={computed:{channelType(){return this.inbox.channel_type},whatsAppAPIProvider(){return this.inbox.provider||""},isAMicrosoftInbox(){return this.isAnEmailChannel&&this.inbox.provider==="microsoft"},isAGoogleInbox(){return this.isAnEmailChannel&&this.inbox.provider==="google"},isAPIInbox(){return this.channelType===ht.API},isATwitterInbox(){return this.channelType===ht.TWITTER},isAFacebookInbox(){return this.channelType===ht.FB},isAWebWidgetInbox(){return this.channelType===ht.WEB},isATwilioChannel(){return this.channelType===ht.TWILIO},isALineChannel(){return this.channelType===ht.LINE},isAVoiceChannel(){return this.channelType===ht.VOICE},isAnEmailChannel(){return this.channelType===ht.EMAIL},isATelegramChannel(){return this.channelType===ht.TELEGRAM},isATwilioSMSChannel(){const{medium:t=""}=this.inbox;return this.isATwilioChannel&&t==="sms"},isASmsInbox(){return this.channelType===ht.SMS||this.isATwilioSMSChannel},isATwilioWhatsAppChannel(){const{medium:t=""}=this.inbox;return this.isATwilioChannel&&t==="whatsapp"},isAWhatsAppCloudChannel(){return this.channelType===ht.WHATSAPP&&this.whatsAppAPIProvider==="whatsapp_cloud"},is360DialogWhatsAppChannel(){return this.channelType===ht.WHATSAPP&&this.whatsAppAPIProvider==="default"},chatAdditionalAttributes(){const{additional_attributes:t}=this.chat||{};return t||{}},isTwitterInboxTweet(){return this.chatAdditionalAttributes.type==="tweet"},twilioBadge(){return`${this.isATwilioSMSChannel?"sms":"whatsapp"}`},twitterBadge(){return`${this.isTwitterInboxTweet?"twitter-tweet":"twitter-dm"}`},facebookBadge(){return this.chatAdditionalAttributes.type||"facebook"},inboxBadge(){let t="";return this.isATwitterInbox?t=this.twitterBadge:this.isAFacebookInbox?t=this.facebookBadge:this.isATwilioChannel?t=this.twilioBadge:this.isAWhatsAppChannel&&(t="whatsapp"),t||this.channelType},isAWhatsAppChannel(){return this.channelType===ht.WHATSAPP||this.isATwilioWhatsAppChannel},isAnInstagramChannel(){return this.channelType===ht.INSTAGRAM}},methods:{inboxHasFeature(t){var n;return((n=Dge[t])==null?void 0:n.includes(this.channelType))??!1}}},Pge={__name:"Banner",props:{color:{type:String,default:"slate",validator:t=>["blue","ruby","amber","slate","teal"].includes(t)},actionLabel:{type:String,default:null}},emits:["action"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=S(()=>({slate:"bg-n-slate-3 border-n-slate-4 text-n-slate-11",amber:"bg-n-amber-3 border-n-amber-4 text-n-amber-11",teal:"bg-n-teal-3 border-n-teal-4 text-n-teal-11",ruby:"bg-n-ruby-3 border-n-ruby-4 text-n-ruby-11",blue:"bg-n-blue-3 border-n-blue-4 text-n-blue-11"})[e.color]),o=S(()=>({slate:"bg-n-slate-4 hover:bg-n-slate-5 text-n-slate-11",amber:"bg-n-amber-4 hover:bg-n-amber-5 text-n-amber-11",teal:"bg-n-teal-4 hover:bg-n-teal-5 text-n-teal-11",ruby:"bg-n-ruby-4 hover:bg-n-ruby-5 text-n-ruby-11",blue:"bg-n-blue-4 hover:bg-n-blue-5 text-n-blue-11"})[e.color]),l={props:e,emit:s,bannerClass:r,buttonClass:o,triggerAction:()=>{s("action")},computed:S};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}};function kge(t,n,a,e,s,r){return p(),g("div",{class:oe(["text-sm rounded-xl flex items-center justify-between gap-2 border",[e.bannerClass,{"py-2 px-3":!a.actionLabel,"pl-3 p-2":a.actionLabel}]])},[f("div",null,[qe(t.$slots,"default")]),f("div",null,[a.actionLabel?(p(),g("button",{key:0,class:oe(["px-3 py-1 w-auto grid place-content-center rounded-lg",e.buttonClass]),onClick:e.triggerAction},C(a.actionLabel),3)):O("v-if",!0)])],2)}const op=G(Pge,[["render",kge],["__file","/app/app/javascript/dashboard/components-next/banner/Banner.vue"]]),Bge={__name:"InboxReconnectionRequired",props:{actionLabel:{type:String,default:null},description:{type:String,default:null}},emits:["reauthorize"],setup(t,{expose:n,emit:a}){n();const s={emit:a,Banner:op};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}};function Fge(t,n,a,e,s,r){return p(),L(e.Banner,{color:"ruby","action-label":a.actionLabel||t.$t("INBOX_MGMT.CLICK_TO_RECONNECT"),onAction:n[0]||(n[0]=o=>e.emit("reauthorize"))},{default:z(()=>[Oe(C(a.description||t.$t("INBOX_MGMT.RECONNECTION_REQUIRED")),1)]),_:1},8,["action-label"])}const rp=G(Bge,[["render",Fge],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/components/InboxReconnectionRequired.vue"]]),Uge={components:{InboxReconnectionRequired:rp},props:{inbox:{type:Object,required:!0}},computed:{inboxId(){return this.inbox.id}},mounted(){window.fbAsyncInit=this.runFBInit},methods:{runFBInit(){FB.init({appId:window.chatwootConfig.fbAppId,xfbml:!0,version:window.chatwootConfig.fbApiVersion,status:!0}),window.fbSDKLoaded=!0,FB.AppEvents.logPageView()},async loadFBsdk(){return wS("https://connect.facebook.net/en_US/sdk.js",{id:"facebook-jssdk"})},async startLogin(){this.hasLoginStarted=!0;try{await this.loadFBsdk(),this.runFBInit(),this.tryFBlogin()}catch(t){t.name==="ScriptLoaderError"?Z(this.$t("INBOX_MGMT.DETAILS.ERROR_FB_LOADING")):(vd(t),Z(this.$t("INBOX_MGMT.DETAILS.ERROR_FB_AUTH")))}},tryFBlogin(){FB.login(t=>{t.status==="connected"?this.reauthorizeFBPage(t.authResponse.accessToken):t.status==="not_authorized"?Z(this.$t("INBOX_MGMT.DETAILS.ERROR_FB_AUTH")):Z(this.$t("INBOX_MGMT.DETAILS.ERROR_FB_AUTH"))},{scope:"pages_manage_metadata,business_management,pages_messaging,instagram_basic,pages_show_list,pages_read_engagement,instagram_manage_messages",auth_type:"reauthorize"})},async reauthorizeFBPage(t){try{await this.$store.dispatch("inboxes/reauthorizeFacebookPage",{omniauthToken:t,inboxId:this.inboxId}),Z(this.$t("INBOX_MGMT.FACEBOOK_REAUTHORIZE.MESSAGE_SUCCESS"))}catch{Z(this.$t("INBOX_MGMT.FACEBOOK_REAUTHORIZE.MESSAGE_ERROR"))}}}};function $ge(t,n,a,e,s,r){const o=H("InboxReconnectionRequired");return p(),L(o,{class:"mx-8 mt-5",onReauthorize:r.startLogin},null,8,["onReauthorize"])}const Gge=G(Uge,[["render",$ge],["__scopeId","data-v-a5051028"],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/facebook/Reauthorize.vue"]]),Vge={__name:"Reauthorize",setup(t,{expose:n}){n();const{t:a}=Q(),e=P(!1);async function s(){try{e.value=!0;const o=await $v.generateAuthorization(),{data:{url:i}}=o;window.location.href=i}catch{Z(a("INBOX_MGMT.ADD.INSTAGRAM.ERROR_AUTH"))}finally{e.value=!1}}const r={t:a,isRequestingAuthorization:e,requestAuthorization:s,ref:P,InboxReconnectionRequired:rp,get instagramClient(){return $v},get useI18n(){return Q},get useAlert(){return Z}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}};function Hge(t,n,a,e,s,r){return p(),L(e.InboxReconnectionRequired,{class:"mx-8 mt-5",onReauthorize:e.requestAuthorization})}const jge=G(Vge,[["render",Hge],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/channels/instagram/Reauthorize.vue"]]),Wge={__name:"DuplicateInboxBanner",props:{content:{type:String,default:""}},setup(t,{expose:n}){n();const a={Banner:op,Icon:Bt};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},zge={class:"flex items-center gap-2"};function Yge(t,n,a,e,s,r){return p(),L(e.Banner,{color:"amber"},{default:z(()=>[f("div",zge,[v(e.Icon,{icon:"i-lucide-info",class:"flex-shrink-0 size-4"}),f("span",null,C(a.content),1)])]),_:1})}const pM=G(Wge,[["render",Yge],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/channels/instagram/DuplicateInboxBanner.vue"]]),Kge={__name:"Reauthorize",props:{inbox:{type:Object,default:()=>({})}},setup(t,{expose:n}){n();const a=t,{t:e}=Q(),s=P(!1);async function r(){try{s.value=!0;const i=await Rm.generateAuthorization({email:a.inbox.email}),{data:{url:l}}=i;window.location.href=l}catch{Z(e("INBOX_MGMT.ADD.MICROSOFT.ERROR_MESSAGE"))}finally{s.value=!1}}const o={props:a,t:e,isRequestingAuthorization:s,requestAuthorization:r,ref:P,InboxReconnectionRequired:rp,get microsoftClient(){return Rm},get useI18n(){return Q},get useAlert(){return Z}};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}};function Xge(t,n,a,e,s,r){return p(),L(e.InboxReconnectionRequired,{class:"mx-8 mt-5",onReauthorize:e.requestAuthorization})}const qge=G(Kge,[["render",Xge],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/channels/microsoft/Reauthorize.vue"]]),Zge={__name:"Reauthorize",props:{inbox:{type:Object,default:()=>({})}},setup(t,{expose:n}){n();const a=t,{t:e}=Q(),s=P(!1),r=S(()=>a.inbox.imap_login&&a.inbox.imap_enabled?a.inbox.imap_login:a.inbox.email);async function o(){try{s.value=!0;const l=await wm.generateAuthorization({email:r.value}),{data:{url:c}}=l;window.location.href=c}catch{Z(e("INBOX_MGMT.ADD.GOOGLE.ERROR_MESSAGE"))}finally{s.value=!1}}const i={props:a,t:e,isRequestingAuthorization:s,inboxEmail:r,requestAuthorization:o,ref:P,computed:S,InboxReconnectionRequired:rp,get googleClient(){return wm},get useI18n(){return Q},get useAlert(){return Z}};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}};function Qge(t,n,a,e,s,r){return p(),L(e.InboxReconnectionRequired,{class:"mx-8 mt-5",onReauthorize:e.requestAuthorization})}const Jge=G(Zge,[["render",Qge],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/channels/google/Reauthorize.vue"]]),ebe={__name:"Reauthorize",props:{inbox:{type:Object,required:!0},whatsappRegistrationIncomplete:{type:Boolean,default:!1}},setup(t,{expose:n}){const a=t,{t:e}=Q(),s=P(!1),r=P(!0),o=S(()=>window.chatwootConfig.whatsappAppId),i=S(()=>window.chatwootConfig.whatsappConfigurationId),l=S(()=>a.whatsappRegistrationIncomplete?e("INBOX_MGMT.COMPLETE_REGISTRATION"):""),c=S(()=>a.whatsappRegistrationIncomplete?e("INBOX_MGMT.WHATSAPP_REGISTRATION_INCOMPLETE"):""),d=async y=>{s.value=!0;try{const b=await uT.reauthorizeWhatsApp({inboxId:a.inbox.id,...y});b.data.success?Z(e("INBOX.REAUTHORIZE.SUCCESS")):Z(b.data.message||e("INBOX.REAUTHORIZE.ERROR"))}catch(b){Z(b.message||e("INBOX.REAUTHORIZE.ERROR"))}finally{s.value=!1}},u=async(y,b)=>{if(!(!y||typeof y!="object"))if(y.event==="FINISH"){const A=y.data;Mm(A)&&A.phone_number_id?await d({code:b,business_id:A.business_id,waba_id:A.waba_id,phone_number_id:A.phone_number_id}):Z(e("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.INVALID_BUSINESS_DATA"))}else y.event==="CANCEL"?(s.value=!1,Z(e("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.CANCELLED"))):y.event==="error"&&(s.value=!1,Z(y.error_message||e("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.SIGNUP_ERROR")))},m=y=>{const b=Lm(A=>u(A,y));window.addEventListener("message",b)},h=async()=>{if(!o.value)throw new Error("WhatsApp App ID is required");if(!i.value)throw new Error("WhatsApp Configuration ID is required");try{const y=await Dm(i.value),b=a.inbox.provider_config;b&&b.business_account_id&&b.phone_number_id?await d({code:y,business_id:b.business_account_id,waba_id:b.business_account_id,phone_number_id:b.phone_number_id}):m(y)}catch(y){throw y.message==="Login cancelled"?Z(e("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.CANCELLED")):Z(y.message||e("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.AUTH_NOT_COMPLETED")),y}},_=async()=>{if(r.value){Z(e("INBOX.REAUTHORIZE.LOADING_FACEBOOK"));return}s.value=!0;try{await h()}catch(y){Z(y.message||e("INBOX.REAUTHORIZE.CONFIGURATION_ERROR"))}finally{(!window.FB||!window.FB.getLoginStatus)&&(s.value=!1)}};Pe(async()=>{var y;try{if(!o.value){Z(e("INBOX.REAUTHORIZE.WHATSAPP_APP_ID_MISSING"));return}if(!i.value){Z(e("INBOX.REAUTHORIZE.WHATSAPP_CONFIG_ID_MISSING"));return}await Pm(o.value,(y=window.chatwootConfig)==null?void 0:y.whatsappApiVersion)}catch{Z(e("INBOX.REAUTHORIZE.FACEBOOK_LOAD_ERROR"))}finally{r.value=!1}}),n({requestAuthorization:_});const E={props:a,t:e,isRequestingAuthorization:s,isLoadingFacebook:r,whatsappAppId:o,whatsappConfigurationId:i,actionLabel:l,description:c,reauthorizeWhatsApp:d,handleEmbeddedSignupEvents:u,startEmbeddedSignup:m,handleLoginAndReauthorize:h,requestAuthorization:_,ref:P,computed:S,onMounted:Pe,get useI18n(){return Q},get useAlert(){return Z},InboxReconnectionRequired:rp,get whatsappChannel(){return uT},get setupFacebookSdk(){return Pm},get initWhatsAppEmbeddedSignup(){return Dm},get createMessageHandler(){return Lm},get isValidBusinessData(){return Mm}};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}};function tbe(t,n,a,e,s,r){return p(),L(e.InboxReconnectionRequired,{class:"mx-8 mt-5","is-loading":e.isRequestingAuthorization,"action-label":e.actionLabel,description:e.description,onReauthorize:e.requestAuthorization},null,8,["is-loading","action-label","description"])}const fM=G(ebe,[["render",tbe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/channels/whatsapp/Reauthorize.vue"]]);class nbe extends Xs{constructor(){super("inboxes",{accountScoped:!0})}getHealthStatus(n){return axios.get(`${this.url}/${n}/health`)}}const abe=new nbe;var mM={exports:{}};/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function tC(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);n&&(e=e.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,e)}return a}function Ar(t){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?tC(Object(a),!0).forEach(function(e){sbe(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):tC(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function xf(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?xf=function(n){return typeof n}:xf=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},xf(t)}function sbe(t,n,a){return n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}function wo(){return wo=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(t[e]=a[e])}return t},wo.apply(this,arguments)}function obe(t,n){if(t==null)return{};var a={},e=Object.keys(t),s,r;for(r=0;r<e.length;r++)s=e[r],!(n.indexOf(s)>=0)&&(a[s]=t[s]);return a}function rbe(t,n){if(t==null)return{};var a=obe(t,n),e,s;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(s=0;s<r.length;s++)e=r[s],!(n.indexOf(e)>=0)&&Object.prototype.propertyIsEnumerable.call(t,e)&&(a[e]=t[e])}return a}function ibe(t){return lbe(t)||cbe(t)||dbe(t)||ube()}function lbe(t){if(Array.isArray(t))return Gv(t)}function cbe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function dbe(t,n){if(t){if(typeof t=="string")return Gv(t,n);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Gv(t,n)}}function Gv(t,n){(n==null||n>t.length)&&(n=t.length);for(var a=0,e=new Array(n);a<n;a++)e[a]=t[a];return e}function ube(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var pbe="1.14.0";function Wr(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var si=Wr(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ip=Wr(/Edge/i),nC=Wr(/firefox/i),_u=Wr(/safari/i)&&!Wr(/chrome/i)&&!Wr(/android/i),hM=Wr(/iP(ad|od|hone)/i),fbe=Wr(/chrome/i)&&Wr(/android/i),_M={capture:!1,passive:!1};function Sn(t,n,a){t.addEventListener(n,a,!si&&_M)}function hn(t,n,a){t.removeEventListener(n,a,!si&&_M)}function km(t,n){if(n){if(n[0]===">"&&(n=n.substring(1)),t)try{if(t.matches)return t.matches(n);if(t.msMatchesSelector)return t.msMatchesSelector(n);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(n)}catch{return!1}return!1}}function mbe(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Go(t,n,a,e){if(t){a=a||document;do{if(n!=null&&(n[0]===">"?t.parentNode===a&&km(t,n):km(t,n))||e&&t===a)return t;if(t===a)break}while(t=mbe(t))}return null}var aC=/\s+/g;function ba(t,n,a){if(t&&n)if(t.classList)t.classList[a?"add":"remove"](n);else{var e=(" "+t.className+" ").replace(aC," ").replace(" "+n+" "," ");t.className=(e+(a?" "+n:"")).replace(aC," ")}}function kt(t,n,a){var e=t&&t.style;if(e){if(a===void 0)return document.defaultView&&document.defaultView.getComputedStyle?a=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(a=t.currentStyle),n===void 0?a:a[n];!(n in e)&&n.indexOf("webkit")===-1&&(n="-webkit-"+n),e[n]=a+(typeof a=="string"?"":"px")}}function Ll(t,n){var a="";if(typeof t=="string")a=t;else do{var e=kt(t,"transform");e&&e!=="none"&&(a=e+" "+a)}while(!n&&(t=t.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(a)}function gM(t,n,a){if(t){var e=t.getElementsByTagName(n),s=0,r=e.length;if(a)for(;s<r;s++)a(e[s],s);return e}return[]}function _r(){var t=document.scrollingElement;return t||document.documentElement}function ma(t,n,a,e,s){if(!(!t.getBoundingClientRect&&t!==window)){var r,o,i,l,c,d,u;if(t!==window&&t.parentNode&&t!==_r()?(r=t.getBoundingClientRect(),o=r.top,i=r.left,l=r.bottom,c=r.right,d=r.height,u=r.width):(o=0,i=0,l=window.innerHeight,c=window.innerWidth,d=window.innerHeight,u=window.innerWidth),(n||a)&&t!==window&&(s=s||t.parentNode,!si))do if(s&&s.getBoundingClientRect&&(kt(s,"transform")!=="none"||a&&kt(s,"position")!=="static")){var m=s.getBoundingClientRect();o-=m.top+parseInt(kt(s,"border-top-width")),i-=m.left+parseInt(kt(s,"border-left-width")),l=o+r.height,c=i+r.width;break}while(s=s.parentNode);if(e&&t!==window){var h=Ll(s||t),_=h&&h.a,E=h&&h.d;h&&(o/=E,i/=_,u/=_,d/=E,l=o+d,c=i+u)}return{top:o,left:i,bottom:l,right:c,width:u,height:d}}}function sC(t,n,a){for(var e=Oi(t,!0),s=ma(t)[n];e;){var r=ma(e)[a],o=void 0;if(o=s>=r,!o)return e;if(e===_r())break;e=Oi(e,!1)}return!1}function ud(t,n,a,e){for(var s=0,r=0,o=t.children;r<o.length;){if(o[r].style.display!=="none"&&o[r]!==Wt.ghost&&(e||o[r]!==Wt.dragged)&&Go(o[r],a.draggable,t,!1)){if(s===n)return o[r];s++}r++}return null}function LS(t,n){for(var a=t.lastElementChild;a&&(a===Wt.ghost||kt(a,"display")==="none"||n&&!km(a,n));)a=a.previousElementSibling;return a||null}function Na(t,n){var a=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Wt.clone&&(!n||km(t,n))&&a++;return a}function oC(t){var n=0,a=0,e=_r();if(t)do{var s=Ll(t),r=s.a,o=s.d;n+=t.scrollLeft*r,a+=t.scrollTop*o}while(t!==e&&(t=t.parentNode));return[n,a]}function hbe(t,n){for(var a in t)if(t.hasOwnProperty(a)){for(var e in n)if(n.hasOwnProperty(e)&&n[e]===t[a][e])return Number(a)}return-1}function Oi(t,n){if(!t||!t.getBoundingClientRect)return _r();var a=t,e=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var s=kt(a);if(a.clientWidth<a.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||a.clientHeight<a.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!a.getBoundingClientRect||a===document.body)return _r();if(e||n)return a;e=!0}}while(a=a.parentNode);return _r()}function _be(t,n){if(t&&n)for(var a in n)n.hasOwnProperty(a)&&(t[a]=n[a]);return t}function Fg(t,n){return Math.round(t.top)===Math.round(n.top)&&Math.round(t.left)===Math.round(n.left)&&Math.round(t.height)===Math.round(n.height)&&Math.round(t.width)===Math.round(n.width)}var gu;function bM(t,n){return function(){if(!gu){var a=arguments,e=this;a.length===1?t.call(e,a[0]):t.apply(e,a),gu=setTimeout(function(){gu=void 0},n)}}}function gbe(){clearTimeout(gu),gu=void 0}function vM(t,n,a){t.scrollLeft+=n,t.scrollTop+=a}function DS(t){var n=window.Polymer,a=window.jQuery||window.Zepto;return n&&n.dom?n.dom(t).cloneNode(!0):a?a(t).clone(!0)[0]:t.cloneNode(!0)}function rC(t,n){kt(t,"position","absolute"),kt(t,"top",n.top),kt(t,"left",n.left),kt(t,"width",n.width),kt(t,"height",n.height)}function Ug(t){kt(t,"position",""),kt(t,"top",""),kt(t,"left",""),kt(t,"width",""),kt(t,"height","")}var gs="Sortable"+new Date().getTime();function bbe(){var t=[],n;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var e=[].slice.call(this.el.children);e.forEach(function(s){if(!(kt(s,"display")==="none"||s===Wt.ghost)){t.push({target:s,rect:ma(s)});var r=Ar({},t[t.length-1].rect);if(s.thisAnimationDuration){var o=Ll(s,!0);o&&(r.top-=o.f,r.left-=o.e)}s.fromRect=r}})}},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(hbe(t,{target:e}),1)},animateAll:function(e){var s=this;if(!this.options.animation){clearTimeout(n),typeof e=="function"&&e();return}var r=!1,o=0;t.forEach(function(i){var l=0,c=i.target,d=c.fromRect,u=ma(c),m=c.prevFromRect,h=c.prevToRect,_=i.rect,E=Ll(c,!0);E&&(u.top-=E.f,u.left-=E.e),c.toRect=u,c.thisAnimationDuration&&Fg(m,u)&&!Fg(d,u)&&(_.top-u.top)/(_.left-u.left)===(d.top-u.top)/(d.left-u.left)&&(l=Ebe(_,m,h,s.options)),Fg(u,d)||(c.prevFromRect=d,c.prevToRect=u,l||(l=s.options.animation),s.animate(c,_,u,l)),l&&(r=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(n),r?n=setTimeout(function(){typeof e=="function"&&e()},o):typeof e=="function"&&e(),t=[]},animate:function(e,s,r,o){if(o){kt(e,"transition",""),kt(e,"transform","");var i=Ll(this.el),l=i&&i.a,c=i&&i.d,d=(s.left-r.left)/(l||1),u=(s.top-r.top)/(c||1);e.animatingX=!!d,e.animatingY=!!u,kt(e,"transform","translate3d("+d+"px,"+u+"px,0)"),this.forRepaintDummy=vbe(e),kt(e,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),kt(e,"transform","translate3d(0,0,0)"),typeof e.animated=="number"&&clearTimeout(e.animated),e.animated=setTimeout(function(){kt(e,"transition",""),kt(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1},o)}}}}function vbe(t){return t.offsetWidth}function Ebe(t,n,a,e){return Math.sqrt(Math.pow(n.top-t.top,2)+Math.pow(n.left-t.left,2))/Math.sqrt(Math.pow(n.top-a.top,2)+Math.pow(n.left-a.left,2))*e.animation}var lc=[],$g={initializeByDefault:!0},lp={mount:function(n){for(var a in $g)$g.hasOwnProperty(a)&&!(a in n)&&(n[a]=$g[a]);lc.forEach(function(e){if(e.pluginName===n.pluginName)throw"Sortable: Cannot mount plugin ".concat(n.pluginName," more than once")}),lc.push(n)},pluginEvent:function(n,a,e){var s=this;this.eventCanceled=!1,e.cancel=function(){s.eventCanceled=!0};var r=n+"Global";lc.forEach(function(o){a[o.pluginName]&&(a[o.pluginName][r]&&a[o.pluginName][r](Ar({sortable:a},e)),a.options[o.pluginName]&&a[o.pluginName][n]&&a[o.pluginName][n](Ar({sortable:a},e)))})},initializePlugins:function(n,a,e,s){lc.forEach(function(i){var l=i.pluginName;if(!(!n.options[l]&&!i.initializeByDefault)){var c=new i(n,a,n.options);c.sortable=n,c.options=n.options,n[l]=c,wo(e,c.defaults)}});for(var r in n.options)if(n.options.hasOwnProperty(r)){var o=this.modifyOption(n,r,n.options[r]);typeof o<"u"&&(n.options[r]=o)}},getEventProperties:function(n,a){var e={};return lc.forEach(function(s){typeof s.eventProperties=="function"&&wo(e,s.eventProperties.call(a[s.pluginName],n))}),e},modifyOption:function(n,a,e){var s;return lc.forEach(function(r){n[r.pluginName]&&r.optionListeners&&typeof r.optionListeners[a]=="function"&&(s=r.optionListeners[a].call(n[r.pluginName],e))}),s}};function eu(t){var n=t.sortable,a=t.rootEl,e=t.name,s=t.targetEl,r=t.cloneEl,o=t.toEl,i=t.fromEl,l=t.oldIndex,c=t.newIndex,d=t.oldDraggableIndex,u=t.newDraggableIndex,m=t.originalEvent,h=t.putSortable,_=t.extraEventProperties;if(n=n||a&&a[gs],!!n){var E,y=n.options,b="on"+e.charAt(0).toUpperCase()+e.substr(1);window.CustomEvent&&!si&&!ip?E=new CustomEvent(e,{bubbles:!0,cancelable:!0}):(E=document.createEvent("Event"),E.initEvent(e,!0,!0)),E.to=o||a,E.from=i||a,E.item=s||a,E.clone=r,E.oldIndex=l,E.newIndex=c,E.oldDraggableIndex=d,E.newDraggableIndex=u,E.originalEvent=m,E.pullMode=h?h.lastPutMode:void 0;var A=Ar(Ar({},_),lp.getEventProperties(e,n));for(var T in A)E[T]=A[T];a&&a.dispatchEvent(E),y[b]&&y[b].call(n,E)}}var Sbe=["evt"],Us=function(n,a){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=e.evt,r=rbe(e,Sbe);lp.pluginEvent.bind(Wt)(n,a,Ar({dragEl:bt,parentEl:Ia,ghostEl:ln,rootEl:fa,nextEl:vl,lastDownEl:Rf,cloneEl:Ca,cloneHidden:yi,dragStarted:tu,putSortable:as,activeSortable:Wt.active,originalEvent:s,oldIndex:Lc,oldDraggableIndex:bu,newIndex:Qs,newDraggableIndex:Ai,hideGhostForTarget:AM,unhideGhostForTarget:yM,cloneNowHidden:function(){yi=!0},cloneNowShown:function(){yi=!1},dispatchSortableEvent:function(i){ys({sortable:a,name:i,originalEvent:s})}},r))};function ys(t){eu(Ar({putSortable:as,cloneEl:Ca,targetEl:bt,rootEl:fa,oldIndex:Lc,oldDraggableIndex:bu,newIndex:Qs,newDraggableIndex:Ai},t))}var bt,Ia,ln,fa,vl,Rf,Ca,yi,Lc,Qs,bu,Ai,Vp,as,Ec=!1,Bm=!1,Fm=[],dl,ko,Gg,Vg,iC,lC,tu,cc,vu,Eu=!1,Hp=!1,wf,ps,Hg=[],Vv=!1,Um=[],Bh=typeof document<"u",jp=hM,cC=ip||si?"cssFloat":"float",Tbe=Bh&&!fbe&&!hM&&"draggable"in document.createElement("div"),EM=function(){if(Bh){if(si)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),SM=function(n,a){var e=kt(n),s=parseInt(e.width)-parseInt(e.paddingLeft)-parseInt(e.paddingRight)-parseInt(e.borderLeftWidth)-parseInt(e.borderRightWidth),r=ud(n,0,a),o=ud(n,1,a),i=r&&kt(r),l=o&&kt(o),c=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+ma(r).width,d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+ma(o).width;if(e.display==="flex")return e.flexDirection==="column"||e.flexDirection==="column-reverse"?"vertical":"horizontal";if(e.display==="grid")return e.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&i.float&&i.float!=="none"){var u=i.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===u)?"vertical":"horizontal"}return r&&(i.display==="block"||i.display==="flex"||i.display==="table"||i.display==="grid"||c>=s&&e[cC]==="none"||o&&e[cC]==="none"&&c+d>s)?"vertical":"horizontal"},Abe=function(n,a,e){var s=e?n.left:n.top,r=e?n.right:n.bottom,o=e?n.width:n.height,i=e?a.left:a.top,l=e?a.right:a.bottom,c=e?a.width:a.height;return s===i||r===l||s+o/2===i+c/2},ybe=function(n,a){var e;return Fm.some(function(s){var r=s[gs].options.emptyInsertThreshold;if(!(!r||LS(s))){var o=ma(s),i=n>=o.left-r&&n<=o.right+r,l=a>=o.top-r&&a<=o.bottom+r;if(i&&l)return e=s}}),e},TM=function(n){function a(r,o){return function(i,l,c,d){var u=i.options.group.name&&l.options.group.name&&i.options.group.name===l.options.group.name;if(r==null&&(o||u))return!0;if(r==null||r===!1)return!1;if(o&&r==="clone")return r;if(typeof r=="function")return a(r(i,l,c,d),o)(i,l,c,d);var m=(o?i:l).options.group.name;return r===!0||typeof r=="string"&&r===m||r.join&&r.indexOf(m)>-1}}var e={},s=n.group;(!s||xf(s)!="object")&&(s={name:s}),e.name=s.name,e.checkPull=a(s.pull,!0),e.checkPut=a(s.put),e.revertClone=s.revertClone,n.group=e},AM=function(){!EM&&ln&&kt(ln,"display","none")},yM=function(){!EM&&ln&&kt(ln,"display","")};Bh&&document.addEventListener("click",function(t){if(Bm)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Bm=!1,!1},!0);var ul=function(n){if(bt){n=n.touches?n.touches[0]:n;var a=ybe(n.clientX,n.clientY);if(a){var e={};for(var s in n)n.hasOwnProperty(s)&&(e[s]=n[s]);e.target=e.rootEl=a,e.preventDefault=void 0,e.stopPropagation=void 0,a[gs]._onDragOver(e)}}},Ibe=function(n){bt&&bt.parentNode[gs]._isOutsideThisEl(n.target)};function Wt(t,n){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=n=wo({},n),t[gs]=this;var a={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return SM(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,i){o.setData("Text",i.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Wt.supportPointer!==!1&&"PointerEvent"in window&&!_u,emptyInsertThreshold:5};lp.initializePlugins(this,t,a);for(var e in a)!(e in n)&&(n[e]=a[e]);TM(n);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=n.forceFallback?!1:Tbe,this.nativeDraggable&&(this.options.touchStartThreshold=1),n.supportPointer?Sn(t,"pointerdown",this._onTapStart):(Sn(t,"mousedown",this._onTapStart),Sn(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Sn(t,"dragover",this),Sn(t,"dragenter",this)),Fm.push(this.el),n.store&&n.store.get&&this.sort(n.store.get(this)||[]),wo(this,bbe())}Wt.prototype={constructor:Wt,_isOutsideThisEl:function(n){!this.el.contains(n)&&n!==this.el&&(cc=null)},_getDirection:function(n,a){return typeof this.options.direction=="function"?this.options.direction.call(this,n,a,bt):this.options.direction},_onTapStart:function(n){if(n.cancelable){var a=this,e=this.el,s=this.options,r=s.preventOnFilter,o=n.type,i=n.touches&&n.touches[0]||n.pointerType&&n.pointerType==="touch"&&n,l=(i||n).target,c=n.target.shadowRoot&&(n.path&&n.path[0]||n.composedPath&&n.composedPath()[0])||l,d=s.filter;if(Lbe(e),!bt&&!(/mousedown|pointerdown/.test(o)&&n.button!==0||s.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&_u&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Go(l,s.draggable,e,!1),!(l&&l.animated)&&Rf!==l)){if(Lc=Na(l),bu=Na(l,s.draggable),typeof d=="function"){if(d.call(this,n,l,this)){ys({sortable:a,rootEl:c,name:"filter",targetEl:l,toEl:e,fromEl:e}),Us("filter",a,{evt:n}),r&&n.cancelable&&n.preventDefault();return}}else if(d&&(d=d.split(",").some(function(u){if(u=Go(c,u.trim(),e,!1),u)return ys({sortable:a,rootEl:u,name:"filter",targetEl:l,fromEl:e,toEl:e}),Us("filter",a,{evt:n}),!0}),d)){r&&n.cancelable&&n.preventDefault();return}s.handle&&!Go(c,s.handle,e,!1)||this._prepareDragStart(n,i,l)}}},_prepareDragStart:function(n,a,e){var s=this,r=s.el,o=s.options,i=r.ownerDocument,l;if(e&&!bt&&e.parentNode===r){var c=ma(e);if(fa=r,bt=e,Ia=bt.parentNode,vl=bt.nextSibling,Rf=e,Vp=o.group,Wt.dragged=bt,dl={target:bt,clientX:(a||n).clientX,clientY:(a||n).clientY},iC=dl.clientX-c.left,lC=dl.clientY-c.top,this._lastX=(a||n).clientX,this._lastY=(a||n).clientY,bt.style["will-change"]="all",l=function(){if(Us("delayEnded",s,{evt:n}),Wt.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!nC&&s.nativeDraggable&&(bt.draggable=!0),s._triggerDragStart(n,a),ys({sortable:s,name:"choose",originalEvent:n}),ba(bt,o.chosenClass,!0)},o.ignore.split(",").forEach(function(d){gM(bt,d.trim(),jg)}),Sn(i,"dragover",ul),Sn(i,"mousemove",ul),Sn(i,"touchmove",ul),Sn(i,"mouseup",s._onDrop),Sn(i,"touchend",s._onDrop),Sn(i,"touchcancel",s._onDrop),nC&&this.nativeDraggable&&(this.options.touchStartThreshold=4,bt.draggable=!0),Us("delayStart",this,{evt:n}),o.delay&&(!o.delayOnTouchOnly||a)&&(!this.nativeDraggable||!(ip||si))){if(Wt.eventCanceled){this._onDrop();return}Sn(i,"mouseup",s._disableDelayedDrag),Sn(i,"touchend",s._disableDelayedDrag),Sn(i,"touchcancel",s._disableDelayedDrag),Sn(i,"mousemove",s._delayedDragTouchMoveHandler),Sn(i,"touchmove",s._delayedDragTouchMoveHandler),o.supportPointer&&Sn(i,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(n){var a=n.touches?n.touches[0]:n;Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){bt&&jg(bt),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var n=this.el.ownerDocument;hn(n,"mouseup",this._disableDelayedDrag),hn(n,"touchend",this._disableDelayedDrag),hn(n,"touchcancel",this._disableDelayedDrag),hn(n,"mousemove",this._delayedDragTouchMoveHandler),hn(n,"touchmove",this._delayedDragTouchMoveHandler),hn(n,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(n,a){a=a||n.pointerType=="touch"&&n,!this.nativeDraggable||a?this.options.supportPointer?Sn(document,"pointermove",this._onTouchMove):a?Sn(document,"touchmove",this._onTouchMove):Sn(document,"mousemove",this._onTouchMove):(Sn(bt,"dragend",this),Sn(fa,"dragstart",this._onDragStart));try{document.selection?Mf(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(n,a){if(Ec=!1,fa&&bt){Us("dragStarted",this,{evt:a}),this.nativeDraggable&&Sn(document,"dragover",Ibe);var e=this.options;!n&&ba(bt,e.dragClass,!1),ba(bt,e.ghostClass,!0),Wt.active=this,n&&this._appendGhost(),ys({sortable:this,name:"start",originalEvent:a})}else this._nulling()},_emulateDragOver:function(){if(ko){this._lastX=ko.clientX,this._lastY=ko.clientY,AM();for(var n=document.elementFromPoint(ko.clientX,ko.clientY),a=n;n&&n.shadowRoot&&(n=n.shadowRoot.elementFromPoint(ko.clientX,ko.clientY),n!==a);)a=n;if(bt.parentNode[gs]._isOutsideThisEl(n),a)do{if(a[gs]){var e=void 0;if(e=a[gs]._onDragOver({clientX:ko.clientX,clientY:ko.clientY,target:n,rootEl:a}),e&&!this.options.dragoverBubble)break}n=a}while(a=a.parentNode);yM()}},_onTouchMove:function(n){if(dl){var a=this.options,e=a.fallbackTolerance,s=a.fallbackOffset,r=n.touches?n.touches[0]:n,o=ln&&Ll(ln,!0),i=ln&&o&&o.a,l=ln&&o&&o.d,c=jp&&ps&&oC(ps),d=(r.clientX-dl.clientX+s.x)/(i||1)+(c?c[0]-Hg[0]:0)/(i||1),u=(r.clientY-dl.clientY+s.y)/(l||1)+(c?c[1]-Hg[1]:0)/(l||1);if(!Wt.active&&!Ec){if(e&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<e)return;this._onDragStart(n,!0)}if(ln){o?(o.e+=d-(Gg||0),o.f+=u-(Vg||0)):o={a:1,b:0,c:0,d:1,e:d,f:u};var m="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");kt(ln,"webkitTransform",m),kt(ln,"mozTransform",m),kt(ln,"msTransform",m),kt(ln,"transform",m),Gg=d,Vg=u,ko=r}n.cancelable&&n.preventDefault()}},_appendGhost:function(){if(!ln){var n=this.options.fallbackOnBody?document.body:fa,a=ma(bt,!0,jp,!0,n),e=this.options;if(jp){for(ps=n;kt(ps,"position")==="static"&&kt(ps,"transform")==="none"&&ps!==document;)ps=ps.parentNode;ps!==document.body&&ps!==document.documentElement?(ps===document&&(ps=_r()),a.top+=ps.scrollTop,a.left+=ps.scrollLeft):ps=_r(),Hg=oC(ps)}ln=bt.cloneNode(!0),ba(ln,e.ghostClass,!1),ba(ln,e.fallbackClass,!0),ba(ln,e.dragClass,!0),kt(ln,"transition",""),kt(ln,"transform",""),kt(ln,"box-sizing","border-box"),kt(ln,"margin",0),kt(ln,"top",a.top),kt(ln,"left",a.left),kt(ln,"width",a.width),kt(ln,"height",a.height),kt(ln,"opacity","0.8"),kt(ln,"position",jp?"absolute":"fixed"),kt(ln,"zIndex","100000"),kt(ln,"pointerEvents","none"),Wt.ghost=ln,n.appendChild(ln),kt(ln,"transform-origin",iC/parseInt(ln.style.width)*100+"% "+lC/parseInt(ln.style.height)*100+"%")}},_onDragStart:function(n,a){var e=this,s=n.dataTransfer,r=e.options;if(Us("dragStart",this,{evt:n}),Wt.eventCanceled){this._onDrop();return}Us("setupClone",this),Wt.eventCanceled||(Ca=DS(bt),Ca.draggable=!1,Ca.style["will-change"]="",this._hideClone(),ba(Ca,this.options.chosenClass,!1),Wt.clone=Ca),e.cloneId=Mf(function(){Us("clone",e),!Wt.eventCanceled&&(e.options.removeCloneOnHide||fa.insertBefore(Ca,bt),e._hideClone(),ys({sortable:e,name:"clone"}))}),!a&&ba(bt,r.dragClass,!0),a?(Bm=!0,e._loopId=setInterval(e._emulateDragOver,50)):(hn(document,"mouseup",e._onDrop),hn(document,"touchend",e._onDrop),hn(document,"touchcancel",e._onDrop),s&&(s.effectAllowed="move",r.setData&&r.setData.call(e,s,bt)),Sn(document,"drop",e),kt(bt,"transform","translateZ(0)")),Ec=!0,e._dragStartId=Mf(e._dragStarted.bind(e,a,n)),Sn(document,"selectstart",e),tu=!0,_u&&kt(document.body,"user-select","none")},_onDragOver:function(n){var a=this.el,e=n.target,s,r,o,i=this.options,l=i.group,c=Wt.active,d=Vp===l,u=i.sort,m=as||c,h,_=this,E=!1;if(Vv)return;function y(U,J){Us(U,_,Ar({evt:n,isOwner:d,axis:h?"vertical":"horizontal",revert:o,dragRect:s,targetRect:r,canSort:u,fromSortable:m,target:e,completed:A,onMove:function(q,K){return Wp(fa,a,bt,s,q,ma(q),n,K)},changed:T},J))}function b(){y("dragOverAnimationCapture"),_.captureAnimationState(),_!==m&&m.captureAnimationState()}function A(U){return y("dragOverCompleted",{insertion:U}),U&&(d?c._hideClone():c._showClone(_),_!==m&&(ba(bt,as?as.options.ghostClass:c.options.ghostClass,!1),ba(bt,i.ghostClass,!0)),as!==_&&_!==Wt.active?as=_:_===Wt.active&&as&&(as=null),m===_&&(_._ignoreWhileAnimating=e),_.animateAll(function(){y("dragOverAnimationComplete"),_._ignoreWhileAnimating=null}),_!==m&&(m.animateAll(),m._ignoreWhileAnimating=null)),(e===bt&&!bt.animated||e===a&&!e.animated)&&(cc=null),!i.dragoverBubble&&!n.rootEl&&e!==document&&(bt.parentNode[gs]._isOutsideThisEl(n.target),!U&&ul(n)),!i.dragoverBubble&&n.stopPropagation&&n.stopPropagation(),E=!0}function T(){Qs=Na(bt),Ai=Na(bt,i.draggable),ys({sortable:_,name:"change",toEl:a,newIndex:Qs,newDraggableIndex:Ai,originalEvent:n})}if(n.preventDefault!==void 0&&n.cancelable&&n.preventDefault(),e=Go(e,i.draggable,a,!0),y("dragOver"),Wt.eventCanceled)return E;if(bt.contains(n.target)||e.animated&&e.animatingX&&e.animatingY||_._ignoreWhileAnimating===e)return A(!1);if(Bm=!1,c&&!i.disabled&&(d?u||(o=Ia!==fa):as===this||(this.lastPutMode=Vp.checkPull(this,c,bt,n))&&l.checkPut(this,c,bt,n))){if(h=this._getDirection(n,e)==="vertical",s=ma(bt),y("dragOverValid"),Wt.eventCanceled)return E;if(o)return Ia=fa,b(),this._hideClone(),y("revert"),Wt.eventCanceled||(vl?fa.insertBefore(bt,vl):fa.appendChild(bt)),A(!0);var I=LS(a,i.draggable);if(!I||xbe(n,h,this)&&!I.animated){if(I===bt)return A(!1);if(I&&a===n.target&&(e=I),e&&(r=ma(e)),Wp(fa,a,bt,s,e,r,n,!!e)!==!1)return b(),a.appendChild(bt),Ia=a,T(),A(!0)}else if(I&&Nbe(n,h,this)){var N=ud(a,0,i,!0);if(N===bt)return A(!1);if(e=N,r=ma(e),Wp(fa,a,bt,s,e,r,n,!1)!==!1)return b(),a.insertBefore(bt,N),Ia=a,T(),A(!0)}else if(e.parentNode===a){r=ma(e);var x=0,R,M=bt.parentNode!==a,w=!Abe(bt.animated&&bt.toRect||s,e.animated&&e.toRect||r,h),D=h?"top":"left",B=sC(e,"top","top")||sC(bt,"top","top"),k=B?B.scrollTop:void 0;cc!==e&&(R=r[D],Eu=!1,Hp=!w&&i.invertSwap||M),x=Rbe(n,e,r,h,w?1:i.swapThreshold,i.invertedSwapThreshold==null?i.swapThreshold:i.invertedSwapThreshold,Hp,cc===e);var V;if(x!==0){var F=Na(bt);do F-=x,V=Ia.children[F];while(V&&(kt(V,"display")==="none"||V===ln))}if(x===0||V===e)return A(!1);cc=e,vu=x;var $=e.nextElementSibling,Y=!1;Y=x===1;var j=Wp(fa,a,bt,s,e,r,n,Y);if(j!==!1)return(j===1||j===-1)&&(Y=j===1),Vv=!0,setTimeout(Obe,30),b(),Y&&!$?a.appendChild(bt):e.parentNode.insertBefore(bt,Y?$:e),B&&vM(B,0,k-B.scrollTop),Ia=bt.parentNode,R!==void 0&&!Hp&&(wf=Math.abs(R-ma(e)[D])),T(),A(!0)}if(a.contains(bt))return A(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){hn(document,"mousemove",this._onTouchMove),hn(document,"touchmove",this._onTouchMove),hn(document,"pointermove",this._onTouchMove),hn(document,"dragover",ul),hn(document,"mousemove",ul),hn(document,"touchmove",ul)},_offUpEvents:function(){var n=this.el.ownerDocument;hn(n,"mouseup",this._onDrop),hn(n,"touchend",this._onDrop),hn(n,"pointerup",this._onDrop),hn(n,"touchcancel",this._onDrop),hn(document,"selectstart",this)},_onDrop:function(n){var a=this.el,e=this.options;if(Qs=Na(bt),Ai=Na(bt,e.draggable),Us("drop",this,{evt:n}),Ia=bt&&bt.parentNode,Qs=Na(bt),Ai=Na(bt,e.draggable),Wt.eventCanceled){this._nulling();return}Ec=!1,Hp=!1,Eu=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Hv(this.cloneId),Hv(this._dragStartId),this.nativeDraggable&&(hn(document,"drop",this),hn(a,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),_u&&kt(document.body,"user-select",""),kt(bt,"transform",""),n&&(tu&&(n.cancelable&&n.preventDefault(),!e.dropBubble&&n.stopPropagation()),ln&&ln.parentNode&&ln.parentNode.removeChild(ln),(fa===Ia||as&&as.lastPutMode!=="clone")&&Ca&&Ca.parentNode&&Ca.parentNode.removeChild(Ca),bt&&(this.nativeDraggable&&hn(bt,"dragend",this),jg(bt),bt.style["will-change"]="",tu&&!Ec&&ba(bt,as?as.options.ghostClass:this.options.ghostClass,!1),ba(bt,this.options.chosenClass,!1),ys({sortable:this,name:"unchoose",toEl:Ia,newIndex:null,newDraggableIndex:null,originalEvent:n}),fa!==Ia?(Qs>=0&&(ys({rootEl:Ia,name:"add",toEl:Ia,fromEl:fa,originalEvent:n}),ys({sortable:this,name:"remove",toEl:Ia,originalEvent:n}),ys({rootEl:Ia,name:"sort",toEl:Ia,fromEl:fa,originalEvent:n}),ys({sortable:this,name:"sort",toEl:Ia,originalEvent:n})),as&&as.save()):Qs!==Lc&&Qs>=0&&(ys({sortable:this,name:"update",toEl:Ia,originalEvent:n}),ys({sortable:this,name:"sort",toEl:Ia,originalEvent:n})),Wt.active&&((Qs==null||Qs===-1)&&(Qs=Lc,Ai=bu),ys({sortable:this,name:"end",toEl:Ia,originalEvent:n}),this.save()))),this._nulling()},_nulling:function(){Us("nulling",this),fa=bt=Ia=ln=vl=Ca=Rf=yi=dl=ko=tu=Qs=Ai=Lc=bu=cc=vu=as=Vp=Wt.dragged=Wt.ghost=Wt.clone=Wt.active=null,Um.forEach(function(n){n.checked=!0}),Um.length=Gg=Vg=0},handleEvent:function(n){switch(n.type){case"drop":case"dragend":this._onDrop(n);break;case"dragenter":case"dragover":bt&&(this._onDragOver(n),Cbe(n));break;case"selectstart":n.preventDefault();break}},toArray:function(){for(var n=[],a,e=this.el.children,s=0,r=e.length,o=this.options;s<r;s++)a=e[s],Go(a,o.draggable,this.el,!1)&&n.push(a.getAttribute(o.dataIdAttr)||Mbe(a));return n},sort:function(n,a){var e={},s=this.el;this.toArray().forEach(function(r,o){var i=s.children[o];Go(i,this.options.draggable,s,!1)&&(e[r]=i)},this),a&&this.captureAnimationState(),n.forEach(function(r){e[r]&&(s.removeChild(e[r]),s.appendChild(e[r]))}),a&&this.animateAll()},save:function(){var n=this.options.store;n&&n.set&&n.set(this)},closest:function(n,a){return Go(n,a||this.options.draggable,this.el,!1)},option:function(n,a){var e=this.options;if(a===void 0)return e[n];var s=lp.modifyOption(this,n,a);typeof s<"u"?e[n]=s:e[n]=a,n==="group"&&TM(e)},destroy:function(){Us("destroy",this);var n=this.el;n[gs]=null,hn(n,"mousedown",this._onTapStart),hn(n,"touchstart",this._onTapStart),hn(n,"pointerdown",this._onTapStart),this.nativeDraggable&&(hn(n,"dragover",this),hn(n,"dragenter",this)),Array.prototype.forEach.call(n.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Fm.splice(Fm.indexOf(this.el),1),this.el=n=null},_hideClone:function(){if(!yi){if(Us("hideClone",this),Wt.eventCanceled)return;kt(Ca,"display","none"),this.options.removeCloneOnHide&&Ca.parentNode&&Ca.parentNode.removeChild(Ca),yi=!0}},_showClone:function(n){if(n.lastPutMode!=="clone"){this._hideClone();return}if(yi){if(Us("showClone",this),Wt.eventCanceled)return;bt.parentNode==fa&&!this.options.group.revertClone?fa.insertBefore(Ca,bt):vl?fa.insertBefore(Ca,vl):fa.appendChild(Ca),this.options.group.revertClone&&this.animate(bt,Ca),kt(Ca,"display",""),yi=!1}}};function Cbe(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Wp(t,n,a,e,s,r,o,i){var l,c=t[gs],d=c.options.onMove,u;return window.CustomEvent&&!si&&!ip?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=n,l.from=t,l.dragged=a,l.draggedRect=e,l.related=s||n,l.relatedRect=r||ma(n),l.willInsertAfter=i,l.originalEvent=o,t.dispatchEvent(l),d&&(u=d.call(c,l,o)),u}function jg(t){t.draggable=!1}function Obe(){Vv=!1}function Nbe(t,n,a){var e=ma(ud(a.el,0,a.options,!0)),s=10;return n?t.clientX<e.left-s||t.clientY<e.top&&t.clientX<e.right:t.clientY<e.top-s||t.clientY<e.bottom&&t.clientX<e.left}function xbe(t,n,a){var e=ma(LS(a.el,a.options.draggable)),s=10;return n?t.clientX>e.right+s||t.clientX<=e.right&&t.clientY>e.bottom&&t.clientX>=e.left:t.clientX>e.right&&t.clientY>e.top||t.clientX<=e.right&&t.clientY>e.bottom+s}function Rbe(t,n,a,e,s,r,o,i){var l=e?t.clientY:t.clientX,c=e?a.height:a.width,d=e?a.top:a.left,u=e?a.bottom:a.right,m=!1;if(!o){if(i&&wf<c*s){if(!Eu&&(vu===1?l>d+c*r/2:l<u-c*r/2)&&(Eu=!0),Eu)m=!0;else if(vu===1?l<d+wf:l>u-wf)return-vu}else if(l>d+c*(1-s)/2&&l<u-c*(1-s)/2)return wbe(n)}return m=m||o,m&&(l<d+c*r/2||l>u-c*r/2)?l>d+c/2?1:-1:0}function wbe(t){return Na(bt)<Na(t)?1:-1}function Mbe(t){for(var n=t.tagName+t.className+t.src+t.href+t.textContent,a=n.length,e=0;a--;)e+=n.charCodeAt(a);return e.toString(36)}function Lbe(t){Um.length=0;for(var n=t.getElementsByTagName("input"),a=n.length;a--;){var e=n[a];e.checked&&Um.push(e)}}function Mf(t){return setTimeout(t,0)}function Hv(t){return clearTimeout(t)}Bh&&Sn(document,"touchmove",function(t){(Wt.active||Ec)&&t.cancelable&&t.preventDefault()});Wt.utils={on:Sn,off:hn,css:kt,find:gM,is:function(n,a){return!!Go(n,a,n,!1)},extend:_be,throttle:bM,closest:Go,toggleClass:ba,clone:DS,index:Na,nextTick:Mf,cancelNextTick:Hv,detectDirection:SM,getChild:ud};Wt.get=function(t){return t[gs]};Wt.mount=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];n[0].constructor===Array&&(n=n[0]),n.forEach(function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Wt.utils=Ar(Ar({},Wt.utils),e.utils)),lp.mount(e)})};Wt.create=function(t,n){return new Wt(t,n)};Wt.version=pbe;var Ba=[],nu,jv,Wv=!1,Wg,zg,$m,au;function Dbe(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this))}return t.prototype={dragStarted:function(a){var e=a.originalEvent;this.sortable.nativeDraggable?Sn(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Sn(document,"pointermove",this._handleFallbackAutoScroll):e.touches?Sn(document,"touchmove",this._handleFallbackAutoScroll):Sn(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(a){var e=a.originalEvent;!this.options.dragOverBubble&&!e.rootEl&&this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?hn(document,"dragover",this._handleAutoScroll):(hn(document,"pointermove",this._handleFallbackAutoScroll),hn(document,"touchmove",this._handleFallbackAutoScroll),hn(document,"mousemove",this._handleFallbackAutoScroll)),dC(),Lf(),gbe()},nulling:function(){$m=jv=nu=Wv=au=Wg=zg=null,Ba.length=0},_handleFallbackAutoScroll:function(a){this._handleAutoScroll(a,!0)},_handleAutoScroll:function(a,e){var s=this,r=(a.touches?a.touches[0]:a).clientX,o=(a.touches?a.touches[0]:a).clientY,i=document.elementFromPoint(r,o);if($m=a,e||this.options.forceAutoScrollFallback||ip||si||_u){Yg(a,this.options,i,e);var l=Oi(i,!0);Wv&&(!au||r!==Wg||o!==zg)&&(au&&dC(),au=setInterval(function(){var c=Oi(document.elementFromPoint(r,o),!0);c!==l&&(l=c,Lf()),Yg(a,s.options,c,e)},10),Wg=r,zg=o)}else{if(!this.options.bubbleScroll||Oi(i,!0)===_r()){Lf();return}Yg(a,this.options,Oi(i,!1),!1)}}},wo(t,{pluginName:"scroll",initializeByDefault:!0})}function Lf(){Ba.forEach(function(t){clearInterval(t.pid)}),Ba=[]}function dC(){clearInterval(au)}var Yg=bM(function(t,n,a,e){if(n.scroll){var s=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,o=n.scrollSensitivity,i=n.scrollSpeed,l=_r(),c=!1,d;jv!==a&&(jv=a,Lf(),nu=n.scroll,d=n.scrollFn,nu===!0&&(nu=Oi(a,!0)));var u=0,m=nu;do{var h=m,_=ma(h),E=_.top,y=_.bottom,b=_.left,A=_.right,T=_.width,I=_.height,N=void 0,x=void 0,R=h.scrollWidth,M=h.scrollHeight,w=kt(h),D=h.scrollLeft,B=h.scrollTop;h===l?(N=T<R&&(w.overflowX==="auto"||w.overflowX==="scroll"||w.overflowX==="visible"),x=I<M&&(w.overflowY==="auto"||w.overflowY==="scroll"||w.overflowY==="visible")):(N=T<R&&(w.overflowX==="auto"||w.overflowX==="scroll"),x=I<M&&(w.overflowY==="auto"||w.overflowY==="scroll"));var k=N&&(Math.abs(A-s)<=o&&D+T<R)-(Math.abs(b-s)<=o&&!!D),V=x&&(Math.abs(y-r)<=o&&B+I<M)-(Math.abs(E-r)<=o&&!!B);if(!Ba[u])for(var F=0;F<=u;F++)Ba[F]||(Ba[F]={});(Ba[u].vx!=k||Ba[u].vy!=V||Ba[u].el!==h)&&(Ba[u].el=h,Ba[u].vx=k,Ba[u].vy=V,clearInterval(Ba[u].pid),(k!=0||V!=0)&&(c=!0,Ba[u].pid=setInterval((function(){e&&this.layer===0&&Wt.active._onTouchMove($m);var $=Ba[this.layer].vy?Ba[this.layer].vy*i:0,Y=Ba[this.layer].vx?Ba[this.layer].vx*i:0;typeof d=="function"&&d.call(Wt.dragged.parentNode[gs],Y,$,t,$m,Ba[this.layer].el)!=="continue"||vM(Ba[this.layer].el,Y,$)}).bind({layer:u}),24))),u++}while(n.bubbleScroll&&m!==l&&(m=Oi(m,!1)));Wv=c}},30),IM=function(n){var a=n.originalEvent,e=n.putSortable,s=n.dragEl,r=n.activeSortable,o=n.dispatchSortableEvent,i=n.hideGhostForTarget,l=n.unhideGhostForTarget;if(a){var c=e||r;i();var d=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:a,u=document.elementFromPoint(d.clientX,d.clientY);l(),c&&!c.el.contains(u)&&(o("spill"),this.onSpill({dragEl:s,putSortable:e}))}};function PS(){}PS.prototype={startIndex:null,dragStart:function(n){var a=n.oldDraggableIndex;this.startIndex=a},onSpill:function(n){var a=n.dragEl,e=n.putSortable;this.sortable.captureAnimationState(),e&&e.captureAnimationState();var s=ud(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(a,s):this.sortable.el.appendChild(a),this.sortable.animateAll(),e&&e.animateAll()},drop:IM};wo(PS,{pluginName:"revertOnSpill"});function kS(){}kS.prototype={onSpill:function(n){var a=n.dragEl,e=n.putSortable,s=e||this.sortable;s.captureAnimationState(),a.parentNode&&a.parentNode.removeChild(a),s.animateAll()},drop:IM};wo(kS,{pluginName:"removeOnSpill"});var Eo;function Pbe(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(a){var e=a.dragEl;Eo=e},dragOverValid:function(a){var e=a.completed,s=a.target,r=a.onMove,o=a.activeSortable,i=a.changed,l=a.cancel;if(o.options.swap){var c=this.sortable.el,d=this.options;if(s&&s!==c){var u=Eo;r(s)!==!1?(ba(s,d.swapClass,!0),Eo=s):Eo=null,u&&u!==Eo&&ba(u,d.swapClass,!1)}i(),e(!0),l()}},drop:function(a){var e=a.activeSortable,s=a.putSortable,r=a.dragEl,o=s||this.sortable,i=this.options;Eo&&ba(Eo,i.swapClass,!1),Eo&&(i.swap||s&&s.options.swap)&&r!==Eo&&(o.captureAnimationState(),o!==e&&e.captureAnimationState(),kbe(r,Eo),o.animateAll(),o!==e&&e.animateAll())},nulling:function(){Eo=null}},wo(t,{pluginName:"swap",eventProperties:function(){return{swapItem:Eo}}})}function kbe(t,n){var a=t.parentNode,e=n.parentNode,s,r;!a||!e||a.isEqualNode(n)||e.isEqualNode(t)||(s=Na(t),r=Na(n),a.isEqualNode(e)&&s<r&&r++,a.insertBefore(n,a.children[s]),e.insertBefore(t,e.children[r]))}var on=[],Zs=[],Vd,Bo,Hd=!1,$s=!1,dc=!1,oa,jd,zp;function Bbe(){function t(n){for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));n.options.supportPointer?Sn(document,"pointerup",this._deselectMultiDrag):(Sn(document,"mouseup",this._deselectMultiDrag),Sn(document,"touchend",this._deselectMultiDrag)),Sn(document,"keydown",this._checkKeyDown),Sn(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(s,r){var o="";on.length&&Bo===n?on.forEach(function(i,l){o+=(l?", ":"")+i.textContent}):o=r.textContent,s.setData("Text",o)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(a){var e=a.dragEl;oa=e},delayEnded:function(){this.isMultiDrag=~on.indexOf(oa)},setupClone:function(a){var e=a.sortable,s=a.cancel;if(this.isMultiDrag){for(var r=0;r<on.length;r++)Zs.push(DS(on[r])),Zs[r].sortableIndex=on[r].sortableIndex,Zs[r].draggable=!1,Zs[r].style["will-change"]="",ba(Zs[r],this.options.selectedClass,!1),on[r]===oa&&ba(Zs[r],this.options.chosenClass,!1);e._hideClone(),s()}},clone:function(a){var e=a.sortable,s=a.rootEl,r=a.dispatchSortableEvent,o=a.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||on.length&&Bo===e&&(uC(!0,s),r("clone"),o()))},showClone:function(a){var e=a.cloneNowShown,s=a.rootEl,r=a.cancel;this.isMultiDrag&&(uC(!1,s),Zs.forEach(function(o){kt(o,"display","")}),e(),zp=!1,r())},hideClone:function(a){var e=this;a.sortable;var s=a.cloneNowHidden,r=a.cancel;this.isMultiDrag&&(Zs.forEach(function(o){kt(o,"display","none"),e.options.removeCloneOnHide&&o.parentNode&&o.parentNode.removeChild(o)}),s(),zp=!0,r())},dragStartGlobal:function(a){a.sortable,!this.isMultiDrag&&Bo&&Bo.multiDrag._deselectMultiDrag(),on.forEach(function(e){e.sortableIndex=Na(e)}),on=on.sort(function(e,s){return e.sortableIndex-s.sortableIndex}),dc=!0},dragStarted:function(a){var e=this,s=a.sortable;if(this.isMultiDrag){if(this.options.sort&&(s.captureAnimationState(),this.options.animation)){on.forEach(function(o){o!==oa&&kt(o,"position","absolute")});var r=ma(oa,!1,!0,!0);on.forEach(function(o){o!==oa&&rC(o,r)}),$s=!0,Hd=!0}s.animateAll(function(){$s=!1,Hd=!1,e.options.animation&&on.forEach(function(o){Ug(o)}),e.options.sort&&Yp()})}},dragOver:function(a){var e=a.target,s=a.completed,r=a.cancel;$s&&~on.indexOf(e)&&(s(!1),r())},revert:function(a){var e=a.fromSortable,s=a.rootEl,r=a.sortable,o=a.dragRect;on.length>1&&(on.forEach(function(i){r.addAnimationState({target:i,rect:$s?ma(i):o}),Ug(i),i.fromRect=o,e.removeAnimationState(i)}),$s=!1,Fbe(!this.options.removeCloneOnHide,s))},dragOverCompleted:function(a){var e=a.sortable,s=a.isOwner,r=a.insertion,o=a.activeSortable,i=a.parentEl,l=a.putSortable,c=this.options;if(r){if(s&&o._hideClone(),Hd=!1,c.animation&&on.length>1&&($s||!s&&!o.options.sort&&!l)){var d=ma(oa,!1,!0,!0);on.forEach(function(m){m!==oa&&(rC(m,d),i.appendChild(m))}),$s=!0}if(!s)if($s||Yp(),on.length>1){var u=zp;o._showClone(e),o.options.animation&&!zp&&u&&Zs.forEach(function(m){o.addAnimationState({target:m,rect:jd}),m.fromRect=jd,m.thisAnimationDuration=null})}else o._showClone(e)}},dragOverAnimationCapture:function(a){var e=a.dragRect,s=a.isOwner,r=a.activeSortable;if(on.forEach(function(i){i.thisAnimationDuration=null}),r.options.animation&&!s&&r.multiDrag.isMultiDrag){jd=wo({},e);var o=Ll(oa,!0);jd.top-=o.f,jd.left-=o.e}},dragOverAnimationComplete:function(){$s&&($s=!1,Yp())},drop:function(a){var e=a.originalEvent,s=a.rootEl,r=a.parentEl,o=a.sortable,i=a.dispatchSortableEvent,l=a.oldIndex,c=a.putSortable,d=c||this.sortable;if(e){var u=this.options,m=r.children;if(!dc)if(u.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),ba(oa,u.selectedClass,!~on.indexOf(oa)),~on.indexOf(oa))on.splice(on.indexOf(oa),1),Vd=null,eu({sortable:o,rootEl:s,name:"deselect",targetEl:oa});else{if(on.push(oa),eu({sortable:o,rootEl:s,name:"select",targetEl:oa}),e.shiftKey&&Vd&&o.el.contains(Vd)){var h=Na(Vd),_=Na(oa);if(~h&&~_&&h!==_){var E,y;for(_>h?(y=h,E=_):(y=_,E=h+1);y<E;y++)~on.indexOf(m[y])||(ba(m[y],u.selectedClass,!0),on.push(m[y]),eu({sortable:o,rootEl:s,name:"select",targetEl:m[y]}))}}else Vd=oa;Bo=d}if(dc&&this.isMultiDrag){if($s=!1,(r[gs].options.sort||r!==s)&&on.length>1){var b=ma(oa),A=Na(oa,":not(."+this.options.selectedClass+")");if(!Hd&&u.animation&&(oa.thisAnimationDuration=null),d.captureAnimationState(),!Hd&&(u.animation&&(oa.fromRect=b,on.forEach(function(I){if(I.thisAnimationDuration=null,I!==oa){var N=$s?ma(I):b;I.fromRect=N,d.addAnimationState({target:I,rect:N})}})),Yp(),on.forEach(function(I){m[A]?r.insertBefore(I,m[A]):r.appendChild(I),A++}),l===Na(oa))){var T=!1;on.forEach(function(I){if(I.sortableIndex!==Na(I)){T=!0;return}}),T&&i("update")}on.forEach(function(I){Ug(I)}),d.animateAll()}Bo=d}(s===r||c&&c.lastPutMode!=="clone")&&Zs.forEach(function(I){I.parentNode&&I.parentNode.removeChild(I)})}},nullingGlobal:function(){this.isMultiDrag=dc=!1,Zs.length=0},destroyGlobal:function(){this._deselectMultiDrag(),hn(document,"pointerup",this._deselectMultiDrag),hn(document,"mouseup",this._deselectMultiDrag),hn(document,"touchend",this._deselectMultiDrag),hn(document,"keydown",this._checkKeyDown),hn(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(a){if(!(typeof dc<"u"&&dc)&&Bo===this.sortable&&!(a&&Go(a.target,this.options.draggable,this.sortable.el,!1))&&!(a&&a.button!==0))for(;on.length;){var e=on[0];ba(e,this.options.selectedClass,!1),on.shift(),eu({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:e})}},_checkKeyDown:function(a){a.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(a){a.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},wo(t,{pluginName:"multiDrag",utils:{select:function(a){var e=a.parentNode[gs];!e||!e.options.multiDrag||~on.indexOf(a)||(Bo&&Bo!==e&&(Bo.multiDrag._deselectMultiDrag(),Bo=e),ba(a,e.options.selectedClass,!0),on.push(a))},deselect:function(a){var e=a.parentNode[gs],s=on.indexOf(a);!e||!e.options.multiDrag||!~s||(ba(a,e.options.selectedClass,!1),on.splice(s,1))}},eventProperties:function(){var a=this,e=[],s=[];return on.forEach(function(r){e.push({multiDragElement:r,index:r.sortableIndex});var o;$s&&r!==oa?o=-1:$s?o=Na(r,":not(."+a.options.selectedClass+")"):o=Na(r),s.push({multiDragElement:r,index:o})}),{items:ibe(on),clones:[].concat(Zs),oldIndicies:e,newIndicies:s}},optionListeners:{multiDragKey:function(a){return a=a.toLowerCase(),a==="ctrl"?a="Control":a.length>1&&(a=a.charAt(0).toUpperCase()+a.substr(1)),a}}})}function Fbe(t,n){on.forEach(function(a,e){var s=n.children[a.sortableIndex+(t?Number(e):0)];s?n.insertBefore(a,s):n.appendChild(a)})}function uC(t,n){Zs.forEach(function(a,e){var s=n.children[a.sortableIndex+(t?Number(e):0)];s?n.insertBefore(a,s):n.appendChild(a)})}function Yp(){on.forEach(function(t){t!==oa&&t.parentNode&&t.parentNode.removeChild(t)})}Wt.mount(new Dbe);Wt.mount(kS,PS);const Ube=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:Bbe,Sortable:Wt,Swap:Pbe,default:Wt},Symbol.toStringTag,{value:"Module"})),$be=ik(Ube);(function(t,n){(function(e,s){t.exports=s(U2,$be)})(typeof self<"u"?self:lk,function(a,e){return function(s){var r={};function o(i){if(r[i])return r[i].exports;var l=r[i]={i,l:!1,exports:{}};return s[i].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=s,o.c=r,o.d=function(i,l,c){o.o(i,l)||Object.defineProperty(i,l,{enumerable:!0,get:c})},o.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},o.t=function(i,l){if(l&1&&(i=o(i)),l&8||l&4&&typeof i=="object"&&i&&i.__esModule)return i;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:i}),l&2&&typeof i!="string")for(var d in i)o.d(c,d,(function(u){return i[u]}).bind(null,d));return c},o.n=function(i){var l=i&&i.__esModule?function(){return i.default}:function(){return i};return o.d(l,"a",l),l},o.o=function(i,l){return Object.prototype.hasOwnProperty.call(i,l)},o.p="",o(o.s="fb15")}({"00ee":function(s,r,o){var i=o("b622"),l=i("toStringTag"),c={};c[l]="z",s.exports=String(c)==="[object z]"},"0366":function(s,r,o){var i=o("1c0b");s.exports=function(l,c,d){if(i(l),c===void 0)return l;switch(d){case 0:return function(){return l.call(c)};case 1:return function(u){return l.call(c,u)};case 2:return function(u,m){return l.call(c,u,m)};case 3:return function(u,m,h){return l.call(c,u,m,h)}}return function(){return l.apply(c,arguments)}}},"057f":function(s,r,o){var i=o("fc6a"),l=o("241c").f,c={}.toString,d=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],u=function(m){try{return l(m)}catch{return d.slice()}};s.exports.f=function(h){return d&&c.call(h)=="[object Window]"?u(h):l(i(h))}},"06cf":function(s,r,o){var i=o("83ab"),l=o("d1e7"),c=o("5c6c"),d=o("fc6a"),u=o("c04e"),m=o("5135"),h=o("0cfb"),_=Object.getOwnPropertyDescriptor;r.f=i?_:function(y,b){if(y=d(y),b=u(b,!0),h)try{return _(y,b)}catch{}if(m(y,b))return c(!l.f.call(y,b),y[b])}},"0cfb":function(s,r,o){var i=o("83ab"),l=o("d039"),c=o("cc12");s.exports=!i&&!l(function(){return Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(s,r,o){var i=o("23e7"),l=o("d58f").left,c=o("a640"),d=o("ae40"),u=c("reduce"),m=d("reduce",{1:0});i({target:"Array",proto:!0,forced:!u||!m},{reduce:function(_){return l(this,_,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(s,r,o){var i=o("c6b6"),l=o("9263");s.exports=function(c,d){var u=c.exec;if(typeof u=="function"){var m=u.call(c,d);if(typeof m!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return m}if(i(c)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(c,d)}},"159b":function(s,r,o){var i=o("da84"),l=o("fdbc"),c=o("17c2"),d=o("9112");for(var u in l){var m=i[u],h=m&&m.prototype;if(h&&h.forEach!==c)try{d(h,"forEach",c)}catch{h.forEach=c}}},"17c2":function(s,r,o){var i=o("b727").forEach,l=o("a640"),c=o("ae40"),d=l("forEach"),u=c("forEach");s.exports=!d||!u?function(h){return i(this,h,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(s,r,o){var i=o("d066");s.exports=i("document","documentElement")},"1c0b":function(s,r){s.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},"1c7e":function(s,r,o){var i=o("b622"),l=i("iterator"),c=!1;try{var d=0,u={next:function(){return{done:!!d++}},return:function(){c=!0}};u[l]=function(){return this},Array.from(u,function(){throw 2})}catch{}s.exports=function(m,h){if(!h&&!c)return!1;var _=!1;try{var E={};E[l]=function(){return{next:function(){return{done:_=!0}}}},m(E)}catch{}return _}},"1d80":function(s,r){s.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},"1dde":function(s,r,o){var i=o("d039"),l=o("b622"),c=o("2d00"),d=l("species");s.exports=function(u){return c>=51||!i(function(){var m=[],h=m.constructor={};return h[d]=function(){return{foo:1}},m[u](Boolean).foo!==1})}},"23cb":function(s,r,o){var i=o("a691"),l=Math.max,c=Math.min;s.exports=function(d,u){var m=i(d);return m<0?l(m+u,0):c(m,u)}},"23e7":function(s,r,o){var i=o("da84"),l=o("06cf").f,c=o("9112"),d=o("6eeb"),u=o("ce4e"),m=o("e893"),h=o("94ca");s.exports=function(_,E){var y=_.target,b=_.global,A=_.stat,T,I,N,x,R,M;if(b?I=i:A?I=i[y]||u(y,{}):I=(i[y]||{}).prototype,I)for(N in E){if(R=E[N],_.noTargetGet?(M=l(I,N),x=M&&M.value):x=I[N],T=h(b?N:y+(A?".":"#")+N,_.forced),!T&&x!==void 0){if(typeof R==typeof x)continue;m(R,x)}(_.sham||x&&x.sham)&&c(R,"sham",!0),d(I,N,R,_)}}},"241c":function(s,r,o){var i=o("ca84"),l=o("7839"),c=l.concat("length","prototype");r.f=Object.getOwnPropertyNames||function(u){return i(u,c)}},"25f0":function(s,r,o){var i=o("6eeb"),l=o("825a"),c=o("d039"),d=o("ad6d"),u="toString",m=RegExp.prototype,h=m[u],_=c(function(){return h.call({source:"a",flags:"b"})!="/a/b"}),E=h.name!=u;(_||E)&&i(RegExp.prototype,u,function(){var b=l(this),A=String(b.source),T=b.flags,I=String(T===void 0&&b instanceof RegExp&&!("flags"in m)?d.call(b):T);return"/"+A+"/"+I},{unsafe:!0})},"2ca0":function(s,r,o){var i=o("23e7"),l=o("06cf").f,c=o("50c4"),d=o("5a34"),u=o("1d80"),m=o("ab13"),h=o("c430"),_="".startsWith,E=Math.min,y=m("startsWith"),b=!h&&!y&&!!function(){var A=l(String.prototype,"startsWith");return A&&!A.writable}();i({target:"String",proto:!0,forced:!b&&!y},{startsWith:function(T){var I=String(u(this));d(T);var N=c(E(arguments.length>1?arguments[1]:void 0,I.length)),x=String(T);return _?_.call(I,x,N):I.slice(N,N+x.length)===x}})},"2d00":function(s,r,o){var i=o("da84"),l=o("342f"),c=i.process,d=c&&c.versions,u=d&&d.v8,m,h;u?(m=u.split("."),h=m[0]+m[1]):l&&(m=l.match(/Edge\/(\d+)/),(!m||m[1]>=74)&&(m=l.match(/Chrome\/(\d+)/),m&&(h=m[1]))),s.exports=h&&+h},"342f":function(s,r,o){var i=o("d066");s.exports=i("navigator","userAgent")||""},"35a1":function(s,r,o){var i=o("f5df"),l=o("3f8c"),c=o("b622"),d=c("iterator");s.exports=function(u){if(u!=null)return u[d]||u["@@iterator"]||l[i(u)]}},"37e8":function(s,r,o){var i=o("83ab"),l=o("9bf2"),c=o("825a"),d=o("df75");s.exports=i?Object.defineProperties:function(m,h){c(m);for(var _=d(h),E=_.length,y=0,b;E>y;)l.f(m,b=_[y++],h[b]);return m}},"3bbe":function(s,r,o){var i=o("861d");s.exports=function(l){if(!i(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return l}},"3ca3":function(s,r,o){var i=o("6547").charAt,l=o("69f3"),c=o("7dd0"),d="String Iterator",u=l.set,m=l.getterFor(d);c(String,"String",function(h){u(this,{type:d,string:String(h),index:0})},function(){var _=m(this),E=_.string,y=_.index,b;return y>=E.length?{value:void 0,done:!0}:(b=i(E,y),_.index+=b.length,{value:b,done:!1})})},"3f8c":function(s,r){s.exports={}},4160:function(s,r,o){var i=o("23e7"),l=o("17c2");i({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},"428f":function(s,r,o){var i=o("da84");s.exports=i},"44ad":function(s,r,o){var i=o("d039"),l=o("c6b6"),c="".split;s.exports=i(function(){return!Object("z").propertyIsEnumerable(0)})?function(d){return l(d)=="String"?c.call(d,""):Object(d)}:Object},"44d2":function(s,r,o){var i=o("b622"),l=o("7c73"),c=o("9bf2"),d=i("unscopables"),u=Array.prototype;u[d]==null&&c.f(u,d,{configurable:!0,value:l(null)}),s.exports=function(m){u[d][m]=!0}},"44e7":function(s,r,o){var i=o("861d"),l=o("c6b6"),c=o("b622"),d=c("match");s.exports=function(u){var m;return i(u)&&((m=u[d])!==void 0?!!m:l(u)=="RegExp")}},4930:function(s,r,o){var i=o("d039");s.exports=!!Object.getOwnPropertySymbols&&!i(function(){return!String(Symbol())})},"4d64":function(s,r,o){var i=o("fc6a"),l=o("50c4"),c=o("23cb"),d=function(u){return function(m,h,_){var E=i(m),y=l(E.length),b=c(_,y),A;if(u&&h!=h){for(;y>b;)if(A=E[b++],A!=A)return!0}else for(;y>b;b++)if((u||b in E)&&E[b]===h)return u||b||0;return!u&&-1}};s.exports={includes:d(!0),indexOf:d(!1)}},"4de4":function(s,r,o){var i=o("23e7"),l=o("b727").filter,c=o("1dde"),d=o("ae40"),u=c("filter"),m=d("filter");i({target:"Array",proto:!0,forced:!u||!m},{filter:function(_){return l(this,_,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(s,r,o){var i=o("0366"),l=o("7b0b"),c=o("9bdd"),d=o("e95a"),u=o("50c4"),m=o("8418"),h=o("35a1");s.exports=function(E){var y=l(E),b=typeof this=="function"?this:Array,A=arguments.length,T=A>1?arguments[1]:void 0,I=T!==void 0,N=h(y),x=0,R,M,w,D,B,k;if(I&&(T=i(T,A>2?arguments[2]:void 0,2)),N!=null&&!(b==Array&&d(N)))for(D=N.call(y),B=D.next,M=new b;!(w=B.call(D)).done;x++)k=I?c(D,T,[w.value,x],!0):w.value,m(M,x,k);else for(R=u(y.length),M=new b(R);R>x;x++)k=I?T(y[x],x):y[x],m(M,x,k);return M.length=x,M}},"4fad":function(s,r,o){var i=o("23e7"),l=o("6f53").entries;i({target:"Object",stat:!0},{entries:function(d){return l(d)}})},"50c4":function(s,r,o){var i=o("a691"),l=Math.min;s.exports=function(c){return c>0?l(i(c),9007199254740991):0}},5135:function(s,r){var o={}.hasOwnProperty;s.exports=function(i,l){return o.call(i,l)}},5319:function(s,r,o){var i=o("d784"),l=o("825a"),c=o("7b0b"),d=o("50c4"),u=o("a691"),m=o("1d80"),h=o("8aa5"),_=o("14c3"),E=Math.max,y=Math.min,b=Math.floor,A=/\$([$&'`]|\d\d?|<[^>]*>)/g,T=/\$([$&'`]|\d\d?)/g,I=function(N){return N===void 0?N:String(N)};i("replace",2,function(N,x,R,M){var w=M.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,D=M.REPLACE_KEEPS_$0,B=w?"$":"$0";return[function(F,$){var Y=m(this),j=F==null?void 0:F[N];return j!==void 0?j.call(F,Y,$):x.call(String(Y),F,$)},function(V,F){if(!w&&D||typeof F=="string"&&F.indexOf(B)===-1){var $=R(x,V,this,F);if($.done)return $.value}var Y=l(V),j=String(this),U=typeof F=="function";U||(F=String(F));var J=Y.global;if(J){var te=Y.unicode;Y.lastIndex=0}for(var q=[];;){var K=_(Y,j);if(K===null||(q.push(K),!J))break;var W=String(K[0]);W===""&&(Y.lastIndex=h(j,d(Y.lastIndex),te))}for(var ee="",ae=0,ve=0;ve<q.length;ve++){K=q[ve];for(var Ce=String(K[0]),ue=E(y(u(K.index),j.length),0),ge=[],Me=1;Me<K.length;Me++)ge.push(I(K[Me]));var We=K.groups;if(U){var Ue=[Ce].concat(ge,ue,j);We!==void 0&&Ue.push(We);var Re=String(F.apply(void 0,Ue))}else Re=k(Ce,j,ue,ge,We,F);ue>=ae&&(ee+=j.slice(ae,ue)+Re,ae=ue+Ce.length)}return ee+j.slice(ae)}];function k(V,F,$,Y,j,U){var J=$+V.length,te=Y.length,q=T;return j!==void 0&&(j=c(j),q=A),x.call(U,q,function(K,W){var ee;switch(W.charAt(0)){case"$":return"$";case"&":return V;case"`":return F.slice(0,$);case"'":return F.slice(J);case"<":ee=j[W.slice(1,-1)];break;default:var ae=+W;if(ae===0)return K;if(ae>te){var ve=b(ae/10);return ve===0?K:ve<=te?Y[ve-1]===void 0?W.charAt(1):Y[ve-1]+W.charAt(1):K}ee=Y[ae-1]}return ee===void 0?"":ee})}})},5692:function(s,r,o){var i=o("c430"),l=o("c6cd");(s.exports=function(c,d){return l[c]||(l[c]=d!==void 0?d:{})})("versions",[]).push({version:"3.6.5",mode:i?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(s,r,o){var i=o("d066"),l=o("241c"),c=o("7418"),d=o("825a");s.exports=i("Reflect","ownKeys")||function(m){var h=l.f(d(m)),_=c.f;return _?h.concat(_(m)):h}},"5a34":function(s,r,o){var i=o("44e7");s.exports=function(l){if(i(l))throw TypeError("The method doesn't accept regular expressions");return l}},"5c6c":function(s,r){s.exports=function(o,i){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:i}}},"5db7":function(s,r,o){var i=o("23e7"),l=o("a2bf"),c=o("7b0b"),d=o("50c4"),u=o("1c0b"),m=o("65f0");i({target:"Array",proto:!0},{flatMap:function(_){var E=c(this),y=d(E.length),b;return u(_),b=m(E,0),b.length=l(b,E,E,y,0,1,_,arguments.length>1?arguments[1]:void 0),b}})},6547:function(s,r,o){var i=o("a691"),l=o("1d80"),c=function(d){return function(u,m){var h=String(l(u)),_=i(m),E=h.length,y,b;return _<0||_>=E?d?"":void 0:(y=h.charCodeAt(_),y<55296||y>56319||_+1===E||(b=h.charCodeAt(_+1))<56320||b>57343?d?h.charAt(_):y:d?h.slice(_,_+2):(y-55296<<10)+(b-56320)+65536)}};s.exports={codeAt:c(!1),charAt:c(!0)}},"65f0":function(s,r,o){var i=o("861d"),l=o("e8b5"),c=o("b622"),d=c("species");s.exports=function(u,m){var h;return l(u)&&(h=u.constructor,typeof h=="function"&&(h===Array||l(h.prototype))?h=void 0:i(h)&&(h=h[d],h===null&&(h=void 0))),new(h===void 0?Array:h)(m===0?0:m)}},"69f3":function(s,r,o){var i=o("7f9a"),l=o("da84"),c=o("861d"),d=o("9112"),u=o("5135"),m=o("f772"),h=o("d012"),_=l.WeakMap,E,y,b,A=function(w){return b(w)?y(w):E(w,{})},T=function(w){return function(D){var B;if(!c(D)||(B=y(D)).type!==w)throw TypeError("Incompatible receiver, "+w+" required");return B}};if(i){var I=new _,N=I.get,x=I.has,R=I.set;E=function(w,D){return R.call(I,w,D),D},y=function(w){return N.call(I,w)||{}},b=function(w){return x.call(I,w)}}else{var M=m("state");h[M]=!0,E=function(w,D){return d(w,M,D),D},y=function(w){return u(w,M)?w[M]:{}},b=function(w){return u(w,M)}}s.exports={set:E,get:y,has:b,enforce:A,getterFor:T}},"6eeb":function(s,r,o){var i=o("da84"),l=o("9112"),c=o("5135"),d=o("ce4e"),u=o("8925"),m=o("69f3"),h=m.get,_=m.enforce,E=String(String).split("String");(s.exports=function(y,b,A,T){var I=T?!!T.unsafe:!1,N=T?!!T.enumerable:!1,x=T?!!T.noTargetGet:!1;if(typeof A=="function"&&(typeof b=="string"&&!c(A,"name")&&l(A,"name",b),_(A).source=E.join(typeof b=="string"?b:"")),y===i){N?y[b]=A:d(b,A);return}else I?!x&&y[b]&&(N=!0):delete y[b];N?y[b]=A:l(y,b,A)})(Function.prototype,"toString",function(){return typeof this=="function"&&h(this).source||u(this)})},"6f53":function(s,r,o){var i=o("83ab"),l=o("df75"),c=o("fc6a"),d=o("d1e7").f,u=function(m){return function(h){for(var _=c(h),E=l(_),y=E.length,b=0,A=[],T;y>b;)T=E[b++],(!i||d.call(_,T))&&A.push(m?[T,_[T]]:_[T]);return A}};s.exports={entries:u(!0),values:u(!1)}},"73d9":function(s,r,o){var i=o("44d2");i("flatMap")},7418:function(s,r){r.f=Object.getOwnPropertySymbols},"746f":function(s,r,o){var i=o("428f"),l=o("5135"),c=o("e538"),d=o("9bf2").f;s.exports=function(u){var m=i.Symbol||(i.Symbol={});l(m,u)||d(m,u,{value:c.f(u)})}},7839:function(s,r){s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(s,r,o){var i=o("1d80");s.exports=function(l){return Object(i(l))}},"7c73":function(s,r,o){var i=o("825a"),l=o("37e8"),c=o("7839"),d=o("d012"),u=o("1be4"),m=o("cc12"),h=o("f772"),_=">",E="<",y="prototype",b="script",A=h("IE_PROTO"),T=function(){},I=function(w){return E+b+_+w+E+"/"+b+_},N=function(w){w.write(I("")),w.close();var D=w.parentWindow.Object;return w=null,D},x=function(){var w=m("iframe"),D="java"+b+":",B;return w.style.display="none",u.appendChild(w),w.src=String(D),B=w.contentWindow.document,B.open(),B.write(I("document.F=Object")),B.close(),B.F},R,M=function(){try{R=document.domain&&new ActiveXObject("htmlfile")}catch{}M=R?N(R):x();for(var w=c.length;w--;)delete M[y][c[w]];return M()};d[A]=!0,s.exports=Object.create||function(D,B){var k;return D!==null?(T[y]=i(D),k=new T,T[y]=null,k[A]=D):k=M(),B===void 0?k:l(k,B)}},"7dd0":function(s,r,o){var i=o("23e7"),l=o("9ed3"),c=o("e163"),d=o("d2bb"),u=o("d44e"),m=o("9112"),h=o("6eeb"),_=o("b622"),E=o("c430"),y=o("3f8c"),b=o("ae93"),A=b.IteratorPrototype,T=b.BUGGY_SAFARI_ITERATORS,I=_("iterator"),N="keys",x="values",R="entries",M=function(){return this};s.exports=function(w,D,B,k,V,F,$){l(B,D,k);var Y=function(ve){if(ve===V&&q)return q;if(!T&&ve in J)return J[ve];switch(ve){case N:return function(){return new B(this,ve)};case x:return function(){return new B(this,ve)};case R:return function(){return new B(this,ve)}}return function(){return new B(this)}},j=D+" Iterator",U=!1,J=w.prototype,te=J[I]||J["@@iterator"]||V&&J[V],q=!T&&te||Y(V),K=D=="Array"&&J.entries||te,W,ee,ae;if(K&&(W=c(K.call(new w)),A!==Object.prototype&&W.next&&(!E&&c(W)!==A&&(d?d(W,A):typeof W[I]!="function"&&m(W,I,M)),u(W,j,!0,!0),E&&(y[j]=M))),V==x&&te&&te.name!==x&&(U=!0,q=function(){return te.call(this)}),(!E||$)&&J[I]!==q&&m(J,I,q),y[D]=q,V)if(ee={values:Y(x),keys:F?q:Y(N),entries:Y(R)},$)for(ae in ee)(T||U||!(ae in J))&&h(J,ae,ee[ae]);else i({target:D,proto:!0,forced:T||U},ee);return ee}},"7f9a":function(s,r,o){var i=o("da84"),l=o("8925"),c=i.WeakMap;s.exports=typeof c=="function"&&/native code/.test(l(c))},"825a":function(s,r,o){var i=o("861d");s.exports=function(l){if(!i(l))throw TypeError(String(l)+" is not an object");return l}},"83ab":function(s,r,o){var i=o("d039");s.exports=!i(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(s,r,o){var i=o("c04e"),l=o("9bf2"),c=o("5c6c");s.exports=function(d,u,m){var h=i(u);h in d?l.f(d,h,c(0,m)):d[h]=m}},"861d":function(s,r){s.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},8875:function(s,r,o){var i,l,c;(function(d,u){l=[],i=u,c=typeof i=="function"?i.apply(r,l):i,c!==void 0&&(s.exports=c)})(typeof self<"u"?self:this,function(){function d(){var u=Object.getOwnPropertyDescriptor(document,"currentScript");if(!u&&"currentScript"in document&&document.currentScript||u&&u.get!==d&&document.currentScript)return document.currentScript;try{throw new Error}catch(R){var m=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,h=/@([^@]*):(\d+):(\d+)\s*$/ig,_=m.exec(R.stack)||h.exec(R.stack),E=_&&_[1]||!1,y=_&&_[2]||!1,b=document.location.href.replace(document.location.hash,""),A,T,I,N=document.getElementsByTagName("script");E===b&&(A=document.documentElement.outerHTML,T=new RegExp("(?:[^\\n]+?\\n){0,"+(y-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),I=A.replace(T,"$1").trim());for(var x=0;x<N.length;x++)if(N[x].readyState==="interactive"||N[x].src===E||E===b&&N[x].innerHTML&&N[x].innerHTML.trim()===I)return N[x];return null}}return d})},8925:function(s,r,o){var i=o("c6cd"),l=Function.toString;typeof i.inspectSource!="function"&&(i.inspectSource=function(c){return l.call(c)}),s.exports=i.inspectSource},"8aa5":function(s,r,o){var i=o("6547").charAt;s.exports=function(l,c,d){return c+(d?i(l,c).length:1)}},"8bbf":function(s,r){s.exports=a},"90e3":function(s,r){var o=0,i=Math.random();s.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++o+i).toString(36)}},9112:function(s,r,o){var i=o("83ab"),l=o("9bf2"),c=o("5c6c");s.exports=i?function(d,u,m){return l.f(d,u,c(1,m))}:function(d,u,m){return d[u]=m,d}},9263:function(s,r,o){var i=o("ad6d"),l=o("9f7f"),c=RegExp.prototype.exec,d=String.prototype.replace,u=c,m=function(){var y=/a/,b=/b*/g;return c.call(y,"a"),c.call(b,"a"),y.lastIndex!==0||b.lastIndex!==0}(),h=l.UNSUPPORTED_Y||l.BROKEN_CARET,_=/()??/.exec("")[1]!==void 0,E=m||_||h;E&&(u=function(b){var A=this,T,I,N,x,R=h&&A.sticky,M=i.call(A),w=A.source,D=0,B=b;return R&&(M=M.replace("y",""),M.indexOf("g")===-1&&(M+="g"),B=String(b).slice(A.lastIndex),A.lastIndex>0&&(!A.multiline||A.multiline&&b[A.lastIndex-1]!==`
`)&&(w="(?: "+w+")",B=" "+B,D++),I=new RegExp("^(?:"+w+")",M)),_&&(I=new RegExp("^"+w+"$(?!\\s)",M)),m&&(T=A.lastIndex),N=c.call(R?I:A,B),R?N?(N.input=N.input.slice(D),N[0]=N[0].slice(D),N.index=A.lastIndex,A.lastIndex+=N[0].length):A.lastIndex=0:m&&N&&(A.lastIndex=A.global?N.index+N[0].length:T),_&&N&&N.length>1&&d.call(N[0],I,function(){for(x=1;x<arguments.length-2;x++)arguments[x]===void 0&&(N[x]=void 0)}),N}),s.exports=u},"94ca":function(s,r,o){var i=o("d039"),l=/#|\.prototype\./,c=function(_,E){var y=u[d(_)];return y==h?!0:y==m?!1:typeof E=="function"?i(E):!!E},d=c.normalize=function(_){return String(_).replace(l,".").toLowerCase()},u=c.data={},m=c.NATIVE="N",h=c.POLYFILL="P";s.exports=c},"99af":function(s,r,o){var i=o("23e7"),l=o("d039"),c=o("e8b5"),d=o("861d"),u=o("7b0b"),m=o("50c4"),h=o("8418"),_=o("65f0"),E=o("1dde"),y=o("b622"),b=o("2d00"),A=y("isConcatSpreadable"),T=9007199254740991,I="Maximum allowed index exceeded",N=b>=51||!l(function(){var w=[];return w[A]=!1,w.concat()[0]!==w}),x=E("concat"),R=function(w){if(!d(w))return!1;var D=w[A];return D!==void 0?!!D:c(w)},M=!N||!x;i({target:"Array",proto:!0,forced:M},{concat:function(D){var B=u(this),k=_(B,0),V=0,F,$,Y,j,U;for(F=-1,Y=arguments.length;F<Y;F++)if(U=F===-1?B:arguments[F],R(U)){if(j=m(U.length),V+j>T)throw TypeError(I);for($=0;$<j;$++,V++)$ in U&&h(k,V,U[$])}else{if(V>=T)throw TypeError(I);h(k,V++,U)}return k.length=V,k}})},"9bdd":function(s,r,o){var i=o("825a");s.exports=function(l,c,d,u){try{return u?c(i(d)[0],d[1]):c(d)}catch(h){var m=l.return;throw m!==void 0&&i(m.call(l)),h}}},"9bf2":function(s,r,o){var i=o("83ab"),l=o("0cfb"),c=o("825a"),d=o("c04e"),u=Object.defineProperty;r.f=i?u:function(h,_,E){if(c(h),_=d(_,!0),c(E),l)try{return u(h,_,E)}catch{}if("get"in E||"set"in E)throw TypeError("Accessors not supported");return"value"in E&&(h[_]=E.value),h}},"9ed3":function(s,r,o){var i=o("ae93").IteratorPrototype,l=o("7c73"),c=o("5c6c"),d=o("d44e"),u=o("3f8c"),m=function(){return this};s.exports=function(h,_,E){var y=_+" Iterator";return h.prototype=l(i,{next:c(1,E)}),d(h,y,!1,!0),u[y]=m,h}},"9f7f":function(s,r,o){var i=o("d039");function l(c,d){return RegExp(c,d)}r.UNSUPPORTED_Y=i(function(){var c=l("a","y");return c.lastIndex=2,c.exec("abcd")!=null}),r.BROKEN_CARET=i(function(){var c=l("^r","gy");return c.lastIndex=2,c.exec("str")!=null})},a2bf:function(s,r,o){var i=o("e8b5"),l=o("50c4"),c=o("0366"),d=function(u,m,h,_,E,y,b,A){for(var T=E,I=0,N=b?c(b,A,3):!1,x;I<_;){if(I in h){if(x=N?N(h[I],I,m):h[I],y>0&&i(x))T=d(u,m,x,l(x.length),T,y-1)-1;else{if(T>=9007199254740991)throw TypeError("Exceed the acceptable array length");u[T]=x}T++}I++}return T};s.exports=d},a352:function(s,r){s.exports=e},a434:function(s,r,o){var i=o("23e7"),l=o("23cb"),c=o("a691"),d=o("50c4"),u=o("7b0b"),m=o("65f0"),h=o("8418"),_=o("1dde"),E=o("ae40"),y=_("splice"),b=E("splice",{ACCESSORS:!0,0:0,1:2}),A=Math.max,T=Math.min,I=9007199254740991,N="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!y||!b},{splice:function(R,M){var w=u(this),D=d(w.length),B=l(R,D),k=arguments.length,V,F,$,Y,j,U;if(k===0?V=F=0:k===1?(V=0,F=D-B):(V=k-2,F=T(A(c(M),0),D-B)),D+V-F>I)throw TypeError(N);for($=m(w,F),Y=0;Y<F;Y++)j=B+Y,j in w&&h($,Y,w[j]);if($.length=F,V<F){for(Y=B;Y<D-F;Y++)j=Y+F,U=Y+V,j in w?w[U]=w[j]:delete w[U];for(Y=D;Y>D-F+V;Y--)delete w[Y-1]}else if(V>F)for(Y=D-F;Y>B;Y--)j=Y+F-1,U=Y+V-1,j in w?w[U]=w[j]:delete w[U];for(Y=0;Y<V;Y++)w[Y+B]=arguments[Y+2];return w.length=D-F+V,$}})},a4d3:function(s,r,o){var i=o("23e7"),l=o("da84"),c=o("d066"),d=o("c430"),u=o("83ab"),m=o("4930"),h=o("fdbf"),_=o("d039"),E=o("5135"),y=o("e8b5"),b=o("861d"),A=o("825a"),T=o("7b0b"),I=o("fc6a"),N=o("c04e"),x=o("5c6c"),R=o("7c73"),M=o("df75"),w=o("241c"),D=o("057f"),B=o("7418"),k=o("06cf"),V=o("9bf2"),F=o("d1e7"),$=o("9112"),Y=o("6eeb"),j=o("5692"),U=o("f772"),J=o("d012"),te=o("90e3"),q=o("b622"),K=o("e538"),W=o("746f"),ee=o("d44e"),ae=o("69f3"),ve=o("b727").forEach,Ce=U("hidden"),ue="Symbol",ge="prototype",Me=q("toPrimitive"),We=ae.set,Ue=ae.getterFor(ue),Re=Object[ge],Le=l.Symbol,Xe=c("JSON","stringify"),et=k.f,yt=V.f,Dt=D.f,X=F.f,se=j("symbols"),ie=j("op-symbols"),fe=j("string-to-symbol-registry"),me=j("symbol-to-string-registry"),De=j("wks"),Ye=l.QObject,ze=!Ye||!Ye[ge]||!Ye[ge].findChild,He=u&&_(function(){return R(yt({},"a",{get:function(){return yt(this,"a",{value:7}).a}})).a!=7})?function(Te,Ne,Ie){var $e=et(Re,Ne);$e&&delete Re[Ne],yt(Te,Ne,Ie),$e&&Te!==Re&&yt(Re,Ne,$e)}:yt,xe=function(Te,Ne){var Ie=se[Te]=R(Le[ge]);return We(Ie,{type:ue,tag:Te,description:Ne}),u||(Ie.description=Ne),Ie},pe=h?function(Te){return typeof Te=="symbol"}:function(Te){return Object(Te)instanceof Le},ye=function(Ne,Ie,$e){Ne===Re&&ye(ie,Ie,$e),A(Ne);var ke=N(Ie,!0);return A($e),E(se,ke)?($e.enumerable?(E(Ne,Ce)&&Ne[Ce][ke]&&(Ne[Ce][ke]=!1),$e=R($e,{enumerable:x(0,!1)})):(E(Ne,Ce)||yt(Ne,Ce,x(1,{})),Ne[Ce][ke]=!0),He(Ne,ke,$e)):yt(Ne,ke,$e)},Be=function(Ne,Ie){A(Ne);var $e=I(Ie),ke=M($e).concat(we($e));return ve(ke,function(Ke){(!u||re.call($e,Ke))&&ye(Ne,Ke,$e[Ke])}),Ne},ne=function(Ne,Ie){return Ie===void 0?R(Ne):Be(R(Ne),Ie)},re=function(Ne){var Ie=N(Ne,!0),$e=X.call(this,Ie);return this===Re&&E(se,Ie)&&!E(ie,Ie)?!1:$e||!E(this,Ie)||!E(se,Ie)||E(this,Ce)&&this[Ce][Ie]?$e:!0},he=function(Ne,Ie){var $e=I(Ne),ke=N(Ie,!0);if(!($e===Re&&E(se,ke)&&!E(ie,ke))){var Ke=et($e,ke);return Ke&&E(se,ke)&&!(E($e,Ce)&&$e[Ce][ke])&&(Ke.enumerable=!0),Ke}},Ee=function(Ne){var Ie=Dt(I(Ne)),$e=[];return ve(Ie,function(ke){!E(se,ke)&&!E(J,ke)&&$e.push(ke)}),$e},we=function(Ne){var Ie=Ne===Re,$e=Dt(Ie?ie:I(Ne)),ke=[];return ve($e,function(Ke){E(se,Ke)&&(!Ie||E(Re,Ke))&&ke.push(se[Ke])}),ke};if(m||(Le=function(){if(this instanceof Le)throw TypeError("Symbol is not a constructor");var Ne=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),Ie=te(Ne),$e=function(ke){this===Re&&$e.call(ie,ke),E(this,Ce)&&E(this[Ce],Ie)&&(this[Ce][Ie]=!1),He(this,Ie,x(1,ke))};return u&&ze&&He(Re,Ie,{configurable:!0,set:$e}),xe(Ie,Ne)},Y(Le[ge],"toString",function(){return Ue(this).tag}),Y(Le,"withoutSetter",function(Te){return xe(te(Te),Te)}),F.f=re,V.f=ye,k.f=he,w.f=D.f=Ee,B.f=we,K.f=function(Te){return xe(q(Te),Te)},u&&(yt(Le[ge],"description",{configurable:!0,get:function(){return Ue(this).description}}),d||Y(Re,"propertyIsEnumerable",re,{unsafe:!0}))),i({global:!0,wrap:!0,forced:!m,sham:!m},{Symbol:Le}),ve(M(De),function(Te){W(Te)}),i({target:ue,stat:!0,forced:!m},{for:function(Te){var Ne=String(Te);if(E(fe,Ne))return fe[Ne];var Ie=Le(Ne);return fe[Ne]=Ie,me[Ie]=Ne,Ie},keyFor:function(Ne){if(!pe(Ne))throw TypeError(Ne+" is not a symbol");if(E(me,Ne))return me[Ne]},useSetter:function(){ze=!0},useSimple:function(){ze=!1}}),i({target:"Object",stat:!0,forced:!m,sham:!u},{create:ne,defineProperty:ye,defineProperties:Be,getOwnPropertyDescriptor:he}),i({target:"Object",stat:!0,forced:!m},{getOwnPropertyNames:Ee,getOwnPropertySymbols:we}),i({target:"Object",stat:!0,forced:_(function(){B.f(1)})},{getOwnPropertySymbols:function(Ne){return B.f(T(Ne))}}),Xe){var be=!m||_(function(){var Te=Le();return Xe([Te])!="[null]"||Xe({a:Te})!="{}"||Xe(Object(Te))!="{}"});i({target:"JSON",stat:!0,forced:be},{stringify:function(Ne,Ie,$e){for(var ke=[Ne],Ke=1,ct;arguments.length>Ke;)ke.push(arguments[Ke++]);if(ct=Ie,!(!b(Ie)&&Ne===void 0||pe(Ne)))return y(Ie)||(Ie=function(It,at){if(typeof ct=="function"&&(at=ct.call(this,It,at)),!pe(at))return at}),ke[1]=Ie,Xe.apply(null,ke)}})}Le[ge][Me]||$(Le[ge],Me,Le[ge].valueOf),ee(Le,ue),J[Ce]=!0},a630:function(s,r,o){var i=o("23e7"),l=o("4df4"),c=o("1c7e"),d=!c(function(u){Array.from(u)});i({target:"Array",stat:!0,forced:d},{from:l})},a640:function(s,r,o){var i=o("d039");s.exports=function(l,c){var d=[][l];return!!d&&i(function(){d.call(null,c||function(){throw 1},1)})}},a691:function(s,r){var o=Math.ceil,i=Math.floor;s.exports=function(l){return isNaN(l=+l)?0:(l>0?i:o)(l)}},ab13:function(s,r,o){var i=o("b622"),l=i("match");s.exports=function(c){var d=/./;try{"/./"[c](d)}catch{try{return d[l]=!1,"/./"[c](d)}catch{}}return!1}},ac1f:function(s,r,o){var i=o("23e7"),l=o("9263");i({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(s,r,o){var i=o("825a");s.exports=function(){var l=i(this),c="";return l.global&&(c+="g"),l.ignoreCase&&(c+="i"),l.multiline&&(c+="m"),l.dotAll&&(c+="s"),l.unicode&&(c+="u"),l.sticky&&(c+="y"),c}},ae40:function(s,r,o){var i=o("83ab"),l=o("d039"),c=o("5135"),d=Object.defineProperty,u={},m=function(h){throw h};s.exports=function(h,_){if(c(u,h))return u[h];_||(_={});var E=[][h],y=c(_,"ACCESSORS")?_.ACCESSORS:!1,b=c(_,0)?_[0]:m,A=c(_,1)?_[1]:void 0;return u[h]=!!E&&!l(function(){if(y&&!i)return!0;var T={length:-1};y?d(T,1,{enumerable:!0,get:m}):T[1]=1,E.call(T,b,A)})}},ae93:function(s,r,o){var i=o("e163"),l=o("9112"),c=o("5135"),d=o("b622"),u=o("c430"),m=d("iterator"),h=!1,_=function(){return this},E,y,b;[].keys&&(b=[].keys(),"next"in b?(y=i(i(b)),y!==Object.prototype&&(E=y)):h=!0),E==null&&(E={}),!u&&!c(E,m)&&l(E,m,_),s.exports={IteratorPrototype:E,BUGGY_SAFARI_ITERATORS:h}},b041:function(s,r,o){var i=o("00ee"),l=o("f5df");s.exports=i?{}.toString:function(){return"[object "+l(this)+"]"}},b0c0:function(s,r,o){var i=o("83ab"),l=o("9bf2").f,c=Function.prototype,d=c.toString,u=/^\s*function ([^ (]*)/,m="name";i&&!(m in c)&&l(c,m,{configurable:!0,get:function(){try{return d.call(this).match(u)[1]}catch{return""}}})},b622:function(s,r,o){var i=o("da84"),l=o("5692"),c=o("5135"),d=o("90e3"),u=o("4930"),m=o("fdbf"),h=l("wks"),_=i.Symbol,E=m?_:_&&_.withoutSetter||d;s.exports=function(y){return c(h,y)||(u&&c(_,y)?h[y]=_[y]:h[y]=E("Symbol."+y)),h[y]}},b64b:function(s,r,o){var i=o("23e7"),l=o("7b0b"),c=o("df75"),d=o("d039"),u=d(function(){c(1)});i({target:"Object",stat:!0,forced:u},{keys:function(h){return c(l(h))}})},b727:function(s,r,o){var i=o("0366"),l=o("44ad"),c=o("7b0b"),d=o("50c4"),u=o("65f0"),m=[].push,h=function(_){var E=_==1,y=_==2,b=_==3,A=_==4,T=_==6,I=_==5||T;return function(N,x,R,M){for(var w=c(N),D=l(w),B=i(x,R,3),k=d(D.length),V=0,F=M||u,$=E?F(N,k):y?F(N,0):void 0,Y,j;k>V;V++)if((I||V in D)&&(Y=D[V],j=B(Y,V,w),_)){if(E)$[V]=j;else if(j)switch(_){case 3:return!0;case 5:return Y;case 6:return V;case 2:m.call($,Y)}else if(A)return!1}return T?-1:b||A?A:$}};s.exports={forEach:h(0),map:h(1),filter:h(2),some:h(3),every:h(4),find:h(5),findIndex:h(6)}},c04e:function(s,r,o){var i=o("861d");s.exports=function(l,c){if(!i(l))return l;var d,u;if(c&&typeof(d=l.toString)=="function"&&!i(u=d.call(l))||typeof(d=l.valueOf)=="function"&&!i(u=d.call(l))||!c&&typeof(d=l.toString)=="function"&&!i(u=d.call(l)))return u;throw TypeError("Can't convert object to primitive value")}},c430:function(s,r){s.exports=!1},c6b6:function(s,r){var o={}.toString;s.exports=function(i){return o.call(i).slice(8,-1)}},c6cd:function(s,r,o){var i=o("da84"),l=o("ce4e"),c="__core-js_shared__",d=i[c]||l(c,{});s.exports=d},c740:function(s,r,o){var i=o("23e7"),l=o("b727").findIndex,c=o("44d2"),d=o("ae40"),u="findIndex",m=!0,h=d(u);u in[]&&Array(1)[u](function(){m=!1}),i({target:"Array",proto:!0,forced:m||!h},{findIndex:function(E){return l(this,E,arguments.length>1?arguments[1]:void 0)}}),c(u)},c8ba:function(s,r){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}s.exports=o},c975:function(s,r,o){var i=o("23e7"),l=o("4d64").indexOf,c=o("a640"),d=o("ae40"),u=[].indexOf,m=!!u&&1/[1].indexOf(1,-0)<0,h=c("indexOf"),_=d("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:m||!h||!_},{indexOf:function(y){return m?u.apply(this,arguments)||0:l(this,y,arguments.length>1?arguments[1]:void 0)}})},ca84:function(s,r,o){var i=o("5135"),l=o("fc6a"),c=o("4d64").indexOf,d=o("d012");s.exports=function(u,m){var h=l(u),_=0,E=[],y;for(y in h)!i(d,y)&&i(h,y)&&E.push(y);for(;m.length>_;)i(h,y=m[_++])&&(~c(E,y)||E.push(y));return E}},caad:function(s,r,o){var i=o("23e7"),l=o("4d64").includes,c=o("44d2"),d=o("ae40"),u=d("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:!u},{includes:function(h){return l(this,h,arguments.length>1?arguments[1]:void 0)}}),c("includes")},cc12:function(s,r,o){var i=o("da84"),l=o("861d"),c=i.document,d=l(c)&&l(c.createElement);s.exports=function(u){return d?c.createElement(u):{}}},ce4e:function(s,r,o){var i=o("da84"),l=o("9112");s.exports=function(c,d){try{l(i,c,d)}catch{i[c]=d}return d}},d012:function(s,r){s.exports={}},d039:function(s,r){s.exports=function(o){try{return!!o()}catch{return!0}}},d066:function(s,r,o){var i=o("428f"),l=o("da84"),c=function(d){return typeof d=="function"?d:void 0};s.exports=function(d,u){return arguments.length<2?c(i[d])||c(l[d]):i[d]&&i[d][u]||l[d]&&l[d][u]}},d1e7:function(s,r,o){var i={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,c=l&&!i.call({1:2},1);r.f=c?function(u){var m=l(this,u);return!!m&&m.enumerable}:i},d28b:function(s,r,o){var i=o("746f");i("iterator")},d2bb:function(s,r,o){var i=o("825a"),l=o("3bbe");s.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var c=!1,d={},u;try{u=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,u.call(d,[]),c=d instanceof Array}catch{}return function(h,_){return i(h),l(_),c?u.call(h,_):h.__proto__=_,h}}():void 0)},d3b7:function(s,r,o){var i=o("00ee"),l=o("6eeb"),c=o("b041");i||l(Object.prototype,"toString",c,{unsafe:!0})},d44e:function(s,r,o){var i=o("9bf2").f,l=o("5135"),c=o("b622"),d=c("toStringTag");s.exports=function(u,m,h){u&&!l(u=h?u:u.prototype,d)&&i(u,d,{configurable:!0,value:m})}},d58f:function(s,r,o){var i=o("1c0b"),l=o("7b0b"),c=o("44ad"),d=o("50c4"),u=function(m){return function(h,_,E,y){i(_);var b=l(h),A=c(b),T=d(b.length),I=m?T-1:0,N=m?-1:1;if(E<2)for(;;){if(I in A){y=A[I],I+=N;break}if(I+=N,m?I<0:T<=I)throw TypeError("Reduce of empty array with no initial value")}for(;m?I>=0:T>I;I+=N)I in A&&(y=_(y,A[I],I,b));return y}};s.exports={left:u(!1),right:u(!0)}},d784:function(s,r,o){o("ac1f");var i=o("6eeb"),l=o("d039"),c=o("b622"),d=o("9263"),u=o("9112"),m=c("species"),h=!l(function(){var A=/./;return A.exec=function(){var T=[];return T.groups={a:"7"},T},"".replace(A,"$<a>")!=="7"}),_=function(){return"a".replace(/./,"$0")==="$0"}(),E=c("replace"),y=function(){return/./[E]?/./[E]("a","$0")==="":!1}(),b=!l(function(){var A=/(?:)/,T=A.exec;A.exec=function(){return T.apply(this,arguments)};var I="ab".split(A);return I.length!==2||I[0]!=="a"||I[1]!=="b"});s.exports=function(A,T,I,N){var x=c(A),R=!l(function(){var V={};return V[x]=function(){return 7},""[A](V)!=7}),M=R&&!l(function(){var V=!1,F=/a/;return A==="split"&&(F={},F.constructor={},F.constructor[m]=function(){return F},F.flags="",F[x]=/./[x]),F.exec=function(){return V=!0,null},F[x](""),!V});if(!R||!M||A==="replace"&&!(h&&_&&!y)||A==="split"&&!b){var w=/./[x],D=I(x,""[A],function(V,F,$,Y,j){return F.exec===d?R&&!j?{done:!0,value:w.call(F,$,Y)}:{done:!0,value:V.call($,F,Y)}:{done:!1}},{REPLACE_KEEPS_$0:_,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:y}),B=D[0],k=D[1];i(String.prototype,A,B),i(RegExp.prototype,x,T==2?function(V,F){return k.call(V,this,F)}:function(V){return k.call(V,this)})}N&&u(RegExp.prototype[x],"sham",!0)}},d81d:function(s,r,o){var i=o("23e7"),l=o("b727").map,c=o("1dde"),d=o("ae40"),u=c("map"),m=d("map");i({target:"Array",proto:!0,forced:!u||!m},{map:function(_){return l(this,_,arguments.length>1?arguments[1]:void 0)}})},da84:function(s,r,o){(function(i){var l=function(c){return c&&c.Math==Math&&c};s.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof i=="object"&&i)||Function("return this")()}).call(this,o("c8ba"))},dbb4:function(s,r,o){var i=o("23e7"),l=o("83ab"),c=o("56ef"),d=o("fc6a"),u=o("06cf"),m=o("8418");i({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(_){for(var E=d(_),y=u.f,b=c(E),A={},T=0,I,N;b.length>T;)N=y(E,I=b[T++]),N!==void 0&&m(A,I,N);return A}})},dbf1:function(s,r,o){(function(i){o.d(r,"a",function(){return c});function l(){return typeof window<"u"?window.console:i.console}var c=l()}).call(this,o("c8ba"))},ddb0:function(s,r,o){var i=o("da84"),l=o("fdbc"),c=o("e260"),d=o("9112"),u=o("b622"),m=u("iterator"),h=u("toStringTag"),_=c.values;for(var E in l){var y=i[E],b=y&&y.prototype;if(b){if(b[m]!==_)try{d(b,m,_)}catch{b[m]=_}if(b[h]||d(b,h,E),l[E]){for(var A in c)if(b[A]!==c[A])try{d(b,A,c[A])}catch{b[A]=c[A]}}}}},df75:function(s,r,o){var i=o("ca84"),l=o("7839");s.exports=Object.keys||function(d){return i(d,l)}},e01a:function(s,r,o){var i=o("23e7"),l=o("83ab"),c=o("da84"),d=o("5135"),u=o("861d"),m=o("9bf2").f,h=o("e893"),_=c.Symbol;if(l&&typeof _=="function"&&(!("description"in _.prototype)||_().description!==void 0)){var E={},y=function(){var x=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),R=this instanceof y?new _(x):x===void 0?_():_(x);return x===""&&(E[R]=!0),R};h(y,_);var b=y.prototype=_.prototype;b.constructor=y;var A=b.toString,T=String(_("test"))=="Symbol(test)",I=/^Symbol\((.*)\)[^)]+$/;m(b,"description",{configurable:!0,get:function(){var x=u(this)?this.valueOf():this,R=A.call(x);if(d(E,x))return"";var M=T?R.slice(7,-1):R.replace(I,"$1");return M===""?void 0:M}}),i({global:!0,forced:!0},{Symbol:y})}},e163:function(s,r,o){var i=o("5135"),l=o("7b0b"),c=o("f772"),d=o("e177"),u=c("IE_PROTO"),m=Object.prototype;s.exports=d?Object.getPrototypeOf:function(h){return h=l(h),i(h,u)?h[u]:typeof h.constructor=="function"&&h instanceof h.constructor?h.constructor.prototype:h instanceof Object?m:null}},e177:function(s,r,o){var i=o("d039");s.exports=!i(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},e260:function(s,r,o){var i=o("fc6a"),l=o("44d2"),c=o("3f8c"),d=o("69f3"),u=o("7dd0"),m="Array Iterator",h=d.set,_=d.getterFor(m);s.exports=u(Array,"Array",function(E,y){h(this,{type:m,target:i(E),index:0,kind:y})},function(){var E=_(this),y=E.target,b=E.kind,A=E.index++;return!y||A>=y.length?(E.target=void 0,{value:void 0,done:!0}):b=="keys"?{value:A,done:!1}:b=="values"?{value:y[A],done:!1}:{value:[A,y[A]],done:!1}},"values"),c.Arguments=c.Array,l("keys"),l("values"),l("entries")},e439:function(s,r,o){var i=o("23e7"),l=o("d039"),c=o("fc6a"),d=o("06cf").f,u=o("83ab"),m=l(function(){d(1)}),h=!u||m;i({target:"Object",stat:!0,forced:h,sham:!u},{getOwnPropertyDescriptor:function(E,y){return d(c(E),y)}})},e538:function(s,r,o){var i=o("b622");r.f=i},e893:function(s,r,o){var i=o("5135"),l=o("56ef"),c=o("06cf"),d=o("9bf2");s.exports=function(u,m){for(var h=l(m),_=d.f,E=c.f,y=0;y<h.length;y++){var b=h[y];i(u,b)||_(u,b,E(m,b))}}},e8b5:function(s,r,o){var i=o("c6b6");s.exports=Array.isArray||function(c){return i(c)=="Array"}},e95a:function(s,r,o){var i=o("b622"),l=o("3f8c"),c=i("iterator"),d=Array.prototype;s.exports=function(u){return u!==void 0&&(l.Array===u||d[c]===u)}},f5df:function(s,r,o){var i=o("00ee"),l=o("c6b6"),c=o("b622"),d=c("toStringTag"),u=l(function(){return arguments}())=="Arguments",m=function(h,_){try{return h[_]}catch{}};s.exports=i?l:function(h){var _,E,y;return h===void 0?"Undefined":h===null?"Null":typeof(E=m(_=Object(h),d))=="string"?E:u?l(_):(y=l(_))=="Object"&&typeof _.callee=="function"?"Arguments":y}},f772:function(s,r,o){var i=o("5692"),l=o("90e3"),c=i("keys");s.exports=function(d){return c[d]||(c[d]=l(d))}},fb15:function(s,r,o){if(o.r(r),typeof window<"u"){var i=window.document.currentScript;{var l=o("8875");i=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var c=i&&i.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);c&&(o.p=c[1])}o("99af"),o("4de4"),o("4160"),o("c975"),o("d81d"),o("a434"),o("159b"),o("a4d3"),o("e439"),o("dbb4"),o("b64b");function d(pe,ye,Be){return ye in pe?Object.defineProperty(pe,ye,{value:Be,enumerable:!0,configurable:!0,writable:!0}):pe[ye]=Be,pe}function u(pe,ye){var Be=Object.keys(pe);if(Object.getOwnPropertySymbols){var ne=Object.getOwnPropertySymbols(pe);ye&&(ne=ne.filter(function(re){return Object.getOwnPropertyDescriptor(pe,re).enumerable})),Be.push.apply(Be,ne)}return Be}function m(pe){for(var ye=1;ye<arguments.length;ye++){var Be=arguments[ye]!=null?arguments[ye]:{};ye%2?u(Object(Be),!0).forEach(function(ne){d(pe,ne,Be[ne])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(Be)):u(Object(Be)).forEach(function(ne){Object.defineProperty(pe,ne,Object.getOwnPropertyDescriptor(Be,ne))})}return pe}function h(pe){if(Array.isArray(pe))return pe}o("e01a"),o("d28b"),o("e260"),o("d3b7"),o("3ca3"),o("ddb0");function _(pe,ye){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(pe)))){var Be=[],ne=!0,re=!1,he=void 0;try{for(var Ee=pe[Symbol.iterator](),we;!(ne=(we=Ee.next()).done)&&(Be.push(we.value),!(ye&&Be.length===ye));ne=!0);}catch(be){re=!0,he=be}finally{try{!ne&&Ee.return!=null&&Ee.return()}finally{if(re)throw he}}return Be}}o("a630"),o("fb6a"),o("b0c0"),o("25f0");function E(pe,ye){(ye==null||ye>pe.length)&&(ye=pe.length);for(var Be=0,ne=new Array(ye);Be<ye;Be++)ne[Be]=pe[Be];return ne}function y(pe,ye){if(pe){if(typeof pe=="string")return E(pe,ye);var Be=Object.prototype.toString.call(pe).slice(8,-1);if(Be==="Object"&&pe.constructor&&(Be=pe.constructor.name),Be==="Map"||Be==="Set")return Array.from(pe);if(Be==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Be))return E(pe,ye)}}function b(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A(pe,ye){return h(pe)||_(pe,ye)||y(pe,ye)||b()}function T(pe){if(Array.isArray(pe))return E(pe)}function I(pe){if(typeof Symbol<"u"&&Symbol.iterator in Object(pe))return Array.from(pe)}function N(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x(pe){return T(pe)||I(pe)||y(pe)||N()}var R=o("a352"),M=o.n(R);function w(pe){pe.parentElement!==null&&pe.parentElement.removeChild(pe)}function D(pe,ye,Be){var ne=Be===0?pe.children[0]:pe.children[Be-1].nextSibling;pe.insertBefore(ye,ne)}var B=o("dbf1");o("13d5"),o("4fad"),o("ac1f"),o("5319");function k(pe){var ye=Object.create(null);return function(ne){var re=ye[ne];return re||(ye[ne]=pe(ne))}}var V=/-(\w)/g,F=k(function(pe){return pe.replace(V,function(ye,Be){return Be.toUpperCase()})});o("5db7"),o("73d9");var $=["Start","Add","Remove","Update","End"],Y=["Choose","Unchoose","Sort","Filter","Clone"],j=["Move"],U=[j,$,Y].flatMap(function(pe){return pe}).map(function(pe){return"on".concat(pe)}),J={manage:j,manageAndEmit:$,emit:Y};function te(pe){return U.indexOf(pe)!==-1}o("caad"),o("2ca0");var q=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function K(pe){return q.includes(pe)}function W(pe){return["transition-group","TransitionGroup"].includes(pe)}function ee(pe){return["id","class","role","style"].includes(pe)||pe.startsWith("data-")||pe.startsWith("aria-")||pe.startsWith("on")}function ae(pe){return pe.reduce(function(ye,Be){var ne=A(Be,2),re=ne[0],he=ne[1];return ye[re]=he,ye},{})}function ve(pe){var ye=pe.$attrs,Be=pe.componentData,ne=Be===void 0?{}:Be,re=ae(Object.entries(ye).filter(function(he){var Ee=A(he,2),we=Ee[0];return Ee[1],ee(we)}));return m(m({},re),ne)}function Ce(pe){var ye=pe.$attrs,Be=pe.callBackBuilder,ne=ae(ue(ye));Object.entries(Be).forEach(function(he){var Ee=A(he,2),we=Ee[0],be=Ee[1];J[we].forEach(function(Te){ne["on".concat(Te)]=be(Te)})});var re="[data-draggable]".concat(ne.draggable||"");return m(m({},ne),{},{draggable:re})}function ue(pe){return Object.entries(pe).filter(function(ye){var Be=A(ye,2),ne=Be[0];return Be[1],!ee(ne)}).map(function(ye){var Be=A(ye,2),ne=Be[0],re=Be[1];return[F(ne),re]}).filter(function(ye){var Be=A(ye,2),ne=Be[0];return Be[1],!te(ne)})}o("c740");function ge(pe,ye){if(!(pe instanceof ye))throw new TypeError("Cannot call a class as a function")}function Me(pe,ye){for(var Be=0;Be<ye.length;Be++){var ne=ye[Be];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(pe,ne.key,ne)}}function We(pe,ye,Be){return ye&&Me(pe.prototype,ye),pe}var Ue=function(ye){var Be=ye.el;return Be},Re=function(ye,Be){return ye.__draggable_context=Be},Le=function(ye){return ye.__draggable_context},Xe=function(){function pe(ye){var Be=ye.nodes,ne=Be.header,re=Be.default,he=Be.footer,Ee=ye.root,we=ye.realList;ge(this,pe),this.defaultNodes=re,this.children=[].concat(x(ne),x(re),x(he)),this.externalComponent=Ee.externalComponent,this.rootTransition=Ee.transition,this.tag=Ee.tag,this.realList=we}return We(pe,[{key:"render",value:function(Be,ne){var re=this.tag,he=this.children,Ee=this._isRootComponent,we=Ee?{default:function(){return he}}:he;return Be(re,ne,we)}},{key:"updated",value:function(){var Be=this.defaultNodes,ne=this.realList;Be.forEach(function(re,he){Re(Ue(re),{element:ne[he],index:he})})}},{key:"getUnderlyingVm",value:function(Be){return Le(Be)}},{key:"getVmIndexFromDomIndex",value:function(Be,ne){var re=this.defaultNodes,he=re.length,Ee=ne.children,we=Ee.item(Be);if(we===null)return he;var be=Le(we);if(be)return be.index;if(he===0)return 0;var Te=Ue(re[0]),Ne=x(Ee).findIndex(function(Ie){return Ie===Te});return Be<Ne?0:he}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),pe}(),et=o("8bbf");function yt(pe,ye){var Be=pe[ye];return Be?Be():[]}function Dt(pe){var ye=pe.$slots,Be=pe.realList,ne=pe.getKey,re=Be||[],he=["header","footer"].map(function(Ie){return yt(ye,Ie)}),Ee=A(he,2),we=Ee[0],be=Ee[1],Te=ye.item;if(!Te)throw new Error("draggable element must have an item slot");var Ne=re.flatMap(function(Ie,$e){return Te({element:Ie,index:$e}).map(function(ke){return ke.key=ne(Ie),ke.props=m(m({},ke.props||{}),{},{"data-draggable":!0}),ke})});if(Ne.length!==re.length)throw new Error("Item slot must have only one child");return{header:we,footer:be,default:Ne}}function X(pe){var ye=W(pe),Be=!K(pe)&&!ye;return{transition:ye,externalComponent:Be,tag:Be?Object(et.resolveComponent)(pe):ye?et.TransitionGroup:pe}}function se(pe){var ye=pe.$slots,Be=pe.tag,ne=pe.realList,re=pe.getKey,he=Dt({$slots:ye,realList:ne,getKey:re}),Ee=X(Be);return new Xe({nodes:he,root:Ee,realList:ne})}function ie(pe,ye){var Be=this;Object(et.nextTick)(function(){return Be.$emit(pe.toLowerCase(),ye)})}function fe(pe){var ye=this;return function(Be,ne){if(ye.realList!==null)return ye["onDrag".concat(pe)](Be,ne)}}function me(pe){var ye=this,Be=fe.call(this,pe);return function(ne,re){Be.call(ye,ne,re),ie.call(ye,pe,ne)}}var De=null,Ye={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(ye){return ye}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},ze=["update:modelValue","change"].concat(x([].concat(x(J.manageAndEmit),x(J.emit)).map(function(pe){return pe.toLowerCase()}))),He=Object(et.defineComponent)({name:"draggable",inheritAttrs:!1,props:Ye,emits:ze,data:function(){return{error:!1}},render:function(){try{this.error=!1;var ye=this.$slots,Be=this.$attrs,ne=this.tag,re=this.componentData,he=this.realList,Ee=this.getKey,we=se({$slots:ye,tag:ne,realList:he,getKey:Ee});this.componentStructure=we;var be=ve({$attrs:Be,componentData:re});return we.render(et.h,be)}catch(Te){return this.error=!0,Object(et.h)("pre",{style:{color:"red"}},Te.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&B.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var ye=this;if(!this.error){var Be=this.$attrs,ne=this.$el,re=this.componentStructure;re.updated();var he=Ce({$attrs:Be,callBackBuilder:{manageAndEmit:function(be){return me.call(ye,be)},emit:function(be){return ie.bind(ye,be)},manage:function(be){return fe.call(ye,be)}}}),Ee=ne.nodeType===1?ne:ne.parentElement;this._sortable=new M.a(Ee,he),this.targetDomElement=Ee,Ee.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var ye=this.list;return ye||this.modelValue},getKey:function(){var ye=this.itemKey;return typeof ye=="function"?ye:function(Be){return Be[ye]}}},watch:{$attrs:{handler:function(ye){var Be=this._sortable;Be&&ue(ye).forEach(function(ne){var re=A(ne,2),he=re[0],Ee=re[1];Be.option(he,Ee)})},deep:!0}},methods:{getUnderlyingVm:function(ye){return this.componentStructure.getUnderlyingVm(ye)||null},getUnderlyingPotencialDraggableComponent:function(ye){return ye.__draggable_component__},emitChanges:function(ye){var Be=this;Object(et.nextTick)(function(){return Be.$emit("change",ye)})},alterList:function(ye){if(this.list){ye(this.list);return}var Be=x(this.modelValue);ye(Be),this.$emit("update:modelValue",Be)},spliceList:function(){var ye=arguments,Be=function(re){return re.splice.apply(re,x(ye))};this.alterList(Be)},updatePosition:function(ye,Be){var ne=function(he){return he.splice(Be,0,he.splice(ye,1)[0])};this.alterList(ne)},getRelatedContextFromMoveEvent:function(ye){var Be=ye.to,ne=ye.related,re=this.getUnderlyingPotencialDraggableComponent(Be);if(!re)return{component:re};var he=re.realList,Ee={list:he,component:re};if(Be!==ne&&he){var we=re.getUnderlyingVm(ne)||{};return m(m({},we),Ee)}return Ee},getVmIndexFromDomIndex:function(ye){return this.componentStructure.getVmIndexFromDomIndex(ye,this.targetDomElement)},onDragStart:function(ye){this.context=this.getUnderlyingVm(ye.item),ye.item._underlying_vm_=this.clone(this.context.element),De=ye.item},onDragAdd:function(ye){var Be=ye.item._underlying_vm_;if(Be!==void 0){w(ye.item);var ne=this.getVmIndexFromDomIndex(ye.newIndex);this.spliceList(ne,0,Be);var re={element:Be,newIndex:ne};this.emitChanges({added:re})}},onDragRemove:function(ye){if(D(this.$el,ye.item,ye.oldIndex),ye.pullMode==="clone"){w(ye.clone);return}var Be=this.context,ne=Be.index,re=Be.element;this.spliceList(ne,1);var he={element:re,oldIndex:ne};this.emitChanges({removed:he})},onDragUpdate:function(ye){w(ye.item),D(ye.from,ye.item,ye.oldIndex);var Be=this.context.index,ne=this.getVmIndexFromDomIndex(ye.newIndex);this.updatePosition(Be,ne);var re={element:this.context.element,oldIndex:Be,newIndex:ne};this.emitChanges({moved:re})},computeFutureIndex:function(ye,Be){if(!ye.element)return 0;var ne=x(Be.to.children).filter(function(we){return we.style.display!=="none"}),re=ne.indexOf(Be.related),he=ye.component.getVmIndexFromDomIndex(re),Ee=ne.indexOf(De)!==-1;return Ee||!Be.willInsertAfter?he:he+1},onDragMove:function(ye,Be){var ne=this.move,re=this.realList;if(!ne||!re)return!0;var he=this.getRelatedContextFromMoveEvent(ye),Ee=this.computeFutureIndex(he,ye),we=m(m({},this.context),{},{futureIndex:Ee}),be=m(m({},ye),{},{relatedContext:he,draggedContext:we});return ne(be,Be)},onDragEnd:function(){De=null}}}),xe=He;r.default=xe},fb6a:function(s,r,o){var i=o("23e7"),l=o("861d"),c=o("e8b5"),d=o("23cb"),u=o("50c4"),m=o("fc6a"),h=o("8418"),_=o("b622"),E=o("1dde"),y=o("ae40"),b=E("slice"),A=y("slice",{ACCESSORS:!0,0:0,1:2}),T=_("species"),I=[].slice,N=Math.max;i({target:"Array",proto:!0,forced:!b||!A},{slice:function(R,M){var w=m(this),D=u(w.length),B=d(R,D),k=d(M===void 0?D:M,D),V,F,$;if(c(w)&&(V=w.constructor,typeof V=="function"&&(V===Array||c(V.prototype))?V=void 0:l(V)&&(V=V[T],V===null&&(V=void 0)),V===Array||V===void 0))return I.call(w,B,k);for(F=new(V===void 0?Array:V)(N(k-B,0)),$=0;B<k;B++,$++)B in w&&h(F,$,w[B]);return F.length=$,F}})},fc6a:function(s,r,o){var i=o("44ad"),l=o("1d80");s.exports=function(c){return i(l(c))}},fdbc:function(s,r){s.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(s,r,o){var i=o("4930");s.exports=i&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(mM);var Gbe=mM.exports;const yd=mE(Gbe),Vbe={components:{Draggable:yd,ToggleSwitch:mo},props:{preChatFields:{type:Array,default:()=>[]}},emits:["update","dragEnd"],data(){return{preChatFieldOptions:this.preChatFields}},watch:{preChatFields(){this.preChatFieldOptions=this.preChatFields}},methods:{isFieldEditable(t){return!t.enabled},handlePreChatFieldOptions(t,n,a){this.$emit("update",t,n,a)},onDragEnd(){this.$emit("dragEnd",this.preChatFieldOptions)}}},Hbe={class:"border-b border-n-weak"},jbe={class:"pre-chat-field"},Wbe={class:"pre-chat-field"},zbe={class:"pre-chat-field"},Ybe=["onUpdate:modelValue","value","disabled","onClick"],Kbe=["onUpdate:modelValue","disabled"],Xbe=["onUpdate:modelValue","disabled"];function qbe(t,n,a,e,s,r){const o=H("fluent-icon"),i=H("ToggleSwitch"),l=H("Draggable");return p(),L(l,{modelValue:s.preChatFieldOptions,"onUpdate:modelValue":n[0]||(n[0]=c=>s.preChatFieldOptions=c),tag:"tbody","item-key":"name",onEnd:r.onDragEnd},{item:z(({element:c})=>[f("tr",Hbe,[f("td",jbe,[v(o,{icon:"drag"})]),f("td",Wbe,[v(i,{"model-value":c.enabled,onChange:d=>r.handlePreChatFieldOptions(d,"enabled",c)},null,8,["model-value","onChange"])]),f("td",{class:oe(["pre-chat-field",{"disabled-text":!c.enabled}])},C(c.name),3),f("td",{class:oe(["pre-chat-field",{"disabled-text":!c.enabled}])},C(c.type),3),f("td",zbe,[ce(f("input",{"onUpdate:modelValue":d=>c.required=d,type:"checkbox",value:`${c.name}-required`,disabled:!c.enabled,onClick:d=>r.handlePreChatFieldOptions(d,"required",c)},null,8,Ybe),[[bn,c.required]])]),f("td",{class:oe(["pre-chat-field",{"disabled-text":!c.enabled}])},[ce(f("input",{"onUpdate:modelValue":d=>c.label=d,type:"text",disabled:r.isFieldEditable(c)},null,8,Kbe),[[Et,c.label]])],2),f("td",{class:oe(["pre-chat-field",{"disabled-text":!c.enabled}])},[ce(f("input",{"onUpdate:modelValue":d=>c.placeholder=d,type:"text",disabled:r.isFieldEditable(c)},null,8,Xbe),[[Et,c.placeholder]])],2)])]),_:1},8,["modelValue","onEnd"])}const Zbe=G(Vbe,[["render",qbe],["__scopeId","data-v-ac454c8f"],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/PreChatForm/PreChatFields.vue"]]),Gm=Object.fromEntries(Object.entries(uk).filter(([t])=>t.includes("en"))).en,Qbe={emailAddress:{key:"EMAIL_ADDRESS",label:"Email Id",placeholder:"Please enter your email address"},fullName:{key:"FULL_NAME",label:"Full Name",placeholder:"Please enter your full name"},phoneNumber:{key:"PHONE_NUMBER",label:"Phone Number",placeholder:"Please enter your phone number"}},Jbe=({key:t,label:n})=>Gm.PRE_CHAT_FORM.FIELDS[t]?Gm.PRE_CHAT_FORM.FIELDS[t].LABEL:n,eve=({key:t,placeholder:n})=>Gm.PRE_CHAT_FORM.FIELDS[t]?Gm.PRE_CHAT_FORM.FIELDS[t].PLACEHOLDER:n,tve=({standardFields:t,customAttributes:n})=>{let a=[];const{pre_chat_fields:e}=t;return n.forEach(s=>{e.find(o=>o.name===s.attribute_key)||a.push({label:s.attribute_display_name,placeholder:s.attribute_display_name,name:s.attribute_key,type:s.attribute_display_type,values:s.attribute_values,field_type:s.attribute_model,regex_pattern:s.regex_pattern,regex_cue:s.regex_cue,required:!1,enabled:!1})}),a},nve=({preChatFields:t})=>t.map(n=>({...n,label:Jbe({key:n.name,label:n.label?n.label:n.name}),placeholder:eve({key:n.name,placeholder:n.placeholder?n.placeholder:n.name})})),ave=({preChatFormOptions:t={},customAttributes:n=[]})=>{const{pre_chat_message:a,pre_chat_fields:e}=t;let s={},r={};const o=nve({preChatFields:e});return s=tve({standardFields:{pre_chat_fields:o},customAttributes:n}),r=[...o,...s],{pre_chat_message:a,pre_chat_fields:r}},sve={components:{PreChatFields:Zbe,WootMessageEditor:ai,NextButton:Se},props:{inbox:{type:Object,default:()=>({})}},data(){return{preChatFormEnabled:!1,preChatMessage:"",preChatFields:[]}},computed:{..._t({uiFlags:"inboxes/getUIFlags",customAttributes:"attributes/getAttributes"}),preChatFieldOptions(){const{pre_chat_form_options:t}=this.inbox;return ave({preChatFormOptions:t,customAttributes:this.customAttributes})}},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){const{pre_chat_form_enabled:t}=this.inbox;this.preChatFormEnabled=t;const{pre_chat_message:n,pre_chat_fields:a}=this.preChatFieldOptions||{};this.preChatMessage=n,this.preChatFields=a},isFieldEditable(t){return!!Qbe[t.name]||!t.enabled},handlePreChatFieldOptions(t,n,a){this.preChatFields.forEach((e,s)=>{e.name===a.name&&(this.preChatFields[s][n]=!a[n])})},changePreChatFieldFieldsOrder(t){this.preChatFields=t},async updateInbox(){try{const t={id:this.inbox.id,formData:!1,channel:{pre_chat_form_enabled:this.preChatFormEnabled,pre_chat_form_options:{pre_chat_message:this.preChatMessage,pre_chat_fields:this.preChatFields}}};await this.$store.dispatch("inboxes/updateInbox",t),Z(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch{Z(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}}}},ove={class:"mx-8 my-2 text-base"},rve={class:"mx-0 mt-6 mb-3"},ive={class:"w-1/4"},lve={value:!0},cve={value:!1},dve={key:0},uve={class:"mt-4"},pve={class:"table w-full table-striped mt-4"},fve={class:"thead-dark"},mve={class:"[&>th]:font-semibold [&>th]:tracking-[1px] ltr:[&>th]:text-left rtl:[&>th]:text-right [&>th]:px-2.5 [&>th]:uppercase [&>th]:text-n-slate-12"},hve={scope:"col"},_ve={scope:"col"},gve={scope:"col"},bve={scope:"col"},vve={scope:"col"},Eve={class:"w-auto my-4"};function Sve(t,n,a,e,s,r){const o=H("WootMessageEditor"),i=H("PreChatFields"),l=H("NextButton");return p(),g("div",ove,[f("div",rve,C(t.$t("INBOX_MGMT.PRE_CHAT_FORM.DESCRIPTION")),1),f("form",{class:"flex flex-col",onSubmit:n[2]||(n[2]=Ve((...c)=>r.updateInbox&&r.updateInbox(...c),["prevent"]))},[f("label",ive,[Oe(C(t.$t("INBOX_MGMT.PRE_CHAT_FORM.ENABLE.LABEL"))+" ",1),ce(f("select",{"onUpdate:modelValue":n[0]||(n[0]=c=>s.preChatFormEnabled=c)},[f("option",lve,C(t.$t("INBOX_MGMT.PRE_CHAT_FORM.ENABLE.OPTIONS.ENABLED")),1),f("option",cve,C(t.$t("INBOX_MGMT.PRE_CHAT_FORM.ENABLE.OPTIONS.DISABLED")),1)],512),[[Un,s.preChatFormEnabled]])]),s.preChatFormEnabled?(p(),g("div",dve,[f("div",null,[f("label",null,C(t.$t("INBOX_MGMT.PRE_CHAT_FORM.PRE_CHAT_MESSAGE.LABEL")),1),v(o,{modelValue:s.preChatMessage,"onUpdate:modelValue":n[1]||(n[1]=c=>s.preChatMessage=c),class:"message-editor",placeholder:t.$t("INBOX_MGMT.PRE_CHAT_FORM.PRE_CHAT_MESSAGE.PLACEHOLDER")},null,8,["modelValue","placeholder"])]),f("div",uve,[f("label",null,C(t.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS")),1),f("table",pve,[f("thead",fve,[f("tr",mve,[n[3]||(n[3]=f("th",{scope:"col"},null,-1)),n[4]||(n[4]=f("th",{scope:"col"},null,-1)),f("th",hve,C(t.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS_HEADER.KEY")),1),f("th",_ve,C(t.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS_HEADER.TYPE")),1),f("th",gve,C(t.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS_HEADER.REQUIRED")),1),f("th",bve,C(t.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS_HEADER.LABEL")),1),f("th",vve,C(t.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS_HEADER.PLACE_HOLDER")),1)])]),v(i,{"pre-chat-fields":s.preChatFields,onUpdate:r.handlePreChatFieldOptions,onDragEnd:r.changePreChatFieldFieldsOrder},null,8,["pre-chat-fields","onUpdate","onDragEnd"])])])])):O("v-if",!0),f("div",Eve,[v(l,{type:"submit",label:t.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE_PRE_CHAT_FORM_SETTINGS"),"is-loading":t.uiFlags.isUpdating},null,8,["label","is-loading"])])],32)])}const Tve=G(sve,[["render",Sve],["__scopeId","data-v-c319601e"],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/PreChatForm/Settings.vue"]]),Kp=pk(30),Ave={components:{},props:{dayName:{type:String,required:!0},timeSlot:{type:Object,default:()=>({from:"",to:""})}},emits:["update"],computed:{fromTimeSlots(){return Kp},toTimeSlots(){return Kp.filter(t=>t!=="12:00 AM")},isDayEnabled:{get(){return!!(this.timeSlot.from&&this.timeSlot.to)},set(t){const n=t?{...this.timeSlot,from:Kp[0],to:Kp[16],valid:!0,openAllDay:!1}:{...this.timeSlot,from:"",to:"",valid:!1,openAllDay:!1};this.$emit("update",n)}},fromTime:{get(){return this.timeSlot.from},set(t){const n=yc(t,"hh:mm a",new Date),a=bf(this.toDate,n)/60>0;this.$emit("update",{...this.timeSlot,from:t,valid:a})}},toTime:{get(){return this.timeSlot.to},set(t){const n=yc(t,"hh:mm a",new Date);if(t==="12:00 AM")this.$emit("update",{...this.timeSlot,to:t,valid:!0});else{const a=bf(n,this.fromDate)/60>0;this.$emit("update",{...this.timeSlot,to:t,valid:a})}}},fromDate(){return yc(this.fromTime,"hh:mm a",new Date)},toDate(){return yc(this.toTime,"hh:mm a",new Date)},totalHours(){if(this.timeSlot.openAllDay)return"24h";const t=bf(this.toDate,this.fromDate),[n,a]=[Math.floor(t/60),t%60];return[n&&`${n}h`,a&&`${a}m`].filter(Boolean).join(" ")||"0m"},hasError(){return!this.timeSlot.valid},isOpenAllDay:{get(){return this.timeSlot.openAllDay},set(t){t?this.$emit("update",{...this.timeSlot,from:"12:00 AM",to:"11:59 PM",valid:!0,openAllDay:t}):this.$emit("update",{...this.timeSlot,from:"09:00 AM",to:"05:00 PM",valid:!0,openAllDay:t})}}}},yve={class:"day-wrap flex py-2 gap-1 items-center px-0 min-h-[3rem] box-content border-b border-solid border-n-weak"},Ive={class:"checkbox-wrap flex items-center"},Cve=["title"],Ove={class:"day flex items-center py-0 px-3 text-sm font-medium flex-shrink-0 min-w-28"},Nve={key:0,class:"flex flex-col flex-shrink-0 flex-grow relative"},xve={class:"flex items-center flex-shrink-0 flex-grow"},Rve={class:"checkbox-wrap flex items-center open-all-day mr-6"},wve=["title"],Mve={class:"text-sm font-medium ml-1"},Lve={class:"separator-icon flex items-center py-0 px-3"},Dve={key:0,class:"date-error pt-1"},Pve={class:"error text-xs text-n-ruby-9"},kve={key:1,class:"flex items-center flex-shrink-0 flex-grow text-sm text-n-slate-11"},Bve={key:0,class:"label bg-n-brand/10 dark:bg-n-brand/30 text-n-blue-text text-xs inline-block px-2 py-1 rounded-lg cursor-default whitespace-nowrap"};function Fve(t,n,a,e,s,r){const o=H("multiselect"),i=H("fluent-icon");return p(),g("div",yve,[f("div",Ive,[ce(f("input",{"onUpdate:modelValue":n[0]||(n[0]=l=>r.isDayEnabled=l),name:"enable-day",class:"m-0",type:"checkbox",title:t.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.ENABLE")},null,8,Cve),[[bn,r.isDayEnabled]])]),f("div",Ove,[f("span",null,C(a.dayName),1)]),r.isDayEnabled?(p(),g("div",Nve,[f("div",xve,[f("div",Rve,[ce(f("input",{"onUpdate:modelValue":n[1]||(n[1]=l=>r.isOpenAllDay=l),name:"enable-open-all-day",class:"enable-checkbox text-sm font-medium",type:"checkbox",title:t.$t("INBOX_MGMT.BUSINESS_HOURS.ALL_DAY")},null,8,wve),[[bn,r.isOpenAllDay]]),f("span",Mve,C(t.$t("INBOX_MGMT.BUSINESS_HOURS.ALL_DAY")),1)]),v(o,{modelValue:r.fromTime,"onUpdate:modelValue":n[2]||(n[2]=l=>r.fromTime=l),options:r.fromTimeSlots,"deselect-label":"","select-label":"","selected-label":"",placeholder:t.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.CHOOSE"),"allow-empty":!1,disabled:r.isOpenAllDay},null,8,["modelValue","options","placeholder","disabled"]),f("div",Lve,[v(i,{icon:"subtract",type:"solid",size:"16"})]),v(o,{modelValue:r.toTime,"onUpdate:modelValue":n[3]||(n[3]=l=>r.toTime=l),options:r.toTimeSlots,"deselect-label":"","select-label":"","selected-label":"",placeholder:t.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.CHOOSE"),"allow-empty":!1,disabled:r.isOpenAllDay},null,8,["modelValue","options","placeholder","disabled"])]),r.hasError?(p(),g("div",Dve,[f("span",Pve,C(t.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.VALIDATION_ERROR")),1)])):O("v-if",!0)])):(p(),g("div",kve,[f("span",null,C(t.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.UNAVAILABLE")),1)])),f("div",null,[r.isDayEnabled&&!r.hasError?(p(),g("span",Bve,C(r.totalHours),1)):O("v-if",!0)])])}const Uve=G(Ave,[["render",Fve],["__scopeId","data-v-60006927"],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/components/BusinessDay.vue"]]),pC={label:"Pacific Time (US & Canada) (GMT-07:00)",value:"America/Los_Angeles"},$ve={components:{SettingsSection:Xl,BusinessDay:Uve,NextButton:Se,WootMessageEditor:ai},mixins:[Ad],props:{inbox:{type:Object,default:()=>({})}},data(){return{isBusinessHoursEnabled:!1,unavailableMessage:"",timeZone:pC,dayNames:{0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"},timeSlots:[...Z1]}},computed:{..._t({uiFlags:"inboxes/getUIFlags"}),hasError(){return this.isBusinessHoursEnabled?this.timeSlots.filter(t=>t.from&&!t.valid).length>0:!1},timeZones(){return[...mk()]},isRichEditorEnabled(){return!(this.isATwilioChannel||this.isATwitterInbox||this.isAFacebookInbox)}},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){const{working_hours_enabled:t=!1,out_of_office_message:n,working_hours:a=[],timezone:e}=this.inbox,s=q1(a).length?q1(a):Z1;this.isBusinessHoursEnabled=t,this.unavailableMessage=n||"",this.timeSlots=s,this.timeZone=this.timeZones.find(r=>e===r.value)||pC},onSlotUpdate(t,n){this.timeSlots=this.timeSlots.map(a=>a.day===t?n:a)},async updateInbox(){try{const t={id:this.inbox.id,formData:!1,working_hours_enabled:this.isBusinessHoursEnabled,out_of_office_message:this.unavailableMessage,working_hours:fk(this.timeSlots),timezone:this.timeZone.value,channel:{}};await this.$store.dispatch("inboxes/updateInbox",t),Z(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch(t){Z(t.message||this.$t("INBOX_MGMT.EDIT.API.ERROR_MESSAGE"))}}}},Gve={class:"mx-8"},Vve={for:"toggle-business-hours",class:"toggle-input-wrap"},Hve={class:"mb-4 text-n-slate-11"},jve={key:0,class:"mb-6"},Wve={class:"unavailable-input-wrap"},zve={key:0,class:"px-4 py-0 mx-0 mt-0 mb-4 rounded-lg outline outline-1 outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6 bg-n-alpha-black2"},Yve={class:"timezone-input-wrap"};function Kve(t,n,a,e,s,r){const o=H("WootMessageEditor"),i=H("multiselect"),l=H("BusinessDay"),c=H("NextButton"),d=H("SettingsSection");return p(),g("div",Gve,[v(d,{title:t.$t("INBOX_MGMT.BUSINESS_HOURS.TITLE"),"sub-title":t.$t("INBOX_MGMT.BUSINESS_HOURS.SUBTITLE")},{default:z(()=>[f("form",{onSubmit:n[4]||(n[4]=Ve((...u)=>r.updateInbox&&r.updateInbox(...u),["prevent"]))},[f("label",Vve,[ce(f("input",{"onUpdate:modelValue":n[0]||(n[0]=u=>s.isBusinessHoursEnabled=u),type:"checkbox",class:"ltr:mr-2 rtl:ml-2",name:"toggle-business-hours"},null,512),[[bn,s.isBusinessHoursEnabled]]),Oe(" "+C(t.$t("INBOX_MGMT.BUSINESS_HOURS.TOGGLE_AVAILABILITY")),1)]),f("p",Hve,C(t.$t("INBOX_MGMT.BUSINESS_HOURS.TOGGLE_HELP")),1),s.isBusinessHoursEnabled?(p(),g("div",jve,[f("div",null,[f("label",Wve,C(t.$t("INBOX_MGMT.BUSINESS_HOURS.UNAVAILABLE_MESSAGE_LABEL")),1),r.isRichEditorEnabled?(p(),g("div",zve,[v(o,{modelValue:s.unavailableMessage,"onUpdate:modelValue":n[1]||(n[1]=u=>s.unavailableMessage=u),"enable-variables":"","is-format-mode":"","min-height":4},null,8,["modelValue"])])):ce((p(),g("textarea",{key:1,"onUpdate:modelValue":n[2]||(n[2]=u=>s.unavailableMessage=u),type:"text"},null,512)),[[Et,s.unavailableMessage]])]),f("div",Yve,[f("label",null,C(t.$t("INBOX_MGMT.BUSINESS_HOURS.TIMEZONE_LABEL")),1),v(i,{modelValue:s.timeZone,"onUpdate:modelValue":n[3]||(n[3]=u=>s.timeZone=u),options:r.timeZones,"deselect-label":"","select-label":"","selected-label":"","track-by":"value",label:"label","close-on-select":"",placeholder:t.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.CHOOSE"),"allow-empty":!1},null,8,["modelValue","options","placeholder"])]),f("label",null,C(t.$t("INBOX_MGMT.BUSINESS_HOURS.WEEKLY_TITLE")),1),(p(!0),g(de,null,Ae(s.timeSlots,u=>(p(),L(l,{key:u.day,"day-name":s.dayNames[u.day],"time-slot":u,onUpdate:m=>r.onSlotUpdate(u.day,m)},null,8,["day-name","time-slot","onUpdate"]))),128))])):O("v-if",!0),v(c,{type:"submit",label:t.$t("INBOX_MGMT.BUSINESS_HOURS.UPDATE"),"is-loading":t.uiFlags.isUpdating,disabled:r.hasError},null,8,["label","is-loading","disabled"])],32)]),_:1},8,["title","sub-title"])])}const Xve=G($ve,[["render",Kve],["__scopeId","data-v-70ed9acf"],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/components/WeeklyAvailability.vue"]]),qve={components:{SettingsSection:Xl,NextButton:Se},props:{inbox:{type:Object,default:()=>({})}},setup(){return{v$:rt()}},data(){return{isIMAPEnabled:!1,address:"",port:"",login:"",password:"",isSSLEnabled:!0}},validations:{address:{required:Ge},port:{required:Ge,minLength:Rt(2)},login:{required:Ge},password:{required:Ge}},computed:{..._t({uiFlags:"inboxes/getUIFlags"})},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){const{imap_enabled:t,imap_address:n,imap_port:a,imap_login:e,imap_password:s,imap_enable_ssl:r}=this.inbox;this.isIMAPEnabled=t,this.address=n,this.port=a,this.login=e,this.password=s,this.isSSLEnabled=r},async updateInbox(){try{this.loading=!0;let t={id:this.inbox.id,formData:!1,channel:{imap_enabled:this.isIMAPEnabled,imap_address:this.address,imap_port:this.port,imap_login:this.login,imap_password:this.password,imap_enable_ssl:this.isSSLEnabled}};this.isIMAPEnabled||(t.channel.smtp_enabled=!1),await this.$store.dispatch("inboxes/updateInboxIMAP",t),Z(this.$t("INBOX_MGMT.IMAP.EDIT.SUCCESS_MESSAGE"))}catch(t){Z(t.message)}}}},Zve={class:"mx-8"},Qve={for:"toggle-imap-enable"},Jve={key:0,class:"mb-6"},eEe={for:"toggle-enable-ssl"};function tEe(t,n,a,e,s,r){const o=H("woot-input"),i=H("NextButton"),l=H("SettingsSection");return p(),g("div",Zve,[v(l,{title:t.$t("INBOX_MGMT.IMAP.TITLE"),"sub-title":t.$t("INBOX_MGMT.IMAP.SUBTITLE"),note:t.$t("INBOX_MGMT.IMAP.NOTE_TEXT")},{default:z(()=>[f("form",{onSubmit:n[6]||(n[6]=Ve((...c)=>r.updateInbox&&r.updateInbox(...c),["prevent"]))},[f("label",Qve,[ce(f("input",{"onUpdate:modelValue":n[0]||(n[0]=c=>s.isIMAPEnabled=c),type:"checkbox",class:"ltr:mr-2 rtl:ml-2",name:"toggle-imap-enable"},null,512),[[bn,s.isIMAPEnabled]]),Oe(" "+C(t.$t("INBOX_MGMT.IMAP.TOGGLE_AVAILABILITY")),1)]),f("p",null,C(t.$t("INBOX_MGMT.IMAP.TOGGLE_HELP")),1),s.isIMAPEnabled?(p(),g("div",Jve,[v(o,{modelValue:s.address,"onUpdate:modelValue":n[1]||(n[1]=c=>s.address=c),class:oe([{error:e.v$.address.$error},"max-w-[75%] w-full"]),label:t.$t("INBOX_MGMT.IMAP.ADDRESS.LABEL"),placeholder:t.$t("INBOX_MGMT.IMAP.ADDRESS.PLACE_HOLDER"),onBlur:e.v$.address.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),v(o,{modelValue:s.port,"onUpdate:modelValue":n[2]||(n[2]=c=>s.port=c),type:"number",class:oe([{error:e.v$.port.$error},"max-w-[75%] w-full"]),label:t.$t("INBOX_MGMT.IMAP.PORT.LABEL"),placeholder:t.$t("INBOX_MGMT.IMAP.PORT.PLACE_HOLDER"),onBlur:e.v$.port.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),v(o,{modelValue:s.login,"onUpdate:modelValue":n[3]||(n[3]=c=>s.login=c),class:oe([{error:e.v$.login.$error},"max-w-[75%] w-full"]),label:t.$t("INBOX_MGMT.IMAP.LOGIN.LABEL"),placeholder:t.$t("INBOX_MGMT.IMAP.LOGIN.PLACE_HOLDER"),onBlur:e.v$.login.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),v(o,{modelValue:s.password,"onUpdate:modelValue":n[4]||(n[4]=c=>s.password=c),class:oe([{error:e.v$.password.$error},"max-w-[75%] w-full"]),label:t.$t("INBOX_MGMT.IMAP.PASSWORD.LABEL"),placeholder:t.$t("INBOX_MGMT.IMAP.PASSWORD.PLACE_HOLDER"),type:"password",onBlur:e.v$.password.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),f("label",eEe,[ce(f("input",{"onUpdate:modelValue":n[5]||(n[5]=c=>s.isSSLEnabled=c),type:"checkbox",class:"ltr:mr-2 rtl:ml-2",name:"toggle-enable-ssl"},null,512),[[bn,s.isSSLEnabled]]),Oe(" "+C(t.$t("INBOX_MGMT.IMAP.ENABLE_SSL")),1)])])):O("v-if",!0),v(i,{type:"submit",label:t.$t("INBOX_MGMT.IMAP.UPDATE"),"is-loading":t.uiFlags.isUpdatingIMAP,disabled:e.v$.$invalid&&s.isIMAPEnabled||t.uiFlags.isUpdatingIMAP},null,8,["label","is-loading","disabled"])],32)]),_:1},8,["title","sub-title","note"])])}const nEe=G(qve,[["render",tEe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/ImapSettings.vue"]]),aEe={props:{name:{type:String,default:"string"},label:{type:String,default:""},items:{type:Array,default:()=>[]},action:{type:Function,default:()=>{}}}},sEe={class:"radio-group-label"},oEe={class:"radio-group"},rEe={class:"radio-group-item-label"},iEe=["name","checked","onChange"];function lEe(t,n,a,e,s,r){return p(),g("div",null,[f("label",sEe,C(a.label),1),f("div",oEe,[(p(!0),g(de,null,Ae(a.items,o=>(p(),g("div",{key:o.id,class:"radio-group-item"},[f("label",rEe,[f("input",{class:"radio-input",name:`${a.name} -radio-input`,type:"radio",checked:o.checked,onChange:i=>a.action({...o,checked:!0})},null,40,iEe),f("span",null,C(o.title),1)])]))),128))])])}const BS=G(aEe,[["render",lEe],["__scopeId","data-v-b1201adb"],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/components/InputRadioGroup.vue"]]),cEe={props:{label:{type:String,default:""},options:{type:Array,default:()=>[]},selected:{type:String,default:""},action:{type:Function,default:()=>{}}},data(){return{value:this.selected}}},dEe={for:"dropdown-select"};function uEe(t,n,a,e,s,r){return p(),g("div",null,[f("label",dEe,C(a.label),1),ce(f("select",{id:"dropdown-select","onUpdate:modelValue":n[0]||(n[0]=o=>s.value=o),name:"dropdown-select",onChange:n[1]||(n[1]=o=>a.action(s.value))},[(p(!0),g(de,null,Ae(a.options,o=>(p(),g("option",{key:o.key},C(o.value),1))),128))],544),[[Un,s.value]])])}const pEe=G(cEe,[["render",uEe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/components/SingleSelectDropdown.vue"]]),fEe={components:{SettingsSection:Xl,InputRadioGroup:BS,SingleSelectDropdown:pEe,NextButton:Se},props:{inbox:{type:Object,default:()=>({})}},setup(){return{v$:rt()}},data(){return{isSMTPEnabled:!1,address:"",port:"",login:"",password:"",domain:"",ssl:!1,starttls:!0,openSSLVerifyMode:"none",authMechanism:"login",encryptionProtocols:[{id:"ssl",title:"SSL/TLS",checked:!1},{id:"starttls",title:"STARTTLS",checked:!0}],openSSLVerifyModes:[{key:1,value:"none"},{key:2,value:"peer"},{key:3,value:"client_once"},{key:4,value:"fail_if_no_peer_cert"}],authMechanisms:[{key:1,value:"plain"},{key:2,value:"login"},{key:3,value:"cram-md5"},{key:4,value:"xoauth"},{key:5,value:"xoauth2"},{key:6,value:"ntlm"},{key:7,value:"gssapi"}]}},validations:{address:{required:Ge},port:{required:Ge,minLength:Rt(2)},login:{required:Ge},password:{required:Ge},domain:{required:Ge}},computed:{..._t({uiFlags:"inboxes/getUIFlags"})},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){const{smtp_enabled:t,smtp_address:n,smtp_port:a,smtp_login:e,smtp_password:s,smtp_domain:r,smtp_enable_starttls_auto:o,smtp_enable_ssl_tls:i,smtp_openssl_verify_mode:l,smtp_authentication:c}=this.inbox;this.isSMTPEnabled=t,this.address=n,this.port=a,this.login=e,this.password=s,this.domain=r,this.starttls=o,this.ssl=i,this.openSSLVerifyMode=l,this.authMechanism=c,this.encryptionProtocols=[{id:"ssl",title:"SSL/TLS",checked:i},{id:"starttls",title:"STARTTLS",checked:o}]},handleEncryptionChange(t){t.id==="ssl"?(this.ssl=!0,this.starttls=!1):(this.ssl=!1,this.starttls=!0)},handleSSLModeChange(t){this.openSSLVerifyMode=t},handleAuthMechanismChange(t){this.authMechanism=t},async updateInbox(){try{const t={id:this.inbox.id,channel:{smtp_enabled:this.isSMTPEnabled,smtp_address:this.address,smtp_port:this.port,smtp_login:this.login,smtp_password:this.password,smtp_domain:this.domain,smtp_enable_ssl_tls:this.ssl,smtp_enable_starttls_auto:this.starttls,smtp_openssl_verify_mode:this.openSSLVerifyMode,smtp_authentication:this.authMechanism}};await this.$store.dispatch("inboxes/updateInboxSMTP",t),Z(this.$t("INBOX_MGMT.SMTP.EDIT.SUCCESS_MESSAGE"))}catch{Z(this.$t("INBOX_MGMT.SMTP.EDIT.ERROR_MESSAGE"))}}}},mEe={class:"mx-8"},hEe={for:"toggle-enable-smtp"},_Ee={key:0,class:"mb-6"};function gEe(t,n,a,e,s,r){const o=H("woot-input"),i=H("InputRadioGroup"),l=H("SingleSelectDropdown"),c=H("NextButton"),d=H("SettingsSection");return p(),g("div",mEe,[v(d,{title:t.$t("INBOX_MGMT.SMTP.TITLE"),"sub-title":t.$t("INBOX_MGMT.SMTP.SUBTITLE")},{default:z(()=>[f("form",{onSubmit:n[6]||(n[6]=Ve((...u)=>r.updateInbox&&r.updateInbox(...u),["prevent"]))},[f("label",hEe,[ce(f("input",{"onUpdate:modelValue":n[0]||(n[0]=u=>s.isSMTPEnabled=u),type:"checkbox",name:"toggle-enable-smtp"},null,512),[[bn,s.isSMTPEnabled]]),Oe(" "+C(t.$t("INBOX_MGMT.SMTP.TOGGLE_AVAILABILITY")),1)]),f("p",null,C(t.$t("INBOX_MGMT.SMTP.TOGGLE_HELP")),1),s.isSMTPEnabled?(p(),g("div",_Ee,[v(o,{modelValue:s.address,"onUpdate:modelValue":n[1]||(n[1]=u=>s.address=u),class:oe([{error:e.v$.address.$error},"max-w-[75%] w-full"]),label:t.$t("INBOX_MGMT.SMTP.ADDRESS.LABEL"),placeholder:t.$t("INBOX_MGMT.SMTP.ADDRESS.PLACE_HOLDER"),onBlur:e.v$.address.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),v(o,{modelValue:s.port,"onUpdate:modelValue":n[2]||(n[2]=u=>s.port=u),type:"number",class:oe([{error:e.v$.port.$error},"max-w-[75%] w-full"]),label:t.$t("INBOX_MGMT.SMTP.PORT.LABEL"),placeholder:t.$t("INBOX_MGMT.SMTP.PORT.PLACE_HOLDER"),onBlur:e.v$.port.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),v(o,{modelValue:s.login,"onUpdate:modelValue":n[3]||(n[3]=u=>s.login=u),class:oe([{error:e.v$.login.$error},"max-w-[75%] w-full"]),label:t.$t("INBOX_MGMT.SMTP.LOGIN.LABEL"),placeholder:t.$t("INBOX_MGMT.SMTP.LOGIN.PLACE_HOLDER"),onBlur:e.v$.login.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),v(o,{modelValue:s.password,"onUpdate:modelValue":n[4]||(n[4]=u=>s.password=u),class:oe([{error:e.v$.password.$error},"max-w-[75%] w-full"]),label:t.$t("INBOX_MGMT.SMTP.PASSWORD.LABEL"),placeholder:t.$t("INBOX_MGMT.SMTP.PASSWORD.PLACE_HOLDER"),type:"password",onBlur:e.v$.password.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),v(o,{modelValue:s.domain,"onUpdate:modelValue":n[5]||(n[5]=u=>s.domain=u),class:oe([{error:e.v$.domain.$error},"max-w-[75%] w-full"]),label:t.$t("INBOX_MGMT.SMTP.DOMAIN.LABEL"),placeholder:t.$t("INBOX_MGMT.SMTP.DOMAIN.PLACE_HOLDER"),onBlur:e.v$.domain.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),v(i,{label:t.$t("INBOX_MGMT.SMTP.ENCRYPTION"),items:s.encryptionProtocols,action:r.handleEncryptionChange},null,8,["label","items","action"]),v(l,{class:"max-w-[75%] w-full",label:t.$t("INBOX_MGMT.SMTP.OPEN_SSL_VERIFY_MODE"),selected:s.openSSLVerifyMode,options:s.openSSLVerifyModes,action:r.handleSSLModeChange},null,8,["label","selected","options","action"]),v(l,{class:"max-w-[75%] w-full",label:t.$t("INBOX_MGMT.SMTP.AUTH_MECHANISM"),selected:s.authMechanism,options:s.authMechanisms,action:r.handleAuthMechanismChange},null,8,["label","selected","options","action"])])):O("v-if",!0),v(c,{type:"submit",label:t.$t("INBOX_MGMT.SMTP.UPDATE"),"is-loading":t.uiFlags.isUpdatingSMTP,disabled:e.v$.$invalid&&s.isSMTPEnabled||t.uiFlags.isUpdatingSMTP},null,8,["label","is-loading","disabled"])],32)]),_:1},8,["title","sub-title"])])}const bEe=G(fEe,[["render",gEe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/SmtpSettings.vue"]]),vEe={components:{SettingsSection:Xl,ImapSettings:nEe,SmtpSettings:bEe,NextButton:Se,TextArea:ni,WhatsappReauthorize:fM},mixins:[Ad],props:{inbox:{type:Object,default:()=>({})}},setup(){return{v$:rt()}},data(){return{hmacMandatory:!1,whatsAppInboxAPIKey:"",isRequestingReauthorization:!1,isSyncingTemplates:!1,allowedDomains:"",isUpdatingAllowedDomains:!1}},validations:{whatsAppInboxAPIKey:{required:Ge}},computed:{isEmbeddedSignupWhatsApp(){var t;return((t=this.inbox.provider_config)==null?void 0:t.source)==="embedded_signup"},whatsappAppId(){var t;return(t=window.chatwootConfig)==null?void 0:t.whatsappAppId}},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){this.hmacMandatory=this.inbox.hmac_mandatory||!1,this.allowedDomains=this.inbox.allowed_domains||""},handleHmacFlag(){this.updateInbox()},async updateInbox(){try{const t={id:this.inbox.id,formData:!1,channel:{hmac_mandatory:this.hmacMandatory}};await this.$store.dispatch("inboxes/updateInbox",t),Z(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch{Z(this.$t("INBOX_MGMT.EDIT.API.ERROR_MESSAGE"))}},async updateAllowedDomains(){this.isUpdatingAllowedDomains=!0;const t=_4(this.allowedDomains);try{const n={id:this.inbox.id,formData:!1,channel:{allowed_domains:t}};await this.$store.dispatch("inboxes/updateInbox",n),this.allowedDomains=t,Z(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch{Z(this.$t("INBOX_MGMT.EDIT.API.ERROR_MESSAGE"))}finally{this.isUpdatingAllowedDomains=!1}},async updateWhatsAppInboxAPIKey(){try{const t={id:this.inbox.id,formData:!1,channel:{}};t.channel.provider_config={...this.inbox.provider_config,api_key:this.whatsAppInboxAPIKey},await this.$store.dispatch("inboxes/updateInbox",t),Z(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch{Z(this.$t("INBOX_MGMT.EDIT.API.ERROR_MESSAGE"))}},async handleReconfigure(){this.$refs.whatsappReauth&&await this.$refs.whatsappReauth.requestAuthorization()},async syncTemplates(){this.isSyncingTemplates=!0;try{await this.$store.dispatch("inboxes/syncTemplates",this.inbox.id),Z(this.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_TEMPLATES_SYNC_SUCCESS"))}catch{Z(this.$t("INBOX_MGMT.EDIT.API.ERROR_MESSAGE"))}finally{this.isSyncingTemplates=!1}}}},EEe={key:0,class:"mx-8"},SEe={class:"flex justify-start items-center mt-2"},TEe={key:1,class:"mx-8"},AEe={key:2,class:"mx-8"},yEe={key:3},IEe={class:"mx-8"},CEe={class:"flex flex-col w-full max-w-3xl gap-4"},OEe={target:"_blank",rel:"noopener noreferrer",href:"https://www.chatwoot.com/docs/product/channels/live-chat/sdk/identity-validation/"},NEe={class:"flex gap-2 items-center"},xEe={for:"hmacMandatory"},REe={key:4,class:"mx-8"},wEe={class:"flex gap-2 items-center"},MEe={for:"hmacMandatory"},LEe={key:5},DEe={class:"mx-8"},PEe={key:6},kEe={key:0,class:"mx-8"},BEe={class:"flex gap-4 items-center"},FEe={class:"text-sm text-slate-600"},UEe={class:"flex flex-1 justify-between items-center mt-2 whatsapp-settings--content"},$Ee={class:"flex justify-start items-center mt-2"};function GEe(t,n,a,e,s,r){const o=H("woot-code"),i=H("SettingsSection"),l=H("NextButton"),c=H("TextArea"),d=H("ImapSettings"),u=H("SmtpSettings"),m=H("woot-input"),h=H("WhatsappReauthorize");return t.isATwilioChannel?(p(),g("div",EEe,[v(i,{title:t.$t("INBOX_MGMT.ADD.TWILIO.API_CALLBACK.TITLE"),"sub-title":t.$t("INBOX_MGMT.ADD.TWILIO.API_CALLBACK.SUBTITLE")},{default:z(()=>[v(o,{script:a.inbox.callback_webhook_url,lang:"html"},null,8,["script"])]),_:1},8,["title","sub-title"]),t.isATwilioWhatsAppChannel?(p(),L(i,{key:0,title:t.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_TEMPLATES_SYNC_TITLE"),"sub-title":t.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_TEMPLATES_SYNC_SUBHEADER")},{default:z(()=>[f("div",SEe,[v(l,{disabled:s.isSyncingTemplates,onClick:r.syncTemplates},{default:z(()=>[Oe(C(t.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_TEMPLATES_SYNC_BUTTON")),1)]),_:1},8,["disabled","onClick"])])]),_:1},8,["title","sub-title"])):O("v-if",!0)])):t.isAVoiceChannel?(p(),g("div",TEe,[v(i,{title:t.$t("INBOX_MGMT.ADD.VOICE.CONFIGURATION.TWILIO_VOICE_URL_TITLE"),"sub-title":t.$t("INBOX_MGMT.ADD.VOICE.CONFIGURATION.TWILIO_VOICE_URL_SUBTITLE")},{default:z(()=>[v(o,{script:a.inbox.voice_call_webhook_url,lang:"html"},null,8,["script"])]),_:1},8,["title","sub-title"]),v(i,{title:t.$t("INBOX_MGMT.ADD.VOICE.CONFIGURATION.TWILIO_STATUS_URL_TITLE"),"sub-title":t.$t("INBOX_MGMT.ADD.VOICE.CONFIGURATION.TWILIO_STATUS_URL_SUBTITLE")},{default:z(()=>[v(o,{script:a.inbox.voice_status_webhook_url,lang:"html"},null,8,["script"])]),_:1},8,["title","sub-title"])])):t.isALineChannel?(p(),g("div",AEe,[v(i,{title:t.$t("INBOX_MGMT.ADD.LINE_CHANNEL.API_CALLBACK.TITLE"),"sub-title":t.$t("INBOX_MGMT.ADD.LINE_CHANNEL.API_CALLBACK.SUBTITLE")},{default:z(()=>[v(o,{script:a.inbox.callback_webhook_url,lang:"html"},null,8,["script"])]),_:1},8,["title","sub-title"])])):t.isAWebWidgetInbox?(p(),g("div",yEe,[f("div",IEe,[v(i,{title:t.$t("INBOX_MGMT.SETTINGS_POPUP.MESSENGER_HEADING"),"sub-title":t.$t("INBOX_MGMT.SETTINGS_POPUP.MESSENGER_SUB_HEAD")},{default:z(()=>[v(o,{script:a.inbox.web_widget_script,lang:"html","codepen-title":`${a.inbox.name} - Chatwoot Widget Test`,"enable-code-pen":""},null,8,["script","codepen-title"])]),_:1},8,["title","sub-title"]),v(i,{title:t.$t("INBOX_MGMT.SETTINGS_POPUP.ALLOWED_DOMAINS.TITLE"),"sub-title":t.$t("INBOX_MGMT.SETTINGS_POPUP.ALLOWED_DOMAINS.SUBTITLE")},{default:z(()=>[f("div",CEe,[v(c,{modelValue:s.allowedDomains,"onUpdate:modelValue":n[0]||(n[0]=_=>s.allowedDomains=_),placeholder:t.$t("INBOX_MGMT.SETTINGS_POPUP.ALLOWED_DOMAINS.PLACEHOLDER"),"auto-height":"","min-height":"8rem",class:"w-full"},null,8,["modelValue","placeholder"]),f("div",null,[v(l,{label:t.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE"),"is-loading":s.isUpdatingAllowedDomains,onClick:r.updateAllowedDomains},null,8,["label","is-loading","onClick"])])])]),_:1},8,["title","sub-title"]),v(i,{title:t.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_VERIFICATION")},{subTitle:z(()=>[Oe(C(t.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_DESCRIPTION"))+" ",1),f("a",OEe,C(t.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_LINK_TO_DOCS")),1)]),default:z(()=>[v(o,{script:a.inbox.hmac_token},null,8,["script"])]),_:1},8,["title"]),v(i,{title:t.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_MANDATORY_VERIFICATION"),"sub-title":t.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_MANDATORY_DESCRIPTION")},{default:z(()=>[f("div",NEe,[ce(f("input",{id:"hmacMandatory","onUpdate:modelValue":n[1]||(n[1]=_=>s.hmacMandatory=_),type:"checkbox",onChange:n[2]||(n[2]=(..._)=>r.handleHmacFlag&&r.handleHmacFlag(..._))},null,544),[[bn,s.hmacMandatory]]),f("label",xEe,C(t.$t("INBOX_MGMT.EDIT.ENABLE_HMAC.LABEL")),1)])]),_:1},8,["title","sub-title"])])])):t.isAPIInbox?(p(),g("div",REe,[v(i,{title:t.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_IDENTIFIER"),"sub-title":t.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_IDENTIFIER_SUB_TEXT")},{default:z(()=>[v(o,{script:a.inbox.inbox_identifier},null,8,["script"])]),_:1},8,["title","sub-title"]),v(i,{title:t.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_VERIFICATION"),"sub-title":t.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_DESCRIPTION")},{default:z(()=>[v(o,{script:a.inbox.hmac_token},null,8,["script"])]),_:1},8,["title","sub-title"]),v(i,{title:t.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_MANDATORY_VERIFICATION"),"sub-title":t.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_MANDATORY_DESCRIPTION")},{default:z(()=>[f("div",wEe,[ce(f("input",{id:"hmacMandatory","onUpdate:modelValue":n[3]||(n[3]=_=>s.hmacMandatory=_),type:"checkbox",onChange:n[4]||(n[4]=(..._)=>r.handleHmacFlag&&r.handleHmacFlag(..._))},null,544),[[bn,s.hmacMandatory]]),f("label",MEe,C(t.$t("INBOX_MGMT.EDIT.ENABLE_HMAC.LABEL")),1)])]),_:1},8,["title","sub-title"])])):t.isAnEmailChannel?(p(),g("div",LEe,[f("div",DEe,[v(i,{title:t.$t("INBOX_MGMT.SETTINGS_POPUP.FORWARD_EMAIL_TITLE"),"sub-title":t.$t("INBOX_MGMT.SETTINGS_POPUP.FORWARD_EMAIL_SUB_TEXT")},{default:z(()=>[v(o,{script:a.inbox.forward_to_email},null,8,["script"])]),_:1},8,["title","sub-title"])]),v(d,{inbox:a.inbox},null,8,["inbox"]),a.inbox.imap_enabled?(p(),L(u,{key:0,inbox:a.inbox},null,8,["inbox"])):O("v-if",!0)])):t.isAWhatsAppChannel&&!t.isATwilioChannel?(p(),g("div",PEe,[a.inbox.provider_config?(p(),g("div",kEe,[O(" Embedded Signup Section "),r.isEmbeddedSignupWhatsApp?(p(),g(de,{key:0},[r.whatsappAppId?(p(),L(i,{key:0,title:t.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_EMBEDDED_SIGNUP_TITLE"),"sub-title":t.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_EMBEDDED_SIGNUP_SUBHEADER")},{default:z(()=>[f("div",BEe,[f("p",FEe,C(t.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_EMBEDDED_SIGNUP_DESCRIPTION")),1),v(l,{onClick:r.handleReconfigure},{default:z(()=>[Oe(C(t.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_RECONFIGURE_BUTTON")),1)]),_:1},8,["onClick"])])]),_:1},8,["title","sub-title"])):O("v-if",!0)],64)):(p(),g(de,{key:1},[O(" Manual Setup Section "),v(i,{title:t.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_WEBHOOK_TITLE"),"sub-title":t.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_WEBHOOK_SUBHEADER")},{default:z(()=>[v(o,{script:a.inbox.provider_config.webhook_verify_token},null,8,["script"])]),_:1},8,["title","sub-title"]),v(i,{title:t.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_TITLE"),"sub-title":t.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_SUBHEADER")},{default:z(()=>[v(o,{script:a.inbox.provider_config.api_key},null,8,["script"])]),_:1},8,["title","sub-title"]),v(i,{title:t.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_UPDATE_TITLE"),"sub-title":t.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_UPDATE_SUBHEADER")},{default:z(()=>[f("div",UEe,[v(m,{modelValue:s.whatsAppInboxAPIKey,"onUpdate:modelValue":n[5]||(n[5]=_=>s.whatsAppInboxAPIKey=_),type:"text",class:"flex-1 mr-2 [&>input]:!mb-0",placeholder:t.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_UPDATE_PLACEHOLDER")},null,8,["modelValue","placeholder"]),v(l,{disabled:e.v$.whatsAppInboxAPIKey.$invalid,onClick:r.updateWhatsAppInboxAPIKey},{default:z(()=>[Oe(C(t.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_UPDATE_BUTTON")),1)]),_:1},8,["disabled","onClick"])])]),_:1},8,["title","sub-title"])],64)),v(i,{title:t.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_TEMPLATES_SYNC_TITLE"),"sub-title":t.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_TEMPLATES_SYNC_SUBHEADER")},{default:z(()=>[f("div",$Ee,[v(l,{disabled:s.isSyncingTemplates,onClick:r.syncTemplates},{default:z(()=>[Oe(C(t.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_TEMPLATES_SYNC_BUTTON")),1)]),_:1},8,["disabled","onClick"])])]),_:1},8,["title","sub-title"])])):O("v-if",!0),r.isEmbeddedSignupWhatsApp?(p(),L(h,{key:1,ref:"whatsappReauth",inbox:a.inbox,class:"hidden"},null,8,["inbox"])):O("v-if",!0)])):O("v-if",!0)}const VEe=G(vEe,[["render",GEe],["__scopeId","data-v-c0c81f44"],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/settingsPage/ConfigurationPage.vue"]]),HEe={__name:"CSATEmojiInput",props:{selected:{type:Boolean,default:!1}},emits:["update"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=S(()=>e.selected?"outline-n-brand bg-n-brand/5":"outline-n-weak bg-n-alpha-black2"),o=ur,i=P(5),l={props:e,emit:s,selectionClass:r,emojis:o,selectedEmoji:i,ref:P,computed:S,get CSAT_RATINGS(){return ur},get CSAT_DISPLAY_TYPES(){return Hr}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}};function jEe(t,n,a,e,s,r){return p(),g("button",{class:oe(["flex items-center rounded-lg transition-all duration-500 cursor-pointer outline outline-1 px-4 py-2 gap-2 min-w-56",e.selectionClass]),onClick:n[0]||(n[0]=o=>e.emit("update",e.CSAT_DISPLAY_TYPES.EMOJI))},[(p(!0),g(de,null,Ae(e.emojis,o=>(p(),g("div",{key:o.key,class:"rounded-full p-1 transition-transform duration-150 focus:outline-none flex items-center flex-shrink-0"},[f("span",{class:oe(["text-2xl",e.selectedEmoji===o.value?"":"grayscale opacity-60"])},C(o.emoji),3)]))),128))],2)}const WEe=G(HEe,[["render",jEe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/settingsPage/components/CSATEmojiInput.vue"]]),zEe={__name:"CSATStarInput",props:{selected:{type:Boolean,default:!1}},emits:["update"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=S(()=>e.selected?"bg-n-brand/5 outline-n-brand":"bg-n-alpha-black2 outline-n-weak"),o={props:e,emit:s,selectionClass:r,get CSAT_DISPLAY_TYPES(){return Hr},computed:S};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},YEe=["aria-label"];function KEe(t,n,a,e,s,r){return p(),g("button",{class:oe(["flex items-center rounded-lg transition-all duration-300 cursor-pointer outline outline-1 px-4 py-2 gap-2 min-w-56",e.selectionClass]),onClick:n[0]||(n[0]=o=>e.emit("update",e.CSAT_DISPLAY_TYPES.STAR))},[(p(),g(de,null,Ae(5,o=>f("div",{key:"star-"+o,class:"rounded-full p-1 transition-transform duration-150 focus:outline-none flex items-center flex-shrink-0","aria-label":`Star ${o}`},[...n[1]||(n[1]=[f("i",{class:"i-ri-star-fill text-n-amber-9 text-2xl"},null,-1)])],8,YEe)),64))],2)}const XEe=G(zEe,[["render",KEe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/settingsPage/components/CSATStarInput.vue"]]),qEe={__name:"CSATDisplayTypeSelector",props:{selectedType:{type:String,default:Hr.EMOJI}},emits:["update"],setup(t,{expose:n,emit:a}){n();const r={props:t,emit:a,get CSAT_DISPLAY_TYPES(){return Hr},CSATEmojiInput:WEe,CSATStarInput:XEe};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},ZEe={class:"flex flex-wrap gap-6 mt-2"};function QEe(t,n,a,e,s,r){return p(),g("div",ZEe,[v(e.CSATEmojiInput,{selected:e.props.selectedType===e.CSAT_DISPLAY_TYPES.EMOJI,onUpdate:n[0]||(n[0]=o=>e.emit("update",o))},null,8,["selected"]),v(e.CSATStarInput,{selected:e.props.selectedType===e.CSAT_DISPLAY_TYPES.STAR,onUpdate:n[1]||(n[1]=o=>e.emit("update",o))},null,8,["selected"])])}const JEe=G(qEe,[["render",QEe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/settingsPage/components/CSATDisplayTypeSelector.vue"]]),eSe={__name:"FilterSelect",props:an({options:{type:Array,required:!0},hideLabel:{type:Boolean,default:!1},hideIcon:{type:Boolean,default:!1},variant:{type:String,default:"faded"},label:{type:String,default:null}},{modelValue:{type:[String,Number],required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t,{expose:n}){n();const a=t,e=dn(t,"modelValue"),s=P(null),r=P(null),{top:o}=mr(s),{height:i}=ws(),{height:l}=mr(r),c=S(()=>a.options.find(_=>_.value===e.value)||{}),d=S(()=>a.hideIcon?null:c.value.icon||"i-lucide-chevron-down"),u=S(()=>{const E=l.value?l.value+20:340;return i.value-o.value<E?"bottom-0":"top-0"}),h={props:a,selected:e,triggerRef:s,dropdownRef:r,top:o,height:i,dropdownHeight:l,selectedOption:c,iconToRender:d,dropdownPosition:u,updateSelected:_=>{e.value=_},computed:S,ref:P,get useElementBounding(){return mr},get useWindowSize(){return ws},DropdownContainer:Yl,DropdownSection:Td,DropdownBody:Kl,DropdownItem:Xi,Button:Se};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}};function tSe(t,n,a,e,s,r){return p(),L(e.DropdownContainer,null,{trigger:z(({toggle:o})=>[qe(t.$slots,"trigger",{toggle:o},()=>[v(e.Button,{ref:"triggerRef",type:"button",sm:"",slate:"",variant:a.variant,icon:e.iconToRender,"trailing-icon":!e.selectedOption.icon,label:a.label||(a.hideLabel?null:e.selectedOption.label),onClick:o},null,8,["variant","icon","trailing-icon","label","onClick"])])]),default:z(()=>[v(e.DropdownBody,{ref:"dropdownRef",class:oe(["min-w-48 z-50",e.dropdownPosition]),strong:""},{default:z(()=>[v(e.DropdownSection,{class:"[&>ul]:max-h-80"},{default:z(()=>[(p(!0),g(de,null,Ae(a.options,o=>(p(),L(e.DropdownItem,{key:o.value,label:o.label,icon:o.icon,onClick:i=>e.updateSelected(o.value)},null,8,["label","icon","onClick"]))),128))]),_:1})]),_:1},8,["class"])]),_:3})}const FS=G(eSe,[["render",tSe],["__file","/app/app/javascript/dashboard/components-next/filter/inputs/FilterSelect.vue"]]),nSe={__name:"CustomerSatisfactionPage",props:{inbox:{type:Object,required:!0}},setup(t,{expose:n}){n();const a=t,{t:e}=Q(),s=Fe(),r=le("labels/getLabels"),o=P(!1),i=P([]),l=P(""),c=Lt({csatSurveyEnabled:!1,displayType:"emoji",message:"",surveyRuleOperator:"contains"}),d=[{label:e("INBOX_MGMT.CSAT.SURVEY_RULE.OPERATOR.CONTAINS"),value:"contains"},{label:e("INBOX_MGMT.CSAT.SURVEY_RULE.OPERATOR.DOES_NOT_CONTAINS"),value:"does_not_contain"}],u=S(()=>{var I;return(I=r.value)!=null&&I.length?r.value.map(N=>({label:N.title,value:N.title})).filter(N=>!i.value.includes(N.value)):[]}),m=()=>{if(!a.inbox)return;const{csat_survey_enabled:I,csat_config:N}=a.inbox;if(c.csatSurveyEnabled=I||!1,!N)return;const{display_type:x=Hr.EMOJI,message:R="",survey_rules:M={}}=N;c.displayType=x,c.message=R,c.surveyRuleOperator=M.operator||"contains",i.value=Array.isArray(M.values)?[...M.values]:[]};Pe(()=>{var I;m(),(I=r.value)!=null&&I.length||s.dispatch("labels/get")}),je(()=>a.inbox,m,{immediate:!0});const h=I=>{!I||i.value.includes(I)||i.value.push(I)},_=I=>{c.displayType=I},E=I=>{c.surveyRuleOperator=I},y=I=>{const N=i.value.indexOf(I);N!==-1&&i.value.splice(N,1)},b=async I=>{const N={id:a.inbox.id,formData:!1,...I};return s.dispatch("inboxes/updateInbox",N)},T={props:a,t:e,store:s,labels:r,isUpdating:o,selectedLabelValues:i,currentLabel:l,state:c,filterTypes:d,labelOptions:u,initializeState:m,handleLabelSelect:h,updateDisplayType:_,updateSurveyRuleOperator:E,removeLabel:y,updateInbox:b,saveSettings:async()=>{try{o.value=!0;const I={display_type:c.displayType,message:c.message,survey_rules:{operator:c.surveyRuleOperator,values:i.value}};await b({csat_survey_enabled:c.csatSurveyEnabled,csat_config:I}),Z(e("INBOX_MGMT.CSAT.API.SUCCESS_MESSAGE"))}catch{Z(e("INBOX_MGMT.CSAT.API.ERROR_MESSAGE"))}finally{o.value=!1}},reactive:Lt,onMounted:Pe,ref:P,watch:je,computed:S,get useI18n(){return Q},get useAlert(){return Z},get useStore(){return Fe},get useMapGetter(){return le},get CSAT_DISPLAY_TYPES(){return Hr},WithLabel:$l,SectionLayout:zl,CSATDisplayTypeSelector:JEe,Editor:Ds,FilterSelect:FS,NextButton:Se,Switch:mo};return Object.defineProperty(T,"__isScriptSetup",{enumerable:!1,value:!0}),T}},aSe={class:"mx-8"},sSe={class:"flex justify-end"},oSe={class:"grid gap-5"},rSe={class:"mb-4"},iSe={class:"inline-flex flex-wrap items-center gap-1.5 text-sm text-n-slate-12"},lSe={class:"text-sm italic text-n-slate-11"};function cSe(t,n,a,e,s,r){return p(),g("div",aSe,[v(e.SectionLayout,{title:t.$t("INBOX_MGMT.CSAT.TITLE"),description:t.$t("INBOX_MGMT.CSAT.SUBTITLE")},{headerActions:z(()=>[f("div",sSe,[v(e.Switch,{modelValue:e.state.csatSurveyEnabled,"onUpdate:modelValue":n[0]||(n[0]=o=>e.state.csatSurveyEnabled=o)},null,8,["modelValue"])])]),default:z(()=>[f("div",oSe,[v(e.WithLabel,{label:t.$t("INBOX_MGMT.CSAT.DISPLAY_TYPE.LABEL"),name:"display_type"},{default:z(()=>[v(e.CSATDisplayTypeSelector,{"selected-type":e.state.displayType,onUpdate:e.updateDisplayType},null,8,["selected-type"])]),_:1},8,["label"]),v(e.WithLabel,{label:t.$t("INBOX_MGMT.CSAT.MESSAGE.LABEL"),name:"message"},{default:z(()=>[v(e.Editor,{modelValue:e.state.message,"onUpdate:modelValue":n[1]||(n[1]=o=>e.state.message=o),placeholder:t.$t("INBOX_MGMT.CSAT.MESSAGE.PLACEHOLDER"),"max-length":200,class:"w-full"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),v(e.WithLabel,{label:t.$t("INBOX_MGMT.CSAT.SURVEY_RULE.LABEL"),name:"survey_rule"},{default:z(()=>[f("div",rSe,[f("span",iSe,[Oe(C(t.$t("INBOX_MGMT.CSAT.SURVEY_RULE.DESCRIPTION_PREFIX"))+" ",1),v(e.FilterSelect,{modelValue:e.state.surveyRuleOperator,"onUpdate:modelValue":[n[2]||(n[2]=o=>e.state.surveyRuleOperator=o),e.updateSurveyRuleOperator],variant:"faded",options:e.filterTypes,class:"inline-flex shrink-0"},null,8,["modelValue"]),Oe(" "+C(t.$t("INBOX_MGMT.CSAT.SURVEY_RULE.DESCRIPTION_SUFFIX"))+" ",1),(p(!0),g(de,null,Ae(e.selectedLabelValues,o=>(p(),L(e.NextButton,{key:o,sm:"",faded:"",slate:"","trailing-icon":"",label:o,icon:"i-lucide-x",class:"inline-flex shrink-0",onClick:i=>e.removeLabel(o)},null,8,["label","onClick"]))),128)),v(e.FilterSelect,{modelValue:e.currentLabel,"onUpdate:modelValue":[n[3]||(n[3]=o=>e.currentLabel=o),e.handleLabelSelect],options:e.labelOptions,label:t.$t("INBOX_MGMT.CSAT.SURVEY_RULE.SELECT_PLACEHOLDER"),"hide-label":"",variant:"faded",class:"inline-flex shrink-0"},null,8,["modelValue","options","label"])])])]),_:1},8,["label"]),f("p",lSe,C(t.$t("INBOX_MGMT.CSAT.NOTE")),1),f("div",null,[v(e.NextButton,{type:"submit",label:t.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE"),"is-loading":e.isUpdating,onClick:e.saveSettings},null,8,["label","is-loading"])])])]),_:1},8,["title","description"])])}const dSe=G(nSe,[["render",cSe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/settingsPage/CustomerSatisfactionPage.vue"]]),uSe={components:{SettingsSection:Xl,NextButton:Se},props:{inbox:{type:Object,default:()=>({})}},setup(){const{isEnterprise:t}=io();return{v$:rt(),isEnterprise:t}},data(){return{selectedAgents:[],isAgentListUpdating:!1,enableAutoAssignment:!1,maxAssignmentLimit:null}},computed:{..._t({agentList:"agents/getAgents"}),maxAssignmentLimitErrors(){return this.v$.maxAssignmentLimit.$error?this.$t("INBOX_MGMT.AUTO_ASSIGNMENT.MAX_ASSIGNMENT_LIMIT_RANGE_ERROR"):""}},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){var t,n;this.enableAutoAssignment=this.inbox.enable_auto_assignment,this.maxAssignmentLimit=((n=(t=this.inbox)==null?void 0:t.auto_assignment_config)==null?void 0:n.max_assignment_limit)||null,this.fetchAttachedAgents()},async fetchAttachedAgents(){try{const t=await this.$store.dispatch("inboxMembers/get",{inboxId:this.inbox.id}),{data:{payload:n}}=t;this.selectedAgents=n}catch{}},handleEnableAutoAssignment(){this.updateInbox()},async updateAgents(){const t=this.selectedAgents.map(n=>n.id);this.isAgentListUpdating=!0;try{await this.$store.dispatch("inboxMembers/create",{inboxId:this.inbox.id,agentList:t}),Z(this.$t("AGENT_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch{Z(this.$t("AGENT_MGMT.EDIT.API.ERROR_MESSAGE"))}this.isAgentListUpdating=!1},async updateInbox(){try{const t={id:this.inbox.id,formData:!1,enable_auto_assignment:this.enableAutoAssignment,auto_assignment_config:{max_assignment_limit:this.maxAssignmentLimit}};await this.$store.dispatch("inboxes/updateInbox",t),Z(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch{Z(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}}},validations:{selectedAgents:{isEmpty(){return!!this.selectedAgents.length}},maxAssignmentLimit:{minValue:w2(1)}}},pSe={class:"w-3/4 settings-item"},fSe={class:"flex items-center gap-2"},mSe={for:"enableAutoAssignment"},hSe={class:"pb-1 text-sm not-italic text-n-slate-11"},_Se={key:0,class:"py-3"},gSe={class:"pb-1 text-sm not-italic text-n-slate-11"};function bSe(t,n,a,e,s,r){const o=H("multiselect"),i=H("NextButton"),l=H("SettingsSection"),c=H("woot-input");return p(),g("div",null,[v(l,{title:t.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_AGENTS"),"sub-title":t.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_AGENTS_SUB_TEXT")},{default:z(()=>[v(o,{modelValue:s.selectedAgents,"onUpdate:modelValue":n[0]||(n[0]=d=>s.selectedAgents=d),options:t.agentList,"track-by":"id",label:"name",multiple:"","close-on-select":!1,"clear-on-select":!1,"hide-selected":"",placeholder:"Pick some","selected-label":"","select-label":t.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":t.$t("FORMS.MULTISELECT.ENTER_TO_REMOVE"),onSelect:e.v$.selectedAgents.$touch},null,8,["modelValue","options","select-label","deselect-label","onSelect"]),v(i,{label:t.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE"),"is-loading":s.isAgentListUpdating,onClick:r.updateAgents},null,8,["label","is-loading","onClick"])]),_:1},8,["title","sub-title"]),v(l,{title:t.$t("INBOX_MGMT.SETTINGS_POPUP.AGENT_ASSIGNMENT"),"sub-title":t.$t("INBOX_MGMT.SETTINGS_POPUP.AGENT_ASSIGNMENT_SUB_TEXT")},{default:z(()=>[f("label",pSe,[f("div",fSe,[ce(f("input",{id:"enableAutoAssignment","onUpdate:modelValue":n[1]||(n[1]=d=>s.enableAutoAssignment=d),type:"checkbox",onChange:n[2]||(n[2]=(...d)=>r.handleEnableAutoAssignment&&r.handleEnableAutoAssignment(...d))},null,544),[[bn,s.enableAutoAssignment]]),f("label",mSe,C(t.$t("INBOX_MGMT.SETTINGS_POPUP.AUTO_ASSIGNMENT")),1)]),f("p",hSe,C(t.$t("INBOX_MGMT.SETTINGS_POPUP.AUTO_ASSIGNMENT_SUB_TEXT")),1)]),s.enableAutoAssignment&&e.isEnterprise?(p(),g("div",_Se,[v(c,{modelValue:s.maxAssignmentLimit,"onUpdate:modelValue":n[3]||(n[3]=d=>s.maxAssignmentLimit=d),type:"number",class:oe({error:e.v$.maxAssignmentLimit.$error}),error:r.maxAssignmentLimitErrors,label:t.$t("INBOX_MGMT.AUTO_ASSIGNMENT.MAX_ASSIGNMENT_LIMIT"),onBlur:e.v$.maxAssignmentLimit.$touch},null,8,["modelValue","class","error","label","onBlur"]),f("p",gSe,C(t.$t("INBOX_MGMT.AUTO_ASSIGNMENT.MAX_ASSIGNMENT_LIMIT_SUB_TEXT")),1),v(i,{label:t.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE"),disabled:e.v$.maxAssignmentLimit.$invalid,onClick:r.updateInbox},null,8,["label","disabled","onClick"])])):O("v-if",!0)]),_:1},8,["title","sub-title"])])}const vSe=G(uSe,[["render",bSe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/settingsPage/CollaboratorsPage.vue"]]),ESe={__name:"WidgetHead",props:{config:{type:Object,default:()=>({})}},setup(t,{expose:n}){n();const a=t,{formatMessage:e}=ta(),s=S(()=>a.config.isDefaultScreen&&(a.config.welcomeHeading&&a.config.welcomeHeading.length!==0||a.config.welcomeTagLine&&a.config.welcomeTagline.length!==0)),r={props:a,formatMessage:e,isDefaultScreen:s,computed:S,get useMessageFormatter(){return ta}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},SSe={class:"relative top-px"},TSe={class:"flex items-center justify-start"},ASe=["src"],ySe={key:1},ISe={class:"flex items-center justify-start gap-1"},CSe={class:"text-base font-medium leading-3 text-n-slate-12"},OSe={key:0,class:"w-2 h-2 bg-n-teal-10 rounded-full"},NSe={class:"mt-1 text-xs text-n-slate-11"},xSe={key:0,class:"overflow-auto max-h-60"},RSe={class:"mb-2 text-2xl break-words text-n-slate-12"},wSe={class:"text-sm break-words text-n-slate-11 [&_a]:!text-n-slate-11 [&_a]:underline"};function MSe(t,n,a,e,s,r){const o=nt("dompurify-html");return p(),g("div",{class:oe(["rounded-t-lg flex-shrink-0 transition-[max-height] duration-300",e.isDefaultScreen?"bg-n-slate-2 dark:bg-n-solid-1 px-4 py-5":"bg-n-slate-2 dark:bg-n-solid-1 p-4"])},[f("div",SSe,[f("div",TSe,[a.config.logo?(p(),g("img",{key:0,src:a.config.logo,class:oe(["mr-2 rounded-full logo",e.isDefaultScreen?"h-12 w-12 mb-2":"h-8 w-8 mb-1"])},null,10,ASe)):O("v-if",!0),e.isDefaultScreen?O("v-if",!0):(p(),g("div",ySe,[f("div",ISe,[f("span",CSe,C(a.config.websiteName),1),a.config.isOnline?(p(),g("div",OSe)):O("v-if",!0)]),f("span",NSe,C(a.config.replyTime),1)]))]),e.isDefaultScreen?(p(),g("div",xSe,[f("h2",RSe,C(a.config.welcomeHeading),1),ce(f("p",wSe,null,512),[[o,e.formatMessage(a.config.welcomeTagline)]])])):O("v-if",!0)])],2)}const LSe=G(ESe,[["render",MSe],["__file","/app/app/javascript/dashboard/modules/widget-preview/components/WidgetHead.vue"]]),DSe={__name:"WidgetBody",props:{config:{type:Object,default:()=>({})}},setup(t,{expose:n}){n();const a={};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},PSe={class:"h-[calc(2rem*10)] px-4 overflow-y-auto"},kSe={class:"items-end flex justify-end ml-auto mb-1 mt-0 max-w-[85%] text-right"},BSe={class:"m-0"},FSe={class:"shadow rounded-[1.25rem] rounded-bl-[0.25rem] px-4 py-3 inline-block text-sm text-n-slate-12 bg-n-background dark:bg-n-solid-3"},USe={class:"m-0"};function $Se(t,n,a,e,s,r){return p(),g("div",PSe,[f("div",null,[f("div",null,[f("div",kSe,[f("div",{class:"rounded-[1.25rem] rounded-br-[0.25rem] text-white dark:text-white text-sm px-4 py-3",style:nn({background:a.config.color})},[f("p",BSe,C(t.$t("INBOX_MGMT.WIDGET_BUILDER.BODY.USER_MESSAGE")),1)],4)])]),f("div",FSe,[f("div",null,[f("p",USe,C(t.$t("INBOX_MGMT.WIDGET_BUILDER.BODY.AGENT_MESSAGE")),1)])])])])}const GSe=G(DSe,[["render",$Se],["__file","/app/app/javascript/dashboard/modules/widget-preview/components/WidgetBody.vue"]]),VSe={__name:"WidgetFooter",props:{config:{type:Object,default:()=>({})}},setup(t,{expose:n}){n();const a=t,{t:e}=Q(),s=P(!1),r=S(()=>a.config.isOnline?e("INBOX_MGMT.WIDGET_BUILDER.BODY.TEAM_AVAILABILITY.ONLINE"):e("INBOX_MGMT.WIDGET_BUILDER.BODY.TEAM_AVAILABILITY.OFFLINE")),o={props:a,t:e,isInputFocused:s,getStatusText:r,ref:P,computed:S,get useI18n(){return Q},ResizableTextArea:IE,Avatar:qt,FluentIcon:z4};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},HSe={class:"relative flex flex-col w-full px-4"},jSe={key:0,class:"p-4 rounded-md shadow-sm bg-n-background dark:bg-n-solid-2"},WSe={class:"flex items-center justify-between"},zSe={class:"text-sm font-medium leading-4 text-n-slate-12 dark:text-n-slate-50"},YSe={class:"mt-1 text-xs text-n-slate-11"},KSe={class:"pr-2 text-xs"},XSe={class:"flex items-center gap-2 px-2"};function qSe(t,n,a,e,s,r){return p(),g("div",HSe,[a.config.isDefaultScreen?(p(),g("div",jSe,[f("div",WSe,[f("div",null,[f("div",zSe,C(e.getStatusText),1),f("div",YSe,C(a.config.replyTime),1)]),v(e.Avatar,{name:"C",size:34,"rounded-full":""})]),a.config.isDefaultScreen?(p(),g("button",{key:0,class:"inline-flex items-center justify-between px-2 py-1 mt-1 -ml-2 font-medium leading-6 bg-transparent rounded-md text-n-slate-12 dark:bg-transparent",style:nn({color:a.config.color})},[f("span",KSe,C(t.$t("INBOX_MGMT.WIDGET_BUILDER.FOOTER.START_CONVERSATION_BUTTON_TEXT")),1),v(e.FluentIcon,{icon:"arrow-right",size:"14"})],4)):O("v-if",!0)])):(p(),g("div",{key:1,class:oe(["flex items-center h-10 bg-white rounded-md dark:!bg-n-slate-3",{"ring-2 ring-n-brand dark:ring-n-brand":e.isInputFocused}])},[v(e.ResizableTextArea,{id:"chat-input",rows:1,placeholder:t.$t("INBOX_MGMT.WIDGET_BUILDER.FOOTER.CHAT_INPUT_PLACEHOLDER"),class:"flex-grow !bg-white border-0 outline-none !outline-0 border-none h-8 text-sm dark:!bg-n-slate-3 pb-0 !pt-1.5 resize-none px-3 !mb-0 focus:outline-none rounded-md",onFocus:n[0]||(n[0]=o=>e.isInputFocused=!0),onBlur:n[1]||(n[1]=o=>e.isInputFocused=!1)},null,8,["placeholder"]),f("div",XSe,[v(e.FluentIcon,{icon:"emoji"}),v(e.FluentIcon,{class:"icon-send",icon:"send"})])],2))])}const ZSe=G(VSe,[["render",qSe],["__file","/app/app/javascript/dashboard/modules/widget-preview/components/WidgetFooter.vue"]]),QSe="data:image/svg+xml,%3csvg%20width='66'%20height='66'%20viewBox='0%200%2066%2066'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M63%2063H32.9976C16.4591%2063%202.99996%2049.5399%202.99996%2032.9973C2.99996%2016.4601%2016.4591%203%2032.9979%203C49.5408%203%2063%2016.4601%2063%2032.9973V63Z'%20fill='white'%20stroke='white'%20stroke-width='6'/%3e%3c/svg%3e",JSe={name:"Widget",components:{WidgetHead:LSe,WidgetBody:GSe,WidgetFooter:ZSe,InputRadioGroup:BS},props:{welcomeHeading:{type:String,default:""},welcomeTagline:{type:String,default:""},websiteName:{type:String,required:!0},logo:{type:String,default:""},isOnline:{type:Boolean,default:!0},replyTime:{type:String,default:""},color:{type:String,default:""},widgetBubblePosition:{type:String,default:""},widgetBubbleLauncherTitle:{type:String,default:""},widgetBubbleType:{type:String,default:""}},setup(){const{replaceInstallationName:t}=Rs();return{replaceInstallationName:t}},data(){return{widgetScreens:[{id:"default",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_SCREEN.DEFAULT"),checked:!0},{id:"chat",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_SCREEN.CHAT"),checked:!1}],isDefaultScreen:!0,isWidgetVisible:!0}},computed:{..._t({globalConfig:"globalConfig/get"}),getWidgetConfig(){return{welcomeHeading:this.welcomeHeading,welcomeTagline:this.welcomeTagline,websiteName:this.websiteName,logo:this.logo,isDefaultScreen:this.isDefaultScreen,isOnline:this.isOnline,replyTime:this.replyTimeText,color:this.color}},replyTimeText(){switch(this.replyTime){case"in_a_few_minutes":return this.$t("INBOX_MGMT.WIDGET_BUILDER.REPLY_TIME.IN_A_FEW_MINUTES");case"in_a_day":return this.$t("INBOX_MGMT.WIDGET_BUILDER.REPLY_TIME.IN_A_DAY");default:return this.$t("INBOX_MGMT.WIDGET_BUILDER.REPLY_TIME.IN_A_FEW_HOURS")}},getBubblePositionStyle(){return{justifyContent:this.widgetBubblePosition==="left"?"start":"end"}},isBubbleExpanded(){return!this.isWidgetVisible&&this.widgetBubbleType==="expanded_bubble"},getWidgetBubbleLauncherTitle(){return this.isWidgetVisible||this.widgetBubbleType==="standard"?" ":this.widgetBubbleLauncherTitle}},methods:{handleScreenChange(t){this.isDefaultScreen=t.id==="default"},toggleWidget(){this.isWidgetVisible=!this.isWidgetVisible,this.isDefaultScreen=!0}}},e1e={key:0,class:"flex flex-col items-center"},t1e={key:1,class:"widget-wrapper flex flex-col justify-between rounded-lg shadow-md bg-n-slate-2 dark:bg-n-solid-1 h-[31.25rem] w-80"},n1e={class:"py-2.5 flex justify-center"},a1e={class:"items-center gap-0.5 text-n-slate-11 cursor-pointer flex filter grayscale opacity-90 hover:grayscale-0 hover:opacity-100 text-xxs"},s1e=["src"],o1e={key:0,src:QSe,alt:"",draggable:"false",class:"w-6 h-6 mx-auto"},r1e={key:1,class:"ltr:pl-2.5 rtl:pr-2.5"},i1e={key:2,class:"relative"};function l1e(t,n,a,e,s,r){const o=H("InputRadioGroup"),i=H("WidgetHead"),l=H("WidgetBody"),c=H("WidgetFooter");return p(),g("div",null,[s.isWidgetVisible?(p(),g("div",e1e,[v(o,{name:"widget-screen",items:s.widgetScreens,action:r.handleScreenChange},null,8,["items","action"])])):O("v-if",!0),s.isWidgetVisible?(p(),g("div",t1e,[v(i,{config:r.getWidgetConfig},null,8,["config"]),f("div",null,[r.getWidgetConfig.isDefaultScreen?O("v-if",!0):(p(),L(l,{key:0,config:r.getWidgetConfig},null,8,["config"])),v(c,{config:r.getWidgetConfig},null,8,["config"]),f("div",n1e,[f("a",a1e,[f("img",{class:"max-w-2.5 max-h-2.5",src:t.globalConfig.logoThumbnail},null,8,s1e),f("span",null,C(e.replaceInstallationName(t.$t("INBOX_MGMT.WIDGET_BUILDER.BRANDING_TEXT"))),1)])])])])):O("v-if",!0),f("div",{class:"flex mt-4 w-[320px]",style:nn(r.getBubblePositionStyle)},[f("button",{class:oe(["relative flex items-center justify-center rounded-full cursor-pointer",r.isBubbleExpanded?"w-auto font-medium text-base text-white dark:text-white h-12 px-4":"w-16 h-16"]),style:nn({background:a.color}),onClick:n[0]||(n[0]=(...d)=>r.toggleWidget&&r.toggleWidget(...d))},[s.isWidgetVisible?O("v-if",!0):(p(),g("img",o1e)),r.isBubbleExpanded?(p(),g("div",r1e,C(r.getWidgetBubbleLauncherTitle),1)):O("v-if",!0),s.isWidgetVisible?(p(),g("div",i1e,n[1]||(n[1]=[f("div",{class:"absolute w-0.5 h-8 rotate-45 -translate-y-1/2 bg-white"},null,-1),f("div",{class:"absolute w-0.5 h-8 -rotate-45 -translate-y-1/2 bg-white"},null,-1)]))):O("v-if",!0)],6)],4)])}const c1e=G(JSe,[["render",l1e],["__file","/app/app/javascript/dashboard/modules/widget-preview/components/Widget.vue"]]),d1e={components:{Widget:c1e,InputRadioGroup:BS,NextButton:Se,Editor:Ds,Avatar:qt},props:{inbox:{type:Object,default:()=>{}}},setup(){return{v$:rt()}},data(){return{isWidgetPreview:!0,color:"#1f93ff",websiteName:"",welcomeHeading:"",welcomeTagline:"",replyTime:"in_a_few_minutes",avatarFile:null,avatarUrl:"",widgetBubblePosition:"right",widgetBubbleLauncherTitle:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_LAUNCHER_TITLE.DEFAULT"),widgetBubbleType:"standard",widgetBubblePositions:[{id:"left",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_POSITION.LEFT"),checked:!1},{id:"right",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_POSITION.RIGHT"),checked:!0}],widgetBubbleTypes:[{id:"standard",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_TYPE.STANDARD"),checked:!0},{id:"expanded_bubble",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_TYPE.EXPANDED_BUBBLE"),checked:!1}],welcomeTaglineEditorMenuOptions:OS}},computed:{..._t({uiFlags:"inboxes/getUIFlags"}),storageKey(){return`${xo.WIDGET_BUILDER}${this.inbox.id}`},widgetScript(){let t={position:this.widgetBubblePosition,type:this.widgetBubbleType,launcherTitle:this.widgetBubbleLauncherTitle},n=this.inbox.web_widget_script;return n.substring(0,13)+this.$t("INBOX_MGMT.WIDGET_BUILDER.SCRIPT_SETTINGS",{options:JSON.stringify(t)})+n.substring(13)},getWidgetViewOptions(){return[{id:"preview",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_VIEW_OPTION.PREVIEW"),checked:!0},{id:"script",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_VIEW_OPTION.SCRIPT"),checked:!1}]},getReplyTimeOptions(){return[{key:"in_a_few_minutes",value:"in_a_few_minutes",text:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.REPLY_TIME.IN_A_FEW_MINUTES")},{key:"in_a_few_hours",value:"in_a_few_hours",text:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.REPLY_TIME.IN_A_FEW_HOURS")},{key:"in_a_day",value:"in_a_day",text:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.REPLY_TIME.IN_A_DAY")}]},websiteNameValidationErrorMsg(){return this.v$.websiteName.$error?this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WEBSITE_NAME.ERROR"):""}},mounted(){this.setDefaults()},validations:{websiteName:{required:Ge}},methods:{setDefaults(){const{name:t,welcome_title:n,welcome_tagline:a,widget_color:e,reply_time:s,avatar_url:r}=this.inbox;this.websiteName=t,this.welcomeHeading=n,this.welcomeTagline=a,this.color=e,this.replyTime=s,this.avatarUrl=r;const o=this.getSavedInboxInformation();o&&(this.widgetBubblePositions=this.widgetBubblePositions.map(i=>(i.id===o.position&&(i.checked=!0,this.widgetBubblePosition=i.id),i)),this.widgetBubbleTypes=this.widgetBubbleTypes.map(i=>(i.id===o.type&&(i.checked=!0,this.widgetBubbleType=i.id),i)),this.widgetBubbleLauncherTitle=o.launcherTitle||"Chat with us")},handleWidgetBubblePositionChange(t){this.widgetBubblePosition=t.id},handleWidgetBubbleTypeChange(t){this.widgetBubbleType=t.id},handleWidgetViewChange(t){this.isWidgetPreview=t.id==="preview"},handleImageUpload({file:t,url:n}){this.avatarFile=t,this.avatarUrl=n},async handleAvatarDelete(){try{await this.$store.dispatch("inboxes/deleteInboxAvatar",this.inbox.id),this.avatarFile=null,this.avatarUrl="",Z(this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.AVATAR.DELETE.API.SUCCESS_MESSAGE"))}catch(t){Z(t.message?t.message:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.AVATAR.DELETE.API.ERROR_MESSAGE"))}},async updateWidget(){const t={position:this.widgetBubblePosition,launcherTitle:this.widgetBubbleLauncherTitle,type:this.widgetBubbleType};ro.set(this.storageKey,t);try{const n={id:this.inbox.id,name:this.websiteName,channel:{widget_color:this.color,welcome_title:this.welcomeHeading,welcome_tagline:this.welcomeTagline,reply_time:this.replyTime}};this.avatarFile&&(n.avatar=this.avatarFile),await this.$store.dispatch("inboxes/updateInbox",n),Z(this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.UPDATE.API.SUCCESS_MESSAGE"))}catch(n){Z(n.message||this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.UPDATE.API.ERROR_MESSAGE"))}},getSavedInboxInformation(){return ro.get(this.storageKey)}}},u1e={class:"mx-8"},p1e={class:"flex p-2.5"},f1e={class:"w-100 lg:w-[40%]"},m1e={class:"min-h-full py-4 overflow-y-scroll px-px"},h1e={class:"flex flex-col mb-4 items-start gap-1 w-full"},_1e={class:"mb-0.5 text-sm font-medium text-n-slate-12"},g1e=["value"],b1e={class:"w-100 lg:w-3/5"},v1e={key:0,class:"flex flex-col items-center justify-end min-h-[40.625rem] mx-5 mb-5 p-2.5 bg-n-slate-3 rounded-lg"},E1e={key:1,class:"mx-5 p-2.5 bg-n-slate-3 rounded-lg dark:bg-n-solid-3"};function S1e(t,n,a,e,s,r){const o=H("Avatar"),i=H("woot-input"),l=H("Editor"),c=H("woot-color-picker"),d=H("InputRadioGroup"),u=H("NextButton"),m=H("Widget"),h=H("woot-code");return p(),g("div",u1e,[f("div",p1e,[f("div",f1e,[f("div",m1e,[f("form",{onSubmit:n[6]||(n[6]=Ve((..._)=>r.updateWidget&&r.updateWidget(..._),["prevent"]))},[f("div",h1e,[f("label",_1e,C(t.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.AVATAR.LABEL")),1),v(o,{src:s.avatarUrl,size:72,"icon-name":"i-ri-global-fill",name:"","allow-upload":"","rounded-full":"",onUpload:r.handleImageUpload,onDelete:r.handleAvatarDelete},null,8,["src","onUpload","onDelete"])]),v(i,{modelValue:s.websiteName,"onUpdate:modelValue":n[0]||(n[0]=_=>s.websiteName=_),class:oe({error:e.v$.websiteName.$error}),label:t.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WEBSITE_NAME.LABEL"),placeholder:t.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WEBSITE_NAME.PLACE_HOLDER"),error:r.websiteNameValidationErrorMsg,onBlur:e.v$.websiteName.$touch},null,8,["modelValue","class","label","placeholder","error","onBlur"]),v(i,{modelValue:s.welcomeHeading,"onUpdate:modelValue":n[1]||(n[1]=_=>s.welcomeHeading=_),label:t.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WELCOME_HEADING.LABEL"),placeholder:t.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WELCOME_HEADING.PLACE_HOLDER")},null,8,["modelValue","label","placeholder"]),v(l,{modelValue:s.welcomeTagline,"onUpdate:modelValue":n[2]||(n[2]=_=>s.welcomeTagline=_),label:t.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WELCOME_TAGLINE.LABEL"),placeholder:t.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WELCOME_TAGLINE.PLACE_HOLDER"),"max-length":255,"enabled-menu-options":s.welcomeTaglineEditorMenuOptions,class:"mb-4"},null,8,["modelValue","label","placeholder","enabled-menu-options"]),f("label",null,[Oe(C(t.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.REPLY_TIME.LABEL"))+" ",1),ce(f("select",{"onUpdate:modelValue":n[3]||(n[3]=_=>s.replyTime=_)},[(p(!0),g(de,null,Ae(r.getReplyTimeOptions,_=>(p(),g("option",{key:_.key,value:_.value},C(_.text),9,g1e))),128))],512),[[Un,s.replyTime]])]),f("label",null,[Oe(C(t.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_COLOR_LABEL"))+" ",1),v(c,{modelValue:s.color,"onUpdate:modelValue":n[4]||(n[4]=_=>s.color=_)},null,8,["modelValue"])]),v(d,{name:"widget-bubble-position",label:t.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_POSITION_LABEL"),items:s.widgetBubblePositions,action:r.handleWidgetBubblePositionChange},null,8,["label","items","action"]),v(d,{name:"widget-bubble-type",label:t.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_TYPE_LABEL"),items:s.widgetBubbleTypes,action:r.handleWidgetBubbleTypeChange},null,8,["label","items","action"]),v(i,{modelValue:s.widgetBubbleLauncherTitle,"onUpdate:modelValue":n[5]||(n[5]=_=>s.widgetBubbleLauncherTitle=_),label:t.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_LAUNCHER_TITLE.LABEL"),placeholder:t.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_LAUNCHER_TITLE.PLACE_HOLDER")},null,8,["modelValue","label","placeholder"]),v(u,{type:"submit",class:"mt-4",label:t.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.UPDATE.BUTTON_TEXT"),"is-loading":t.uiFlags.isUpdating,disabled:e.v$.$invalid||t.uiFlags.isUpdating},null,8,["label","is-loading","disabled"])],32)])]),f("div",b1e,[v(d,{name:"widget-view-options",class:"text-center",items:r.getWidgetViewOptions,action:r.handleWidgetViewChange},null,8,["items","action"]),s.isWidgetPreview?(p(),g("div",v1e,[v(m,{"welcome-heading":s.welcomeHeading,"welcome-tagline":s.welcomeTagline,"website-name":s.websiteName,logo:s.avatarUrl,"is-online":"","reply-time":s.replyTime,color:s.color,"widget-bubble-position":s.widgetBubblePosition,"widget-bubble-launcher-title":s.widgetBubbleLauncherTitle,"widget-bubble-type":s.widgetBubbleType},null,8,["welcome-heading","welcome-tagline","website-name","logo","reply-time","color","widget-bubble-position","widget-bubble-launcher-title","widget-bubble-type"])])):(p(),g("div",E1e,[v(h,{script:r.widgetScript},null,8,["script"])]))])])])}const T1e=G(d1e,[["render",S1e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/WidgetBuilder.vue"]]),A1e={components:{LoadingState:Ed,SettingsSection:Xl,NextButton:Se},props:{inbox:{type:Object,default:()=>({})}},data(){return{selectedAgentBotId:null}},computed:{..._t({agentBots:"agentBots/getBots",uiFlags:"agentBots/getUIFlags"}),activeAgentBot(){return this.$store.getters["agentBots/getActiveAgentBot"](this.inbox.id)}},watch:{activeAgentBot(){this.selectedAgentBotId=this.activeAgentBot.id}},mounted(){this.$store.dispatch("agentBots/get"),this.$store.dispatch("agentBots/fetchAgentBotInbox",this.inbox.id)},methods:{async updateActiveAgentBot(){try{await this.$store.dispatch("agentBots/setAgentBotInbox",{inboxId:this.inbox.id,botId:this.selectedAgentBotId?this.selectedAgentBotId:void 0}),Z(this.$t("AGENT_BOTS.BOT_CONFIGURATION.SUCCESS_MESSAGE"))}catch{Z(this.$t("AGENT_BOTS.BOT_CONFIGURATION.ERROR_MESSAGE"))}},async disconnectBot(){try{await this.$store.dispatch("agentBots/disconnectBot",{inboxId:this.inbox.id}),Z(this.$t("AGENT_BOTS.BOT_CONFIGURATION.DISCONNECTED_SUCCESS_MESSAGE"))}catch(t){Z((t==null?void 0:t.message)||this.$t("AGENT_BOTS.BOT_CONFIGURATION.DISCONNECTED_ERROR_MESSAGE"))}}}},y1e={class:"mx-8"},I1e={value:"",disabled:"",selected:""},C1e=["value"],O1e={class:"button-container space-x-2"};function N1e(t,n,a,e,s,r){const o=H("LoadingState"),i=H("NextButton"),l=H("SettingsSection");return p(),g("div",y1e,[t.uiFlags.isFetching||t.uiFlags.isFetchingAgentBot?(p(),L(o,{key:0})):(p(),g("form",{key:1,class:"flex flex-wrap mx-0",onSubmit:n[1]||(n[1]=Ve((...c)=>r.updateActiveAgentBot&&r.updateActiveAgentBot(...c),["prevent"]))},[v(l,{title:t.$t("AGENT_BOTS.BOT_CONFIGURATION.TITLE"),"sub-title":t.$t("AGENT_BOTS.BOT_CONFIGURATION.DESC")},{default:z(()=>[f("div",null,[f("label",null,[ce(f("select",{"onUpdate:modelValue":n[0]||(n[0]=c=>s.selectedAgentBotId=c)},[f("option",I1e,C(t.$t("AGENT_BOTS.BOT_CONFIGURATION.SELECT_PLACEHOLDER")),1),(p(!0),g(de,null,Ae(t.agentBots,c=>(p(),g("option",{key:c.id,value:c.id},C(c.name),9,C1e))),128))],512),[[Un,s.selectedAgentBotId]])]),f("div",O1e,[v(i,{type:"submit",label:t.$t("AGENT_BOTS.BOT_CONFIGURATION.SUBMIT"),"is-loading":t.uiFlags.isSettingAgentBot},null,8,["label","is-loading"]),v(i,{type:"button",disabled:!s.selectedAgentBotId,"is-loading":t.uiFlags.isDisconnecting,faded:"",ruby:"",onClick:r.disconnectBot},{default:z(()=>[Oe(C(t.$t("AGENT_BOTS.BOT_CONFIGURATION.DISCONNECT")),1)]),_:1},8,["disabled","is-loading","onClick"])])])]),_:1},8,["title","sub-title"])],32))])}const x1e=G(A1e,[["render",N1e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/components/BotConfiguration.vue"]]),R1e={__name:"AccountHealth",props:{healthData:{type:Object,default:null}},setup(t,{expose:n}){n();const a=t,{t:e}=Q(),s={GREEN:"text-n-teal-11",YELLOW:"text-n-amber-11",RED:"text-n-ruby-11",UNKNOWN:"text-n-slate-12"},r={APPROVED:"text-n-teal-11",PENDING_REVIEW:"text-n-amber-11",AVAILABLE_WITHOUT_REVIEW:"text-n-teal-11",REJECTED:"text-n-ruby-9",DECLINED:"text-n-ruby-9"},o={LIVE:"text-n-teal-11",SANDBOX:"text-n-slate-11"},i=S(()=>{if(!a.healthData)return[];const{display_phone_number:y,verified_name:b,name_status:A,quality_rating:T,messaging_limit_tier:I,account_mode:N}=a.healthData;return[{key:"displayPhoneNumber",label:e("INBOX_MGMT.ACCOUNT_HEALTH.FIELDS.DISPLAY_PHONE_NUMBER.LABEL"),value:y||"N/A",tooltip:e("INBOX_MGMT.ACCOUNT_HEALTH.FIELDS.DISPLAY_PHONE_NUMBER.TOOLTIP"),show:!0},{key:"verifiedName",label:e("INBOX_MGMT.ACCOUNT_HEALTH.FIELDS.VERIFIED_NAME.LABEL"),value:b||"N/A",tooltip:e("INBOX_MGMT.ACCOUNT_HEALTH.FIELDS.VERIFIED_NAME.TOOLTIP"),show:!0},{key:"displayNameStatus",label:e("INBOX_MGMT.ACCOUNT_HEALTH.FIELDS.DISPLAY_NAME_STATUS.LABEL"),value:A||"UNKNOWN",tooltip:e("INBOX_MGMT.ACCOUNT_HEALTH.FIELDS.DISPLAY_NAME_STATUS.TOOLTIP"),show:!0,type:"status"},{key:"qualityRating",label:e("INBOX_MGMT.ACCOUNT_HEALTH.FIELDS.QUALITY_RATING.LABEL"),value:T||"UNKNOWN",tooltip:e("INBOX_MGMT.ACCOUNT_HEALTH.FIELDS.QUALITY_RATING.TOOLTIP"),show:!0,type:"quality"},{key:"messagingLimitTier",label:e("INBOX_MGMT.ACCOUNT_HEALTH.FIELDS.MESSAGING_LIMIT_TIER.LABEL"),value:I||"UNKNOWN",tooltip:e("INBOX_MGMT.ACCOUNT_HEALTH.FIELDS.MESSAGING_LIMIT_TIER.TOOLTIP"),show:!0,type:"tier"},{key:"accountMode",label:e("INBOX_MGMT.ACCOUNT_HEALTH.FIELDS.ACCOUNT_MODE.LABEL"),value:N||"UNKNOWN",tooltip:e("INBOX_MGMT.ACCOUNT_HEALTH.FIELDS.ACCOUNT_MODE.TOOLTIP"),show:!0,type:"mode"}]}),E={props:a,t:e,QUALITY_COLORS:s,STATUS_COLORS:r,MODE_COLORS:o,healthItems:i,handleGoToSettings:()=>{const{business_id:y}=a.healthData||{};if(y){const b=`https://business.facebook.com/latest/whatsapp_manager/phone_numbers/?business_id=${y}&tab=phone-numbers`;window.open(b,"_blank")}else window.open("https://business.facebook.com/","_blank")},getQualityRatingTextColor:y=>s[y]||s.UNKNOWN,formatTierDisplay:y=>e(`INBOX_MGMT.ACCOUNT_HEALTH.VALUES.TIERS.${y}`)||y,formatStatusDisplay:y=>e(`INBOX_MGMT.ACCOUNT_HEALTH.VALUES.STATUSES.${y}`)||y,formatModeDisplay:y=>e(`INBOX_MGMT.ACCOUNT_HEALTH.VALUES.MODES.${y}`)||y,getModeStatusTextColor:y=>o[y]||"text-n-slate-12",getStatusTextColor:y=>r[y]||"text-n-slate-12",computed:S,get useI18n(){return Q},ButtonV4:Se,Icon:Bt};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}},w1e={class:"gap-4 pt-8 mx-8"},M1e={class:"px-5 py-5 space-y-6 rounded-xl border shadow-sm border-n-weak bg-n-solid-2"},L1e={class:"flex flex-col gap-5 justify-between items-start w-full md:flex-row"},D1e={class:"text-base font-medium text-n-slate-12"},P1e={class:"mt-1 text-sm text-n-slate-11"},k1e={key:0,class:"grid grid-cols-1 gap-4 xs:grid-cols-2"},B1e={class:"flex gap-2 items-center"},F1e={class:"text-sm font-medium text-n-slate-11"},U1e={class:"flex items-center"},$1e={key:3,class:"text-sm font-medium text-n-slate-12"},G1e={key:4,class:"text-sm font-medium text-n-slate-12"},V1e={key:1,class:"pt-8"},H1e={class:"flex justify-center items-center p-8 text-center text-n-slate-11"},j1e={class:"text-sm"};function W1e(t,n,a,e,s,r){const o=nt("tooltip");return p(),g("div",w1e,[f("div",M1e,[f("div",L1e,[f("div",null,[f("span",D1e,C(e.t("INBOX_MGMT.ACCOUNT_HEALTH.TITLE")),1),f("p",P1e,C(e.t("INBOX_MGMT.ACCOUNT_HEALTH.DESCRIPTION")),1)]),v(e.ButtonV4,{sm:"",solid:"",blue:"",class:"flex-shrink-0",onClick:e.handleGoToSettings},{default:z(()=>[Oe(C(e.t("INBOX_MGMT.ACCOUNT_HEALTH.GO_TO_SETTINGS")),1)]),_:1})]),a.healthData?(p(),g("div",k1e,[(p(!0),g(de,null,Ae(e.healthItems,i=>(p(),g("div",{key:i.key,class:"flex flex-col gap-2 p-4 rounded-lg border border-n-weak bg-n-solid-1"},[f("div",B1e,[f("span",F1e,C(i.label),1),ce(v(e.Icon,{icon:"i-lucide-info",class:"flex-shrink-0 w-4 h-4 cursor-help text-n-slate-9"},null,512),[[o,i.tooltip,void 0,{top:!0}]])]),f("div",U1e,[i.type==="quality"?(p(),g("span",{key:0,class:oe(["inline-flex items-center px-2 py-0.5 min-h-6 text-xs font-medium rounded-md bg-n-alpha-2",e.getQualityRatingTextColor(i.value)])},C(i.value),3)):i.type==="status"?(p(),g("span",{key:1,class:oe(["inline-flex items-center px-2 py-0.5 min-h-6 text-xs font-medium rounded-md bg-n-alpha-2",e.getStatusTextColor(i.value)])},C(e.formatStatusDisplay(i.value)),3)):i.type==="mode"?(p(),g("span",{key:2,class:oe(["inline-flex items-center px-2 py-0.5 min-h-6 text-xs font-medium rounded-md bg-n-alpha-2",e.getModeStatusTextColor(i.value)])},C(e.formatModeDisplay(i.value)),3)):i.type==="tier"?(p(),g("span",$1e,C(e.formatTierDisplay(i.value)),1)):(p(),g("span",G1e,C(i.value),1))])]))),128))])):(p(),g("div",V1e,[f("div",H1e,[f("div",null,[v(e.Icon,{icon:"i-lucide-activity",class:"mb-2 w-8 h-8"}),f("p",j1e,C(e.t("INBOX_MGMT.ACCOUNT_HEALTH.NO_DATA")),1)])])]))])])}const z1e=G(R1e,[["render",W1e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/components/AccountHealth.vue"]]),Y1e={props:{heading:{type:String,default:""},content:{type:String,default:""},active:{type:Boolean,default:!1},src:{type:String,default:""}}},K1e={class:"flex items-center p-1 text-sm font-medium"},X1e={class:"text-n-slate-11 text-xs leading-[1.4] px-3 pt-3 pb-0 text-start"},q1e={key:0,class:"p-3"},Z1e=["src"];function Q1e(t,n,a,e,s,r){const o=H("fluent-icon");return p(),g("div",{class:oe(["flex flex-col min-w-[15rem] max-h-[21.25rem] max-w-[23.75rem] rounded-md border border-solid",{"bg-n-blue-1 dark:bg-n-solid-2 border-n-blue-4":a.active,"border-n-weak":!a.active}])},[f("div",{class:oe(["flex justify-between items-center rounded-t-md px-2 w-full h-10 border-b border-solid",{"bg-n-blue-2 border-n-blue-4":a.active,"bg-n-slate-2 border-n-weak":!a.active}])},[f("div",K1e,C(a.heading),1),a.active?(p(),L(o,{key:0,icon:"checkmark-circle",type:"solid",size:"24",class:"text-n-brand"})):O("v-if",!0)],2),f("div",X1e,C(a.content),1),a.src?(p(),g("div",q1e,[f("img",{src:a.src,class:oe(["border rounded-md",a.active?"border-n-blue-border":"border-n-weak"])},null,10,Z1e)])):qe(t.$slots,"default",{key:1})],2)}const J1e=G(Y1e,[["render",Q1e],["__file","/app/app/javascript/dashboard/components/ui/PreviewCard.vue"]]),eTe={components:{PreviewCard:J1e,Avatar:qt},props:{senderNameType:{type:String,default:"friendly"},businessName:{type:String,default:""}},emits:["update"],data(){return{senderNameKeyOptions:[{key:"friendly",heading:this.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.FRIENDLY.TITLE"),content:this.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.FRIENDLY.SUBTITLE"),preview:{senderName:"Smith",businessName:"Chatwoot",email:"<support@yourbusiness.com>"}},{key:"professional",heading:this.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.PROFESSIONAL.TITLE"),content:this.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.PROFESSIONAL.SUBTITLE"),preview:{senderName:"",businessName:"Chatwoot   ",email:"<support@yourbusiness.com>"}}]}},methods:{isKeyOptionFriendly(t){return t==="friendly"},userName(t){return this.isKeyOptionFriendly(t.key)?t.preview.senderName:t.preview.businessName},toggleSenderNameType(t){this.$emit("update",t)}}},tTe={class:"flex flex-col lg:flex-row items-start lg:items-center gap-4"},nTe=["onClick"],aTe={class:"flex flex-col items-start p-3 gap-2"},sTe={class:"text-xs"},oTe={class:"flex flex-row items-center gap-2"},rTe={class:"flex flex-col items-start gap-1"},iTe={class:"items-center flex flex-row gap-0.5 max-w-[18rem]"},lTe={key:0,class:"text-xs font-semibold leading-tight"},cTe={key:1,class:"text-xs"},dTe={class:"text-xs font-semibold leading-tight overflow-hidden whitespace-nowrap text-ellipsis"},uTe={class:"text-xs"};function pTe(t,n,a,e,s,r){const o=H("Avatar"),i=H("PreviewCard");return p(),g("div",tTe,[(p(!0),g(de,null,Ae(s.senderNameKeyOptions,l=>(p(),g("button",{key:l.key,class:"text-n-slate-12 cursor-pointer p-0",onClick:c=>r.toggleSenderNameType(l.key)},[v(i,{heading:l.heading,content:l.content,active:l.key===a.senderNameType},{default:z(()=>[f("div",aTe,[f("span",sTe,C(t.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.FOR_EG")),1),f("div",oTe,[v(o,{name:r.userName(l),size:32,"rounded-full":""},null,8,["name"]),f("div",rTe,[f("div",iTe,[r.isKeyOptionFriendly(l.key)?(p(),g("span",lTe,C(l.preview.senderName),1)):O("v-if",!0),r.isKeyOptionFriendly(l.key)?(p(),g("span",cTe,C(t.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.FRIENDLY.FROM")),1)):O("v-if",!0),f("span",dTe,C(a.businessName||l.preview.businessName),1)]),f("span",uTe,C(l.preview.email),1)])])])]),_:2},1032,["heading","content","active"])],8,nTe))),128))])}const fTe=G(eTe,[["render",pTe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/components/SenderNameExamplePreview.vue"]]),mTe={components:{BotConfiguration:x1e,CollaboratorsPage:vSe,ConfigurationPage:VEe,CustomerSatisfactionPage:dSe,FacebookReauthorize:Gge,GreetingsEditor:cM,PreChatFormSettings:Tve,SettingIntroBanner:yge,SettingsSection:Xl,WeeklyAvailability:Xve,WidgetBuilder:T1e,SenderNameExamplePreview:fTe,MicrosoftReauthorize:qge,GoogleReauthorize:Jge,NextButton:Se,InstagramReauthorize:jge,WhatsappReauthorize:fM,DuplicateInboxBanner:pM,Editor:Ds,Avatar:qt,AccountHealth:z1e},mixins:[Ad],setup(){return{v$:rt()}},data(){return{avatarFile:null,avatarUrl:"",greetingEnabled:!0,greetingMessage:"",emailCollectEnabled:!1,senderNameType:"friendly",businessName:"",locktoSingleConversation:!1,allowMessagesAfterResolved:!0,continuityViaEmail:!0,selectedInboxName:"",channelWebsiteUrl:"",webhookUrl:"",channelWelcomeTitle:"",channelWelcomeTagline:"",selectedFeatureFlags:[],replyTime:"",selectedTabIndex:0,selectedPortalSlug:"",showBusinessNameInput:!1,welcomeTaglineEditorMenuOptions:OS,healthData:null,isLoadingHealth:!1,healthError:null}},computed:{..._t({accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount",uiFlags:"inboxes/getUIFlags",portals:"portals/allPortals"}),selectedTabKey(){var t;return(t=this.tabs[this.selectedTabIndex])==null?void 0:t.key},shouldShowWhatsAppConfiguration(){return this.isAWhatsAppCloudChannel},whatsAppAPIProviderName(){return this.isAWhatsAppCloudChannel?this.$t("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.WHATSAPP_CLOUD"):this.is360DialogWhatsAppChannel?this.$t("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.360_DIALOG"):this.isATwilioWhatsAppChannel?this.$t("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.TWILIO"):""},tabs(){let t=[{key:"inbox-settings",name:this.$t("INBOX_MGMT.TABS.SETTINGS")},{key:"collaborators",name:this.$t("INBOX_MGMT.TABS.COLLABORATORS")}];return this.isAVoiceChannel||(t=[...t,{key:"business-hours",name:this.$t("INBOX_MGMT.TABS.BUSINESS_HOURS")},{key:"csat",name:this.$t("INBOX_MGMT.TABS.CSAT")}]),this.isAWebWidgetInbox&&(t=[...t,{key:"pre-chat-form",name:this.$t("INBOX_MGMT.TABS.PRE_CHAT_FORM")},{key:"widget-builder",name:this.$t("INBOX_MGMT.TABS.WIDGET_BUILDER")}]),(this.isATwilioChannel||this.isALineChannel||this.isAPIInbox||this.isAVoiceChannel||this.isAnEmailChannel&&!this.inbox.provider||this.shouldShowWhatsAppConfiguration||this.isAWebWidgetInbox)&&(t=[...t,{key:"configuration",name:this.$t("INBOX_MGMT.TABS.CONFIGURATION")}]),this.isFeatureEnabledonAccount(this.accountId,pt.AGENT_BOTS)&&(t=[...t,{key:"bot-configuration",name:this.$t("INBOX_MGMT.TABS.BOT_CONFIGURATION")}]),this.shouldShowWhatsAppConfiguration&&(t=[...t,{key:"whatsapp-health",name:this.$t("INBOX_MGMT.TABS.ACCOUNT_HEALTH")}]),t},currentInboxId(){return this.$route.params.inboxId},inbox(){return this.$store.getters["inboxes/getInbox"](this.currentInboxId)},inboxIcon(){const{medium:t,channel_type:n}=this.inbox;return vs(n,t)},inboxName(){return this.isATwilioSMSChannel||this.isATwilioWhatsAppChannel?`${this.inbox.name} (${this.inbox.messaging_service_sid||this.inbox.phone_number})`:this.isAWhatsAppChannel?`${this.inbox.name} (${this.inbox.phone_number})`:this.isAnEmailChannel?`${this.inbox.name} (${this.inbox.email})`:this.inbox.name},canLocktoSingleConversation(){return this.isASmsInbox||this.isAWhatsAppChannel||this.isAFacebookInbox||this.isAPIInbox||this.isATelegramChannel},inboxNameLabel(){return this.isAWebWidgetInbox?this.$t("INBOX_MGMT.ADD.WEBSITE_NAME.LABEL"):this.$t("INBOX_MGMT.ADD.CHANNEL_NAME.LABEL")},inboxNamePlaceHolder(){return this.isAWebWidgetInbox?this.$t("INBOX_MGMT.ADD.WEBSITE_NAME.PLACEHOLDER"):this.$t("INBOX_MGMT.ADD.CHANNEL_NAME.PLACEHOLDER")},textAreaChannels(){return!!(this.isATwilioChannel||this.isATwitterInbox||this.isAFacebookInbox)},instagramUnauthorized(){return this.isAnInstagramChannel&&this.inbox.reauthorization_required},hasDuplicateInstagramInbox(){const t=this.inbox.instagram_id,n=this.$store.getters["inboxes/getInstagramInboxByInstagramId"](t);return this.inbox.channel_type===ht.FB&&n},microsoftUnauthorized(){return this.isAMicrosoftInbox&&this.inbox.reauthorization_required},facebookUnauthorized(){return this.isAFacebookInbox&&this.inbox.reauthorization_required},googleUnauthorized(){const t=["imap.gmail.com","imap.google.com"].includes(this.inbox.imap_address);return(this.isAGoogleInbox||t)&&this.inbox.reauthorization_required},isEmbeddedSignupWhatsApp(){var t;return((t=this.inbox.provider_config)==null?void 0:t.source)==="embedded_signup"},whatsappUnauthorized(){return this.isAWhatsAppCloudChannel&&this.isEmbeddedSignupWhatsApp&&this.inbox.reauthorization_required},whatsappRegistrationIncomplete(){var t;return!this.healthData||!this.isAWhatsAppCloudChannel||!this.isEmbeddedSignupWhatsApp?!1:this.healthData.platform_type==="NOT_APPLICABLE"||((t=this.healthData.throughput)==null?void 0:t.level)==="NOT_APPLICABLE"}},watch:{$route(t){t.name==="settings_inbox_show"&&this.fetchInboxSettings()},inbox:{handler(){this.fetchHealthData()},immediate:!1}},mounted(){this.fetchInboxSettings(),this.fetchPortals(),this.fetchHealthData()},methods:{fetchPortals(){this.$store.dispatch("portals/index")},async fetchHealthData(){if(this.inbox&&this.isAWhatsAppCloudChannel)try{this.isLoadingHealth=!0,this.healthError=null;const t=await abe.getHealthStatus(this.inbox.id);this.healthData=t.data}catch(t){this.healthError=t.message||"Failed to fetch health data"}finally{this.isLoadingHealth=!1}},handleFeatureFlag(t){this.selectedFeatureFlags=this.toggleInput(this.selectedFeatureFlags,t.target.value)},toggleInput(t,n){return t.includes(n)?t.filter(e=>e!==n):[...t,n]},refreshAvatarUrlOnTabChange(t){this.inbox&&["inbox-settings","widget-builder"].includes(this.tabs[t].key)&&(this.avatarUrl=this.inbox.avatar_url)},onTabChange(t){this.selectedTabIndex=t,this.refreshAvatarUrlOnTabChange(t),this.updateRouteWithoutRefresh(t)},updateRouteWithoutRefresh(t){const n=this.tabs[t];if(!n)return;const{accountId:a,inboxId:e}=this.$route.params,s=`/app/accounts/${a}/settings/inboxes/${e}`,r=n.key==="inbox-settings"?s:`${s}/${n.key}`;window.history.replaceState(null,"",r)},setTabFromRouteParam(){const{tab:t}=this.$route.params;if(!t)return;const n=this.tabs.findIndex(a=>a.key===t);this.selectedTabIndex=n===-1?0:n},fetchInboxSettings(){this.selectedAgents=[],this.$store.dispatch("agents/get"),this.$store.dispatch("teams/get"),this.$store.dispatch("labels/get"),this.$store.dispatch("inboxes/get").then(()=>{this.avatarUrl=this.inbox.avatar_url,this.selectedInboxName=this.inbox.name,this.webhookUrl=this.inbox.webhook_url,this.greetingEnabled=this.inbox.greeting_enabled||!1,this.greetingMessage=this.inbox.greeting_message||"",this.emailCollectEnabled=this.inbox.enable_email_collect,this.senderNameType=this.inbox.sender_name_type,this.businessName=this.inbox.business_name,this.allowMessagesAfterResolved=this.inbox.allow_messages_after_resolved,this.continuityViaEmail=this.inbox.continuity_via_email,this.channelWebsiteUrl=this.inbox.website_url,this.channelWelcomeTitle=this.inbox.welcome_title,this.channelWelcomeTagline=this.inbox.welcome_tagline||"",this.selectedFeatureFlags=this.inbox.selected_feature_flags||[],this.replyTime=this.inbox.reply_time,this.locktoSingleConversation=this.inbox.lock_to_single_conversation,this.selectedPortalSlug=this.inbox.help_center?this.inbox.help_center.slug:"",this.setTabFromRouteParam()})},async updateInbox(){var t;try{const n={id:this.currentInboxId,name:(t=this.selectedInboxName)==null?void 0:t.trim(),enable_email_collect:this.emailCollectEnabled,allow_messages_after_resolved:this.allowMessagesAfterResolved,greeting_enabled:this.greetingEnabled,greeting_message:this.greetingMessage||"",portal_id:this.selectedPortalSlug?this.portals.find(a=>a.slug===this.selectedPortalSlug).id:null,lock_to_single_conversation:this.locktoSingleConversation,sender_name_type:this.senderNameType,business_name:this.businessName||null,channel:{widget_color:this.inbox.widget_color,website_url:this.channelWebsiteUrl,webhook_url:this.webhookUrl,welcome_title:this.channelWelcomeTitle||"",welcome_tagline:this.channelWelcomeTagline||"",selectedFeatureFlags:this.selectedFeatureFlags,reply_time:this.replyTime||"in_a_few_minutes",continuity_via_email:this.continuityViaEmail}};this.avatarFile&&(n.avatar=this.avatarFile),await this.$store.dispatch("inboxes/updateInbox",n),Z(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch(n){Z(n.message||this.$t("INBOX_MGMT.EDIT.API.ERROR_MESSAGE"))}},handleImageUpload({file:t,url:n}){this.avatarFile=t,this.avatarUrl=n},async handleAvatarDelete(){try{await this.$store.dispatch("inboxes/deleteInboxAvatar",this.currentInboxId),this.avatarFile=null,this.avatarUrl="",Z(this.$t("INBOX_MGMT.DELETE.API.AVATAR_SUCCESS_MESSAGE"))}catch(t){Z(t.message?t.message:this.$t("INBOX_MGMT.DELETE.API.AVATAR_ERROR_MESSAGE"))}},toggleSenderNameType(t){this.senderNameType=t},onClickShowBusinessNameInput(){this.showBusinessNameInput=!this.showBusinessNameInput,this.showBusinessNameInput&&this.$nextTick(()=>{this.$refs.businessNameInput.focus()})}},validations:{webhookUrl:{shouldBeUrl:Yk},selectedInboxName:{}}},hTe={class:"overflow-auto flex-grow flex-shrink pr-0 pl-0 w-full min-w-0 settings"},_Te={class:"mx-auto w-full max-w-6xl"},gTe={key:6,class:"mx-8"},bTe={class:"flex flex-col gap-1 items-start mb-4"},vTe={class:"mb-0.5 text-sm font-medium text-n-slate-12"},ETe={key:4,class:"pb-4"},STe={key:5,class:"pb-4"},TTe={class:"pb-4"},ATe={value:!0},yTe={value:!1},ITe={class:"pb-1 text-sm not-italic text-n-slate-11"},CTe={key:6,class:"pb-4"},OTe={key:7,class:"pb-4"},NTe={key:"in_a_few_minutes",value:"in_a_few_minutes"},xTe={key:"in_a_few_hours",value:"in_a_few_hours"},RTe={key:"in_a_day",value:"in_a_day"},wTe={class:"pb-1 text-sm not-italic text-n-slate-11"},MTe={key:8,class:"pb-4"},LTe={value:!0},DTe={value:!1},PTe={class:"pb-1 text-sm not-italic text-n-slate-11"},kTe={key:9,class:"pb-4"},BTe={value:!0},FTe={value:!1},UTe={class:"pb-1 text-sm not-italic text-n-slate-11"},$Te={key:10,class:"pb-4"},GTe={value:!0},VTe={value:!1},HTe={class:"pb-1 text-sm not-italic text-n-slate-11"},jTe={key:11,class:"pb-4"},WTe={value:""},zTe=["value"],YTe={class:"pb-1 text-sm not-italic text-n-slate-11"},KTe={key:12,class:"pb-4"},XTe={value:!0},qTe={value:!1},ZTe={class:"pb-1 text-sm not-italic text-n-slate-11"},QTe={key:13},JTe={key:14,class:"flex gap-2 pt-2 pb-4"},eAe={for:"attachments"},tAe={key:15,class:"flex gap-2 pb-4"},nAe={for:"emoji_picker"},aAe={key:16,class:"flex gap-2 pb-4"},sAe={for:"end_conversation"},oAe={key:17,class:"flex gap-2 pb-4"},rAe={for:"use_inbox_avatar_for_bot"},iAe={class:"pb-4"},lAe={class:"flex flex-col gap-2 items-start mt-2"},cAe={key:0,class:"flex gap-2 w-[80%]"},dAe=["placeholder"],uAe={key:7,class:"mx-8"},pAe={key:8},fAe={key:9},mAe={key:10},hAe={key:11},_Ae={key:12},gAe={key:13},bAe={key:14};function vAe(t,n,a,e,s,r){const o=H("woot-tabs-item"),i=H("woot-tabs"),l=H("SettingIntroBanner"),c=H("MicrosoftReauthorize"),d=H("FacebookReauthorize"),u=H("GoogleReauthorize"),m=H("InstagramReauthorize"),h=H("WhatsappReauthorize"),_=H("DuplicateInboxBanner"),E=H("Avatar"),y=H("woot-input"),b=H("Editor"),A=H("woot-color-picker"),T=H("GreetingsEditor"),I=H("SettingsSection"),N=H("SenderNameExamplePreview"),x=H("NextButton"),R=H("CollaboratorsPage"),M=H("ConfigurationPage"),w=H("CustomerSatisfactionPage"),D=H("PreChatFormSettings"),B=H("WeeklyAvailability"),k=H("WidgetBuilder"),V=H("BotConfiguration"),F=H("AccountHealth");return p(),g("div",hTe,[v(l,{"header-image":r.inbox.avatarUrl,"header-title":r.inboxName},{default:z(()=>[v(i,{class:"[&_ul]:p-0",index:s.selectedTabIndex,border:!1,onChange:r.onTabChange},{default:z(()=>[(p(!0),g(de,null,Ae(r.tabs,($,Y)=>(p(),L(o,{key:$.key,index:Y,name:$.name,"show-badge":!1,"is-compact":""},null,8,["index","name"]))),128))]),_:1},8,["index","onChange"])]),_:1},8,["header-image","header-title"]),f("section",_Te,[r.microsoftUnauthorized?(p(),L(c,{key:0,inbox:r.inbox},null,8,["inbox"])):O("v-if",!0),r.facebookUnauthorized?(p(),L(d,{key:1,inbox:r.inbox},null,8,["inbox"])):O("v-if",!0),r.googleUnauthorized?(p(),L(u,{key:2,inbox:r.inbox},null,8,["inbox"])):O("v-if",!0),r.instagramUnauthorized?(p(),L(m,{key:3,inbox:r.inbox},null,8,["inbox"])):O("v-if",!0),r.whatsappUnauthorized?(p(),L(h,{key:4,"whatsapp-registration-incomplete":r.whatsappRegistrationIncomplete,inbox:r.inbox},null,8,["whatsapp-registration-incomplete","inbox"])):O("v-if",!0),r.hasDuplicateInstagramInbox?(p(),L(_,{key:5,content:t.$t("INBOX_MGMT.ADD.INSTAGRAM.DUPLICATE_INBOX_BANNER"),class:"mx-8 mt-5"},null,8,["content"])):O("v-if",!0),r.selectedTabKey==="inbox-settings"?(p(),g("div",gTe,[v(I,{title:t.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_UPDATE_TITLE"),"sub-title":t.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_UPDATE_SUB_TEXT"),"show-border":!1},{default:z(()=>[f("div",bTe,[f("label",vTe,C(t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_AVATAR.LABEL")),1),v(E,{src:s.avatarUrl,size:72,"icon-name":r.inboxIcon,name:"","allow-upload":"","rounded-full":"",onUpload:r.handleImageUpload,onDelete:r.handleAvatarDelete},null,8,["src","icon-name","onUpload","onDelete"])]),v(y,{modelValue:s.selectedInboxName,"onUpdate:modelValue":n[0]||(n[0]=$=>s.selectedInboxName=$),class:oe(["pb-4",{error:e.v$.selectedInboxName.$error}]),label:r.inboxNameLabel,placeholder:r.inboxNamePlaceHolder,error:e.v$.selectedInboxName.$error?t.$t("INBOX_MGMT.ADD.CHANNEL_NAME.ERROR"):"",onBlur:e.v$.selectedInboxName.$touch},null,8,["modelValue","class","label","placeholder","error","onBlur"]),t.isAPIInbox?(p(),L(y,{key:0,modelValue:s.webhookUrl,"onUpdate:modelValue":n[1]||(n[1]=$=>s.webhookUrl=$),class:oe(["pb-4",{error:e.v$.webhookUrl.$error}]),label:t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WEBHOOK_URL.LABEL"),placeholder:t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WEBHOOK_URL.PLACEHOLDER"),error:e.v$.webhookUrl.$error?t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WEBHOOK_URL.ERROR"):"",onBlur:e.v$.webhookUrl.$touch},null,8,["modelValue","class","label","placeholder","error","onBlur"])):O("v-if",!0),t.isAWebWidgetInbox?(p(),L(y,{key:1,modelValue:s.channelWebsiteUrl,"onUpdate:modelValue":n[2]||(n[2]=$=>s.channelWebsiteUrl=$),class:"pb-4",label:t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_DOMAIN.LABEL"),placeholder:t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_DOMAIN.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):O("v-if",!0),t.isAWebWidgetInbox?(p(),L(y,{key:2,modelValue:s.channelWelcomeTitle,"onUpdate:modelValue":n[3]||(n[3]=$=>s.channelWelcomeTitle=$),class:"pb-4",label:t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TITLE.LABEL"),placeholder:t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TITLE.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):O("v-if",!0),t.isAWebWidgetInbox?(p(),L(b,{key:3,modelValue:s.channelWelcomeTagline,"onUpdate:modelValue":n[4]||(n[4]=$=>s.channelWelcomeTagline=$),class:"mb-4",label:t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TAGLINE.LABEL"),placeholder:t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TAGLINE.PLACEHOLDER"),"max-length":255,"enabled-menu-options":s.welcomeTaglineEditorMenuOptions},null,8,["modelValue","label","placeholder","enabled-menu-options"])):O("v-if",!0),t.isAWebWidgetInbox?(p(),g("label",ETe,[Oe(C(t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.WIDGET_COLOR.LABEL"))+" ",1),v(A,{modelValue:r.inbox.widget_color,"onUpdate:modelValue":n[5]||(n[5]=$=>r.inbox.widget_color=$)},null,8,["modelValue"])])):O("v-if",!0),t.isAWhatsAppChannel?(p(),g("label",STe,[Oe(C(t.$t("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[6]||(n[6]=$=>r.whatsAppAPIProviderName=$),type:"text",disabled:""},null,512),[[Et,r.whatsAppAPIProviderName]])])):O("v-if",!0),f("label",TTe,[Oe(C(t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.LABEL"))+" ",1),ce(f("select",{"onUpdate:modelValue":n[7]||(n[7]=$=>s.greetingEnabled=$)},[f("option",ATe,C(t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.ENABLED")),1),f("option",yTe,C(t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.DISABLED")),1)],512),[[Un,s.greetingEnabled]]),f("p",ITe,C(t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.HELP_TEXT")),1)]),s.greetingEnabled?(p(),g("div",CTe,[v(T,{modelValue:s.greetingMessage,"onUpdate:modelValue":n[8]||(n[8]=$=>s.greetingMessage=$),label:t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_MESSAGE.LABEL"),placeholder:t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_MESSAGE.PLACEHOLDER"),richtext:!r.textAreaChannels},null,8,["modelValue","label","placeholder","richtext"])])):O("v-if",!0),t.isAWebWidgetInbox?(p(),g("label",OTe,[Oe(C(t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.TITLE"))+" ",1),ce(f("select",{"onUpdate:modelValue":n[9]||(n[9]=$=>s.replyTime=$)},[f("option",NTe,C(t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.IN_A_FEW_MINUTES")),1),f("option",xTe,C(t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.IN_A_FEW_HOURS")),1),f("option",RTe,C(t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.IN_A_DAY")),1)],512),[[Un,s.replyTime]]),f("p",wTe,C(t.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.HELP_TEXT")),1)])):O("v-if",!0),t.isAWebWidgetInbox?(p(),g("label",MTe,[Oe(C(t.$t("INBOX_MGMT.SETTINGS_POPUP.ENABLE_EMAIL_COLLECT_BOX"))+" ",1),ce(f("select",{"onUpdate:modelValue":n[10]||(n[10]=$=>s.emailCollectEnabled=$)},[f("option",LTe,C(t.$t("INBOX_MGMT.EDIT.EMAIL_COLLECT_BOX.ENABLED")),1),f("option",DTe,C(t.$t("INBOX_MGMT.EDIT.EMAIL_COLLECT_BOX.DISABLED")),1)],512),[[Un,s.emailCollectEnabled]]),f("p",PTe,C(t.$t("INBOX_MGMT.SETTINGS_POPUP.ENABLE_EMAIL_COLLECT_BOX_SUB_TEXT")),1)])):O("v-if",!0),t.isAWebWidgetInbox?(p(),g("label",kTe,[Oe(C(t.$t("INBOX_MGMT.SETTINGS_POPUP.ALLOW_MESSAGES_AFTER_RESOLVED"))+" ",1),ce(f("select",{"onUpdate:modelValue":n[11]||(n[11]=$=>s.allowMessagesAfterResolved=$)},[f("option",BTe,C(t.$t("INBOX_MGMT.EDIT.ALLOW_MESSAGES_AFTER_RESOLVED.ENABLED")),1),f("option",FTe,C(t.$t("INBOX_MGMT.EDIT.ALLOW_MESSAGES_AFTER_RESOLVED.DISABLED")),1)],512),[[Un,s.allowMessagesAfterResolved]]),f("p",UTe,C(t.$t("INBOX_MGMT.SETTINGS_POPUP.ALLOW_MESSAGES_AFTER_RESOLVED_SUB_TEXT")),1)])):O("v-if",!0),t.isAWebWidgetInbox?(p(),g("label",$Te,[Oe(C(t.$t("INBOX_MGMT.SETTINGS_POPUP.ENABLE_CONTINUITY_VIA_EMAIL"))+" ",1),ce(f("select",{"onUpdate:modelValue":n[12]||(n[12]=$=>s.continuityViaEmail=$)},[f("option",GTe,C(t.$t("INBOX_MGMT.EDIT.ENABLE_CONTINUITY_VIA_EMAIL.ENABLED")),1),f("option",VTe,C(t.$t("INBOX_MGMT.EDIT.ENABLE_CONTINUITY_VIA_EMAIL.DISABLED")),1)],512),[[Un,s.continuityViaEmail]]),f("p",HTe,C(t.$t("INBOX_MGMT.SETTINGS_POPUP.ENABLE_CONTINUITY_VIA_EMAIL_SUB_TEXT")),1)])):O("v-if",!0),t.isAVoiceChannel?O("v-if",!0):(p(),g("div",jTe,[f("label",null,C(t.$t("INBOX_MGMT.HELP_CENTER.LABEL")),1),ce(f("select",{"onUpdate:modelValue":n[13]||(n[13]=$=>s.selectedPortalSlug=$),class:"filter__question"},[f("option",WTe,C(t.$t("INBOX_MGMT.HELP_CENTER.PLACEHOLDER")),1),(p(!0),g(de,null,Ae(t.portals,$=>(p(),g("option",{key:$.slug,value:$.slug},C($.name),9,zTe))),128))],512),[[Un,s.selectedPortalSlug]]),f("p",YTe,C(t.$t("INBOX_MGMT.HELP_CENTER.SUB_TEXT")),1)])),r.canLocktoSingleConversation?(p(),g("label",KTe,[Oe(C(t.$t("INBOX_MGMT.SETTINGS_POPUP.LOCK_TO_SINGLE_CONVERSATION"))+" ",1),ce(f("select",{"onUpdate:modelValue":n[14]||(n[14]=$=>s.locktoSingleConversation=$)},[f("option",XTe,C(t.$t("INBOX_MGMT.EDIT.LOCK_TO_SINGLE_CONVERSATION.ENABLED")),1),f("option",qTe,C(t.$t("INBOX_MGMT.EDIT.LOCK_TO_SINGLE_CONVERSATION.DISABLED")),1)],512),[[Un,s.locktoSingleConversation]]),f("p",ZTe,C(t.$t("INBOX_MGMT.SETTINGS_POPUP.LOCK_TO_SINGLE_CONVERSATION_SUB_TEXT")),1)])):O("v-if",!0),t.isAWebWidgetInbox?(p(),g("label",QTe,C(t.$t("INBOX_MGMT.FEATURES.LABEL")),1)):O("v-if",!0),t.isAWebWidgetInbox?(p(),g("div",JTe,[ce(f("input",{"onUpdate:modelValue":n[15]||(n[15]=$=>s.selectedFeatureFlags=$),type:"checkbox",value:"attachments",onInput:n[16]||(n[16]=(...$)=>r.handleFeatureFlag&&r.handleFeatureFlag(...$))},null,544),[[bn,s.selectedFeatureFlags]]),f("label",eAe,C(t.$t("INBOX_MGMT.FEATURES.DISPLAY_FILE_PICKER")),1)])):O("v-if",!0),t.isAWebWidgetInbox?(p(),g("div",tAe,[ce(f("input",{"onUpdate:modelValue":n[17]||(n[17]=$=>s.selectedFeatureFlags=$),type:"checkbox",value:"emoji_picker",onInput:n[18]||(n[18]=(...$)=>r.handleFeatureFlag&&r.handleFeatureFlag(...$))},null,544),[[bn,s.selectedFeatureFlags]]),f("label",nAe,C(t.$t("INBOX_MGMT.FEATURES.DISPLAY_EMOJI_PICKER")),1)])):O("v-if",!0),t.isAWebWidgetInbox?(p(),g("div",aAe,[ce(f("input",{"onUpdate:modelValue":n[19]||(n[19]=$=>s.selectedFeatureFlags=$),type:"checkbox",value:"end_conversation",onInput:n[20]||(n[20]=(...$)=>r.handleFeatureFlag&&r.handleFeatureFlag(...$))},null,544),[[bn,s.selectedFeatureFlags]]),f("label",sAe,C(t.$t("INBOX_MGMT.FEATURES.ALLOW_END_CONVERSATION")),1)])):O("v-if",!0),t.isAWebWidgetInbox?(p(),g("div",oAe,[ce(f("input",{"onUpdate:modelValue":n[21]||(n[21]=$=>s.selectedFeatureFlags=$),type:"checkbox",value:"use_inbox_avatar_for_bot",onInput:n[22]||(n[22]=(...$)=>r.handleFeatureFlag&&r.handleFeatureFlag(...$))},null,544),[[bn,s.selectedFeatureFlags]]),f("label",rAe,C(t.$t("INBOX_MGMT.FEATURES.USE_INBOX_AVATAR_FOR_BOT")),1)])):O("v-if",!0)]),_:1},8,["title","sub-title"]),t.isAWebWidgetInbox||t.isAnEmailChannel?(p(),L(I,{key:0,title:t.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.TITLE"),"sub-title":t.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.SUB_TEXT"),"show-border":!1},{default:z(()=>[f("div",iAe,[v(N,{"sender-name-type":s.senderNameType,"business-name":s.businessName,onUpdate:r.toggleSenderNameType},null,8,["sender-name-type","business-name","onUpdate"]),f("div",lAe,[v(x,{ghost:"",blue:"",label:t.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.BUSINESS_NAME.BUTTON_TEXT"),onClick:r.onClickShowBusinessNameInput},null,8,["label","onClick"]),s.showBusinessNameInput?(p(),g("div",cAe,[ce(f("input",{ref:"businessNameInput","onUpdate:modelValue":n[23]||(n[23]=$=>s.businessName=$),placeholder:t.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.BUSINESS_NAME.PLACEHOLDER"),class:"mb-0",type:"text"},null,8,dAe),[[Et,s.businessName]]),v(x,{label:t.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.BUSINESS_NAME.SAVE_BUTTON_TEXT"),class:"flex-shrink-0",onClick:r.updateInbox},null,8,["label","onClick"])])):O("v-if",!0)])])]),_:1},8,["title","sub-title"])):O("v-if",!0),v(I,{"show-border":!1},{default:z(()=>[t.isAPIInbox?(p(),L(x,{key:0,type:"submit",disabled:e.v$.webhookUrl.$invalid,label:t.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE"),"is-loading":t.uiFlags.isUpdating,onClick:r.updateInbox},null,8,["disabled","label","is-loading","onClick"])):(p(),L(x,{key:1,type:"submit",disabled:e.v$.$invalid,label:t.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE"),"is-loading":t.uiFlags.isUpdating,onClick:r.updateInbox},null,8,["disabled","label","is-loading","onClick"]))]),_:1})])):O("v-if",!0),r.selectedTabKey==="collaborators"?(p(),g("div",uAe,[v(R,{inbox:r.inbox},null,8,["inbox"])])):O("v-if",!0),r.selectedTabKey==="configuration"?(p(),g("div",pAe,[v(M,{inbox:r.inbox},null,8,["inbox"])])):O("v-if",!0),r.selectedTabKey==="csat"?(p(),g("div",fAe,[v(w,{inbox:r.inbox},null,8,["inbox"])])):O("v-if",!0),r.selectedTabKey==="pre-chat-form"?(p(),g("div",mAe,[v(D,{inbox:r.inbox},null,8,["inbox"])])):O("v-if",!0),r.selectedTabKey==="business-hours"?(p(),g("div",hAe,[v(B,{inbox:r.inbox},null,8,["inbox"])])):O("v-if",!0),r.selectedTabKey==="widget-builder"?(p(),g("div",_Ae,[v(k,{inbox:r.inbox},null,8,["inbox"])])):O("v-if",!0),r.selectedTabKey==="bot-configuration"?(p(),g("div",gAe,[v(V,{inbox:r.inbox},null,8,["inbox"])])):O("v-if",!0),r.selectedTabKey==="whatsapp-health"?(p(),g("div",bAe,[v(F,{"health-data":s.healthData},null,8,["health-data"])])):O("v-if",!0)])])}const EAe=G(mTe,[["render",vAe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/Settings.vue"]]),SAe={__name:"InboxChannels",setup(t,{expose:n}){n();const{t:a}=Q(),e=lt(),{replaceInstallationName:s}=Rs(),r=le("globalConfig/get"),o=S(()=>{const m=["CHANNEL","INBOX","AGENT","FINISH"],h={CHANNEL:"settings_inbox_new",INBOX:"settings_inboxes_page_channel",AGENT:"settings_inboxes_add_agents",FINISH:"settings_inbox_finish"};return m.map(_=>({title:a(`INBOX_MGMT.CREATE_FLOW.${_}.TITLE`),body:a(`INBOX_MGMT.CREATE_FLOW.${_}.BODY`),route:h[_]}))}),i=S(()=>e.name==="settings_inbox_new"),l=S(()=>e.name==="settings_inbox_finish"),c=S(()=>i.value?a("INBOX_MGMT.ADD.AUTH.TITLE"):l.value?a("INBOX_MGMT.ADD.AUTH.TITLE_FINISH"):a("INBOX_MGMT.ADD.AUTH.TITLE_NEXT")),d=S(()=>o.value.map(m=>({...m,body:s(m.body)}))),u={t:a,route:e,replaceInstallationName:s,globalConfig:r,createFlowSteps:o,isFirstStep:i,isFinishStep:l,pageTitle:c,items:d,computed:S,get useI18n(){return Q},get useRoute(){return lt},get useMapGetter(){return le},get useBranding(){return Rs},PageHeader:Ss};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}},TAe={class:"mx-2 flex flex-col gap-6 mb-8"},AAe={class:"grid grid-cols-1 lg:grid-cols-8 lg:divide-x lg:divide-n-weak rounded-xl border border-n-weak min-h-[52rem]"},yAe={class:"col-span-6 overflow-hidden"};function IAe(t,n,a,e,s,r){const o=H("woot-wizard"),i=H("router-view");return p(),g("div",TAe,[v(e.PageHeader,{class:"block lg:hidden !mb-0","header-title":e.pageTitle},null,8,["header-title"]),f("div",AAe,[v(o,{class:"hidden lg:block col-span-2 h-fit py-8 px-6","global-config":e.globalConfig,items:e.items},null,8,["global-config","items"]),f("div",yAe,[v(i)])])])}const CAe=G(SAe,[["render",IAe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/InboxChannels.vue"]]),OAe={__name:"ChannelItem",props:{channel:{type:Object,required:!0},enabledFeatures:{type:Object,required:!0}},emits:["channelItemClick"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=S(()=>{var u;return(u=window.chatwootConfig)==null?void 0:u.fbAppId}),o=S(()=>{var u;return(u=window.chatwootConfig)==null?void 0:u.instagramAppId}),i=S(()=>{const{key:u}=e.channel;return Object.keys(e.enabledFeatures).length===0?!1:u==="website"?e.enabledFeatures.channel_website:u==="facebook"?e.enabledFeatures.channel_facebook&&r.value:u==="email"?e.enabledFeatures.channel_email:u==="instagram"?e.enabledFeatures.channel_instagram&&o.value:u==="voice"?e.enabledFeatures.channel_voice:["website","twilio","api","whatsapp","sms","telegram","line","instagram","voice"].includes(u)}),l=S(()=>{const{key:u}=e.channel;return["voice"].includes(u)&&!i.value}),d={props:e,emit:s,hasFbConfigured:r,hasInstagramConfigured:o,isActive:i,isComingSoon:l,onItemClick:()=>{i.value&&s("channelItemClick",e.channel.key)},computed:S,ChannelSelector:MS};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}};function NAe(t,n,a,e,s,r){return p(),L(e.ChannelSelector,{title:a.channel.title,description:a.channel.description,icon:a.channel.icon,"is-coming-soon":e.isComingSoon,disabled:!e.isActive,onClick:e.onItemClick},null,8,["title","description","icon","is-coming-soon","disabled"])}const xAe=G(OAe,[["render",NAe],["__file","/app/app/javascript/dashboard/components/widgets/ChannelItem.vue"]]),RAe={__name:"ChannelList",setup(t,{expose:n}){n();const{t:a}=Q(),e=ft(),{accountId:s,currentAccount:r}=Ut(),o=le("globalConfig/get"),i=P({}),l=S(()=>{const{apiChannelName:m}=o.value;return[{key:"website",title:a("INBOX_MGMT.ADD.AUTH.CHANNEL.WEBSITE.TITLE"),description:a("INBOX_MGMT.ADD.AUTH.CHANNEL.WEBSITE.DESCRIPTION"),icon:"i-woot-website"},{key:"facebook",title:a("INBOX_MGMT.ADD.AUTH.CHANNEL.FACEBOOK.TITLE"),description:a("INBOX_MGMT.ADD.AUTH.CHANNEL.FACEBOOK.DESCRIPTION"),icon:"i-woot-messenger"},{key:"whatsapp",title:a("INBOX_MGMT.ADD.AUTH.CHANNEL.WHATSAPP.TITLE"),description:a("INBOX_MGMT.ADD.AUTH.CHANNEL.WHATSAPP.DESCRIPTION"),icon:"i-woot-whatsapp"},{key:"sms",title:a("INBOX_MGMT.ADD.AUTH.CHANNEL.SMS.TITLE"),description:a("INBOX_MGMT.ADD.AUTH.CHANNEL.SMS.DESCRIPTION"),icon:"i-woot-sms"},{key:"email",title:a("INBOX_MGMT.ADD.AUTH.CHANNEL.EMAIL.TITLE"),description:a("INBOX_MGMT.ADD.AUTH.CHANNEL.EMAIL.DESCRIPTION"),icon:"i-woot-mail"},{key:"api",title:m||a("INBOX_MGMT.ADD.AUTH.CHANNEL.API.TITLE"),description:a("INBOX_MGMT.ADD.AUTH.CHANNEL.API.DESCRIPTION"),icon:"i-woot-api"},{key:"telegram",title:a("INBOX_MGMT.ADD.AUTH.CHANNEL.TELEGRAM.TITLE"),description:a("INBOX_MGMT.ADD.AUTH.CHANNEL.TELEGRAM.DESCRIPTION"),icon:"i-woot-telegram"},{key:"line",title:a("INBOX_MGMT.ADD.AUTH.CHANNEL.LINE.TITLE"),description:a("INBOX_MGMT.ADD.AUTH.CHANNEL.LINE.DESCRIPTION"),icon:"i-woot-line"},{key:"instagram",title:a("INBOX_MGMT.ADD.AUTH.CHANNEL.INSTAGRAM.TITLE"),description:a("INBOX_MGMT.ADD.AUTH.CHANNEL.INSTAGRAM.DESCRIPTION"),icon:"i-woot-instagram"},{key:"voice",title:a("INBOX_MGMT.ADD.AUTH.CHANNEL.VOICE.TITLE"),description:a("INBOX_MGMT.ADD.AUTH.CHANNEL.VOICE.DESCRIPTION"),icon:"i-ri-phone-fill"}]}),c=async()=>{i.value=r.value.features},d=m=>{const h={sub_page:m,accountId:s.value};e.push({name:"settings_inboxes_page_channel",params:h})};Pe(()=>{c()});const u={t:a,router:e,accountId:s,currentAccount:r,globalConfig:o,enabledFeatures:i,channelList:l,initializeEnabledFeatures:c,initChannelAuth:d,ref:P,computed:S,onMounted:Pe,get useI18n(){return Q},get useRouter(){return ft},get useMapGetter(){return le},get useAccount(){return Ut},ChannelItem:xAe};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}},wAe={class:"w-full p-8 overflow-auto"},MAe={class:"grid max-w-3xl grid-cols-1 xs:grid-cols-2 mx-0 gap-6 sm:grid-cols-3"};function LAe(t,n,a,e,s,r){return p(),g("div",wAe,[f("div",MAe,[(p(!0),g(de,null,Ae(e.channelList,o=>(p(),L(e.ChannelItem,{key:o.key,channel:o,"enabled-features":e.enabledFeatures,onChannelItemClick:e.initChannelAuth},null,8,["channel","enabled-features"]))),128))])])}const DAe=G(RAe,[["render",LAe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/ChannelList.vue"]]),PAe={components:{PageHeader:Ss,NextButton:Se},validations:{selectedAgents:{isEmpty(){return!!this.selectedAgents.length}}},setup(){return{v$:rt()}},data(){return{selectedAgents:[],isCreating:!1}},computed:{..._t({agentList:"agents/getAgents"})},mounted(){this.$store.dispatch("agents/get")},methods:{async addAgents(){this.isCreating=!0;const t=this.$route.params.inbox_id,n=this.selectedAgents.map(a=>a.id);try{await g4.update({inboxId:t,agentList:n}),wa.replace({name:"settings_inbox_finish",params:{page:"new",inbox_id:this.$route.params.inbox_id}})}catch(a){Z(a.message)}this.isCreating=!1}}},kAe={class:"h-full w-full p-6 col-span-6"},BAe={class:"w-full"},FAe={class:"w-full"},UAe={key:0,class:"message"},$Ae={class:"w-full"};function GAe(t,n,a,e,s,r){const o=H("PageHeader"),i=H("multiselect"),l=H("NextButton");return p(),g("div",kAe,[f("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:n[1]||(n[1]=Ve(c=>r.addAgents(),["prevent"]))},[f("div",BAe,[v(o,{"header-title":t.$t("INBOX_MGMT.ADD.AGENTS.TITLE"),"header-content":t.$t("INBOX_MGMT.ADD.AGENTS.DESC")},null,8,["header-title","header-content"])]),f("div",null,[f("div",FAe,[f("label",{class:oe({error:e.v$.selectedAgents.$error})},[Oe(C(t.$t("INBOX_MGMT.ADD.AGENTS.TITLE"))+" ",1),v(i,{modelValue:s.selectedAgents,"onUpdate:modelValue":n[0]||(n[0]=c=>s.selectedAgents=c),options:t.agentList,"track-by":"id",label:"name",multiple:"","close-on-select":!1,"clear-on-select":!1,"hide-selected":"","selected-label":"","select-label":t.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":t.$t("FORMS.MULTISELECT.ENTER_TO_REMOVE"),placeholder:t.$t("INBOX_MGMT.ADD.AGENTS.PICK_AGENTS"),onSelect:e.v$.selectedAgents.$touch},null,8,["modelValue","options","select-label","deselect-label","placeholder","onSelect"]),e.v$.selectedAgents.$error?(p(),g("span",UAe,C(t.$t("INBOX_MGMT.ADD.AGENTS.VALIDATION_ERROR")),1)):O("v-if",!0)],2)]),f("div",$Ae,[v(l,{type:"submit","is-loading":s.isCreating,solid:"",blue:"",label:t.$t("INBOX_MGMT.AGENTS.BUTTON_TEXT")},null,8,["is-loading","label"])])])],32)])}const VAe=G(PAe,[["render",GAe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/AddAgents.vue"]]);var $i={},HAe=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},CM={},_o={};let US;const jAe=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];_o.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17};_o.getSymbolTotalCodewords=function(n){return jAe[n]};_o.getBCHDigit=function(t){let n=0;for(;t!==0;)n++,t>>>=1;return n};_o.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');US=n};_o.isKanjiModeEnabled=function(){return typeof US<"u"};_o.toSJIS=function(n){return US(n)};var Fh={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function n(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+a)}}t.isValid=function(e){return e&&typeof e.bit<"u"&&e.bit>=0&&e.bit<4},t.from=function(e,s){if(t.isValid(e))return e;try{return n(e)}catch{return s}}})(Fh);function OM(){this.buffer=[],this.length=0}OM.prototype={get:function(t){const n=Math.floor(t/8);return(this.buffer[n]>>>7-t%8&1)===1},put:function(t,n){for(let a=0;a<n;a++)this.putBit((t>>>n-a-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),t&&(this.buffer[n]|=128>>>this.length%8),this.length++}};var WAe=OM;function cp(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}cp.prototype.set=function(t,n,a,e){const s=t*this.size+n;this.data[s]=a,e&&(this.reservedBit[s]=!0)};cp.prototype.get=function(t,n){return this.data[t*this.size+n]};cp.prototype.xor=function(t,n,a){this.data[t*this.size+n]^=a};cp.prototype.isReserved=function(t,n){return this.reservedBit[t*this.size+n]};var zAe=cp,NM={};(function(t){const n=_o.getSymbolSize;t.getRowColCoords=function(e){if(e===1)return[];const s=Math.floor(e/7)+2,r=n(e),o=r===145?26:Math.ceil((r-13)/(2*s-2))*2,i=[r-7];for(let l=1;l<s-1;l++)i[l]=i[l-1]-o;return i.push(6),i.reverse()},t.getPositions=function(e){const s=[],r=t.getRowColCoords(e),o=r.length;for(let i=0;i<o;i++)for(let l=0;l<o;l++)i===0&&l===0||i===0&&l===o-1||i===o-1&&l===0||s.push([r[i],r[l]]);return s}})(NM);var xM={};const YAe=_o.getSymbolSize,fC=7;xM.getPositions=function(n){const a=YAe(n);return[[0,0],[a-fC,0],[0,a-fC]]};var RM={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const n={N1:3,N2:3,N3:40,N4:10};t.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},t.from=function(s){return t.isValid(s)?parseInt(s,10):void 0},t.getPenaltyN1=function(s){const r=s.size;let o=0,i=0,l=0,c=null,d=null;for(let u=0;u<r;u++){i=l=0,c=d=null;for(let m=0;m<r;m++){let h=s.get(u,m);h===c?i++:(i>=5&&(o+=n.N1+(i-5)),c=h,i=1),h=s.get(m,u),h===d?l++:(l>=5&&(o+=n.N1+(l-5)),d=h,l=1)}i>=5&&(o+=n.N1+(i-5)),l>=5&&(o+=n.N1+(l-5))}return o},t.getPenaltyN2=function(s){const r=s.size;let o=0;for(let i=0;i<r-1;i++)for(let l=0;l<r-1;l++){const c=s.get(i,l)+s.get(i,l+1)+s.get(i+1,l)+s.get(i+1,l+1);(c===4||c===0)&&o++}return o*n.N2},t.getPenaltyN3=function(s){const r=s.size;let o=0,i=0,l=0;for(let c=0;c<r;c++){i=l=0;for(let d=0;d<r;d++)i=i<<1&2047|s.get(c,d),d>=10&&(i===1488||i===93)&&o++,l=l<<1&2047|s.get(d,c),d>=10&&(l===1488||l===93)&&o++}return o*n.N3},t.getPenaltyN4=function(s){let r=0;const o=s.data.length;for(let l=0;l<o;l++)r+=s.data[l];return Math.abs(Math.ceil(r*100/o/5)-10)*n.N4};function a(e,s,r){switch(e){case t.Patterns.PATTERN000:return(s+r)%2===0;case t.Patterns.PATTERN001:return s%2===0;case t.Patterns.PATTERN010:return r%3===0;case t.Patterns.PATTERN011:return(s+r)%3===0;case t.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(r/3))%2===0;case t.Patterns.PATTERN101:return s*r%2+s*r%3===0;case t.Patterns.PATTERN110:return(s*r%2+s*r%3)%2===0;case t.Patterns.PATTERN111:return(s*r%3+(s+r)%2)%2===0;default:throw new Error("bad maskPattern:"+e)}}t.applyMask=function(s,r){const o=r.size;for(let i=0;i<o;i++)for(let l=0;l<o;l++)r.isReserved(l,i)||r.xor(l,i,a(s,l,i))},t.getBestMask=function(s,r){const o=Object.keys(t.Patterns).length;let i=0,l=1/0;for(let c=0;c<o;c++){r(c),t.applyMask(c,s);const d=t.getPenaltyN1(s)+t.getPenaltyN2(s)+t.getPenaltyN3(s)+t.getPenaltyN4(s);t.applyMask(c,s),d<l&&(l=d,i=c)}return i}})(RM);var Uh={};const Ni=Fh,Xp=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],qp=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Uh.getBlocksCount=function(n,a){switch(a){case Ni.L:return Xp[(n-1)*4+0];case Ni.M:return Xp[(n-1)*4+1];case Ni.Q:return Xp[(n-1)*4+2];case Ni.H:return Xp[(n-1)*4+3];default:return}};Uh.getTotalCodewordsCount=function(n,a){switch(a){case Ni.L:return qp[(n-1)*4+0];case Ni.M:return qp[(n-1)*4+1];case Ni.Q:return qp[(n-1)*4+2];case Ni.H:return qp[(n-1)*4+3];default:return}};var wM={},$h={};const Su=new Uint8Array(512),Vm=new Uint8Array(256);(function(){let n=1;for(let a=0;a<255;a++)Su[a]=n,Vm[n]=a,n<<=1,n&256&&(n^=285);for(let a=255;a<512;a++)Su[a]=Su[a-255]})();$h.log=function(n){if(n<1)throw new Error("log("+n+")");return Vm[n]};$h.exp=function(n){return Su[n]};$h.mul=function(n,a){return n===0||a===0?0:Su[Vm[n]+Vm[a]]};(function(t){const n=$h;t.mul=function(e,s){const r=new Uint8Array(e.length+s.length-1);for(let o=0;o<e.length;o++)for(let i=0;i<s.length;i++)r[o+i]^=n.mul(e[o],s[i]);return r},t.mod=function(e,s){let r=new Uint8Array(e);for(;r.length-s.length>=0;){const o=r[0];for(let l=0;l<s.length;l++)r[l]^=n.mul(s[l],o);let i=0;for(;i<r.length&&r[i]===0;)i++;r=r.slice(i)}return r},t.generateECPolynomial=function(e){let s=new Uint8Array([1]);for(let r=0;r<e;r++)s=t.mul(s,new Uint8Array([1,n.exp(r)]));return s}})(wM);const MM=wM;function $S(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}$S.prototype.initialize=function(n){this.degree=n,this.genPoly=MM.generateECPolynomial(this.degree)};$S.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const a=new Uint8Array(n.length+this.degree);a.set(n);const e=MM.mod(a,this.genPoly),s=this.degree-e.length;if(s>0){const r=new Uint8Array(this.degree);return r.set(e,s),r}return e};var KAe=$S,LM={},Zi={},GS={};GS.isValid=function(n){return!isNaN(n)&&n>=1&&n<=40};var yr={};const DM="[0-9]+",XAe="[A-Z $%*+\\-./:]+";let Wu="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Wu=Wu.replace(/u/g,"\\u");const qAe="(?:(?![A-Z0-9 $%*+\\-./:]|"+Wu+`)(?:.|[\r
]))+`;yr.KANJI=new RegExp(Wu,"g");yr.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");yr.BYTE=new RegExp(qAe,"g");yr.NUMERIC=new RegExp(DM,"g");yr.ALPHANUMERIC=new RegExp(XAe,"g");const ZAe=new RegExp("^"+Wu+"$"),QAe=new RegExp("^"+DM+"$"),JAe=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");yr.testKanji=function(n){return ZAe.test(n)};yr.testNumeric=function(n){return QAe.test(n)};yr.testAlphanumeric=function(n){return JAe.test(n)};(function(t){const n=GS,a=yr;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(r,o){if(!r.ccBits)throw new Error("Invalid mode: "+r);if(!n.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?r.ccBits[0]:o<27?r.ccBits[1]:r.ccBits[2]},t.getBestModeForData=function(r){return a.testNumeric(r)?t.NUMERIC:a.testAlphanumeric(r)?t.ALPHANUMERIC:a.testKanji(r)?t.KANJI:t.BYTE},t.toString=function(r){if(r&&r.id)return r.id;throw new Error("Invalid mode")},t.isValid=function(r){return r&&r.bit&&r.ccBits};function e(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+s)}}t.from=function(r,o){if(t.isValid(r))return r;try{return e(r)}catch{return o}}})(Zi);(function(t){const n=_o,a=Uh,e=Fh,s=Zi,r=GS,o=7973,i=n.getBCHDigit(o);function l(m,h,_){for(let E=1;E<=40;E++)if(h<=t.getCapacity(E,_,m))return E}function c(m,h){return s.getCharCountIndicator(m,h)+4}function d(m,h){let _=0;return m.forEach(function(E){const y=c(E.mode,h);_+=y+E.getBitsLength()}),_}function u(m,h){for(let _=1;_<=40;_++)if(d(m,_)<=t.getCapacity(_,h,s.MIXED))return _}t.from=function(h,_){return r.isValid(h)?parseInt(h,10):_},t.getCapacity=function(h,_,E){if(!r.isValid(h))throw new Error("Invalid QR Code version");typeof E>"u"&&(E=s.BYTE);const y=n.getSymbolTotalCodewords(h),b=a.getTotalCodewordsCount(h,_),A=(y-b)*8;if(E===s.MIXED)return A;const T=A-c(E,h);switch(E){case s.NUMERIC:return Math.floor(T/10*3);case s.ALPHANUMERIC:return Math.floor(T/11*2);case s.KANJI:return Math.floor(T/13);case s.BYTE:default:return Math.floor(T/8)}},t.getBestVersionForData=function(h,_){let E;const y=e.from(_,e.M);if(Array.isArray(h)){if(h.length>1)return u(h,y);if(h.length===0)return 1;E=h[0]}else E=h;return l(E.mode,E.getLength(),y)},t.getEncodedBits=function(h){if(!r.isValid(h)||h<7)throw new Error("Invalid QR Code version");let _=h<<12;for(;n.getBCHDigit(_)-i>=0;)_^=o<<n.getBCHDigit(_)-i;return h<<12|_}})(LM);var PM={};const zv=_o,kM=1335,eye=21522,mC=zv.getBCHDigit(kM);PM.getEncodedBits=function(n,a){const e=n.bit<<3|a;let s=e<<10;for(;zv.getBCHDigit(s)-mC>=0;)s^=kM<<zv.getBCHDigit(s)-mC;return(e<<10|s)^eye};var BM={};const tye=Zi;function pd(t){this.mode=tye.NUMERIC,this.data=t.toString()}pd.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)};pd.prototype.getLength=function(){return this.data.length};pd.prototype.getBitsLength=function(){return pd.getBitsLength(this.data.length)};pd.prototype.write=function(n){let a,e,s;for(a=0;a+3<=this.data.length;a+=3)e=this.data.substr(a,3),s=parseInt(e,10),n.put(s,10);const r=this.data.length-a;r>0&&(e=this.data.substr(a),s=parseInt(e,10),n.put(s,r*3+1))};var nye=pd;const aye=Zi,Kg=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function fd(t){this.mode=aye.ALPHANUMERIC,this.data=t}fd.getBitsLength=function(n){return 11*Math.floor(n/2)+6*(n%2)};fd.prototype.getLength=function(){return this.data.length};fd.prototype.getBitsLength=function(){return fd.getBitsLength(this.data.length)};fd.prototype.write=function(n){let a;for(a=0;a+2<=this.data.length;a+=2){let e=Kg.indexOf(this.data[a])*45;e+=Kg.indexOf(this.data[a+1]),n.put(e,11)}this.data.length%2&&n.put(Kg.indexOf(this.data[a]),6)};var sye=fd;const oye=Zi;function md(t){this.mode=oye.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}md.getBitsLength=function(n){return n*8};md.prototype.getLength=function(){return this.data.length};md.prototype.getBitsLength=function(){return md.getBitsLength(this.data.length)};md.prototype.write=function(t){for(let n=0,a=this.data.length;n<a;n++)t.put(this.data[n],8)};var rye=md;const iye=Zi,lye=_o;function hd(t){this.mode=iye.KANJI,this.data=t}hd.getBitsLength=function(n){return n*13};hd.prototype.getLength=function(){return this.data.length};hd.prototype.getBitsLength=function(){return hd.getBitsLength(this.data.length)};hd.prototype.write=function(t){let n;for(n=0;n<this.data.length;n++){let a=lye.toSJIS(this.data[n]);if(a>=33088&&a<=40956)a-=33088;else if(a>=57408&&a<=60351)a-=49472;else throw new Error("Invalid SJIS character: "+this.data[n]+`
Make sure your charset is UTF-8`);a=(a>>>8&255)*192+(a&255),t.put(a,13)}};var cye=hd,FM={exports:{}};(function(t){var n={single_source_shortest_paths:function(a,e,s){var r={},o={};o[e]=0;var i=n.PriorityQueue.make();i.push(e,0);for(var l,c,d,u,m,h,_,E,y;!i.empty();){l=i.pop(),c=l.value,u=l.cost,m=a[c]||{};for(d in m)m.hasOwnProperty(d)&&(h=m[d],_=u+h,E=o[d],y=typeof o[d]>"u",(y||E>_)&&(o[d]=_,i.push(d,_),r[d]=c))}if(typeof s<"u"&&typeof o[s]>"u"){var b=["Could not find a path from ",e," to ",s,"."].join("");throw new Error(b)}return r},extract_shortest_path_from_predecessor_list:function(a,e){for(var s=[],r=e;r;)s.push(r),a[r],r=a[r];return s.reverse(),s},find_path:function(a,e,s){var r=n.single_source_shortest_paths(a,e,s);return n.extract_shortest_path_from_predecessor_list(r,s)},PriorityQueue:{make:function(a){var e=n.PriorityQueue,s={},r;a=a||{};for(r in e)e.hasOwnProperty(r)&&(s[r]=e[r]);return s.queue=[],s.sorter=a.sorter||e.default_sorter,s},default_sorter:function(a,e){return a.cost-e.cost},push:function(a,e){var s={value:a,cost:e};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=n})(FM);var dye=FM.exports;(function(t){const n=Zi,a=nye,e=sye,s=rye,r=cye,o=yr,i=_o,l=dye;function c(b){return unescape(encodeURIComponent(b)).length}function d(b,A,T){const I=[];let N;for(;(N=b.exec(T))!==null;)I.push({data:N[0],index:N.index,mode:A,length:N[0].length});return I}function u(b){const A=d(o.NUMERIC,n.NUMERIC,b),T=d(o.ALPHANUMERIC,n.ALPHANUMERIC,b);let I,N;return i.isKanjiModeEnabled()?(I=d(o.BYTE,n.BYTE,b),N=d(o.KANJI,n.KANJI,b)):(I=d(o.BYTE_KANJI,n.BYTE,b),N=[]),A.concat(T,I,N).sort(function(R,M){return R.index-M.index}).map(function(R){return{data:R.data,mode:R.mode,length:R.length}})}function m(b,A){switch(A){case n.NUMERIC:return a.getBitsLength(b);case n.ALPHANUMERIC:return e.getBitsLength(b);case n.KANJI:return r.getBitsLength(b);case n.BYTE:return s.getBitsLength(b)}}function h(b){return b.reduce(function(A,T){const I=A.length-1>=0?A[A.length-1]:null;return I&&I.mode===T.mode?(A[A.length-1].data+=T.data,A):(A.push(T),A)},[])}function _(b){const A=[];for(let T=0;T<b.length;T++){const I=b[T];switch(I.mode){case n.NUMERIC:A.push([I,{data:I.data,mode:n.ALPHANUMERIC,length:I.length},{data:I.data,mode:n.BYTE,length:I.length}]);break;case n.ALPHANUMERIC:A.push([I,{data:I.data,mode:n.BYTE,length:I.length}]);break;case n.KANJI:A.push([I,{data:I.data,mode:n.BYTE,length:c(I.data)}]);break;case n.BYTE:A.push([{data:I.data,mode:n.BYTE,length:c(I.data)}])}}return A}function E(b,A){const T={},I={start:{}};let N=["start"];for(let x=0;x<b.length;x++){const R=b[x],M=[];for(let w=0;w<R.length;w++){const D=R[w],B=""+x+w;M.push(B),T[B]={node:D,lastCount:0},I[B]={};for(let k=0;k<N.length;k++){const V=N[k];T[V]&&T[V].node.mode===D.mode?(I[V][B]=m(T[V].lastCount+D.length,D.mode)-m(T[V].lastCount,D.mode),T[V].lastCount+=D.length):(T[V]&&(T[V].lastCount=D.length),I[V][B]=m(D.length,D.mode)+4+n.getCharCountIndicator(D.mode,A))}}N=M}for(let x=0;x<N.length;x++)I[N[x]].end=0;return{map:I,table:T}}function y(b,A){let T;const I=n.getBestModeForData(b);if(T=n.from(A,I),T!==n.BYTE&&T.bit<I.bit)throw new Error('"'+b+'" cannot be encoded with mode '+n.toString(T)+`.
 Suggested mode is: `+n.toString(I));switch(T===n.KANJI&&!i.isKanjiModeEnabled()&&(T=n.BYTE),T){case n.NUMERIC:return new a(b);case n.ALPHANUMERIC:return new e(b);case n.KANJI:return new r(b);case n.BYTE:return new s(b)}}t.fromArray=function(A){return A.reduce(function(T,I){return typeof I=="string"?T.push(y(I,null)):I.data&&T.push(y(I.data,I.mode)),T},[])},t.fromString=function(A,T){const I=u(A,i.isKanjiModeEnabled()),N=_(I),x=E(N,T),R=l.find_path(x.map,"start","end"),M=[];for(let w=1;w<R.length-1;w++)M.push(x.table[R[w]].node);return t.fromArray(h(M))},t.rawSplit=function(A){return t.fromArray(u(A,i.isKanjiModeEnabled()))}})(BM);const Gh=_o,Xg=Fh,uye=WAe,pye=zAe,fye=NM,mye=xM,Yv=RM,Kv=Uh,hye=KAe,Hm=LM,_ye=PM,gye=Zi,qg=BM;function bye(t,n){const a=t.size,e=mye.getPositions(n);for(let s=0;s<e.length;s++){const r=e[s][0],o=e[s][1];for(let i=-1;i<=7;i++)if(!(r+i<=-1||a<=r+i))for(let l=-1;l<=7;l++)o+l<=-1||a<=o+l||(i>=0&&i<=6&&(l===0||l===6)||l>=0&&l<=6&&(i===0||i===6)||i>=2&&i<=4&&l>=2&&l<=4?t.set(r+i,o+l,!0,!0):t.set(r+i,o+l,!1,!0))}}function vye(t){const n=t.size;for(let a=8;a<n-8;a++){const e=a%2===0;t.set(a,6,e,!0),t.set(6,a,e,!0)}}function Eye(t,n){const a=fye.getPositions(n);for(let e=0;e<a.length;e++){const s=a[e][0],r=a[e][1];for(let o=-2;o<=2;o++)for(let i=-2;i<=2;i++)o===-2||o===2||i===-2||i===2||o===0&&i===0?t.set(s+o,r+i,!0,!0):t.set(s+o,r+i,!1,!0)}}function Sye(t,n){const a=t.size,e=Hm.getEncodedBits(n);let s,r,o;for(let i=0;i<18;i++)s=Math.floor(i/3),r=i%3+a-8-3,o=(e>>i&1)===1,t.set(s,r,o,!0),t.set(r,s,o,!0)}function Zg(t,n,a){const e=t.size,s=_ye.getEncodedBits(n,a);let r,o;for(r=0;r<15;r++)o=(s>>r&1)===1,r<6?t.set(r,8,o,!0):r<8?t.set(r+1,8,o,!0):t.set(e-15+r,8,o,!0),r<8?t.set(8,e-r-1,o,!0):r<9?t.set(8,15-r-1+1,o,!0):t.set(8,15-r-1,o,!0);t.set(e-8,8,1,!0)}function Tye(t,n){const a=t.size;let e=-1,s=a-1,r=7,o=0;for(let i=a-1;i>0;i-=2)for(i===6&&i--;;){for(let l=0;l<2;l++)if(!t.isReserved(s,i-l)){let c=!1;o<n.length&&(c=(n[o]>>>r&1)===1),t.set(s,i-l,c),r--,r===-1&&(o++,r=7)}if(s+=e,s<0||a<=s){s-=e,e=-e;break}}}function Aye(t,n,a){const e=new uye;a.forEach(function(l){e.put(l.mode.bit,4),e.put(l.getLength(),gye.getCharCountIndicator(l.mode,t)),l.write(e)});const s=Gh.getSymbolTotalCodewords(t),r=Kv.getTotalCodewordsCount(t,n),o=(s-r)*8;for(e.getLengthInBits()+4<=o&&e.put(0,4);e.getLengthInBits()%8!==0;)e.putBit(0);const i=(o-e.getLengthInBits())/8;for(let l=0;l<i;l++)e.put(l%2?17:236,8);return yye(e,t,n)}function yye(t,n,a){const e=Gh.getSymbolTotalCodewords(n),s=Kv.getTotalCodewordsCount(n,a),r=e-s,o=Kv.getBlocksCount(n,a),i=e%o,l=o-i,c=Math.floor(e/o),d=Math.floor(r/o),u=d+1,m=c-d,h=new hye(m);let _=0;const E=new Array(o),y=new Array(o);let b=0;const A=new Uint8Array(t.buffer);for(let R=0;R<o;R++){const M=R<l?d:u;E[R]=A.slice(_,_+M),y[R]=h.encode(E[R]),_+=M,b=Math.max(b,M)}const T=new Uint8Array(e);let I=0,N,x;for(N=0;N<b;N++)for(x=0;x<o;x++)N<E[x].length&&(T[I++]=E[x][N]);for(N=0;N<m;N++)for(x=0;x<o;x++)T[I++]=y[x][N];return T}function Iye(t,n,a,e){let s;if(Array.isArray(t))s=qg.fromArray(t);else if(typeof t=="string"){let c=n;if(!c){const d=qg.rawSplit(t);c=Hm.getBestVersionForData(d,a)}s=qg.fromString(t,c||40)}else throw new Error("Invalid data");const r=Hm.getBestVersionForData(s,a);if(!r)throw new Error("The amount of data is too big to be stored in a QR Code");if(!n)n=r;else if(n<r)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+r+`.
`);const o=Aye(n,a,s),i=Gh.getSymbolSize(n),l=new pye(i);return bye(l,n),vye(l),Eye(l,n),Zg(l,a,0),n>=7&&Sye(l,n),Tye(l,o),isNaN(e)&&(e=Yv.getBestMask(l,Zg.bind(null,l,a))),Yv.applyMask(e,l),Zg(l,a,e),{modules:l,version:n,errorCorrectionLevel:a,maskPattern:e,segments:s}}CM.create=function(n,a){if(typeof n>"u"||n==="")throw new Error("No input text");let e=Xg.M,s,r;return typeof a<"u"&&(e=Xg.from(a.errorCorrectionLevel,Xg.M),s=Hm.from(a.version),r=Yv.from(a.maskPattern),a.toSJISFunc&&Gh.setToSJISFunction(a.toSJISFunc)),Iye(n,s,e,r)};var UM={},VS={};(function(t){function n(a){if(typeof a=="number"&&(a=a.toString()),typeof a!="string")throw new Error("Color should be defined as hex string");let e=a.slice().replace("#","").split("");if(e.length<3||e.length===5||e.length>8)throw new Error("Invalid hex color: "+a);(e.length===3||e.length===4)&&(e=Array.prototype.concat.apply([],e.map(function(r){return[r,r]}))),e.length===6&&e.push("F","F");const s=parseInt(e.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+e.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});const s=typeof e.margin>"u"||e.margin===null||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,o=e.scale||4;return{width:r,scale:r?4:o,margin:s,color:{dark:n(e.color.dark||"#000000ff"),light:n(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,s){return s.width&&s.width>=e+s.margin*2?s.width/(e+s.margin*2):s.scale},t.getImageWidth=function(e,s){const r=t.getScale(e,s);return Math.floor((e+s.margin*2)*r)},t.qrToImageData=function(e,s,r){const o=s.modules.size,i=s.modules.data,l=t.getScale(o,r),c=Math.floor((o+r.margin*2)*l),d=r.margin*l,u=[r.color.light,r.color.dark];for(let m=0;m<c;m++)for(let h=0;h<c;h++){let _=(m*c+h)*4,E=r.color.light;if(m>=d&&h>=d&&m<c-d&&h<c-d){const y=Math.floor((m-d)/l),b=Math.floor((h-d)/l);E=u[i[y*o+b]?1:0]}e[_++]=E.r,e[_++]=E.g,e[_++]=E.b,e[_]=E.a}}})(VS);(function(t){const n=VS;function a(s,r,o){s.clearRect(0,0,r.width,r.height),r.style||(r.style={}),r.height=o,r.width=o,r.style.height=o+"px",r.style.width=o+"px"}function e(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(r,o,i){let l=i,c=o;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),o||(c=e()),l=n.getOptions(l);const d=n.getImageWidth(r.modules.size,l),u=c.getContext("2d"),m=u.createImageData(d,d);return n.qrToImageData(m.data,r,l),a(u,c,d),u.putImageData(m,0,0),c},t.renderToDataURL=function(r,o,i){let l=i;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),l||(l={});const c=t.render(r,o,l),d=l.type||"image/png",u=l.rendererOpts||{};return c.toDataURL(d,u.quality)}})(UM);var $M={};const Cye=VS;function hC(t,n){const a=t.a/255,e=n+'="'+t.hex+'"';return a<1?e+" "+n+'-opacity="'+a.toFixed(2).slice(1)+'"':e}function Qg(t,n,a){let e=t+n;return typeof a<"u"&&(e+=" "+a),e}function Oye(t,n,a){let e="",s=0,r=!1,o=0;for(let i=0;i<t.length;i++){const l=Math.floor(i%n),c=Math.floor(i/n);!l&&!r&&(r=!0),t[i]?(o++,i>0&&l>0&&t[i-1]||(e+=r?Qg("M",l+a,.5+c+a):Qg("m",s,0),s=0,r=!1),l+1<n&&t[i+1]||(e+=Qg("h",o),o=0)):s++}return e}$M.render=function(n,a,e){const s=Cye.getOptions(a),r=n.modules.size,o=n.modules.data,i=r+s.margin*2,l=s.color.light.a?"<path "+hC(s.color.light,"fill")+' d="M0 0h'+i+"v"+i+'H0z"/>':"",c="<path "+hC(s.color.dark,"stroke")+' d="'+Oye(o,r,s.margin)+'"/>',d='viewBox="0 0 '+i+" "+i+'"',m='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+d+' shape-rendering="crispEdges">'+l+c+`</svg>
`;return typeof e=="function"&&e(null,m),m};const Nye=HAe,Xv=CM,GM=UM,xye=$M;function HS(t,n,a,e,s){const r=[].slice.call(arguments,1),o=r.length,i=typeof r[o-1]=="function";if(!i&&!Nye())throw new Error("Callback required as last argument");if(i){if(o<2)throw new Error("Too few arguments provided");o===2?(s=a,a=n,n=e=void 0):o===3&&(n.getContext&&typeof s>"u"?(s=e,e=void 0):(s=e,e=a,a=n,n=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(a=n,n=e=void 0):o===2&&!n.getContext&&(e=a,a=n,n=void 0),new Promise(function(l,c){try{const d=Xv.create(a,e);l(t(d,n,e))}catch(d){c(d)}})}try{const l=Xv.create(a,e);s(null,t(l,n,e))}catch(l){s(l)}}$i.create=Xv.create;$i.toCanvas=HS.bind(null,GM.render);$i.toDataURL=HS.bind(null,GM.renderToDataURL);$i.toString=HS.bind(null,function(t,n,a){return xye.render(t,a)});const Rye={props:{title:{type:String,default:""},message:{type:String,default:""}}},wye={class:"empty-state py-16 px-1 ml-0 mr-0"},Mye={key:0,class:"text-n-slate-12 block text-center w-full text-xl font-medium"},Lye={key:1,class:"block text-center text-n-slate-11 my-4 mx-auto w-[90%]"};function Dye(t,n,a,e,s,r){return p(),g("div",wye,[a.title?(p(),g("h3",Mye,C(a.title),1)):O("v-if",!0),a.message?(p(),g("p",Lye,C(a.message),1)):O("v-if",!0),qe(t.$slots,"default")])}const Id=G(Rye,[["render",Dye],["__file","/app/app/javascript/dashboard/components/widgets/EmptyState.vue"]]),_C={REPLY_TO:"replyTo",REPLY_TO_OUTGOING:"replyToOutgoing"};_C.REPLY_TO+"",ht.FB,ht.WEB,ht.TWITTER,ht.WHATSAPP,ht.TELEGRAM,ht.API,_C.REPLY_TO_OUTGOING+"",ht.WEB,ht.TWITTER,ht.WHATSAPP,ht.TELEGRAM,ht.API;const Gi=(t=null)=>{const n=le("getSelectedChat"),a=le("inboxes/getInboxById"),e=S(()=>{var M;const R=t||((M=n.value)==null?void 0:M.inbox_id);return R?Os(a.value(R),{deep:!0}):null}),s=S(()=>{var R;return(R=e.value)==null?void 0:R.channelType}),r=S(()=>s.value===ht.API),o=S(()=>s.value===ht.FB),i=S(()=>s.value===ht.WEB),l=S(()=>s.value===ht.TWILIO),c=S(()=>s.value===ht.LINE),d=S(()=>s.value===ht.EMAIL),u=S(()=>s.value===ht.TELEGRAM),m=S(()=>{var R;return((R=e.value)==null?void 0:R.provider)||""}),h=S(()=>{var R;return d.value&&((R=e.value)==null?void 0:R.provider)==="microsoft"}),_=S(()=>{var R;return d.value&&((R=e.value)==null?void 0:R.provider)==="google"}),E=S(()=>{const{medium:R=""}=e.value||{};return l.value&&R==="sms"}),y=S(()=>s.value===ht.SMS||E.value),b=S(()=>{const{medium:R=""}=e.value||{};return l.value&&R==="whatsapp"}),A=S(()=>s.value===ht.WHATSAPP&&m.value==="whatsapp_cloud"),T=S(()=>s.value===ht.WHATSAPP&&m.value==="default"),I=S(()=>s.value===ht.WHATSAPP||b.value),N=S(()=>s.value===ht.INSTAGRAM),x=S(()=>s.value===ht.VOICE);return{inbox:e,isAFacebookInbox:o,isALineChannel:c,isAPIInbox:r,isASmsInbox:y,isATelegramChannel:u,isATwilioChannel:l,isAWebWidgetInbox:i,isAWhatsAppChannel:I,isAMicrosoftInbox:h,isAGoogleInbox:_,isATwilioWhatsAppChannel:b,isAWhatsAppCloudChannel:A,is360DialogWhatsAppChannel:T,isAnEmailChannel:d,isAnInstagramChannel:N,isAVoiceChannel:x}},Pye={__name:"FinishSetup",setup(t,{expose:n}){n();const{t:a}=Q(),e=lt(),s=Bn(),r=Lt({whatsapp:"",messenger:"",telegram:""}),o=S(()=>s.getters["inboxes/getInbox"](e.params.inbox_id)),{isAWhatsAppCloudChannel:i,isATwilioChannel:l,isASmsInbox:c,isALineChannel:d,isAnEmailChannel:u,isAWhatsAppChannel:m,isAFacebookInbox:h,isATelegramChannel:_,isATwilioWhatsAppChannel:E}=Gi(e.params.inbox_id),y=S(()=>{const R=o.value.instagram_id,M=s.getters["inboxes/getFacebookInboxByInstagramId"](R);return o.value.channel_type===ht.INSTAGRAM&&M}),b=S(()=>{var R;return i.value&&((R=o.value.provider_config)==null?void 0:R.source)!=="embedded_signup"}),A=S(()=>{var R;return i.value&&((R=o.value.provider_config)==null?void 0:R.source)==="embedded_signup"}),T=S(()=>l.value?`${a("INBOX_MGMT.FINISH.MESSAGE")}. ${a("INBOX_MGMT.ADD.TWILIO.API_CALLBACK.SUBTITLE")}`:c.value?`${a("INBOX_MGMT.FINISH.MESSAGE")}. ${a("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_CALLBACK.SUBTITLE")}`:d.value?`${a("INBOX_MGMT.FINISH.MESSAGE")}. ${a("INBOX_MGMT.ADD.LINE_CHANNEL.API_CALLBACK.SUBTITLE")}`:i.value&&b.value?`${a("INBOX_MGMT.FINISH.MESSAGE")}. ${a("INBOX_MGMT.ADD.WHATSAPP.API_CALLBACK.SUBTITLE")}`:u.value&&!o.value.provider?a("INBOX_MGMT.ADD.EMAIL_CHANNEL.FINISH_MESSAGE"):o.value.web_widget_script?a("INBOX_MGMT.FINISH.WEBSITE_SUCCESS"):A.value?`${a("INBOX_MGMT.FINISH.MESSAGE")}. ${a("INBOX_MGMT.FINISH.WHATSAPP_QR_INSTRUCTION")}`:a("INBOX_MGMT.FINISH.MESSAGE"));async function I(R,M){if(!M||!M.trim()){console.warn(`Invalid identifier for ${R} QR code`);return}try{const D={whatsapp:k=>`https://wa.me/${k}`,messenger:k=>`https://m.me/${k}`,telegram:k=>`https://t.me/${k}`}[R](M),B=await $i.toDataURL(D);r[R]=B}catch(w){console.error(`Error generating ${R} QR code:`,w),r[R]=""}}async function N(){if(o.value){if(o.value.phone_number&&m.value){const R=o.value.phone_number.replace("whatsapp:","");await I("whatsapp",R)}o.value.page_id&&h.value&&await I("messenger",o.value.page_id),_.value&&o.value.bot_name&&await I("telegram",o.value.bot_name)}}je(o,R=>{R&&N()},{immediate:!0}),Pe(()=>{N()});const x={t:a,route:e,store:s,qrCodes:r,currentInbox:o,isAWhatsAppCloudChannel:i,isATwilioChannel:l,isASmsInbox:c,isALineChannel:d,isAnEmailChannel:u,isAWhatsAppChannel:m,isAFacebookInbox:h,isATelegramChannel:_,isATwilioWhatsAppChannel:E,hasDuplicateInstagramInbox:y,shouldShowWhatsAppWebhookDetails:b,isWhatsAppEmbeddedSignup:A,message:T,generateQRCode:I,generateQRCodes:N,computed:S,onMounted:Pe,reactive:Lt,watch:je,get useRoute(){return lt},get useStore(){return Bn},get useI18n(){return Q},get QRCode(){return $i},EmptyState:Id,NextButton:Se,DuplicateInboxBanner:pM,get useInbox(){return Gi},get INBOX_TYPES(){return ht}};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}},kye={class:"overflow-auto col-span-6 p-6 w-full h-full"},Bye={class:"w-full text-center"},Fye={class:"my-4 mx-auto max-w-[70%]"},Uye={class:"w-[50%] max-w-[50%] ml-[25%]"},$ye={key:0,class:"w-[50%] max-w-[50%] ml-[25%]"},Gye={class:"mt-8 font-medium text-slate-700 dark:text-slate-200"},Vye={class:"mt-8 font-medium text-n-slate-11"},Hye={class:"w-[50%] max-w-[50%] ml-[25%]"},jye={class:"w-[50%] max-w-[50%] ml-[25%]"},Wye={key:1,class:"w-[50%] max-w-[50%] ml-[25%]"},zye={key:2,class:"flex flex-col gap-3 items-center mt-8"},Yye={class:"mt-2 text-sm text-n-slate-9"},Kye={class:"rounded-lg shadow outline-1 outline-n-strong outline"},Xye=["src"],qye={key:3,class:"flex flex-col gap-3 items-center mt-8"},Zye={class:"mt-2 text-sm text-n-slate-9"},Qye={class:"rounded-lg shadow outline-1 outline-n-strong outline"},Jye=["src"],e0e={key:4,class:"flex flex-col gap-4 items-center mt-8"},t0e={class:"mt-2 text-sm text-n-slate-9"},n0e={class:"rounded-lg shadow outline-1 outline-n-strong outline"},a0e=["src"],s0e={class:"flex gap-2 justify-center mt-4"};function o0e(t,n,a,e,s,r){const o=H("woot-code"),i=H("router-link");return p(),g("div",kye,[e.hasDuplicateInstagramInbox?(p(),L(e.DuplicateInboxBanner,{key:0,content:t.$t("INBOX_MGMT.ADD.INSTAGRAM.NEW_INBOX_SUGGESTION")},null,8,["content"])):O("v-if",!0),v(e.EmptyState,{title:t.$t("INBOX_MGMT.FINISH.TITLE"),message:e.message,"button-text":t.$t("INBOX_MGMT.FINISH.BUTTON_TEXT")},{default:z(()=>[f("div",Bye,[f("div",Fye,[e.currentInbox.web_widget_script?(p(),L(o,{key:0,script:e.currentInbox.web_widget_script},null,8,["script"])):O("v-if",!0)]),f("div",Uye,[e.isATwilioWhatsAppChannel?(p(),L(o,{key:0,lang:"html",script:e.currentInbox.callback_webhook_url},null,8,["script"])):O("v-if",!0)]),e.shouldShowWhatsAppWebhookDetails?(p(),g("div",$ye,[f("p",Gye,C(t.$t("INBOX_MGMT.ADD.WHATSAPP.API_CALLBACK.WEBHOOK_URL")),1),v(o,{lang:"html",script:e.currentInbox.callback_webhook_url},null,8,["script"]),f("p",Vye,C(t.$t("INBOX_MGMT.ADD.WHATSAPP.API_CALLBACK.WEBHOOK_VERIFICATION_TOKEN")),1),v(o,{lang:"html",script:e.currentInbox.provider_config.webhook_verify_token},null,8,["script"])])):O("v-if",!0),f("div",Hye,[e.isALineChannel?(p(),L(o,{key:0,lang:"html",script:e.currentInbox.callback_webhook_url},null,8,["script"])):O("v-if",!0)]),f("div",jye,[e.isASmsInbox?(p(),L(o,{key:0,lang:"html",script:e.currentInbox.callback_webhook_url},null,8,["script"])):O("v-if",!0)]),e.isAnEmailChannel&&!e.currentInbox.provider?(p(),g("div",Wye,[v(o,{lang:"html",script:e.currentInbox.forward_to_email},null,8,["script"])])):O("v-if",!0),e.isAWhatsAppChannel&&e.qrCodes.whatsapp?(p(),g("div",zye,[f("p",Yye,C(t.$t("INBOX_MGMT.FINISH.WHATSAPP_QR_INSTRUCTION")),1),f("div",Kye,[f("img",{src:e.qrCodes.whatsapp,alt:"WhatsApp QR Code",class:"rounded-lg size-48 dark:invert"},null,8,Xye)])])):O("v-if",!0),e.isAFacebookInbox&&e.qrCodes.messenger?(p(),g("div",qye,[f("p",Zye,C(t.$t("INBOX_MGMT.FINISH.MESSENGER_QR_INSTRUCTION")),1),f("div",Qye,[f("img",{src:e.qrCodes.messenger,alt:"Messenger QR Code",class:"rounded-lg size-48 dark:invert"},null,8,Jye)])])):O("v-if",!0),e.isATelegramChannel&&e.qrCodes.telegram?(p(),g("div",e0e,[f("p",t0e,C(t.$t("INBOX_MGMT.FINISH.TELEGRAM_QR_INSTRUCTION")),1),f("div",n0e,[f("img",{src:e.qrCodes.telegram,alt:"Telegram QR Code",class:"rounded-lg size-48 dark:invert"},null,8,a0e)])])):O("v-if",!0),f("div",s0e,[v(i,{to:{name:"settings_inbox_show",params:{inboxId:t.$route.params.inbox_id}}},{default:z(()=>[v(e.NextButton,{outline:"",slate:"",label:t.$t("INBOX_MGMT.FINISH.MORE_SETTINGS")},null,8,["label"])]),_:1},8,["to"]),v(i,{to:{name:"inbox_dashboard",params:{inboxId:t.$route.params.inbox_id}}},{default:z(()=>[v(e.NextButton,{solid:"",teal:"",label:t.$t("INBOX_MGMT.FINISH.BUTTON_TEXT")},null,8,["label"])]),_:1},8,["to"])])])]),_:1},8,["title","message","button-text"])])}const r0e=G(Pye,[["render",o0e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/inbox/FinishSetup.vue"]]),i0e={routes:[{path:vt("accounts/:accountId/settings/inboxes"),component:cs,children:[{path:"",redirect:t=>({name:"settings_inbox_list",params:t.params})},{path:"list",name:"settings_inbox_list",component:gge,meta:{featureFlag:pt.INBOX_MANAGEMENT,permissions:["administrator"]}}]},{path:vt("accounts/:accountId/settings/inboxes"),component:sp,props:t=>{const n=t.name!=="settings_inbox_list",a=t.name==="settings_inbox_show";return{headerTitle:"INBOX_MGMT.HEADER",icon:"mail-inbox-all",showBackButton:n,fullWidth:a}},children:[{path:"new",component:CAe,children:[{path:"",name:"settings_inbox_new",component:DAe,meta:{featureFlag:pt.INBOX_MANAGEMENT,permissions:["administrator"]}},{path:":inbox_id/finish",name:"settings_inbox_finish",component:r0e,meta:{featureFlag:pt.INBOX_MANAGEMENT,permissions:["administrator"]}},{path:":sub_page",name:"settings_inboxes_page_channel",component:Y_e,meta:{featureFlag:pt.INBOX_MANAGEMENT,permissions:["administrator"]},props:t=>({channelName:t.params.sub_page})},{path:":inbox_id/agents",name:"settings_inboxes_add_agents",meta:{featureFlag:pt.INBOX_MANAGEMENT,permissions:["administrator"]},component:VAe}]},{path:":inboxId/:tab?",name:"settings_inbox_show",component:EAe,meta:{featureFlag:pt.INBOX_MANAGEMENT,permissions:["administrator"]}}]}]},zu=t=>{const n=le("integrations/getIntegration"),a=S(()=>n.value(t)),e=S(()=>a.value.hook_type==="inbox"),s=S(()=>!!a.value.hooks.length),r=S(()=>a.value.allow_multiple_hooks?"multiple":"single"),o=S(()=>r.value==="multiple"),i=S(()=>r.value==="single");return{integration:a,integrationType:r,isIntegrationMultiple:o,isIntegrationSingle:i,isHookTypeInbox:e,hasConnectedHooks:s}},l0e={components:{FormKit:hk,NextButton:Se},props:{integrationId:{type:String,required:!0}},emits:["close"],setup(t){const{integration:n,isHookTypeInbox:a}=zu(t.integrationId);return{integration:n,isHookTypeInbox:a}},data(){return{endPoint:"",alertMessage:"",values:{}}},computed:{..._t({uiFlags:"integrations/getUIFlags",dialogFlowEnabledInboxes:"inboxes/dialogFlowEnabledInboxes"}),inboxes(){return this.dialogFlowEnabledInboxes.filter(t=>this.isIntegrationDialogflow?!this.connectedDialogflowInboxIds.includes(t.id):!0).map(t=>({label:t.name,value:t.id}))},connectedDialogflowInboxIds(){return this.isIntegrationDialogflow?this.integration.hooks.map(t=>{var n;return(n=t.inbox)==null?void 0:n.id}):[]},formItems(){return this.integration.settings_form_schema},isIntegrationDialogflow(){return this.integration.id==="dialogflow"}},methods:{onClose(){this.$emit("close")},buildHookPayload(){const t={app_id:this.integration.id,settings:{}};return t.settings=Object.keys(this.values).reduce((n,a)=>(a!=="inbox"&&(n[a]=this.values[a]),n),{}),this.formItems.forEach(n=>{var a;(a=n.validation)!=null&&a.includes("JSON")&&(t.settings[n.name]=JSON.parse(t.settings[n.name]))}),this.isHookTypeInbox&&this.values.inbox&&(t.inbox_id=this.values.inbox),t},async submitForm(){var t,n;try{await this.$store.dispatch("integrations/createHook",this.buildHookPayload()),this.alertMessage=this.$t("INTEGRATION_APPS.ADD.API.SUCCESS_MESSAGE"),this.onClose()}catch(a){const e=(n=(t=a==null?void 0:a.response)==null?void 0:t.data)==null?void 0:n.message;this.alertMessage=e||this.$t("INTEGRATION_APPS.ADD.API.ERROR_MESSAGE")}finally{Z(this.alertMessage)}}}},c0e={class:"flex flex-col h-auto overflow-auto integration-hooks"},d0e={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function u0e(t,n,a,e,s,r){const o=H("woot-modal-header"),i=H("FormKit"),l=H("NextButton");return p(),g("div",c0e,[v(o,{"header-title":e.integration.name,"header-content":e.integration.short_description},null,8,["header-title","header-content"]),v(i,{modelValue:s.values,"onUpdate:modelValue":n[0]||(n[0]=c=>s.values=c),type:"form","form-class":"w-full grid gap-4","submit-attrs":{inputClass:"hidden",wrapperClass:"hidden"},"incomplete-message":!1,onSubmit:r.submitForm},{default:z(()=>[(p(!0),g(de,null,Ae(r.formItems,c=>(p(),L(i,Ta({key:c.name,ref_for:!0},c),null,16))),128)),e.isHookTypeInbox?(p(),L(i,{key:0,options:r.inboxes,type:"select",name:"inbox","input-class":"reset-base",placeholder:t.$t("INTEGRATION_APPS.ADD.FORM.INBOX.LABEL"),label:t.$t("INTEGRATION_APPS.ADD.FORM.INBOX.PLACEHOLDER"),validation:"required","validation-name":"Inbox"},null,8,["options","placeholder","label"])):O("v-if",!0),f("div",d0e,[v(l,{faded:"",slate:"",type:"reset",label:t.$t("INTEGRATION_APPS.ADD.FORM.CANCEL"),onClick:Ve(r.onClose,["prevent"])},null,8,["label","onClick"]),v(l,{type:"submit",label:t.$t("INTEGRATION_APPS.ADD.FORM.SUBMIT"),"is-loading":t.uiFlags.isCreatingHook},null,8,["label","is-loading"])])]),_:1},8,["modelValue","onSubmit"])])}const p0e=G(l0e,[["render",u0e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/integrations/NewHook.vue"]]),f0e={__name:"SingleIntegrationHooks",props:{integrationId:{type:String,required:!0}},emits:["add","delete"],setup(t,{expose:n}){n();const a=t,{integration:e,hasConnectedHooks:s}=zu(a.integrationId),r={props:a,integration:e,hasConnectedHooks:s,get useIntegrationHook(){return zu},Button:Se};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},m0e={class:"outline outline-n-container outline-1 bg-n-alpha-3 rounded-md shadow flex-grow overflow-auto p-4"},h0e={class:"flex items-center justify-center"},_0e={class:"flex h-16 w-16 items-center justify-center"},g0e=["src"],b0e=["src"],v0e={class:"flex flex-col justify-center m-0 mx-4 flex-1"},E0e={class:"mb-1 text-xl font-medium text-n-slate-12"},S0e={class:"text-n-slate-11 text-sm leading-6"},T0e={class:"flex justify-center items-center mb-0 w-[15%]"},A0e={key:0},y0e={key:1};function I0e(t,n,a,e,s,r){return p(),g("div",m0e,[f("div",h0e,[f("div",_0e,[f("img",{src:`/dashboard/images/integrations/${a.integrationId}.png`,class:"max-w-full rounded-md border border-n-weak shadow-sm block dark:hidden bg-n-alpha-3 dark:bg-n-alpha-2"},null,8,g0e),f("img",{src:`/dashboard/images/integrations/${a.integrationId}-dark.png`,class:"max-w-full rounded-md border border-n-weak shadow-sm hidden dark:block bg-n-alpha-3 dark:bg-n-alpha-2"},null,8,b0e)]),f("div",v0e,[f("h3",E0e,C(e.integration.name),1),f("p",S0e,C(e.integration.description),1)]),f("div",T0e,[e.hasConnectedHooks?(p(),g("div",A0e,[f("div",{onClick:n[0]||(n[0]=o=>t.$emit("delete",e.integration.hooks[0]))},[v(e.Button,{ruby:"",faded:"",label:t.$t("INTEGRATION_APPS.DISCONNECT.BUTTON_TEXT")},null,8,["label"])])])):(p(),g("div",y0e,[v(e.Button,{blue:"",faded:"",label:t.$t("INTEGRATION_APPS.CONNECT.BUTTON_TEXT"),onClick:n[1]||(n[1]=o=>t.$emit("add"))},null,8,["label"])]))])])])}const C0e=G(f0e,[["render",I0e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/integrations/SingleIntegrationHooks.vue"]]),O0e={components:{BaseSettingsHeader:Va,NextButton:Se},props:{integrationId:{type:String,required:!0},showAddButton:{type:Boolean,default:!1}},emits:["delete","add"],setup(t){const{integration:n,isHookTypeInbox:a,hasConnectedHooks:e}=zu(t.integrationId);return{integration:n,isHookTypeInbox:a,hasConnectedHooks:e}},computed:{..._t({globalConfig:"globalConfig/get"}),hookHeaders(){return this.integration.visible_properties},hooks(){if(!this.hasConnectedHooks)return[];const{hooks:t}=this.integration;return t.map(n=>({...n,id:n.id,properties:this.hookHeaders.map(a=>n.settings[a]?n.settings[a]:"--")}))}},mounted(){},methods:{inboxName(t){return t.inbox?t.inbox.name:""}}},N0e={class:"flex flex-col flex-1 gap-8 overflow-auto"},x0e={class:"w-full"},R0e={key:0},w0e={class:"[&>th]:font-semibold [&>th]:tracking-[1px] ltr:[&>th]:text-left rtl:[&>th]:text-right [&>th]:px-2.5 [&>th]:uppercase [&>th]:text-n-slate-12"},M0e={key:0},L0e={key:0,class:"break-words"},D0e={class:"flex justify-end gap-1"},P0e={key:1,class:"flex flex-col items-center justify-center h-full"};function k0e(t,n,a,e,s,r){const o=H("NextButton"),i=H("BaseSettingsHeader"),l=nt("tooltip");return p(),g("div",N0e,[v(i,{title:e.integration.name,description:t.$t(`INTEGRATION_APPS.SIDEBAR_DESCRIPTION.${e.integration.name.toUpperCase()}`,{installationName:t.globalConfig.installationName}),"feature-name":a.integrationId,"back-button-label":t.$t("INTEGRATION_SETTINGS.HEADER")},{actions:z(()=>[a.showAddButton?(p(),L(o,{key:0,icon:"i-lucide-circle-plus",label:t.$t("INTEGRATION_APPS.ADD_BUTTON"),onClick:n[0]||(n[0]=c=>t.$emit("add"))},null,8,["label"])):O("v-if",!0)]),_:1},8,["title","description","feature-name","back-button-label"]),f("div",x0e,[e.hasConnectedHooks?(p(),g("table",R0e,[f("thead",w0e,[(p(!0),g(de,null,Ae(r.hookHeaders,c=>(p(),g("th",{key:c,class:"ltr:!pl-0 rtl:!pr-0"},C(c),1))),128)),e.isHookTypeInbox?(p(),g("th",M0e,C(t.$t("INTEGRATION_APPS.LIST.INBOX")),1)):O("v-if",!0)]),f("tbody",null,[(p(!0),g(de,null,Ae(r.hooks,c=>(p(),g("tr",{key:c.id,class:"border-b border-n-weak [&>td]:p-2.5 [&>td]:text-n-slate-12"},[(p(!0),g(de,null,Ae(c.properties,d=>(p(),g("td",{key:d,class:"ltr:!pl-0 rtl:!pr-0"},C(d),1))),128)),e.isHookTypeInbox?(p(),g("td",L0e,C(r.inboxName(c)),1)):O("v-if",!0),f("td",D0e,[ce(v(o,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:d=>t.$emit("delete",c)},null,8,["onClick"]),[[l,t.$t("INTEGRATION_APPS.LIST.DELETE.BUTTON_TEXT"),void 0,{top:!0}]])])]))),128))])])):(p(),g("p",P0e,C(t.$t("INTEGRATION_APPS.NO_HOOK_CONFIGURED",{integrationId:e.integration.id})),1))])])}const B0e=G(O0e,[["render",k0e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/integrations/MultipleIntegrationHooks.vue"]]),F0e={components:{NewHook:p0e,SingleIntegrationHooks:C0e,MultipleIntegrationHooks:B0e},props:{integrationId:{type:[String,Number],required:!0}},setup(t){const{integrationId:n}=t,{integration:a,isIntegrationMultiple:e,isIntegrationSingle:s,isHookTypeInbox:r}=zu(n);return{integration:a,isIntegrationMultiple:e,isIntegrationSingle:s,isHookTypeInbox:r}},data(){return{loading:{},showAddHookModal:!1,showDeleteConfirmationPopup:!1,selectedHook:{},alertMessage:""}},computed:{..._t({uiFlags:"integrations/getUIFlags"}),showIntegrationHooks(){return!this.uiFlags.isFetching&&!b4(this.integration)},showAddButton(){return this.showIntegrationHooks&&this.isIntegrationMultiple},deleteTitle(){return this.isHookTypeInbox?this.$t("INTEGRATION_APPS.DELETE.TITLE.INBOX"):this.$t("INTEGRATION_APPS.DELETE.TITLE.ACCOUNT")},deleteMessage(){return this.isHookTypeInbox?this.$t("INTEGRATION_APPS.DELETE.MESSAGE.INBOX"):this.$t("INTEGRATION_APPS.DELETE.MESSAGE.ACCOUNT")},confirmText(){return this.isHookTypeInbox?this.$t("INTEGRATION_APPS.DELETE.CONFIRM_BUTTON_TEXT.INBOX"):this.$t("INTEGRATION_APPS.DELETE.CONFIRM_BUTTON_TEXT.ACCOUNT")},cancelText(){return this.$t("INTEGRATION_APPS.DELETE.CANCEL_BUTTON_TEXT")}},methods:{openAddHookModal(){this.showAddHookModal=!0},hideAddHookModal(){this.showAddHookModal=!1},openDeletePopup(t){this.showDeleteConfirmationPopup=!0,this.selectedHook=t},closeDeletePopup(){this.showDeleteConfirmationPopup=!1},async confirmDeletion(){var t,n;try{await this.$store.dispatch("integrations/deleteHook",{hookId:this.selectedHook.id,appId:this.selectedHook.app_id}),this.alertMessage=this.$t("INTEGRATION_APPS.DELETE.API.SUCCESS_MESSAGE"),this.closeDeletePopup()}catch(a){const e=(n=(t=a==null?void 0:a.response)==null?void 0:t.data)==null?void 0:n.message;this.alertMessage=e||this.$t("INTEGRATION_APPS.DELETE.API.ERROR_MESSAGE")}finally{Z(this.alertMessage)}}}},U0e={class:"overflow-auto p-4 w-full my-auto flex flex-wrap h-full"},$0e={key:0,class:"w-full"},G0e={key:0},V0e={key:1};function H0e(t,n,a,e,s,r){const o=H("MultipleIntegrationHooks"),i=H("SingleIntegrationHooks"),l=H("NewHook"),c=H("woot-modal"),d=H("woot-delete-modal");return p(),g("div",U0e,[r.showIntegrationHooks?(p(),g("div",$0e,[e.isIntegrationMultiple?(p(),g("div",G0e,[v(o,{"integration-id":a.integrationId,"show-add-button":r.showAddButton,onAdd:r.openAddHookModal,onDelete:r.openDeletePopup},null,8,["integration-id","show-add-button","onAdd","onDelete"])])):O("v-if",!0),e.isIntegrationSingle?(p(),g("div",V0e,[v(i,{"integration-id":a.integrationId,onAdd:r.openAddHookModal,onDelete:r.openDeletePopup},null,8,["integration-id","onAdd","onDelete"])])):O("v-if",!0)])):O("v-if",!0),v(c,{show:s.showAddHookModal,"onUpdate:show":n[0]||(n[0]=u=>s.showAddHookModal=u),"on-close":r.hideAddHookModal},{default:z(()=>[v(l,{"integration-id":a.integrationId,onClose:r.hideAddHookModal},null,8,["integration-id","onClose"])]),_:1},8,["show","on-close"]),v(d,{show:s.showDeleteConfirmationPopup,"onUpdate:show":n[1]||(n[1]=u=>s.showDeleteConfirmationPopup=u),"on-close":r.closeDeletePopup,"on-confirm":r.confirmDeletion,title:r.deleteTitle,message:r.deleteMessage,"confirm-text":r.confirmText,"reject-text":r.cancelText},null,8,["show","on-close","on-confirm","title","message","confirm-text","reject-text"])])}const j0e=G(F0e,[["render",H0e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/integrations/IntegrationHooks.vue"]]),W0e={__name:"IntegrationItem",props:{id:{type:[String,Number],required:!0},name:{type:String,default:""},description:{type:String,default:""},enabled:{type:Boolean,default:!1}},setup(t,{expose:n}){n();const a=t,e=xt(),s=e.getCurrentAccountId,{t:r}=Q(),{replaceInstallationName:o}=Rs(),i=S(()=>a.enabled?r("INTEGRATION_APPS.STATUS.ENABLED"):r("INTEGRATION_APPS.STATUS.DISABLED")),l=S(()=>a.enabled?"bg-n-teal-9":"bg-n-slate-8"),c=S(()=>vt(`accounts/${s.value}/settings/integrations/${a.id}`)),d={props:a,getters:e,accountId:s,t:r,replaceInstallationName:o,integrationStatus:i,integrationStatusColor:l,actionURL:c,computed:S,get useStoreGetters(){return xt},get useI18n(){return Q},get frontendURL(){return vt},get useBranding(){return Rs},Button:Se};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}},z0e={class:"flex flex-col flex-1 p-6 m-[1px] outline outline-n-container outline-1 bg-n-alpha-3 rounded-md shadow"},Y0e={class:"flex items-start justify-between"},K0e={class:"flex h-12 w-12 mb-4"},X0e=["src"],q0e=["src"],Z0e={class:"flex flex-col m-0 flex-1"},Q0e={class:"font-medium mb-2 text-n-slate-12 flex justify-between items-center"},J0e={class:"text-base font-semibold"},eIe={class:"text-n-slate-11"};function tIe(t,n,a,e,s,r){const o=H("router-link"),i=nt("tooltip");return p(),g("div",z0e,[f("div",Y0e,[f("div",K0e,[f("img",{src:`/dashboard/images/integrations/${a.id}.png`,class:"max-w-full rounded-md border border-n-weak shadow-sm block dark:hidden bg-n-alpha-3 dark:bg-n-alpha-2"},null,8,X0e),f("img",{src:`/dashboard/images/integrations/${a.id}-dark.png`,class:"max-w-full rounded-md border border-n-weak shadow-sm hidden dark:block bg-n-alpha-3 dark:bg-n-alpha-2"},null,8,q0e)]),ce((p(),g("span",{class:oe(["text-white p-0.5 rounded-full w-5 h-5 flex items-center justify-center",e.integrationStatusColor])},n[0]||(n[0]=[f("i",{class:"i-ph-check-bold text-sm"},null,-1)]),2)),[[i,e.integrationStatus]])]),f("div",Z0e,[f("div",Q0e,[f("span",J0e,C(a.name),1),v(o,{to:e.actionURL},{default:z(()=>[v(e.Button,{label:t.$t("INTEGRATION_APPS.CONFIGURE"),link:""},null,8,["label"])]),_:1},8,["to"])]),f("p",eIe,C(e.replaceInstallationName(a.description)),1)])])}const nIe=G(W0e,[["render",tIe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/integrations/IntegrationItem.vue"]]),aIe={__name:"Index",setup(t,{expose:n}){n();const a=Fe(),e=xt(),{replaceInstallationName:s}=Rs(),r=e["integrations/getUIFlags"],o=S(()=>e["integrations/getAppIntegrations"].value);Pe(()=>{a.dispatch("integrations/get")});const i={store:a,getters:e,replaceInstallationName:s,uiFlags:r,integrationList:o,get useStoreGetters(){return xt},get useStore(){return Fe},computed:S,onMounted:Pe,get useBranding(){return Rs},IntegrationItem:nIe,SettingsLayout:Ha,BaseSettingsHeader:Va};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}},sIe={class:"flex-grow flex-shrink overflow-auto"},oIe={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4"};function rIe(t,n,a,e,s,r){return p(),L(e.SettingsLayout,{"is-loading":e.uiFlags.isFetching,"loading-message":t.$t("INTEGRATION_SETTINGS.LOADING")},{header:z(()=>[v(e.BaseSettingsHeader,{title:t.$t("INTEGRATION_SETTINGS.HEADER"),description:e.replaceInstallationName(t.$t("INTEGRATION_SETTINGS.DESCRIPTION")),"link-text":t.$t("INTEGRATION_SETTINGS.LEARN_MORE"),"feature-name":"integrations"},null,8,["title","description","link-text"])]),body:z(()=>[f("div",sIe,[f("div",oIe,[(p(!0),g(de,null,Ae(e.integrationList,o=>(p(),L(e.IntegrationItem,{id:o.id,key:o.id,logo:o.logo,name:o.name,description:o.description,enabled:o.enabled},null,8,["id","logo","name","description","enabled"]))),128))])])]),_:1},8,["is-loading","loading-message"])}const iIe=G(aIe,[["render",rIe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/integrations/Index.vue"]]),Yu=(t,n)=>{const a=n.toUpperCase();return`${t}.${a}`},{EXAMPLE_WEBHOOK_URL:lIe}=gt,cIe=["conversation_created","conversation_status_changed","conversation_updated","message_created","message_updated","webwidget_triggered","contact_created","contact_updated","conversation_typing_on","conversation_typing_off"],dIe={components:{NextButton:Se},props:{value:{type:Object,default:()=>({})},isSubmitting:{type:Boolean,default:!1},submitLabel:{type:String,required:!0}},emits:["submit","cancel"],setup(){return{v$:rt()}},validations:{url:{required:Ge,minLength:Rt(7),url:Pl},subscriptions:{required:Ge}},data(){return{url:this.value.url||"",subscriptions:this.value.subscriptions||[],supportedWebhookEvents:cIe}},computed:{webhookURLInputPlaceholder(){return this.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.END_POINT.PLACEHOLDER",{webhookExampleURL:lIe})}},methods:{onSubmit(){this.$emit("submit",{url:this.url,subscriptions:this.subscriptions})},getI18nKey:Yu}},uIe={class:"w-full"},pIe=["placeholder"],fIe={key:0,class:"message"},mIe={class:"flex flex-col gap-2.5 mb-4"},hIe=["id","value"],_Ie=["for"],gIe={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function bIe(t,n,a,e,s,r){const o=H("NextButton");return p(),g("form",{class:"flex flex-col w-full",onSubmit:n[4]||(n[4]=Ve((...i)=>r.onSubmit&&r.onSubmit(...i),["prevent"]))},[f("div",uIe,[f("label",{class:oe({error:e.v$.url.$error})},[Oe(C(t.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.END_POINT.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[0]||(n[0]=i=>s.url=i),type:"text",name:"url",placeholder:r.webhookURLInputPlaceholder,onInput:n[1]||(n[1]=(...i)=>e.v$.url.$touch&&e.v$.url.$touch(...i))},null,40,pIe),[[Et,s.url]]),e.v$.url.$error?(p(),g("span",fIe,C(t.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.END_POINT.ERROR")),1)):O("v-if",!0)],2),f("label",{class:oe([{error:e.v$.url.$error},"mb-2"])},C(t.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.SUBSCRIPTIONS.LABEL")),3),f("div",mIe,[(p(!0),g(de,null,Ae(s.supportedWebhookEvents,i=>(p(),g("div",{key:i,class:"flex items-center"},[ce(f("input",{id:i,"onUpdate:modelValue":n[2]||(n[2]=l=>s.subscriptions=l),type:"checkbox",value:i,name:"subscriptions",class:"mr-2"},null,8,hIe),[[bn,s.subscriptions]]),f("label",{for:i,class:"text-sm"},C(`${t.$t(r.getI18nKey("INTEGRATION_SETTINGS.WEBHOOK.FORM.SUBSCRIPTIONS.EVENTS",i))} (${i})`),9,_Ie)]))),128))])]),f("div",gIe,[v(o,{faded:"",slate:"",type:"reset",label:t.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.CANCEL"),onClick:n[3]||(n[3]=Ve(i=>t.$emit("cancel"),["prevent"]))},null,8,["label"]),v(o,{type:"submit",disabled:e.v$.$invalid||a.isSubmitting,"is-loading":a.isSubmitting,label:a.submitLabel},null,8,["disabled","is-loading","label"])])],32)}const VM=G(dIe,[["render",bIe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/integrations/Webhooks/WebhookForm.vue"]]),vIe={components:{WebhookForm:VM},props:{onClose:{type:Function,required:!0}},setup(){const{replaceInstallationName:t}=Rs();return{replaceInstallationName:t}},computed:{..._t({uiFlags:"webhooks/getUIFlags"})},methods:{async onSubmit(t){try{await this.$store.dispatch("webhooks/create",{webhook:t}),Z(this.$t("INTEGRATION_SETTINGS.WEBHOOK.ADD.API.SUCCESS_MESSAGE")),this.onClose()}catch(n){const a=n.response.data.message||this.$t("INTEGRATION_SETTINGS.WEBHOOK.EDIT.API.ERROR_MESSAGE");Z(a)}}}},EIe={class:"h-auto overflow-auto flex flex-col"};function SIe(t,n,a,e,s,r){const o=H("woot-modal-header"),i=H("WebhookForm");return p(),g("div",EIe,[v(o,{"header-title":t.$t("INTEGRATION_SETTINGS.WEBHOOK.ADD.TITLE"),"header-content":e.replaceInstallationName(t.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.DESC"))},null,8,["header-title","header-content"]),v(i,{"is-submitting":t.uiFlags.creatingItem,"submit-label":t.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.ADD_SUBMIT"),onSubmit:r.onSubmit,onCancel:a.onClose},null,8,["is-submitting","submit-label","onSubmit","onCancel"])])}const TIe=G(vIe,[["render",SIe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/integrations/Webhooks/NewWebHook.vue"]]),AIe={components:{WebhookForm:VM},props:{value:{type:Object,required:!0},id:{type:[Number,String],required:!0},onClose:{type:Function,required:!0}},computed:{..._t({uiFlags:"webhooks/getUIFlags"})},methods:{async onSubmit(t){var n,a;try{await this.$store.dispatch("webhooks/update",{webhook:t,id:this.id}),Z(this.$t("INTEGRATION_SETTINGS.WEBHOOK.EDIT.API.SUCCESS_MESSAGE")),this.onClose()}catch(e){const s=((a=(n=e==null?void 0:e.response)==null?void 0:n.data)==null?void 0:a.message)||this.$t("INTEGRATION_SETTINGS.WEBHOOK.EDIT.API.ERROR_MESSAGE");Z(s)}}}},yIe={class:"flex flex-col h-auto overflow-auto"};function IIe(t,n,a,e,s,r){const o=H("woot-modal-header"),i=H("WebhookForm");return p(),g("div",yIe,[v(o,{"header-title":t.$t("INTEGRATION_SETTINGS.WEBHOOK.EDIT.TITLE")},null,8,["header-title"]),v(i,{value:a.value,"is-submitting":t.uiFlags.updatingItem,"submit-label":t.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.EDIT_SUBMIT"),onSubmit:r.onSubmit,onCancel:a.onClose},null,8,["value","is-submitting","submit-label","onSubmit","onCancel"])])}const CIe=G(AIe,[["render",IIe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/integrations/Webhooks/EditWebHook.vue"]]),OIe={__name:"ShowMore",props:{text:{type:String,default:""},limit:{type:Number,default:120}},setup(t,{expose:n}){n();const a=t,{t:e}=Q(),s=P(!1),r=S(()=>s.value||a.text.length<=a.limit?a.text:a.text.slice(0,a.limit)+"..."),o=S(()=>{const c=s.value?"SHOW_LESS":"SHOW_MORE";return e(`COMPONENTS.SHOW_MORE_BLOCK.${c}`)}),l={props:a,t:e,showMore:s,textToBeDisplayed:r,buttonLabel:o,toggleShowMore:()=>{s.value=!s.value},computed:S,ref:P,get useI18n(){return Q}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}};function NIe(t,n,a,e,s,r){return p(),g("span",null,[Oe(C(e.textToBeDisplayed)+" ",1),a.text.length>a.limit?(p(),g("button",{key:0,class:"text-n-brand !p-0 !border-0 align-top",onClick:e.toggleShowMore},C(e.buttonLabel),1)):O("v-if",!0)])}const xIe=G(OIe,[["render",NIe],["__file","/app/app/javascript/dashboard/components/widgets/ShowMore.vue"]]),RIe={__name:"WebhookRow",props:{webhook:{type:Object,required:!0},index:{type:Number,required:!0}},emits:["edit","delete"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=S(()=>{const{subscriptions:l}=e.webhook;return l.map(c=>r(Yu("INTEGRATION_SETTINGS.WEBHOOK.FORM.SUBSCRIPTIONS.EVENTS",c))).join(", ")}),i={props:e,emit:s,t:r,subscribedEvents:o,computed:S,get getI18nKey(){return Yu},ShowMore:xIe,get useI18n(){return Q},Button:Se};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}},wIe={class:"py-4 ltr:pr-4 rtl:pl-4"},MIe={class:"font-medium break-words text-n-slate-12"},LIe={class:"block mt-1 text-sm text-n-slate-11"},DIe={class:"font-medium"},PIe={class:"py-4 min-w-xs"},kIe={class:"flex justify-end gap-1"};function BIe(t,n,a,e,s,r){const o=nt("tooltip");return p(),g("tr",null,[f("td",wIe,[f("div",MIe,C(a.webhook.url),1),f("div",LIe,[f("span",DIe,C(t.$t("INTEGRATION_SETTINGS.WEBHOOK.SUBSCRIBED_EVENTS"))+": ",1),v(e.ShowMore,{text:e.subscribedEvents,limit:60},null,8,["text"])])]),f("td",PIe,[f("div",kIe,[ce(v(e.Button,{icon:"i-lucide-pen",slate:"",xs:"",faded:"",onClick:n[0]||(n[0]=i=>e.emit("edit",a.webhook))},null,512),[[o,t.$t("INTEGRATION_SETTINGS.WEBHOOK.EDIT.BUTTON_TEXT"),void 0,{top:!0}]]),ce(v(e.Button,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:n[1]||(n[1]=i=>e.emit("delete",a.webhook,a.index))},null,512),[[o,t.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.BUTTON_TEXT"),void 0,{top:!0}]])])])])}const FIe=G(RIe,[["render",BIe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/integrations/Webhooks/WebhookRow.vue"]]),UIe={components:{SettingsLayout:Ha,NextButton:Se,BaseSettingsHeader:Va,NewWebhook:TIe,EditWebhook:CIe,WebhookRow:FIe},setup(){const{replaceInstallationName:t}=Rs();return{replaceInstallationName:t}},data(){return{loading:{},showAddPopup:!1,showEditPopup:!1,showDeleteConfirmationPopup:!1,selectedWebHook:{}}},computed:{..._t({records:"webhooks/getWebhooks",uiFlags:"webhooks/getUIFlags"}),integration(){return this.$store.getters["integrations/getIntegration"]("webhook")},tableHeaders(){return[this.$t("INTEGRATION_SETTINGS.WEBHOOK.LIST.TABLE_HEADER.WEBHOOK_ENDPOINT"),this.$t("INTEGRATION_SETTINGS.WEBHOOK.LIST.TABLE_HEADER.ACTIONS")]}},mounted(){this.$store.dispatch("webhooks/get")},methods:{openAddPopup(){this.showAddPopup=!0},hideAddPopup(){this.showAddPopup=!1},openDeletePopup(t){this.showDeleteConfirmationPopup=!0,this.selectedWebHook=t},closeDeletePopup(){this.showDeleteConfirmationPopup=!1},openEditPopup(t){this.showEditPopup=!0,this.selectedWebHook=t},hideEditPopup(){this.showEditPopup=!1},confirmDeletion(){this.loading[this.selectedWebHook.id]=!0,this.closeDeletePopup(),this.deleteWebhook(this.selectedWebHook.id)},async deleteWebhook(t){try{await this.$store.dispatch("webhooks/delete",t),Z(this.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.API.SUCCESS_MESSAGE"))}catch{Z(this.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.API.ERROR_MESSAGE"))}}}},$Ie={class:"min-w-full divide-y divide-n-weak"},GIe={class:"divide-y divide-n-weak flex-1 text-n-slate-12"};function VIe(t,n,a,e,s,r){const o=H("NextButton"),i=H("BaseSettingsHeader"),l=H("WebhookRow"),c=H("NewWebhook"),d=H("woot-modal"),u=H("EditWebhook"),m=H("woot-delete-modal"),h=H("SettingsLayout");return p(),L(h,{"is-loading":t.uiFlags.fetchingList,"loading-message":t.$t("INTEGRATION_SETTINGS.WEBHOOK.LOADING"),"no-records-message":t.$t("INTEGRATION_SETTINGS.WEBHOOK.LIST.404"),"no-records-found":!t.records.length},{header:z(()=>[r.integration.name?(p(),L(i,{key:0,title:r.integration.name,description:e.replaceInstallationName(r.integration.description),"link-text":t.$t("INTEGRATION_SETTINGS.WEBHOOK.LEARN_MORE"),"feature-name":"webhook","back-button-label":t.$t("INTEGRATION_SETTINGS.HEADER")},{actions:z(()=>[v(o,{blue:"",icon:"i-lucide-circle-plus",label:t.$t("INTEGRATION_SETTINGS.WEBHOOK.HEADER_BTN_TXT"),onClick:r.openAddPopup},null,8,["label","onClick"])]),_:1},8,["title","description","link-text","back-button-label"])):O("v-if",!0)]),body:z(()=>[f("table",$Ie,[f("thead",null,[(p(!0),g(de,null,Ae(r.tableHeaders,_=>(p(),g("th",{key:_,class:"py-4 ltr:pr-4 rtl:pl-4 text-left font-semibold text-n-slate-11 last:text-right last:pr-4"},C(_),1))),128))]),f("tbody",GIe,[(p(!0),g(de,null,Ae(t.records,(_,E)=>(p(),L(l,{key:_.id,index:E,webhook:_,onEdit:r.openEditPopup,onDelete:r.openDeletePopup},null,8,["index","webhook","onEdit","onDelete"]))),128))])])]),default:z(()=>[v(d,{show:s.showAddPopup,"onUpdate:show":n[0]||(n[0]=_=>s.showAddPopup=_),"on-close":r.hideAddPopup},{default:z(()=>[s.showAddPopup?(p(),L(c,{key:0,"on-close":r.hideAddPopup},null,8,["on-close"])):O("v-if",!0)]),_:1},8,["show","on-close"]),v(d,{show:s.showEditPopup,"onUpdate:show":n[1]||(n[1]=_=>s.showEditPopup=_),"on-close":r.hideEditPopup},{default:z(()=>[s.showEditPopup?(p(),L(u,{key:0,id:s.selectedWebHook.id,value:s.selectedWebHook,"on-close":r.hideEditPopup},null,8,["id","value","on-close"])):O("v-if",!0)]),_:1},8,["show","on-close"]),v(m,{show:s.showDeleteConfirmationPopup,"onUpdate:show":n[2]||(n[2]=_=>s.showDeleteConfirmationPopup=_),"on-close":r.closeDeletePopup,"on-confirm":r.confirmDeletion,title:t.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.TITLE"),message:t.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.MESSAGE",{webhookURL:s.selectedWebHook.url}),"confirm-text":t.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.YES"),"reject-text":t.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.NO")},null,8,["show","on-close","on-confirm","title","message","confirm-text","reject-text"])]),_:1},8,["is-loading","loading-message","no-records-message","no-records-found"])}const HIe=G(UIe,[["render",VIe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/integrations/Webhooks/Index.vue"]]),jIe={components:{NextButton:Se},props:{show:{type:Boolean,default:!1},mode:{type:String,default:"create"},selectedAppData:{type:Object,default:()=>({})}},emits:["close"],setup(){return{v$:rt()}},validations:{app:{title:{required:Ge},content:{type:{required:Ge},url:{required:Ge,url:Pl}}}},data(){return{isLoading:!1,app:{title:"",content:{type:"frame",url:""}}}},computed:{header(){return this.$t(`INTEGRATION_SETTINGS.DASHBOARD_APPS.${this.mode}.HEADER`)},submitButtonLabel(){return this.$t(`INTEGRATION_SETTINGS.DASHBOARD_APPS.${this.mode}.FORM_SUBMIT`)}},mounted(){this.mode==="UPDATE"&&this.selectedAppData&&(this.app.title=this.selectedAppData.title,this.app.content=this.selectedAppData.content[0])},methods:{closeModal(){this.app={title:"",content:{type:"frame",url:""}},this.$emit("close")},async submit(){try{if(this.v$.$touch(),this.v$.$invalid)return;const t=this.mode.toLowerCase(),n={title:this.app.title,content:[this.app.content]};t==="update"&&(n.id=this.selectedAppData.id),this.isLoading=!0,await this.$store.dispatch(`dashboardApps/${t}`,n),Z(this.$t(`INTEGRATION_SETTINGS.DASHBOARD_APPS.${this.mode}.API_SUCCESS`)),this.closeModal()}catch{Z(this.$t(`INTEGRATION_SETTINGS.DASHBOARD_APPS.${this.mode}.API_ERROR`))}finally{this.isLoading=!1}}}},WIe={class:"flex flex-col h-auto overflow-auto"},zIe={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function YIe(t,n,a,e,s,r){const o=H("woot-modal-header"),i=H("woot-input"),l=H("NextButton"),c=H("woot-modal");return p(),L(c,{show:a.show,"on-close":r.closeModal},{default:z(()=>[f("div",WIe,[v(o,{"header-title":r.header},null,8,["header-title"]),f("form",{class:"w-full",onSubmit:n[2]||(n[2]=Ve((...d)=>r.submit&&r.submit(...d),["prevent"]))},[v(i,{modelValue:s.app.title,"onUpdate:modelValue":n[0]||(n[0]=d=>s.app.title=d),class:oe([{error:e.v$.app.title.$error},"w-full"]),label:t.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.FORM.TITLE_LABEL"),placeholder:t.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.FORM.TITLE_PLACEHOLDER"),error:e.v$.app.title.$error?t.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.FORM.TITLE_ERROR"):null,"data-testid":"app-title",onInput:e.v$.app.title.$touch,onBlur:e.v$.app.title.$touch},null,8,["modelValue","class","label","placeholder","error","onInput","onBlur"]),v(i,{modelValue:s.app.content.url,"onUpdate:modelValue":n[1]||(n[1]=d=>s.app.content.url=d),class:oe([{error:e.v$.app.content.url.$error},"w-full"]),label:t.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.FORM.URL_LABEL"),placeholder:t.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.FORM.URL_PLACEHOLDER"),error:e.v$.app.content.url.$error?t.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.FORM.URL_ERROR"):null,"data-testid":"app-url",onInput:e.v$.app.content.url.$touch,onBlur:e.v$.app.content.url.$touch},null,8,["modelValue","class","label","placeholder","error","onInput","onBlur"]),f("div",zIe,[v(l,{faded:"",slate:"",type:"reset",label:t.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.CREATE.FORM_CANCEL"),onClick:Ve(r.closeModal,["prevent"])},null,8,["label","onClick"]),v(l,{type:"submit",label:r.submitButtonLabel,disabled:e.v$.$invalid,"is-loading":s.isLoading},null,8,["label","disabled","is-loading"])])],32)])]),_:1},8,["show","on-close"])}const KIe=G(jIe,[["render",YIe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/integrations/DashboardApps/DashboardAppModal.vue"]]),XIe={__name:"DashboardAppsRow",props:{app:{type:Object,default:()=>({})}},emits:["edit","delete"],setup(t,{expose:n}){n();const a={Button:Se};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},qIe={class:"max-w-full py-1"},ZIe=["title"],QIe=["title"],JIe={class:"flex gap-1 py-4 ltr:pr-4 rtl:pl-4 text-sm sm:pr-0 justify-end"};function eCe(t,n,a,e,s,r){const o=nt("tooltip");return p(),g("tr",qIe,[f("td",{class:"py-4 ltr:pr-4 rtl:pl-4 text-sm w-40 max-w-[10rem] truncate",title:a.app.title},C(a.app.title),9,ZIe),f("td",{class:"max-w-lg py-4 ltr:pr-4 rtl:pl-4 text-sm truncate",title:a.app.content[0].url},C(a.app.content[0].url),9,QIe),f("td",JIe,[ce(v(e.Button,{icon:"i-lucide-pen",slate:"",xs:"",faded:"",onClick:n[0]||(n[0]=i=>t.$emit("edit",a.app))},null,512),[[o,t.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LIST.EDIT_TOOLTIP"),void 0,{top:!0}]]),ce(v(e.Button,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:n[1]||(n[1]=i=>t.$emit("delete",a.app))},null,512),[[o,t.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LIST.DELETE_TOOLTIP"),void 0,{top:!0}]])])])}const tCe=G(XIe,[["render",eCe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/integrations/DashboardApps/DashboardAppsRow.vue"]]),nCe={components:{BaseSettingsHeader:Va,DashboardAppModal:KIe,DashboardAppsRow:tCe,NextButton:Se},data(){return{loading:{},showDashboardAppPopup:!1,showDeleteConfirmationPopup:!1,selectedApp:{},mode:"CREATE"}},computed:{..._t({records:"dashboardApps/getRecords",uiFlags:"dashboardApps/getUIFlags"}),tableHeaders(){return[this.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LIST.TABLE_HEADER.NAME"),this.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LIST.TABLE_HEADER.ENDPOINT")]}},mounted(){this.$store.dispatch("dashboardApps/get")},methods:{toggleDashboardAppPopup(){this.showDashboardAppPopup=!this.showDashboardAppPopup,this.selectedApp={}},openDeletePopup(t){this.showDeleteConfirmationPopup=!0,this.selectedApp=t},openCreatePopup(){this.mode="CREATE",this.selectedApp={},this.showDashboardAppPopup=!0},closeDeletePopup(){this.showDeleteConfirmationPopup=!1},editApp(t){this.loading[t.id]=!0,this.mode="UPDATE",this.selectedApp=t,this.showDashboardAppPopup=!0},confirmDeletion(){this.loading[this.selectedApp.id]=!0,this.closeDeletePopup(),this.deleteApp(this.selectedApp.id)},async deleteApp(t){try{await this.$store.dispatch("dashboardApps/delete",t),Z(this.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DELETE.API_SUCCESS"))}catch{Z(this.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DELETE.API_ERROR"))}}}},aCe={class:"flex flex-col flex-1 gap-8 overflow-auto"},sCe={class:"w-full overflow-x-auto text-n-slate-11"},oCe={key:0,class:"flex flex-col items-center justify-center h-full"},rCe={key:2,class:"min-w-full divide-y divide-n-weak"},iCe={class:"divide-y divide-n-weak"};function lCe(t,n,a,e,s,r){const o=H("NextButton"),i=H("BaseSettingsHeader"),l=H("woot-loading-state"),c=H("DashboardAppsRow"),d=H("DashboardAppModal"),u=H("woot-delete-modal");return p(),g("div",aCe,[v(i,{title:t.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.TITLE"),description:t.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DESCRIPTION"),"link-text":t.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LEARN_MORE"),"feature-name":"dashboard_apps","back-button-label":t.$t("INTEGRATION_SETTINGS.HEADER")},{actions:z(()=>[v(o,{icon:"i-lucide-circle-plus",label:t.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.HEADER_BTN_TXT"),onClick:r.openCreatePopup},null,8,["label","onClick"])]),_:1},8,["title","description","link-text","back-button-label"]),f("div",sCe,[!t.uiFlags.isFetching&&!t.records.length?(p(),g("p",oCe,C(t.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LIST.404")),1)):O("v-if",!0),t.uiFlags.isFetching?(p(),L(l,{key:1,message:t.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LIST.LOADING")},null,8,["message"])):O("v-if",!0),!t.uiFlags.isFetching&&t.records.length?(p(),g("table",rCe,[f("thead",null,[(p(!0),g(de,null,Ae(r.tableHeaders,m=>(p(),g("th",{key:m,class:"py-4 ltr:pr-4 rtl:pl-4 font-semibold text-left text-n-slate-11"},C(m),1))),128))]),f("tbody",iCe,[(p(!0),g(de,null,Ae(t.records,(m,h)=>(p(),L(c,{key:m.id,index:h,app:m,onEdit:r.editApp,onDelete:r.openDeletePopup},null,8,["index","app","onEdit","onDelete"]))),128))])])):O("v-if",!0)]),s.showDashboardAppPopup?(p(),L(d,{key:0,show:s.showDashboardAppPopup,mode:s.mode,"selected-app-data":s.selectedApp,onClose:r.toggleDashboardAppPopup},null,8,["show","mode","selected-app-data","onClose"])):O("v-if",!0),v(u,{show:s.showDeleteConfirmationPopup,"onUpdate:show":n[0]||(n[0]=m=>s.showDeleteConfirmationPopup=m),"on-close":r.closeDeletePopup,"on-confirm":r.confirmDeletion,title:t.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DELETE.TITLE"),message:t.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DELETE.MESSAGE",{appName:s.selectedApp.title}),"confirm-text":t.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DELETE.CONFIRM_YES"),"reject-text":t.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DELETE.CONFIRM_NO")},null,8,["show","on-close","on-confirm","title","message","confirm-text","reject-text"])])}const cCe=G(nCe,[["render",lCe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/integrations/DashboardApps/Index.vue"]]),dCe={__name:"Integration",props:{integrationId:{type:[String,Number],required:!0},integrationName:{type:String,default:""},integrationDescription:{type:String,default:""},integrationEnabled:{type:Boolean,default:!1},integrationAction:{type:String,default:""},actionButtonText:{type:String,default:""},deleteConfirmationText:{type:Object,default:()=>({})}},setup(t,{expose:n}){n();const a=t,{t:e}=Q(),s=Bn(),r=ft(),{replaceInstallationName:o}=Rs(),i=P(null),l=S(()=>s.getters.getCurrentAccountId),c=()=>{i.value&&i.value.open()},d=()=>{i.value&&i.value.close()},u=async()=>{try{await s.dispatch("integrations/deleteIntegration",a.integrationId),Z(e("INTEGRATION_SETTINGS.DELETE.API.SUCCESS_MESSAGE"))}catch{Z(e("INTEGRATION_SETTINGS.WEBHOOK.DELETE.API.ERROR_MESSAGE"))}},h={props:a,t:e,store:s,router:r,replaceInstallationName:o,dialogRef:i,accountId:l,openDeletePopup:c,closeDeletePopup:d,deleteIntegration:u,confirmDeletion:()=>{d(),u(),r.push({name:"settings_applications"})},ref:P,computed:S,get useStore(){return Bn},get useRouter(){return ft},get useI18n(){return Q},get frontendURL(){return vt},get useAlert(){return Z},get useBranding(){return Rs},Dialog:la,Button:Se};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}},uCe={class:"flex flex-col items-start justify-between lg:flex-row lg:items-center p-6 outline outline-n-container outline-1 bg-n-alpha-3 rounded-md shadow gap-6"},pCe={class:"flex items-start lg:items-center justify-start flex-1 m-0 gap-6 flex-col lg:flex-row"},fCe={class:"flex h-16 w-16 items-center justify-center flex-shrink-0"},mCe=["src"],hCe=["src"],_Ce={class:"mb-1 text-xl font-medium text-n-slate-12"},gCe={class:"text-n-slate-11 text-sm leading-6"},bCe={class:"flex justify-center items-center mb-0"},vCe={key:0},ECe={key:0},SCe={key:1},TCe={key:0},ACe=["href"];function yCe(t,n,a,e,s,r){const o=H("router-link");return p(),g("div",uCe,[f("div",pCe,[f("div",fCe,[f("img",{src:`/dashboard/images/integrations/${a.integrationId}.png`,class:"max-w-full rounded-md border border-n-weak shadow-sm block dark:hidden bg-n-alpha-3 dark:bg-n-alpha-2"},null,8,mCe),f("img",{src:`/dashboard/images/integrations/${a.integrationId}-dark.png`,class:"max-w-full rounded-md border border-n-weak shadow-sm hidden dark:block bg-n-alpha-3 dark:bg-n-alpha-2"},null,8,hCe)]),f("div",null,[f("h3",_Ce,C(a.integrationName),1),f("p",gCe,C(e.replaceInstallationName(a.integrationDescription)),1)])]),f("div",bCe,[v(o,{to:e.frontendURL(`accounts/${e.accountId}/settings/integrations/`+a.integrationId)},{default:z(()=>[a.integrationEnabled?(p(),g("div",vCe,[a.integrationAction==="disconnect"?(p(),g("div",ECe,[v(e.Button,{label:a.actionButtonText||t.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.BUTTON_TEXT"),faded:"",ruby:"",onClick:e.openDeletePopup},null,8,["label"])])):(p(),g("div",SCe,[v(e.Button,{faded:"",blue:"",label:e.t("INTEGRATION_SETTINGS.WEBHOOK.CONFIGURE")},null,8,["label"])]))])):O("v-if",!0)]),_:1},8,["to"]),a.integrationEnabled?O("v-if",!0):(p(),g("div",TCe,[qe(t.$slots,"action",{},()=>[f("a",{href:a.integrationAction},[v(e.Button,{faded:"",blue:"",label:e.t("INTEGRATION_SETTINGS.CONNECT.BUTTON_TEXT")},null,8,["label"])],8,ACe)])]))]),v(e.Dialog,{ref:"dialogRef",type:"alert",title:a.deleteConfirmationText.title||e.t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.TITLE"),description:a.deleteConfirmationText.message||e.t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.MESSAGE"),"confirm-button-label":e.t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.YES"),"cancel-button-label":e.t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.NO"),onConfirm:e.confirmDeletion},null,8,["title","description","confirm-button-label","cancel-button-label"])])}const Vh=G(dCe,[["render",yCe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/integrations/Integration.vue"]]),ICe={__name:"SelectChannelWarning",props:{hasConnectedAChannel:{type:Boolean,default:!0}},setup(t,{expose:n}){n();const a=t,e=Bn(),{t:s}=Q(),{formatMessage:r}=ta(),{replaceInstallationName:o}=Rs(),i=P(""),l=P([]),c=S(()=>e.getters["integrations/getUIFlags"]),d=S(()=>a.hasConnectedAChannel?s("INTEGRATION_SETTINGS.SLACK.SELECT_CHANNEL.EXPIRED"):s("INTEGRATION_SETTINGS.SLACK.SELECT_CHANNEL.DESCRIPTION")),u=S(()=>r(o(d.value),!1)),_={props:a,store:e,t:s,formatMessage:r,replaceInstallationName:o,selectedChannelId:i,availableChannels:l,uiFlags:c,errorDescription:d,formattedErrorMessage:u,fetchChannels:async()=>{try{l.value=await e.dispatch("integrations/listAllSlackChannels"),l.value.sort((E,y)=>E.name-y.name)}catch{s("INTEGRATION_SETTINGS.SLACK.FAILED_TO_FETCH_CHANNELS"),l.value=[]}},updateIntegration:async()=>{try{await e.dispatch("integrations/updateSlack",{referenceId:i.value}),Z(s("INTEGRATION_SETTINGS.SLACK.UPDATE_SUCCESS"))}catch(E){Z(E.message||"INTEGRATION_SETTINGS.SLACK.UPDATE_ERROR")}},ref:P,computed:S,get useStore(){return Bn},get useI18n(){return Q},get useAlert(){return Z},get useBranding(){return Rs},get useMessageFormatter(){return ta},Button:Se};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}},CCe={class:"px-6 py-4 mb-4 outline outline-n-container outline-1 bg-n-alpha-3 rounded-md shadow"},OCe={class:"flex"},NCe={class:"ml-3"},xCe={class:"mb-1 text-base font-semibold text-n-slate-12"},RCe={class:"mt-2 text-sm text-n-slate-11 mb-3"},wCe={key:0,class:"mb-2 mt-1 ml-8"},MCe={key:1,class:"inline-flex"},LCe={value:""},DCe=["value"];function PCe(t,n,a,e,s,r){const o=nt("dompurify-html");return p(),g("div",CCe,[f("div",OCe,[n[1]||(n[1]=f("div",{class:"flex-shrink-0"},[f("div",{class:"i-lucide-bell text-xl text-n-amber-11 mt-1"})],-1)),f("div",NCe,[f("p",xCe,C(t.$t("INTEGRATION_SETTINGS.SLACK.SELECT_CHANNEL.ATTENTION_REQUIRED")),1),f("div",RCe,[ce(f("p",null,null,512),[[o,e.formattedErrorMessage]])])])]),a.hasConnectedAChannel?O("v-if",!0):(p(),g("div",wCe,[e.availableChannels.length?(p(),g("div",MCe,[ce(f("select",{"onUpdate:modelValue":n[0]||(n[0]=i=>e.selectedChannelId=i),class:"h-8 py-1 mr-4 text-xs leading-4 border border-n-amber-10"},[f("option",LCe,C(t.$t("INTEGRATION_SETTINGS.SLACK.SELECT_CHANNEL.OPTION_LABEL")),1),(p(!0),g(de,null,Ae(e.availableChannels,i=>(p(),g("option",{key:i.id,value:i.id}," #"+C(i.name),9,DCe))),128))],512),[[Un,e.selectedChannelId]]),v(e.Button,{teal:"",sm:"","is-loading":e.uiFlags.isUpdatingSlack,onClick:e.updateIntegration},{default:z(()=>[Oe(C(t.$t("INTEGRATION_SETTINGS.SLACK.SELECT_CHANNEL.UPDATE")),1)]),_:1},8,["is-loading"])])):(p(),L(e.Button,{key:0,amber:"",sm:"","is-loading":e.uiFlags.isFetchingSlackChannels,onClick:e.fetchChannels},{default:z(()=>[Oe(C(t.$t("INTEGRATION_SETTINGS.SLACK.SELECT_CHANNEL.BUTTON_TEXT")),1)]),_:1},8,["is-loading"]))]))])}const kCe=G(ICe,[["render",PCe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/integrations/Slack/SelectChannelWarning.vue"]]),BCe={__name:"SlackIntegrationHelpText",props:{selectedChannelName:{type:String,required:!0}},setup(t,{expose:n}){n();const a=t,{t:e}=Q(),{formatMessage:s}=ta(),r=S(()=>s(e("INTEGRATION_SETTINGS.SLACK.HELP_TEXT.BODY",{selectedChannelName:a.selectedChannelName}),!1)),o={props:a,t:e,formatMessage:s,formattedHelpText:r,computed:S,get useI18n(){return Q},get useMessageFormatter(){return ta}};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},FCe={class:"flex-1 w-full px-6 py-5 outline outline-n-container outline-1 bg-n-alpha-3 rounded-md shadow"},UCe={class:"prose-lg max-w-5xl"},$Ce={class:"text-n-slate-12 tracking-tight"},GCe={class:"text-n-slate-11"};function VCe(t,n,a,e,s,r){const o=nt("dompurify-html");return p(),g("div",FCe,[f("div",UCe,[f("h5",$Ce,C(e.t("INTEGRATION_SETTINGS.SLACK.HELP_TEXT.TITLE")),1),ce(f("div",GCe,null,512),[[o,e.formattedHelpText]])])])}const HCe=G(BCe,[["render",VCe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/integrations/Slack/SlackIntegrationHelpText.vue"]]),jCe={__name:"Slack",props:{code:{type:String,default:""}},setup(t,{expose:n}){n();const a=t,e=Bn(),s=ft(),r=lt(),{t:o}=Q(),i=P(!1),l=S(()=>e.getters["integrations/getIntegration"]("slack")),c=S(()=>{const{hooks:A=[]}=l.value||{};return!!A.length}),d=S(()=>{const{hooks:A=[]}=l.value||{},[T]=A;return T||{}}),u=S(()=>d.value.status||!1),m=S(()=>!!d.value.reference_id),h=S(()=>{if(d.value.status){const{settings:{channel_name:A=""}={}}=d.value;return A||"customer-conversations"}return o("INTEGRATION_SETTINGS.SLACK.HELP_TEXT.SELECTED")}),_=S(()=>e.getters["integrations/getUIFlags"]),E=S(()=>l.value.enabled?"disconnect":l.value.action),y=async()=>{await e.dispatch("integrations/get","slack"),a.code&&(await e.dispatch("integrations/connectSlack",a.code),s.replace(r.path)),i.value=!0};Pe(()=>{y()});const b={props:a,store:e,router:s,route:r,t:o,integrationLoaded:i,integration:l,areHooksAvailable:c,hook:d,isIntegrationHookEnabled:u,hasConnectedAChannel:m,selectedChannelName:h,uiFlags:_,integrationAction:E,intializeSlackIntegration:y,ref:P,computed:S,onMounted:Pe,get useStore(){return Bn},get useRouter(){return ft},get useRoute(){return lt},get useI18n(){return Q},Integration:Vh,SelectChannelWarning:kCe,SlackIntegrationHelpText:HCe,Spinner:ls};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}},WCe={key:0,class:"flex flex-col flex-1 overflow-auto gap-5 pt-1 pb-10"},zCe={key:0,class:"flex-1"},YCe={key:1,class:"flex items-center justify-center flex-1"};function KCe(t,n,a,e,s,r){return e.integrationLoaded&&!e.uiFlags.isCreatingSlack?(p(),g("div",WCe,[v(e.Integration,{"integration-id":e.integration.id,"integration-logo":e.integration.logo,"integration-name":e.integration.name,"integration-description":e.integration.description,"integration-enabled":e.integration.enabled,"integration-action":e.integrationAction,"action-button-text":t.$t("INTEGRATION_SETTINGS.SLACK.DELETE"),"delete-confirmation-text":{title:t.$t("INTEGRATION_SETTINGS.SLACK.DELETE_CONFIRMATION.TITLE"),message:t.$t("INTEGRATION_SETTINGS.SLACK.DELETE_CONFIRMATION.MESSAGE")}},null,8,["integration-id","integration-logo","integration-name","integration-description","integration-enabled","integration-action","action-button-text","delete-confirmation-text"]),e.areHooksAvailable?(p(),g("div",zCe,[e.isIntegrationHookEnabled?O("v-if",!0):(p(),L(e.SelectChannelWarning,{key:0,"has-connected-a-channel":e.hasConnectedAChannel},null,8,["has-connected-a-channel"])),v(e.SlackIntegrationHelpText,{"selected-channel-name":e.selectedChannelName},null,8,["selected-channel-name"])])):O("v-if",!0)])):(p(),g("div",YCe,[v(e.Spinner,{size:"","color-scheme":"primary"})]))}const XCe=G(jCe,[["render",KCe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/integrations/Slack.vue"]]),qCe={__name:"Linear",setup(t,{expose:n}){n();const a=Fe(),e=P(!1),s=Jn("integrations/getIntegration","linear"),r=le("integrations/getUIFlags"),o=S(()=>s.value.enabled?"disconnect":s.value.action),i=async()=>{await a.dispatch("integrations/get","linear"),e.value=!0};Pe(()=>{i()});const l={store:a,integrationLoaded:e,integration:s,uiFlags:r,integrationAction:o,initializeLinearIntegration:i,ref:P,computed:S,onMounted:Pe,get useFunctionGetter(){return Jn},get useMapGetter(){return le},get useStore(){return Fe},Integration:Vh,Spinner:ls};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}},ZCe={class:"flex-grow flex-shrink p-4 overflow-auto max-w-6xl mx-auto"},QCe={key:0},JCe={key:1,class:"flex items-center justify-center flex-1"};function eOe(t,n,a,e,s,r){return p(),g("div",ZCe,[e.integrationLoaded&&!e.uiFlags.isCreatingLinear?(p(),g("div",QCe,[v(e.Integration,{"integration-id":e.integration.id,"integration-logo":e.integration.logo,"integration-name":e.integration.name,"integration-description":e.integration.description,"integration-enabled":e.integration.enabled,"integration-action":e.integrationAction,"delete-confirmation-text":{title:t.$t("INTEGRATION_SETTINGS.LINEAR.DELETE.TITLE"),message:t.$t("INTEGRATION_SETTINGS.LINEAR.DELETE.MESSAGE")}},null,8,["integration-id","integration-logo","integration-name","integration-description","integration-enabled","integration-action","delete-confirmation-text"])])):(p(),g("div",JCe,[v(e.Spinner,{size:"","color-scheme":"primary"})]))])}const tOe=G(qCe,[["render",eOe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/integrations/Linear.vue"]]);class nOe extends Xs{constructor(){super("notion",{accountScoped:!0})}generateAuthorization(){return axios.post(`${this.url}/authorization`)}}const gC=new nOe,aOe={__name:"Notion",setup(t,{expose:n}){n();const{t:a}=Q(),e=Fe(),s=P(!1),r=Jn("integrations/getIntegration","notion"),o=le("integrations/getUIFlags"),i=S(()=>r.value.enabled?"disconnect":""),l=async()=>{const u=await gC.generateAuthorization(),{data:{url:m}}=u;window.location.href=m},c=async()=>{await e.dispatch("integrations/get","notion"),s.value=!0};Pe(()=>{c()});const d={t:a,store:e,integrationLoaded:s,integration:r,uiFlags:o,integrationAction:i,authorize:l,initializeNotionIntegration:c,ref:P,computed:S,onMounted:Pe,get useFunctionGetter(){return Jn},get useMapGetter(){return le},get useStore(){return Fe},get useI18n(){return Q},ButtonNext:Se,get notionClient(){return gC},Integration:Vh,Spinner:ls};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}},sOe={class:"flex-grow flex-shrink p-4 overflow-auto mx-auto"},oOe={key:0},rOe={key:1,class:"flex items-center justify-center flex-1"};function iOe(t,n,a,e,s,r){return p(),g("div",sOe,[e.integrationLoaded&&!e.uiFlags.isCreatingNotion?(p(),g("div",oOe,[v(e.Integration,{"integration-id":e.integration.id,"integration-logo":e.integration.logo,"integration-name":e.integration.name,"integration-description":e.integration.description,"integration-enabled":e.integration.enabled,"integration-action":e.integrationAction,"delete-confirmation-text":{title:e.t("INTEGRATION_SETTINGS.NOTION.DELETE.TITLE"),message:e.t("INTEGRATION_SETTINGS.NOTION.DELETE.MESSAGE")}},{action:z(()=>[v(e.ButtonNext,{faded:"",blue:"",label:e.t("INTEGRATION_SETTINGS.CONNECT.BUTTON_TEXT"),onClick:e.authorize},null,8,["label"])]),_:1},8,["integration-id","integration-logo","integration-name","integration-description","integration-enabled","integration-action","delete-confirmation-text"])])):(p(),g("div",rOe,[v(e.Spinner,{size:"","color-scheme":"primary"})]))])}const lOe=G(aOe,[["render",iOe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/integrations/Notion.vue"]]),cOe={__name:"Shopify",props:{error:{type:String,default:""}},setup(t,{expose:n}){n();const a=Fe(),e=P(null),s=P(!1),r=P(""),o=P(!1),i=P(""),l=Jn("integrations/getIntegration","shopify"),c=le("integrations/getUIFlags"),d=S(()=>l.value.enabled?"disconnect":"connect"),u=()=>{r.value="",i.value="",o.value=!1},m=b=>/^[a-zA-Z0-9][a-zA-Z0-9-]*\.myshopify\.com$/.test(b),h=()=>{e.value&&e.value.open()},_=async()=>{try{if(i.value="",!m(r.value)){i.value="Please enter a valid Shopify store URL (e.g., your-store.myshopify.com)";return}o.value=!0;const{data:b}=await pT.connectShopify({shopDomain:r.value});b.redirect_url&&(window.location.href=b.redirect_url)}catch(b){i.value=b.message}finally{o.value=!1}},E=async()=>{await a.dispatch("integrations/get","shopify"),s.value=!0};Pe(()=>{E()});const y={store:a,dialogRef:e,integrationLoaded:s,storeUrl:r,isSubmitting:o,storeUrlError:i,integration:l,uiFlags:c,integrationAction:d,hideStoreUrlModal:u,validateStoreUrl:m,openStoreUrlDialog:h,handleStoreUrlSubmit:_,initializeShopifyIntegration:E,ref:P,computed:S,onMounted:Pe,get useFunctionGetter(){return Jn},get useMapGetter(){return le},get useStore(){return Fe},Integration:Vh,Spinner:ls,get integrationAPI(){return pT},Input:sn,Dialog:la,Button:Se};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}},dOe={class:"flex-grow flex-shrink p-4 overflow-auto max-w-6xl mx-auto"},uOe={key:0,class:"flex flex-col gap-6"},pOe={key:0,class:"flex items-center justify-center flex-1 outline outline-n-container outline-1 bg-n-alpha-3 rounded-md shadow p-6"},fOe={class:"text-n-ruby-9"},mOe={key:1,class:"flex items-center justify-center flex-1"};function hOe(t,n,a,e,s,r){return p(),g("div",dOe,[e.integrationLoaded&&!e.uiFlags.isCreatingShopify?(p(),g("div",uOe,[v(e.Integration,{"integration-id":e.integration.id,"integration-logo":e.integration.logo,"integration-name":e.integration.name,"integration-description":e.integration.description,"integration-enabled":e.integration.enabled,"integration-action":e.integrationAction,"delete-confirmation-text":{title:t.$t("INTEGRATION_SETTINGS.SHOPIFY.DELETE.TITLE"),message:t.$t("INTEGRATION_SETTINGS.SHOPIFY.DELETE.MESSAGE")}},{action:z(()=>[v(e.Button,{teal:"",label:t.$t("INTEGRATION_SETTINGS.CONNECT.BUTTON_TEXT"),onClick:e.openStoreUrlDialog},null,8,["label"])]),_:1},8,["integration-id","integration-logo","integration-name","integration-description","integration-enabled","integration-action","delete-confirmation-text"]),a.error?(p(),g("div",pOe,[f("p",fOe,C(t.$t("INTEGRATION_SETTINGS.SHOPIFY.ERROR")),1)])):O("v-if",!0),v(e.Dialog,{ref:"dialogRef",title:t.$t("INTEGRATION_SETTINGS.SHOPIFY.STORE_URL.TITLE"),"is-loading":e.isSubmitting,onConfirm:e.handleStoreUrlSubmit,onClose:e.hideStoreUrlModal},{default:z(()=>[v(e.Input,{modelValue:e.storeUrl,"onUpdate:modelValue":n[0]||(n[0]=o=>e.storeUrl=o),label:t.$t("INTEGRATION_SETTINGS.SHOPIFY.STORE_URL.LABEL"),placeholder:t.$t("INTEGRATION_SETTINGS.SHOPIFY.STORE_URL.PLACEHOLDER"),message:e.storeUrlError?e.storeUrlError:t.$t("INTEGRATION_SETTINGS.SHOPIFY.STORE_URL.HELP"),"message-type":e.storeUrlError?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"])]),_:1},8,["title","is-loading"])])):(p(),g("div",mOe,[v(e.Spinner,{size:"","color-scheme":"primary"})]))])}const _Oe=G(cOe,[["render",hOe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/integrations/Shopify.vue"]]),gOe={routes:[{path:vt("accounts/:accountId/settings/integrations"),component:cs,props:{},children:[{path:"",name:"settings_applications",component:iIe,meta:{featureFlag:pt.INTEGRATIONS,permissions:["administrator"]}},{path:"dashboard_apps",component:cCe,name:"settings_integrations_dashboard_apps",meta:{featureFlag:pt.INTEGRATIONS,permissions:["administrator"]}},{path:"webhook",component:HIe,name:"settings_integrations_webhook",meta:{featureFlag:pt.INTEGRATIONS,permissions:["administrator"]}}]},{path:vt("accounts/:accountId/settings/integrations"),component:sp,props:t=>{var r;const n=(r=t.params)==null?void 0:r.integration_id;if(["dialogflow"].includes(n))return{};const e=t.name!=="settings_integrations",s=t.name==="settings_integrations_integration"?{name:"settings_integrations"}:"";return{headerTitle:"INTEGRATION_SETTINGS.HEADER",icon:"flash-on",showBackButton:e,backUrl:s}},children:[{path:"slack",name:"settings_integrations_slack",component:XCe,meta:{featureFlag:pt.INTEGRATIONS,permissions:["administrator"]},props:t=>({code:t.query.code})},{path:"linear",name:"settings_integrations_linear",component:tOe,meta:{permissions:["administrator"]},props:t=>({code:t.query.code})},{path:"notion",name:"settings_integrations_notion",component:lOe,meta:{permissions:["administrator"]},props:t=>({code:t.query.code})},{path:"shopify",name:"settings_integrations_shopify",component:_Oe,meta:{featureFlag:pt.INTEGRATIONS,permissions:["administrator"]},props:t=>({error:t.query.error})},{path:":integration_id",name:"settings_applications_integration",component:j0e,meta:{featureFlag:pt.INTEGRATIONS,permissions:["administrator"]},props:t=>({integrationId:t.params.integration_id})}]}]},bOe=(t="")=>!!t&&!t.includes(" "),HM=t=>{let n="";return t.title.$error?t.title.required?t.title.minLength?t.title.validLabelCharacters||(n="LABEL_MGMT.FORM.NAME.VALID_ERROR"):n="LABEL_MGMT.FORM.NAME.MINIMUM_LENGTH_ERROR":n="LABEL_MGMT.FORM.NAME.REQUIRED_ERROR":n="",n},jM={title:{required:Ge,minLength:Rt(2),validLabelCharacters:bOe},description:{},color:{required:Ge},showOnSidebar:{}},vOe=()=>{const t="0123456789ABCDEF";let n="#";for(let a=0;a<6;a+=1)n+=t[Math.floor(Math.random()*16)];return n},EOe={components:{NextButton:Se},props:{prefillTitle:{type:String,default:""}},emits:["close"],setup(){return{v$:rt()}},data(){return{color:"#000",description:"",title:"",showOnSidebar:!0}},validations:jM,computed:{..._t({uiFlags:"labels/getUIFlags"}),labelTitleErrorMessage(){const t=HM(this.v$);return this.$t(t)}},mounted(){this.color=vOe(),this.title=this.prefillTitle.toLowerCase()},methods:{onClose(){this.$emit("close")},async addLabel(){try{await this.$store.dispatch("labels/create",{color:this.color,description:this.description,title:this.title.toLowerCase(),show_on_sidebar:this.showOnSidebar}),Z(this.$t("LABEL_MGMT.ADD.API.SUCCESS_MESSAGE")),this.onClose()}catch(t){const n=t.message||this.$t("LABEL_MGMT.ADD.API.ERROR_MESSAGE");Z(n)}}}},SOe={class:"flex flex-col h-auto overflow-auto"},TOe={class:"w-full"},AOe={class:"flex items-center w-full gap-2"},yOe={for:"conversation_creation"},IOe={class:"flex items-center justify-end w-full gap-2 px-0 py-2"};function COe(t,n,a,e,s,r){const o=H("woot-modal-header"),i=H("woot-input"),l=H("woot-color-picker"),c=H("NextButton");return p(),g("div",SOe,[v(o,{"header-title":t.$t("LABEL_MGMT.ADD.TITLE"),"header-content":t.$t("LABEL_MGMT.ADD.DESC")},null,8,["header-title","header-content"]),f("form",{class:"flex flex-wrap mx-0",onSubmit:n[4]||(n[4]=Ve((...d)=>r.addLabel&&r.addLabel(...d),["prevent"]))},[v(i,{modelValue:s.title,"onUpdate:modelValue":n[0]||(n[0]=d=>s.title=d),class:oe([{error:e.v$.title.$error},"w-full label-name--input"]),label:t.$t("LABEL_MGMT.FORM.NAME.LABEL"),placeholder:t.$t("LABEL_MGMT.FORM.NAME.PLACEHOLDER"),error:r.labelTitleErrorMessage,"data-testid":"label-title",onInput:e.v$.title.$touch,onBlur:e.v$.title.$touch},null,8,["modelValue","class","label","placeholder","error","onInput","onBlur"]),v(i,{modelValue:s.description,"onUpdate:modelValue":n[1]||(n[1]=d=>s.description=d),class:oe([{error:e.v$.description.$error},"w-full"]),label:t.$t("LABEL_MGMT.FORM.DESCRIPTION.LABEL"),placeholder:t.$t("LABEL_MGMT.FORM.DESCRIPTION.PLACEHOLDER"),"data-testid":"label-description",onInput:e.v$.description.$touch,onBlur:e.v$.description.$touch},null,8,["modelValue","class","label","placeholder","onInput","onBlur"]),f("div",TOe,[f("label",null,[Oe(C(t.$t("LABEL_MGMT.FORM.COLOR.LABEL"))+" ",1),v(l,{modelValue:s.color,"onUpdate:modelValue":n[2]||(n[2]=d=>s.color=d)},null,8,["modelValue"])])]),f("div",AOe,[ce(f("input",{"onUpdate:modelValue":n[3]||(n[3]=d=>s.showOnSidebar=d),type:"checkbox",value:!0},null,512),[[bn,s.showOnSidebar]]),f("label",yOe,C(t.$t("LABEL_MGMT.FORM.SHOW_ON_SIDEBAR.LABEL")),1)]),f("div",IOe,[v(c,{faded:"",slate:"",type:"reset",label:t.$t("LABEL_MGMT.FORM.CANCEL"),onClick:Ve(r.onClose,["prevent"])},null,8,["label","onClick"]),v(c,{type:"submit","data-testid":"label-submit",label:t.$t("LABEL_MGMT.FORM.CREATE"),disabled:e.v$.title.$invalid||t.uiFlags.isCreating,"is-loading":t.uiFlags.isCreating},null,8,["label","disabled","is-loading"])])],32)])}const WM=G(EOe,[["render",COe],["__scopeId","data-v-ee27827e"],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/labels/AddLabel.vue"]]),OOe={components:{NextButton:Se},props:{selectedResponse:{type:Object,default:()=>{}}},emits:["close"],setup(){return{v$:rt()}},data(){return{title:"",description:"",showOnSidebar:!0,color:""}},validations:jM,computed:{..._t({uiFlags:"labels/getUIFlags"}),pageTitle(){return`${this.$t("LABEL_MGMT.EDIT.TITLE")} - ${this.selectedResponse.title}`},labelTitleErrorMessage(){const t=HM(this.v$);return this.$t(t)}},mounted(){this.setFormValues()},methods:{onClose(){this.$emit("close")},setFormValues(){this.title=this.selectedResponse.title,this.description=this.selectedResponse.description,this.showOnSidebar=this.selectedResponse.show_on_sidebar,this.color=this.selectedResponse.color},editLabel(){this.$store.dispatch("labels/update",{id:this.selectedResponse.id,color:this.color,description:this.description,title:this.title.toLowerCase(),show_on_sidebar:this.showOnSidebar}).then(()=>{Z(this.$t("LABEL_MGMT.EDIT.API.SUCCESS_MESSAGE")),setTimeout(()=>this.onClose(),10)}).catch(()=>{Z(this.$t("LABEL_MGMT.EDIT.API.ERROR_MESSAGE"))})}}},NOe={class:"flex flex-col h-auto overflow-auto"},xOe={class:"w-full"},ROe={class:"flex items-center w-full gap-2"},wOe={for:"conversation_creation"},MOe={class:"flex items-center justify-end w-full gap-2 px-0 py-2"};function LOe(t,n,a,e,s,r){const o=H("woot-modal-header"),i=H("woot-input"),l=H("woot-color-picker"),c=H("NextButton");return p(),g("div",NOe,[v(o,{"header-title":r.pageTitle},null,8,["header-title"]),f("form",{class:"flex flex-wrap mx-0",onSubmit:n[4]||(n[4]=Ve((...d)=>r.editLabel&&r.editLabel(...d),["prevent"]))},[v(i,{modelValue:s.title,"onUpdate:modelValue":n[0]||(n[0]=d=>s.title=d),class:oe([{error:e.v$.title.$error},"w-full label-name--input"]),label:t.$t("LABEL_MGMT.FORM.NAME.LABEL"),placeholder:t.$t("LABEL_MGMT.FORM.NAME.PLACEHOLDER"),error:r.labelTitleErrorMessage,onInput:e.v$.title.$touch,onBlur:e.v$.title.$touch},null,8,["modelValue","class","label","placeholder","error","onInput","onBlur"]),v(i,{modelValue:s.description,"onUpdate:modelValue":n[1]||(n[1]=d=>s.description=d),class:oe([{error:e.v$.description.$error},"w-full"]),label:t.$t("LABEL_MGMT.FORM.DESCRIPTION.LABEL"),placeholder:t.$t("LABEL_MGMT.FORM.DESCRIPTION.PLACEHOLDER"),onInput:e.v$.description.$touch,onBlur:e.v$.description.$touch},null,8,["modelValue","class","label","placeholder","onInput","onBlur"]),f("div",xOe,[f("label",null,[Oe(C(t.$t("LABEL_MGMT.FORM.COLOR.LABEL"))+" ",1),v(l,{modelValue:s.color,"onUpdate:modelValue":n[2]||(n[2]=d=>s.color=d)},null,8,["modelValue"])])]),f("div",ROe,[ce(f("input",{"onUpdate:modelValue":n[3]||(n[3]=d=>s.showOnSidebar=d),type:"checkbox",value:!0},null,512),[[bn,s.showOnSidebar]]),f("label",wOe,C(t.$t("LABEL_MGMT.FORM.SHOW_ON_SIDEBAR.LABEL")),1)]),f("div",MOe,[v(c,{faded:"",slate:"",type:"reset",label:t.$t("LABEL_MGMT.FORM.CANCEL"),onClick:Ve(r.onClose,["prevent"])},null,8,["label","onClick"]),v(c,{type:"submit",label:t.$t("LABEL_MGMT.FORM.EDIT"),disabled:e.v$.title.$invalid||t.uiFlags.isUpdating,"is-loading":t.uiFlags.isUpdating},null,8,["label","disabled","is-loading"])])],32)])}const DOe=G(OOe,[["render",LOe],["__scopeId","data-v-25e316db"],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/labels/EditLabel.vue"]]),POe={__name:"Index",setup(t,{expose:n}){n();const a=xt(),e=Fe(),{t:s}=Q(),r=P({}),o=P(!1),i=P(!1),l=P(!1),c=P({}),d=S(()=>a["labels/getLabels"].value),u=S(()=>a["labels/getUIFlags"].value),m=S(()=>` ${c.value.title}?`),h=()=>{o.value=!0},_=()=>{o.value=!1},E=R=>{i.value=!0,c.value=R},y=()=>{i.value=!1},b=R=>{l.value=!0,c.value=R},A=()=>{l.value=!1},T=async R=>{try{await e.dispatch("labels/delete",R),Z(s("LABEL_MGMT.DELETE.API.SUCCESS_MESSAGE"))}catch(M){const w=(M==null?void 0:M.message)||s("LABEL_MGMT.DELETE.API.ERROR_MESSAGE");Z(w)}finally{r.value[c.value.id]=!1}},I=()=>{r.value[c.value.id]=!0,A(),T(c.value.id)},N=S(()=>[s("LABEL_MGMT.LIST.TABLE_HEADER.NAME"),s("LABEL_MGMT.LIST.TABLE_HEADER.DESCRIPTION"),s("LABEL_MGMT.LIST.TABLE_HEADER.COLOR")]);jc(()=>{e.dispatch("labels/get")});const x={getters:a,store:e,t:s,loading:r,showAddPopup:o,showEditPopup:i,showDeleteConfirmationPopup:l,selectedLabel:c,records:d,uiFlags:u,deleteMessage:m,openAddPopup:h,hideAddPopup:_,openEditPopup:E,hideEditPopup:y,openDeletePopup:b,closeDeletePopup:A,deleteLabel:T,confirmDeletion:I,tableHeaders:N,get useAlert(){return Z},computed:S,onBeforeMount:jc,ref:P,get useI18n(){return Q},get useStoreGetters(){return xt},get useStore(){return Fe},AddLabel:WM,EditLabel:DOe,BaseSettingsHeader:Va,SettingsLayout:Ha,Button:Se};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}},kOe={class:"min-w-full overflow-x-auto divide-y divide-n-weak"},BOe={class:"flex-1 divide-y divide-n-weak text-n-slate-12"},FOe={class:"py-4 ltr:pr-4 rtl:pl-4"},UOe={class:"mb-1 font-medium break-words text-n-slate-12"},$Oe={class:"py-4 ltr:pr-4 rtl:pl-4"},GOe={class:"py-4 leading-6 ltr:pr-4 rtl:pl-4"},VOe={class:"flex items-center"},HOe={class:"py-4 min-w-xs"},jOe={class:"flex gap-1 justify-end"};function WOe(t,n,a,e,s,r){const o=H("woot-modal"),i=H("woot-delete-modal"),l=nt("tooltip");return p(),L(e.SettingsLayout,{"is-loading":e.uiFlags.isFetching,"loading-message":t.$t("LABEL_MGMT.LOADING"),"no-records-found":!e.records.length,"no-records-message":t.$t("LABEL_MGMT.LIST.404")},{header:z(()=>[v(e.BaseSettingsHeader,{title:t.$t("LABEL_MGMT.HEADER"),description:t.$t("LABEL_MGMT.DESCRIPTION"),"link-text":t.$t("LABEL_MGMT.LEARN_MORE"),"feature-name":"labels"},{actions:z(()=>[v(e.Button,{icon:"i-lucide-circle-plus",label:t.$t("LABEL_MGMT.HEADER_BTN_TXT"),onClick:e.openAddPopup},null,8,["label"])]),_:1},8,["title","description","link-text"])]),body:z(()=>[f("table",kOe,[f("thead",null,[(p(!0),g(de,null,Ae(e.tableHeaders,c=>(p(),g("th",{key:c,class:"py-4 font-semibold text-left ltr:pr-4 rtl:pl-4 text-n-slate-11"},C(c),1))),128))]),f("tbody",BOe,[(p(!0),g(de,null,Ae(e.records,(c,d)=>(p(),g("tr",{key:c.title},[f("td",FOe,[f("span",UOe,C(c.title),1)]),f("td",$Oe,C(c.description),1),f("td",GOe,[f("div",VOe,[f("span",{class:"w-4 h-4 mr-1 border border-solid rounded rtl:mr-0 rtl:ml-1 border-n-weak",style:nn({backgroundColor:c.color})},null,4),Oe(" "+C(c.color),1)])]),f("td",HOe,[f("div",jOe,[ce(v(e.Button,{icon:"i-lucide-pen",slate:"",xs:"",faded:"","is-loading":e.loading[c.id],onClick:u=>e.openEditPopup(c)},null,8,["is-loading","onClick"]),[[l,t.$t("LABEL_MGMT.FORM.EDIT"),void 0,{top:!0}]]),ce(v(e.Button,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"","is-loading":e.loading[c.id],onClick:u=>e.openDeletePopup(c,d)},null,8,["is-loading","onClick"]),[[l,t.$t("LABEL_MGMT.FORM.DELETE"),void 0,{top:!0}]])])])]))),128))])])]),default:z(()=>[v(o,{show:e.showAddPopup,"onUpdate:show":n[0]||(n[0]=c=>e.showAddPopup=c),"on-close":e.hideAddPopup},{default:z(()=>[v(e.AddLabel,{onClose:e.hideAddPopup})]),_:1},8,["show"]),v(o,{show:e.showEditPopup,"onUpdate:show":n[1]||(n[1]=c=>e.showEditPopup=c),"on-close":e.hideEditPopup},{default:z(()=>[v(e.EditLabel,{"selected-response":e.selectedLabel,onClose:e.hideEditPopup},null,8,["selected-response"])]),_:1},8,["show"]),v(i,{show:e.showDeleteConfirmationPopup,"onUpdate:show":n[2]||(n[2]=c=>e.showDeleteConfirmationPopup=c),"on-close":e.closeDeletePopup,"on-confirm":e.confirmDeletion,title:t.$t("LABEL_MGMT.DELETE.CONFIRM.TITLE"),message:t.$t("LABEL_MGMT.DELETE.CONFIRM.MESSAGE"),"message-value":e.deleteMessage,"confirm-text":t.$t("LABEL_MGMT.DELETE.CONFIRM.YES"),"reject-text":t.$t("LABEL_MGMT.DELETE.CONFIRM.NO")},null,8,["show","title","message","message-value","confirm-text","reject-text"])]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"])}const zOe=G(POe,[["render",WOe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/labels/Index.vue"]]),YOe={routes:[{path:vt("accounts/:accountId/settings/labels"),component:cs,children:[{path:"",name:"labels_wrapper",meta:{permissions:["administrator"]},redirect:t=>({name:"labels_list",params:t.params})},{path:"list",name:"labels_list",meta:{featureFlag:pt.LABELS,permissions:["administrator"]},component:zOe}]}]},KOe={__name:"MacrosTableRow",props:{macro:{type:Object,required:!0}},emits:["delete"],setup(t,{expose:n}){n();const a=t,{t:e}=Q(),s=S(()=>{const l=a.macro.created_by;return l.available_name??l.email??""}),r=S(()=>{const l=a.macro.updated_by;return l.available_name??l.email??""}),o=S(()=>{const l=a.macro.visibility==="global"?"MACROS.EDITOR.VISIBILITY.GLOBAL.LABEL":"MACROS.EDITOR.VISIBILITY.PERSONAL.LABEL";return e(l)}),i={props:a,t:e,createdByName:s,updatedByName:r,visibilityLabel:o,computed:S,Avatar:qt,get useI18n(){return Q},Button:Se};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}},XOe={class:"py-4 ltr:pr-4 rtl:pl-4 truncate"},qOe={class:"py-4 ltr:pr-4 rtl:pl-4"},ZOe={key:0,class:"flex items-center"},QOe={class:"mx-2"},JOe={key:1},eNe={class:"py-4 ltr:pr-4 rtl:pl-4"},tNe={key:0,class:"flex items-center"},nNe={class:"mx-2"},aNe={key:1},sNe={class:"py-4 ltr:pr-4 rtl:pl-4"},oNe={class:"py-4 flex justify-end gap-1"};function rNe(t,n,a,e,s,r){const o=H("router-link"),i=nt("tooltip");return p(),g("tr",null,[f("td",XOe,C(a.macro.name),1),f("td",qOe,[a.macro.created_by?(p(),g("div",ZOe,[v(e.Avatar,{name:e.createdByName,size:24,"rounded-full":""},null,8,["name"]),f("span",QOe,C(e.createdByName),1)])):(p(),g("div",JOe,"--"))]),f("td",eNe,[a.macro.updated_by?(p(),g("div",tNe,[v(e.Avatar,{name:e.updatedByName,size:24,"rounded-full":""},null,8,["name"]),f("span",nNe,C(e.updatedByName),1)])):(p(),g("div",aNe,"--"))]),f("td",sNe,C(e.visibilityLabel),1),f("td",oNe,[v(o,{to:{name:"macros_edit",params:{macroId:a.macro.id}}},{default:z(()=>[ce(v(e.Button,{icon:"i-lucide-pen",slate:"",xs:"",faded:""},null,512),[[i,t.$t("MACROS.EDIT.TOOLTIP"),void 0,{top:!0}]])]),_:1},8,["to"]),ce(v(e.Button,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:n[0]||(n[0]=l=>t.$emit("delete"))},null,512),[[i,t.$t("MACROS.DELETE.TOOLTIP"),void 0,{top:!0}]])])])}const iNe=G(KOe,[["render",rNe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/macros/MacrosTableRow.vue"]]),lNe={__name:"Index",setup(t,{expose:n}){n();const a=xt(),e=Fe(),{t:s}=Q(),r=P(!1),o=P({}),i=S(()=>a["macros/getMacros"].value),l=S(()=>a["macros/getUIFlags"].value),c=S(()=>` ${o.value.name}?`);Pe(()=>{e.dispatch("macros/get")});const d=async y=>{try{await e.dispatch("macros/delete",y),Z(s("MACROS.DELETE.API.SUCCESS_MESSAGE"))}catch{Z(s("MACROS.DELETE.API.ERROR_MESSAGE"))}},u=y=>{r.value=!0,o.value=y},m=()=>{r.value=!1},h=()=>{m(),d(o.value.id)},_=S(()=>[s("MACROS.LIST.TABLE_HEADER.NAME"),s("MACROS.LIST.TABLE_HEADER.CREATED BY"),s("MACROS.LIST.TABLE_HEADER.LAST_UPDATED_BY"),s("MACROS.LIST.TABLE_HEADER.VISIBILITY")]),E={getters:a,store:e,t:s,showDeleteConfirmationPopup:r,selectedMacro:o,records:i,uiFlags:l,deleteMessage:c,deleteMacro:d,openDeletePopup:u,closeDeletePopup:m,confirmDeletion:h,tableHeaders:_,get useAlert(){return Z},MacrosTableRow:iNe,BaseSettingsHeader:Va,SettingsLayout:Ha,computed:S,onMounted:Pe,ref:P,get useI18n(){return Q},get useStoreGetters(){return xt},get useStore(){return Fe},Button:Se};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}},cNe={class:"min-w-full divide-y divide-n-weak"},dNe={class:"divide-y divide-n-weak text-n-slate-11"};function uNe(t,n,a,e,s,r){const o=H("router-link"),i=H("woot-delete-modal");return p(),L(e.SettingsLayout,{"no-records-message":t.$t("MACROS.LIST.404"),"no-records-found":!e.records.length,"is-loading":e.uiFlags.isFetching,"loading-message":t.$t("MACROS.LOADING"),"feature-name":"macros"},{header:z(()=>[v(e.BaseSettingsHeader,{title:t.$t("MACROS.HEADER"),description:t.$t("MACROS.DESCRIPTION"),"link-text":t.$t("MACROS.LEARN_MORE"),"feature-name":"macros"},{actions:z(()=>[v(o,{to:{name:"macros_new"}},{default:z(()=>[v(e.Button,{icon:"i-lucide-circle-plus",label:t.$t("MACROS.HEADER_BTN_TXT")},null,8,["label"])]),_:1})]),_:1},8,["title","description","link-text"])]),body:z(()=>[f("table",cNe,[f("thead",null,[(p(!0),g(de,null,Ae(e.tableHeaders,l=>(p(),g("th",{key:l,class:"py-4 ltr:pr-4 rtl:pl-4 text-left font-semibold text-n-slate-11"},C(l),1))),128))]),f("tbody",dNe,[(p(!0),g(de,null,Ae(e.records,(l,c)=>(p(),L(e.MacrosTableRow,{key:c,macro:l,onDelete:d=>e.openDeletePopup(l)},null,8,["macro","onDelete"]))),128))])]),v(i,{show:e.showDeleteConfirmationPopup,"onUpdate:show":n[0]||(n[0]=l=>e.showDeleteConfirmationPopup=l),"on-close":e.closeDeletePopup,"on-confirm":e.confirmDeletion,title:t.$t("LABEL_MGMT.DELETE.CONFIRM.TITLE"),message:t.$t("MACROS.DELETE.CONFIRM.MESSAGE"),"message-value":e.deleteMessage,"confirm-text":t.$t("MACROS.DELETE.CONFIRM.YES"),"reject-text":t.$t("MACROS.DELETE.CONFIRM.NO")},null,8,["show","title","message","message-value","confirm-text","reject-text"])]),_:1},8,["no-records-message","no-records-found","is-loading","loading-message"])}const pNe=G(lNe,[["render",uNe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/macros/Index.vue"]]),jm=()=>{const{t}=Q(),n=xt(),a=S(()=>n["labels/getLabels"].value),e=S(()=>n["teams/getTeams"].value),s=S(()=>n["agents/getAgents"].value);return{getMacroDropdownValues:o=>{switch(o){case"assign_team":case"send_email_to_team":return e.value;case"assign_agent":return[{id:"self",name:"Self"},...s.value];case"add_label":case"remove_label":return a.value.map(i=>({id:i.title,name:i.title}));case"change_priority":return Yw.map(i=>({id:i.id,name:t(`MACROS.PRIORITY_TYPES.${i.i18nKey}`)}));default:return[]}}}},fNe={__name:"MacroNode",props:an({singleNode:{type:Boolean,default:!1},errorKey:{type:String,default:""},fileName:{type:String,default:""}},{modelValue:{type:Object,required:!0},modelModifiers:{}}),emits:an(["resetAction","deleteNode"],["update:modelValue"]),setup(t,{expose:n}){n();const a=t,{t:e}=Q(),s=so("macroActionTypes"),{getMacroDropdownValues:r}=jm(),o=dn(t,"modelValue"),i=S(()=>a.errorKey?e(`MACROS.ERRORS.${a.errorKey}`):""),l=S(()=>o.value.action_name==="send_email_to_team"||o.value.action_name==="send_message"?!1:!!s.value.find(m=>m.key===o.value.action_name).inputType),d={props:a,t:e,macroActionTypes:s,getMacroDropdownValues:r,actionData:o,errorMessage:i,showActionInput:l,dropdownValues:()=>r(o.value.action_name),computed:S,inject:so,get useMacros(){return jm},get useI18n(){return Q},ActionInput:NS,NextButton:Se};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}},mNe={class:"relative flex items-start w-full min-w-0 basis-full"};function hNe(t,n,a,e,s,r){const o=nt("tooltip");return p(),g("div",mNe,[a.singleNode?O("v-if",!0):(p(),L(e.NextButton,{key:0,ghost:"",sm:"",slate:"",icon:"i-lucide-menu",class:"absolute cursor-move ltr:-left-10 rtl:-right-10 ltr:mr-2 rtl:ml-2 macros__node-drag-handle"})),f("div",{class:oe(["flex-grow p-2 ltr:mr-2 rtl:ml-2 rounded-md shadow-sm outline outline-1 outline-n-weak",a.errorKey?"animate-shake bg-n-ruby-8/20 outline-n-ruby-5 dark:outline-n-ruby-5":"bg-n-background dark:bg-n-solid-1"])},[v(e.ActionInput,{modelValue:e.actionData,"onUpdate:modelValue":n[0]||(n[0]=i=>e.actionData=i),"action-types":e.macroActionTypes,"dropdown-values":e.dropdownValues(),"show-action-input":e.showActionInput,"show-remove-button":!1,"is-macro":"","error-message":e.errorMessage,"initial-file-name":a.fileName,onResetAction:n[1]||(n[1]=i=>t.$emit("resetAction"))},null,8,["modelValue","action-types","dropdown-values","show-action-input","error-message","initial-file-name"])],2),a.singleNode?O("v-if",!0):ce((p(),L(e.NextButton,{key:1,icon:"i-lucide-trash-2",sm:"",faded:"",ruby:"",class:"flex-shrink-0",onClick:n[2]||(n[2]=i=>t.$emit("deleteNode"))},null,512)),[[o,t.$t("MACROS.EDITOR.DELETE_BTN_TOOLTIP")]])])}const _Ne=G(fNe,[["render",hNe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/macros/MacroNode.vue"]]),qv=[{key:"assign_team",label:"ASSIGN_TEAM",inputType:"search_select"},{key:"assign_agent",label:"ASSIGN_AGENT",inputType:"search_select"},{key:"add_label",label:"ADD_LABEL",inputType:"multi_select"},{key:"remove_label",label:"REMOVE_LABEL",inputType:"multi_select"},{key:"remove_assigned_team",label:"REMOVE_ASSIGNED_TEAM",inputType:null},{key:"send_email_transcript",label:"SEND_EMAIL_TRANSCRIPT",inputType:"email"},{key:"mute_conversation",label:"MUTE_CONVERSATION",inputType:null},{key:"snooze_conversation",label:"SNOOZE_CONVERSATION",inputType:null},{key:"resolve_conversation",label:"RESOLVE_CONVERSATION",inputType:null},{key:"send_attachment",label:"SEND_ATTACHMENT",inputType:"attachment"},{key:"send_message",label:"SEND_MESSAGE",inputType:"textarea"},{key:"add_private_note",label:"ADD_PRIVATE_NOTE",inputType:"textarea"},{key:"change_priority",label:"CHANGE_PRIORITY",inputType:"search_select"},{key:"send_webhook_event",label:"SEND_WEBHOOK_EVENT",inputType:"url"}],bC=t=>qv.find(n=>n.key===t).label,vC=(t,n)=>n.map(a=>{const e=t.find(s=>s.id===a);return e?e.name:""}).join(", "),Jg=(t,n)=>n.map(a=>{const e=t.find(s=>s.title===a);return e?e.title:""}).join(", "),EC=(t,n)=>n.map(a=>{const e=t.find(s=>s.id===a);return e?e.name:""}).join(", "),gNe=(t,n,a)=>{if(!t||!a)return"";if(n==="send_attachment"){const e=a.find(s=>s.blob_id===t);if(e)return e.filename.toString()}return""},bNe={components:{Draggable:yd,MacroNode:_Ne,NextButton:Se},props:{errors:{type:Object,default:()=>({})},modelValue:{type:Array,default:()=>[]},files:{type:Array,default:()=>[]}},emits:["update:modelValue","resetAction","deleteNode","addNewNode"],computed:{actionData:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}},methods:{fileName(){return gNe(...arguments)}}},vNe={class:"macros__nodes"},ENe={class:"macro__node"},SNe={class:"bg-n-solid-blue text-n-blue-text py-1 px-1.5 leading-none text-sm rounded-md"},TNe={class:"macro__node"},ANe={class:"macro__node"},yNe={class:"bg-n-solid-blue text-n-blue-text py-1 px-1.5 leading-none text-sm rounded-md"};function INe(t,n,a,e,s,r){const o=H("MacroNode"),i=H("Draggable"),l=H("NextButton");return p(),g("div",vNe,[f("div",ENe,[f("div",null,[f("span",SNe,C(t.$t("MACROS.EDITOR.START_FLOW")),1)])]),v(i,{list:r.actionData,animation:"200","item-key":"id","ghost-class":"ghost",tag:"div",class:"macros__nodes-draggable",handle:".macros__node-drag-handle"},{item:z(({index:c})=>[(p(),g("div",{key:c,class:"macro__node"},[v(o,{modelValue:r.actionData[c],"onUpdate:modelValue":d=>r.actionData[c]=d,class:"macros__node-action",type:"add",index:c,"error-key":a.errors[`action_${c}`],"file-name":r.fileName(r.actionData[c].action_params[0],r.actionData[c].action_name,a.files),"single-node":r.actionData.length===1,onResetAction:d=>t.$emit("resetAction",c),onDeleteNode:d=>t.$emit("deleteNode",c)},null,8,["modelValue","onUpdate:modelValue","index","error-key","file-name","single-node","onResetAction","onDeleteNode"])]))]),_:1},8,["list"]),f("div",TNe,[f("div",null,[v(l,{title:t.$t("MACROS.EDITOR.ADD_BTN_TOOLTIP"),class:"shadow-sm",solid:"",teal:"",icon:"i-lucide-plus-circle",onClick:n[0]||(n[0]=c=>t.$emit("addNewNode"))},{default:z(()=>[Oe(C(t.$t("MACROS.EDITOR.ADD_BTN_TOOLTIP")),1)]),_:1},8,["title"])])]),f("div",ANe,[f("div",null,[f("span",yNe,C(t.$t("MACROS.EDITOR.END_FLOW")),1)])])])}const CNe=G(bNe,[["render",INe],["__scopeId","data-v-e4cfbd8f"],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/macros/MacroNodes.vue"]]),ONe={components:{NextButton:Se},inject:["v$"],props:{macroName:{type:String,default:""},macroVisibility:{type:String,default:"global"}},emits:["update:name","update:visibility","submit"],methods:{isActive(t){return this.macroVisibility===t?"bg-n-blue-2 dark:bg-n-blue-1 border-n-blue-3 dark:border-n-blue-4":"bg-white dark:bg-n-solid-2 border-n-weak dark:border-n-strong"},onUpdateName(t){this.$emit("update:name",t)},onUpdateVisibility(t){this.$emit("update:visibility",t)}}},NNe={class:"p-4 bg-n-solid-2 border border-n-weak rounded-lg shadow-sm h-full flex flex-col"},xNe={class:"mt-2"},RNe={class:"block m-0 text-sm font-medium leading-[1.8] text-n-slate-12"},wNe={class:"grid grid-cols-1 lg:grid-cols-2 gap-3"},MNe={class:"block m-0 text-sm font-medium leading-[1.8] text-n-slate-12"},LNe={class:"text-xs text-n-slate-11"},DNe={class:"block m-0 text-sm font-medium leading-[1.8] text-n-slate-12"},PNe={class:"text-xs text-n-slate-11"},kNe={class:"mt-2 flex items-start p-2 bg-n-slate-3 dark:bg-n-solid-3 rounded-md"},BNe={class:"ml-2 rtl:ml-0 rtl:mr-2 mb-0 text-n-slate-11"},FNe={class:"mt-auto w-full"};function UNe(t,n,a,e,s,r){const o=H("woot-input"),i=H("fluent-icon"),l=H("NextButton");return p(),g("div",NNe,[f("div",null,[v(o,{"model-value":a.macroName,label:t.$t("MACROS.ADD.FORM.NAME.LABEL"),placeholder:t.$t("MACROS.ADD.FORM.NAME.PLACEHOLDER"),error:r.v$.macro.name.$error?t.$t("MACROS.ADD.FORM.NAME.ERROR"):null,class:oe({error:r.v$.macro.name.$error}),"onUpdate:modelValue":r.onUpdateName},null,8,["model-value","label","placeholder","error","class","onUpdate:modelValue"])]),f("div",xNe,[f("p",RNe,C(t.$t("MACROS.EDITOR.VISIBILITY.LABEL")),1),f("div",wNe,[f("button",{class:oe(["p-2 relative rounded-md border border-solid text-left cursor-default",r.isActive("global")]),onClick:n[0]||(n[0]=c=>r.onUpdateVisibility("global"))},[a.macroVisibility==="global"?(p(),L(i,{key:0,icon:"checkmark-circle",type:"solid",class:"absolute text-n-brand top-2 right-2"})):O("v-if",!0),f("p",MNe,C(t.$t("MACROS.EDITOR.VISIBILITY.GLOBAL.LABEL")),1),f("p",LNe,C(t.$t("MACROS.EDITOR.VISIBILITY.GLOBAL.DESCRIPTION")),1)],2),f("button",{class:oe(["p-2 relative rounded-md border border-solid text-left cursor-default",r.isActive("personal")]),onClick:n[1]||(n[1]=c=>r.onUpdateVisibility("personal"))},[a.macroVisibility==="personal"?(p(),L(i,{key:0,icon:"checkmark-circle",type:"solid",class:"absolute text-n-brand top-2 right-2"})):O("v-if",!0),f("p",DNe,C(t.$t("MACROS.EDITOR.VISIBILITY.PERSONAL.LABEL")),1),f("p",PNe,C(t.$t("MACROS.EDITOR.VISIBILITY.PERSONAL.DESCRIPTION")),1)],2)]),f("div",kNe,[v(i,{icon:"info",size:"16",class:"flex-shrink-0 mt-0.5"}),f("p",BNe,C(t.$t("MACROS.ORDER_INFO")),1)])]),f("div",FNe,[v(l,{blue:"",solid:"",label:t.$t("MACROS.HEADER_BTN_TXT_SAVE"),class:"w-full",onClick:n[2]||(n[2]=c=>t.$emit("submit"))},null,8,["label"])])])}const $Ne=G(ONe,[["render",UNe],["__scopeId","data-v-b9d11548"],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/macros/MacroProperties.vue"]]),GNe={components:{MacroNodes:CNe,MacroProperties:$Ne},props:{macroData:{type:Object,default:()=>({})}},emits:["submit"],setup(){const t=rt();return qn("v$",t),{v$:t}},data(){return{macro:this.macroData,errors:{}}},computed:{files(){return this.macro&&this.macro.files?this.macro.files:[]}},watch:{$route:{handler(){this.resetValidation()},immediate:!0},macroData:{handler(){this.macro=this.macroData},immediate:!0}},validations:{macro:{name:{required:Ge},visibility:{required:Ge}}},methods:{removeObjectProperty(t,n){return Object.fromEntries(Object.entries(t).filter(([a])=>a!==n))},updateName(t){this.macro.name=t},updateVisibility(t){this.macro.visibility=t},appendNode(){this.macro.actions.push({action_name:"assign_team",action_params:[]})},deleteNode(t){this.errors=this.removeObjectProperty(this.errors,`action_${t}`),this.macro.actions.splice(t,1)},submit(){this.errors=sM(this.macro.actions),Object.keys(this.errors).length===0&&(this.v$.$touch(),!this.v$.$invalid&&this.$emit("submit",this.macro))},resetNode(t){this.errors=this.removeObjectProperty(this.errors,`action_${t}`),this.macro.actions[t].action_params=[]},resetValidation(){var t,n;this.errors={},(n=(t=this.v$)==null?void 0:t.$reset)==null||n.call(t)}}},VNe={class:"flex flex-col w-full h-auto md:flex-row md:h-full"},HNe={class:"flex-1 w-full h-full max-h-full px-12 py-4 overflow-y-auto md:w-auto macro-gradient-radial dark:macro-dark-gradient-radial macro-gradient-radial-size"},jNe={class:"w-full md:w-1/3 pb-4"};function WNe(t,n,a,e,s,r){const o=H("MacroNodes"),i=H("MacroProperties");return p(),g("div",VNe,[f("div",HNe,[v(o,{modelValue:s.macro.actions,"onUpdate:modelValue":n[0]||(n[0]=l=>s.macro.actions=l),files:r.files,errors:s.errors,onAddNewNode:r.appendNode,onDeleteNode:r.deleteNode,onResetAction:r.resetNode},null,8,["modelValue","files","errors","onAddNewNode","onDeleteNode","onResetAction"])]),f("div",jNe,[v(i,{"macro-name":s.macro.name,"macro-visibility":s.macro.visibility,"onUpdate:name":r.updateName,"onUpdate:visibility":r.updateVisibility,onSubmit:r.submit},null,8,["macro-name","macro-visibility","onUpdate:name","onUpdate:visibility","onSubmit"])])])}const zNe=G(GNe,[["render",WNe],["__scopeId","data-v-6365666f"],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/macros/MacroForm.vue"]]),YNe={__name:"MacroEditor",setup(t,{expose:n}){n();const a=Fe(),e=xt(),s=lt(),r=ft(),{t:o}=Q(),{getMacroDropdownValues:i}=jm(),l=P(null),c=P("CREATE"),d=S(()=>qv.map(I=>({...I,label:o(`MACROS.ACTIONS.${I.label}`)})));qn("macroActionTypes",d);const u=S(()=>e["macros/getUIFlags"].value),m=S(()=>s.params.macroId),h=()=>{a.dispatch("agents/get"),a.dispatch("teams/get"),a.dispatch("labels/get")},_=I=>{const N=I.actions.map(x=>{let R=[];if(x.action_params.length){const M=d.value.find(w=>w.key===x.action_name).inputType;M==="multi_select"||M==="search_select"?R=i(x.action_name).filter(w=>[...x.action_params].includes(w.id)):M==="team_message"?R={team_ids:i(x.action_name).filter(w=>[...x.action_params[0].team_ids].includes(w.id)),message:x.action_params[0].message}:R=[...x.action_params]}return{...x,action_params:R}});return{...I,actions:N}},E=async()=>{await a.dispatch("macros/getSingleMacro",m.value);const I=a.getters["macros/getMacro"](m.value);l.value=_(I)},y=()=>{c.value="EDIT",E()},b=()=>{c.value="CREATE",l.value={name:"",actions:[{action_name:"assign_team",action_params:[]}],visibility:"global"}};je(()=>s,()=>{h(),s.params.macroId?y():b()},{immediate:!0,deep:!0});const T={store:a,getters:e,route:s,router:r,t:o,getMacroDropdownValues:i,macro:l,mode:c,macroActionTypes:d,uiFlags:u,macroId:m,fetchDropdownData:h,formatMacro:_,manifestMacro:E,fetchMacro:y,initNewMacro:b,saveMacro:async I=>{try{const N=c.value==="EDIT"?"macros/update":"macros/create",x=c.value==="EDIT"?o("MACROS.EDIT.API.SUCCESS_MESSAGE"):o("MACROS.ADD.API.SUCCESS_MESSAGE");let R=JSON.parse(JSON.stringify(I));R.actions=Fv(R.actions),await a.dispatch(N,R),Z(x),r.push({name:"macros_wrapper"})}catch{Z(o("MACROS.ERROR"))}},ref:P,computed:S,watch:je,provide:qn,get useRoute(){return lt},get useRouter(){return ft},get useI18n(){return Q},get useStore(){return Fe},get useStoreGetters(){return xt},MacroForm:zNe,get MACRO_ACTION_TYPES(){return qv},get useAlert(){return Z},get actionQueryGenerator(){return Fv},get useMacros(){return jm}};return Object.defineProperty(T,"__isScriptSetup",{enumerable:!1,value:!0}),T}},KNe={class:"flex flex-col flex-1 h-full overflow-auto"};function XNe(t,n,a,e,s,r){const o=H("woot-loading-state");return p(),g("div",KNe,[e.uiFlags.isFetchingItem?(p(),L(o,{key:0,message:e.t("MACROS.EDITOR.LOADING")},null,8,["message"])):O("v-if",!0),e.macro&&!e.uiFlags.isFetchingItem?(p(),L(e.MacroForm,{key:1,"macro-data":e.macro,"onUpdate:macroData":n[0]||(n[0]=i=>e.macro=i),onSubmit:e.saveMacro},null,8,["macro-data"])):O("v-if",!0)])}const SC=G(YNe,[["render",XNe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/macros/MacroEditor.vue"]]),qNe={routes:[{path:vt("accounts/:accountId/settings/macros"),component:cs,children:[{path:"",name:"macros_wrapper",component:pNe,meta:{featureFlag:pt.MACROS,permissions:[...Ua,..._s]}}]},{path:vt("accounts/:accountId/settings/macros"),component:sp,props:()=>({headerTitle:"MACROS.HEADER",icon:"flash-settings",showBackButton:!0}),children:[{path:":macroId/edit",name:"macros_edit",component:SC,meta:{featureFlag:pt.MACROS,permissions:[...Ua,..._s]}},{path:"new",name:"macros_new",component:SC,meta:{featureFlag:pt.MACROS,permissions:[...Ua,..._s]}}]}]},ZNe={},QNe={class:"reports--wrapper overflow-auto bg-n-background w-full px-6"},JNe={class:"max-w-[60rem] mx-auto pb-12"};function e2e(t,n){const a=H("router-view");return p(),g("div",QNe,[f("div",JNe,[v(a)])])}const t2e=G(ZNe,[["render",e2e],["__scopeId","data-v-1025acc2"],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/ReportsWrapper.vue"]]);function zM(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function Hh(t){return zM(t)?new Date(t.getTime()):t==null?new Date(NaN):new Date(t)}function n2e(t){return zM(t)&&!isNaN(t.getTime())}function YM(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!(n>=0&&n<=6))throw new RangeError("weekStartsOn must be between 0 and 6");var a=Hh(t),e=a.getDay(),s=(e+7-n)%7;return a.setDate(a.getDate()-s),a.setHours(0,0,0,0),a}function KM(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.firstDayOfWeek,e=a===void 0?0:a,s=n.firstWeekContainsDate,r=s===void 0?1:s;if(!(r>=1&&r<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7");for(var o=Hh(t),i=o.getFullYear(),l=new Date(0),c=i+1;c>=i-1&&(l.setFullYear(c,0,r),l.setHours(0,0,0,0),l=YM(l,e),!(o.getTime()>=l.getTime()));c--);return l}function jS(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.firstDayOfWeek,e=a===void 0?0:a,s=n.firstWeekContainsDate,r=s===void 0?1:s,o=Hh(t),i=YM(o,e),l=KM(o,{firstDayOfWeek:e,firstWeekContainsDate:r}),c=i.getTime()-l.getTime();return Math.round(c/(7*24*3600*1e3))+1}var WS={months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],firstDayOfWeek:0,firstWeekContainsDate:1},a2e=/\[([^\]]+)]|YYYY|YY?|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|m{1,2}|s{1,2}|Z{1,2}|S{1,3}|w{1,2}|x|X|a|A/g;function Js(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,a="".concat(Math.abs(t)),e=t<0?"-":"";a.length<n;)a="0".concat(a);return e+a}function TC(t){return Math.round(t.getTimezoneOffset()/15)*15}function AC(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=t>0?"-":"+",e=Math.abs(t),s=Math.floor(e/60),r=e%60;return a+Js(s,2)+n+Js(r,2)}var yC=function(n,a,e){var s=n<12?"AM":"PM";return e?s.toLocaleLowerCase():s},Tu={Y:function(n){var a=n.getFullYear();return a<=9999?"".concat(a):"+".concat(a)},YY:function(n){return Js(n.getFullYear(),4).substr(2)},YYYY:function(n){return Js(n.getFullYear(),4)},M:function(n){return n.getMonth()+1},MM:function(n){return Js(n.getMonth()+1,2)},MMM:function(n,a){return a.monthsShort[n.getMonth()]},MMMM:function(n,a){return a.months[n.getMonth()]},D:function(n){return n.getDate()},DD:function(n){return Js(n.getDate(),2)},H:function(n){return n.getHours()},HH:function(n){return Js(n.getHours(),2)},h:function(n){var a=n.getHours();return a===0?12:a>12?a%12:a},hh:function(){var n=Tu.h.apply(Tu,arguments);return Js(n,2)},m:function(n){return n.getMinutes()},mm:function(n){return Js(n.getMinutes(),2)},s:function(n){return n.getSeconds()},ss:function(n){return Js(n.getSeconds(),2)},S:function(n){return Math.floor(n.getMilliseconds()/100)},SS:function(n){return Js(Math.floor(n.getMilliseconds()/10),2)},SSS:function(n){return Js(n.getMilliseconds(),3)},d:function(n){return n.getDay()},dd:function(n,a){return a.weekdaysMin[n.getDay()]},ddd:function(n,a){return a.weekdaysShort[n.getDay()]},dddd:function(n,a){return a.weekdays[n.getDay()]},A:function(n,a){var e=a.meridiem||yC;return e(n.getHours(),n.getMinutes(),!1)},a:function(n,a){var e=a.meridiem||yC;return e(n.getHours(),n.getMinutes(),!0)},Z:function(n){return AC(TC(n),":")},ZZ:function(n){return AC(TC(n))},X:function(n){return Math.floor(n.getTime()/1e3)},x:function(n){return n.getTime()},w:function(n,a){return jS(n,{firstDayOfWeek:a.firstDayOfWeek,firstWeekContainsDate:a.firstWeekContainsDate})},ww:function(n,a){return Js(Tu.w(n,a),2)}};function zS(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},e=n?String(n):"YYYY-MM-DDTHH:mm:ss.SSSZ",s=Hh(t);if(!n2e(s))return"Invalid Date";var r=a.locale||WS;return e.replace(a2e,function(o,i){return i||(typeof Tu[o]=="function"?"".concat(Tu[o](s,r)):o)})}function IC(t){return r2e(t)||o2e(t)||s2e()}function s2e(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function o2e(t){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]")return Array.from(t)}function r2e(t){if(Array.isArray(t)){for(var n=0,a=new Array(t.length);n<t.length;n++)a[n]=t[n];return a}}function CC(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);n&&(e=e.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,e)}return a}function i2e(t){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?CC(a,!0).forEach(function(e){Qi(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):CC(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function l2e(t,n){return u2e(t)||d2e(t,n)||c2e()}function c2e(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function d2e(t,n){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]"){var a=[],e=!0,s=!1,r=void 0;try{for(var o=t[Symbol.iterator](),i;!(e=(i=o.next()).done)&&(a.push(i.value),!(n&&a.length===n));e=!0);}catch(l){s=!0,r=l}finally{try{!e&&o.return!=null&&o.return()}finally{if(s)throw r}}return a}}function u2e(t){if(Array.isArray(t))return t}function Qi(t,n,a){return n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}var p2e=/(\[[^\[]*\])|(MM?M?M?|Do|DD?|ddd?d?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|S{1,3}|x|X|ZZ?|.)/g,XM=/\d/,Ji=/\d\d/,f2e=/\d{3}/,m2e=/\d{4}/,Cd=/\d\d?/,h2e=/[+-]\d\d:?\d\d/,qM=/[+-]?\d+/,_2e=/[+-]?\d+(\.\d{1,3})?/,YS="year",jh="month",ZM="day",QM="hour",JM="minute",eL="second",KS="millisecond",tL={},Yn=function(n,a,e){var s=Array.isArray(n)?n:[n],r;typeof e=="string"?r=function(i){var l=parseInt(i,10);return Qi({},e,l)}:r=e,s.forEach(function(o){tL[o]=[a,r]})},g2e=function(n){return n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},dp=function(n){return function(a){var e=a[n];if(!Array.isArray(e))throw new Error("Locale[".concat(n,"] need an array"));return new RegExp(e.map(g2e).join("|"))}},up=function(n,a){return function(e,s){var r=s[n];if(!Array.isArray(r))throw new Error("Locale[".concat(n,"] need an array"));var o=r.indexOf(e);if(o<0)throw new Error("Invalid Word");return Qi({},a,o)}};Yn("Y",qM,YS);Yn("YY",Ji,function(t){var n=new Date().getFullYear(),a=Math.floor(n/100),e=parseInt(t,10);return e=(e>68?a-1:a)*100+e,Qi({},YS,e)});Yn("YYYY",m2e,YS);Yn("M",Cd,function(t){return Qi({},jh,parseInt(t,10)-1)});Yn("MM",Ji,function(t){return Qi({},jh,parseInt(t,10)-1)});Yn("MMM",dp("monthsShort"),up("monthsShort",jh));Yn("MMMM",dp("months"),up("months",jh));Yn("D",Cd,ZM);Yn("DD",Ji,ZM);Yn(["H","h"],Cd,QM);Yn(["HH","hh"],Ji,QM);Yn("m",Cd,JM);Yn("mm",Ji,JM);Yn("s",Cd,eL);Yn("ss",Ji,eL);Yn("S",XM,function(t){return Qi({},KS,parseInt(t,10)*100)});Yn("SS",Ji,function(t){return Qi({},KS,parseInt(t,10)*10)});Yn("SSS",f2e,KS);function b2e(t){return t.meridiemParse||/[ap]\.?m?\.?/i}function v2e(t){return"".concat(t).toLowerCase().charAt(0)==="p"}Yn(["A","a"],b2e,function(t,n){var a=typeof n.isPM=="function"?n.isPM(t):v2e(t);return{isPM:a}});function E2e(t){var n=t.match(/([+-]|\d\d)/g)||["-","0","0"],a=l2e(n,3),e=a[0],s=a[1],r=a[2],o=parseInt(s,10)*60+parseInt(r,10);return o===0?0:e==="+"?-o:+o}Yn(["Z","ZZ"],h2e,function(t){return{offset:E2e(t)}});Yn("x",qM,function(t){return{date:new Date(parseInt(t,10))}});Yn("X",_2e,function(t){return{date:new Date(parseFloat(t)*1e3)}});Yn("d",XM,"weekday");Yn("dd",dp("weekdaysMin"),up("weekdaysMin","weekday"));Yn("ddd",dp("weekdaysShort"),up("weekdaysShort","weekday"));Yn("dddd",dp("weekdays"),up("weekdays","weekday"));Yn("w",Cd,"week");Yn("ww",Ji,"week");function S2e(t,n){if(t!==void 0&&n!==void 0){if(n){if(t<12)return t+12}else if(t===12)return 0}return t}function T2e(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Date,a=[0,0,1,0,0,0,0],e=[n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()],s=!0,r=0;r<7;r++)t[r]===void 0?a[r]=s?e[r]:a[r]:(a[r]=t[r],s=!1);return a}function A2e(t,n,a,e,s,r,o){var i;return t<100&&t>=0?(i=new Date(t+400,n,a,e,s,r,o),isFinite(i.getFullYear())&&i.setFullYear(t)):i=new Date(t,n,a,e,s,r,o),i}function y2e(){for(var t,n=arguments.length,a=new Array(n),e=0;e<n;e++)a[e]=arguments[e];var s=a[0];return s<100&&s>=0?(a[0]+=400,t=new Date(Date.UTC.apply(Date,a)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(s)):t=new Date(Date.UTC.apply(Date,a)),t}function I2e(t,n,a){var e=n.match(p2e);if(!e)throw new Error;for(var s=e.length,r={},o=0;o<s;o+=1){var i=e[o],l=tL[i];if(l){var d=typeof l[0]=="function"?l[0](a):l[0],u=l[1],m=(d.exec(t)||[])[0],h=u(m,a);r=i2e({},r,{},h),t=t.replace(m,"")}else{var c=i.replace(/^\[|\]$/g,"");if(t.indexOf(c)===0)t=t.substr(c.length);else throw new Error("not match")}}return r}function C2e(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};try{var e=a.locale,s=e===void 0?WS:e,r=a.backupDate,o=r===void 0?new Date:r,i=I2e(t,n,s),l=i.year,c=i.month,d=i.day,u=i.hour,m=i.minute,h=i.second,_=i.millisecond,E=i.isPM,y=i.date,b=i.offset,A=i.weekday,T=i.week;if(y)return y;var I=[l,c,d,u,m,h,_];if(I[3]=S2e(I[3],E),T!==void 0&&c===void 0&&d===void 0){var N=KM(l===void 0?o:new Date(l,3),{firstDayOfWeek:s.firstDayOfWeek,firstWeekContainsDate:s.firstWeekContainsDate});return new Date(N.getTime()+(T-1)*7*24*3600*1e3)}var x,R=T2e(I,o);return b!==void 0?(R[6]+=b*60*1e3,x=y2e.apply(void 0,IC(R))):x=A2e.apply(void 0,IC(R)),A!==void 0&&x.getDay()!==A?new Date(NaN):x}catch{return new Date(NaN)}}var O2e=Object.defineProperty,N2e=Object.defineProperties,x2e=Object.getOwnPropertyDescriptors,Wm=Object.getOwnPropertySymbols,nL=Object.prototype.hasOwnProperty,aL=Object.prototype.propertyIsEnumerable,OC=(t,n,a)=>n in t?O2e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,Za=(t,n)=>{for(var a in n||(n={}))nL.call(n,a)&&OC(t,a,n[a]);if(Wm)for(var a of Wm(n))aL.call(n,a)&&OC(t,a,n[a]);return t},Mo=(t,n)=>N2e(t,x2e(n)),R2e=(t,n)=>{var a={};for(var e in t)nL.call(t,e)&&n.indexOf(e)<0&&(a[e]=t[e]);if(t!=null&&Wm)for(var e of Wm(t))n.indexOf(e)<0&&aL.call(t,e)&&(a[e]=t[e]);return a};const w2e={formatLocale:WS,yearFormat:"YYYY",monthFormat:"MMM",monthBeforeYear:!0};let su="en";const Sc={};Sc[su]=w2e;function sL(t,n,a=!1){if(typeof t!="string")return Sc[su];let e=su;return Sc[t]&&(e=t),n&&(Sc[t]=n,e=t),a||(su=e),Sc[t]||Sc[su]}function Zv(t){return sL(t,void 0,!0)}function XS(t,n){if(!Array.isArray(t))return[];const a=[],e=t.length;let s=0;for(n=n||e;s<e;)a.push(t.slice(s,s+=n));return a}function NC(t){return Array.isArray(t)?t[t.length-1]:void 0}function xi(t){return Object.prototype.toString.call(t)==="[object Object]"}function zr(t,n){const a={};return xi(t)&&(Array.isArray(n)||(n=[n]),n.forEach(e=>{Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})),a}function oL(t,n){if(!xi(t))return{};let a=t;return xi(n)&&Object.keys(n).forEach(e=>{let s=n[e];const r=t[e];xi(s)&&xi(r)&&(s=oL(r,s)),a=Mo(Za({},a),{[e]:s})}),a}function eb(t){const n=parseInt(String(t),10);return n<10?`0${n}`:`${n}`}function M2e(t){const n=/-(\w)/g;return t.replace(n,(a,e)=>e?e.toUpperCase():"")}const rL="datepicker_locale",iL="datepicker_prefixClass",lL="datepicker_getWeek";function qS(){return so(rL,Ff(Zv()))}function L2e(t){const n=S(()=>xi(t.value)?oL(Zv(),t.value):Zv(t.value));return qn(rL,n),n}function D2e(t){qn(iL,t)}function Ps(){return so(iL,"mx")}function P2e(t){qn(lL,t)}function k2e(){return so(lL,jS)}function B2e(t){const n=t.style.display,a=t.style.visibility;t.style.display="block",t.style.visibility="hidden";const e=window.getComputedStyle(t),s=t.offsetWidth+parseInt(e.marginLeft,10)+parseInt(e.marginRight,10),r=t.offsetHeight+parseInt(e.marginTop,10)+parseInt(e.marginBottom,10);return t.style.display=n,t.style.visibility=a,{width:s,height:r}}function F2e(t,n,a,e){let s=0,r=0,o=0,i=0;const l=t.getBoundingClientRect(),c=document.documentElement.clientWidth,d=document.documentElement.clientHeight;return e&&(o=window.pageXOffset+l.left,i=window.pageYOffset+l.top),c-l.left<n&&l.right<n?s=o-l.left+1:l.left+l.width/2<=c/2?s=o:s=o+l.width-n,l.top<=a&&d-l.bottom<=a?r=i+d-l.top-a:l.top+l.height/2<=d/2?r=i+l.height:r=i-a,{left:`${s}px`,top:`${r}px`}}function ZS(t,n=document.body){if(!t||t===n)return null;const a=(r,o)=>getComputedStyle(r,null).getPropertyValue(o);return/(auto|scroll)/.test(a(t,"overflow")+a(t,"overflow-y")+a(t,"overflow-x"))?t:ZS(t.parentElement,n)}let Zp;function U2e(){if(typeof window>"u")return 0;if(Zp!==void 0)return Zp;const t=document.createElement("div");t.style.visibility="hidden",t.style.overflow="scroll",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const n=document.createElement("div");return n.style.width="100%",t.appendChild(n),Zp=t.offsetWidth-n.offsetWidth,t.parentNode.removeChild(t),Zp}const xC="ontouchend"in document?"touchstart":"mousedown";function $2e(t){let n=!1;return function(...e){n||(n=!0,requestAnimationFrame(()=>{n=!1,t.apply(this,e)}))}}function oi(t,n){return{setup:t,name:t.name,props:n}}function ri(t,n){return new Proxy(t,{get(e,s){const r=e[s];return r!==void 0?r:n[s]}})}const el=()=>t=>t,G2e=(t,n)=>{const a={};for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const s=M2e(e);let r=t[e];n.indexOf(s)!==-1&&r===""&&(r=!0),a[s]=r}return a};function V2e(t,{slots:n}){const a=ri(t,{appendToBody:!0}),e=Ps(),s=P(null),r=P({left:"",top:""}),o=()=>{if(!a.visible||!s.value)return;const l=a.getRelativeElement();if(!l)return;const{width:c,height:d}=B2e(s.value);r.value=F2e(l,c,d,a.appendToBody)};oo(o,{flush:"post"}),oo(l=>{const c=a.getRelativeElement();if(!c)return;const d=ZS(c)||window,u=$2e(o);d.addEventListener("scroll",u),window.addEventListener("resize",u),l(()=>{d.removeEventListener("scroll",u),window.removeEventListener("resize",u)})},{flush:"post"});const i=l=>{if(!a.visible)return;const c=l.target,d=s.value,u=a.getRelativeElement();d&&!d.contains(c)&&u&&!u.contains(c)&&a.onClickOutside(l)};return oo(l=>{document.addEventListener(xC,i),l(()=>{document.removeEventListener(xC,i)})}),()=>v(V3,{to:"body",disabled:!a.appendToBody},{default:()=>[v(Qa,{name:`${e}-zoom-in-down`},{default:()=>{var l;return[a.visible&&v("div",{ref:s,class:`${e}-datepicker-main ${e}-datepicker-popup ${a.className}`,style:[Za({position:"absolute"},r.value),a.style||{}]},[(l=n.default)==null?void 0:l.call(n)])]}})]})}const H2e=el()(["style","className","visible","appendToBody","onClickOutside","getRelativeElement"]);var j2e=oi(V2e,H2e);const W2e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},z2e=f("path",{d:"M940.218 107.055H730.764v-60.51H665.6v60.51H363.055v-60.51H297.89v60.51H83.78c-18.617 0-32.581 13.963-32.581 32.581v805.237c0 18.618 13.964 32.582 32.582 32.582h861.09c18.619 0 32.583-13.964 32.583-32.582V139.636c-4.655-18.618-18.619-32.581-37.237-32.581zm-642.327 65.163v60.51h65.164v-60.51h307.2v60.51h65.163v-60.51h176.873v204.8H116.364v-204.8H297.89zM116.364 912.291V442.18H912.29v470.11H116.364z"},null,-1),Y2e=[z2e];function cL(t,n){return p(),g("svg",W2e,Y2e)}const K2e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},X2e=f("path",{d:"M810.005 274.005 572.011 512l237.994 237.995-60.01 60.01L512 572.011 274.005 810.005l-60.01-60.01L451.989 512 213.995 274.005l60.01-60.01L512 451.989l237.995-237.994z"},null,-1),q2e=[X2e];function Z2e(t,n){return p(),g("svg",K2e,q2e)}const Q2e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em"},J2e=f("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),exe=f("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},null,-1),txe=f("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},null,-1),nxe=[J2e,exe,txe];function axe(t,n){return p(),g("svg",Q2e,nxe)}function Ol(t,n=0,a=1,e=0,s=0,r=0,o=0){const i=new Date(t,n,a,e,s,r,o);return t<100&&t>=0&&i.setFullYear(t),i}function Qr(t){return t instanceof Date&&!isNaN(t.getTime())}function Nl(t){return Array.isArray(t)&&t.length===2&&t.every(Qr)&&t[0]<=t[1]}function sxe(t){return Array.isArray(t)&&t.every(Qr)}function Wh(...t){if(t[0]!==void 0&&t[0]!==null){const a=new Date(t[0]);if(Qr(a))return a}const n=t.slice(1);return n.length?Wh(...n):new Date}function oxe(t){const n=new Date(t);return n.setMonth(0,1),n.setHours(0,0,0,0),n}function RC(t){const n=new Date(t);return n.setDate(1),n.setHours(0,0,0,0),n}function Vi(t){const n=new Date(t);return n.setHours(0,0,0,0),n}function rxe({firstDayOfWeek:t,year:n,month:a}){const e=[],s=Ol(n,a,0),r=s.getDate(),o=r-(s.getDay()+7-t)%7;for(let d=o;d<=r;d++)e.push(Ol(n,a,d-r));s.setMonth(a+1,0);const i=s.getDate();for(let d=1;d<=i;d++)e.push(Ol(n,a,d));const l=r-o+1,c=6*7-l-i;for(let d=1;d<=c;d++)e.push(Ol(n,a,i+d));return e}function zm(t,n){const a=new Date(t),e=typeof n=="function"?n(a.getMonth()):Number(n),s=a.getFullYear(),r=Ol(s,e+1,0).getDate(),o=a.getDate();return a.setMonth(e,Math.min(o,r)),a}function Dc(t,n){const a=new Date(t),e=typeof n=="function"?n(a.getFullYear()):n;return a.setFullYear(e),a}function ixe(t,n){const a=new Date(n),e=new Date(t),s=a.getFullYear()-e.getFullYear(),r=a.getMonth()-e.getMonth();return s*12+r}function Ym(t,n){const a=new Date(t),e=new Date(n);return a.setHours(e.getHours(),e.getMinutes(),e.getSeconds()),a}function lxe(t,{slots:n}){const a=ri(t,{editable:!0,disabled:!1,clearable:!0,range:!1,multiple:!1}),e=Ps(),s=P(null),r=S(()=>a.separator||(a.range?" ~ ":",")),o=h=>a.range?Nl(h):a.multiple?sxe(h):Qr(h),i=h=>Array.isArray(h)?h.some(_=>a.disabledDate(_)):a.disabledDate(h),l=S(()=>s.value!==null?s.value:typeof a.renderInputText=="function"?a.renderInputText(a.value):o(a.value)?Array.isArray(a.value)?a.value.map(h=>a.formatDate(h)).join(r.value):a.formatDate(a.value):""),c=h=>{var _;h&&h.stopPropagation(),a.onChange(a.range?[null,null]:null),(_=a.onClear)==null||_.call(a)},d=()=>{var h;if(!a.editable||s.value===null)return;const _=s.value.trim();if(s.value=null,_===""){c();return}let E;if(a.range){let y=_.split(r.value);y.length!==2&&(y=_.split(r.value.trim())),E=y.map(b=>a.parseDate(b.trim()))}else a.multiple?E=_.split(r.value).map(y=>a.parseDate(y.trim())):E=a.parseDate(_);o(E)&&!i(E)?a.onChange(E):(h=a.onInputError)==null||h.call(a,_)},u=h=>{s.value=typeof h=="string"?h:h.target.value},m=h=>{const{keyCode:_}=h;_===9?a.onBlur():_===13&&d()};return()=>{var h,_,E;const y=!a.disabled&&a.clearable&&l.value,b=Mo(Za({name:"date",type:"text",autocomplete:"off",value:l.value,class:a.inputClass||`${e}-input`,readonly:!a.editable,disabled:a.disabled,placeholder:a.placeholder},a.inputAttr),{onFocus:a.onFocus,onKeydown:m,onInput:u,onChange:d});return v("div",{class:`${e}-input-wrapper`,onClick:a.onClick},[((h=n.input)==null?void 0:h.call(n,b))||v("input",b,null),y?v("i",{class:`${e}-icon-clear`,onClick:c},[((_=n["icon-clear"])==null?void 0:_.call(n))||v(Z2e,null,null)]):null,v("i",{class:`${e}-icon-calendar`},[((E=n["icon-calendar"])==null?void 0:E.call(n))||v(cL,null,null)])])}}const QS=el()(["placeholder","editable","disabled","clearable","inputClass","inputAttr","range","multiple","separator","renderInputText","onInputError","onClear"]),cxe=el()(["value","formatDate","parseDate","disabledDate","onChange","onFocus","onBlur","onClick",...QS]);var dxe=oi(lxe,cxe);function uxe(t,{slots:n}){var a;const e=ri(t,{prefixClass:"mx",valueType:"date",format:"YYYY-MM-DD",type:"date",disabledDate:()=>!1,disabledTime:()=>!1,confirmText:"OK"});D2e(e.prefixClass),P2e(((a=e.formatter)==null?void 0:a.getWeek)||jS);const s=L2e(Pc(t,"lang")),r=P(),o=()=>r.value,i=P(!1),l=S(()=>!e.disabled&&(typeof e.open=="boolean"?e.open:i.value)),c=()=>{var x,R;e.disabled||l.value||(i.value=!0,(x=e["onUpdate:open"])==null||x.call(e,!0),(R=e.onOpen)==null||R.call(e))},d=()=>{var x,R;l.value&&(i.value=!1,(x=e["onUpdate:open"])==null||x.call(e,!1),(R=e.onClose)==null||R.call(e))},u=(x,R)=>(R=R||e.format,xi(e.formatter)&&typeof e.formatter.stringify=="function"?e.formatter.stringify(x,R):zS(x,R,{locale:s.value.formatLocale})),m=(x,R)=>{if(R=R||e.format,xi(e.formatter)&&typeof e.formatter.parse=="function")return e.formatter.parse(x,R);const M=new Date;return C2e(x,R,{locale:s.value.formatLocale,backupDate:M})},h=x=>{switch(e.valueType){case"date":return x instanceof Date?new Date(x.getTime()):new Date(NaN);case"timestamp":return typeof x=="number"?new Date(x):new Date(NaN);case"format":return typeof x=="string"?m(x):new Date(NaN);default:return typeof x=="string"?m(x,e.valueType):new Date(NaN)}},_=x=>{if(!Qr(x))return null;switch(e.valueType){case"date":return x;case"timestamp":return x.getTime();case"format":return u(x);default:return u(x,e.valueType)}},E=S(()=>{const x=e.value;return e.range?(Array.isArray(x)?x.slice(0,2):[null,null]).map(h):e.multiple?(Array.isArray(x)?x:[]).map(h):h(x)}),y=(x,R,M=!0)=>{var w,D;const B=Array.isArray(x)?x.map(_):_(x);return(w=e["onUpdate:value"])==null||w.call(e,B),(D=e.onChange)==null||D.call(e,B,R),M&&d(),B},b=P(new Date);oo(()=>{l.value&&(b.value=E.value)});const A=(x,R)=>{e.confirm?b.value=x:y(x,R,!e.multiple&&(R===e.type||R==="time"))},T=()=>{var x;const R=y(b.value);(x=e.onConfirm)==null||x.call(e,R)},I=x=>e.disabledDate(x)||e.disabledTime(x),N=x=>{var R;const{prefixClass:M}=e;return v("div",{class:`${M}-datepicker-sidebar`},[(R=n.sidebar)==null?void 0:R.call(n,x),(e.shortcuts||[]).map((w,D)=>v("button",{key:D,"data-index":D,type:"button",class:`${M}-btn ${M}-btn-text ${M}-btn-shortcut`,onClick:()=>{var B;const k=(B=w.onClick)==null?void 0:B.call(w);k&&y(k)}},[w.text]))])};return()=>{var x,R;const{prefixClass:M,disabled:w,confirm:D,range:B,popupClass:k,popupStyle:V,appendToBody:F}=e,$={value:b.value,"onUpdate:value":A,emit:y},Y=n.header&&v("div",{class:`${M}-datepicker-header`},[n.header($)]),j=(n.footer||D)&&v("div",{class:`${M}-datepicker-footer`},[(x=n.footer)==null?void 0:x.call(n,$),D&&v("button",{type:"button",class:`${M}-btn ${M}-datepicker-btn-confirm`,onClick:T},[e.confirmText])]),U=(R=n.content)==null?void 0:R.call(n,$),J=(n.sidebar||e.shortcuts)&&N($);return v("div",{ref:r,class:{[`${M}-datepicker`]:!0,[`${M}-datepicker-range`]:B,disabled:w}},[v(dxe,Mo(Za({},zr(e,QS)),{value:E.value,formatDate:u,parseDate:m,disabledDate:I,onChange:y,onClick:c,onFocus:c,onBlur:d}),zr(n,["icon-calendar","icon-clear","input"])),v(j2e,{className:k,style:V,visible:l.value,appendToBody:F,getRelativeElement:o,onClickOutside:d},{default:()=>[J,v("div",{class:`${M}-datepicker-content`},[Y,U,j])]})])}}const pxe=el()(["value","valueType","type","format","formatter","lang","prefixClass","appendToBody","open","popupClass","popupStyle","confirm","confirmText","shortcuts","disabledDate","disabledTime","onOpen","onClose","onConfirm","onChange","onUpdate:open","onUpdate:value"]),fxe=[...pxe,...QS];var wC=oi(uxe,fxe);function Qp(t){var n=t,{value:a}=n,e=R2e(n,["value"]);const s=Ps();return v("button",Mo(Za({},e),{type:"button",class:`${s}-btn ${s}-btn-text ${s}-btn-icon-${a}`}),[v("i",{class:`${s}-icon-${a}`},null)])}function JS({type:t,calendar:n,onUpdateCalendar:a},{slots:e}){var s;const r=Ps(),o=()=>{a(zm(n,m=>m-1))},i=()=>{a(zm(n,m=>m+1))},l=()=>{a(Dc(n,m=>m-1))},c=()=>{a(Dc(n,m=>m+1))},d=()=>{a(Dc(n,m=>m-10))},u=()=>{a(Dc(n,m=>m+10))};return v("div",{class:`${r}-calendar-header`},[v(Qp,{value:"double-left",onClick:t==="year"?d:l},null),t==="date"&&v(Qp,{value:"left",onClick:o},null),v(Qp,{value:"double-right",onClick:t==="year"?u:c},null),t==="date"&&v(Qp,{value:"right",onClick:i},null),v("span",{class:`${r}-calendar-header-label`},[(s=e.default)==null?void 0:s.call(e)])])}function mxe({calendar:t,isWeekMode:n,showWeekNumber:a,titleFormat:e,getWeekActive:s,getCellClasses:r,onSelect:o,onUpdatePanel:i,onUpdateCalendar:l,onDateMouseEnter:c,onDateMouseLeave:d}){const u=Ps(),m=k2e(),h=qS().value,{yearFormat:_,monthBeforeYear:E,monthFormat:y="MMM",formatLocale:b}=h,A=b.firstDayOfWeek||0;let T=h.days||b.weekdaysMin;T=T.concat(T).slice(A,A+7);const I=t.getFullYear(),N=t.getMonth(),x=XS(rxe({firstDayOfWeek:A,year:I,month:N}),7),R=($,Y)=>zS($,Y,{locale:h.formatLocale}),M=$=>{i($)},w=$=>{const Y=$.getAttribute("data-index"),[j,U]=Y.split(",").map(te=>parseInt(te,10)),J=x[j][U];return new Date(J)},D=$=>{o(w($.currentTarget))},B=$=>{c&&c(w($.currentTarget))},k=$=>{d&&d(w($.currentTarget))},V=v("button",{type:"button",class:`${u}-btn ${u}-btn-text ${u}-btn-current-year`,onClick:()=>M("year")},[R(t,_)]),F=v("button",{type:"button",class:`${u}-btn ${u}-btn-text ${u}-btn-current-month`,onClick:()=>M("month")},[R(t,y)]);return a=typeof a=="boolean"?a:n,v("div",{class:[`${u}-calendar ${u}-calendar-panel-date`,{[`${u}-calendar-week-mode`]:n}]},[v(JS,{type:"date",calendar:t,onUpdateCalendar:l},{default:()=>[E?[F,V]:[V,F]]}),v("div",{class:`${u}-calendar-content`},[v("table",{class:`${u}-table ${u}-table-date`},[v("thead",null,[v("tr",null,[a&&v("th",{class:`${u}-week-number-header`},null),T.map($=>v("th",{key:$},[$]))])]),v("tbody",null,[x.map(($,Y)=>v("tr",{key:Y,class:[`${u}-date-row`,{[`${u}-active-week`]:s($)}]},[a&&v("td",{class:`${u}-week-number`,"data-index":`${Y},0`,onClick:D},[v("div",null,[m($[0])])]),$.map((j,U)=>v("td",{key:U,class:["cell",r(j)],title:R(j,e),"data-index":`${Y},${U}`,onClick:D,onMouseenter:B,onMouseleave:k},[v("div",null,[j.getDate()])]))]))])])])])}function hxe({calendar:t,getCellClasses:n,onSelect:a,onUpdateCalendar:e,onUpdatePanel:s}){const r=Ps(),o=qS().value,i=o.months||o.formatLocale.monthsShort,l=d=>Ol(t.getFullYear(),d),c=d=>{const m=d.currentTarget.getAttribute("data-month");a(l(parseInt(m,10)))};return v("div",{class:`${r}-calendar ${r}-calendar-panel-month`},[v(JS,{type:"month",calendar:t,onUpdateCalendar:e},{default:()=>[v("button",{type:"button",class:`${r}-btn ${r}-btn-text ${r}-btn-current-year`,onClick:()=>s("year")},[t.getFullYear()])]}),v("div",{class:`${r}-calendar-content`},[v("table",{class:`${r}-table ${r}-table-month`},[XS(i,3).map((d,u)=>v("tr",{key:u},[d.map((m,h)=>{const _=u*3+h;return v("td",{key:h,class:["cell",n(l(_))],"data-month":_,onClick:c},[v("div",null,[m])])})]))])])])}const _xe=t=>{const n=Math.floor(t.getFullYear()/10)*10,a=[];for(let e=0;e<10;e++)a.push(n+e);return XS(a,2)};function gxe({calendar:t,getCellClasses:n=()=>[],getYearPanel:a=_xe,onSelect:e,onUpdateCalendar:s}){const r=Ps(),o=u=>Ol(u,0),i=u=>{const h=u.currentTarget.getAttribute("data-year");e(o(parseInt(h,10)))},l=a(new Date(t)),c=l[0][0],d=NC(NC(l));return v("div",{class:`${r}-calendar ${r}-calendar-panel-year`},[v(JS,{type:"year",calendar:t,onUpdateCalendar:s},{default:()=>[v("span",null,[c]),v("span",{class:`${r}-calendar-decade-separator`},null),v("span",null,[d])]}),v("div",{class:`${r}-calendar-content`},[v("table",{class:`${r}-table ${r}-table-year`},[l.map((u,m)=>v("tr",{key:m},[u.map((h,_)=>v("td",{key:_,class:["cell",n(o(h))],"data-year":h,onClick:i},[v("div",null,[h])]))]))])])])}function bxe(t){const n=ri(t,{defaultValue:Vi(new Date),type:"date",disabledDate:()=>!1,getClasses:()=>[],titleFormat:"YYYY-MM-DD"}),a=S(()=>(Array.isArray(n.value)?n.value:[n.value]).filter(Qr).map(A=>n.type==="year"?oxe(A):n.type==="month"?RC(A):Vi(A))),e=P(new Date);oo(()=>{let b=n.calendar;if(!Qr(b)){const{length:A}=a.value;b=Wh(A>0?a.value[A-1]:n.defaultValue)}e.value=RC(b)});const s=b=>{var A;e.value=b,(A=n.onCalendarChange)==null||A.call(n,b)},r=P("date");oo(()=>{const b=["date","month","year"],A=Math.max(b.indexOf(n.type),b.indexOf(n.defaultPanel));r.value=A!==-1?b[A]:"date"});const o=b=>{var A;const T=r.value;r.value=b,(A=n.onPanelChange)==null||A.call(n,b,T)},i=b=>n.disabledDate(new Date(b),a.value),l=(b,A)=>{var T,I,N;if(!i(b))if((T=n.onPick)==null||T.call(n,b),n.multiple===!0){const x=a.value.filter(R=>R.getTime()!==b.getTime());x.length===a.value.length&&x.push(b),(I=n["onUpdate:value"])==null||I.call(n,x,A)}else(N=n["onUpdate:value"])==null||N.call(n,b,A)},c=b=>{l(b,n.type==="week"?"week":"date")},d=b=>{if(n.type==="year")l(b,"year");else if(s(b),o("month"),n.partialUpdate&&a.value.length===1){const A=Dc(a.value[0],b.getFullYear());l(A,"year")}},u=b=>{if(n.type==="month")l(b,"month");else if(s(b),o("date"),n.partialUpdate&&a.value.length===1){const A=zm(Dc(a.value[0],b.getFullYear()),b.getMonth());l(A,"month")}},m=(b,A=[])=>(i(b)?A.push("disabled"):a.value.some(T=>T.getTime()===b.getTime())&&A.push("active"),A.concat(n.getClasses(b,a.value,A.join(" ")))),h=b=>{const A=b.getMonth()!==e.value.getMonth(),T=[];return b.getTime()===new Date().setHours(0,0,0,0)&&T.push("today"),A&&T.push("not-current-month"),m(b,T)},_=b=>n.type!=="month"?e.value.getMonth()===b.getMonth()?"active":"":m(b),E=b=>n.type!=="year"?e.value.getFullYear()===b.getFullYear()?"active":"":m(b),y=b=>{if(n.type!=="week")return!1;const A=b[0].getTime(),T=b[6].getTime();return a.value.some(I=>{const N=I.getTime();return N>=A&&N<=T})};return()=>r.value==="year"?v(gxe,{calendar:e.value,getCellClasses:E,getYearPanel:n.getYearPanel,onSelect:d,onUpdateCalendar:s},null):r.value==="month"?v(hxe,{calendar:e.value,getCellClasses:_,onSelect:u,onUpdatePanel:o,onUpdateCalendar:s},null):v(mxe,{isWeekMode:n.type==="week",showWeekNumber:n.showWeekNumber,titleFormat:n.titleFormat,calendar:e.value,getCellClasses:h,getWeekActive:y,onSelect:c,onUpdatePanel:o,onUpdateCalendar:s,onDateMouseEnter:n.onDateMouseEnter,onDateMouseLeave:n.onDateMouseLeave},null)}const zh=el()(["type","value","defaultValue","defaultPanel","disabledDate","getClasses","calendar","multiple","partialUpdate","showWeekNumber","titleFormat","getYearPanel","onDateMouseEnter","onDateMouseLeave","onCalendarChange","onPanelChange","onUpdate:value","onPick"]);var Yh=oi(bxe,zh);const MC=(t,n)=>{const a=t.getTime();let[e,s]=n.map(r=>r.getTime());return e>s&&([e,s]=[s,e]),a>e&&a<s};function vxe(t){const n=ri(t,{defaultValue:new Date,type:"date"}),a=Ps(),e=S(()=>{let y=Array.isArray(n.defaultValue)?n.defaultValue:[n.defaultValue,n.defaultValue];return y=y.map(b=>Vi(b)),Nl(y)?y:[new Date,new Date].map(b=>Vi(b))}),s=P([new Date(NaN),new Date(NaN)]);oo(()=>{Nl(n.value)&&(s.value=n.value)});const r=(y,b)=>{var A;const[T,I]=s.value;Qr(T)&&!Qr(I)?(T.getTime()>y.getTime()?s.value=[y,T]:s.value=[T,y],(A=n["onUpdate:value"])==null||A.call(n,s.value,b)):s.value=[y,new Date(NaN)]},o=P([new Date,new Date]),i=S(()=>Nl(n.calendar)?n.calendar:o.value),l=S(()=>n.type==="year"?10*12:n.type==="month"?1*12:1),c=(y,b)=>{var A;const T=ixe(y[0],y[1]),I=l.value-T;if(I>0){const N=b===1?0:1;y[N]=zm(y[N],x=>x+(N===0?-I:I))}o.value=y,(A=n.onCalendarChange)==null||A.call(n,y,b)},d=y=>{c([y,i.value[1]],0)},u=y=>{c([i.value[0],y],1)};oo(()=>{const y=Nl(n.value)?n.value:e.value;c(y.slice(0,2))});const m=P(null),h=y=>m.value=y,_=()=>m.value=null,E=(y,b,A)=>{const T=n.getClasses?n.getClasses(y,b,A):[],I=Array.isArray(T)?T:[T];return/disabled|active/.test(A)?I:(b.length===2&&MC(y,b)&&I.push("in-range"),b.length===1&&m.value&&MC(y,[b[0],m.value])?I.concat("hover-in-range"):I)};return()=>{const y=i.value.map((b,A)=>{const T=Mo(Za({},n),{calendar:b,value:s.value,defaultValue:e.value[A],getClasses:E,partialUpdate:!1,multiple:!1,"onUpdate:value":r,onCalendarChange:A===0?d:u,onDateMouseLeave:_,onDateMouseEnter:h});return v(Yh,T,null)});return v("div",{class:`${a}-calendar-range`},[y])}}const e1=zh;var t1=oi(vxe,e1);const dL=ei({setup(t,{slots:n}){const a=Ps(),e=P(),s=P(""),r=P("");Pe(()=>{if(!e.value)return;const _=e.value,E=_.clientHeight*100/_.scrollHeight;s.value=E<100?`${E}%`:""});const i=U2e(),l=_=>{const E=_.currentTarget,{scrollHeight:y,scrollTop:b}=E;r.value=`${b*100/y}%`};let c=!1,d=0;const u=_=>{_.stopImmediatePropagation();const E=_.currentTarget,{offsetTop:y}=E;c=!0,d=_.clientY-y},m=_=>{if(!c||!e.value)return;const{clientY:E}=_,{scrollHeight:y,clientHeight:b}=e.value,T=(E-d)*y/b;e.value.scrollTop=T},h=()=>{c=!1};return Pe(()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h)}),is(()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h)}),()=>{var _;return v("div",{class:`${a}-scrollbar`,style:{position:"relative",overflow:"hidden"}},[v("div",{ref:e,class:`${a}-scrollbar-wrap`,style:{marginRight:`-${i}px`},onScroll:l},[(_=n.default)==null?void 0:_.call(n)]),v("div",{class:`${a}-scrollbar-track`},[v("div",{class:`${a}-scrollbar-thumb`,style:{height:s.value,top:r.value},onMousedown:u},null)])])}}});function Exe({options:t,getClasses:n,onSelect:a}){const e=Ps(),s=r=>{const o=r.target,i=r.currentTarget;if(o.tagName.toUpperCase()!=="LI")return;const l=i.getAttribute("data-type"),c=parseInt(i.getAttribute("data-index"),10),d=parseInt(o.getAttribute("data-index"),10),u=t[c].list[d].value;a(u,l)};return v("div",{class:`${e}-time-columns`},[t.map((r,o)=>v(dL,{key:r.type,class:`${e}-time-column`},{default:()=>[v("ul",{class:`${e}-time-list`,"data-index":o,"data-type":r.type,onClick:s},[r.list.map((i,l)=>v("li",{key:i.text,"data-index":l,class:[`${e}-time-item`,n(i.value,r.type)]},[i.text]))])]}))])}function Sxe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!Xb(t)}function Txe(t){let n;const a=Ps();return v(dL,null,Sxe(n=t.options.map(e=>v("div",{key:e.text,class:[`${a}-time-option`,t.getClasses(e.value,"time")],onClick:()=>t.onSelect(e.value,"time")},[e.text])))?n:{default:()=>[n]})}function tb({length:t,step:n=1,options:a}){if(Array.isArray(a))return a.filter(s=>s>=0&&s<t);n<=0&&(n=1);const e=[];for(let s=0;s<t;s+=n)e.push(s);return e}function Axe(t,n){let{showHour:a,showMinute:e,showSecond:s,use12h:r}=n;const o=n.format||"HH:mm:ss";a=typeof a=="boolean"?a:/[HhKk]/.test(o),e=typeof e=="boolean"?e:/m/.test(o),s=typeof s=="boolean"?s:/s/.test(o),r=typeof r=="boolean"?r:/a/i.test(o);const i=[],l=r&&t.getHours()>=12;return a&&i.push({type:"hour",list:tb({length:r?12:24,step:n.hourStep,options:n.hourOptions}).map(c=>{const d=c===0&&r?"12":eb(c),u=new Date(t);return u.setHours(l?c+12:c),{value:u,text:d}})}),e&&i.push({type:"minute",list:tb({length:60,step:n.minuteStep,options:n.minuteOptions}).map(c=>{const d=new Date(t);return d.setMinutes(c),{value:d,text:eb(c)}})}),s&&i.push({type:"second",list:tb({length:60,step:n.secondStep,options:n.secondOptions}).map(c=>{const d=new Date(t);return d.setSeconds(c),{value:d,text:eb(c)}})}),r&&i.push({type:"ampm",list:["AM","PM"].map((c,d)=>{const u=new Date(t);return u.setHours(u.getHours()%12+d*12),{text:c,value:u}})}),i}function nb(t=""){const n=t.split(":");if(n.length>=2){const a=parseInt(n[0],10),e=parseInt(n[1],10);return{hours:a,minutes:e}}return null}function yxe({date:t,option:n,format:a,formatDate:e}){const s=[];if(typeof n=="function")return n()||[];const r=nb(n.start),o=nb(n.end),i=nb(n.step),l=n.format||a;if(r&&o&&i){const c=r.minutes+r.hours*60,d=o.minutes+o.hours*60,u=i.minutes+i.hours*60,m=Math.floor((d-c)/u);for(let h=0;h<=m;h++){const _=c+h*u,E=Math.floor(_/60),y=_%60,b=new Date(t);b.setHours(E,y,0),s.push({value:b,text:e(b,l)})}}return s}const uL=(t,n,a=0)=>{if(a<=0){requestAnimationFrame(()=>{t.scrollTop=n});return}const s=(n-t.scrollTop)/a*10;requestAnimationFrame(()=>{const r=t.scrollTop+s;if(r>=n){t.scrollTop=n;return}t.scrollTop=r,uL(t,n,a-10)})};function Ixe(t){const n=ri(t,{defaultValue:Vi(new Date),format:"HH:mm:ss",timeTitleFormat:"YYYY-MM-DD",disabledTime:()=>!1,scrollDuration:100}),a=Ps(),e=qS(),s=(E,y)=>zS(E,y,{locale:e.value.formatLocale}),r=P(new Date);oo(()=>{r.value=Wh(n.value,n.defaultValue)});const o=E=>Array.isArray(E)?E.every(y=>n.disabledTime(new Date(y))):n.disabledTime(new Date(E)),i=E=>{const y=new Date(E);return o([y.getTime(),y.setMinutes(0,0,0),y.setMinutes(59,59,999)])},l=E=>{const y=new Date(E);return o([y.getTime(),y.setSeconds(0,0),y.setSeconds(59,999)])},c=E=>{const y=new Date(E),b=y.getHours()<12?0:12,A=b+11;return o([y.getTime(),y.setHours(b,0,0,0),y.setHours(A,59,59,999)])},d=(E,y)=>y==="hour"?i(E):y==="minute"?l(E):y==="ampm"?c(E):o(E),u=(E,y)=>{var b;if(!d(E,y)){const A=new Date(E);r.value=A,o(A)||(b=n["onUpdate:value"])==null||b.call(n,A,y)}},m=(E,y)=>d(E,y)?"disabled":E.getTime()===r.value.getTime()?"active":"",h=P(),_=E=>{if(!h.value)return;const y=h.value.querySelectorAll(".active");for(let b=0;b<y.length;b++){const A=y[b],T=ZS(A,h.value);if(T){const I=A.offsetTop;uL(T,I,E)}}};return Pe(()=>_(0)),je(r,()=>_(n.scrollDuration),{flush:"post"}),()=>{let E;return n.timePickerOptions?E=v(Txe,{onSelect:u,getClasses:m,options:yxe({date:r.value,format:n.format,option:n.timePickerOptions,formatDate:s})},null):E=v(Exe,{options:Axe(r.value,n),onSelect:u,getClasses:m},null),v("div",{class:`${a}-time`,ref:h},[n.showTimeHeader&&v("div",{class:`${a}-time-header`},[v("button",{type:"button",class:`${a}-btn ${a}-btn-text ${a}-time-header-title`,onClick:n.onClickTitle},[s(r.value,n.timeTitleFormat)])]),v("div",{class:`${a}-time-content`},[E])])}}const Kh=el()(["value","defaultValue","format","timeTitleFormat","showTimeHeader","disabledTime","timePickerOptions","hourOptions","minuteOptions","secondOptions","hourStep","minuteStep","secondStep","showHour","showMinute","showSecond","use12h","scrollDuration","onClickTitle","onUpdate:value"]);var Ku=oi(Ixe,Kh);function Cxe(t){const n=ri(t,{defaultValue:Vi(new Date),disabledTime:()=>!1}),a=Ps(),e=P([new Date(NaN),new Date(NaN)]);oo(()=>{Nl(n.value)?e.value=n.value:e.value=[new Date(NaN),new Date(NaN)]});const s=(c,d)=>{var u;(u=n["onUpdate:value"])==null||u.call(n,e.value,c==="time"?"time-range":c,d)},r=(c,d)=>{e.value[0]=c,e.value[1].getTime()>=c.getTime()||(e.value[1]=c),s(d,0)},o=(c,d)=>{e.value[1]=c,e.value[0].getTime()<=c.getTime()||(e.value[0]=c),s(d,1)},i=c=>n.disabledTime(c,0),l=c=>c.getTime()<e.value[0].getTime()||n.disabledTime(c,1);return()=>{const c=Array.isArray(n.defaultValue)?n.defaultValue:[n.defaultValue,n.defaultValue];return v("div",{class:`${a}-time-range`},[v(Ku,Mo(Za({},n),{"onUpdate:value":r,value:e.value[0],defaultValue:c[0],disabledTime:i}),null),v(Ku,Mo(Za({},n),{"onUpdate:value":o,value:e.value[1],defaultValue:c[1],disabledTime:l}),null)])}}const n1=Kh;var a1=oi(Cxe,n1);function pL(t){const n=P(!1),a=()=>{var r;n.value=!1,(r=t.onShowTimePanelChange)==null||r.call(t,!1)},e=()=>{var r;n.value=!0,(r=t.onShowTimePanelChange)==null||r.call(t,!0)};return{timeVisible:S(()=>typeof t.showTimePanel=="boolean"?t.showTimePanel:n.value),openTimePanel:e,closeTimePanel:a}}function Oxe(t){const n=ri(t,{disabledTime:()=>!1,defaultValue:Vi(new Date)}),a=P(n.value);oo(()=>{a.value=n.value});const{openTimePanel:e,closeTimePanel:s,timeVisible:r}=pL(n),o=(i,l)=>{var c;l==="date"&&e();let d=Ym(i,Wh(n.value,n.defaultValue));if(n.disabledTime(new Date(d))&&(d=Ym(i,n.defaultValue),n.disabledTime(new Date(d)))){a.value=d;return}(c=n["onUpdate:value"])==null||c.call(n,d,l)};return()=>{const i=Ps(),l=Mo(Za({},zr(n,zh)),{multiple:!1,type:"date",value:a.value,"onUpdate:value":o}),c=Mo(Za({},zr(n,Kh)),{showTimeHeader:!0,value:a.value,"onUpdate:value":n["onUpdate:value"],onClickTitle:s});return v("div",{class:`${i}-date-time`},[v(Yh,l,null),r.value&&v(Ku,c,null)])}}const fL=el()(["showTimePanel","onShowTimePanelChange"]),Nxe=[...fL,...zh,...Kh];var mL=oi(Oxe,Nxe);function xxe(t){const n=ri(t,{defaultValue:Vi(new Date),disabledTime:()=>!1}),a=P(n.value);oo(()=>{a.value=n.value});const{openTimePanel:e,closeTimePanel:s,timeVisible:r}=pL(n),o=(i,l)=>{var c;l==="date"&&e();const d=Array.isArray(n.defaultValue)?n.defaultValue:[n.defaultValue,n.defaultValue];let u=i.map((m,h)=>{const _=Nl(n.value)?n.value[h]:d[h];return Ym(m,_)});if(u[1].getTime()<u[0].getTime()&&(u=[u[0],u[0]]),u.some(n.disabledTime)&&(u=i.map((m,h)=>Ym(m,d[h])),u.some(n.disabledTime))){a.value=u;return}(c=n["onUpdate:value"])==null||c.call(n,u,l)};return()=>{const i=Ps(),l=Mo(Za({},zr(n,e1)),{type:"date",value:a.value,"onUpdate:value":o}),c=Mo(Za({},zr(n,n1)),{showTimeHeader:!0,value:a.value,"onUpdate:value":n["onUpdate:value"],onClickTitle:s});return v("div",{class:`${i}-date-time-range`},[v(t1,l,null),r.value&&v(a1,c,null)])}}const Rxe=[...fL,...n1,...e1];var hL=oi(xxe,Rxe);const wxe=el()(["range","open","appendToBody","clearable","confirm","disabled","editable","multiple","partialUpdate","showHour","showMinute","showSecond","showTimeHeader","showTimePanel","showWeekNumber","use12h"]),LC={date:"YYYY-MM-DD",datetime:"YYYY-MM-DD HH:mm:ss",year:"YYYY",month:"YYYY-MM",time:"HH:mm:ss",week:"w"};function _L(t,{slots:n}){const a=t.type||"date",e=t.format||LC[a]||LC.date,s=Mo(Za({},G2e(t,wxe)),{type:a,format:e});return v(wC,zr(s,wC.props),Za({content:r=>{if(s.range){const o=a==="time"?a1:a==="datetime"?hL:t1;return pn(o,zr(Za(Za({},s),r),o.props))}else{const o=a==="time"?Ku:a==="datetime"?mL:Yh;return pn(o,zr(Za(Za({},s),r),o.props))}},"icon-calendar":()=>a==="time"?v(axe,null,null):v(cL,null,null)},n))}const Mxe={locale:sL,install:t=>{t.component("DatePicker",_L)}};var gL=Object.assign(_L,Mxe,{Calendar:Yh,CalendarRange:t1,TimePanel:Ku,TimeRange:a1,DateTime:mL,DateTimeRange:hL});const Lxe={components:{DatePicker:gL},props:{confirmText:{type:String,default:""},placeholder:{type:String,default:""},value:{type:Array,default:()=>[]}},emits:["change"],methods:{handleChange(t){this.$emit("change",t)}}},Dxe={class:"date-picker"};function Pxe(t,n,a,e,s,r){const o=H("DatePicker");return p(),g("div",Dxe,[v(o,{range:"",confirm:"",clearable:!1,editable:!1,"confirm-text":a.confirmText,placeholder:a.placeholder,value:a.value,onChange:r.handleChange},null,8,["confirm-text","placeholder","value","onChange"])])}const bL=G(Lxe,[["render",Pxe],["__file","/app/app/javascript/dashboard/components/ui/DateRangePicker.vue"]]),kxe=t=>t?t<60?`${t}s`:t<3600?`${Math.floor(t/60)}m`:t<86400?`${Math.floor(t/3600)}h`:`${Math.floor(t/86400)}d`:"",qa={1:{id:1,period:"day"},2:{id:2,period:"week"},3:{id:3,period:"month"},4:{id:4,period:"year"}},hs={DAY:{id:"DAY",period:"day",translationKey:"REPORT.GROUPING_OPTIONS.DAY"},WEEK:{id:"WEEK",period:"week",translationKey:"REPORT.GROUPING_OPTIONS.WEEK"},MONTH:{id:"MONTH",period:"month",translationKey:"REPORT.GROUPING_OPTIONS.MONTH"},YEAR:{id:"YEAR",period:"year",translationKey:"REPORT.GROUPING_OPTIONS.YEAR"}},Dl={LAST_7_DAYS:{id:"LAST_7_DAYS",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_7_DAYS",offset:6,groupByOptions:[hs.DAY]},LAST_30_DAYS:{id:"LAST_30_DAYS",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_30_DAYS",offset:29,groupByOptions:[hs.DAY,hs.WEEK]},LAST_3_MONTHS:{id:"LAST_3_MONTHS",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_3_MONTHS",offset:89,groupByOptions:[hs.DAY,hs.WEEK,hs.MONTH]},LAST_6_MONTHS:{id:"LAST_6_MONTHS",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_6_MONTHS",offset:179,groupByOptions:[hs.WEEK,hs.MONTH]},LAST_YEAR:{id:"LAST_YEAR",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_YEAR",offset:364,groupByOptions:[hs.WEEK,hs.MONTH]},CUSTOM_DATE_RANGE:{id:"CUSTOM_DATE_RANGE",translationKey:"REPORT.DATE_RANGE_OPTIONS.CUSTOM_DATE_RANGE",offset:null,groupByOptions:[hs.DAY,hs.WEEK,hs.MONTH,hs.YEAR]}},DC='Inter,-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif',Bxe={type:"bar",backgroundColor:"rgb(31, 147, 255)"},vL=t=>({datasets:[Bxe],scales:{x:{ticks:{fontFamily:DC},grid:{drawOnChartArea:!1}},y:{type:"linear",position:"left",ticks:{fontFamily:DC,beginAtZero:!0,stepSize:1,callback:t},grid:{drawOnChartArea:!1}}}}),uc=vL((t,n,a)=>!n||n===a.length-1?t:""),ab=vL((t,n,a)=>!n||n===a.length-1?kxe(t):""),PC={conversations_count:uc,incoming_messages_count:uc,outgoing_messages_count:uc,avg_first_response_time:ab,reply_time:ab,avg_resolution_time:ab,resolutions_count:uc,bot_resolutions_count:uc,bot_handoffs_count:uc},sb={open:"OPEN",unattended:"UNATTENDED",unassigned:"UNASSIGNED",pending:"PENDING",online:"ONLINE",busy:"BUSY",offline:"OFFLINE"},Fxe={__name:"DateRange",emits:["onRangeChange"],setup(t,{expose:n,emit:a}){n();const e=a,{t:s}=Q(),r=S(()=>Object.values(Dl).map(d=>({...d,name:s(d.translationKey)}))),o=P(Object.values(Dl)[0].id),i=S({get(){return r.value.find(d=>d.id===o.value)},set(d){o.value=d.id}}),c={emit:e,t:s,options:r,selectedId:o,selectedOption:i,updateRange:d=>{i.value=d,e("onRangeChange",d)},ref:P,computed:S,get useI18n(){return Q},get DATE_RANGE_OPTIONS(){return Dl}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}},Uxe={class:"multiselect-wrap--small"};function $xe(t,n,a,e,s,r){const o=H("multiselect");return p(),g("div",Uxe,[v(o,{modelValue:e.selectedOption,"onUpdate:modelValue":n[0]||(n[0]=i=>e.selectedOption=i),class:"no-margin","track-by":"id",label:"name",placeholder:t.$t("FORMS.MULTISELECT.SELECT_ONE"),"selected-label":"","select-label":t.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"",options:e.options,searchable:!1,"allow-empty":!1,onSelect:e.updateRange},null,8,["modelValue","placeholder","select-label","options"])])}const Gxe=G(Fxe,[["render",$xe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/Filters/DateRange.vue"]]),Vxe={name:"ReportsFiltersDateGroupBy",props:{validGroupOptions:{type:Array,default:()=>[hs.DAY]},selectedOption:{type:Object,default:()=>hs.DAY}},emits:["onGroupingChange"],data(){return{currentSelectedFilter:null}},computed:{translatedOptions(){return this.validGroupOptions.map(t=>({...t,groupBy:this.$t(t.translationKey)}))}},watch:{selectedOption:{handler(){this.currentSelectedFilter={...this.selectedOption,groupBy:this.$t(this.selectedOption.translationKey)}},immediate:!0}},methods:{changeFilterSelection(t){this.groupByOptions=this.$emit("onGroupingChange",t)}}},Hxe={class:"multiselect-wrap--small"},jxe={"aria-hidden":"true",class:"hidden"};function Wxe(t,n,a,e,s,r){const o=H("multiselect");return p(),g("div",Hxe,[f("p",jxe,C(t.$t("REPORT.GROUP_BY_FILTER_DROPDOWN_LABEL")),1),v(o,{modelValue:s.currentSelectedFilter,"onUpdate:modelValue":n[0]||(n[0]=i=>s.currentSelectedFilter=i),class:"no-margin","track-by":"id",label:"groupBy",placeholder:t.$t("REPORT.GROUP_BY_FILTER_DROPDOWN_LABEL"),options:r.translatedOptions,"allow-empty":!1,"show-labels":!1,onSelect:r.changeFilterSelection},null,8,["modelValue","placeholder","options","onSelect"])])}const zxe=G(Vxe,[["render",Wxe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/Filters/DateGroupBy.vue"]]),Yxe={name:"ReportsFiltersAgents",emits:["agentsFilterSelection"],data(){return{selectedOptions:[]}},computed:{..._t({options:"agents/getAgents"})},mounted(){this.$store.dispatch("agents/get")},methods:{handleInput(){this.$emit("agentsFilterSelection",this.selectedOptions)}}},Kxe={class:"multiselect-wrap--small"};function Xxe(t,n,a,e,s,r){const o=H("multiselect");return p(),g("div",Kxe,[v(o,{modelValue:s.selectedOptions,"onUpdate:modelValue":[n[0]||(n[0]=i=>s.selectedOptions=i),r.handleInput],class:"no-margin",options:t.options,"track-by":"id",label:"name",multiple:"","close-on-select":!1,"clear-on-select":!1,"hide-selected":"",placeholder:t.$t("CSAT_REPORTS.FILTERS.AGENTS.PLACEHOLDER"),"selected-label":"","select-label":t.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":t.$t("FORMS.MULTISELECT.ENTER_TO_REMOVE")},null,8,["modelValue","options","placeholder","select-label","deselect-label","onUpdate:modelValue"])])}const qxe=G(Yxe,[["render",Xxe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/Filters/Agents.vue"]]),Zxe={name:"ReportsFiltersLabels",emits:["labelsFilterSelection"],data(){return{selectedOption:null}},computed:{..._t({options:"labels/getLabels"})},mounted(){this.$store.dispatch("labels/get")},methods:{handleInput(){this.$emit("labelsFilterSelection",this.selectedOption)}}},Qxe={class:"multiselect-wrap--small"},Jxe={class:"flex items-center min-w-0 gap-2"},eRe={class:"my-0 text-n-slate-12"},tRe={class:"flex items-center gap-2"},nRe={class:"my-0 text-n-slate-12 truncate min-w-0"};function aRe(t,n,a,e,s,r){const o=H("multiselect");return p(),g("div",Qxe,[v(o,{modelValue:s.selectedOption,"onUpdate:modelValue":[n[0]||(n[0]=i=>s.selectedOption=i),r.handleInput],class:"no-margin",placeholder:t.$t("LABEL_REPORTS.FILTER_DROPDOWN_LABEL"),label:"title","track-by":"id",options:t.options,"option-height":24,"show-labels":!1},{singleLabel:z(i=>[f("div",Jxe,[f("div",{style:nn({backgroundColor:i.option.color}),class:"w-5 h-5 rounded-full"},null,4),f("span",eRe,C(i.option.title),1)])]),option:z(i=>[f("div",tRe,[f("div",{style:nn({backgroundColor:i.option.color}),class:"flex-shrink-0 w-5 h-5 border border-solid rounded-full border-n-weak"},null,4),f("span",nRe,C(i.option.title),1)])]),_:1},8,["modelValue","placeholder","options","onUpdate:modelValue"])])}const sRe=G(Zxe,[["render",aRe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/Filters/Labels.vue"]]),oRe={name:"ReportsFiltersInboxes",emits:["inboxFilterSelection"],data(){return{selectedOption:null}},computed:{..._t({options:"inboxes/getInboxes"})},mounted(){this.$store.dispatch("inboxes/get")},methods:{handleInput(){this.$emit("inboxFilterSelection",this.selectedOption)}}},rRe={class:"multiselect-wrap--small"};function iRe(t,n,a,e,s,r){const o=H("multiselect");return p(),g("div",rRe,[v(o,{modelValue:s.selectedOption,"onUpdate:modelValue":[n[0]||(n[0]=i=>s.selectedOption=i),r.handleInput],class:"no-margin",placeholder:t.$t("INBOX_REPORTS.FILTER_DROPDOWN_LABEL"),label:"name","track-by":"id",options:t.options,"option-height":24,"show-labels":!1},null,8,["modelValue","placeholder","options","onUpdate:modelValue"])])}const lRe=G(oRe,[["render",iRe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/Filters/Inboxes.vue"]]),cRe={name:"ReportsFiltersTeams",emits:["teamFilterSelection"],data(){return{selectedOption:null}},computed:{..._t({options:"teams/getTeams"})},mounted(){this.$store.dispatch("teams/get")},methods:{handleInput(){this.$emit("teamFilterSelection",this.selectedOption)}}},dRe={class:"multiselect-wrap--small"};function uRe(t,n,a,e,s,r){const o=H("multiselect");return p(),g("div",dRe,[v(o,{modelValue:s.selectedOption,"onUpdate:modelValue":[n[0]||(n[0]=i=>s.selectedOption=i),r.handleInput],class:"no-margin",placeholder:t.$t("TEAM_REPORTS.FILTER_DROPDOWN_LABEL"),label:"name","track-by":"id",options:t.options,"option-height":24,"show-labels":!1},null,8,["modelValue","placeholder","options","onUpdate:modelValue"])])}const pRe=G(cRe,[["render",uRe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/Filters/Teams.vue"]]),fRe={name:"ReportFiltersRatings",emits:["ratingFilterSelection"],data(){return{selectedOption:null,options:ur.reverse().map(n=>({...n,label:this.$t(n.translationKey)}))}},methods:{handleInput(t){this.$emit("ratingFilterSelection",t)}}},mRe={class:"multiselect-wrap--small"};function hRe(t,n,a,e,s,r){const o=H("multiselect");return p(),g("div",mRe,[v(o,{modelValue:s.selectedOption,"onUpdate:modelValue":[n[0]||(n[0]=i=>s.selectedOption=i),r.handleInput],class:"no-margin","option-height":24,placeholder:t.$t("FORMS.MULTISELECT.SELECT_ONE"),options:s.options,"show-labels":!1,"track-by":"value",label:"label"},null,8,["modelValue","placeholder","options","onUpdate:modelValue"])])}const _Re=G(fRe,[["render",hRe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/Filters/Ratings.vue"]]),gRe={components:{WootDateRangePicker:bL,ReportsFiltersDateRange:Gxe,ReportsFiltersDateGroupBy:zxe,ReportsFiltersAgents:qxe,ReportsFiltersLabels:sRe,ReportsFiltersInboxes:lRe,ReportsFiltersTeams:pRe,ReportsFiltersRatings:_Re,ToggleSwitch:mo},props:{showGroupByFilter:{type:Boolean,default:!1},showAgentsFilter:{type:Boolean,default:!1},showLabelsFilter:{type:Boolean,default:!1},showInboxFilter:{type:Boolean,default:!1},showRatingFilter:{type:Boolean,default:!1},showTeamFilter:{type:Boolean,default:!1},showBusinessHoursSwitch:{type:Boolean,default:!0}},emits:["filterChange"],data(){return{selectedDateRange:Dl.LAST_7_DAYS,selectedGroupByFilter:null,selectedLabel:null,selectedInbox:null,selectedTeam:null,selectedRating:null,selectedAgents:[],customDateRange:[new Date,new Date],businessHoursSelected:!1}},computed:{isDateRangeSelected(){return this.selectedDateRange.id===Dl.CUSTOM_DATE_RANGE.id},isGroupByPossible(){return this.selectedDateRange.id!==Dl.LAST_7_DAYS.id},to(){return this.isDateRangeSelected?jf(this.customDateRange[1]):jf(new Date)},from(){if(this.isDateRangeSelected)return Hf(this.customDateRange[0]);const{offset:t}=this.selectedDateRange,n=Ko(new Date,t);return Hf(n)},validGroupOptions(){return this.selectedDateRange.groupByOptions},validGroupBy(){return this.selectedGroupByFilter?this.validGroupOptions.map(n=>n.id).includes(this.selectedGroupByFilter.id)?this.selectedGroupByFilter:this.validGroupOptions[0]:this.validGroupOptions[0]}},mounted(){this.emitChange()},methods:{emitChange(){const{from:t,to:n,selectedGroupByFilter:a,businessHoursSelected:e,selectedAgents:s,selectedLabel:r,selectedInbox:o,selectedTeam:i,selectedRating:l}=this;this.$emit("filterChange",{from:t,to:n,groupBy:a,businessHours:e,selectedAgents:s,selectedLabel:r,selectedInbox:o,selectedTeam:i,selectedRating:l})},onDateRangeChange(t){this.selectedDateRange=t,this.selectedGroupByFilter=this.validGroupBy,this.emitChange()},onCustomDateRangeChange(t){this.customDateRange=t,this.selectedGroupByFilter=this.validGroupBy,this.emitChange()},onGroupingChange(t){this.selectedGroupByFilter=t,this.emitChange()},handleAgentsFilterSelection(t){this.selectedAgents=t,this.emitChange()},handleLabelsFilterSelection(t){this.selectedLabel=t,this.emitChange()},handleInboxFilterSelection(t){this.selectedInbox=t,this.emitChange()},handleTeamFilterSelection(t){this.selectedTeam=t,this.emitChange()},handleRatingFilterSelection(t){this.selectedRating=t,this.emitChange()}}},bRe={class:"flex flex-col justify-between gap-3 md:flex-row"},vRe={class:"w-full grid gap-y-2 gap-x-1.5 grid-cols-[repeat(auto-fill,minmax(250px,1fr))]"},ERe={key:0,class:"flex items-center"},SRe={class:"mx-2 text-sm whitespace-nowrap"};function TRe(t,n,a,e,s,r){const o=H("ReportsFiltersDateRange"),i=H("WootDateRangePicker"),l=H("ReportsFiltersDateGroupBy"),c=H("ReportsFiltersAgents"),d=H("ReportsFiltersLabels"),u=H("ReportsFiltersTeams"),m=H("ReportsFiltersInboxes"),h=H("ReportsFiltersRatings"),_=H("ToggleSwitch");return p(),g("div",bRe,[f("div",vRe,[v(o,{onOnRangeChange:r.onDateRangeChange},null,8,["onOnRangeChange"]),r.isDateRangeSelected?(p(),L(i,{key:0,"show-range":"",class:"no-margin auto-width",value:s.customDateRange,"confirm-text":t.$t("REPORT.CUSTOM_DATE_RANGE.CONFIRM"),placeholder:t.$t("REPORT.CUSTOM_DATE_RANGE.PLACEHOLDER"),onChange:r.onCustomDateRangeChange},null,8,["value","confirm-text","placeholder","onChange"])):O("v-if",!0),a.showGroupByFilter&&r.isGroupByPossible?(p(),L(l,{key:1,"valid-group-options":r.validGroupOptions,"selected-option":s.selectedGroupByFilter,onOnGroupingChange:r.onGroupingChange},null,8,["valid-group-options","selected-option","onOnGroupingChange"])):O("v-if",!0),a.showAgentsFilter?(p(),L(c,{key:2,onAgentsFilterSelection:r.handleAgentsFilterSelection},null,8,["onAgentsFilterSelection"])):O("v-if",!0),a.showLabelsFilter?(p(),L(d,{key:3,onLabelsFilterSelection:r.handleLabelsFilterSelection},null,8,["onLabelsFilterSelection"])):O("v-if",!0),a.showTeamFilter?(p(),L(u,{key:4,onTeamFilterSelection:r.handleTeamFilterSelection},null,8,["onTeamFilterSelection"])):O("v-if",!0),a.showInboxFilter?(p(),L(m,{key:5,onInboxFilterSelection:r.handleInboxFilterSelection},null,8,["onInboxFilterSelection"])):O("v-if",!0),a.showRatingFilter?(p(),L(h,{key:6,onRatingFilterSelection:r.handleRatingFilterSelection},null,8,["onRatingFilterSelection"])):O("v-if",!0)]),a.showBusinessHoursSwitch?(p(),g("div",ERe,[f("span",SRe,C(t.$t("REPORT.BUSINESS_HOURS")),1),f("span",null,[v(_,{modelValue:s.businessHoursSelected,"onUpdate:modelValue":n[0]||(n[0]=E=>s.businessHoursSelected=E),onChange:r.emitChange},null,8,["modelValue","onChange"])])])):O("v-if",!0)])}const Xh=G(gRe,[["render",TRe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/FilterSelector.vue"]]);function Qv(t="getAccountSummary",n="getAccountSummaryFetchingStatus"){const a=le(t),e=le(n),s=i=>{if(!a.value.previous[i])return 0;const l=a.value[i]-a.value.previous[i];return Math.round(l/a.value.previous[i]*100)},r=i=>["avg_first_response_time","avg_resolution_time","reply_time"].includes(i);return{calculateTrend:s,isAverageMetricType:r,displayMetric:i=>r(i)?$f(a.value[i]):Number(a.value[i]||"").toLocaleString(),fetchingStatus:e}}const ARe={__name:"ChartStats",props:{metric:{type:Object,default:()=>({})},accountSummaryKey:{type:String,default:"getAccountSummary"},summaryFetchingKey:{type:String,default:"getAccountSummaryFetchingStatus"}},setup(t,{expose:n}){n();const a=t,{t:e}=Q(),{calculateTrend:s,displayMetric:r,isAverageMetricType:o,fetchingStatus:i}=Qv(a.accountSummaryKey,a.summaryFetchingKey),c={props:a,t:e,calculateTrend:s,displayMetric:r,isAverageMetricType:o,fetchingStatus:i,trendColor:(d,u)=>o(u)?d>0?"border-n-ruby-9 text-n-ruby-9":"border-n-teal-10 text-n-teal-10":d<0?"border-n-ruby-9 text-n-ruby-9":"border-n-teal-10 text-n-teal-10",get useReportMetrics(){return Qv},Spinner:$n,get STATUS(){return v4},get useI18n(){return Q}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}},yRe={class:"text-n-slate-11"},IRe={class:"text-sm"},CRe={class:"flex items-end text-n-slate-12"},ORe={key:0},NRe={key:1,class:"text-n-ruby-10 text-sm"},xRe={key:2,class:"text-xl font-medium"},RRe={key:3,class:"text-xs ml-4 flex items-center mb-0.5"};function wRe(t,n,a,e,s,r){return p(),g("div",yRe,[f("span",IRe,C(a.metric.NAME),1),f("div",CRe,[e.fetchingStatus===e.STATUS.FETCHING?(p(),g("div",ORe,[v(e.Spinner)])):e.fetchingStatus===e.STATUS.FAILED?(p(),g("div",NRe,C(e.t("REPORT.SUMMARY_FETCHING_FAILED")),1)):e.fetchingStatus===e.STATUS.FINISHED?(p(),g("div",xRe,C(e.displayMetric(a.metric.KEY)),1)):O("v-if",!0),a.metric.trend&&e.fetchingStatus===e.STATUS.FINISHED?(p(),g("div",RRe,[a.metric.trend<0?(p(),g("div",{key:0,class:oe(["h-0 w-0 border-x-4 medium border-x-transparent border-t-[8px] mr-1",e.trendColor(a.metric.trend,a.metric.KEY)])},null,2)):(p(),g("div",{key:1,class:oe(["h-0 w-0 border-x-4 medium border-x-transparent border-b-[8px] mr-1",e.trendColor(a.metric.trend,a.metric.KEY)])},null,2)),f("span",{class:oe(["font-medium",e.trendColor(a.metric.trend,a.metric.KEY)])},C(e.calculateTrend(a.metric.KEY))+"% ",3)])):O("v-if",!0)])])}const MRe=G(ARe,[["render",wRe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/ChartElements/ChartStats.vue"]]),LRe={components:{ChartStats:MRe,BarChart:H2},props:{groupBy:{type:Object,default:()=>({})},accountSummaryKey:{type:String,default:"getAccountSummary"},summaryFetchingKey:{type:String,default:"getAccountSummaryFetchingStatus"},reportKeys:{type:Object,default:()=>({CONVERSATIONS:"conversations_count",INCOMING_MESSAGES:"incoming_messages_count",OUTGOING_MESSAGES:"outgoing_messages_count",FIRST_RESPONSE_TIME:"avg_first_response_time",RESOLUTION_TIME:"avg_resolution_time",RESOLUTION_COUNT:"resolutions_count",REPLY_TIME:"reply_time"})}},setup(t){const{calculateTrend:n,isAverageMetricType:a}=Qv(t.accountSummaryKey);return{calculateTrend:n,isAverageMetricType:a}},computed:{..._t({accountReport:"getAccountReports"}),metrics(){const t=Object.keys(this.reportKeys),n={FIRST_RESPONSE_TIME:this.$t("REPORT.METRICS.FIRST_RESPONSE_TIME.INFO_TEXT"),RESOLUTION_TIME:this.$t("REPORT.METRICS.RESOLUTION_TIME.INFO_TEXT")};return t.map(a=>({NAME:this.$t(`REPORT.METRICS.${a}.NAME`),KEY:this.reportKeys[a],DESC:this.$t(`REPORT.METRICS.${a}.DESC`),INFO_TEXT:n[a],TOOLTIP_TEXT:`REPORT.METRICS.${a}.TOOLTIP_TEXT`,trend:this.calculateTrend(this.reportKeys[a])}))}},methods:{getCollection(t){if(!this.accountReport.data[t.KEY])return{};const n=this.accountReport.data[t.KEY],a=n.map(s=>{var r,o,i;if(((r=this.groupBy)==null?void 0:r.period)===qa[2].period){let l=new Date(Ic(s.timestamp));const c=l.getDate()-l.getDay(),d=c+6,u=new Date(l.setDate(c)),m=new Date(l.setDate(d));return`${Mn(u,"dd-MMM")} - ${Mn(m,"dd-MMM")}`}return((o=this.groupBy)==null?void 0:o.period)===qa[3].period?Mn(Ic(s.timestamp),"MMM-yyyy"):((i=this.groupBy)==null?void 0:i.period)===qa[4].period?Mn(Ic(s.timestamp),"yyyy"):Mn(Ic(s.timestamp),"dd-MMM")}),e=PC[t.KEY].datasets.map(s=>{switch(s.type){case"bar":return{...s,yAxisID:"y",label:t.NAME,data:n.map(r=>r.value)};case"line":return{...s,yAxisID:"y",label:this.metrics[0].NAME,data:n.map(r=>r.count)};default:return s}});return{labels:a,datasets:e}},getChartOptions(t){const n={scales:PC[t.KEY].scales};return this.isAverageMetricType(t.KEY)&&(n.plugins={tooltip:{callbacks:{label:({raw:a,dataIndex:e})=>{var s;return this.$t(t.TOOLTIP_TEXT,{metricValue:$f(a||0),conversationCount:((s=this.accountReport.data[t.KEY][e])==null?void 0:s.count)||0})}}}}),n}}},DRe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 px-6 py-5 shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2"},PRe={class:"mt-4 h-72"},kRe={key:1,class:"flex items-center justify-center h-72"},BRe={key:1,class:"text-sm text-n-slate-10"};function FRe(t,n,a,e,s,r){const o=H("ChartStats"),i=H("woot-loading-state"),l=H("BarChart");return p(),g("div",DRe,[(p(!0),g(de,null,Ae(r.metrics,c=>(p(),g("div",{key:c.KEY,class:"p-4 mb-3 rounded-md"},[v(o,{metric:c,"account-summary-key":a.accountSummaryKey,"summary-fetching-key":a.summaryFetchingKey},null,8,["metric","account-summary-key","summary-fetching-key"]),f("div",PRe,[t.accountReport.isFetching[c.KEY]?(p(),L(i,{key:0,class:"text-xs",message:t.$t("REPORT.LOADING_CHART")},null,8,["message"])):(p(),g("div",kRe,[t.accountReport.data[c.KEY].length?(p(),L(l,{key:0,collection:r.getCollection(c),"chart-options":r.getChartOptions(c)},null,8,["collection","chart-options"])):(p(),g("span",BRe,C(t.$t("REPORT.NO_ENOUGH_DATA")),1))]))])]))),128))])}const s1=G(LRe,[["render",FRe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/ReportContainer.vue"]]),URe={__name:"ReportHeader",props:{headerTitle:{required:!0,type:String},headerDescription:{type:String,default:""},hasBackButton:{type:Boolean,default:!1}},setup(t,{expose:n}){n();const a={BackButton:Wl};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},$Re={class:"flex flex-col gap-1 pt-10 pb-5"},GRe={key:0},VRe={class:"flex justify-between w-full gap-5"},HRe={class:"flex flex-col gap-2"},jRe={class:"text-xl font-medium text-n-slate-12"},WRe={key:0,class:"text-n-slate-12 mt-2"},zRe={class:"flex-shrink-0"};function YRe(t,n,a,e,s,r){return p(),g("section",$Re,[a.hasBackButton?(p(),g("div",GRe,[v(e.BackButton,{compact:""})])):O("v-if",!0),f("div",VRe,[f("div",HRe,[f("div",null,[f("span",jRe,C(a.headerTitle),1),a.headerDescription?(p(),g("p",WRe,C(a.headerDescription),1)):O("v-if",!0)])]),f("div",zRe,[qe(t.$slots,"default")])])])}const Ir=G(URe,[["render",YRe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/ReportHeader.vue"]]),KRe={CONVERSATIONS:"conversations_count",INCOMING_MESSAGES:"incoming_messages_count",OUTGOING_MESSAGES:"outgoing_messages_count",FIRST_RESPONSE_TIME:"avg_first_response_time",RESOLUTION_TIME:"avg_resolution_time",RESOLUTION_COUNT:"resolutions_count",REPLY_TIME:"reply_time"},XRe={name:"ConversationReports",components:{ReportHeader:Ir,ReportFilterSelector:Xh,ReportContainer:s1,V4Button:Se},data(){return{from:0,to:0,groupBy:qa[1],businessHours:!1}},methods:{fetchAllData(){this.fetchAccountSummary(),this.fetchChartData()},fetchAccountSummary(){try{this.$store.dispatch("fetchAccountSummary",this.getRequestPayload())}catch{Z(this.$t("REPORT.SUMMARY_FETCHING_FAILED"))}},fetchChartData(){["CONVERSATIONS","INCOMING_MESSAGES","OUTGOING_MESSAGES","FIRST_RESPONSE_TIME","RESOLUTION_TIME","RESOLUTION_COUNT","REPLY_TIME"].forEach(async t=>{try{await this.$store.dispatch("fetchAccountReport",{metric:KRe[t],...this.getRequestPayload()})}catch{Z(this.$t("REPORT.DATA_FETCHING_FAILED"))}})},getRequestPayload(){const{from:t,to:n,groupBy:a,businessHours:e}=this;return{from:t,to:n,groupBy:a==null?void 0:a.period,businessHours:e}},downloadAgentReports(){const{from:t,to:n}=this,a=Kc({type:"agent",to:n,businessHours:this.businessHours});this.$store.dispatch("downloadAgentReports",{from:t,to:n,fileName:a,businessHours:this.businessHours})},onFilterChange({from:t,to:n,groupBy:a,businessHours:e}){this.from=t,this.to=n,this.groupBy=a,this.businessHours=e,this.fetchAllData(),Nt(kc.FILTER_REPORT,{filterValue:{from:t,to:n,groupBy:a,businessHours:e},reportType:"conversations"})}}},qRe={class:"flex flex-col gap-3"};function ZRe(t,n,a,e,s,r){const o=H("V4Button"),i=H("ReportHeader"),l=H("ReportFilterSelector"),c=H("ReportContainer");return p(),g(de,null,[v(i,{"header-title":t.$t("REPORT.HEADER")},{default:z(()=>[v(o,{label:t.$t("REPORT.DOWNLOAD_AGENT_REPORTS"),icon:"i-ph-download-simple",size:"sm",onClick:r.downloadAgentReports},null,8,["label","onClick"])]),_:1},8,["header-title"]),f("div",qRe,[v(l,{"show-agents-filter":!1,"show-group-by-filter":"",onFilterChange:r.onFilterChange},null,8,["onFilterChange"]),v(c,{"group-by":s.groupBy},null,8,["group-by"])])],64)}const QRe=G(XRe,[["render",ZRe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/Index.vue"]]);/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Hi(){return{accessor:(t,n)=>typeof t=="function"?{...n,accessorFn:t}:{...n,accessorKey:t},display:t=>t,group:t=>t}}function Ri(t,n){return typeof t=="function"?t(n):t}function co(t,n){return a=>{n.setState(e=>({...e,[t]:Ri(a,e[t])}))}}function qh(t){return t instanceof Function}function JRe(t){return Array.isArray(t)&&t.every(n=>typeof n=="number")}function ewe(t,n){const a=[],e=s=>{s.forEach(r=>{a.push(r);const o=n(r);o!=null&&o.length&&e(o)})};return e(t),a}function Kt(t,n,a){let e=[],s;return r=>{let o;a.key&&a.debug&&(o=Date.now());const i=t(r);if(!(i.length!==e.length||i.some((d,u)=>e[u]!==d)))return s;e=i;let c;if(a.key&&a.debug&&(c=Date.now()),s=n(...i),a==null||a.onChange==null||a.onChange(s),a.key&&a.debug&&a!=null&&a.debug()){const d=Math.round((Date.now()-o)*100)/100,u=Math.round((Date.now()-c)*100)/100,m=u/16,h=(_,E)=>{for(_=String(_);_.length<E;)_=" "+_;return _};console.info(`%c ${h(u,5)} /${h(d,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*m,120))}deg 100% 31%);`,a==null?void 0:a.key)}return s}}function Xt(t,n,a,e){return{debug:()=>{var s;return(s=t==null?void 0:t.debugAll)!=null?s:t[n]},key:a,onChange:e}}function twe(t,n,a,e){const s=()=>{var o;return(o=r.getValue())!=null?o:t.options.renderFallbackValue},r={id:`${n.id}_${a.id}`,row:n,column:a,getValue:()=>n.getValue(e),renderValue:s,getContext:Kt(()=>[t,a,n,r],(o,i,l,c)=>({table:o,column:i,row:l,cell:c,getValue:c.getValue,renderValue:c.renderValue}),Xt(t.options,"debugCells","cell.getContext"))};return t._features.forEach(o=>{o.createCell==null||o.createCell(r,a,n,t)},{}),r}function nwe(t,n,a,e){var s,r;const i={...t._getDefaultColumnDef(),...n},l=i.accessorKey;let c=(s=(r=i.id)!=null?r:l?typeof String.prototype.replaceAll=="function"?l.replaceAll(".","_"):l.replace(/\./g,"_"):void 0)!=null?s:typeof i.header=="string"?i.header:void 0,d;if(i.accessorFn?d=i.accessorFn:l&&(l.includes(".")?d=m=>{let h=m;for(const E of l.split(".")){var _;h=(_=h)==null?void 0:_[E],h===void 0&&console.warn(`"${E}" in deeply nested key "${l}" returned undefined.`)}return h}:d=m=>m[i.accessorKey]),!c)throw new Error(i.accessorFn?"Columns require an id when using an accessorFn":"Columns require an id when using a non-string header");let u={id:`${String(c)}`,accessorFn:d,parent:e,depth:a,columnDef:i,columns:[],getFlatColumns:Kt(()=>[!0],()=>{var m;return[u,...(m=u.columns)==null?void 0:m.flatMap(h=>h.getFlatColumns())]},Xt(t.options,"debugColumns","column.getFlatColumns")),getLeafColumns:Kt(()=>[t._getOrderColumnsFn()],m=>{var h;if((h=u.columns)!=null&&h.length){let _=u.columns.flatMap(E=>E.getLeafColumns());return m(_)}return[u]},Xt(t.options,"debugColumns","column.getLeafColumns"))};for(const m of t._features)m.createColumn==null||m.createColumn(u,t);return u}const fs="debugHeaders";function kC(t,n,a){var e;let r={id:(e=a.id)!=null?e:n.id,column:n,index:a.index,isPlaceholder:!!a.isPlaceholder,placeholderId:a.placeholderId,depth:a.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const o=[],i=l=>{l.subHeaders&&l.subHeaders.length&&l.subHeaders.map(i),o.push(l)};return i(r),o},getContext:()=>({table:t,header:r,column:n})};return t._features.forEach(o=>{o.createHeader==null||o.createHeader(r,t)}),r}const awe={createTable:t=>{t.getHeaderGroups=Kt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(n,a,e,s)=>{var r,o;const i=(r=e==null?void 0:e.map(u=>a.find(m=>m.id===u)).filter(Boolean))!=null?r:[],l=(o=s==null?void 0:s.map(u=>a.find(m=>m.id===u)).filter(Boolean))!=null?o:[],c=a.filter(u=>!(e!=null&&e.includes(u.id))&&!(s!=null&&s.includes(u.id)));return Jp(n,[...i,...c,...l],t)},Xt(t.options,fs,"getHeaderGroups")),t.getCenterHeaderGroups=Kt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(n,a,e,s)=>(a=a.filter(r=>!(e!=null&&e.includes(r.id))&&!(s!=null&&s.includes(r.id))),Jp(n,a,t,"center")),Xt(t.options,fs,"getCenterHeaderGroups")),t.getLeftHeaderGroups=Kt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left],(n,a,e)=>{var s;const r=(s=e==null?void 0:e.map(o=>a.find(i=>i.id===o)).filter(Boolean))!=null?s:[];return Jp(n,r,t,"left")},Xt(t.options,fs,"getLeftHeaderGroups")),t.getRightHeaderGroups=Kt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.right],(n,a,e)=>{var s;const r=(s=e==null?void 0:e.map(o=>a.find(i=>i.id===o)).filter(Boolean))!=null?s:[];return Jp(n,r,t,"right")},Xt(t.options,fs,"getRightHeaderGroups")),t.getFooterGroups=Kt(()=>[t.getHeaderGroups()],n=>[...n].reverse(),Xt(t.options,fs,"getFooterGroups")),t.getLeftFooterGroups=Kt(()=>[t.getLeftHeaderGroups()],n=>[...n].reverse(),Xt(t.options,fs,"getLeftFooterGroups")),t.getCenterFooterGroups=Kt(()=>[t.getCenterHeaderGroups()],n=>[...n].reverse(),Xt(t.options,fs,"getCenterFooterGroups")),t.getRightFooterGroups=Kt(()=>[t.getRightHeaderGroups()],n=>[...n].reverse(),Xt(t.options,fs,"getRightFooterGroups")),t.getFlatHeaders=Kt(()=>[t.getHeaderGroups()],n=>n.map(a=>a.headers).flat(),Xt(t.options,fs,"getFlatHeaders")),t.getLeftFlatHeaders=Kt(()=>[t.getLeftHeaderGroups()],n=>n.map(a=>a.headers).flat(),Xt(t.options,fs,"getLeftFlatHeaders")),t.getCenterFlatHeaders=Kt(()=>[t.getCenterHeaderGroups()],n=>n.map(a=>a.headers).flat(),Xt(t.options,fs,"getCenterFlatHeaders")),t.getRightFlatHeaders=Kt(()=>[t.getRightHeaderGroups()],n=>n.map(a=>a.headers).flat(),Xt(t.options,fs,"getRightFlatHeaders")),t.getCenterLeafHeaders=Kt(()=>[t.getCenterFlatHeaders()],n=>n.filter(a=>{var e;return!((e=a.subHeaders)!=null&&e.length)}),Xt(t.options,fs,"getCenterLeafHeaders")),t.getLeftLeafHeaders=Kt(()=>[t.getLeftFlatHeaders()],n=>n.filter(a=>{var e;return!((e=a.subHeaders)!=null&&e.length)}),Xt(t.options,fs,"getLeftLeafHeaders")),t.getRightLeafHeaders=Kt(()=>[t.getRightFlatHeaders()],n=>n.filter(a=>{var e;return!((e=a.subHeaders)!=null&&e.length)}),Xt(t.options,fs,"getRightLeafHeaders")),t.getLeafHeaders=Kt(()=>[t.getLeftHeaderGroups(),t.getCenterHeaderGroups(),t.getRightHeaderGroups()],(n,a,e)=>{var s,r,o,i,l,c;return[...(s=(r=n[0])==null?void 0:r.headers)!=null?s:[],...(o=(i=a[0])==null?void 0:i.headers)!=null?o:[],...(l=(c=e[0])==null?void 0:c.headers)!=null?l:[]].map(d=>d.getLeafHeaders()).flat()},Xt(t.options,fs,"getLeafHeaders"))}};function Jp(t,n,a,e){var s,r;let o=0;const i=function(m,h){h===void 0&&(h=1),o=Math.max(o,h),m.filter(_=>_.getIsVisible()).forEach(_=>{var E;(E=_.columns)!=null&&E.length&&i(_.columns,h+1)},0)};i(t);let l=[];const c=(m,h)=>{const _={depth:h,id:[e,`${h}`].filter(Boolean).join("_"),headers:[]},E=[];m.forEach(y=>{const b=[...E].reverse()[0],A=y.column.depth===_.depth;let T,I=!1;if(A&&y.column.parent?T=y.column.parent:(T=y.column,I=!0),b&&(b==null?void 0:b.column)===T)b.subHeaders.push(y);else{const N=kC(a,T,{id:[e,h,T.id,y==null?void 0:y.id].filter(Boolean).join("_"),isPlaceholder:I,placeholderId:I?`${E.filter(x=>x.column===T).length}`:void 0,depth:h,index:E.length});N.subHeaders.push(y),E.push(N)}_.headers.push(y),y.headerGroup=_}),l.push(_),h>0&&c(E,h-1)},d=n.map((m,h)=>kC(a,m,{depth:o,index:h}));c(d,o-1),l.reverse();const u=m=>m.filter(_=>_.column.getIsVisible()).map(_=>{let E=0,y=0,b=[0];_.subHeaders&&_.subHeaders.length?(b=[],u(_.subHeaders).forEach(T=>{let{colSpan:I,rowSpan:N}=T;E+=I,b.push(N)})):E=1;const A=Math.min(...b);return y=y+A,_.colSpan=E,_.rowSpan=y,{colSpan:E,rowSpan:y}});return u((s=(r=l[0])==null?void 0:r.headers)!=null?s:[]),l}const swe=(t,n,a,e,s,r,o)=>{let i={id:n,index:e,original:a,depth:s,parentId:o,_valuesCache:{},_uniqueValuesCache:{},getValue:l=>{if(i._valuesCache.hasOwnProperty(l))return i._valuesCache[l];const c=t.getColumn(l);if(c!=null&&c.accessorFn)return i._valuesCache[l]=c.accessorFn(i.original,e),i._valuesCache[l]},getUniqueValues:l=>{if(i._uniqueValuesCache.hasOwnProperty(l))return i._uniqueValuesCache[l];const c=t.getColumn(l);if(c!=null&&c.accessorFn)return c.columnDef.getUniqueValues?(i._uniqueValuesCache[l]=c.columnDef.getUniqueValues(i.original,e),i._uniqueValuesCache[l]):(i._uniqueValuesCache[l]=[i.getValue(l)],i._uniqueValuesCache[l])},renderValue:l=>{var c;return(c=i.getValue(l))!=null?c:t.options.renderFallbackValue},subRows:[],getLeafRows:()=>ewe(i.subRows,l=>l.subRows),getParentRow:()=>i.parentId?t.getRow(i.parentId,!0):void 0,getParentRows:()=>{let l=[],c=i;for(;;){const d=c.getParentRow();if(!d)break;l.push(d),c=d}return l.reverse()},getAllCells:Kt(()=>[t.getAllLeafColumns()],l=>l.map(c=>twe(t,i,c,c.id)),Xt(t.options,"debugRows","getAllCells")),_getAllCellsByColumnId:Kt(()=>[i.getAllCells()],l=>l.reduce((c,d)=>(c[d.column.id]=d,c),{}),Xt(t.options,"debugRows","getAllCellsByColumnId"))};for(let l=0;l<t._features.length;l++){const c=t._features[l];c==null||c.createRow==null||c.createRow(i,t)}return i},owe={createColumn:(t,n)=>{t._getFacetedRowModel=n.options.getFacetedRowModel&&n.options.getFacetedRowModel(n,t.id),t.getFacetedRowModel=()=>t._getFacetedRowModel?t._getFacetedRowModel():n.getPreFilteredRowModel(),t._getFacetedUniqueValues=n.options.getFacetedUniqueValues&&n.options.getFacetedUniqueValues(n,t.id),t.getFacetedUniqueValues=()=>t._getFacetedUniqueValues?t._getFacetedUniqueValues():new Map,t._getFacetedMinMaxValues=n.options.getFacetedMinMaxValues&&n.options.getFacetedMinMaxValues(n,t.id),t.getFacetedMinMaxValues=()=>{if(t._getFacetedMinMaxValues)return t._getFacetedMinMaxValues()}}},EL=(t,n,a)=>{var e,s;const r=a==null||(e=a.toString())==null?void 0:e.toLowerCase();return!!(!((s=t.getValue(n))==null||(s=s.toString())==null||(s=s.toLowerCase())==null)&&s.includes(r))};EL.autoRemove=t=>Qo(t);const SL=(t,n,a)=>{var e;return!!(!((e=t.getValue(n))==null||(e=e.toString())==null)&&e.includes(a))};SL.autoRemove=t=>Qo(t);const TL=(t,n,a)=>{var e;return((e=t.getValue(n))==null||(e=e.toString())==null?void 0:e.toLowerCase())===(a==null?void 0:a.toLowerCase())};TL.autoRemove=t=>Qo(t);const AL=(t,n,a)=>{var e;return(e=t.getValue(n))==null?void 0:e.includes(a)};AL.autoRemove=t=>Qo(t)||!(t!=null&&t.length);const yL=(t,n,a)=>!a.some(e=>{var s;return!((s=t.getValue(n))!=null&&s.includes(e))});yL.autoRemove=t=>Qo(t)||!(t!=null&&t.length);const IL=(t,n,a)=>a.some(e=>{var s;return(s=t.getValue(n))==null?void 0:s.includes(e)});IL.autoRemove=t=>Qo(t)||!(t!=null&&t.length);const CL=(t,n,a)=>t.getValue(n)===a;CL.autoRemove=t=>Qo(t);const OL=(t,n,a)=>t.getValue(n)==a;OL.autoRemove=t=>Qo(t);const o1=(t,n,a)=>{let[e,s]=a;const r=t.getValue(n);return r>=e&&r<=s};o1.resolveFilterValue=t=>{let[n,a]=t,e=typeof n!="number"?parseFloat(n):n,s=typeof a!="number"?parseFloat(a):a,r=n===null||Number.isNaN(e)?-1/0:e,o=a===null||Number.isNaN(s)?1/0:s;if(r>o){const i=r;r=o,o=i}return[r,o]};o1.autoRemove=t=>Qo(t)||Qo(t[0])&&Qo(t[1]);const Dr={includesString:EL,includesStringSensitive:SL,equalsString:TL,arrIncludes:AL,arrIncludesAll:yL,arrIncludesSome:IL,equals:CL,weakEquals:OL,inNumberRange:o1};function Qo(t){return t==null||t===""}const rwe={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:t=>({columnFilters:[],...t}),getDefaultOptions:t=>({onColumnFiltersChange:co("columnFilters",t),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(t,n)=>{t.getAutoFilterFn=()=>{const a=n.getCoreRowModel().flatRows[0],e=a==null?void 0:a.getValue(t.id);return typeof e=="string"?Dr.includesString:typeof e=="number"?Dr.inNumberRange:typeof e=="boolean"||e!==null&&typeof e=="object"?Dr.equals:Array.isArray(e)?Dr.arrIncludes:Dr.weakEquals},t.getFilterFn=()=>{var a,e;return qh(t.columnDef.filterFn)?t.columnDef.filterFn:t.columnDef.filterFn==="auto"?t.getAutoFilterFn():(a=(e=n.options.filterFns)==null?void 0:e[t.columnDef.filterFn])!=null?a:Dr[t.columnDef.filterFn]},t.getCanFilter=()=>{var a,e,s;return((a=t.columnDef.enableColumnFilter)!=null?a:!0)&&((e=n.options.enableColumnFilters)!=null?e:!0)&&((s=n.options.enableFilters)!=null?s:!0)&&!!t.accessorFn},t.getIsFiltered=()=>t.getFilterIndex()>-1,t.getFilterValue=()=>{var a;return(a=n.getState().columnFilters)==null||(a=a.find(e=>e.id===t.id))==null?void 0:a.value},t.getFilterIndex=()=>{var a,e;return(a=(e=n.getState().columnFilters)==null?void 0:e.findIndex(s=>s.id===t.id))!=null?a:-1},t.setFilterValue=a=>{n.setColumnFilters(e=>{const s=t.getFilterFn(),r=e==null?void 0:e.find(d=>d.id===t.id),o=Ri(a,r?r.value:void 0);if(BC(s,o,t)){var i;return(i=e==null?void 0:e.filter(d=>d.id!==t.id))!=null?i:[]}const l={id:t.id,value:o};if(r){var c;return(c=e==null?void 0:e.map(d=>d.id===t.id?l:d))!=null?c:[]}return e!=null&&e.length?[...e,l]:[l]})}},createRow:(t,n)=>{t.columnFilters={},t.columnFiltersMeta={}},createTable:t=>{t.setColumnFilters=n=>{const a=t.getAllLeafColumns(),e=s=>{var r;return(r=Ri(n,s))==null?void 0:r.filter(o=>{const i=a.find(l=>l.id===o.id);if(i){const l=i.getFilterFn();if(BC(l,o.value,i))return!1}return!0})};t.options.onColumnFiltersChange==null||t.options.onColumnFiltersChange(e)},t.resetColumnFilters=n=>{var a,e;t.setColumnFilters(n?[]:(a=(e=t.initialState)==null?void 0:e.columnFilters)!=null?a:[])},t.getPreFilteredRowModel=()=>t.getCoreRowModel(),t.getFilteredRowModel=()=>(!t._getFilteredRowModel&&t.options.getFilteredRowModel&&(t._getFilteredRowModel=t.options.getFilteredRowModel(t)),t.options.manualFiltering||!t._getFilteredRowModel?t.getPreFilteredRowModel():t._getFilteredRowModel())}};function BC(t,n,a){return(t&&t.autoRemove?t.autoRemove(n,a):!1)||typeof n>"u"||typeof n=="string"&&!n}const iwe=(t,n,a)=>a.reduce((e,s)=>{const r=s.getValue(t);return e+(typeof r=="number"?r:0)},0),lwe=(t,n,a)=>{let e;return a.forEach(s=>{const r=s.getValue(t);r!=null&&(e>r||e===void 0&&r>=r)&&(e=r)}),e},cwe=(t,n,a)=>{let e;return a.forEach(s=>{const r=s.getValue(t);r!=null&&(e<r||e===void 0&&r>=r)&&(e=r)}),e},dwe=(t,n,a)=>{let e,s;return a.forEach(r=>{const o=r.getValue(t);o!=null&&(e===void 0?o>=o&&(e=s=o):(e>o&&(e=o),s<o&&(s=o)))}),[e,s]},uwe=(t,n)=>{let a=0,e=0;if(n.forEach(s=>{let r=s.getValue(t);r!=null&&(r=+r)>=r&&(++a,e+=r)}),a)return e/a},pwe=(t,n)=>{if(!n.length)return;const a=n.map(r=>r.getValue(t));if(!JRe(a))return;if(a.length===1)return a[0];const e=Math.floor(a.length/2),s=a.sort((r,o)=>r-o);return a.length%2!==0?s[e]:(s[e-1]+s[e])/2},fwe=(t,n)=>Array.from(new Set(n.map(a=>a.getValue(t))).values()),mwe=(t,n)=>new Set(n.map(a=>a.getValue(t))).size,hwe=(t,n)=>n.length,ob={sum:iwe,min:lwe,max:cwe,extent:dwe,mean:uwe,median:pwe,unique:fwe,uniqueCount:mwe,count:hwe},_we={getDefaultColumnDef:()=>({aggregatedCell:t=>{var n,a;return(n=(a=t.getValue())==null||a.toString==null?void 0:a.toString())!=null?n:null},aggregationFn:"auto"}),getInitialState:t=>({grouping:[],...t}),getDefaultOptions:t=>({onGroupingChange:co("grouping",t),groupedColumnMode:"reorder"}),createColumn:(t,n)=>{t.toggleGrouping=()=>{n.setGrouping(a=>a!=null&&a.includes(t.id)?a.filter(e=>e!==t.id):[...a??[],t.id])},t.getCanGroup=()=>{var a,e;return((a=t.columnDef.enableGrouping)!=null?a:!0)&&((e=n.options.enableGrouping)!=null?e:!0)&&(!!t.accessorFn||!!t.columnDef.getGroupingValue)},t.getIsGrouped=()=>{var a;return(a=n.getState().grouping)==null?void 0:a.includes(t.id)},t.getGroupedIndex=()=>{var a;return(a=n.getState().grouping)==null?void 0:a.indexOf(t.id)},t.getToggleGroupingHandler=()=>{const a=t.getCanGroup();return()=>{a&&t.toggleGrouping()}},t.getAutoAggregationFn=()=>{const a=n.getCoreRowModel().flatRows[0],e=a==null?void 0:a.getValue(t.id);if(typeof e=="number")return ob.sum;if(Object.prototype.toString.call(e)==="[object Date]")return ob.extent},t.getAggregationFn=()=>{var a,e;if(!t)throw new Error;return qh(t.columnDef.aggregationFn)?t.columnDef.aggregationFn:t.columnDef.aggregationFn==="auto"?t.getAutoAggregationFn():(a=(e=n.options.aggregationFns)==null?void 0:e[t.columnDef.aggregationFn])!=null?a:ob[t.columnDef.aggregationFn]}},createTable:t=>{t.setGrouping=n=>t.options.onGroupingChange==null?void 0:t.options.onGroupingChange(n),t.resetGrouping=n=>{var a,e;t.setGrouping(n?[]:(a=(e=t.initialState)==null?void 0:e.grouping)!=null?a:[])},t.getPreGroupedRowModel=()=>t.getFilteredRowModel(),t.getGroupedRowModel=()=>(!t._getGroupedRowModel&&t.options.getGroupedRowModel&&(t._getGroupedRowModel=t.options.getGroupedRowModel(t)),t.options.manualGrouping||!t._getGroupedRowModel?t.getPreGroupedRowModel():t._getGroupedRowModel())},createRow:(t,n)=>{t.getIsGrouped=()=>!!t.groupingColumnId,t.getGroupingValue=a=>{if(t._groupingValuesCache.hasOwnProperty(a))return t._groupingValuesCache[a];const e=n.getColumn(a);return e!=null&&e.columnDef.getGroupingValue?(t._groupingValuesCache[a]=e.columnDef.getGroupingValue(t.original),t._groupingValuesCache[a]):t.getValue(a)},t._groupingValuesCache={}},createCell:(t,n,a,e)=>{t.getIsGrouped=()=>n.getIsGrouped()&&n.id===a.groupingColumnId,t.getIsPlaceholder=()=>!t.getIsGrouped()&&n.getIsGrouped(),t.getIsAggregated=()=>{var s;return!t.getIsGrouped()&&!t.getIsPlaceholder()&&!!((s=a.subRows)!=null&&s.length)}}};function gwe(t,n,a){if(!(n!=null&&n.length)||!a)return t;const e=t.filter(r=>!n.includes(r.id));return a==="remove"?e:[...n.map(r=>t.find(o=>o.id===r)).filter(Boolean),...e]}const bwe={getInitialState:t=>({columnOrder:[],...t}),getDefaultOptions:t=>({onColumnOrderChange:co("columnOrder",t)}),createColumn:(t,n)=>{t.getIndex=Kt(a=>[Au(n,a)],a=>a.findIndex(e=>e.id===t.id),Xt(n.options,"debugColumns","getIndex")),t.getIsFirstColumn=a=>{var e;return((e=Au(n,a)[0])==null?void 0:e.id)===t.id},t.getIsLastColumn=a=>{var e;const s=Au(n,a);return((e=s[s.length-1])==null?void 0:e.id)===t.id}},createTable:t=>{t.setColumnOrder=n=>t.options.onColumnOrderChange==null?void 0:t.options.onColumnOrderChange(n),t.resetColumnOrder=n=>{var a;t.setColumnOrder(n?[]:(a=t.initialState.columnOrder)!=null?a:[])},t._getOrderColumnsFn=Kt(()=>[t.getState().columnOrder,t.getState().grouping,t.options.groupedColumnMode],(n,a,e)=>s=>{let r=[];if(!(n!=null&&n.length))r=s;else{const o=[...n],i=[...s];for(;i.length&&o.length;){const l=o.shift(),c=i.findIndex(d=>d.id===l);c>-1&&r.push(i.splice(c,1)[0])}r=[...r,...i]}return gwe(r,a,e)},Xt(t.options,"debugTable","_getOrderColumnsFn"))}},rb=()=>({left:[],right:[]}),vwe={getInitialState:t=>({columnPinning:rb(),...t}),getDefaultOptions:t=>({onColumnPinningChange:co("columnPinning",t)}),createColumn:(t,n)=>{t.pin=a=>{const e=t.getLeafColumns().map(s=>s.id).filter(Boolean);n.setColumnPinning(s=>{var r,o;if(a==="right"){var i,l;return{left:((i=s==null?void 0:s.left)!=null?i:[]).filter(u=>!(e!=null&&e.includes(u))),right:[...((l=s==null?void 0:s.right)!=null?l:[]).filter(u=>!(e!=null&&e.includes(u))),...e]}}if(a==="left"){var c,d;return{left:[...((c=s==null?void 0:s.left)!=null?c:[]).filter(u=>!(e!=null&&e.includes(u))),...e],right:((d=s==null?void 0:s.right)!=null?d:[]).filter(u=>!(e!=null&&e.includes(u)))}}return{left:((r=s==null?void 0:s.left)!=null?r:[]).filter(u=>!(e!=null&&e.includes(u))),right:((o=s==null?void 0:s.right)!=null?o:[]).filter(u=>!(e!=null&&e.includes(u)))}})},t.getCanPin=()=>t.getLeafColumns().some(e=>{var s,r,o;return((s=e.columnDef.enablePinning)!=null?s:!0)&&((r=(o=n.options.enableColumnPinning)!=null?o:n.options.enablePinning)!=null?r:!0)}),t.getIsPinned=()=>{const a=t.getLeafColumns().map(i=>i.id),{left:e,right:s}=n.getState().columnPinning,r=a.some(i=>e==null?void 0:e.includes(i)),o=a.some(i=>s==null?void 0:s.includes(i));return r?"left":o?"right":!1},t.getPinnedIndex=()=>{var a,e;const s=t.getIsPinned();return s?(a=(e=n.getState().columnPinning)==null||(e=e[s])==null?void 0:e.indexOf(t.id))!=null?a:-1:0}},createRow:(t,n)=>{t.getCenterVisibleCells=Kt(()=>[t._getAllVisibleCells(),n.getState().columnPinning.left,n.getState().columnPinning.right],(a,e,s)=>{const r=[...e??[],...s??[]];return a.filter(o=>!r.includes(o.column.id))},Xt(n.options,"debugRows","getCenterVisibleCells")),t.getLeftVisibleCells=Kt(()=>[t._getAllVisibleCells(),n.getState().columnPinning.left],(a,e)=>(e??[]).map(r=>a.find(o=>o.column.id===r)).filter(Boolean).map(r=>({...r,position:"left"})),Xt(n.options,"debugRows","getLeftVisibleCells")),t.getRightVisibleCells=Kt(()=>[t._getAllVisibleCells(),n.getState().columnPinning.right],(a,e)=>(e??[]).map(r=>a.find(o=>o.column.id===r)).filter(Boolean).map(r=>({...r,position:"right"})),Xt(n.options,"debugRows","getRightVisibleCells"))},createTable:t=>{t.setColumnPinning=n=>t.options.onColumnPinningChange==null?void 0:t.options.onColumnPinningChange(n),t.resetColumnPinning=n=>{var a,e;return t.setColumnPinning(n?rb():(a=(e=t.initialState)==null?void 0:e.columnPinning)!=null?a:rb())},t.getIsSomeColumnsPinned=n=>{var a;const e=t.getState().columnPinning;if(!n){var s,r;return!!((s=e.left)!=null&&s.length||(r=e.right)!=null&&r.length)}return!!((a=e[n])!=null&&a.length)},t.getLeftLeafColumns=Kt(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left],(n,a)=>(a??[]).map(e=>n.find(s=>s.id===e)).filter(Boolean),Xt(t.options,"debugColumns","getLeftLeafColumns")),t.getRightLeafColumns=Kt(()=>[t.getAllLeafColumns(),t.getState().columnPinning.right],(n,a)=>(a??[]).map(e=>n.find(s=>s.id===e)).filter(Boolean),Xt(t.options,"debugColumns","getRightLeafColumns")),t.getCenterLeafColumns=Kt(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(n,a,e)=>{const s=[...a??[],...e??[]];return n.filter(r=>!s.includes(r.id))},Xt(t.options,"debugColumns","getCenterLeafColumns"))}},ef={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},ib=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),Ewe={getDefaultColumnDef:()=>ef,getInitialState:t=>({columnSizing:{},columnSizingInfo:ib(),...t}),getDefaultOptions:t=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:co("columnSizing",t),onColumnSizingInfoChange:co("columnSizingInfo",t)}),createColumn:(t,n)=>{t.getSize=()=>{var a,e,s;const r=n.getState().columnSizing[t.id];return Math.min(Math.max((a=t.columnDef.minSize)!=null?a:ef.minSize,(e=r??t.columnDef.size)!=null?e:ef.size),(s=t.columnDef.maxSize)!=null?s:ef.maxSize)},t.getStart=Kt(a=>[a,Au(n,a),n.getState().columnSizing],(a,e)=>e.slice(0,t.getIndex(a)).reduce((s,r)=>s+r.getSize(),0),Xt(n.options,"debugColumns","getStart")),t.getAfter=Kt(a=>[a,Au(n,a),n.getState().columnSizing],(a,e)=>e.slice(t.getIndex(a)+1).reduce((s,r)=>s+r.getSize(),0),Xt(n.options,"debugColumns","getAfter")),t.resetSize=()=>{n.setColumnSizing(a=>{let{[t.id]:e,...s}=a;return s})},t.getCanResize=()=>{var a,e;return((a=t.columnDef.enableResizing)!=null?a:!0)&&((e=n.options.enableColumnResizing)!=null?e:!0)},t.getIsResizing=()=>n.getState().columnSizingInfo.isResizingColumn===t.id},createHeader:(t,n)=>{t.getSize=()=>{let a=0;const e=s=>{if(s.subHeaders.length)s.subHeaders.forEach(e);else{var r;a+=(r=s.column.getSize())!=null?r:0}};return e(t),a},t.getStart=()=>{if(t.index>0){const a=t.headerGroup.headers[t.index-1];return a.getStart()+a.getSize()}return 0},t.getResizeHandler=a=>{const e=n.getColumn(t.column.id),s=e==null?void 0:e.getCanResize();return r=>{if(!e||!s||(r.persist==null||r.persist(),lb(r)&&r.touches&&r.touches.length>1))return;const o=t.getSize(),i=t?t.getLeafHeaders().map(b=>[b.column.id,b.column.getSize()]):[[e.id,e.getSize()]],l=lb(r)?Math.round(r.touches[0].clientX):r.clientX,c={},d=(b,A)=>{typeof A=="number"&&(n.setColumnSizingInfo(T=>{var I,N;const x=n.options.columnResizeDirection==="rtl"?-1:1,R=(A-((I=T==null?void 0:T.startOffset)!=null?I:0))*x,M=Math.max(R/((N=T==null?void 0:T.startSize)!=null?N:0),-.999999);return T.columnSizingStart.forEach(w=>{let[D,B]=w;c[D]=Math.round(Math.max(B+B*M,0)*100)/100}),{...T,deltaOffset:R,deltaPercentage:M}}),(n.options.columnResizeMode==="onChange"||b==="end")&&n.setColumnSizing(T=>({...T,...c})))},u=b=>d("move",b),m=b=>{d("end",b),n.setColumnSizingInfo(A=>({...A,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},h=a||typeof document<"u"?document:null,_={moveHandler:b=>u(b.clientX),upHandler:b=>{h==null||h.removeEventListener("mousemove",_.moveHandler),h==null||h.removeEventListener("mouseup",_.upHandler),m(b.clientX)}},E={moveHandler:b=>(b.cancelable&&(b.preventDefault(),b.stopPropagation()),u(b.touches[0].clientX),!1),upHandler:b=>{var A;h==null||h.removeEventListener("touchmove",E.moveHandler),h==null||h.removeEventListener("touchend",E.upHandler),b.cancelable&&(b.preventDefault(),b.stopPropagation()),m((A=b.touches[0])==null?void 0:A.clientX)}},y=Swe()?{passive:!1}:!1;lb(r)?(h==null||h.addEventListener("touchmove",E.moveHandler,y),h==null||h.addEventListener("touchend",E.upHandler,y)):(h==null||h.addEventListener("mousemove",_.moveHandler,y),h==null||h.addEventListener("mouseup",_.upHandler,y)),n.setColumnSizingInfo(b=>({...b,startOffset:l,startSize:o,deltaOffset:0,deltaPercentage:0,columnSizingStart:i,isResizingColumn:e.id}))}}},createTable:t=>{t.setColumnSizing=n=>t.options.onColumnSizingChange==null?void 0:t.options.onColumnSizingChange(n),t.setColumnSizingInfo=n=>t.options.onColumnSizingInfoChange==null?void 0:t.options.onColumnSizingInfoChange(n),t.resetColumnSizing=n=>{var a;t.setColumnSizing(n?{}:(a=t.initialState.columnSizing)!=null?a:{})},t.resetHeaderSizeInfo=n=>{var a;t.setColumnSizingInfo(n?ib():(a=t.initialState.columnSizingInfo)!=null?a:ib())},t.getTotalSize=()=>{var n,a;return(n=(a=t.getHeaderGroups()[0])==null?void 0:a.headers.reduce((e,s)=>e+s.getSize(),0))!=null?n:0},t.getLeftTotalSize=()=>{var n,a;return(n=(a=t.getLeftHeaderGroups()[0])==null?void 0:a.headers.reduce((e,s)=>e+s.getSize(),0))!=null?n:0},t.getCenterTotalSize=()=>{var n,a;return(n=(a=t.getCenterHeaderGroups()[0])==null?void 0:a.headers.reduce((e,s)=>e+s.getSize(),0))!=null?n:0},t.getRightTotalSize=()=>{var n,a;return(n=(a=t.getRightHeaderGroups()[0])==null?void 0:a.headers.reduce((e,s)=>e+s.getSize(),0))!=null?n:0}}};let tf=null;function Swe(){if(typeof tf=="boolean")return tf;let t=!1;try{const n={get passive(){return t=!0,!1}},a=()=>{};window.addEventListener("test",a,n),window.removeEventListener("test",a)}catch{t=!1}return tf=t,tf}function lb(t){return t.type==="touchstart"}const Twe={getInitialState:t=>({columnVisibility:{},...t}),getDefaultOptions:t=>({onColumnVisibilityChange:co("columnVisibility",t)}),createColumn:(t,n)=>{t.toggleVisibility=a=>{t.getCanHide()&&n.setColumnVisibility(e=>({...e,[t.id]:a??!t.getIsVisible()}))},t.getIsVisible=()=>{var a,e;const s=t.columns;return(a=s.length?s.some(r=>r.getIsVisible()):(e=n.getState().columnVisibility)==null?void 0:e[t.id])!=null?a:!0},t.getCanHide=()=>{var a,e;return((a=t.columnDef.enableHiding)!=null?a:!0)&&((e=n.options.enableHiding)!=null?e:!0)},t.getToggleVisibilityHandler=()=>a=>{t.toggleVisibility==null||t.toggleVisibility(a.target.checked)}},createRow:(t,n)=>{t._getAllVisibleCells=Kt(()=>[t.getAllCells(),n.getState().columnVisibility],a=>a.filter(e=>e.column.getIsVisible()),Xt(n.options,"debugRows","_getAllVisibleCells")),t.getVisibleCells=Kt(()=>[t.getLeftVisibleCells(),t.getCenterVisibleCells(),t.getRightVisibleCells()],(a,e,s)=>[...a,...e,...s],Xt(n.options,"debugRows","getVisibleCells"))},createTable:t=>{const n=(a,e)=>Kt(()=>[e(),e().filter(s=>s.getIsVisible()).map(s=>s.id).join("_")],s=>s.filter(r=>r.getIsVisible==null?void 0:r.getIsVisible()),Xt(t.options,"debugColumns",a));t.getVisibleFlatColumns=n("getVisibleFlatColumns",()=>t.getAllFlatColumns()),t.getVisibleLeafColumns=n("getVisibleLeafColumns",()=>t.getAllLeafColumns()),t.getLeftVisibleLeafColumns=n("getLeftVisibleLeafColumns",()=>t.getLeftLeafColumns()),t.getRightVisibleLeafColumns=n("getRightVisibleLeafColumns",()=>t.getRightLeafColumns()),t.getCenterVisibleLeafColumns=n("getCenterVisibleLeafColumns",()=>t.getCenterLeafColumns()),t.setColumnVisibility=a=>t.options.onColumnVisibilityChange==null?void 0:t.options.onColumnVisibilityChange(a),t.resetColumnVisibility=a=>{var e;t.setColumnVisibility(a?{}:(e=t.initialState.columnVisibility)!=null?e:{})},t.toggleAllColumnsVisible=a=>{var e;a=(e=a)!=null?e:!t.getIsAllColumnsVisible(),t.setColumnVisibility(t.getAllLeafColumns().reduce((s,r)=>({...s,[r.id]:a||!(r.getCanHide!=null&&r.getCanHide())}),{}))},t.getIsAllColumnsVisible=()=>!t.getAllLeafColumns().some(a=>!(a.getIsVisible!=null&&a.getIsVisible())),t.getIsSomeColumnsVisible=()=>t.getAllLeafColumns().some(a=>a.getIsVisible==null?void 0:a.getIsVisible()),t.getToggleAllColumnsVisibilityHandler=()=>a=>{var e;t.toggleAllColumnsVisible((e=a.target)==null?void 0:e.checked)}}};function Au(t,n){return n?n==="center"?t.getCenterVisibleLeafColumns():n==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns()}const Awe={createTable:t=>{t._getGlobalFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,"__global__"),t.getGlobalFacetedRowModel=()=>t.options.manualFiltering||!t._getGlobalFacetedRowModel?t.getPreFilteredRowModel():t._getGlobalFacetedRowModel(),t._getGlobalFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,"__global__"),t.getGlobalFacetedUniqueValues=()=>t._getGlobalFacetedUniqueValues?t._getGlobalFacetedUniqueValues():new Map,t._getGlobalFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,"__global__"),t.getGlobalFacetedMinMaxValues=()=>{if(t._getGlobalFacetedMinMaxValues)return t._getGlobalFacetedMinMaxValues()}}},ywe={getInitialState:t=>({globalFilter:void 0,...t}),getDefaultOptions:t=>({onGlobalFilterChange:co("globalFilter",t),globalFilterFn:"auto",getColumnCanGlobalFilter:n=>{var a;const e=(a=t.getCoreRowModel().flatRows[0])==null||(a=a._getAllCellsByColumnId()[n.id])==null?void 0:a.getValue();return typeof e=="string"||typeof e=="number"}}),createColumn:(t,n)=>{t.getCanGlobalFilter=()=>{var a,e,s,r;return((a=t.columnDef.enableGlobalFilter)!=null?a:!0)&&((e=n.options.enableGlobalFilter)!=null?e:!0)&&((s=n.options.enableFilters)!=null?s:!0)&&((r=n.options.getColumnCanGlobalFilter==null?void 0:n.options.getColumnCanGlobalFilter(t))!=null?r:!0)&&!!t.accessorFn}},createTable:t=>{t.getGlobalAutoFilterFn=()=>Dr.includesString,t.getGlobalFilterFn=()=>{var n,a;const{globalFilterFn:e}=t.options;return qh(e)?e:e==="auto"?t.getGlobalAutoFilterFn():(n=(a=t.options.filterFns)==null?void 0:a[e])!=null?n:Dr[e]},t.setGlobalFilter=n=>{t.options.onGlobalFilterChange==null||t.options.onGlobalFilterChange(n)},t.resetGlobalFilter=n=>{t.setGlobalFilter(n?void 0:t.initialState.globalFilter)}}},Iwe={getInitialState:t=>({expanded:{},...t}),getDefaultOptions:t=>({onExpandedChange:co("expanded",t),paginateExpandedRows:!0}),createTable:t=>{let n=!1,a=!1;t._autoResetExpanded=()=>{var e,s;if(!n){t._queue(()=>{n=!0});return}if((e=(s=t.options.autoResetAll)!=null?s:t.options.autoResetExpanded)!=null?e:!t.options.manualExpanding){if(a)return;a=!0,t._queue(()=>{t.resetExpanded(),a=!1})}},t.setExpanded=e=>t.options.onExpandedChange==null?void 0:t.options.onExpandedChange(e),t.toggleAllRowsExpanded=e=>{e??!t.getIsAllRowsExpanded()?t.setExpanded(!0):t.setExpanded({})},t.resetExpanded=e=>{var s,r;t.setExpanded(e?{}:(s=(r=t.initialState)==null?void 0:r.expanded)!=null?s:{})},t.getCanSomeRowsExpand=()=>t.getPrePaginationRowModel().flatRows.some(e=>e.getCanExpand()),t.getToggleAllRowsExpandedHandler=()=>e=>{e.persist==null||e.persist(),t.toggleAllRowsExpanded()},t.getIsSomeRowsExpanded=()=>{const e=t.getState().expanded;return e===!0||Object.values(e).some(Boolean)},t.getIsAllRowsExpanded=()=>{const e=t.getState().expanded;return typeof e=="boolean"?e===!0:!(!Object.keys(e).length||t.getRowModel().flatRows.some(s=>!s.getIsExpanded()))},t.getExpandedDepth=()=>{let e=0;return(t.getState().expanded===!0?Object.keys(t.getRowModel().rowsById):Object.keys(t.getState().expanded)).forEach(r=>{const o=r.split(".");e=Math.max(e,o.length)}),e},t.getPreExpandedRowModel=()=>t.getSortedRowModel(),t.getExpandedRowModel=()=>(!t._getExpandedRowModel&&t.options.getExpandedRowModel&&(t._getExpandedRowModel=t.options.getExpandedRowModel(t)),t.options.manualExpanding||!t._getExpandedRowModel?t.getPreExpandedRowModel():t._getExpandedRowModel())},createRow:(t,n)=>{t.toggleExpanded=a=>{n.setExpanded(e=>{var s;const r=e===!0?!0:!!(e!=null&&e[t.id]);let o={};if(e===!0?Object.keys(n.getRowModel().rowsById).forEach(i=>{o[i]=!0}):o=e,a=(s=a)!=null?s:!r,!r&&a)return{...o,[t.id]:!0};if(r&&!a){const{[t.id]:i,...l}=o;return l}return e})},t.getIsExpanded=()=>{var a;const e=n.getState().expanded;return!!((a=n.options.getIsRowExpanded==null?void 0:n.options.getIsRowExpanded(t))!=null?a:e===!0||e!=null&&e[t.id])},t.getCanExpand=()=>{var a,e,s;return(a=n.options.getRowCanExpand==null?void 0:n.options.getRowCanExpand(t))!=null?a:((e=n.options.enableExpanding)!=null?e:!0)&&!!((s=t.subRows)!=null&&s.length)},t.getIsAllParentsExpanded=()=>{let a=!0,e=t;for(;a&&e.parentId;)e=n.getRow(e.parentId,!0),a=e.getIsExpanded();return a},t.getToggleExpandedHandler=()=>{const a=t.getCanExpand();return()=>{a&&t.toggleExpanded()}}}},Jv=0,eE=10,cb=()=>({pageIndex:Jv,pageSize:eE}),Cwe={getInitialState:t=>({...t,pagination:{...cb(),...t==null?void 0:t.pagination}}),getDefaultOptions:t=>({onPaginationChange:co("pagination",t)}),createTable:t=>{let n=!1,a=!1;t._autoResetPageIndex=()=>{var e,s;if(!n){t._queue(()=>{n=!0});return}if((e=(s=t.options.autoResetAll)!=null?s:t.options.autoResetPageIndex)!=null?e:!t.options.manualPagination){if(a)return;a=!0,t._queue(()=>{t.resetPageIndex(),a=!1})}},t.setPagination=e=>{const s=r=>Ri(e,r);return t.options.onPaginationChange==null?void 0:t.options.onPaginationChange(s)},t.resetPagination=e=>{var s;t.setPagination(e?cb():(s=t.initialState.pagination)!=null?s:cb())},t.setPageIndex=e=>{t.setPagination(s=>{let r=Ri(e,s.pageIndex);const o=typeof t.options.pageCount>"u"||t.options.pageCount===-1?Number.MAX_SAFE_INTEGER:t.options.pageCount-1;return r=Math.max(0,Math.min(r,o)),{...s,pageIndex:r}})},t.resetPageIndex=e=>{var s,r;t.setPageIndex(e?Jv:(s=(r=t.initialState)==null||(r=r.pagination)==null?void 0:r.pageIndex)!=null?s:Jv)},t.resetPageSize=e=>{var s,r;t.setPageSize(e?eE:(s=(r=t.initialState)==null||(r=r.pagination)==null?void 0:r.pageSize)!=null?s:eE)},t.setPageSize=e=>{t.setPagination(s=>{const r=Math.max(1,Ri(e,s.pageSize)),o=s.pageSize*s.pageIndex,i=Math.floor(o/r);return{...s,pageIndex:i,pageSize:r}})},t.setPageCount=e=>t.setPagination(s=>{var r;let o=Ri(e,(r=t.options.pageCount)!=null?r:-1);return typeof o=="number"&&(o=Math.max(-1,o)),{...s,pageCount:o}}),t.getPageOptions=Kt(()=>[t.getPageCount()],e=>{let s=[];return e&&e>0&&(s=[...new Array(e)].fill(null).map((r,o)=>o)),s},Xt(t.options,"debugTable","getPageOptions")),t.getCanPreviousPage=()=>t.getState().pagination.pageIndex>0,t.getCanNextPage=()=>{const{pageIndex:e}=t.getState().pagination,s=t.getPageCount();return s===-1?!0:s===0?!1:e<s-1},t.previousPage=()=>t.setPageIndex(e=>e-1),t.nextPage=()=>t.setPageIndex(e=>e+1),t.firstPage=()=>t.setPageIndex(0),t.lastPage=()=>t.setPageIndex(t.getPageCount()-1),t.getPrePaginationRowModel=()=>t.getExpandedRowModel(),t.getPaginationRowModel=()=>(!t._getPaginationRowModel&&t.options.getPaginationRowModel&&(t._getPaginationRowModel=t.options.getPaginationRowModel(t)),t.options.manualPagination||!t._getPaginationRowModel?t.getPrePaginationRowModel():t._getPaginationRowModel()),t.getPageCount=()=>{var e;return(e=t.options.pageCount)!=null?e:Math.ceil(t.getRowCount()/t.getState().pagination.pageSize)},t.getRowCount=()=>{var e;return(e=t.options.rowCount)!=null?e:t.getPrePaginationRowModel().rows.length}}},db=()=>({top:[],bottom:[]}),Owe={getInitialState:t=>({rowPinning:db(),...t}),getDefaultOptions:t=>({onRowPinningChange:co("rowPinning",t)}),createRow:(t,n)=>{t.pin=(a,e,s)=>{const r=e?t.getLeafRows().map(l=>{let{id:c}=l;return c}):[],o=s?t.getParentRows().map(l=>{let{id:c}=l;return c}):[],i=new Set([...o,t.id,...r]);n.setRowPinning(l=>{var c,d;if(a==="bottom"){var u,m;return{top:((u=l==null?void 0:l.top)!=null?u:[]).filter(E=>!(i!=null&&i.has(E))),bottom:[...((m=l==null?void 0:l.bottom)!=null?m:[]).filter(E=>!(i!=null&&i.has(E))),...Array.from(i)]}}if(a==="top"){var h,_;return{top:[...((h=l==null?void 0:l.top)!=null?h:[]).filter(E=>!(i!=null&&i.has(E))),...Array.from(i)],bottom:((_=l==null?void 0:l.bottom)!=null?_:[]).filter(E=>!(i!=null&&i.has(E)))}}return{top:((c=l==null?void 0:l.top)!=null?c:[]).filter(E=>!(i!=null&&i.has(E))),bottom:((d=l==null?void 0:l.bottom)!=null?d:[]).filter(E=>!(i!=null&&i.has(E)))}})},t.getCanPin=()=>{var a;const{enableRowPinning:e,enablePinning:s}=n.options;return typeof e=="function"?e(t):(a=e??s)!=null?a:!0},t.getIsPinned=()=>{const a=[t.id],{top:e,bottom:s}=n.getState().rowPinning,r=a.some(i=>e==null?void 0:e.includes(i)),o=a.some(i=>s==null?void 0:s.includes(i));return r?"top":o?"bottom":!1},t.getPinnedIndex=()=>{var a,e;const s=t.getIsPinned();if(!s)return-1;const r=(a=s==="top"?n.getTopRows():n.getBottomRows())==null?void 0:a.map(o=>{let{id:i}=o;return i});return(e=r==null?void 0:r.indexOf(t.id))!=null?e:-1}},createTable:t=>{t.setRowPinning=n=>t.options.onRowPinningChange==null?void 0:t.options.onRowPinningChange(n),t.resetRowPinning=n=>{var a,e;return t.setRowPinning(n?db():(a=(e=t.initialState)==null?void 0:e.rowPinning)!=null?a:db())},t.getIsSomeRowsPinned=n=>{var a;const e=t.getState().rowPinning;if(!n){var s,r;return!!((s=e.top)!=null&&s.length||(r=e.bottom)!=null&&r.length)}return!!((a=e[n])!=null&&a.length)},t._getPinnedRows=(n,a,e)=>{var s;return((s=t.options.keepPinnedRows)==null||s?(a??[]).map(o=>{const i=t.getRow(o,!0);return i.getIsAllParentsExpanded()?i:null}):(a??[]).map(o=>n.find(i=>i.id===o))).filter(Boolean).map(o=>({...o,position:e}))},t.getTopRows=Kt(()=>[t.getRowModel().rows,t.getState().rowPinning.top],(n,a)=>t._getPinnedRows(n,a,"top"),Xt(t.options,"debugRows","getTopRows")),t.getBottomRows=Kt(()=>[t.getRowModel().rows,t.getState().rowPinning.bottom],(n,a)=>t._getPinnedRows(n,a,"bottom"),Xt(t.options,"debugRows","getBottomRows")),t.getCenterRows=Kt(()=>[t.getRowModel().rows,t.getState().rowPinning.top,t.getState().rowPinning.bottom],(n,a,e)=>{const s=new Set([...a??[],...e??[]]);return n.filter(r=>!s.has(r.id))},Xt(t.options,"debugRows","getCenterRows"))}},Nwe={getInitialState:t=>({rowSelection:{},...t}),getDefaultOptions:t=>({onRowSelectionChange:co("rowSelection",t),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:t=>{t.setRowSelection=n=>t.options.onRowSelectionChange==null?void 0:t.options.onRowSelectionChange(n),t.resetRowSelection=n=>{var a;return t.setRowSelection(n?{}:(a=t.initialState.rowSelection)!=null?a:{})},t.toggleAllRowsSelected=n=>{t.setRowSelection(a=>{n=typeof n<"u"?n:!t.getIsAllRowsSelected();const e={...a},s=t.getPreGroupedRowModel().flatRows;return n?s.forEach(r=>{r.getCanSelect()&&(e[r.id]=!0)}):s.forEach(r=>{delete e[r.id]}),e})},t.toggleAllPageRowsSelected=n=>t.setRowSelection(a=>{const e=typeof n<"u"?n:!t.getIsAllPageRowsSelected(),s={...a};return t.getRowModel().rows.forEach(r=>{tE(s,r.id,e,!0,t)}),s}),t.getPreSelectedRowModel=()=>t.getCoreRowModel(),t.getSelectedRowModel=Kt(()=>[t.getState().rowSelection,t.getCoreRowModel()],(n,a)=>Object.keys(n).length?ub(t,a):{rows:[],flatRows:[],rowsById:{}},Xt(t.options,"debugTable","getSelectedRowModel")),t.getFilteredSelectedRowModel=Kt(()=>[t.getState().rowSelection,t.getFilteredRowModel()],(n,a)=>Object.keys(n).length?ub(t,a):{rows:[],flatRows:[],rowsById:{}},Xt(t.options,"debugTable","getFilteredSelectedRowModel")),t.getGroupedSelectedRowModel=Kt(()=>[t.getState().rowSelection,t.getSortedRowModel()],(n,a)=>Object.keys(n).length?ub(t,a):{rows:[],flatRows:[],rowsById:{}},Xt(t.options,"debugTable","getGroupedSelectedRowModel")),t.getIsAllRowsSelected=()=>{const n=t.getFilteredRowModel().flatRows,{rowSelection:a}=t.getState();let e=!!(n.length&&Object.keys(a).length);return e&&n.some(s=>s.getCanSelect()&&!a[s.id])&&(e=!1),e},t.getIsAllPageRowsSelected=()=>{const n=t.getPaginationRowModel().flatRows.filter(s=>s.getCanSelect()),{rowSelection:a}=t.getState();let e=!!n.length;return e&&n.some(s=>!a[s.id])&&(e=!1),e},t.getIsSomeRowsSelected=()=>{var n;const a=Object.keys((n=t.getState().rowSelection)!=null?n:{}).length;return a>0&&a<t.getFilteredRowModel().flatRows.length},t.getIsSomePageRowsSelected=()=>{const n=t.getPaginationRowModel().flatRows;return t.getIsAllPageRowsSelected()?!1:n.filter(a=>a.getCanSelect()).some(a=>a.getIsSelected()||a.getIsSomeSelected())},t.getToggleAllRowsSelectedHandler=()=>n=>{t.toggleAllRowsSelected(n.target.checked)},t.getToggleAllPageRowsSelectedHandler=()=>n=>{t.toggleAllPageRowsSelected(n.target.checked)}},createRow:(t,n)=>{t.toggleSelected=(a,e)=>{const s=t.getIsSelected();n.setRowSelection(r=>{var o;if(a=typeof a<"u"?a:!s,t.getCanSelect()&&s===a)return r;const i={...r};return tE(i,t.id,a,(o=e==null?void 0:e.selectChildren)!=null?o:!0,n),i})},t.getIsSelected=()=>{const{rowSelection:a}=n.getState();return r1(t,a)},t.getIsSomeSelected=()=>{const{rowSelection:a}=n.getState();return nE(t,a)==="some"},t.getIsAllSubRowsSelected=()=>{const{rowSelection:a}=n.getState();return nE(t,a)==="all"},t.getCanSelect=()=>{var a;return typeof n.options.enableRowSelection=="function"?n.options.enableRowSelection(t):(a=n.options.enableRowSelection)!=null?a:!0},t.getCanSelectSubRows=()=>{var a;return typeof n.options.enableSubRowSelection=="function"?n.options.enableSubRowSelection(t):(a=n.options.enableSubRowSelection)!=null?a:!0},t.getCanMultiSelect=()=>{var a;return typeof n.options.enableMultiRowSelection=="function"?n.options.enableMultiRowSelection(t):(a=n.options.enableMultiRowSelection)!=null?a:!0},t.getToggleSelectedHandler=()=>{const a=t.getCanSelect();return e=>{var s;a&&t.toggleSelected((s=e.target)==null?void 0:s.checked)}}}},tE=(t,n,a,e,s)=>{var r;const o=s.getRow(n,!0);a?(o.getCanMultiSelect()||Object.keys(t).forEach(i=>delete t[i]),o.getCanSelect()&&(t[n]=!0)):delete t[n],e&&(r=o.subRows)!=null&&r.length&&o.getCanSelectSubRows()&&o.subRows.forEach(i=>tE(t,i.id,a,e,s))};function ub(t,n){const a=t.getState().rowSelection,e=[],s={},r=function(o,i){return o.map(l=>{var c;const d=r1(l,a);if(d&&(e.push(l),s[l.id]=l),(c=l.subRows)!=null&&c.length&&(l={...l,subRows:r(l.subRows)}),d)return l}).filter(Boolean)};return{rows:r(n.rows),flatRows:e,rowsById:s}}function r1(t,n){var a;return(a=n[t.id])!=null?a:!1}function nE(t,n,a){var e;if(!((e=t.subRows)!=null&&e.length))return!1;let s=!0,r=!1;return t.subRows.forEach(o=>{if(!(r&&!s)&&(o.getCanSelect()&&(r1(o,n)?r=!0:s=!1),o.subRows&&o.subRows.length)){const i=nE(o,n);i==="all"?r=!0:(i==="some"&&(r=!0),s=!1)}}),s?"all":r?"some":!1}const aE=/([0-9]+)/gm,xwe=(t,n,a)=>NL(ji(t.getValue(a)).toLowerCase(),ji(n.getValue(a)).toLowerCase()),Rwe=(t,n,a)=>NL(ji(t.getValue(a)),ji(n.getValue(a))),wwe=(t,n,a)=>i1(ji(t.getValue(a)).toLowerCase(),ji(n.getValue(a)).toLowerCase()),Mwe=(t,n,a)=>i1(ji(t.getValue(a)),ji(n.getValue(a))),Lwe=(t,n,a)=>{const e=t.getValue(a),s=n.getValue(a);return e>s?1:e<s?-1:0},Dwe=(t,n,a)=>i1(t.getValue(a),n.getValue(a));function i1(t,n){return t===n?0:t>n?1:-1}function ji(t){return typeof t=="number"?isNaN(t)||t===1/0||t===-1/0?"":String(t):typeof t=="string"?t:""}function NL(t,n){const a=t.split(aE).filter(Boolean),e=n.split(aE).filter(Boolean);for(;a.length&&e.length;){const s=a.shift(),r=e.shift(),o=parseInt(s,10),i=parseInt(r,10),l=[o,i].sort();if(isNaN(l[0])){if(s>r)return 1;if(r>s)return-1;continue}if(isNaN(l[1]))return isNaN(o)?-1:1;if(o>i)return 1;if(i>o)return-1}return a.length-e.length}const Wd={alphanumeric:xwe,alphanumericCaseSensitive:Rwe,text:wwe,textCaseSensitive:Mwe,datetime:Lwe,basic:Dwe},Pwe={getInitialState:t=>({sorting:[],...t}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:t=>({onSortingChange:co("sorting",t),isMultiSortEvent:n=>n.shiftKey}),createColumn:(t,n)=>{t.getAutoSortingFn=()=>{const a=n.getFilteredRowModel().flatRows.slice(10);let e=!1;for(const s of a){const r=s==null?void 0:s.getValue(t.id);if(Object.prototype.toString.call(r)==="[object Date]")return Wd.datetime;if(typeof r=="string"&&(e=!0,r.split(aE).length>1))return Wd.alphanumeric}return e?Wd.text:Wd.basic},t.getAutoSortDir=()=>{const a=n.getFilteredRowModel().flatRows[0];return typeof(a==null?void 0:a.getValue(t.id))=="string"?"asc":"desc"},t.getSortingFn=()=>{var a,e;if(!t)throw new Error;return qh(t.columnDef.sortingFn)?t.columnDef.sortingFn:t.columnDef.sortingFn==="auto"?t.getAutoSortingFn():(a=(e=n.options.sortingFns)==null?void 0:e[t.columnDef.sortingFn])!=null?a:Wd[t.columnDef.sortingFn]},t.toggleSorting=(a,e)=>{const s=t.getNextSortingOrder(),r=typeof a<"u"&&a!==null;n.setSorting(o=>{const i=o==null?void 0:o.find(h=>h.id===t.id),l=o==null?void 0:o.findIndex(h=>h.id===t.id);let c=[],d,u=r?a:s==="desc";if(o!=null&&o.length&&t.getCanMultiSort()&&e?i?d="toggle":d="add":o!=null&&o.length&&l!==o.length-1?d="replace":i?d="toggle":d="replace",d==="toggle"&&(r||s||(d="remove")),d==="add"){var m;c=[...o,{id:t.id,desc:u}],c.splice(0,c.length-((m=n.options.maxMultiSortColCount)!=null?m:Number.MAX_SAFE_INTEGER))}else d==="toggle"?c=o.map(h=>h.id===t.id?{...h,desc:u}:h):d==="remove"?c=o.filter(h=>h.id!==t.id):c=[{id:t.id,desc:u}];return c})},t.getFirstSortDir=()=>{var a,e;return((a=(e=t.columnDef.sortDescFirst)!=null?e:n.options.sortDescFirst)!=null?a:t.getAutoSortDir()==="desc")?"desc":"asc"},t.getNextSortingOrder=a=>{var e,s;const r=t.getFirstSortDir(),o=t.getIsSorted();return o?o!==r&&((e=n.options.enableSortingRemoval)==null||e)&&(!(a&&(s=n.options.enableMultiRemove)!=null)||s)?!1:o==="desc"?"asc":"desc":r},t.getCanSort=()=>{var a,e;return((a=t.columnDef.enableSorting)!=null?a:!0)&&((e=n.options.enableSorting)!=null?e:!0)&&!!t.accessorFn},t.getCanMultiSort=()=>{var a,e;return(a=(e=t.columnDef.enableMultiSort)!=null?e:n.options.enableMultiSort)!=null?a:!!t.accessorFn},t.getIsSorted=()=>{var a;const e=(a=n.getState().sorting)==null?void 0:a.find(s=>s.id===t.id);return e?e.desc?"desc":"asc":!1},t.getSortIndex=()=>{var a,e;return(a=(e=n.getState().sorting)==null?void 0:e.findIndex(s=>s.id===t.id))!=null?a:-1},t.clearSorting=()=>{n.setSorting(a=>a!=null&&a.length?a.filter(e=>e.id!==t.id):[])},t.getToggleSortingHandler=()=>{const a=t.getCanSort();return e=>{a&&(e.persist==null||e.persist(),t.toggleSorting==null||t.toggleSorting(void 0,t.getCanMultiSort()?n.options.isMultiSortEvent==null?void 0:n.options.isMultiSortEvent(e):!1))}}},createTable:t=>{t.setSorting=n=>t.options.onSortingChange==null?void 0:t.options.onSortingChange(n),t.resetSorting=n=>{var a,e;t.setSorting(n?[]:(a=(e=t.initialState)==null?void 0:e.sorting)!=null?a:[])},t.getPreSortedRowModel=()=>t.getGroupedRowModel(),t.getSortedRowModel=()=>(!t._getSortedRowModel&&t.options.getSortedRowModel&&(t._getSortedRowModel=t.options.getSortedRowModel(t)),t.options.manualSorting||!t._getSortedRowModel?t.getPreSortedRowModel():t._getSortedRowModel())}},kwe=[awe,Twe,bwe,vwe,owe,rwe,Awe,ywe,Pwe,_we,Iwe,Cwe,Owe,Nwe,Ewe];function Bwe(t){var n,a;(t.debugAll||t.debugTable)&&console.info("Creating Table Instance...");const e=[...kwe,...(n=t._features)!=null?n:[]];let s={_features:e};const r=s._features.reduce((m,h)=>Object.assign(m,h.getDefaultOptions==null?void 0:h.getDefaultOptions(s)),{}),o=m=>s.options.mergeOptions?s.options.mergeOptions(r,m):{...r,...m};let l={...{},...(a=t.initialState)!=null?a:{}};s._features.forEach(m=>{var h;l=(h=m.getInitialState==null?void 0:m.getInitialState(l))!=null?h:l});const c=[];let d=!1;const u={_features:e,options:{...r,...t},initialState:l,_queue:m=>{c.push(m),d||(d=!0,Promise.resolve().then(()=>{for(;c.length;)c.shift()();d=!1}).catch(h=>setTimeout(()=>{throw h})))},reset:()=>{s.setState(s.initialState)},setOptions:m=>{const h=Ri(m,s.options);s.options=o(h)},getState:()=>s.options.state,setState:m=>{s.options.onStateChange==null||s.options.onStateChange(m)},_getRowId:(m,h,_)=>{var E;return(E=s.options.getRowId==null?void 0:s.options.getRowId(m,h,_))!=null?E:`${_?[_.id,h].join("."):h}`},getCoreRowModel:()=>(s._getCoreRowModel||(s._getCoreRowModel=s.options.getCoreRowModel(s)),s._getCoreRowModel()),getRowModel:()=>s.getPaginationRowModel(),getRow:(m,h)=>{let _=(h?s.getPrePaginationRowModel():s.getRowModel()).rowsById[m];if(!_&&(_=s.getCoreRowModel().rowsById[m],!_))throw new Error(`getRow could not find row with ID: ${m}`);return _},_getDefaultColumnDef:Kt(()=>[s.options.defaultColumn],m=>{var h;return m=(h=m)!=null?h:{},{header:_=>{const E=_.header.column.columnDef;return E.accessorKey?E.accessorKey:E.accessorFn?E.id:null},cell:_=>{var E,y;return(E=(y=_.renderValue())==null||y.toString==null?void 0:y.toString())!=null?E:null},...s._features.reduce((_,E)=>Object.assign(_,E.getDefaultColumnDef==null?void 0:E.getDefaultColumnDef()),{}),...m}},Xt(t,"debugColumns","_getDefaultColumnDef")),_getColumnDefs:()=>s.options.columns,getAllColumns:Kt(()=>[s._getColumnDefs()],m=>{const h=function(_,E,y){return y===void 0&&(y=0),_.map(b=>{const A=nwe(s,b,y,E),T=b;return A.columns=T.columns?h(T.columns,A,y+1):[],A})};return h(m)},Xt(t,"debugColumns","getAllColumns")),getAllFlatColumns:Kt(()=>[s.getAllColumns()],m=>m.flatMap(h=>h.getFlatColumns()),Xt(t,"debugColumns","getAllFlatColumns")),_getAllFlatColumnsById:Kt(()=>[s.getAllFlatColumns()],m=>m.reduce((h,_)=>(h[_.id]=_,h),{}),Xt(t,"debugColumns","getAllFlatColumnsById")),getAllLeafColumns:Kt(()=>[s.getAllColumns(),s._getOrderColumnsFn()],(m,h)=>{let _=m.flatMap(E=>E.getLeafColumns());return h(_)},Xt(t,"debugColumns","getAllLeafColumns")),getColumn:m=>{const h=s._getAllFlatColumnsById()[m];return h||console.error(`[Table] Column with id '${m}' does not exist.`),h}};Object.assign(s,u);for(let m=0;m<s._features.length;m++){const h=s._features[m];h==null||h.createTable==null||h.createTable(s)}return s}function Wi(){return t=>Kt(()=>[t.options.data],n=>{const a={rows:[],flatRows:[],rowsById:{}},e=function(s,r,o){r===void 0&&(r=0);const i=[];for(let c=0;c<s.length;c++){const d=swe(t,t._getRowId(s[c],c,o),s[c],c,r,void 0,o==null?void 0:o.id);if(a.flatRows.push(d),a.rowsById[d.id]=d,i.push(d),t.options.getSubRows){var l;d.originalSubRows=t.options.getSubRows(s[c],c),(l=d.originalSubRows)!=null&&l.length&&(d.subRows=e(d.originalSubRows,r+1,d))}}return i};return a.rows=e(n),a},Xt(t.options,"debugTable","getRowModel",()=>t._autoResetPageIndex()))}function Fwe(t){const n=[],a=e=>{var s;n.push(e),(s=e.subRows)!=null&&s.length&&e.getIsExpanded()&&e.subRows.forEach(a)};return t.rows.forEach(a),{rows:n,flatRows:t.flatRows,rowsById:t.rowsById}}function Km(t){return n=>Kt(()=>[n.getState().pagination,n.getPrePaginationRowModel(),n.options.paginateExpandedRows?void 0:n.getState().expanded],(a,e)=>{if(!e.rows.length)return e;const{pageSize:s,pageIndex:r}=a;let{rows:o,flatRows:i,rowsById:l}=e;const c=s*r,d=c+s;o=o.slice(c,d);let u;n.options.paginateExpandedRows?u={rows:o,flatRows:i,rowsById:l}:u=Fwe({rows:o,flatRows:i,rowsById:l}),u.flatRows=[];const m=h=>{u.flatRows.push(h),h.subRows.length&&h.subRows.forEach(m)};return u.rows.forEach(m),u},Xt(n.options,"debugTable","getPaginationRowModel"))}/**
   * vue-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function nf(){return!0}const Uwe=Symbol("merge-proxy"),$we={get(t,n,a){return n===Uwe?a:t.get(n)},has(t,n){return t.has(n)},set:nf,deleteProperty:nf,getOwnPropertyDescriptor(t,n){return{configurable:!0,enumerable:!0,get(){return t.get(n)},set:nf,deleteProperty:nf}},ownKeys(t){return t.keys()}};function pb(t){return"value"in t?t.value:t}function ou(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return new Proxy({get(e){for(let s=n.length-1;s>=0;s--){const r=pb(n[s])[e];if(r!==void 0)return r}},has(e){for(let s=n.length-1;s>=0;s--)if(e in pb(n[s]))return!0;return!1},keys(){const e=[];for(let s=0;s<n.length;s++)e.push(...Object.keys(pb(n[s])));return[...Array.from(new Set(e))]}},$we)}const Gwe=ei({props:["render","props"],setup:t=>()=>typeof t.render=="function"||typeof t.render=="object"?pn(t.render,t.props):t.render});function FC(t){return ou(t,{data:Sa(t.data)})}function zi(t){const n=H3(t.data),a=ou({state:{},onStateChange:()=>{},renderFallbackValue:null,mergeOptions(r,o){return n?{...r,...o}:ou(r,o)}},n?FC(t):t),e=Bwe(a);if(n){const r=Ff(t.data);je(r,()=>{e.setState(o=>({...o,data:r.value}))},{immediate:!0})}const s=P(e.initialState);return oo(()=>{e.setOptions(r=>{var o;const i=new Proxy({},{get:(l,c)=>s.value[c]});return ou(r,n?FC(t):t,{state:ou(i,(o=t.state)!=null?o:{}),onStateChange:l=>{l instanceof Function?s.value=l(s.value):s.value=l,t.onStateChange==null||t.onStateChange(l)}})})}),e}const Vwe={__name:"SortButton",props:{header:{type:Object,required:!0}},setup(t,{expose:n}){n();const e={sortIconMap:{default:"i-lucide-chevrons-up-down",asc:"i-lucide-chevron-up",desc:"i-lucide-chevron-down"}};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}};function Hwe(t,n,a,e,s,r){return p(),g("span",{class:oe(e.sortIconMap[a.header.column.getIsSorted()||"default"])},null,2)}const jwe=G(Vwe,[["render",Hwe],["__file","/app/app/javascript/dashboard/components/table/SortButton.vue"]]),Wwe={__name:"Table",props:{table:{type:Object,required:!0},fixed:{type:Boolean,default:!1},type:{type:String,default:"relaxed"}},setup(t,{expose:n}){n();const a=t,e=S(()=>a.type==="relaxed"),s=S(()=>e.value?"ltr:first:rounded-bl-lg ltr:first:rounded-tl-lg ltr:last:rounded-br-lg ltr:last:rounded-tr-lg rtl:first:rounded-br-lg rtl:first:rounded-tr-lg rtl:last:rounded-bl-lg rtl:last:rounded-tl-lg":""),r={props:a,isRelaxed:e,headerClass:s,get FlexRender(){return Gwe},SortButton:jwe,computed:S};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},zwe={class:"sticky top-0 z-10 bg-n-slate-1"},Ywe=["onClick"],Kwe={key:0,class:"flex place-items-center gap-1"},Xwe={class:"divide-y divide-n-slate-2"};function qwe(t,n,a,e,s,r){return p(),g("table",{class:oe({"table-fixed":a.fixed})},[f("thead",zwe,[(p(!0),g(de,null,Ae(a.table.getHeaderGroups(),o=>(p(),g("tr",{key:o.id,class:"rounded-xl"},[(p(!0),g(de,null,Ae(o.headers,i=>(p(),g("th",{key:i.id,style:nn({width:`${i.getSize()}px`}),class:oe(["text-left py-3 px-5 font-medium text-sm text-n-slate-12",e.headerClass]),onClick:l=>i.column.getCanSort()&&i.column.toggleSorting()},[i.isPlaceholder?O("v-if",!0):(p(),g("div",Kwe,[v(e.FlexRender,{render:i.column.columnDef.header,props:i.getContext()},null,8,["render","props"]),i.column.getCanSort()?(p(),L(e.SortButton,{key:0,header:i},null,8,["header"])):O("v-if",!0)]))],14,Ywe))),128))]))),128))]),f("tbody",Xwe,[(p(!0),g(de,null,Ae(a.table.getRowModel().rows,o=>(p(),g("tr",{key:o.id},[(p(!0),g(de,null,Ae(o.getVisibleCells(),i=>(p(),g("td",{key:i.id,class:oe(e.isRelaxed?"py-4 px-5":"py-2 px-5")},[v(e.FlexRender,{render:i.column.columnDef.cell,props:i.getContext()},null,8,["render","props"])],2))),128))]))),128))])],2)}const Zh=G(Wwe,[["render",qwe],["__file","/app/app/javascript/dashboard/components/table/Table.vue"]]),Zwe={__name:"SummaryReportLink",props:{row:{type:Object,required:!0}},setup(t,{expose:n}){n();const a=t,e=S(()=>`${a.row.original.type}_reports_show`),s={props:a,routeName:e,computed:S};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}};function Qwe(t,n,a,e,s,r){const o=H("router-link");return p(),L(o,{to:{name:e.routeName,params:{id:a.row.original.id}},class:"text-n-slate-12 hover:underline"},{default:z(()=>[Oe(C(a.row.original.name),1)]),_:1},8,["to"])}const UC=G(Zwe,[["render",Qwe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/SummaryReportLink.vue"]]),Jwe={__name:"SummaryReports",props:{type:{type:String,default:"account"},getterKey:{type:String,default:""},actionKey:{type:String,default:""},summaryKey:{type:String,default:""},fetchItemsKey:{type:String,required:!0}},setup(t,{expose:n}){const a=t,e=Fe(),s=P(0),r=P(0),o=P(!1),i=le([a.getterKey])||[],l=le([a.summaryKey])||[],c=x=>l.value.find(R=>R.id===Number(x))||{},d=Hi(),{t:u}=Q(),m=x=>pn("span",{class:x.getValue()?"":"text-n-slate-12"},x.getValue()),h=S(()=>[d.accessor("name",{header:u(`SUMMARY_REPORTS.${a.type.toUpperCase()}`),width:300,cell:x=>pn(UC,x)}),d.accessor("conversationsCount",{header:u("SUMMARY_REPORTS.CONVERSATIONS"),width:200,cell:m}),d.accessor("avgFirstResponseTime",{header:u("SUMMARY_REPORTS.AVG_FIRST_RESPONSE_TIME"),width:200,cell:m}),d.accessor("avgResolutionTime",{header:u("SUMMARY_REPORTS.AVG_RESOLUTION_TIME"),width:200,cell:m}),d.accessor("avgReplyTime",{header:u("SUMMARY_REPORTS.AVG_REPLY_TIME"),width:200,cell:m}),d.accessor("resolutionsCount",{header:u("SUMMARY_REPORTS.RESOLUTION_COUNT"),width:200,cell:m})]),_=x=>x?$f(x):"--",E=x=>x?x.toLocaleString():"--",y=S(()=>i.value.map(x=>{const R=c(x.id),{conversationsCount:M,avgFirstResponseTime:w,avgResolutionTime:D,avgReplyTime:B,resolvedConversationsCount:k}=R;return{id:x.id,name:x.name??x.title,type:a.type,conversationsCount:E(M),avgFirstResponseTime:_(w),avgReplyTime:_(B),avgResolutionTime:_(D),resolutionsCount:E(k)}})),b=()=>{e.dispatch(a.fetchItemsKey),e.dispatch(a.actionKey,{since:s.value,until:r.value,businessHours:o.value})};Pe(()=>b());const A=x=>{s.value=x.from,r.value=x.to,o.value=x.businessHours,b()},T=zi({get data(){return y.value},get columns(){return h.value},enableSorting:!1,getCoreRowModel:Wi()}),I=()=>{const x={agent:"downloadAgentReports",label:"downloadLabelReports",inbox:"downloadInboxReports",team:"downloadTeamReports"};if(x[a.type]){const R=Kc({type:a.type,to:r.value,businessHours:o.value}),M={from:s.value,to:r.value,fileName:R,businessHours:o.value};e.dispatch(x[a.type],M)}};n({downloadReports:I});const N={props:a,store:e,from:s,to:r,businessHours:o,rowItems:i,reportMetrics:l,getMetrics:c,columnHelper:d,t:u,defaulSpanRender:m,columns:h,renderAvgTime:_,renderCount:E,tableData:y,fetchAllData:b,onFilterChange:A,table:T,downloadReports:I,ReportFilterSelector:Xh,get formatTime(){return $f},get useStore(){return Fe},get useMapGetter(){return le},Table:Zh,get generateFileName(){return Kc},get useVueTable(){return zi},get createColumnHelper(){return Hi},get getCoreRowModel(){return Wi},computed:S,onMounted:Pe,ref:P,h:pn,get useI18n(){return Q},SummaryReportLink:UC};return Object.defineProperty(N,"__isScriptSetup",{enumerable:!1,value:!0}),N}},eMe={class:"flex-1 overflow-auto px-2 py-2 mt-5 shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2"};function tMe(t,n,a,e,s,r){return p(),g(de,null,[v(e.ReportFilterSelector,{onFilterChange:e.onFilterChange}),f("div",eMe,[v(e.Table,{table:e.table},null,8,["table"])])],64)}const Qh=G(Jwe,[["render",tMe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/SummaryReports.vue"]]),nMe={__name:"AgentReportsIndex",setup(t,{expose:n}){n();const a=P(null),s={summarReportsRef:a,onDownloadClick:()=>{a.value.downloadReports()},ref:P,ReportHeader:Ir,SummaryReports:Qh,V4Button:Se};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}};function aMe(t,n,a,e,s,r){return p(),g(de,null,[v(e.ReportHeader,{"header-title":t.$t("AGENT_REPORTS.HEADER"),"header-description":t.$t("AGENT_REPORTS.DESCRIPTION")},{default:z(()=>[v(e.V4Button,{label:t.$t("AGENT_REPORTS.DOWNLOAD_AGENT_REPORTS"),icon:"i-ph-download-simple",size:"sm",onClick:e.onDownloadClick},null,8,["label"])]),_:1},8,["header-title","header-description"]),v(e.SummaryReports,{ref:"summarReportsRef","action-key":"summaryReports/fetchAgentSummaryReports","getter-key":"agents/getAgents","fetch-items-key":"agents/get","summary-key":"summaryReports/getAgentSummaryReports",type:"agent"},null,512)],64)}const sMe=G(nMe,[["render",aMe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/AgentReportsIndex.vue"]]),oMe={__name:"InboxReportsIndex",setup(t,{expose:n}){n();const a=P(null),s={summarReportsRef:a,onDownloadClick:()=>{a.value.downloadReports()},ref:P,ReportHeader:Ir,SummaryReports:Qh,V4Button:Se};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}};function rMe(t,n,a,e,s,r){return p(),g(de,null,[v(e.ReportHeader,{"header-title":t.$t("INBOX_REPORTS.HEADER"),"header-description":t.$t("INBOX_REPORTS.DESCRIPTION")},{default:z(()=>[v(e.V4Button,{label:t.$t("INBOX_REPORTS.DOWNLOAD_INBOX_REPORTS"),icon:"i-ph-download-simple",size:"sm",onClick:e.onDownloadClick},null,8,["label"])]),_:1},8,["header-title","header-description"]),v(e.SummaryReports,{ref:"summarReportsRef","action-key":"summaryReports/fetchInboxSummaryReports","getter-key":"inboxes/getInboxes","fetch-items-key":"inboxes/get","summary-key":"summaryReports/getInboxSummaryReports",type:"inbox"},null,512)],64)}const iMe=G(oMe,[["render",rMe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/InboxReportsIndex.vue"]]),lMe={__name:"TeamReportsIndex",setup(t,{expose:n}){n();const a=P(null),s={summarReportsRef:a,onDownloadClick:()=>{a.value.downloadReports()},ref:P,ReportHeader:Ir,SummaryReports:Qh,V4Button:Se};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}};function cMe(t,n,a,e,s,r){return p(),g(de,null,[v(e.ReportHeader,{"header-title":t.$t("TEAM_REPORTS.HEADER"),"header-description":t.$t("TEAM_REPORTS.DESCRIPTION")},{default:z(()=>[v(e.V4Button,{label:t.$t("TEAM_REPORTS.DOWNLOAD_TEAM_REPORTS"),icon:"i-ph-download-simple",size:"sm",onClick:e.onDownloadClick},null,8,["label"])]),_:1},8,["header-title","header-description"]),v(e.SummaryReports,{ref:"summarReportsRef","action-key":"summaryReports/fetchTeamSummaryReports","getter-key":"teams/getTeams","fetch-items-key":"teams/get","summary-key":"summaryReports/getTeamSummaryReports",type:"team"},null,512)],64)}const dMe=G(lMe,[["render",cMe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/TeamReportsIndex.vue"]]),uMe={__name:"LabelReportsIndex",setup(t,{expose:n}){n();const a=P(null),s={summarReportsRef:a,onDownloadClick:()=>{a.value.downloadReports()},ref:P,ReportHeader:Ir,SummaryReports:Qh,V4Button:Se};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}};function pMe(t,n,a,e,s,r){return p(),g(de,null,[v(e.ReportHeader,{"header-title":t.$t("LABEL_REPORTS.HEADER"),"header-description":t.$t("LABEL_REPORTS.DESCRIPTION")},{default:z(()=>[v(e.V4Button,{label:t.$t("LABEL_REPORTS.DOWNLOAD_LABEL_REPORTS"),icon:"i-ph-download-simple",size:"sm",onClick:e.onDownloadClick},null,8,["label"])]),_:1},8,["header-title","header-description"]),v(e.SummaryReports,{ref:"summarReportsRef","action-key":"summaryReports/fetchLabelSummaryReports","getter-key":"labels/getLabels","fetch-items-key":"labels/get","summary-key":"summaryReports/getLabelSummaryReports",type:"label"},null,512)],64)}const fMe=G(uMe,[["render",pMe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/LabelReportsIndex.vue"]]),mMe=5,hMe={components:{WootDateRangePicker:bL,Avatar:qt,ToggleSwitch:mo},props:{currentFilter:{type:Object,default:()=>null},filterItemsList:{type:Array,default:()=>[]},groupByFilterItemsList:{type:Array,default:()=>[]},type:{type:String,default:"agent"},selectedGroupByFilter:{type:Object,default:()=>{}}},emits:["businessHoursToggle","dateRangeChange","filterChange","groupByFilterChange"],data(){return{currentSelectedFilter:this.currentFilter||null,currentDateRangeSelection:{id:0,name:this.$t("REPORT.DATE_RANGE_OPTIONS.LAST_7_DAYS")},customDateRange:[new Date,new Date],currentSelectedGroupByFilter:null,businessHoursSelected:!1}},computed:{dateRange(){return[{id:0,name:this.$t("REPORT.DATE_RANGE_OPTIONS.LAST_7_DAYS")},{id:1,name:this.$t("REPORT.DATE_RANGE_OPTIONS.LAST_30_DAYS")},{id:2,name:this.$t("REPORT.DATE_RANGE_OPTIONS.LAST_3_MONTHS")},{id:3,name:this.$t("REPORT.DATE_RANGE_OPTIONS.LAST_6_MONTHS")},{id:4,name:this.$t("REPORT.DATE_RANGE_OPTIONS.LAST_YEAR")},{id:5,name:this.$t("REPORT.DATE_RANGE_OPTIONS.CUSTOM_DATE_RANGE")}]},isDateRangeSelected(){return this.currentDateRangeSelection.id===mMe},to(){return this.isDateRangeSelected?this.toCustomDate(this.customDateRange[1]):this.toCustomDate(new Date)},from(){if(this.isDateRangeSelected)return this.fromCustomDate(this.customDateRange[0]);const n={0:6,1:29,2:89,3:179,4:364}[this.currentDateRangeSelection.id],a=Ko(new Date,n);return this.fromCustomDate(a)},multiselectLabel(){return{agent:this.$t("AGENT_REPORTS.FILTER_DROPDOWN_LABEL"),label:this.$t("LABEL_REPORTS.FILTER_DROPDOWN_LABEL"),inbox:this.$t("INBOX_REPORTS.FILTER_DROPDOWN_LABEL"),team:this.$t("TEAM_REPORTS.FILTER_DROPDOWN_LABEL")}[this.type]||this.$t("FORMS.MULTISELECT.SELECT_ONE")},groupBy(){return this.isDateRangeSelected?qa[4].period:{0:qa[1].period,1:qa[2].period,2:qa[3].period,3:qa[3].period,4:qa[4].period}[this.currentDateRangeSelection.id]},notLast7Days(){return this.groupBy!==qa[1].period}},watch:{filterItemsList(t){this.currentSelectedFilter=this.currentFilter?this.currentFilter:t[0],this.changeFilterSelection()},groupByFilterItemsList(){this.currentSelectedGroupByFilter=this.selectedGroupByFilter}},mounted(){this.onDateRangeChange()},methods:{onDateRangeChange(){this.$emit("dateRangeChange",{from:this.from,to:this.to,groupBy:this.groupBy})},onBusinessHoursToggle(){this.$emit("businessHoursToggle",this.businessHoursSelected)},fromCustomDate(t){return Co(os(t))},toCustomDate(t){return Co(yo(t))},changeDateSelection(t){this.currentDateRangeSelection=t,this.onDateRangeChange()},changeFilterSelection(){this.$emit("filterChange",this.currentSelectedFilter)},onChange(t){this.customDateRange=t,this.onDateRangeChange()},changeGroupByFilterSelection(){this.$emit("groupByFilterChange",this.currentSelectedGroupByFilter)}}},_Me={class:"grid grid-cols-1 md:grid-cols-3 gap-y-0.5 gap-x-2"},gMe={key:0,class:"multiselect-wrap--small"},bMe={class:"mb-2 text-xs font-medium"},vMe={class:"flex min-w-0 items-center gap-2"},EMe={class:"my-0 text-n-slate-12 truncate"},SMe={class:"flex items-center gap-2"},TMe={class:"my-0 text-n-slate-12"},AMe={key:1,class:"multiselect-wrap--small"},yMe={class:"mb-2 text-xs font-medium"},IMe={class:"flex items-center min-w-0 gap-2"},CMe={class:"my-0 text-n-slate-12 truncate"},OMe={class:"flex items-center min-w-0 gap-2"},NMe={class:"my-0 text-n-slate-12 truncate"},xMe={key:2,class:"multiselect-wrap--small"},RMe={class:"mb-2 text-xs font-medium"},wMe={class:"multiselect-wrap--small"},MMe={class:"mb-2 text-xs font-medium"},LMe={class:"flex items-center h-10 self-center order-5 md:order-2 md:justify-self-end"},DMe={class:"mr-2 text-sm whitespace-nowrap"},PMe={key:3,class:"order-3 md:order-4"},kMe={class:"mb-2 text-xs font-medium"},BMe={key:4,class:"multiselect-wrap--small order-4 md:order-5"},FMe={class:"mb-2 text-xs font-medium"};function UMe(t,n,a,e,s,r){const o=H("Avatar"),i=H("multiselect"),l=H("ToggleSwitch"),c=H("WootDateRangePicker");return p(),g("div",_Me,[a.type==="agent"?(p(),g("div",gMe,[f("p",bMe,C(t.$t("AGENT_REPORTS.FILTER_DROPDOWN_LABEL")),1),v(i,{modelValue:s.currentSelectedFilter,"onUpdate:modelValue":[n[0]||(n[0]=d=>s.currentSelectedFilter=d),r.changeFilterSelection],placeholder:r.multiselectLabel,label:"name","track-by":"id",options:a.filterItemsList,"option-height":24,"show-labels":!1},{singleLabel:z(d=>[f("div",vMe,[v(o,{src:d.option.thumbnail,status:d.option.availability_status,name:d.option.name,size:22,"hide-offline-status":"","rounded-full":""},null,8,["src","status","name"]),f("span",EMe,C(d.option.name),1)])]),options:z(d=>[f("div",SMe,[v(o,{src:d.option.thumbnail,status:d.option.availability_status,name:d.option.name,size:22,"hide-offline-status":"","rounded-full":""},null,8,["src","status","name"]),f("p",TMe,C(d.option.name),1)])]),_:1},8,["modelValue","placeholder","options","onUpdate:modelValue"])])):a.type==="label"?(p(),g("div",AMe,[f("p",yMe,C(t.$t("LABEL_REPORTS.FILTER_DROPDOWN_LABEL")),1),v(i,{modelValue:s.currentSelectedFilter,"onUpdate:modelValue":[n[1]||(n[1]=d=>s.currentSelectedFilter=d),r.changeFilterSelection],placeholder:r.multiselectLabel,label:"title","track-by":"id",options:a.filterItemsList,"option-height":24,"show-labels":!1},{singleLabel:z(d=>[f("div",IMe,[f("div",{style:nn({backgroundColor:d.option.color}),class:"w-5 h-5 rounded-full"},null,4),f("span",CMe,C(d.option.title),1)])]),option:z(d=>[f("div",OMe,[f("div",{style:nn({backgroundColor:d.option.color}),class:"flex-shrink-0 w-5 h-5 border border-solid rounded-full border-n-weak"},null,4),f("span",NMe,C(d.option.title),1)])]),_:1},8,["modelValue","placeholder","options","onUpdate:modelValue"])])):(p(),g("div",xMe,[f("p",RMe,[a.type==="inbox"?(p(),g(de,{key:0},[Oe(C(t.$t("INBOX_REPORTS.FILTER_DROPDOWN_LABEL")),1)],64)):a.type==="team"?(p(),g(de,{key:1},[Oe(C(t.$t("TEAM_REPORTS.FILTER_DROPDOWN_LABEL")),1)],64)):(p(),g(de,{key:2},[Oe(C(t.$t("FORMS.MULTISELECT.SELECT_ONE")),1)],64))]),v(i,{modelValue:s.currentSelectedFilter,"onUpdate:modelValue":[n[2]||(n[2]=d=>s.currentSelectedFilter=d),r.changeFilterSelection],"track-by":"id",label:"name",placeholder:r.multiselectLabel,"selected-label":"","select-label":t.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"",options:a.filterItemsList,searchable:!1,"allow-empty":!1},null,8,["modelValue","placeholder","select-label","options","onUpdate:modelValue"])])),f("div",wMe,[f("p",MMe,C(t.$t("REPORT.DURATION_FILTER_LABEL")),1),v(i,{modelValue:s.currentDateRangeSelection,"onUpdate:modelValue":n[3]||(n[3]=d=>s.currentDateRangeSelection=d),"track-by":"name",label:"name",placeholder:t.$t("FORMS.MULTISELECT.SELECT_ONE"),"selected-label":"","select-label":t.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"",options:r.dateRange,searchable:!1,"allow-empty":!1,onSelect:r.changeDateSelection},null,8,["modelValue","placeholder","select-label","options","onSelect"])]),f("div",LMe,[f("span",DMe,C(t.$t("REPORT.BUSINESS_HOURS")),1),f("span",null,[v(l,{modelValue:s.businessHoursSelected,"onUpdate:modelValue":n[4]||(n[4]=d=>s.businessHoursSelected=d),onChange:r.onBusinessHoursToggle},null,8,["modelValue","onChange"])])]),r.isDateRangeSelected?(p(),g("div",PMe,[f("p",kMe,C(t.$t("REPORT.CUSTOM_DATE_RANGE.PLACEHOLDER")),1),v(c,{"show-range":"",value:s.customDateRange,"confirm-text":t.$t("REPORT.CUSTOM_DATE_RANGE.CONFIRM"),placeholder:t.$t("REPORT.CUSTOM_DATE_RANGE.PLACEHOLDER"),class:"auto-width",onChange:r.onChange},null,8,["value","confirm-text","placeholder","onChange"])])):O("v-if",!0),r.notLast7Days?(p(),g("div",BMe,[f("p",FMe,C(t.$t("REPORT.GROUP_BY_FILTER_DROPDOWN_LABEL")),1),v(i,{modelValue:s.currentSelectedGroupByFilter,"onUpdate:modelValue":[n[5]||(n[5]=d=>s.currentSelectedGroupByFilter=d),r.changeGroupByFilterSelection],"track-by":"id",label:"groupBy",placeholder:t.$t("REPORT.GROUP_BY_FILTER_DROPDOWN_LABEL"),options:a.groupByFilterItemsList,"allow-empty":!1,"show-labels":!1},null,8,["modelValue","placeholder","options","onUpdate:modelValue"])])):O("v-if",!0)])}const $Me=G(hMe,[["render",UMe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/ReportFilters.vue"]]),zd={DAY:[{id:1,groupByKey:"REPORT.GROUPING_OPTIONS.DAY"}],WEEK:[{id:1,groupByKey:"REPORT.GROUPING_OPTIONS.DAY"},{id:2,groupByKey:"REPORT.GROUPING_OPTIONS.WEEK"}],MONTH:[{id:1,groupByKey:"REPORT.GROUPING_OPTIONS.DAY"},{id:2,groupByKey:"REPORT.GROUPING_OPTIONS.WEEK"},{id:3,groupByKey:"REPORT.GROUPING_OPTIONS.MONTH"}],YEAR:[{id:2,groupByKey:"REPORT.GROUPING_OPTIONS.WEEK"},{id:3,groupByKey:"REPORT.GROUPING_OPTIONS.MONTH"},{id:4,groupByKey:"REPORT.GROUPING_OPTIONS.YEAR"}]},GMe={components:{ReportHeader:Ir,V4Button:Se,ReportFilters:$Me,ReportContainer:s1},props:{type:{type:String,default:"account"},getterKey:{type:String,default:""},actionKey:{type:String,default:""},downloadButtonLabel:{type:String,default:"Download Reports"},reportTitle:{type:String,default:"Download Reports"},hasBackButton:{type:Boolean,default:!1},selectedItem:{type:Object,default:null}},data(){return{from:0,to:0,selectedFilter:this.selectedItem,groupBy:qa[1],groupByfilterItemsList:zd.DAY.map(this.translateOptions),selectedGroupByFilter:null,businessHours:!1}},computed:{filterItemsList(){return this.$store.getters[this.getterKey]||[]},isAgentType(){return this.type==="agent"},reportKeys(){return{CONVERSATIONS:"conversations_count",...!this.isAgentType&&{INCOMING_MESSAGES:"incoming_messages_count"},OUTGOING_MESSAGES:"outgoing_messages_count",FIRST_RESPONSE_TIME:"avg_first_response_time",RESOLUTION_TIME:"avg_resolution_time",RESOLUTION_COUNT:"resolutions_count",REPLY_TIME:"reply_time"}}},mounted(){this.$store.dispatch(this.actionKey)},methods:{fetchAllData(){if(this.selectedFilter){const{from:t,to:n,groupBy:a,businessHours:e}=this;this.$store.dispatch("fetchAccountSummary",{from:t,to:n,type:this.type,id:this.selectedFilter.id,groupBy:a.period,businessHours:e}),this.fetchChartData()}},fetchChartData(){Object.keys(this.reportKeys).forEach(async t=>{try{const{from:n,to:a,groupBy:e,businessHours:s}=this;this.$store.dispatch("fetchAccountReport",{metric:this.reportKeys[t],from:n,to:a,type:this.type,id:this.selectedFilter.id,groupBy:e.period,businessHours:s})}catch{Z(this.$t("REPORT.DATA_FETCHING_FAILED"))}})},downloadReports(){const{from:t,to:n,type:a,businessHours:e}=this,s={agent:"downloadAgentReports",label:"downloadLabelReports",inbox:"downloadInboxReports",team:"downloadTeamReports"};if(s[a]){const r=Kc({type:a,to:n,businessHours:e}),o={from:t,to:n,fileName:r,businessHours:e};this.$store.dispatch(s[a],o)}},onDateRangeChange({from:t,to:n,groupBy:a}){this.from!==0&&this.to!==0&&Nt(kc.FILTER_REPORT,{filterType:"date",reportType:this.type}),this.from=t,this.to=n,this.groupByfilterItemsList=this.fetchFilterItems(a);const e=this.groupByfilterItemsList.filter(s=>s.id===this.groupBy.id);e.length>0?this.selectedGroupByFilter=e[0]:(this.selectedGroupByFilter=this.groupByfilterItemsList[0],this.groupBy=qa[this.selectedGroupByFilter.id]),this.fetchAllData()},onFilterChange(t){t&&(this.selectedFilter=t,this.fetchAllData())},onGroupByFilterChange(t){var n;this.groupBy=qa[t.id],this.fetchAllData(),Nt(kc.FILTER_REPORT,{filterType:"groupBy",filterValue:(n=this.groupBy)==null?void 0:n.period,reportType:this.type})},fetchFilterItems(t){switch(t){case qa[2].period:return zd.WEEK.map(this.translateOptions);case qa[3].period:return zd.MONTH.map(this.translateOptions);case qa[4].period:return zd.YEAR.map(this.translateOptions);default:return zd.DAY.map(this.translateOptions)}},translateOptions(t){return{id:t.id,groupBy:this.$t(t.groupByKey)}},onBusinessHoursToggle(t){this.businessHours=t,this.fetchAllData(),Nt(kc.FILTER_REPORT,{filterType:"businessHours",filterValue:t,reportType:this.type})}}};function VMe(t,n,a,e,s,r){const o=H("V4Button"),i=H("ReportHeader"),l=H("ReportFilters"),c=H("ReportContainer");return p(),g(de,null,[v(i,{"header-title":a.reportTitle,"has-back-button":a.hasBackButton},{default:z(()=>[v(o,{label:a.downloadButtonLabel,icon:"i-ph-download-simple",size:"sm",onClick:r.downloadReports},null,8,["label","onClick"])]),_:1},8,["header-title","has-back-button"]),r.filterItemsList?(p(),L(l,{key:0,type:a.type,"filter-items-list":r.filterItemsList,"group-by-filter-items-list":s.groupByfilterItemsList,"selected-group-by-filter":s.selectedGroupByFilter,"current-filter":s.selectedFilter,onDateRangeChange:r.onDateRangeChange,onFilterChange:r.onFilterChange,onGroupByFilterChange:r.onGroupByFilterChange,onBusinessHoursToggle:r.onBusinessHoursToggle},null,8,["type","filter-items-list","group-by-filter-items-list","selected-group-by-filter","current-filter","onDateRangeChange","onFilterChange","onGroupByFilterChange","onBusinessHoursToggle"])):O("v-if",!0),r.filterItemsList.length?(p(),L(c,{key:1,"group-by":s.groupBy,"report-keys":r.reportKeys},null,8,["group-by","report-keys"])):O("v-if",!0)],64)}const tl=G(GMe,[["render",VMe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/WootReports.vue"]]),HMe={__name:"AgentReportsShow",setup(t,{expose:n}){n();const a=lt(),e=Fe(),s=Jn("agents/getAgentById",a.params.id);Pe(()=>e.dispatch("agents/get"));const r={route:a,store:e,agent:s,onMounted:Pe,get useRoute(){return lt},get useFunctionGetter(){return Jn},get useStore(){return Fe},WootReports:tl,Spinner:$n};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},jMe={key:1,class:"w-full py-20"};function WMe(t,n,a,e,s,r){return e.agent.id?(p(),L(e.WootReports,{key:e.agent.id,type:"agent","getter-key":"agents/getAgents","action-key":"agents/get","selected-item":e.agent,"download-button-label":t.$t("AGENT_REPORTS.DOWNLOAD_AGENT_REPORTS"),"report-title":t.$t("AGENT_REPORTS.HEADER"),"has-back-button":""},null,8,["selected-item","download-button-label","report-title"])):(p(),g("div",jMe,[v(e.Spinner,{class:"mx-auto"})]))}const zMe=G(HMe,[["render",WMe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/AgentReportsShow.vue"]]),YMe={__name:"InboxReportsShow",setup(t,{expose:n}){n();const a=lt(),e=Jn("inboxes/getInboxById",a.params.id),s={route:a,inbox:e,get useRoute(){return lt},get useFunctionGetter(){return Jn},WootReports:tl,Spinner:$n};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}},KMe={key:1,class:"w-full py-20"};function XMe(t,n,a,e,s,r){return e.inbox.id?(p(),L(e.WootReports,{key:e.inbox.id,type:"inbox","getter-key":"inboxes/getInboxes","action-key":"inboxes/get","selected-item":e.inbox,"download-button-label":t.$t("INBOX_REPORTS.DOWNLOAD_INBOX_REPORTS"),"report-title":t.$t("INBOX_REPORTS.HEADER"),"has-back-button":""},null,8,["selected-item","download-button-label","report-title"])):(p(),g("div",KMe,[v(e.Spinner,{class:"mx-auto"})]))}const qMe=G(YMe,[["render",XMe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/InboxReportsShow.vue"]]),ZMe={__name:"TeamReportsShow",setup(t,{expose:n}){n();const a=lt(),e=Jn("teams/getTeamById",a.params.id),s={route:a,team:e,get useRoute(){return lt},get useFunctionGetter(){return Jn},WootReports:tl,Spinner:$n};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}},QMe={key:1,class:"w-full py-20"};function JMe(t,n,a,e,s,r){return e.team.id?(p(),L(e.WootReports,{key:e.team.id,type:"team","getter-key":"teams/getTeams","action-key":"teams/get","selected-item":e.team,"download-button-label":t.$t("TEAM_REPORTS.DOWNLOAD_TEAM_REPORTS"),"report-title":t.$t("TEAM_REPORTS.HEADER"),"has-back-button":""},null,8,["selected-item","download-button-label","report-title"])):(p(),g("div",QMe,[v(e.Spinner,{class:"mx-auto"})]))}const eLe=G(ZMe,[["render",JMe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/TeamReportsShow.vue"]]),tLe={__name:"LabelReportsShow",setup(t,{expose:n}){n();const a=lt(),e=Fe(),s=Jn("labels/getLabelById",a.params.id);Pe(()=>e.dispatch("labels/get"));const r={route:a,store:e,label:s,onMounted:Pe,get useRoute(){return lt},get useFunctionGetter(){return Jn},get useStore(){return Fe},WootReports:tl,Spinner:$n};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},nLe={key:1,class:"w-full py-20"};function aLe(t,n,a,e,s,r){return e.label.id?(p(),L(e.WootReports,{key:e.label.id,type:"label","getter-key":"labels/getLabels","action-key":"labels/get","selected-item":e.label,"download-button-label":t.$t("LABEL_REPORTS.DOWNLOAD_LABEL_REPORTS"),"report-title":t.$t("LABEL_REPORTS.HEADER"),"has-back-button":""},null,8,["selected-item","download-button-label","report-title"])):(p(),g("div",nLe,[v(e.Spinner,{class:"mx-auto"})]))}const sLe=G(tLe,[["render",aLe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/LabelReportsShow.vue"]]),oLe={__name:"AgentReports",setup(t,{expose:n}){n();const a={WootReports:tl};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}};function rLe(t,n,a,e,s,r){return p(),L(e.WootReports,{key:"agent-reports",type:"agent","getter-key":"agents/getAgents","action-key":"agents/get","download-button-label":t.$t("REPORT.DOWNLOAD_AGENT_REPORTS"),"report-title":t.$t("AGENT_REPORTS.HEADER")},null,8,["download-button-label","report-title"])}const iLe=G(oLe,[["render",rLe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/AgentReports.vue"]]),lLe={__name:"InboxReports",setup(t,{expose:n}){n();const a={WootReports:tl};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}};function cLe(t,n,a,e,s,r){return p(),L(e.WootReports,{key:"inbox-reports",type:"inbox","getter-key":"inboxes/getInboxes","action-key":"inboxes/get","download-button-label":t.$t("INBOX_REPORTS.DOWNLOAD_INBOX_REPORTS"),"report-title":t.$t("INBOX_REPORTS.HEADER")},null,8,["download-button-label","report-title"])}const dLe=G(lLe,[["render",cLe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/InboxReports.vue"]]),uLe={__name:"LabelReports",setup(t,{expose:n}){n();const a={WootReports:tl};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}};function pLe(t,n,a,e,s,r){return p(),L(e.WootReports,{key:"label-reports",type:"label","getter-key":"labels/getLabels","action-key":"labels/get","download-button-label":t.$t("LABEL_REPORTS.DOWNLOAD_LABEL_REPORTS"),"report-title":t.$t("LABEL_REPORTS.HEADER")},null,8,["download-button-label","report-title"])}const fLe=G(uLe,[["render",pLe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/LabelReports.vue"]]),mLe={__name:"TeamReports",setup(t,{expose:n}){n();const a={WootReports:tl};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}};function hLe(t,n,a,e,s,r){return p(),L(e.WootReports,{key:"team-reports",type:"team","getter-key":"teams/getTeams","action-key":"teams/get","download-button-label":t.$t("TEAM_REPORTS.DOWNLOAD_TEAM_REPORTS"),"report-title":t.$t("TEAM_REPORTS.HEADER")},null,8,["download-button-label","report-title"])}const _Le=G(mLe,[["render",hLe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/TeamReports.vue"]]),gLe={__name:"ReportMetricCard",props:{label:{type:String,required:!0},value:{type:String,required:!0},infoText:{type:String,required:!0},disabled:{type:Boolean,default:!1}},setup(t,{expose:n}){n();const a={};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},bLe={class:"flex items-center m-0 text-sm font-medium text-n-slate-11"},vLe={"data-test-id":"reportMetricLabel"},ELe={"data-test-id":"reportMetricValue",class:"mt-1 mb-0 text-2xl text-n-slate-12"};function SLe(t,n,a,e,s,r){const o=H("fluent-icon"),i=nt("tooltip");return p(),g("div",{"data-test-id":"reportMetricContainer",class:oe({"grayscale pointer-events-none opacity-30":a.disabled})},[f("h3",bLe,[f("span",vLe,C(a.label),1),ce(v(o,{"data-test-id":"reportMetricInfo",size:"14",icon:"info",class:"text-n-slate-11 my-0 mx-1 mt-0.5"},null,512),[[i,a.infoText]])]),f("h4",ELe,C(a.value),1)],2)}const xL=G(gLe,[["render",SLe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/ReportMetricCard.vue"]]),TLe={components:{BarChart:H2,CsatMetricCard:xL},props:{filters:{type:Object,required:!0}},data(){return{csatRatings:ur}},computed:{..._t({metrics:"csat/getMetrics",ratingPercentage:"csat/getRatingPercentage",satisfactionScore:"csat/getSatisfactionScore",responseRate:"csat/getResponseRate"}),ratingFilterEnabled(){return!!this.filters.rating},chartData(){const t=[...ur].sort((n,a)=>a.value-n.value);return{labels:["Rating"],datasets:t.map(n=>({label:n.emoji,data:[this.ratingPercentage[n.value]],backgroundColor:n.color}))}},responseCount(){return this.metrics.totalResponseCount?this.metrics.totalResponseCount.toLocaleString():"--"},chartOptions(){return{indexAxis:"y",responsive:!0,plugins:{legend:{display:!1},title:{display:!1},tooltip:{enabled:!1}},scales:{x:{display:!1,stacked:!0},y:{display:!1,stacked:!0}}}}},methods:{formatToPercent(t){return t?`${t}%`:"--"},ratingToEmoji(t){return ur.find(n=>n.value===Number(t)).emoji}}},ALe={class:"flex-col lg:flex-row flex flex-wrap mx-0 shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2 px-6 py-8 gap-4"},yLe={key:0,ref:"csatBarChart",class:"w-full md:w-1/2 md:max-w-[50%] flex-1 rtl:[direction:initial]"},ILe={class:"flex items-center m-0 text-xs font-medium md:text-sm text-n-slate-12"},CLe={class:"flex flex-row-reverse justify-end"},OLe={class:"my-0 mx-0.5"},NLe={class:"mt-2 h-6"};function xLe(t,n,a,e,s,r){const o=H("CsatMetricCard"),i=H("BarChart");return p(),g("div",ALe,[v(o,{label:t.$t("CSAT_REPORTS.METRIC.TOTAL_RESPONSES.LABEL"),"info-text":t.$t("CSAT_REPORTS.METRIC.TOTAL_RESPONSES.TOOLTIP"),value:r.responseCount,class:"xs:w-full sm:max-w-[50%] lg:w-1/6 lg:max-w-[16%]"},null,8,["label","info-text","value"]),v(o,{disabled:r.ratingFilterEnabled,label:t.$t("CSAT_REPORTS.METRIC.SATISFACTION_SCORE.LABEL"),"info-text":t.$t("CSAT_REPORTS.METRIC.SATISFACTION_SCORE.TOOLTIP"),value:r.ratingFilterEnabled?"--":r.formatToPercent(t.satisfactionScore),class:"xs:w-full sm:max-w-[50%] lg:w-1/6 lg:max-w-[16%]"},null,8,["disabled","label","info-text","value"]),v(o,{label:t.$t("CSAT_REPORTS.METRIC.RESPONSE_RATE.LABEL"),"info-text":t.$t("CSAT_REPORTS.METRIC.RESPONSE_RATE.TOOLTIP"),value:r.formatToPercent(t.responseRate),class:"xs:w-full sm:max-w-[50%] lg:w-1/6 lg:max-w-[16%]"},null,8,["label","info-text","value"]),t.metrics.totalResponseCount&&!r.ratingFilterEnabled?(p(),g("div",yLe,[f("h3",ILe,[f("div",CLe,[(p(!0),g(de,null,Ae(t.ratingPercentage,(l,c,d)=>(p(),g("div",{key:l+c+d,class:"ltr:pr-4 rtl:pl-4"},[f("span",OLe,C(r.ratingToEmoji(c)),1),f("span",null,C(r.formatToPercent(l)),1)]))),128))])]),f("div",NLe,[v(i,{collection:r.chartData,"chart-options":r.chartOptions},null,8,["collection","chart-options"])])],512)):O("v-if",!0)])}const RLe=G(TLe,[["render",xLe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/CsatMetrics.vue"]]),wLe={__name:"Pagination",props:{table:{type:Object,required:!0},defaultPageSize:{type:Number,default:10},showPageSizeSelector:{type:Boolean,default:!1}},emits:["pageSizeChange"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=[{label:`${r("REPORT.PAGINATION.PER_PAGE_TEMPLATE",{size:10})}`,value:10},{label:`${r("REPORT.PAGINATION.PER_PAGE_TEMPLATE",{size:20})}`,value:20},{label:`${r("REPORT.PAGINATION.PER_PAGE_TEMPLATE",{size:50})}`,value:50},{label:`${r("REPORT.PAGINATION.PER_PAGE_TEMPLATE",{size:100})}`,value:100}],i=(y,b)=>{const A=new Intl.NumberFormat(navigator.language);return Array.from({length:b-y+1},(T,I)=>A.format(y+I))},l=S(()=>e.table.getState().pagination.pageIndex+1),c=S(()=>e.table.getPageCount()),d=S(()=>c.value<=3?i(1,c.value):l.value===1?i(1,3):l.value===c.value?i(c.value-2,c.value):i(l.value-1,l.value+1)),u=S(()=>e.table.getRowCount()),m=S(()=>{const{pagination:y}=e.table.getState();return y.pageIndex*y.pageSize+1}),h=S(()=>{const{pagination:y}=e.table.getState();return Math.min((y.pageIndex+1)*y.pageSize,u.value)}),_=S({get(){return e.table.getState().pagination.pageSize},set(y){e.table.setPageSize(Number(y)),s("pageSizeChange",Number(y))}});Pe(()=>{e.showPageSizeSelector&&e.defaultPageSize&&e.defaultPageSize!==10&&e.table.setPageSize(e.defaultPageSize)});const E={props:e,emit:s,t:r,pageSizeOptions:o,getFormattedPages:i,currentPage:l,totalPages:c,visiblePages:d,total:u,start:m,end:h,currentPageSize:_,computed:S,onMounted:Pe,get useI18n(){return Q},Button:Se,FilterSelect:FS};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}},MLe={class:"flex items-center justify-between"},LLe={class:"flex flex-1 items-center gap-2 justify-between"},DLe={class:"text-sm truncate text-n-slate-11 mb-0"},PLe={class:"flex items-center gap-2"},kLe={class:"isolate inline-flex items-center gap-1.5"};function BLe(t,n,a,e,s,r){return p(),g("div",MLe,[f("div",LLe,[f("p",DLe,C(t.$t("REPORT.PAGINATION.RESULTS",{start:e.start,end:e.end,total:e.total})),1),f("div",PLe,[a.showPageSizeSelector?(p(),L(e.FilterSelect,{key:0,modelValue:e.currentPageSize,"onUpdate:modelValue":n[0]||(n[0]=o=>e.currentPageSize=o),variant:"outline","hide-icon":"",class:"[&>button]:text-n-slate-11 [&>button]:hover:text-n-slate-12 [&>button]:h-6",options:e.pageSizeOptions},null,8,["modelValue"])):O("v-if",!0),f("nav",kLe,[v(e.Button,{icon:"i-lucide-chevrons-left",ghost:"",slate:"",sm:"",class:"!size-6",disabled:!a.table.getCanPreviousPage(),onClick:n[1]||(n[1]=o=>a.table.setPageIndex(0))},null,8,["disabled"]),v(e.Button,{icon:"i-lucide-chevron-left",ghost:"",slate:"",sm:"",class:"!size-6",disabled:!a.table.getCanPreviousPage(),onClick:n[2]||(n[2]=o=>a.table.previousPage())},null,8,["disabled"]),(p(!0),g(de,null,Ae(e.visiblePages,o=>(p(),L(e.Button,{key:o,xs:"",outline:"",color:o==e.currentPage?"blue":"slate",class:"!h-6 min-w-6",onClick:i=>a.table.setPageIndex(o-1)},{default:z(()=>[f("span",{class:oe(["text-center",{"text-n-brand":o==e.currentPage}])},C(o),3)]),_:2},1032,["color","onClick"]))),128)),v(e.Button,{icon:"i-lucide-chevron-right",ghost:"",slate:"",sm:"",class:"!size-6",disabled:!a.table.getCanNextPage(),onClick:n[3]||(n[3]=o=>a.table.nextPage())},null,8,["disabled"]),v(e.Button,{icon:"i-lucide-chevrons-right",ghost:"",slate:"",sm:"",class:"!size-6",disabled:!a.table.getCanNextPage(),onClick:n[4]||(n[4]=o=>a.table.setPageIndex(a.table.getPageCount()-1))},null,8,["disabled"])])])])])}const l1=G(wLe,[["render",BLe],["__file","/app/app/javascript/dashboard/components/table/Pagination.vue"]]),FLe={__name:"UserAvatarWithName",props:{user:{type:Object,default:()=>({})},size:{type:Number,default:20},textClass:{type:String,default:"text-sm text-n-slate-12"}},setup(t,{expose:n}){n();const a={Avatar:qt};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},ULe={class:"flex items-center gap-1.5 text-left"};function $Le(t,n,a,e,s,r){return p(),g("div",ULe,[v(e.Avatar,{src:a.user.thumbnail,size:a.size,name:a.user.name,status:a.user.availability_status,"hide-offline-status":"","rounded-full":""},null,8,["src","size","name","status"]),f("span",{class:oe(["my-0 truncate text-capitalize",a.textClass])},C(a.user.name),3)])}const Df=G(FLe,[["render",$Le],["__file","/app/app/javascript/dashboard/components/widgets/UserAvatarWithName.vue"]]),GLe={__name:"ConversationCell",props:{row:{type:Object,required:!0}},setup(t,{expose:n}){n();const e={routerParams:S(()=>({name:"inbox_conversation",params:{conversation_id:t.row.original.conversationId}})),computed:S};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}},VLe={class:"text-right"},HLe={class:"text-n-slate-11 text-sm"};function jLe(t,n,a,e,s,r){const o=H("router-link"),i=nt("tooltip");return p(),g("div",VLe,[v(o,{to:e.routerParams,class:"hover:underline"},{default:z(()=>[Oe(C(`#${a.row.original.conversationId}`),1)]),_:1},8,["to"]),ce((p(),g("div",HLe,[Oe(C(a.row.original.createdAgo),1)])),[[i,a.row.original.createdAt]])])}const $C=G(GLe,[["render",jLe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/ConversationCell.vue"]]),WLe={__name:"CsatTable",props:{pageIndex:{type:Number,default:0}},emits:["pageChange"],setup(t,{expose:n,emit:a}){n();const e=a,{t:s}=Q(),r=le("csat/getCSATResponses"),o=le("csat/getMetrics"),i=S(()=>r.value.map(_=>({contact:_.contact,assignedAgent:_.assigned_agent,rating:_.rating,feedbackText:_.feedback_message||"---",conversationId:_.conversation_id,createdAgo:kn(_.created_at),createdAt:Bc(_.created_at,"LLL d yyyy, h:mm a")}))),l=_=>{const E=_.getValue()||"---";return pn("span",{class:"line-clamp-5 break-words max-w-full text-n-slate-12",title:E},E)},c=Hi(),d=S(()=>[c.accessor("contact",{header:s("CSAT_REPORTS.TABLE.HEADER.CONTACT_NAME"),width:200,cell:_=>{const{contact:E}=_.row.original;return E?pn(Df,{user:E,class:"max-w-[200px] overflow-hidden"}):"--"}}),c.accessor("assignedAgent",{header:s("CSAT_REPORTS.TABLE.HEADER.AGENT_NAME"),width:200,cell:_=>{const{assignedAgent:E}=_.row.original;return E?pn(Df,{user:E,class:"max-w-[200px] overflow-hidden"}):"--"}}),c.accessor("rating",{header:s("CSAT_REPORTS.TABLE.HEADER.RATING"),align:"center",width:80,cell:_=>{const{rating:E}=_.row.original,[y={}]=ur.filter(b=>b.value===E);return pn("span",{class:y.emoji?"emoji-response text-lg":"text-n-slate-10"},y.emoji||"---")}}),c.accessor("feedbackText",{header:s("CSAT_REPORTS.TABLE.HEADER.FEEDBACK_TEXT"),width:400,cell:l}),c.accessor("conversationId",{header:"",width:100,cell:_=>pn($C,_)})]),u=S(()=>({pageIndex:t.pageIndex,pageSize:25})),m=zi({get data(){return i.value},get columns(){return d.value},manualPagination:!0,enableSorting:!1,getCoreRowModel:Wi(),get rowCount(){return o.value.totalResponseCount},state:{get pagination(){return u.value}},onPaginationChange:_=>{const E=_(u.value);e("pageChange",E.pageIndex)}}),h={emit:e,t:s,csatResponses:r,metrics:o,tableData:i,defaultSpanRender:l,columnHelper:c,columns:d,paginationParams:u,table:m,computed:S,h:pn,get useMapGetter(){return le},get useI18n(){return Q},get messageStamp(){return Bc},get dynamicTime(){return kn},Table:Zh,Pagination:l1,UserAvatarWithName:Df,ConversationCell:$C,get CSAT_RATINGS(){return ur},get useVueTable(){return zi},get createColumnHelper(){return Hi},get getCoreRowModel(){return Wi}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}},zLe={class:"shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2 px-6 py-5"},YLe={key:0,class:"table-pagination"};function KLe(t,n,a,e,s,r){return p(),g("div",zLe,[v(e.Table,{table:e.table,class:"max-h-[calc(100vh-21.875rem)]"},null,8,["table"]),ce(f("div",{class:"h-48 flex items-center justify-center text-n-slate-12 text-sm"},C(t.$t("CSAT_REPORTS.NO_RECORDS")),513),[[En,!e.tableData.length]]),e.metrics.totalResponseCount?(p(),g("div",YLe,[v(e.Pagination,{class:"mt-2",table:e.table},null,8,["table"])])):O("v-if",!0)])}const XLe=G(WLe,[["render",KLe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/CsatTable.vue"]]),qLe={name:"CsatResponses",components:{CsatMetrics:RLe,CsatTable:XLe,ReportFilterSelector:Xh,ReportHeader:Ir,V4Button:Se},data(){return{pageIndex:0,from:0,to:0,userIds:[],inbox:null,team:null,rating:null}},computed:{..._t({accountId:"getCurrentAccountId",isFeatureEnabledOnAccount:"accounts/isFeatureEnabledonAccount"}),requestPayload(){return{from:this.from,to:this.to,user_ids:this.userIds,inbox_id:this.inbox,team_id:this.team,rating:this.rating}},isTeamsEnabled(){return this.isFeatureEnabledOnAccount(this.accountId,pt.TEAM_MANAGEMENT)}},methods:{getAllData(){try{this.$store.dispatch("csat/getMetrics",this.requestPayload),this.getResponses()}catch{Z(this.$t("REPORT.DATA_FETCHING_FAILED"))}},getResponses(){this.$store.dispatch("csat/get",{page:this.pageIndex+1,...this.requestPayload})},downloadReports(){const t="csat";try{this.$store.dispatch("csat/downloadCSATReports",{fileName:Kc({type:t,to:this.to}),...this.requestPayload})}catch{Z(this.$t("REPORT.CSAT_REPORTS.DOWNLOAD_FAILED"))}},onPageNumberChange(t){this.pageIndex=t,this.getResponses()},onFilterChange({from:t,to:n,selectedAgents:a,selectedInbox:e,selectedTeam:s,selectedRating:r}){this.from!==0&&this.to!==0&&Nt(kc.FILTER_REPORT,{filterType:"date",reportType:"csat"}),this.from=t,this.to=n,this.userIds=a.map(o=>o.id),this.inbox=e==null?void 0:e.id,this.team=s==null?void 0:s.id,this.rating=r==null?void 0:r.value,this.getAllData()}}},ZLe={class:"flex flex-col gap-4"};function QLe(t,n,a,e,s,r){const o=H("V4Button"),i=H("ReportHeader"),l=H("ReportFilterSelector"),c=H("CsatMetrics"),d=H("CsatTable");return p(),g(de,null,[v(i,{"header-title":t.$t("CSAT_REPORTS.HEADER")},{default:z(()=>[v(o,{label:t.$t("CSAT_REPORTS.DOWNLOAD"),icon:"i-ph-download-simple",size:"sm",onClick:r.downloadReports},null,8,["label","onClick"])]),_:1},8,["header-title"]),f("div",ZLe,[v(l,{"show-agents-filter":"","show-inbox-filter":"","show-rating-filter":"","show-team-filter":r.isTeamsEnabled,"show-business-hours-switch":!1,onFilterChange:r.onFilterChange},null,8,["show-team-filter","onFilterChange"]),v(c,{filters:r.requestPayload},null,8,["filters"]),v(d,{"page-index":s.pageIndex,onPageChange:r.onPageNumberChange},null,8,["page-index","onPageChange"])])],64)}const JLe=G(qLe,[["render",QLe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/CsatResponses.vue"]]),eDe={__name:"BotMetrics",props:{filters:{type:Object,required:!0}},setup(t,{expose:n}){n();const a=t,e=P("0"),s=P("0"),r=P("0"),o=P("0"),i=d=>d?`${d}%`:"--",l=()=>{!a.filters.to||!a.filters.from||fT.getBotMetrics(a.filters).then(d=>{e.value=d.data.conversation_count.toLocaleString(),s.value=d.data.message_count.toLocaleString(),r.value=d.data.resolution_rate.toString(),o.value=d.data.handoff_rate.toString()})};je(()=>a.filters,l,{deep:!0}),Pe(l);const c={props:a,conversationCount:e,messageCount:s,resolutionRate:r,handoffRate:o,formatToPercent:i,fetchMetrics:l,ref:P,watch:je,onMounted:Pe,ReportMetricCard:xL,get ReportsAPI(){return fT}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}},tDe={class:"flex flex-wrap mx-0 shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2 px-6 py-5"};function nDe(t,n,a,e,s,r){return p(),g("div",tDe,[v(e.ReportMetricCard,{label:t.$t("BOT_REPORTS.METRIC.TOTAL_CONVERSATIONS.LABEL"),"info-text":t.$t("BOT_REPORTS.METRIC.TOTAL_CONVERSATIONS.TOOLTIP"),value:e.conversationCount,class:"flex-1"},null,8,["label","info-text","value"]),v(e.ReportMetricCard,{label:t.$t("BOT_REPORTS.METRIC.TOTAL_RESPONSES.LABEL"),"info-text":t.$t("BOT_REPORTS.METRIC.TOTAL_RESPONSES.TOOLTIP"),value:e.messageCount,class:"flex-1"},null,8,["label","info-text","value"]),v(e.ReportMetricCard,{label:t.$t("BOT_REPORTS.METRIC.RESOLUTION_RATE.LABEL"),"info-text":t.$t("BOT_REPORTS.METRIC.RESOLUTION_RATE.TOOLTIP"),value:e.formatToPercent(e.resolutionRate),class:"flex-1"},null,8,["label","info-text","value"]),v(e.ReportMetricCard,{label:t.$t("BOT_REPORTS.METRIC.HANDOFF_RATE.LABEL"),"info-text":t.$t("BOT_REPORTS.METRIC.HANDOFF_RATE.TOOLTIP"),value:e.formatToPercent(e.handoffRate),class:"flex-1"},null,8,["label","info-text","value"])])}const aDe=G(eDe,[["render",nDe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/BotMetrics.vue"]]),sDe={name:"BotReports",components:{BotMetrics:aDe,ReportHeader:Ir,ReportFilterSelector:Xh,ReportContainer:s1},data(){return{from:0,to:0,groupBy:qa[1],reportKeys:{BOT_RESOLUTION_COUNT:"bot_resolutions_count",BOT_HANDOFF_COUNT:"bot_handoffs_count"},businessHours:!1}},computed:{requestPayload(){return{from:this.from,to:this.to}}},methods:{fetchAllData(){this.fetchBotSummary(),this.fetchChartData()},fetchBotSummary(){try{this.$store.dispatch("fetchBotSummary",this.getRequestPayload())}catch{Z(this.$t("REPORT.SUMMARY_FETCHING_FAILED"))}},fetchChartData(){Object.keys(this.reportKeys).forEach(async t=>{try{await this.$store.dispatch("fetchAccountReport",{metric:this.reportKeys[t],...this.getRequestPayload()})}catch{Z(this.$t("REPORT.DATA_FETCHING_FAILED"))}})},getRequestPayload(){const{from:t,to:n,groupBy:a,businessHours:e}=this;return{from:t,to:n,groupBy:a==null?void 0:a.period,businessHours:e}},onFilterChange({from:t,to:n,groupBy:a,businessHours:e}){this.from=t,this.to=n,this.groupBy=a,this.businessHours=e,this.fetchAllData(),Nt(kc.FILTER_REPORT,{filterValue:{from:t,to:n,groupBy:a,businessHours:e},reportType:"bots"})}}},oDe={class:"flex flex-col gap-4"};function rDe(t,n,a,e,s,r){const o=H("ReportHeader"),i=H("ReportFilterSelector"),l=H("BotMetrics"),c=H("ReportContainer");return p(),g(de,null,[v(o,{"header-title":t.$t("BOT_REPORTS.HEADER")},null,8,["header-title"]),f("div",oDe,[v(i,{"show-agents-filter":!1,"show-group-by-filter":"","show-business-hours-switch":!1,onFilterChange:r.onFilterChange},null,8,["onFilterChange"]),v(l,{filters:r.requestPayload},null,8,["filters"]),v(c,{"account-summary-key":"getBotSummary","summary-fetching-key":"getBotSummaryFetchingStatus","group-by":s.groupBy,"report-keys":s.reportKeys},null,8,["group-by","report-keys"])])],64)}const iDe=G(sDe,[["render",rDe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/BotReports.vue"]]),lDe={__name:"MetricCard",props:{header:{type:String,default:""},isLoading:{type:Boolean,default:!1},loadingMessage:{type:String,default:""}},setup(t,{expose:n}){n();const a={Spinner:ls};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},cDe={class:"flex flex-col m-0.5 px-6 py-5 rounded-xl flex-grow text-n-slate-12 shadow outline-1 outline outline-n-container bg-n-solid-2 min-h-[10rem]"},dDe={class:"card-header grid w-full mb-6 grid-cols-[repeat(auto-fit,minmax(max-content,50%))] gap-y-2"},uDe={class:"flex items-center gap-2 flex-row"},pDe={class:"mb-0 text-n-slate-12 font-medium text-lg"},fDe={class:"flex flex-row items-center py-0.5 px-2 rounded bg-n-teal-3 text-xs"},mDe={class:"text-xs text-n-teal-11"},hDe={class:"flex flex-row items-center justify-end gap-2"},_De={key:0,class:"card-body max-w-full w-full ml-auto mr-auto justify-between flex"},gDe={key:1,class:"items-center flex text-base justify-center px-12 py-6"},bDe={class:"text-n-slate-11"};function vDe(t,n,a,e,s,r){return p(),g("div",cDe,[f("div",dDe,[qe(t.$slots,"header",{},()=>[f("div",uDe,[f("h5",pDe,C(a.header),1),f("span",fDe,[n[0]||(n[0]=f("span",{class:"bg-n-teal-9 h-1 w-1 rounded-full mr-1 rtl:mr-0 rtl:ml-0"},null,-1)),f("span",mDe,C(t.$t("OVERVIEW_REPORTS.LIVE")),1)])]),f("div",hDe,[qe(t.$slots,"control")])])]),a.isLoading?a.isLoading?(p(),g("div",gDe,[v(e.Spinner),f("span",bDe,C(a.loadingMessage),1)])):O("v-if",!0):(p(),g("div",_De,[qe(t.$slots,"default")]))])}const Jh=G(lDe,[["render",vDe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/overview/MetricCard.vue"]]);function GC(){const t=P(!1),n=P(0),a=P(0),e=P(null);let s=null;return{visible:t,x:n,y:a,value:e,show:(i,l)=>{clearTimeout(s);const c=i.target.getBoundingClientRect();n.value=c.left+c.width/2,a.value=c.top,s=setTimeout(()=>{e.value=l,t.value=!0},100)},hide:()=>{clearTimeout(s),s=setTimeout(()=>{t.value=!1},50)}}}const EDe={__name:"HeatmapTooltip",props:{visible:{type:Boolean,default:!1},x:{type:Number,default:0},y:{type:Number,default:0},value:{type:Number,default:null}},setup(t,{expose:n}){n();const a=t,{t:e}=Q(),s=S(()=>a.value?a.value===1?e("OVERVIEW_REPORTS.CONVERSATION_HEATMAP.CONVERSATION",{count:a.value}):e("OVERVIEW_REPORTS.CONVERSATION_HEATMAP.CONVERSATIONS",{count:a.value}):e("OVERVIEW_REPORTS.CONVERSATION_HEATMAP.NO_CONVERSATIONS")),r={props:a,t:e,tooltipText:s,computed:S,get useI18n(){return Q}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}};function SDe(t,n,a,e,s,r){return p(),g("div",{class:oe(["fixed z-50 px-2 py-1 text-xs font-medium text-n-slate-6 bg-n-slate-12 rounded shadow-lg pointer-events-none transition-[opacity,transform] duration-75",{"opacity-100":a.visible,"opacity-0":!a.visible}]),style:nn({left:`${a.x}px`,top:`${a.y-15}px`,transform:"translateX(-50%) translateZ(0)",willChange:"transform, opacity"})},C(e.tooltipText),7)}const TDe=G(EDe,[["render",SDe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/heatmaps/HeatmapTooltip.vue"]]),ADe={__name:"BaseHeatmap",props:{heatmapData:{type:Array,default:()=>[]},numberOfRows:{type:Number,default:7},isLoading:{type:Boolean,default:!1},colorScheme:{type:String,default:"blue",validator:t=>["blue","green"].includes(t)}},setup(t,{expose:n}){n();const a=t,{t:e}=Q(),s=S(()=>{const _=mT(a.heatmapData);return Array.from(_.keys()).map(E=>{const y=_.get(E);return{dateKey:E,data:y,dataHash:y.map(b=>b.value).join(",")}})}),r=S(()=>{const _=a.heatmapData.map(E=>E.value);return W1(_,[.2,.4,.6,.8,.9,.99])});function o(_){return Mn(new Date(_),"MMM d, yyyy")}const i=[e("DAYS_OF_WEEK.SUNDAY"),e("DAYS_OF_WEEK.MONDAY"),e("DAYS_OF_WEEK.TUESDAY"),e("DAYS_OF_WEEK.WEDNESDAY"),e("DAYS_OF_WEEK.THURSDAY"),e("DAYS_OF_WEEK.FRIDAY"),e("DAYS_OF_WEEK.SATURDAY")];function l(_){const E=Vy(_);return i[E]}const c={blue:["bg-n-blue-3 border border-n-blue-4/30","bg-n-blue-5 border border-n-blue-6/30","bg-n-blue-7 border border-n-blue-8/30","bg-n-blue-8 border border-n-blue-9/30","bg-n-blue-10 border border-n-blue-8/30","bg-n-blue-11 border border-n-blue-10/30"],green:["bg-n-teal-3 border border-n-teal-4/30","bg-n-teal-5 border border-n-teal-6/30","bg-n-teal-7 border border-n-teal-8/30","bg-n-teal-8 border border-n-teal-9/30","bg-n-teal-10 border border-n-teal-8/30","bg-n-teal-11 border border-n-teal-10/30"]},d=hT((_,E,y)=>{if(!_)return"border border-n-container bg-n-slate-2 dark:bg-n-slate-1/30";let b=[...E,1/0].findIndex(A=>_<=A&&_>0);return b>6&&(b=5),b===0?"border border-n-container bg-n-slate-2 dark:bg-n-slate-1/30":c[y][b-1]});function u(_){return d(_,r.value,a.colorScheme)}const m=GC(),h={props:a,t:e,dataRows:s,quantileRange:r,formatDate:o,DAYS_OF_WEEK:i,getDayOfTheWeek:l,COLOR_SCHEMES:c,getHeatmapLevelClass:d,getHeatmapClass:u,tooltip:m,computed:S,get useMemoize(){return hT},get format(){return Mn},get getDay(){return Vy},get getQuantileIntervals(){return W1},get groupHeatmapByDay(){return mT},get useI18n(){return Q},get useHeatmapTooltip(){return GC},HeatmapTooltip:TDe};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}},yDe={class:"grid relative w-full gap-x-4 gap-y-2.5 overflow-y-scroll md:overflow-visible grid-cols-[80px_1fr] min-h-72"},IDe={class:"grid gap-[5px] flex-shrink-0"},CDe={class:"grid gap-[5px] w-full min-w-[700px]"},ODe={class:"grid grid-cols-[repeat(24,_1fr)] gap-[5px] w-full text-[8px] font-semibold h-5 text-n-slate-11"},NDe={class:"grid gap-[5px] flex-shrink-0"},xDe={class:"font-normal text-n-slate-11"},RDe={class:"grid gap-[5px] w-full min-w-[700px]",style:{"content-visibility":"auto"}},wDe=["onMouseenter"],MDe={class:"grid grid-cols-[repeat(24,_1fr)] gap-[5px] w-full text-[8px] font-semibold h-5 text-n-slate-12"};function LDe(t,n,a,e,s,r){return p(),g("div",yDe,[a.isLoading?(p(),g(de,{key:0},[f("div",IDe,[(p(!0),g(de,null,Ae(a.numberOfRows,o=>(p(),g("div",{key:o,class:"w-full rounded-sm bg-n-slate-3 dark:bg-n-slate-1 animate-loader-pulse h-8 min-w-[70px]"}))),128))]),f("div",CDe,[(p(!0),g(de,null,Ae(a.numberOfRows,o=>(p(),g("div",{key:o,class:"grid gap-[5px] grid-cols-[repeat(24,_1fr)]"},[(p(),g(de,null,Ae(24,i=>f("div",{key:i,class:"w-full h-8 rounded-sm bg-n-slate-3 dark:bg-n-slate-1 animate-loader-pulse"})),64))]))),128))]),n[5]||(n[5]=f("div",null,null,-1)),f("div",ODe,[(p(),g(de,null,Ae(24,o=>f("div",{key:o,class:"flex items-center justify-center"},C(o-1),1)),64))])],64)):(p(),g(de,{key:1},[f("div",NDe,[(p(!0),g(de,null,Ae(e.dataRows,(o,i,l,c)=>{const d=[o.dateKey];if(c&&c.key===o.dateKey&&V1(c,d))return c;const u=(p(),g("div",{key:o.dateKey,class:"h-8 min-w-[70px] text-n-slate-12 text-[10px] font-semibold flex flex-col items-end justify-center"},[Oe(C(e.getDayOfTheWeek(new Date(o.dateKey)))+" ",1),f("time",xDe,C(e.formatDate(o.dateKey)),1)]));return u.memo=d,u},n,0),128))]),f("div",RDe,[(p(!0),g(de,null,Ae(e.dataRows,(o,i,l,c)=>{const d=[o.dataHash,a.colorScheme];if(c&&c.key===o.dateKey&&V1(c,d))return c;const u=(p(),g("div",{key:o.dateKey,class:"grid gap-[5px] grid-cols-[repeat(24,_1fr)]",style:{"content-visibility":"auto"}},[(p(!0),g(de,null,Ae(o.data,m=>(p(),g("div",{key:m.timestamp,class:oe(["h-8 rounded-sm cursor-pointer",e.getHeatmapClass(m.value)]),onMouseenter:h=>e.tooltip.show(h,m.value),onMouseleave:n[2]||(n[2]=(...h)=>e.tooltip.hide&&e.tooltip.hide(...h))},null,42,wDe))),128))]));return u.memo=d,u},n,3),128))]),n[6]||(n[6]=f("div",null,null,-1)),f("div",MDe,[(p(),g(de,null,Ae(24,o=>f("div",{key:o,class:"flex items-center justify-center"},C(o-1),1)),64))])],64)),v(e.HeatmapTooltip,{visible:e.tooltip.visible.value,x:e.tooltip.x.value,y:e.tooltip.y.value,value:e.tooltip.value.value},null,8,["visible","x","y","value"])])}const DDe=G(ADe,[["render",LDe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/heatmaps/BaseHeatmap.vue"]]),Yi=(t,n=6e4)=>{const a=P(null),e=()=>{a.value=setTimeout(async()=>{await t(),e()},n)},s=()=>{a.value&&(clearTimeout(a.value),a.value=null)};return gr(()=>{s()}),{startRefetching:e,stopRefetching:s}},PDe={__name:"DropdownMenu",props:{menuItems:{type:Array,required:!0,validator:t=>t.every(n=>n.action&&n.value&&n.label)},thumbnailSize:{type:Number,default:20},showSearch:{type:Boolean,default:!1},searchPlaceholder:{type:String,default:""},isSearching:{type:Boolean,default:!1},labelClass:{type:String,default:""}},emits:["action"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=P(null),i=P(""),l=S(()=>i.value?e.menuItems.filter(u=>u.label.toLowerCase().includes(i.value.toLowerCase())):e.menuItems),c=u=>{const{action:m,value:h,..._}=u;s("action",{action:m,value:h,..._})};Pe(()=>{o.value&&e.showSearch&&o.value.focus()});const d={props:e,emit:s,t:r,searchInput:o,searchQuery:i,filteredMenuItems:l,handleAction:c,ref:P,computed:S,onMounted:Pe,get useI18n(){return Q},Icon:Bt,Avatar:qt};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}},kDe={class:"bg-n-alpha-3 backdrop-blur-[100px] border-0 outline outline-1 outline-n-container absolute rounded-xl z-50 py-2 px-2 gap-2 flex flex-col min-w-[136px] shadow-lg"},BDe={key:0,class:"relative"},FDe=["placeholder"],UDe=["disabled","onClick"],$De={key:1,class:"flex-shrink-0"},GDe={key:1,class:"text-sm text-n-slate-11 px-2 py-1.5"};function VDe(t,n,a,e,s,r){return p(),g("div",kDe,[a.showSearch?(p(),g("div",BDe,[n[1]||(n[1]=f("span",{class:"absolute i-lucide-search size-3.5 top-2 left-3"},null,-1)),ce(f("input",{ref:"searchInput","onUpdate:modelValue":n[0]||(n[0]=o=>e.searchQuery=o),type:"search",placeholder:a.searchPlaceholder||e.t("DROPDOWN_MENU.SEARCH_PLACEHOLDER"),class:"reset-base w-full h-8 py-2 pl-10 pr-2 text-sm focus:outline-none border-none rounded-lg bg-n-alpha-black2 dark:bg-n-solid-1 text-n-slate-12"},null,8,FDe),[[Et,e.searchQuery]])])):O("v-if",!0),(p(!0),g(de,null,Ae(e.filteredMenuItems,(o,i)=>(p(),g("button",{key:i,type:"button",class:oe(["inline-flex items-center justify-start w-full h-8 min-w-0 gap-2 px-2 py-1.5 transition-all duration-200 ease-in-out border-0 rounded-lg z-60 hover:bg-n-alpha-1 dark:hover:bg-n-alpha-2 disabled:cursor-not-allowed disabled:pointer-events-none disabled:opacity-50",{"bg-n-alpha-1 dark:bg-n-solid-active":o.isSelected,"text-n-ruby-11":o.action==="delete","text-n-slate-12":o.action!=="delete"}]),disabled:o.disabled,onClick:l=>e.handleAction(o)},[qe(t.$slots,"thumbnail",{item:o},()=>[o.thumbnail?(p(),L(e.Avatar,{key:0,name:o.thumbnail.name,src:o.thumbnail.src,size:a.thumbnailSize,"rounded-full":""},null,8,["name","src","size"])):O("v-if",!0)]),o.icon?(p(),L(e.Icon,{key:0,icon:o.icon,class:"flex-shrink-0 size-3.5"},null,8,["icon"])):O("v-if",!0),o.emoji?(p(),g("span",$De,C(o.emoji),1)):O("v-if",!0),o.label?(p(),g("span",{key:2,class:oe(["min-w-0 text-sm truncate",a.labelClass])},C(o.label),3)):O("v-if",!0)],10,UDe))),128)),e.filteredMenuItems.length===0?(p(),g("div",GDe,C(a.isSearching?e.t("DROPDOWN_MENU.SEARCHING"):e.t("DROPDOWN_MENU.EMPTY_STATE")),1)):O("v-if",!0)])}const ds=G(PDe,[["render",VDe],["__file","/app/app/javascript/dashboard/components-next/dropdown-menu/DropdownMenu.vue"]]),HDe={__name:"BaseHeatmapContainer",props:{metric:{type:String,required:!0},title:{type:String,required:!0},downloadTitle:{type:String,required:!0},storeGetter:{type:String,required:!0},storeAction:{type:String,required:!0},downloadAction:{type:String,default:""},uiFlagKey:{type:String,required:!0},colorScheme:{type:String,default:"blue"}},setup(t,{expose:n}){n();const a=t,e=Fe(),{t:s}=Q(),r=le("getOverviewUIFlags"),o=le(a.storeGetter),i=le("inboxes/getInboxes"),l=[{label:s("REPORT.DATE_RANGE_OPTIONS.LAST_7_DAYS"),value:6},{label:s("REPORT.DATE_RANGE_OPTIONS.LAST_14_DAYS"),value:13},{label:s("REPORT.DATE_RANGE_OPTIONS.LAST_30_DAYS"),value:29}],c=P(6),d=P(null),u=S(()=>l.find(w=>w.value===c.value)),m=S(()=>[{label:s("INBOX_REPORTS.ALL_INBOXES"),value:null,action:"select_inbox"},...i.value.map(w=>({label:w.name,value:w.id,action:"select_inbox"}))]),h=S(()=>d.value?m.value.find(w=>w.value===d.value.id):{label:s("INBOX_REPORTS.ALL_INBOXES")}),_=S(()=>r.value[a.uiFlagKey]),E=()=>{const w=yo(new Date);if(!d.value&&a.downloadAction){e.dispatch(a.downloadAction,{daysBefore:c.value,to:Co(w)});return}if(!o.value||o.value.length===0)return;const B=[["Date","Hour",a.title]];o.value.forEach($=>{const Y=new Date($.timestamp*1e3),j=Mn(Y,"yyyy-MM-dd"),U=Y.getHours();B.push([j,`${U}:00 - ${U+1}:00`,$.value])});const k=B.map($=>$.join(",")).join(`
`),V=d.value?`_${d.value.name.replace(/[^a-z0-9]/gi,"_")}`:"",F=`${a.downloadTitle}${V}_${Mn(new Date,"dd-MM-yyyy")}.csv`;_T(F,k)},[y,b]=$t(),[A,T]=$t(),I=()=>{if(_.value)return;let w=yo(new Date),D=os(Ko(w,Number(c.value)));const B={metric:a.metric,from:Co(D),to:Co(w),groupBy:"hour",businessHours:!1};d.value&&(B.type="inbox",B.id=d.value.id),e.dispatch(a.storeAction,B)},N=({value:w})=>{b(!1),c.value=w,I()},x=({value:w})=>{T(!1),d.value=w?i.value.find(D=>D.id===w):null,I()},{startRefetching:R}=Yi(I);Pe(()=>{e.dispatch("inboxes/get"),I(),R()});const M={props:a,store:e,t:s,uiFlags:r,heatmapData:o,inboxes:i,menuItems:l,selectedDays:c,selectedInbox:d,selectedDayFilter:u,inboxMenuItems:m,selectedInboxFilter:h,isLoading:_,downloadHeatmapData:E,showDropdown:y,toggleDropdown:b,showInboxDropdown:A,toggleInboxDropdown:T,fetchHeatmapData:I,handleAction:N,handleInboxAction:x,startRefetching:R,onMounted:Pe,ref:P,computed:S,get useToggle(){return $t},MetricCard:Jh,BaseHeatmap:DDe,get useStore(){return Fe},get useMapGetter(){return le},get useLiveRefresh(){return Yi},get endOfDay(){return yo},get getUnixTime(){return Co},get startOfDay(){return os},get subDays(){return Ko},get format(){return Mn},DropdownMenu:ds,Button:Se,get useI18n(){return Q},get downloadCsvFile(){return _T}};return Object.defineProperty(M,"__isScriptSetup",{enumerable:!1,value:!0}),M}},jDe={class:"flex flex-row flex-wrap max-w-full"},WDe={class:"relative flex items-center group"},zDe={class:"relative flex items-center group"};function YDe(t,n,a,e,s,r){const o=nt("on-clickaway");return p(),g("div",jDe,[v(e.MetricCard,{header:a.title},{control:z(()=>[ce((p(),g("div",WDe,[v(e.Button,{sm:"",slate:"",faded:"",label:e.selectedDayFilter.label,class:"rounded-md group-hover:bg-n-alpha-2",onClick:n[0]||(n[0]=i=>e.toggleDropdown())},null,8,["label"]),e.showDropdown?(p(),L(e.DropdownMenu,{key:0,"menu-items":e.menuItems,class:"mt-1 ltr:right-0 rtl:left-0 xl:ltr:right-0 xl:rtl:left-0 top-full",onAction:n[1]||(n[1]=i=>e.handleAction(i))})):O("v-if",!0)])),[[o,()=>e.toggleDropdown(!1)]]),ce((p(),g("div",zDe,[v(e.Button,{sm:"",slate:"",faded:"",label:e.selectedInboxFilter.label,class:"rounded-md group-hover:bg-n-alpha-2 max-w-[200px]",onClick:n[2]||(n[2]=i=>e.toggleInboxDropdown())},null,8,["label"]),e.showInboxDropdown?(p(),L(e.DropdownMenu,{key:0,"menu-items":e.inboxMenuItems,"show-search":"","search-placeholder":e.t("INBOX_REPORTS.SEARCH_INBOX"),class:"mt-1 ltr:right-0 rtl:left-0 xl:ltr:right-0 xl:rtl:left-0 top-full min-w-[200px]",onAction:n[3]||(n[3]=i=>e.handleInboxAction(i))},null,8,["menu-items","search-placeholder"])):O("v-if",!0)])),[[o,()=>e.toggleInboxDropdown(!1)]]),v(e.Button,{sm:"",slate:"",faded:"",label:e.t("OVERVIEW_REPORTS.CONVERSATION_HEATMAP.DOWNLOAD_REPORT"),class:"rounded-md group-hover:bg-n-alpha-2",onClick:e.downloadHeatmapData},null,8,["label"])]),default:z(()=>[v(e.BaseHeatmap,{"heatmap-data":e.heatmapData,"number-of-rows":e.selectedDays+1,"is-loading":e.isLoading,"color-scheme":a.colorScheme},null,8,["heatmap-data","number-of-rows","is-loading","color-scheme"])]),_:1},8,["header"])])}const RL=G(HDe,[["render",YDe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/heatmaps/BaseHeatmapContainer.vue"]]),KDe={__name:"ConversationHeatmapContainer",setup(t,{expose:n}){n();const{t:a}=Q(),e={t:a,BaseHeatmapContainer:RL,get useI18n(){return Q}};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}};function XDe(t,n,a,e,s,r){return p(),L(e.BaseHeatmapContainer,{metric:"conversations_count",title:e.t("OVERVIEW_REPORTS.CONVERSATION_HEATMAP.HEADER"),"download-title":"conversation_heatmap","store-getter":"getAccountConversationHeatmapData","store-action":"fetchAccountConversationHeatmap","download-action":"downloadAccountConversationHeatmap","ui-flag-key":"isFetchingAccountConversationsHeatmap"},null,8,["title"])}const qDe=G(KDe,[["render",XDe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/heatmaps/ConversationHeatmapContainer.vue"]]),ZDe={__name:"ResolutionHeatmapContainer",setup(t,{expose:n}){n();const{t:a}=Q(),e={t:a,BaseHeatmapContainer:RL,get useI18n(){return Q}};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}};function QDe(t,n,a,e,s,r){return p(),L(e.BaseHeatmapContainer,{metric:"resolutions_count",title:e.t("OVERVIEW_REPORTS.RESOLUTION_HEATMAP.HEADER"),"download-title":"resolution_heatmap","store-getter":"getAccountResolutionHeatmapData","store-action":"fetchAccountResolutionHeatmap","ui-flag-key":"isFetchingAccountResolutionsHeatmap","color-scheme":"green"},null,8,["title"])}const JDe=G(ZDe,[["render",QDe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/heatmaps/ResolutionHeatmapContainer.vue"]]),ePe={__name:"BaseCell",props:{content:{type:String,default:""}},setup(t,{expose:n}){n();const e={isRTL:le("accounts/isRTL"),get useMapGetter(){return le}};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}},tPe={key:1,class:"text-n-slate-10"};function nPe(t,n,a,e,s,r){return p(),g("div",{class:oe(["overflow-hidden whitespace-nowrap text-ellipsis",{"text-right":e.isRTL}])},[t.$slots.default||a.content?qe(t.$slots,"default",{key:0},()=>[a.content?(p(),g(de,{key:0},[Oe(C(a.content),1)],64)):O("v-if",!0)]):(p(),g("span",tPe," --- "))],2)}const aPe=G(ePe,[["render",nPe],["__file","/app/app/javascript/dashboard/components/table/BaseCell.vue"]]),sPe={__name:"AgentCell",props:{row:{type:Object,required:!0}},setup(t,{expose:n}){n();const e={isRTL:le("accounts/isRTL"),BaseCell:aPe,Avatar:qt,get useMapGetter(){return le}};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}},oPe={class:"items-start flex flex-col min-w-0 my-0 mx-2"},rPe={class:"overflow-hidden text-sm m-0 leading-[1.2] text-n-slate-12 whitespace-nowrap text-ellipsis"},iPe={class:"text-xs text-n-slate-11"};function lPe(t,n,a,e,s,r){return p(),L(e.BaseCell,null,{default:z(()=>[f("div",{class:oe(["items-center flex text-left",{"flex-row-reverse":e.isRTL}])},[v(e.Avatar,{src:a.row.original.thumbnail,name:a.row.original.agent,status:a.row.original.status,size:32,"hide-offline-status":"","rounded-full":""},null,8,["src","name","status"]),f("div",oPe,[f("h6",rPe,C(a.row.original.agent),1),f("span",iPe,C(a.row.original.email),1)])],2)]),_:1})}const VC=G(sPe,[["render",lPe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/overview/AgentCell.vue"]]),fb="report_overview_agent_table_page_size",cPe={__name:"AgentTable",props:{agents:{type:Array,default:()=>[]},agentMetrics:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1}},setup(t,{expose:n}){n();const{t:a}=Q(),{uiSettings:e,updateUISettings:s}=Ct(),r=()=>e.value[fb]||10,o=_=>{s({[fb]:_})},i=_=>t.agentMetrics.find(E=>E.assignee_id===Number(_))||{},l=S(()=>t.agents.map(_=>{const E=i(_.id);return{agent:_.available_name||_.name,email:_.email,thumbnail:_.thumbnail,open:E.open||0,unattended:E.unattended||0,status:_.availability_status}}).sort((_,E)=>{const y=E.open-_.open;return y===0?_.agent.localeCompare(E.agent):y})),c=_=>pn("span",{class:_.getValue()?"capitalize text-n-slate-12":"capitalize text-n-slate-11"},_.getValue()?_.getValue():"---"),d=Hi(),u=[d.accessor("agent",{header:a("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.TABLE_HEADER.AGENT"),cell:_=>pn(VC,_),size:250}),d.accessor("open",{header:a("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.TABLE_HEADER.OPEN"),cell:c,size:100}),d.accessor("unattended",{header:a("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.TABLE_HEADER.UNATTENDED"),cell:c,size:100})],m=zi({get data(){return l.value},columns:u,enableSorting:!1,getCoreRowModel:Wi(),getPaginationRowModel:Km(),initialState:{pagination:{pageSize:r()}}}),h={t:a,uiSettings:e,updateUISettings:s,AGENT_TABLE_PAGE_SIZE_KEY:fb,getPageSize:r,handlePageSizeChange:o,getAgentMetrics:i,tableData:l,defaulSpanRender:c,columnHelper:d,columns:u,table:m,computed:S,h:pn,get useVueTable(){return zi},get createColumnHelper(){return Hi},get getCoreRowModel(){return Wi},get getPaginationRowModel(){return Km},get useI18n(){return Q},get useUISettings(){return Ct},Spinner:ls,EmptyState:Id,Table:Zh,Pagination:l1,AgentCell:VC};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}},dPe={class:"flex flex-col flex-1"},uPe={key:0,class:"items-center flex text-base justify-center p-8"};function pPe(t,n,a,e,s,r){return p(),g("div",dPe,[v(e.Table,{table:e.table,class:"max-h-[calc(100vh-21.875rem)]"},null,8,["table"]),v(e.Pagination,{class:"mt-2",table:e.table,"show-page-size-selector":"","default-page-size":e.getPageSize(),onPageSizeChange:e.handlePageSizeChange},null,8,["table","default-page-size"]),a.isLoading?(p(),g("div",uPe,[v(e.Spinner),f("span",null,C(t.$t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.LOADING_MESSAGE")),1)])):!a.isLoading&&!a.agents.length?(p(),L(e.EmptyState,{key:1,title:t.$t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.NO_AGENTS")},null,8,["title"])):O("v-if",!0)])}const fPe=G(cPe,[["render",pPe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/overview/AgentTable.vue"]]),mPe={__name:"AgentLiveReportContainer",setup(t,{expose:n}){n();const a=Fe(),e=le("getOverviewUIFlags"),s=le("getAgentConversationMetric"),r=le("agents/getAgents"),o=()=>a.dispatch("fetchAgentConversationMetric"),{startRefetching:i}=Yi(o);Pe(()=>{a.dispatch("agents/get"),o(),i()});const l={store:a,uiFlags:e,agentConversationMetric:s,agents:r,fetchData:o,startRefetching:i,onMounted:Pe,AgentTable:fPe,MetricCard:Jh,get useStore(){return Fe},get useMapGetter(){return le},get useLiveRefresh(){return Yi}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}},hPe={class:"flex flex-row flex-wrap max-w-full"};function _Pe(t,n,a,e,s,r){return p(),g("div",hPe,[v(e.MetricCard,{header:t.$t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.HEADER")},{default:z(()=>[v(e.AgentTable,{agents:e.agents,"agent-metrics":e.agentConversationMetric,"is-loading":e.uiFlags.isFetchingAgentConversationMetric},null,8,["agents","agent-metrics","is-loading"])]),_:1},8,["header"])])}const gPe=G(mPe,[["render",_Pe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/AgentLiveReportContainer.vue"]]),mb="report_overview_team_table_page_size",bPe={__name:"TeamTable",props:{teams:{type:Array,default:()=>[]},teamMetrics:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1}},setup(t,{expose:n}){n();const{t:a}=Q(),{uiSettings:e,updateUISettings:s}=Ct(),r=()=>e.value[mb]||10,o=_=>{s({[mb]:_})},i=_=>t.teamMetrics.find(E=>E.team_id===Number(_))||{},l=S(()=>t.teams.map(_=>{const E=i(_.id);return{agent:_.name,open:E.open||0,unattended:E.unattended||0}}).sort((_,E)=>{const y=E.open-_.open;return y===0?_.agent.localeCompare(E.agent):y})),c=_=>pn("span",{class:_.getValue()?"capitalize text-n-slate-12":"capitalize text-n-slate-11"},_.getValue()?_.getValue():"---"),d=Hi(),u=[d.accessor("agent",{header:a("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.TABLE_HEADER.TEAM"),cell:c,size:250}),d.accessor("open",{header:a("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.TABLE_HEADER.OPEN"),cell:c,size:100}),d.accessor("unattended",{header:a("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.TABLE_HEADER.UNATTENDED"),cell:c,size:100})],m=zi({get data(){return l.value},columns:u,enableSorting:!1,getCoreRowModel:Wi(),getPaginationRowModel:Km(),initialState:{pagination:{pageSize:r()}}}),h={t:a,uiSettings:e,updateUISettings:s,TEAM_TABLE_PAGE_SIZE_KEY:mb,getPageSize:r,handlePageSizeChange:o,getTeamMetrics:i,tableData:l,defaulSpanRender:c,columnHelper:d,columns:u,table:m,computed:S,h:pn,get useVueTable(){return zi},get createColumnHelper(){return Hi},get getCoreRowModel(){return Wi},get getPaginationRowModel(){return Km},get useI18n(){return Q},get useUISettings(){return Ct},Spinner:ls,EmptyState:Id,Table:Zh,Pagination:l1};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}},vPe={class:"flex flex-col flex-1"},EPe={key:0,class:"items-center flex text-base justify-center p-8"};function SPe(t,n,a,e,s,r){return p(),g("div",vPe,[v(e.Table,{table:e.table,class:"max-h-[calc(100vh-21.875rem)]"},null,8,["table"]),v(e.Pagination,{class:"mt-2",table:e.table,"show-page-size-selector":"","default-page-size":e.getPageSize(),onPageSizeChange:e.handlePageSizeChange},null,8,["table","default-page-size"]),a.isLoading?(p(),g("div",EPe,[v(e.Spinner),f("span",null,C(t.$t("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.LOADING_MESSAGE")),1)])):!a.isLoading&&!a.teams.length?(p(),L(e.EmptyState,{key:1,title:t.$t("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.NO_TEAMS")},null,8,["title"])):O("v-if",!0)])}const TPe=G(bPe,[["render",SPe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/overview/TeamTable.vue"]]),APe={__name:"TeamLiveReportContainer",setup(t,{expose:n}){n();const a=Fe(),e=le("getOverviewUIFlags"),s=le("getTeamConversationMetric"),r=le("teams/getTeams"),o=()=>a.dispatch("fetchTeamConversationMetric"),{startRefetching:i}=Yi(o);Pe(()=>{a.dispatch("teams/get"),o(),i()});const l={store:a,uiFlags:e,teamConversationMetric:s,teams:r,fetchData:o,startRefetching:i,onMounted:Pe,MetricCard:Jh,get useStore(){return Fe},get useMapGetter(){return le},get useLiveRefresh(){return Yi},TeamTable:TPe};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}},yPe={class:"flex flex-row flex-wrap max-w-full"};function IPe(t,n,a,e,s,r){return p(),g("div",yPe,[v(e.MetricCard,{header:t.$t("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.HEADER")},{default:z(()=>[v(e.TeamTable,{teams:e.teams,"team-metrics":e.teamConversationMetric,"is-loading":e.uiFlags.isFetchingTeamConversationMetric},null,8,["teams","team-metrics","is-loading"])]),_:1},8,["header"])])}const CPe=G(APe,[["render",IPe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/TeamLiveReportContainer.vue"]]),HC="OVERVIEW_REPORTS.ACCOUNT_CONVERSATIONS",OPe={__name:"StatsLiveReportsContainer",setup(t,{expose:n}){n();const{t:a}=Q(),e=le("getOverviewUIFlags"),s=le("agents/getAgentStatus"),r=le("getAccountConversationMetric"),o=Fe(),i=le("teams/getTeams"),l=S(()=>[{label:a("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.ALL_TEAMS"),value:null},...i.value.map(T=>({label:T.name,value:T.id}))]),c=S(()=>{let T={};return Object.keys(s.value).forEach(I=>{const N=a(`OVERVIEW_REPORTS.AGENT_STATUS.${sb[I]}`);T[N]=s.value[I]}),T}),d=S(()=>{let T={};return Object.keys(r.value).forEach(I=>{const N=a(`${HC}.${sb[I]}`);T[N]=r.value[I]}),T}),u=P(null),m=S(()=>(l.value.find(I=>I.value===u.value)||{}).label),h=()=>{const T={};u.value&&(T.team_id=u.value),o.dispatch("fetchAccountConversationMetric",T)},{startRefetching:_}=Yi(h),[E,y]=$t(),b=({value:T})=>{y(!1),u.value=T,h()};Pe(()=>{h(),_()});const A={t:a,uiFlags:e,agentStatus:s,accountConversationMetric:r,store:o,accounti18nKey:HC,teams:i,teamMenuList:l,agentStatusMetrics:c,conversationMetrics:d,selectedTeam:u,selectedTeamLabel:m,fetchData:h,startRefetching:_,showDropdown:E,toggleDropdown:y,handleAction:b,computed:S,onMounted:Pe,ref:P,get OVERVIEW_METRICS(){return sb},get useToggle(){return $t},MetricCard:Jh,get useStore(){return Fe},get useMapGetter(){return le},get useLiveRefresh(){return Yi},DropdownMenu:ds,Button:Se,get useI18n(){return Q}};return Object.defineProperty(A,"__isScriptSetup",{enumerable:!1,value:!0}),A}},NPe={class:"flex flex-col items-center md:flex-row gap-4"},xPe={class:"flex-1 w-full max-w-full md:w-[65%] md:max-w-[65%] conversation-metric"},RPe={class:"relative flex items-center group z-50"},wPe={class:"text-base text-n-slate-11"},MPe={class:"text-n-slate-12 text-3xl mb-0 mt-1"},LPe={class:"flex-1 w-full max-w-full md:w-[35%] md:max-w-[35%]"},DPe={class:"text-base text-n-slate-11"},PPe={class:"text-n-slate-12 text-3xl mb-0 mt-1"};function kPe(t,n,a,e,s,r){const o=nt("on-clickaway");return p(),g("div",NPe,[f("div",xPe,[v(e.MetricCard,{header:e.t(`${e.accounti18nKey}.HEADER`),"is-loading":e.uiFlags.isFetchingAccountConversationMetric,"loading-message":e.t(`${e.accounti18nKey}.LOADING_MESSAGE`)},Ro({default:z(()=>[(p(!0),g(de,null,Ae(e.conversationMetrics,(i,l,c)=>(p(),g("div",{key:c,class:"flex-1 min-w-0 pb-2"},[f("h3",wPe,C(l),1),f("p",MPe,C(i),1)]))),128))]),_:2},[e.teams.length?{name:"control",fn:z(()=>[ce((p(),g("div",RPe,[v(e.Button,{sm:"",slate:"",faded:"",label:e.selectedTeamLabel,class:"capitalize rounded-md group-hover:bg-n-alpha-2",onClick:n[0]||(n[0]=i=>e.toggleDropdown())},null,8,["label"]),e.showDropdown?(p(),L(e.DropdownMenu,{key:0,"menu-items":e.teamMenuList,class:"mt-1 ltr:right-0 rtl:left-0 xl:ltr:right-0 xl:rtl:left-0 top-full","label-class":"capitalize",onAction:n[1]||(n[1]=i=>e.handleAction(i))},null,8,["menu-items"])):O("v-if",!0)])),[[o,()=>e.toggleDropdown(!1)]])]),key:"0"}:void 0]),1032,["header","is-loading","loading-message"])]),f("div",LPe,[v(e.MetricCard,{header:t.$t("OVERVIEW_REPORTS.AGENT_STATUS.HEADER")},{default:z(()=>[(p(!0),g(de,null,Ae(e.agentStatusMetrics,(i,l,c)=>(p(),g("div",{key:c,class:"flex-1 min-w-0 pb-2"},[f("h3",DPe,C(l),1),f("p",PPe,C(i),1)]))),128))]),_:1},8,["header"])])])}const BPe=G(OPe,[["render",kPe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/StatsLiveReportsContainer.vue"]]),FPe={__name:"LiveReports",setup(t,{expose:n}){n();const a={ReportHeader:Ir,ConversationHeatmapContainer:qDe,ResolutionHeatmapContainer:JDe,AgentLiveReportContainer:gPe,TeamLiveReportContainer:CPe,StatsLiveReportsContainer:BPe};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},UPe={class:"flex flex-col gap-4 pb-6"};function $Pe(t,n,a,e,s,r){return p(),g(de,null,[v(e.ReportHeader,{"header-title":t.$t("OVERVIEW_REPORTS.HEADER")},null,8,["header-title"]),f("div",UPe,[v(e.StatsLiveReportsContainer),v(e.ConversationHeatmapContainer),v(e.ResolutionHeatmapContainer),v(e.AgentLiveReportContainer),v(e.TeamLiveReportContainer)])],64)}const GPe=G(FPe,[["render",$Pe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/LiveReports.vue"]]),VPe={props:{label:{type:String,required:!0},value:{type:[String,Number],required:!0},toolTip:{type:String,required:!0},isLoading:{type:Boolean,default:!1}}},HPe={class:"flex flex-col gap-2 items-start justify-center min-w-[10rem]"},jPe={class:"inline-flex items-center gap-1 text-sm font-medium text-n-slate-11"},WPe={key:0,class:"w-12 h-6 mb-0.5 rounded-md bg-n-slate-3 animate-pulse"},zPe={key:1,class:"text-2xl font-medium text-n-slate-12"};function YPe(t,n,a,e,s,r){const o=H("fluent-icon"),i=nt("tooltip");return p(),g("div",HPe,[f("span",jPe,[Oe(C(a.label)+" ",1),ce(v(o,{size:"14",icon:"information",type:"outline",class:"flex flex-shrink-0 text-sm font-normal sm:font-medium text-n-slate-10"},null,512),[[i,a.toolTip,void 0,{right:!0}]])]),a.isLoading?(p(),g("div",WPe)):(p(),g("span",zPe,C(a.value),1))])}const KPe=G(VPe,[["render",YPe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/SLA/SLAMetricCard.vue"]]),XPe={__name:"SLAMetrics",props:{hitRate:{type:String,required:!0},noOfBreaches:{type:Number,required:!0},noOfConversations:{type:Number,required:!0},isLoading:{type:Boolean,default:!1}},setup(t,{expose:n}){n();const a={SLAMetricCard:KPe};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},qPe={class:"flex sm:flex-row flex-col w-full gap-4 sm:gap-14 shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2 px-6 py-5"};function ZPe(t,n,a,e,s,r){return p(),g("div",qPe,[v(e.SLAMetricCard,{label:t.$t("SLA_REPORTS.METRICS.HIT_RATE.LABEL"),value:a.hitRate,"tool-tip":t.$t("SLA_REPORTS.METRICS.HIT_RATE.TOOLTIP"),"is-loading":a.isLoading},null,8,["label","value","tool-tip","is-loading"]),n[0]||(n[0]=f("div",{class:"w-full sm:w-px bg-n-strong"},null,-1)),v(e.SLAMetricCard,{label:t.$t("SLA_REPORTS.METRICS.NO_OF_MISSES.LABEL"),value:a.noOfBreaches,"tool-tip":t.$t("SLA_REPORTS.METRICS.NO_OF_MISSES.TOOLTIP"),"is-loading":a.isLoading},null,8,["label","value","tool-tip","is-loading"]),n[1]||(n[1]=f("div",{class:"w-full sm:w-px bg-n-strong"},null,-1)),v(e.SLAMetricCard,{label:t.$t("SLA_REPORTS.METRICS.NO_OF_CONVERSATIONS.LABEL"),value:a.noOfConversations,"tool-tip":t.$t("SLA_REPORTS.METRICS.NO_OF_CONVERSATIONS.TOOLTIP"),"is-loading":a.isLoading},null,8,["label","value","tool-tip","is-loading"])])}const QPe=G(XPe,[["render",ZPe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/SLA/SLAMetrics.vue"]]),JPe={__name:"TableHeaderCell",props:{span:{type:Number,required:!0},label:{type:String,required:!0}},setup(t,{expose:n}){n();const a=t,e=S(()=>a.span===1?"col-span-1":a.span===2?"col-span-2":a.span===3?"col-span-3":a.span===4?"col-span-4":a.span===5?"col-span-5":a.span===6?"col-span-6":a.span===7?"col-span-7":a.span===8?"col-span-8":a.span===9?"col-span-9":a.span===10?"col-span-10":"col-span-1"),s={props:a,spanClass:e,computed:S};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}};function e3e(t,n,a,e,s,r){return p(),g("div",{class:oe(["flex items-center px-0 py-2 text-xs font-medium text-right uppercase text-n-slate-11 rtl:text-left",e.spanClass])},[qe(t.$slots,"default",{},()=>[Oe(C(a.label),1)])],2)}const wL=G(JPe,[["render",e3e],["__file","/app/app/javascript/dashboard/components/widgets/TableHeaderCell.vue"]]),t3e={__name:"CardLabels",props:{conversationLabels:{type:Array,required:!0}},setup(t,{expose:n}){n();const a=t,e=Hc(),s=le("labels/getLabels"),r=S(()=>s.value.filter(({title:h})=>a.conversationLabels.includes(h))),o=P(!1),i=P(!1),l=P(-1),c=P(null),d=()=>{const h=e.before?100:0;if(!c.value)return;const _=Array.from(c.value.querySelectorAll(".label"));let E=0;i.value=!1,_.forEach((y,b)=>{E+=y.offsetWidth+8,E<c.value.clientWidth-h?l.value=b:i.value=_.length>1})};je(r,()=>{At(()=>d())}),Pe(()=>{d()});const m={props:a,slots:e,accountLabels:s,activeLabels:r,showAllLabels:o,showExpandLabelButton:i,labelPosition:l,labelContainer:c,computeVisibleLabelPosition:d,onShowLabels:h=>{h.stopPropagation(),o.value=!o.value,At(()=>d())},ref:P,computed:S,watch:je,onMounted:Pe,nextTick:At,useSlots:Hc,get useMapGetter(){return le}};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}},n3e={ref:"labelContainer"},a3e=["title"];function s3e(t,n,a,e,s,r){const o=H("woot-label"),i=H("fluent-icon"),l=nt("resize");return ce((p(),g("div",n3e,[e.activeLabels.length||t.$slots.before?(p(),g("div",{key:0,class:oe(["flex items-end flex-shrink min-w-0 gap-y-1",{"h-auto overflow-visible flex-row flex-wrap":e.showAllLabels}])},[qe(t.$slots,"before"),(p(!0),g(de,null,Ae(e.activeLabels,(c,d)=>(p(),L(o,{key:c?c.id:d,title:c.title,description:c.description,color:c.color,variant:"smooth",class:oe(["!mb-0 max-w-[calc(100%-0.5rem)]",{"invisible absolute":!e.showAllLabels&&d>e.labelPosition}]),small:""},null,8,["title","description","color","class"]))),128)),e.showExpandLabelButton?(p(),g("button",{key:0,title:e.showAllLabels?t.$t("CONVERSATION.CARD.HIDE_LABELS"):t.$t("CONVERSATION.CARD.SHOW_LABELS"),class:"h-5 py-0 px-1 flex-shrink-0 mr-6 ml-0 rtl:ml-6 rtl:mr-0 rtl:rotate-180 text-n-slate-11 border-n-strong dark:border-n-strong",onClick:e.onShowLabels},[v(i,{icon:e.showAllLabels?"chevron-left":"chevron-right",size:"12"},null,8,["icon"])],8,a3e)):O("v-if",!0)],2)):O("v-if",!0)])),[[l,e.computeVisibleLabelPosition]])}const ML=G(t3e,[["render",s3e],["__file","/app/app/javascript/dashboard/components/widgets/conversation/conversationCardComponents/CardLabels.vue"]]),o3e={__name:"SLAEventItem",props:{label:{type:String,required:!0},items:{type:Array,required:!0}},setup(t,{expose:n}){n();const e={formatDate:s=>Mn(Ic(s),"MMM dd, yyyy, hh:mm a"),get format(){return Mn},get fromUnixTime(){return Ic}};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}},r3e={class:"flex justify-between w-full"},i3e={class:"text-sm sticky top-0 h-fit font-normal tracking-[-0.6%] min-w-[140px] truncate text-n-slate-11"},l3e={class:"flex flex-col w-full gap-2"};function c3e(t,n,a,e,s,r){return p(),g("div",r3e,[f("span",i3e,C(a.label),1),f("div",l3e,[(p(!0),g(de,null,Ae(a.items,o=>(p(),g("span",{key:o.id,class:"text-sm font-normal text-n-slate-12 text-right tabular-nums"},C(e.formatDate(o.created_at)),1))),128)),qe(t.$slots,"showMore")])])}const d3e=G(o3e,[["render",c3e],["__file","/app/app/javascript/dashboard/components/widgets/conversation/components/SLAEventItem.vue"]]),u3e={__name:"SLAPopoverCard",props:{slaMissedEvents:{type:Array,required:!0}},setup(t,{expose:n}){n();const a=t,{SLA_MISS_TYPES:e}=gt,s=P(!1),r=S(()=>a.slaMissedEvents.filter(u=>u.event_type===e.FRT)),o=S(()=>{const u=a.slaMissedEvents.filter(m=>m.event_type===e.NRT);return s.value?u:u.slice(0,6)}),i=S(()=>a.slaMissedEvents.filter(u=>u.event_type===e.RT)),l=S(()=>o.value.length>6),d={props:a,SLA_MISS_TYPES:e,shouldShowAllNrts:s,frtMisses:r,nrtMisses:o,rtMisses:i,shouldShowMoreNRTButton:l,toggleShowAllNRT:()=>{s.value=!s.value},ref:P,computed:S,get wootConstants(){return gt},SLAEventItem:d3e,Button:Se};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}},p3e={class:"absolute flex flex-col items-start border-n-strong bg-n-solid-3 w-96 backdrop-blur-[100px] px-6 py-5 z-50 shadow rounded-xl gap-4 max-h-96 overflow-auto"},f3e={class:"text-sm font-medium text-n-slate-12"},m3e={key:0,class:"flex flex-col items-end w-full"};function h3e(t,n,a,e,s,r){return p(),g("div",p3e,[f("span",f3e,C(t.$t("SLA.EVENTS.TITLE")),1),e.frtMisses.length?(p(),L(e.SLAEventItem,{key:0,label:t.$t("SLA.EVENTS.FRT"),items:e.frtMisses},null,8,["label","items"])):O("v-if",!0),e.nrtMisses.length?(p(),L(e.SLAEventItem,{key:1,label:t.$t("SLA.EVENTS.NRT"),items:e.nrtMisses},{showMore:z(()=>[e.shouldShowMoreNRTButton?(p(),g("div",m3e,[v(e.Button,{link:"",xs:"",slate:"",class:"hover:!no-underline",icon:e.shouldShowAllNrts?"":"i-lucide-plus",label:e.shouldShowAllNrts?t.$t("SLA.EVENTS.HIDE",{count:e.nrtMisses.length}):t.$t("SLA.EVENTS.SHOW_MORE",{count:e.nrtMisses.length}),onClick:e.toggleShowAllNRT},null,8,["icon","label"])])):O("v-if",!0)]),_:1},8,["label","items"])):O("v-if",!0),e.rtMisses.length?(p(),L(e.SLAEventItem,{key:2,label:t.$t("SLA.EVENTS.RT"),items:e.rtMisses},null,8,["label","items"])):O("v-if",!0)])}const LL=G(u3e,[["render",h3e],["__file","/app/app/javascript/dashboard/components/widgets/conversation/components/SLAPopoverCard.vue"]]),_3e={components:{SLAPopoverCard:LL,NextButton:Se},props:{slaEvents:{type:Array,default:()=>[]}},data(){return{showSlaPopoverCard:!1}},methods:{closeSlaEvents(){this.showSlaPopoverCard=!1},openSlaEvents(){this.showSlaPopoverCard=!this.showSlaPopoverCard}}},g3e={class:"flex items-center col-span-2 text-n-slate-11 justify-end"},b3e={class:"relative"};function v3e(t,n,a,e,s,r){const o=H("NextButton"),i=H("SLAPopoverCard"),l=nt("on-clickaway");return ce((p(),g("div",g3e,[f("div",b3e,[v(o,{link:"",slate:"",type:"button",label:t.$t("SLA_REPORTS.TABLE.VIEW_DETAILS"),onClick:r.openSlaEvents},null,8,["label","onClick"]),s.showSlaPopoverCard?(p(),L(i,{key:0,"sla-missed-events":a.slaEvents,class:"right-0"},null,8,["sla-missed-events"])):O("v-if",!0)])])),[[l,r.closeSlaEvents]])}const E3e=G(_3e,[["render",v3e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/SLA/SLAViewDetails.vue"]]),S3e={__name:"SLAReportItem",props:{slaName:{type:String,required:!0},conversationId:{type:Number,required:!0},conversation:{type:Object,required:!0},slaEvents:{type:Array,default:()=>[]}},setup(t,{expose:n}){n();const a=t,e=S(()=>a.conversation.labels?a.conversation.labels.split(",").map(o=>o.trim()):[]),s=S(()=>({name:"inbox_conversation",params:{conversation_id:a.conversationId}})),r={props:a,conversationLabels:e,routerParams:s,computed:S,UserAvatarWithName:Df,CardLabels:ML,SLAViewDetails:E3e};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},T3e={class:"grid items-center content-center w-full h-16 grid-cols-12 gap-4 px-6 py-0 border-b last:border-b-0 last:rounded-b-xl border-n-weak"},A3e={class:"flex items-center gap-2 col-span-6 px-0 py-2 text-sm tracking-[0.5] text-n-slate-12 rtl:text-right"},y3e={class:"text-n-slate-11"},I3e={class:"capitalize truncate text-n-slate-12"},C3e={class:"flex items-center capitalize py-2 px-0 text-sm tracking-[0.5] text-n-slate-12 text-left rtl:text-right col-span-2"},O3e={class:"flex items-center col-span-2 gap-2"},N3e={key:1,class:"text-n-slate-11"};function x3e(t,n,a,e,s,r){const o=H("router-link");return p(),g("div",T3e,[f("div",A3e,[v(o,{to:e.routerParams,class:"text-n-slate-12 hover:underline"},{default:z(()=>[Oe(C(`#${a.conversationId}`),1)]),_:1},8,["to"]),f("span",y3e,C(t.$t("SLA_REPORTS.WITH")),1),f("span",I3e,C(a.conversation.contact.name),1),e.conversationLabels.length?(p(),L(e.CardLabels,{key:0,class:"w-[60%]","conversation-id":a.conversationId,"conversation-labels":e.conversationLabels},null,8,["conversation-id","conversation-labels"])):O("v-if",!0)]),f("div",C3e,C(a.slaName),1),f("div",O3e,[a.conversation.assignee?(p(),L(e.UserAvatarWithName,{key:0,user:a.conversation.assignee},null,8,["user"])):(p(),g("span",N3e," --- "))]),v(e.SLAViewDetails,{"sla-events":a.slaEvents},null,8,["sla-events"])])}const R3e=G(S3e,[["render",x3e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/SLA/SLAReportItem.vue"]]),w3e={name:"SLATable",components:{SLAReportItem:R3e,TableFooter:RS,Spinner:ls,TableHeaderCell:wL},props:{slaReports:{type:Array,default:()=>[]},totalCount:{type:Number,default:0},currentPage:{type:Number,default:1},pageSize:{type:Number,default:25},isLoading:{type:Boolean,default:!1}},emits:["pageChange"],data(){return{pageNo:1}},computed:{shouldShowFooter(){return this.currentPage===1?this.totalCount>this.pageSize:this.slaReports.length>0}},methods:{onPageChange(t){this.$emit("pageChange",t)}}},M3e={class:"min-w-full shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2 p-6"},L3e={class:"grid content-center h-12 grid-cols-12 gap-4 px-6 py-0 bg-n-slate-2 rounded-md"},D3e={key:0,class:"flex items-center justify-center h-32"},P3e={key:1},k3e={key:2,class:"flex items-center justify-center h-32"};function B3e(t,n,a,e,s,r){const o=H("TableHeaderCell"),i=H("Spinner"),l=H("SLAReportItem"),c=H("TableFooter");return p(),g("div",null,[f("div",M3e,[f("div",L3e,[v(o,{span:6,label:t.$t("SLA_REPORTS.TABLE.HEADER.CONVERSATION")},null,8,["label"]),v(o,{span:2,label:t.$t("SLA_REPORTS.TABLE.HEADER.POLICY")},null,8,["label"]),v(o,{span:2,label:t.$t("SLA_REPORTS.TABLE.HEADER.AGENT")},null,8,["label"]),v(o,{span:1,label:""})]),a.isLoading?(p(),g("div",D3e,[v(i),f("span",null,C(t.$t("SLA_REPORTS.LOADING")),1)])):a.slaReports.length>0?(p(),g("div",P3e,[(p(!0),g(de,null,Ae(a.slaReports,d=>(p(),L(l,{key:d.applied_sla.id,"sla-name":d.applied_sla.sla_name,conversation:d.conversation,"conversation-id":d.conversation.id,"sla-events":d.sla_events},null,8,["sla-name","conversation","conversation-id","sla-events"]))),128))])):(p(),g("div",k3e,C(t.$t("SLA_REPORTS.NO_RECORDS")),1))]),r.shouldShowFooter?(p(),L(c,{key:0,"current-page":a.currentPage,"total-count":a.totalCount,"page-size":a.pageSize,onPageChange:r.onPageChange},null,8,["current-page","total-count","page-size","onPageChange"])):O("v-if",!0)])}const F3e=G(w3e,[["render",B3e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/SLA/SLATable.vue"]]),jC=(t,n)=>t.map(a=>({id:a.id,name:n==="labels"?a.title:a.name,type:n})),U3e=(t,n,a)=>t.find(e=>n==="labels"?e.title===a:e.id.toString()===a.toString()),af=(t,n)=>({keyToType:{assigned_agent_id:"agents",inbox_id:"inboxes",team_id:"teams",sla_policy_id:"sla",label_list:"labels"},typeToKey:{agents:"assigned_agent_id",inboxes:"inbox_id",teams:"team_id",sla:"sla_policy_id",labels:"label_list"}})[n][t],$3e={__name:"DropdownButton",props:{buttonText:{type:String,default:""},trailingIcon:{type:Boolean,default:!1},icon:{type:String,default:""}},setup(t,{expose:n}){n();const a={Button:Se};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},G3e={class:"min-w-0 truncate"};function V3e(t,n,a,e,s,r){return p(),L(e.Button,{ghost:"",slate:"",sm:"",class:"relative",icon:a.icon,"trailing-icon":a.trailingIcon},{default:z(()=>[f("span",G3e,C(a.buttonText),1),qe(t.$slots,"dropdown")]),_:3},8,["icon","trailing-icon"])}const pp=G($3e,[["render",V3e],["__file","/app/app/javascript/dashboard/components/ui/Dropdown/DropdownButton.vue"]]),H3e={__name:"DropdownListItemButton",props:{buttonText:{type:String,default:""},isActive:{type:Boolean,default:!1},icon:{type:String,default:""},iconColor:{type:String,default:""}},setup(t,{expose:n}){n();const a={};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},j3e={class:"relative inline-flex items-center justify-start w-full p-3 border-0 rounded-none first:rounded-t-xl last:rounded-b-xl h-11 hover:enabled:bg-n-alpha-2"},W3e={class:"inline-flex items-center gap-3 overflow-hidden"},z3e={class:"text-sm font-medium truncate text-n-slate-12"};function Y3e(t,n,a,e,s,r){const o=H("fluent-icon");return p(),g("button",j3e,[f("div",W3e,[a.icon?(p(),L(o,{key:0,icon:a.icon,size:"18",style:nn({color:a.iconColor})},null,8,["icon","style"])):O("v-if",!0),f("span",z3e,C(a.buttonText),1),a.isActive?(p(),L(o,{key:1,icon:"checkmark",size:"18",class:"flex-shrink-0 text-n-slate-12"})):O("v-if",!0)]),qe(t.$slots,"dropdown")])}const DL=G(H3e,[["render",Y3e],["__file","/app/app/javascript/dashboard/components/ui/Dropdown/DropdownListItemButton.vue"]]),K3e={__name:"DropdownSearch",props:an({inputPlaceholder:{type:String,default:""},showClearFilter:{type:Boolean,default:!1}},{modelValue:{type:String,default:""},modelModifiers:{}}),emits:an(["remove"],["update:modelValue"]),setup(t,{expose:n,emit:a}){n();const e=a,s=dn(t,"modelValue"),r={emit:e,value:s,NextButton:Se};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},X3e={class:"flex items-center justify-between h-10 min-h-[40px] sticky top-0 bg-n-solid-2 dark:bg-n-solid-2 z-10 gap-2 px-3 border-b rounded-t-xl border-n-weak"},q3e=["placeholder"];function Z3e(t,n,a,e,s,r){const o=H("fluent-icon");return p(),g("div",X3e,[f("div",{class:"flex items-center w-full gap-2",onKeyup:n[1]||(n[1]=Vn(Ve(()=>{},["prevent"]),["space"]))},[v(o,{icon:"search",size:"16",class:"text-n-slate-11 flex-shrink-0"}),ce(f("input",{"onUpdate:modelValue":n[0]||(n[0]=i=>e.value=i),placeholder:a.inputPlaceholder,type:"text",class:"w-full mb-0 text-sm !outline-0 bg-transparent text-n-slate-12 placeholder:text-n-slate-10 reset-base"},null,8,q3e),[[Et,e.value]])],32),O(" Clear filter button "),!a.modelValue&&a.showClearFilter?(p(),L(e.NextButton,{key:0,faded:"",xs:"",class:"flex-shrink-0",label:t.$t("REPORT.FILTER_ACTIONS.CLEAR_FILTER"),onClick:n[2]||(n[2]=i=>e.emit("remove"))},null,8,["label"])):O("v-if",!0)])}const Q3e=G(K3e,[["render",Z3e],["__file","/app/app/javascript/dashboard/components/ui/Dropdown/DropdownSearch.vue"]]),J3e={__name:"DropdownEmptyState",props:{message:{type:String,default:""}},setup(t,{expose:n}){n();const a={};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},eke={class:"flex items-center justify-center h-10 text-sm text-n-slate-11"};function tke(t,n,a,e,s,r){return p(),g("div",eke,C(a.message),1)}const PL=G(J3e,[["render",tke],["__file","/app/app/javascript/dashboard/components/ui/Dropdown/DropdownEmptyState.vue"]]),nke={__name:"DropdownLoadingState",props:{message:{type:String,default:""}},setup(t,{expose:n}){n();const a={};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},ake={class:"flex items-center justify-center h-10 text-sm text-n-slate-11"};function ske(t,n,a,e,s,r){return p(),g("div",ake,C(a.message),1)}const oke=G(nke,[["render",ske],["__file","/app/app/javascript/dashboard/components/ui/Dropdown/DropdownLoadingState.vue"]]),rke={__name:"DropdownList",props:{listItems:{type:Array,default:()=>[]},enableSearch:{type:Boolean,default:!1},inputPlaceholder:{type:String,default:""},activeFilterId:{type:[String,Number],default:null},showClearFilter:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},loadingPlaceholder:{type:String,default:""}},emits:["onSearch","select","removeFilter"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=P(""),o=Ja(_=>{s("onSearch",_)},300),i=_=>{r.value=_,o(_)},l=S(()=>r.value?lo(e.listItems,r.value,["name"]):e.listItems),c=S(()=>!l.value.length),d=_=>e.activeFilterId?_===e.activeFilterId:!1,u=S(()=>e.isLoading&&c.value&&e.loadingPlaceholder),m=S(()=>!e.isLoading&&c.value),h={props:e,emit:s,searchTerm:r,debouncedEmit:o,onSearch:i,filteredListItems:l,isDropdownListEmpty:c,isFilterActive:d,shouldShowLoadingState:u,shouldShowEmptyState:m,ref:P,computed:S,get debounce(){return Ja},get picoSearch(){return lo},ListItemButton:DL,DropdownSearch:Q3e,DropdownEmptyState:PL,DropdownLoadingState:oke};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}};function ike(t,n,a,e,s,r){return p(),g("div",{class:"absolute z-20 w-40 bg-n-solid-2 border-0 outline outline-1 outline-n-weak shadow rounded-xl max-h-[400px]",onClick:n[2]||(n[2]=Ve(()=>{},["stop"]))},[qe(t.$slots,"search",{},()=>[a.enableSearch?(p(),L(e.DropdownSearch,{key:0,modelValue:e.searchTerm,"onUpdate:modelValue":[n[0]||(n[0]=o=>e.searchTerm=o),e.onSearch],"input-placeholder":a.inputPlaceholder,"show-clear-filter":a.showClearFilter,onRemove:n[1]||(n[1]=o=>t.$emit("removeFilter"))},null,8,["modelValue","input-placeholder","show-clear-filter"])):O("v-if",!0)]),qe(t.$slots,"listItem",{},()=>[e.shouldShowLoadingState?(p(),L(e.DropdownLoadingState,{key:0,message:a.loadingPlaceholder},null,8,["message"])):e.shouldShowEmptyState?(p(),L(e.DropdownEmptyState,{key:1,message:t.$t("REPORT.FILTER_ACTIONS.EMPTY_LIST")},null,8,["message"])):O("v-if",!0),(p(!0),g(de,null,Ae(e.filteredListItems,o=>(p(),L(e.ListItemButton,{key:o.id,"is-active":e.isFilterActive(o.id),"button-text":o.name,icon:o.icon,"icon-color":o.iconColor,onClick:Ve(i=>e.emit("select",o),["stop","prevent"])},null,8,["is-active","button-text","icon","icon-color","onClick"]))),128))])])}const e_=G(rke,[["render",ike],["__file","/app/app/javascript/dashboard/components/ui/Dropdown/DropdownList.vue"]]),lke={__name:"ActiveFilterChip",props:{name:{type:String,required:!0},id:{type:Number,required:!0},type:{type:String,required:!0},options:{type:Array,default:()=>[]},activeFilterType:{type:String,default:""},showMenu:{type:Boolean,default:!1},placeholder:{type:String,default:""},enableSearch:{type:Boolean,default:!1}},emits:["toggleDropdown","removeFilter","addFilter","closeDropdown"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,c={props:e,emit:s,toggleDropdown:()=>s("toggleDropdown",e.type),removeFilter:()=>s("removeFilter",e.type),addFilter:d=>s("addFilter",d),closeDropdown:()=>s("closeDropdown"),FilterButton:pp,FilterListDropdown:e_};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}};function cke(t,n,a,e,s,r){const o=nt("on-clickaway");return p(),L(e.FilterButton,{"trailing-icon":"",icon:"i-lucide-chevron-down","button-text":a.name,onClick:e.toggleDropdown},Ro({_:2},[a.showMenu&&a.activeFilterType===a.type?{name:"dropdown",fn:z(()=>[a.options?ce((p(),L(e.FilterListDropdown,{key:0,"show-clear-filter":"","list-items":a.options,"active-filter-id":a.id,"input-placeholder":a.placeholder,"enable-search":a.enableSearch,class:"flex flex-col w-[240px] overflow-y-auto left-0 md:left-auto md:right-0 top-10",onSelect:e.addFilter,onRemoveFilter:e.removeFilter},null,8,["list-items","active-filter-id","input-placeholder","enable-search"])),[[o,e.closeDropdown]]):O("v-if",!0)]),key:"0"}:void 0]),1032,["button-text"])}const dke=G(lke,[["render",cke],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/Filters/v3/ActiveFilterChip.vue"]]),uke={__name:"AddFilterChip",props:{name:{type:String,required:!0},menuOption:{type:Array,default:()=>[]},showMenu:{type:Boolean,default:!1},placeholderI18nKey:{type:String,default:""},enableSearch:{type:Boolean,default:!0},emptyStateMessage:{type:String,default:""}},emits:["toggleDropdown","addFilter","closeDropdown"],setup(t,{expose:n,emit:a}){n();const e=a,s=P(null),r=m=>{s.value=m},o=()=>{s.value=null},u={emit:e,hoveredItemId:s,showSubMenu:r,hideSubMenu:o,isHovered:m=>s.value===m,toggleDropdown:()=>e("toggleDropdown"),addFilter:m=>{e("addFilter",m),o()},closeDropdown:()=>{o(),e("closeDropdown")},FilterButton:pp,FilterListDropdown:e_,FilterListItemButton:DL,FilterDropdownEmptyState:PL,ref:P};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}};function pke(t,n,a,e,s,r){const o=nt("on-clickaway");return p(),L(e.FilterButton,{"button-text":a.name,icon:"i-lucide-filter",onClick:e.toggleDropdown},Ro({_:2},[a.showMenu?{name:"dropdown",fn:z(()=>[ce((p(),L(e.FilterListDropdown,{class:"left-0 md:right-0 top-10"},{listItem:z(()=>[a.menuOption.length?O("v-if",!0):(p(),L(e.FilterDropdownEmptyState,{key:0,message:a.emptyStateMessage},null,8,["message"])),(p(!0),g(de,null,Ae(a.menuOption,i=>(p(),L(e.FilterListItemButton,{key:i.id,"button-text":i.name,onMouseenter:l=>e.showSubMenu(i.id),onMouseleave:e.hideSubMenu,onFocus:l=>e.showSubMenu(i.id)},Ro({_:2},[i.options&&e.isHovered(i.id)?{name:"dropdown",fn:z(()=>[v(e.FilterListDropdown,{"list-items":i.options,"input-placeholder":t.$t(`${a.placeholderI18nKey}.${i.type.toUpperCase()}`),"enable-search":a.enableSearch,class:"flex flex-col w-[216px] overflow-y-auto top-0 left-36",onSelect:e.addFilter},null,8,["list-items","input-placeholder","enable-search"])]),key:"0"}:void 0]),1032,["button-text","onMouseenter","onFocus"]))),128))]),_:1})),[[o,e.closeDropdown]])]),key:"0"}:void 0]),1032,["button-text"])}const fke=G(uke,[["render",pke],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/Filters/v3/AddFilterChip.vue"]]),mke={components:{FilterButton:pp,ActiveFilterChip:dke,AddFilterChip:fke},emits:["filterChange"],data(){return{showDropdownMenu:!1,showSubDropdownMenu:!1,activeFilterType:"",appliedFilters:{assigned_agent_id:null,inbox_id:null,team_id:null,sla_policy_id:null,label_list:null}}},computed:{..._t({agents:"agents/getAgents",inboxes:"inboxes/getInboxes",teams:"teams/getTeams",labels:"labels/getLabels",sla:"sla/getSLA"}),filterListMenuItems(){const t=[{id:"1",name:this.$t("SLA_REPORTS.DROPDOWN.SLA"),type:"sla"},{id:"2",name:this.$t("SLA_REPORTS.DROPDOWN.INBOXES"),type:"inboxes"},{id:"3",name:this.$t("SLA_REPORTS.DROPDOWN.AGENTS"),type:"agents"},{id:"4",name:this.$t("SLA_REPORTS.DROPDOWN.TEAMS"),type:"teams"},{id:"5",name:this.$t("SLA_REPORTS.DROPDOWN.LABELS"),type:"labels"}],a=Object.keys(this.appliedFilters).filter(e=>this.appliedFilters[e]).map(e=>af(e,"keyToType"));return t.filter(({type:e})=>!a.includes(e)).map(({id:e,name:s,type:r})=>({id:e,name:s,type:r,options:jC(this[r],r)}))},activeFilters(){return Object.keys(this.appliedFilters).filter(n=>this.appliedFilters[n]).map(n=>{const a=af(n,"keyToType"),e=U3e(this[a],a,this.appliedFilters[n]);return{id:e.id,name:a==="labels"?e.title:e.name,type:a,options:jC(this[a],a)}})},hasActiveFilters(){return Object.values(this.appliedFilters).some(t=>t!==null)},isAllFilterSelected(){return!this.filterListMenuItems.length}},methods:{addFilter(t){const{type:n,id:a,name:e}=t,s=af(n,"typeToKey");this.appliedFilters[s]=n==="labels"?e:a,this.$emit("filterChange",this.appliedFilters),this.resetDropdown()},removeFilter(t){const n=af(t,"typeToKey");this.appliedFilters[n]=null,this.$emit("filterChange",this.appliedFilters)},clearAllFilters(){this.appliedFilters={assigned_agent_id:null,inbox_id:null,team_id:null,sla_policy_id:null,label_list:null},this.$emit("filterChange",this.appliedFilters),this.resetDropdown()},showDropdown(){this.showSubDropdownMenu=!1,this.showDropdownMenu=!this.showDropdownMenu},closeDropdown(){this.showDropdownMenu=!1},openActiveFilterDropdown(t){this.closeDropdown(),this.activeFilterType=t,this.showSubDropdownMenu=!this.showSubDropdownMenu},closeActiveFilterDropdown(){this.activeFilterType="",this.showSubDropdownMenu=!1},resetDropdown(){this.closeDropdown(),this.closeActiveFilterDropdown()}}},hke={class:"flex flex-col flex-wrap items-start gap-2 md:items-center md:flex-nowrap md:flex-row"},_ke={key:0,class:"flex flex-wrap gap-2 md:flex-nowrap"},gke={key:1,class:"w-full h-px border md:w-px md:h-5 border-n-weak"},bke={class:"flex items-center gap-2"},vke={key:1,class:"w-px h-5 border border-n-weak"};function Eke(t,n,a,e,s,r){const o=H("ActiveFilterChip"),i=H("AddFilterChip"),l=H("FilterButton");return p(),g("div",hke,[O(" Active filters section "),r.hasActiveFilters?(p(),g("div",_ke,[(p(!0),g(de,null,Ae(r.activeFilters,c=>(p(),L(o,Ta({ref_for:!0},c,{key:c.type,placeholder:t.$t(`SLA_REPORTS.DROPDOWN.INPUT_PLACEHOLDER.${c.type.toUpperCase()}`),"active-filter-type":s.activeFilterType,"show-menu":s.showSubDropdownMenu,"enable-search":"",onToggleDropdown:r.openActiveFilterDropdown,onCloseDropdown:r.closeActiveFilterDropdown,onAddFilter:r.addFilter,onRemoveFilter:r.removeFilter}),null,16,["placeholder","active-filter-type","show-menu","onToggleDropdown","onCloseDropdown","onAddFilter","onRemoveFilter"]))),128))])):O("v-if",!0),O(" Dividing line between Active filters and Add filter button "),r.hasActiveFilters&&!r.isAllFilterSelected?(p(),g("div",gke)):O("v-if",!0),O(" Add filter and clear filter button "),f("div",bke,[r.isAllFilterSelected?O("v-if",!0):(p(),L(i,{key:0,"placeholder-i18n-key":"SLA_REPORTS.DROPDOWN.INPUT_PLACEHOLDER",name:t.$t("SLA_REPORTS.DROPDOWN.ADD_FIlTER"),"menu-option":r.filterListMenuItems,"show-menu":s.showDropdownMenu,"empty-state-message":t.$t("SLA_REPORTS.DROPDOWN.NO_FILTER"),onToggleDropdown:r.showDropdown,onCloseDropdown:r.closeDropdown,onAddFilter:r.addFilter},null,8,["name","menu-option","show-menu","empty-state-message","onToggleDropdown","onCloseDropdown","onAddFilter"])),O(" Dividing line between Add filter and Clear all filter button "),r.hasActiveFilters?(p(),g("div",vke)):O("v-if",!0),O(" Clear all filter button "),r.hasActiveFilters?(p(),L(l,{key:2,"button-text":t.$t("SLA_REPORTS.DROPDOWN.CLEAR_ALL"),onClick:r.clearAllFilters},null,8,["button-text","onClick"])):O("v-if",!0)])])}const Ske=G(mke,[["render",Eke],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/SLA/SLAFilter.vue"]]),Tke={components:{SLAFilter:Ske},emits:["filterChange"],data(){return{selectedDateRange:Dl.LAST_7_DAYS,selectedGroupByFilter:null,customDateRange:[new Date,new Date]}},computed:{to(){return jf(this.customDateRange[1])},from(){return Hf(this.customDateRange[0])}},watch:{businessHoursSelected(){this.emitChange()}},mounted(){this.setInitialRange()},methods:{setInitialRange(){const{offset:t}=this.selectedDateRange,n=Ko(new Date,t),a=Hf(n),e=jf(new Date);this.$emit("filterChange",{from:a,to:e,...this.selectedGroupByFilter})},emitChange(){const{from:t,to:n}=this;this.$emit("filterChange",{from:t,to:n,...this.selectedGroupByFilter})},emitFilterChange(t){this.selectedGroupByFilter=t,this.emitChange()},onDateRangeChange(t){this.customDateRange=t,this.emitChange()}}},Ake={class:"flex flex-col flex-wrap w-full gap-3 md:flex-row"};function yke(t,n,a,e,s,r){const o=H("woot-date-picker"),i=H("SLAFilter");return p(),g("div",Ake,[v(o,{onDateRangeChanged:r.onDateRangeChange},null,8,["onDateRangeChanged"]),v(i,{onFilterChange:r.emitFilterChange},null,8,["onFilterChange"])])}const Ike=G(Tke,[["render",yke],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/components/SLA/SLAReportFilters.vue"]]),Cke={name:"SLAReports",components:{V4Button:Se,ReportHeader:Ir,SLAMetrics:QPe,SLATable:F3e,SLAReportFilters:Ike},data(){return{pageNumber:1,activeFilter:{from:0,to:0,assigned_agent_id:null,inbox_id:null,team_id:null,sla_policy_id:null,label_list:null}}},computed:{..._t({slaReports:"slaReports/getAll",slaMetrics:"slaReports/getMetrics",slaMeta:"slaReports/getMeta",uiFlags:"slaReports/getUIFlags"})},mounted(){this.$store.dispatch("agents/get"),this.$store.dispatch("inboxes/get"),this.$store.dispatch("teams/get"),this.$store.dispatch("labels/get"),this.$store.dispatch("sla/get"),this.fetchSLAMetrics(),this.fetchSLAReports()},methods:{fetchSLAReports({pageNumber:t}={}){this.$store.dispatch("slaReports/get",{page:t||this.pageNumber,...this.activeFilter})},fetchSLAMetrics(){this.$store.dispatch("slaReports/getMetrics",this.activeFilter)},onPageChange(t){this.fetchSLAReports({pageNumber:t})},onFilterChange(t){this.activeFilter=t,this.fetchSLAReports(),this.fetchSLAMetrics()},downloadReports(){const t="sla";try{this.$store.dispatch("slaReports/download",{fileName:Kc({type:t,to:this.activeFilter.to}),...this.activeFilter})}catch{Z(this.$t("SLA_REPORTS.DOWNLOAD_FAILED"))}}}},Oke={class:"flex flex-col flex-1 gap-6"};function Nke(t,n,a,e,s,r){const o=H("V4Button"),i=H("ReportHeader"),l=H("SLAReportFilters"),c=H("SLAMetrics"),d=H("SLATable");return p(),g(de,null,[v(i,{"header-title":t.$t("SLA_REPORTS.HEADER")},{default:z(()=>[v(o,{label:t.$t("SLA_REPORTS.DOWNLOAD_SLA_REPORTS"),icon:"i-ph-download-simple",size:"sm",onClick:r.downloadReports},null,8,["label","onClick"])]),_:1},8,["header-title"]),f("div",Oke,[v(l,{onFilterChange:r.onFilterChange},null,8,["onFilterChange"]),v(c,{"hit-rate":t.slaMetrics.hitRate,"no-of-breaches":t.slaMetrics.numberOfSLAMisses,"no-of-conversations":t.slaMetrics.numberOfConversations,"is-loading":t.uiFlags.isFetchingMetrics},null,8,["hit-rate","no-of-breaches","no-of-conversations","is-loading"]),v(d,{"sla-reports":t.slaReports,"is-loading":t.uiFlags.isFetching,"current-page":Number(t.slaMeta.currentPage),"total-count":Number(t.slaMeta.count),onPageChange:r.onPageChange},null,8,["sla-reports","is-loading","current-page","total-count","onPageChange"])])],64)}const xke=G(Cke,[["render",Nke],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/reports/SLAReports.vue"]]),$r={featureFlag:pt.REPORTS,permissions:["administrator","report_manage"]},Rke=[{path:"agent",name:"agent_reports",meta:$r,component:iLe},{path:"inboxes",name:"inbox_reports",meta:$r,component:dLe},{path:"label",name:"label_reports",meta:$r,component:fLe},{path:"teams",name:"team_reports",meta:$r,component:_Le}],wke=[{path:"agents_overview",name:"agent_reports_index",meta:{permissions:["administrator","report_manage"]},component:sMe},{path:"agents/:id",name:"agent_reports_show",meta:{permissions:["administrator","report_manage"]},component:zMe},{path:"inboxes_overview",name:"inbox_reports_index",meta:{permissions:["administrator","report_manage"]},component:iMe},{path:"inboxes/:id",name:"inbox_reports_show",meta:{permissions:["administrator","report_manage"]},component:qMe},{path:"teams_overview",name:"team_reports_index",meta:{permissions:["administrator","report_manage"]},component:dMe},{path:"teams/:id",name:"team_reports_show",meta:{permissions:["administrator","report_manage"]},component:eLe},{path:"labels_overview",name:"label_reports_index",meta:{permissions:["administrator","report_manage"]},component:fMe},{path:"labels/:id",name:"label_reports_show",meta:{permissions:["administrator","report_manage"]},component:sLe}],Mke={routes:[{path:vt("accounts/:accountId/reports"),component:t2e,children:[{path:"",redirect:t=>({name:"account_overview_reports",params:t.params})},{path:"overview",name:"account_overview_reports",meta:$r,component:GPe},{path:"conversation",name:"conversation_reports",meta:$r,component:QRe},...Rke,...wke,{path:"sla",name:"sla_reports",meta:$r,component:xke},{path:"csat",name:"csat_reports",meta:$r,component:JLe},{path:"bot",name:"bot_reports",meta:$r,component:iDe}]}]},kL={name:{required:Ge,minLength:Rt(2)},thresholdTime:{decimal:qk,minValue:w2(.001)}},Lke={props:{threshold:{type:Number,default:null},thresholdUnit:{type:String,default:"Minutes"},label:{type:String,default:""},placeholder:{type:String,default:""}},emits:["unit","isInValid","updateThreshold"],setup(){return{v$:rt()}},data(){return{thresholdTime:this.threshold||"",thresholdUnitValue:this.thresholdUnit,options:[{value:"Minutes",label:"minutes"},{value:"Hours",label:"hours"},{value:"Days",label:"days"}]}},validations:kL,computed:{thresholdTimeErrorMessage(){let t="";return this.v$.thresholdTime.$error&&(!this.v$.thresholdTime.numeric||!this.v$.thresholdTime.minValue)&&(t=this.$t("SLA.FORM.THRESHOLD_TIME.INVALID_FORMAT_ERROR")),t}},watch:{threshold:{immediate:!0,handler(t){Number.isNaN(t)||(this.thresholdTime=t)}},thresholdUnit:{immediate:!0,handler(t){this.thresholdUnitValue=t}}},methods:{onThresholdUnitChange(){this.$emit("unit",this.thresholdUnitValue)},onThresholdTimeChange(){this.v$.thresholdTime.$touch();const t=this.v$.thresholdTime.$invalid;this.$emit("isInValid",t),this.$emit("updateThreshold",this.thresholdTime?Number(this.thresholdTime):null)}}},Dke={class:"flex items-center w-full gap-3"},Pke={class:"mt-7"},kke=["value"];function Bke(t,n,a,e,s,r){const o=H("woot-input");return p(),g("div",Dke,[v(o,{modelValue:s.thresholdTime,"onUpdate:modelValue":[n[0]||(n[0]=i=>s.thresholdTime=i),r.onThresholdTimeChange],type:"number",class:oe([{error:e.v$.thresholdTime.$error},"flex-grow"]),styles:{borderRadius:"0.75rem",padding:"0.375rem 0.75rem",fontSize:"0.875rem"},label:a.label,placeholder:a.placeholder,error:r.thresholdTimeErrorMessage},null,8,["modelValue","class","label","placeholder","error","onUpdate:modelValue"]),O(" the mt-7 handles the label offset "),f("div",Pke,[ce(f("select",{"onUpdate:modelValue":n[1]||(n[1]=i=>s.thresholdUnitValue=i),class:"px-4 py-1.5 min-w-[6.5rem] h-10 text-sm font-medium border-0 rounded-xl hover:cursor-pointer pr-7",onChange:n[2]||(n[2]=(...i)=>r.onThresholdUnitChange&&r.onThresholdUnitChange(...i))},[(p(!0),g(de,null,Ae(s.options,(i,l)=>(p(),g("option",{key:l,value:i.value},C(i.label),9,kke))),128))],544),[[Un,s.thresholdUnitValue]])])])}const Fke=G(Lke,[["render",Bke],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/sla/SlaTimeInput.vue"]]),Uke={components:{SlaTimeInput:Fke,NextButton:Se,ToggleSwitch:mo},props:{selectedResponse:{type:Object,default:()=>{}},submitLabel:{type:String,required:!0}},emits:["close","submitSla"],setup(){return{v$:rt()}},data(){return{name:"",description:"",isSlaTimeInputsInvalid:!1,slaTimeInputsValidation:{},slaTimeInputs:[{threshold:null,unit:"Minutes",label:"SLA.FORM.FIRST_RESPONSE_TIME.LABEL",placeholder:"SLA.FORM.FIRST_RESPONSE_TIME.PLACEHOLDER"},{threshold:null,unit:"Minutes",label:"SLA.FORM.NEXT_RESPONSE_TIME.LABEL",placeholder:"SLA.FORM.NEXT_RESPONSE_TIME.PLACEHOLDER"},{threshold:null,unit:"Minutes",label:"SLA.FORM.RESOLUTION_TIME.LABEL",placeholder:"SLA.FORM.RESOLUTION_TIME.PLACEHOLDER"}],onlyDuringBusinessHours:!1}},validations:kL,computed:{..._t({uiFlags:"sla/getUIFlags"}),isSubmitDisabled(){return this.v$.name.$invalid||this.isSlaTimeInputsInvalid||this.uiFlags.isUpdating},slaNameErrorMessage(){let t="";return this.v$.name.$error&&(this.v$.name.required?this.v$.name.minLength||(t=this.$t("SLA.FORM.NAME.MINIMUM_LENGTH_ERROR")):t=this.$t("SLA.FORM.NAME.REQUIRED_ERROR")),t}},mounted(){this.selectedResponse&&this.setFormValues()},methods:{onClose(){this.$emit("close")},setFormValues(){const{name:t,description:n,first_response_time_threshold:a,next_response_time_threshold:e,resolution_time_threshold:s,only_during_business_hours:r}=this.selectedResponse;this.name=t,this.description=n,this.onlyDuringBusinessHours=r;const o=[a,e,s];this.slaTimeInputs.forEach((i,l)=>{const c=f2(o[l],{minute:"Minutes",hour:"Hours",day:"Days"});i.threshold=c.time,i.unit=c.unit})},updateThreshold(t,n){this.slaTimeInputs[t].threshold=n},updateUnit(t,n){this.slaTimeInputs[t].unit=n},onSubmit(){const t={name:this.name,description:this.description,first_response_time_threshold:this.convertToSeconds(0),next_response_time_threshold:this.convertToSeconds(1),resolution_time_threshold:this.convertToSeconds(2),only_during_business_hours:this.onlyDuringBusinessHours};this.$emit("submitSla",t)},convertToSeconds(t){const{threshold:n,unit:a}=this.slaTimeInputs[t];return n===null||n===0?null:Number(n*({Minutes:60,Hours:3600,Days:86400}[a]||1))},handleIsInvalid(t,n){this.slaTimeInputsValidation={...this.slaTimeInputsValidation,[t]:n},this.checkValidationState()},checkValidationState(){const t=Object.values(this.slaTimeInputsValidation).some(n=>n);this.isSlaTimeInputsInvalid=t}}},$ke={class:"flex flex-col h-auto overflow-auto"},Gke={class:"mt-3 flex h-10 items-center text-sm w-full gap-2 border border-solid border-n-strong px-3 py-1.5 rounded-xl justify-between"},Vke={for:"sla_bh",class:"text-n-slate-11"},Hke={class:"flex items-center justify-end w-full gap-2 mt-8"};function jke(t,n,a,e,s,r){const o=H("woot-input"),i=H("SlaTimeInput"),l=H("ToggleSwitch"),c=H("NextButton");return p(),g("div",$ke,[f("form",{class:"flex flex-wrap mx-0",onSubmit:n[3]||(n[3]=Ve((...d)=>r.onSubmit&&r.onSubmit(...d),["prevent"]))},[v(o,{modelValue:s.name,"onUpdate:modelValue":n[0]||(n[0]=d=>s.name=d),class:oe([{error:e.v$.name.$error},"w-full"]),styles:{borderRadius:"0.75rem",padding:"0.375rem 0.75rem",fontSize:"0.875rem"},label:t.$t("SLA.FORM.NAME.LABEL"),placeholder:t.$t("SLA.FORM.NAME.PLACEHOLDER"),error:r.slaNameErrorMessage,onInput:e.v$.name.$touch,onBlur:e.v$.name.$touch},null,8,["modelValue","class","label","placeholder","error","onInput","onBlur"]),v(o,{modelValue:s.description,"onUpdate:modelValue":n[1]||(n[1]=d=>s.description=d),class:"w-full",styles:{borderRadius:"0.75rem",padding:"0.375rem 0.75rem",fontSize:"0.875rem"},label:t.$t("SLA.FORM.DESCRIPTION.LABEL"),placeholder:t.$t("SLA.FORM.DESCRIPTION.PLACEHOLDER")},null,8,["modelValue","label","placeholder"]),(p(!0),g(de,null,Ae(s.slaTimeInputs,(d,u)=>(p(),L(i,{key:u,threshold:d.threshold,"threshold-unit":d.unit,label:t.$t(d.label),placeholder:t.$t(d.placeholder),onUpdateThreshold:m=>r.updateThreshold(u,m),onUnit:m=>r.updateUnit(u,m),onIsInValid:m=>r.handleIsInvalid(u,m)},null,8,["threshold","threshold-unit","label","placeholder","onUpdateThreshold","onUnit","onIsInValid"]))),128)),f("div",Gke,[f("span",Vke,C(t.$t("SLA.FORM.BUSINESS_HOURS.PLACEHOLDER")),1),v(l,{id:"sla_bh",modelValue:s.onlyDuringBusinessHours,"onUpdate:modelValue":n[2]||(n[2]=d=>s.onlyDuringBusinessHours=d)},null,8,["modelValue"])]),f("div",Hke,[v(c,{faded:"",slate:"",type:"reset",label:t.$t("SLA.FORM.CANCEL"),onClick:Ve(r.onClose,["prevent"])},null,8,["label","onClick"]),v(c,{type:"submit",label:a.submitLabel,disabled:r.isSubmitDisabled,"is-loading":t.uiFlags.isUpdating},null,8,["label","disabled","is-loading"])])],32)])}const Wke=G(Uke,[["render",jke],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/sla/SlaForm.vue"]]),zke={components:{SlaForm:Wke},emits:["close"],methods:{onClose(){this.$emit("close")},async addSLA(t){try{await this.$store.dispatch("sla/create",t),Z(this.$t("SLA.ADD.API.SUCCESS_MESSAGE")),this.onClose()}catch(n){const a=n.message||this.$t("SLA.ADD.API.ERROR_MESSAGE");Z(a)}}}},Yke={class:"flex flex-col h-auto overflow-auto"};function Kke(t,n,a,e,s,r){const o=H("woot-modal-header"),i=H("SlaForm");return p(),g("div",Yke,[v(o,{"header-title":t.$t("SLA.ADD.TITLE"),"header-content":t.$t("SLA.ADD.DESC")},null,8,["header-title","header-content"]),v(i,{"submit-label":t.$t("SLA.FORM.CREATE"),onSubmitSla:r.addSLA,onClose:r.onClose},null,8,["submit-label","onSubmitSla","onClose"])])}const Xke=G(zke,[["render",Kke],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/sla/AddSLA.vue"]]),qke={__name:"BaseSettingsListItem",props:{title:{type:String,default:""},description:{type:String,default:""}},setup(t,{expose:n}){n();const a={};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},Zke={class:"flex relative flex-col sm:flex-row p-4 gap-4 sm:p-6 justify-between group outline outline-n-container outline-1 bg-n-solid-2 rounded-2xl shadow w-full"},Qke={class:"flex flex-col min-w-0 items-start gap-3 max-w-[480px] w-full"},Jke={class:"flex items-center justify-between w-full gap-3 sm:justify-normal whitespace-nowrap"},e8e={class:"justify-between tracking-tight font-medium truncate w-fit sm:justify-normal text-n-slate-12"},t8e={class:"text-base text-n-slate-11 max-w-[25rem] w-full line-clamp-2"},n8e={key:0,class:"absolute flex-col items-center hidden gap-1 border-none ltr:-right-3 rtl:-left-3 top-3 group-hover:flex"};function a8e(t,n,a,e,s,r){return p(),g("div",Zke,[qe(t.$slots,"leftSection",{},()=>[f("div",Qke,[f("div",Jke,[f("h3",e8e,[qe(t.$slots,"title",{},()=>[Oe(C(a.title),1)])]),qe(t.$slots,"label")]),f("p",t8e,[qe(t.$slots,"description",{},()=>[Oe(C(a.description),1)])])])]),O(" right side section "),qe(t.$slots,"rightSection"),O(" actions section "),t.$slots.actions?(p(),g("div",n8e,[qe(t.$slots,"actions")])):O("v-if",!0)])}const BL=G(qke,[["render",a8e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/components/BaseSettingsListItem.vue"]]),s8e={__name:"SLAResponseTime",props:{responseType:{type:String,default:""},responseTime:{type:String,default:""}},setup(t,{expose:n}){n();const a={};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},o8e={class:"flex flex-row items-start w-full h-full gap-1 sm:items-end sm:px-6 sm:py-2 sm:gap-2 sm:flex-col"},r8e={class:"inline-flex items-center gap-1 tracking-[-0.6%] text-sm ltr:pl-1.5 sm:ltr:pl-0 rtl:pr-1.5 sm:rtl:pr-0 text-n-slate-11"},i8e={class:"text-sm sm:text-2xl font-medium tracking-[-1.5%] text-n-slate-12"};function l8e(t,n,a,e,s,r){const o=H("fluent-icon"),i=nt("tooltip");return p(),g("div",o8e,[f("span",r8e,[ce(v(o,{size:"14",icon:"information",type:"outline",class:"flex-shrink-0 hidden text-sm font-normal sm:flex sm:font-medium text-n-slate-11"},null,512),[[i,t.$t(`SLA.LIST.RESPONSE_TYPES.${a.responseType}`),void 0,{left:!0}]]),Oe(" "+C(t.$t(`SLA.LIST.RESPONSE_TYPES.SHORT_HAND.${a.responseType}`))+" ",1),n[0]||(n[0]=f("span",{class:"flex sm:hidden"},":",-1))]),f("span",i8e,C(a.responseTime),1)])}const c8e=G(s8e,[["render",l8e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/sla/components/SLAResponseTime.vue"]]),d8e={__name:"SLABusinessHoursLabel",props:{hasBusinessHours:{type:Boolean,required:!0}},setup(t,{expose:n}){n();const a={};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},u8e={class:"inline-flex items-center min-w-0 gap-1 px-1.5 sm:px-2 py-1 border border-solid rounded-lg border-n-weak"};function p8e(t,n,a,e,s,r){const o=H("fluent-icon");return p(),g("div",u8e,[v(o,{size:"14",icon:a.hasBusinessHours?"alarm-on":"alarm-off",type:"outline",class:oe(["flex-shrink-0",a.hasBusinessHours?"text-n-slate-11":"text-n-slate-10"])},null,8,["icon","class"]),f("span",{class:oe(["hidden text-xs tracking-[0.2%] font-normal truncate sm:block",a.hasBusinessHours?"text-n-slate-11":"text-n-slate-10"])},C(a.hasBusinessHours?t.$t("SLA.LIST.BUSINESS_HOURS_ON"):t.$t("SLA.LIST.BUSINESS_HOURS_OFF")),3)])}const f8e=G(d8e,[["render",p8e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/sla/components/SLABusinessHoursLabel.vue"]]),m8e={__name:"SLAListItem",props:{slaName:{type:String,required:!0},description:{type:String,required:!0},firstResponse:{type:String,required:!0},nextResponse:{type:String,required:!0},resolutionTime:{type:String,required:!0},hasBusinessHours:{type:Boolean,required:!0},isLoading:{type:Boolean,default:!1}},emits:["delete"],setup(t,{expose:n,emit:a}){n();const s={emit:a,BaseSettingsListItem:BL,SLAResponseTime:c8e,SLABusinessHoursLabel:f8e,Button:Se};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}},h8e={class:"flex items-center divide-x rtl:divide-x-reverse sm:rtl:!border-l-0 sm:rtl:!border-r sm:rtl:border-solid sm:rtl:border-n-weak gap-1.5 w-fit sm:w-full sm:gap-0 sm:justify-between divide-n-weak"};function _8e(t,n,a,e,s,r){const o=nt("tooltip");return p(),L(e.BaseSettingsListItem,{class:"sm:divide-x sm:divide-n-weak",title:a.slaName,description:a.description},{label:z(()=>[v(e.SLABusinessHoursLabel,{"has-business-hours":a.hasBusinessHours},null,8,["has-business-hours"])]),rightSection:z(()=>[f("div",h8e,[v(e.SLAResponseTime,{"response-type":"FRT","response-time":a.firstResponse},null,8,["response-time"]),v(e.SLAResponseTime,{"response-type":"NRT","response-time":a.nextResponse},null,8,["response-time"]),v(e.SLAResponseTime,{"response-type":"RT","response-time":a.resolutionTime},null,8,["response-time"])])]),actions:z(()=>[ce(v(e.Button,{faded:"",ruby:"",xs:"",icon:"i-lucide-trash-2","is-loading":a.isLoading,onClick:n[0]||(n[0]=i=>e.emit("delete"))},null,8,["is-loading"]),[[o,t.$t("SLA.FORM.DELETE"),void 0,{top:!0}]])]),_:1},8,["title","description"])}const FL=G(m8e,[["render",_8e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/sla/components/SLAListItem.vue"]]),g8e={__name:"BaseEmptyState",setup(t,{expose:n}){n();const a={SLAListItem:FL};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},b8e={class:"w-full min-h-[12rem] relative"},v8e={class:"w-full space-y-3"},E8e={class:"absolute inset-0 flex flex-col items-center justify-center w-full h-full bg-gradient-to-t from-white dark:from-slate-900 to-transparent"};function S8e(t,n,a,e,s,r){return p(),g("div",b8e,[f("div",v8e,[v(e.SLAListItem,{class:"opacity-25 dark:opacity-20","sla-name":t.$t("SLA.LIST.EMPTY.TITLE_1"),description:t.$t("SLA.LIST.EMPTY.DESC_1"),"first-response":"20m","next-response":"1h","resolution-time":"24h","has-business-hours":""},null,8,["sla-name","description"]),v(e.SLAListItem,{class:"opacity-25 dark:opacity-20","sla-name":t.$t("SLA.LIST.EMPTY.TITLE_2"),description:t.$t("SLA.LIST.EMPTY.DESC_2"),"first-response":"2h","next-response":"4h","resolution-time":"4d","has-business-hours":""},null,8,["sla-name","description"])]),f("div",E8e,[qe(t.$slots,"default")])])}const UL=G(g8e,[["render",S8e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/sla/components/BaseEmptyState.vue"]]),T8e={__name:"SLAEmptyState",emits:["primaryAction"],setup(t,{expose:n,emit:a}){n();const e=a,r={emit:e,primaryAction:()=>e("primaryAction"),BaseEmptyState:UL,NextButton:Se};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},A8e={class:"max-w-xs text-sm font-medium text-center"};function y8e(t,n,a,e,s,r){return p(),L(e.BaseEmptyState,null,{default:z(()=>[f("p",A8e,C(t.$t("SLA.LIST.404")),1),v(e.NextButton,{icon:"i-lucide-plus",class:"mt-4",label:t.$t("SLA.ADD_ACTION_LONG"),onClick:e.primaryAction},null,8,["label"])]),_:1})}const I8e=G(T8e,[["render",y8e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/sla/components/SLAEmptyState.vue"]]),C8e={__name:"SLAHeader",props:{showActions:{type:Boolean,default:!0}},emits:["add"],setup(t,{expose:n}){n();const a={Button:Se,BaseSettingsHeader:Va};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}};function O8e(t,n,a,e,s,r){return p(),L(e.BaseSettingsHeader,{title:t.$t("SLA.HEADER"),description:t.$t("SLA.DESCRIPTION"),"link-text":t.$t("SLA.LEARN_MORE"),"feature-name":"sla"},Ro({_:2},[a.showActions?{name:"actions",fn:z(()=>[v(e.Button,{label:t.$t("SLA.ADD_ACTION"),icon:"i-lucide-circle-plus",onClick:n[0]||(n[0]=o=>t.$emit("add"))},null,8,["label"])]),key:"0"}:void 0]),1032,["title","description","link-text"])}const N8e=G(C8e,[["render",O8e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/sla/components/SLAHeader.vue"]]),x8e={__name:"SLAListItemLoading",setup(t,{expose:n}){n();const a={BaseSettingsListItem:BL};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},R8e={class:"flex items-center sm:rtl:!border-l-0 sm:rtl:!border-r border-n-weak gap-1.5 w-fit sm:w-full sm:gap-0 sm:justify-between"};function w8e(t,n,a,e,s,r){return p(),L(e.BaseSettingsListItem,{class:"opacity-50"},{title:z(()=>n[0]||(n[0]=[f("div",{class:"w-24 h-[26px] rounded-md bg-n-slate-4 dark:bg-n-slate-6 animate-pulse"},null,-1)])),description:z(()=>n[1]||(n[1]=[f("div",{class:"w-64 h-4 mb-0.5 rounded-md bg-n-slate-4 dark:bg-n-slate-6 animate-pulse"},null,-1),f("div",{class:"w-48 h-4 rounded-md bg-n-slate-4 dark:bg-n-slate-6 animate-pulse"},null,-1)])),label:z(()=>n[2]||(n[2]=[f("div",{class:"w-32 h-[26px] bg-n-slate-4 dark:bg-n-slate-6 animate-pulse rounded-md"},null,-1)])),rightSection:z(()=>[f("div",R8e,[(p(),g(de,null,Ae(3,o=>f("div",{key:o,class:"flex justify-end w-1/3 h-full px-4"},[...n[3]||(n[3]=[f("div",{class:"w-32 h-full rounded-md bg-n-slate-4 dark:bg-n-slate-6 animate-pulse"},null,-1)])])),64))])]),_:1})}const M8e=G(x8e,[["render",w8e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/sla/components/SLAListItemLoading.vue"]]),L8e={__name:"BasePaywallModal",props:{featurePrefix:{type:String,required:!0},i18nKey:{type:String,required:!0},isOnChatwootCloud:{type:Boolean,default:!1},isSuperAdmin:{type:Boolean,default:!1}},emits:["upgrade"],setup(t,{expose:n,emit:a}){n();const s={emit:a,Icon:Bt,ButtonV4:Se};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}},D8e={class:"flex flex-col max-w-md px-6 py-6 border shadow bg-n-solid-1 rounded-xl border-n-weak"},P8e={class:"flex items-center w-full gap-2 mb-4"},k8e={class:"flex items-center justify-center w-6 h-6 rounded-full bg-n-solid-blue"},B8e={class:"text-base font-medium text-n-slate-12"},F8e={class:"text-sm font-normal text-n-slate-11"},U8e={class:"text-sm font-normal text-n-slate-11"},$8e={key:0},G8e={class:"mt-2 text-xs tracking-tight text-center text-n-slate-11"},V8e={key:1,href:"/super_admin",class:"block w-full"};function H8e(t,n,a,e,s,r){const o=nt("dompurify-html");return p(),g("div",D8e,[f("div",P8e,[f("span",k8e,[v(e.Icon,{class:"flex-shrink-0 text-n-brand size-[14px]",icon:"i-lucide-lock-keyhole"})]),f("span",B8e,C(t.$t(`${a.featurePrefix}.PAYWALL.TITLE`)),1)]),ce(f("p",F8e,null,512),[[o,t.$t(`${a.featurePrefix}.${a.i18nKey}.AVAILABLE_ON`)]]),f("p",U8e,[Oe(C(t.$t(`${a.featurePrefix}.${a.i18nKey}.UPGRADE_PROMPT`))+" ",1),!a.isOnChatwootCloud&&!a.isSuperAdmin?(p(),g("span",$8e,C(t.$t(`${a.featurePrefix}.ENTERPRISE_PAYWALL.ASK_ADMIN`)),1)):O("v-if",!0)]),a.isOnChatwootCloud?(p(),g(de,{key:0},[v(e.ButtonV4,{blue:"",solid:"",md:"",onClick:n[0]||(n[0]=i=>e.emit("upgrade"))},{default:z(()=>[Oe(C(t.$t(`${a.featurePrefix}.PAYWALL.UPGRADE_NOW`)),1)]),_:1}),f("span",G8e,C(t.$t(`${a.featurePrefix}.PAYWALL.CANCEL_ANYTIME`)),1)],64)):a.isSuperAdmin?(p(),g("a",V8e,[v(e.ButtonV4,{solid:"",blue:"",md:"",class:"w-full"},{default:z(()=>[Oe(C(t.$t(`${a.featurePrefix}.PAYWALL.UPGRADE_NOW`)),1)]),_:1})])):O("v-if",!0)])}const t_=G(L8e,[["render",H8e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/components/BasePaywallModal.vue"]]),j8e={__name:"SLAPaywallEnterprise",props:{isSuperAdmin:{type:Boolean,default:!1},isOnChatwootCloud:{type:Boolean,default:!1}},emits:["upgrade"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=e.isOnChatwootCloud?"PAYWALL":"ENTERPRISE_PAYWALL",o={props:e,emit:s,i18nKey:r,BaseEmptyState:UL,BasePaywallModal:t_};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}};function W8e(t,n,a,e,s,r){return p(),L(e.BaseEmptyState,null,{default:z(()=>[v(e.BasePaywallModal,{"feature-prefix":"SLA","i18n-key":e.i18nKey,"is-on-chatwoot-cloud":a.isOnChatwootCloud,"is-super-admin":a.isSuperAdmin,onUpgrade:n[0]||(n[0]=o=>e.emit("upgrade"))},null,8,["i18n-key","is-on-chatwoot-cloud","is-super-admin"])]),_:1})}const z8e=G(j8e,[["render",W8e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/sla/components/SLAPaywallEnterprise.vue"]]),Y8e={components:{AddSLA:Xke,SettingsLayout:Ha,SLAEmptyState:I8e,SLAHeader:N8e,SLAListItem:FL,SLAListItemLoading:M8e,SLAPaywallEnterprise:z8e},data(){return{loading:{},showAddPopup:!1,showDeleteConfirmationPopup:!1,selectedResponse:{}}},computed:{..._t({isOnChatwootCloud:"globalConfig/isOnChatwootCloud",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount",records:"sla/getSLA",currentUser:"getCurrentUser",accountId:"getCurrentAccountId",uiFlags:"sla/getUIFlags"}),deleteConfirmText(){return this.$t("SLA.DELETE.CONFIRM.YES")},deleteRejectText(){return this.$t("SLA.DELETE.CONFIRM.NO")},deleteMessage(){return` ${this.selectedResponse.name}`},isBehindAPaywall(){return!this.isFeatureEnabledonAccount(this.accountId,"sla")},isSuperAdmin(){return this.currentUser.type==="SuperAdmin"}},mounted(){this.$store.dispatch("sla/get")},methods:{openAddPopup(){this.isBehindAPaywall||(this.showAddPopup=!0)},hideAddPopup(){this.showAddPopup=!1},openDeletePopup(t){this.showDeleteConfirmationPopup=!0,this.selectedResponse=t},closeDeletePopup(){this.showDeleteConfirmationPopup=!1},confirmDeletion(){this.loading[this.selectedResponse.id]=!0,this.closeDeletePopup(),this.deleteSla(this.selectedResponse.id)},deleteSla(t){this.$store.dispatch("sla/delete",t).then(()=>{Z(this.$t("SLA.DELETE.API.SUCCESS_MESSAGE"))}).catch(()=>{Z(this.$t("SLA.DELETE.API.ERROR_MESSAGE"))}).finally(()=>{this.loading[this.selectedResponse.id]=!1})},displayTime(t){const{time:n,unit:a}=f2(t,{minute:"m",hour:"h",day:"d"});return n?`${n}${a}`:"-"},onClickCTA(){this.$router.push({name:"billing_settings_index",params:{accountId:this.accountId}})}}},K8e={key:2,class:"flex flex-col w-full h-full gap-3"};function X8e(t,n,a,e,s,r){const o=H("SLAHeader"),i=H("SLAListItemLoading"),l=H("SLAPaywallEnterprise"),c=H("SLAEmptyState"),d=H("SLAListItem"),u=H("AddSLA"),m=H("woot-modal"),h=H("woot-delete-modal"),_=H("SettingsLayout");return p(),L(_,{"is-loading":t.uiFlags.isFetching,"loading-message":t.$t("SLA.LOADING")},{header:z(()=>[v(o,{"show-actions":t.records.length>0,onAdd:r.openAddPopup},null,8,["show-actions","onAdd"])]),loading:z(()=>[(p(),g(de,null,Ae(2,E=>v(i,{key:E,class:"mb-3"})),64))]),body:z(()=>[r.isBehindAPaywall?(p(),L(l,{key:0,"is-super-admin":r.isSuperAdmin,"is-on-chatwoot-cloud":t.isOnChatwootCloud,onUpgrade:r.onClickCTA},null,8,["is-super-admin","is-on-chatwoot-cloud","onUpgrade"])):t.records.length?(p(),g("div",K8e,[(p(!0),g(de,null,Ae(t.records,E=>(p(),L(d,{key:E.title,"sla-name":E.name,description:E.description,"first-response":r.displayTime(E.first_response_time_threshold),"next-response":r.displayTime(E.next_response_time_threshold),"resolution-time":r.displayTime(E.resolution_time_threshold),"has-business-hours":E.only_during_business_hours,"is-loading":s.loading[E.id],onDelete:y=>r.openDeletePopup(E)},null,8,["sla-name","description","first-response","next-response","resolution-time","has-business-hours","is-loading","onDelete"]))),128))])):(p(),L(c,{key:1,onPrimaryAction:r.openAddPopup},null,8,["onPrimaryAction"])),v(m,{show:s.showAddPopup,"onUpdate:show":n[0]||(n[0]=E=>s.showAddPopup=E),"on-close":r.hideAddPopup},{default:z(()=>[v(u,{onClose:r.hideAddPopup},null,8,["onClose"])]),_:1},8,["show","on-close"]),v(h,{show:s.showDeleteConfirmationPopup,"onUpdate:show":n[1]||(n[1]=E=>s.showDeleteConfirmationPopup=E),"on-close":r.closeDeletePopup,"on-confirm":r.confirmDeletion,title:t.$t("SLA.DELETE.CONFIRM.TITLE"),message:t.$t("SLA.DELETE.CONFIRM.MESSAGE"),"message-value":r.deleteMessage,"confirm-text":r.deleteConfirmText,"reject-text":r.deleteRejectText},null,8,["show","on-close","on-confirm","title","message","message-value","confirm-text","reject-text"])]),_:1},8,["is-loading","loading-message"])}const q8e=G(Y8e,[["render",X8e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/sla/Index.vue"]]),WC={featureFlag:pt.SLA,permissions:["administrator"],installationTypes:[gn.CLOUD,gn.ENTERPRISE]},Z8e={routes:[{path:vt("accounts/:accountId/settings/sla"),component:cs,props:{},children:[{path:"",name:"sla_wrapper",meta:WC,redirect:t=>({name:"sla_list",params:t.params})},{path:"list",name:"sla_list",meta:WC,component:q8e}]}]},Q8e={__name:"Index",setup(t,{expose:n}){n();const a=Fe(),{t:e}=Q(),s=xt(),r=S(()=>s["teams/getTeams"].value),o=S(()=>s["teams/getUIFlags"].value),{isAdmin:i}=Es(),l=P({}),c=async({id:I})=>{try{l.value[I]=!0,await a.dispatch("teams/delete",I),Z(e("TEAMS_SETTINGS.DELETE.API.SUCCESS_MESSAGE"))}catch{Z(e("TEAMS_SETTINGS.DELETE.API.ERROR_MESSAGE"))}finally{l.value[I]=!1}},d=P(!1),u=P({}),m=I=>{d.value=!0,u.value=I},h=()=>{d.value=!1,u.value={}},_=()=>{c(u.value),h()},E=S(()=>`${e("TEAMS_SETTINGS.DELETE.CONFIRM.YES")} ${u.value.name}`),y=S(()=>e("TEAMS_SETTINGS.DELETE.CONFIRM.NO")),b=S(()=>e("TEAMS_SETTINGS.DELETE.CONFIRM.TITLE",{teamName:u.value.name})),A=S(()=>e("TEAMS_SETTINGS.DELETE.CONFIRM.PLACE_HOLDER",{teamName:u.value.name})),T={store:a,t:e,getters:s,teamsList:r,uiFlags:o,isAdmin:i,loading:l,deleteTeam:c,showDeletePopup:d,selectedTeam:u,openDelete:m,closeDelete:h,confirmDeletion:_,deleteConfirmText:E,deleteRejectText:y,confirmDeleteTitle:b,confirmPlaceHolderText:A,get useAlert(){return Z},get useAdmin(){return Es},BaseSettingsHeader:Va,computed:S,ref:P,get useStoreGetters(){return xt},get useStore(){return Fe},get useI18n(){return Q},Button:Se};return Object.defineProperty(T,"__isScriptSetup",{enumerable:!1,value:!0}),T}},J8e={class:"flex-1 overflow-auto"},e4e={class:"mt-6 flex-1 text-n-slate-11"},t4e={key:1,class:"flex flex-col items-center justify-center h-full text-base p-8"},n4e={key:2,class:"min-w-full divide-y divide-n-weak"},a4e={class:"divide-y divide-n-weak"},s4e={class:"py-4 ltr:pr-4 rtl:pl-4"},o4e={class:"block font-medium capitalize"},r4e={class:"mb-0"},i4e={class:"py-4 flex justify-end gap-1"};function l4e(t,n,a,e,s,r){const o=H("router-link"),i=H("woot-loading-state"),l=H("woot-confirm-delete-modal"),c=nt("tooltip");return p(),g("div",J8e,[v(e.BaseSettingsHeader,{title:t.$t("TEAMS_SETTINGS.HEADER"),description:t.$t("TEAMS_SETTINGS.DESCRIPTION"),"link-text":t.$t("TEAMS_SETTINGS.LEARN_MORE"),"feature-name":"team_management"},{actions:z(()=>[e.isAdmin?(p(),L(o,{key:0,to:{name:"settings_teams_new"}},{default:z(()=>[v(e.Button,{icon:"i-lucide-circle-plus",label:t.$t("TEAMS_SETTINGS.NEW_TEAM")},null,8,["label"])]),_:1})):O("v-if",!0)]),_:1},8,["title","description","link-text"]),f("div",e4e,[e.uiFlags.isFetching?(p(),L(i,{key:0,message:t.$t("TEAMS_SETTINGS.LOADING")},null,8,["message"])):e.teamsList.length?(p(),g("table",n4e,[f("tbody",a4e,[(p(!0),g(de,null,Ae(e.teamsList,d=>(p(),g("tr",{key:d.id},[f("td",s4e,[f("span",o4e,C(d.name),1),f("p",r4e,C(d.description),1)]),f("td",i4e,[v(o,{to:{name:"settings_teams_edit",params:{teamId:d.id}}},{default:z(()=>[e.isAdmin?ce((p(),L(e.Button,{key:0,icon:"i-lucide-settings",slate:"",xs:"",faded:""},null,512)),[[c,t.$t("TEAMS_SETTINGS.LIST.EDIT_TEAM"),void 0,{top:!0}]]):O("v-if",!0)]),_:2},1032,["to"]),e.isAdmin?ce((p(),L(e.Button,{key:0,icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"","is-loading":e.loading[d.id],onClick:u=>e.openDelete(d)},null,8,["is-loading","onClick"])),[[c,t.$t("TEAMS_SETTINGS.DELETE.BUTTON_TEXT"),void 0,{top:!0}]]):O("v-if",!0)])]))),128))])])):(p(),g("p",t4e,C(t.$t("TEAMS_SETTINGS.LIST.404")),1))]),e.showDeletePopup?(p(),L(l,{key:0,show:e.showDeletePopup,"onUpdate:show":n[0]||(n[0]=d=>e.showDeletePopup=d),title:e.confirmDeleteTitle,message:t.$t("TEAMS_SETTINGS.DELETE.CONFIRM.MESSAGE"),"confirm-text":e.deleteConfirmText,"reject-text":e.deleteRejectText,"confirm-value":e.selectedTeam.name,"confirm-place-holder-text":e.confirmPlaceHolderText,onOnConfirm:e.confirmDeletion,onOnClose:e.closeDelete},null,8,["show","title","message","confirm-text","reject-text","confirm-value","confirm-place-holder-text"])):O("v-if",!0)])}const c4e=G(Q8e,[["render",l4e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/teams/Index.vue"]]),d4e={computed:{items(){const t=["WIZARD_CREATE","WIZARD_ADD_AGENTS","WIZARD_FINISH"],n={WIZARD_CREATE:"settings_teams_new",WIZARD_ADD_AGENTS:"settings_teams_add_agents",WIZARD_FINISH:"settings_teams_finish"};return t.map(a=>({title:this.$t(`TEAMS_SETTINGS.CREATE_FLOW.${a}.TITLE`),body:this.$t(`TEAMS_SETTINGS.CREATE_FLOW.${a}.BODY`),route:n[a]}))}}},u4e={class:"mx-2 flex flex-col gap-6 mb-8"},p4e={class:"grid grid-cols-1 lg:grid-cols-8 lg:divide-x lg:divide-n-weak rounded-xl border border-n-weak min-h-[43rem]"};function f4e(t,n,a,e,s,r){const o=H("woot-wizard"),i=H("router-view");return p(),g("div",u4e,[f("div",p4e,[v(o,{class:"hidden lg:block col-span-2 h-fit py-8 px-6",items:r.items},null,8,["items"]),v(i)])])}const m4e=G(d4e,[["render",f4e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/teams/Create/Index.vue"]]),h4e={computed:{items(){const t={EDIT_WIZARD_DETAILS:"settings_teams_edit",EDIT_WIZARD_AGENTS:"settings_teams_edit_members",EDIT_WIZARD_FINISH:"settings_teams_edit_finish"};return["EDIT_WIZARD_DETAILS","EDIT_WIZARD_AGENTS","EDIT_WIZARD_FINISH"].map(a=>({title:this.$t(`TEAMS_SETTINGS.EDIT_FLOW.${a}.TITLE`),body:this.$t(`TEAMS_SETTINGS.EDIT_FLOW.${a}.BODY`),route:t[a]}))}}},_4e={class:"mx-2 flex flex-col gap-6 mb-8"},g4e={class:"grid grid-cols-1 lg:grid-cols-8 lg:divide-x lg:divide-n-weak rounded-xl border border-n-weak min-h-[43rem]"};function b4e(t,n,a,e,s,r){const o=H("woot-wizard"),i=H("router-view");return p(),g("div",_4e,[f("div",g4e,[v(o,{class:"hidden lg:block col-span-2 h-fit py-8 px-6",items:r.items},null,8,["items"]),v(i)])])}const v4e=G(h4e,[["render",b4e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/teams/Edit/Index.vue"]]),E4e={title:{required:Ge,minLength:Rt(2)},description:{},showOnSidebar:{}},S4e={components:{NextButton:Se,FormInput:E4},props:{onSubmit:{type:Function,default:()=>{}},submitInProgress:{type:Boolean,default:!1},formData:{type:Object,default:()=>{}},submitButtonText:{type:String,default:""}},setup(t){const n=t.formData||{},{description:a="",name:e="",allow_auto_assign:s=!0}=n,r=Lt({description:a,title:e,allowAutoAssign:s}),i=rt(E4e,r);return{state:r,v$:i}},methods:{handleSubmit(){this.v$.$touch(),!this.v$.$invalid&&this.onSubmit({description:this.state.description,name:this.state.title,allow_auto_assign:this.state.allowAutoAssign})}}},T4e={class:"flex-shrink-0 w-full"},A4e={class:"w-full flex items-center gap-2"},y4e={for:"conversation_creation"},I4e={class:"flex flex-row justify-end gap-2 py-2 px-0 w-full"},C4e={class:"w-full"};function O4e(t,n,a,e,s,r){const o=H("FormInput"),i=H("NextButton");return p(),g("div",T4e,[f("form",{class:"mx-0 grid gap-4",onSubmit:n[3]||(n[3]=Ve((...l)=>r.handleSubmit&&r.handleSubmit(...l),["prevent"]))},[v(o,{modelValue:e.state.title,"onUpdate:modelValue":n[0]||(n[0]=l=>e.state.title=l),name:"title",spacing:"compact",label:t.$t("TEAMS_SETTINGS.FORM.NAME.LABEL"),placeholder:t.$t("TEAMS_SETTINGS.FORM.NAME.PLACEHOLDER"),"has-error":e.v$.title.$error,"error-message":e.v$.title.$error?e.v$.title.$errors[0].$message:"",onBlur:e.v$.title.$touch},null,8,["modelValue","label","placeholder","has-error","error-message","onBlur"]),v(o,{modelValue:e.state.description,"onUpdate:modelValue":n[1]||(n[1]=l=>e.state.description=l),name:"description",spacing:"compact",label:t.$t("TEAMS_SETTINGS.FORM.DESCRIPTION.LABEL"),placeholder:t.$t("TEAMS_SETTINGS.FORM.DESCRIPTION.PLACEHOLDER"),"has-error":e.v$.description.$error,"error-message":e.v$.description.$error?e.v$.description.$errors[0].$message:"",onBlur:e.v$.description.$touch},null,8,["modelValue","label","placeholder","has-error","error-message","onBlur"]),f("div",A4e,[ce(f("input",{"onUpdate:modelValue":n[2]||(n[2]=l=>e.state.allowAutoAssign=l),type:"checkbox",value:!0},null,512),[[bn,e.state.allowAutoAssign]]),f("label",y4e,C(t.$t("TEAMS_SETTINGS.FORM.AUTO_ASSIGN.LABEL")),1)]),f("div",I4e,[f("div",C4e,[v(i,{type:"submit",label:a.submitButtonText,disabled:e.v$.title.$invalid||a.submitInProgress,"is-loading":a.submitInProgress},null,8,["label","disabled","is-loading"])])])],32)])}const $L=G(S4e,[["render",O4e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/teams/TeamForm.vue"]]),N4e={components:{TeamForm:$L,PageHeader:Ss},data(){return{enabledFeatures:{}}},methods:{async createTeam(t){try{const n=await this.$store.dispatch("teams/create",{...t});wa.replace({name:"settings_teams_add_agents",params:{page:"new",teamId:n.id}})}catch{Z(this.$t("TEAMS_SETTINGS.TEAM_FORM.ERROR_MESSAGE"))}}}},x4e={class:"h-full w-full p-6 col-span-6"},R4e={class:"flex flex-wrap"};function w4e(t,n,a,e,s,r){const o=H("PageHeader"),i=H("TeamForm");return p(),g("div",x4e,[v(o,{"header-title":t.$t("TEAMS_SETTINGS.CREATE_FLOW.CREATE.TITLE"),"header-content":t.$t("TEAMS_SETTINGS.CREATE_FLOW.CREATE.DESC")},null,8,["header-title","header-content"]),f("div",R4e,[v(i,{"on-submit":r.createTeam,"submit-in-progress":!1,"submit-button-text":t.$t("TEAMS_SETTINGS.FORM.SUBMIT_CREATE")},null,8,["on-submit","submit-button-text"])])])}const M4e=G(N4e,[["render",w4e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/teams/Create/CreateTeam.vue"]]),L4e={components:{TeamForm:$L,PageHeader:Ss,Spinner:ls},data(){return{enabledFeatures:{}}},computed:{teamData(){const{teamId:t}=this.$route.params;return this.$store.getters["teams/getTeam"](t)},showTeamForm(){const{id:t}=this.teamData;return t&&!this.uiFlags.isFetching},..._t({uiFlags:"teams/getUIFlags"})},methods:{async updateTeam(t){try{const{teamId:n}=this.$route.params;await this.$store.dispatch("teams/update",{id:n,...t}),wa.replace({name:"settings_teams_edit_members",params:{page:"edit",teamId:n}})}catch{Z(this.$t("TEAMS_SETTINGS.TEAM_FORM.ERROR_MESSAGE"))}}}},D4e={class:"h-full w-full p-8 col-span-6"},P4e={class:"flex flex-wrap"};function k4e(t,n,a,e,s,r){const o=H("PageHeader"),i=H("TeamForm"),l=H("Spinner");return p(),g("div",D4e,[v(o,{"header-title":t.$t("TEAMS_SETTINGS.EDIT_FLOW.CREATE.TITLE"),"header-content":t.$t("TEAMS_SETTINGS.EDIT_FLOW.CREATE.DESC")},null,8,["header-title","header-content"]),f("div",P4e,[r.showTeamForm?(p(),L(i,{key:0,"on-submit":r.updateTeam,"submit-in-progress":!1,"submit-button-text":t.$t("TEAMS_SETTINGS.EDIT_FLOW.CREATE.BUTTON_TEXT"),"form-data":r.teamData},null,8,["on-submit","submit-button-text","form-data"])):(p(),L(l,{key:1}))])])}const B4e=G(L4e,[["render",k4e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/teams/Edit/EditTeam.vue"]]),F4e={components:{NextButton:Se,Avatar:qt},props:{agentList:{type:Array,default:()=>[]},selectedAgents:{type:Array,default:()=>[]},updateSelectedAgents:{type:Function,default:()=>{}},isWorking:{type:Boolean,default:!1},submitButtonText:{type:String,default:""}},data(){return{}},computed:{selectedAgentCount(){return this.selectedAgents.length},allAgentsSelected(){return this.selectedAgents.length===this.agentList.length},disableSubmitButton(){return this.selectedAgentCount===0}},methods:{isAgentSelected(t){return this.selectedAgents.includes(t)},handleSelectAgent(t){const n=this.isAgentSelected(t);let a=[];n?a=this.selectedAgents.filter(e=>e!==t):a=[...this.selectedAgents,t],this.updateSelectedAgents(a)},selectAllAgents(){const t=this.agentList.map(n=>n.id);this.updateSelectedAgents(t)},agentRowClass(t){return{"is-active":this.isAgentSelected(t)}}}},U4e={class:"[&>th]:font-semibold [&>th]:tracking-[1px] ltr:[&>th]:text-left rtl:[&>th]:text-right [&>th]:px-2.5 [&>th]:uppercase [&>th]:text-n-slate-12"},$4e={class:"ltr:pl-2.5 rtl:pr-2.5"},G4e={class:"flex items-center"},V4e=["checked","title"],H4e={class:"text-n-slate-12 ltr:pl-2.5 rtl:pr-2.5"},j4e={class:"text-n-slate-12 ltr:pl-2.5 rtl:pr-2.5"},W4e={class:"w-12"},z4e={class:"flex items-center"},Y4e=["checked","onClick"],K4e={class:"flex items-center gap-2"},X4e={class:"text-base mb-0 text-n-slate-12"},q4e={class:"flex items-center justify-between mt-2"};function Z4e(t,n,a,e,s,r){const o=H("Avatar"),i=H("NextButton");return p(),g("div",null,[n[1]||(n[1]=f("div",{class:"add-agents__header"},null,-1)),f("table",null,[f("thead",U4e,[f("tr",null,[f("td",$4e,[f("div",G4e,[f("input",{name:"select-all-agents",type:"checkbox",checked:r.allAgentsSelected?"checked":"",title:t.$t("TEAMS_SETTINGS.AGENTS.SELECT_ALL"),onClick:n[0]||(n[0]=Ve((...l)=>r.selectAllAgents&&r.selectAllAgents(...l),["self"]))},null,8,V4e)])]),f("td",H4e,C(t.$t("TEAMS_SETTINGS.AGENTS.AGENT")),1),f("td",j4e,C(t.$t("TEAMS_SETTINGS.AGENTS.EMAIL")),1)])]),f("tbody",null,[(p(!0),g(de,null,Ae(a.agentList,l=>(p(),g("tr",{key:l.id,class:oe([r.agentRowClass(l.id),"border-b border-n-weak [&>td]:p-2.5 [&>td]:text-n-slate-12"])},[f("td",W4e,[f("div",z4e,[f("input",{type:"checkbox",checked:r.isAgentSelected(l.id),onClick:Ve(()=>r.handleSelectAgent(l.id),["self"])},null,8,Y4e)])]),f("td",null,[f("div",K4e,[v(o,{src:l.thumbnail,name:l.name,status:l.availability_status,size:24,"hide-offline-status":"","rounded-full":""},null,8,["src","name","status"]),f("h4",X4e,C(l.name),1)])]),f("td",null,C(l.email||"---"),1)],2))),128))])]),f("div",q4e,[f("p",null,C(t.$t("TEAMS_SETTINGS.AGENTS.SELECTED_COUNT",{selected:a.selectedAgents.length,total:a.agentList.length})),1),v(i,{type:"submit",label:a.submitButtonText,disabled:r.disableSubmitButton,"is-loading":a.isWorking},null,8,["label","disabled","is-loading"])])])}const GL=G(F4e,[["render",Z4e],["__scopeId","data-v-7f24dbc7"],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/teams/AgentSelector.vue"]]),Q4e={components:{PageHeader:Ss,AgentSelector:GL},validations:{selectedAgents:{isEmpty(){return!!this.selectedAgents.length}}},setup(){return{v$:rt()}},data(){return{selectedAgents:[],isCreating:!1}},computed:{..._t({agentList:"agents/getAgents"}),teamId(){return this.$route.params.teamId},headerTitle(){return this.$t("TEAMS_SETTINGS.ADD.TITLE",{teamName:this.currentTeam.name})},currentTeam(){return this.$store.getters["teams/getTeam"](this.teamId)}},mounted(){this.$store.dispatch("agents/get")},methods:{updateSelectedAgents(t){this.v$.selectedAgents.$touch(),this.selectedAgents=[...t]},selectAllAgents(){this.selectedAgents=this.agentList.map(t=>t.id)},async addAgents(){this.isCreating=!0;const{teamId:t,selectedAgents:n}=this;try{await this.$store.dispatch("teamMembers/create",{teamId:t,agentsList:n}),wa.replace({name:"settings_teams_finish",params:{page:"new",teamId:t}}),this.$store.dispatch("teams/get")}catch(a){Z(a.message)}this.isCreating=!1}}},J4e={class:"h-full w-full p-6 col-span-6"},e5e={class:"w-full"},t5e={class:"w-full"},n5e={key:0},a5e={class:"error-message pb-2"};function s5e(t,n,a,e,s,r){const o=H("PageHeader"),i=H("AgentSelector");return p(),g("div",J4e,[f("form",{class:"flex flex-wrap mx-0 overflow-x-auto",onSubmit:n[0]||(n[0]=Ve((...l)=>r.addAgents&&r.addAgents(...l),["prevent"]))},[f("div",e5e,[v(o,{"header-title":r.headerTitle,"header-content":t.$t("TEAMS_SETTINGS.ADD.DESC")},null,8,["header-title","header-content"])]),f("div",t5e,[e.v$.selectedAgents.$error?(p(),g("div",n5e,[f("p",a5e,C(t.$t("TEAMS_SETTINGS.ADD.AGENT_VALIDATION_ERROR")),1)])):O("v-if",!0),v(i,{"agent-list":t.agentList,"selected-agents":s.selectedAgents,"update-selected-agents":r.updateSelectedAgents,"is-working":s.isCreating,"submit-button-text":t.$t("TEAMS_SETTINGS.ADD.BUTTON_TEXT")},null,8,["agent-list","selected-agents","update-selected-agents","is-working","submit-button-text"])])],32)])}const o5e=G(Q4e,[["render",s5e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/teams/Create/AddAgents.vue"]]),r5e={components:{Spinner:ls,PageHeader:Ss,AgentSelector:GL},validations:{selectedAgents:{isEmpty(){return!!this.selectedAgents.length}}},setup(){return{v$:rt()}},data(){return{selectedAgents:[],isCreating:!1}},computed:{..._t({agentList:"agents/getAgents",uiFlags:"teamMembers/getUIFlags"}),teamId(){return this.$route.params.teamId},headerTitle(){return this.$t("TEAMS_SETTINGS.EDIT_FLOW.AGENTS.TITLE",{teamName:this.currentTeam.name})},currentTeam(){return this.$store.getters["teams/getTeam"](this.teamId)},teamMembers(){return this.$store.getters["teamMembers/getTeamMembers"](this.teamId)},showAgentsList(){const{id:t}=this.currentTeam;return t&&!this.uiFlags.isFetching}},async mounted(){const{teamId:t}=this.$route.params;this.$store.dispatch("agents/get");try{await this.$store.dispatch("teamMembers/get",{teamId:t});const n=this.teamMembers.map(a=>a.id);this.updateSelectedAgents(n)}catch{this.updateSelectedAgents([])}},methods:{updateSelectedAgents(t){this.v$.selectedAgents.$touch(),this.selectedAgents=[...t]},async addAgents(){this.isCreating=!0;const{teamId:t,selectedAgents:n}=this;try{await this.$store.dispatch("teamMembers/update",{teamId:t,agentsList:n}),wa.replace({name:"settings_teams_edit_finish",params:{page:"edit",teamId:t}}),this.$store.dispatch("teams/get")}catch(a){Z(a.message)}this.isCreating=!1}}},i5e={class:"h-full w-full p-8 col-span-6"},l5e={class:"w-full"},c5e={class:"w-full"},d5e={key:0},u5e={class:"error-message pb-2"};function p5e(t,n,a,e,s,r){const o=H("PageHeader"),i=H("AgentSelector"),l=H("Spinner");return p(),g("div",i5e,[f("form",{class:"flex flex-wrap mx-0 overflow-x-auto",onSubmit:n[0]||(n[0]=Ve((...c)=>r.addAgents&&r.addAgents(...c),["prevent"]))},[f("div",l5e,[v(o,{"header-title":r.headerTitle,"header-content":t.$t("TEAMS_SETTINGS.EDIT_FLOW.AGENTS.DESC")},null,8,["header-title","header-content"])]),f("div",c5e,[e.v$.selectedAgents.$error?(p(),g("div",d5e,[f("p",u5e,C(t.$t("TEAMS_SETTINGS.ADD.AGENT_VALIDATION_ERROR")),1)])):O("v-if",!0),r.showAgentsList?(p(),L(i,{key:1,"agent-list":t.agentList,"selected-agents":s.selectedAgents,"update-selected-agents":r.updateSelectedAgents,"is-working":s.isCreating,"submit-button-text":t.$t("TEAMS_SETTINGS.EDIT_FLOW.AGENTS.BUTTON_TEXT")},null,8,["agent-list","selected-agents","update-selected-agents","is-working","submit-button-text"])):(p(),L(l,{key:2}))])],32)])}const f5e=G(r5e,[["render",p5e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/teams/Edit/EditAgents.vue"]]),m5e={components:{NextButton:Se,EmptyState:Id}},h5e={class:"h-full w-full p-6 col-span-6"},_5e={class:"w-full text-center"};function g5e(t,n,a,e,s,r){const o=H("NextButton"),i=H("router-link"),l=H("EmptyState");return p(),g("div",h5e,[v(l,{title:t.$t("TEAMS_SETTINGS.FINISH.TITLE"),message:t.$t("TEAMS_SETTINGS.FINISH.MESSAGE"),"button-text":t.$t("TEAMS_SETTINGS.FINISH.BUTTON_TEXT")},{default:z(()=>[f("div",_5e,[v(i,{to:{name:"settings_teams_list"}},{default:z(()=>[v(o,{teal:"",label:t.$t("TEAMS_SETTINGS.FINISH.BUTTON_TEXT")},null,8,["label"])]),_:1})])]),_:1},8,["title","message","button-text"])])}const zC=G(m5e,[["render",g5e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/teams/FinishSetup.vue"]]),b5e={routes:[{path:vt("accounts/:accountId/settings/teams"),component:cs,children:[{path:"",redirect:t=>({name:"settings_teams_list",params:t.params})},{path:"list",name:"settings_teams_list",component:c4e,meta:{featureFlag:pt.TEAM_MANAGEMENT,permissions:["administrator"]}}]},{path:vt("accounts/:accountId/settings/teams"),component:sp,props:()=>({headerTitle:"TEAMS_SETTINGS.HEADER",icon:"people-team",showBackButton:!0}),children:[{path:"new",component:m4e,children:[{path:"",name:"settings_teams_new",component:M4e,meta:{featureFlag:pt.TEAM_MANAGEMENT,permissions:["administrator"]}},{path:":teamId/finish",name:"settings_teams_finish",component:zC,meta:{featureFlag:pt.TEAM_MANAGEMENT,permissions:["administrator"]}},{path:":teamId/agents",name:"settings_teams_add_agents",meta:{featureFlag:pt.TEAM_MANAGEMENT,permissions:["administrator"]},component:o5e}]},{path:":teamId/edit",component:v4e,children:[{path:"",name:"settings_teams_edit",component:B4e,meta:{featureFlag:pt.TEAM_MANAGEMENT,permissions:["administrator"]}},{path:"agents",name:"settings_teams_edit_members",component:f5e,meta:{featureFlag:pt.TEAM_MANAGEMENT,permissions:["administrator"]}},{path:"finish",name:"settings_teams_edit_finish",meta:{featureFlag:pt.TEAM_MANAGEMENT,permissions:["administrator"]},component:zC}]}]}]},v5e={__name:"CustomRoleModal",props:{mode:{type:String,default:"add",validator:t=>["add","edit"].includes(t)},selectedRole:{type:Object,default:()=>({})}},emits:["close"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=Fe(),{t:o}=Q(),i=P(""),l=P(""),c=P([]),d=P(null),u=Lt({showLoading:!1,message:""}),m=S(()=>({name:{required:Ge,minLength:Rt(2)},description:{required:Ge},selectedPermissions:{required:Ge,minLength:Rt(1)}})),h=rt(m,{name:i,description:l,selectedPermissions:c}),_=()=>{i.value="",l.value="",c.value=[],h.value.$reset()},E=()=>{i.value=e.selectedRole.name||"",l.value=e.selectedRole.description||"",c.value=e.selectedRole.permissions||[]};je(c,(R,M)=>{const w=R.includes(tc)&&!M.includes(tc),D=M.includes(tc)&&!R.includes(tc);w?c.value=[...new Set([...c.value,gT,bT])]:D&&(c.value=c.value.filter(B=>B!==tc))},{deep:!0}),Pe(()=>{var R;e.mode==="edit"&&E(),(R=d.value)==null||R.focus()});const y=R=>e.mode==="edit"?`CUSTOM_ROLE.EDIT.${R}`:`CUSTOM_ROLE.ADD.${R}`,b=S(()=>o(y("TITLE"))),A=S(()=>o(y("DESC"))),T=S(()=>o(y("SUBMIT"))),I=async()=>{if(h.value.$touch(),!h.value.$invalid){u.showLoading=!0;try{const R={name:i.value,description:l.value,permissions:c.value};e.mode==="edit"?(await r.dispatch("customRole/updateCustomRole",{id:e.selectedRole.id,...R}),Z(o("CUSTOM_ROLE.EDIT.API.SUCCESS_MESSAGE"))):(await r.dispatch("customRole/createCustomRole",R),Z(o("CUSTOM_ROLE.ADD.API.SUCCESS_MESSAGE"))),_(),s("close")}catch(R){const M=(R==null?void 0:R.message)||o("CUSTOM_ROLE.FORM.API.ERROR_MESSAGE");Z(M)}finally{u.showLoading=!1}}},N=S(()=>h.value.$invalid||u.showLoading),x={props:e,emit:s,store:r,t:o,name:i,description:l,selectedPermissions:c,nameInput:d,addCustomRole:u,rules:m,v$:h,resetForm:_,populateEditForm:E,getTranslationKey:y,modalTitle:b,modalDescription:A,submitButtonText:T,handleCustomRole:I,isSubmitDisabled:N,ref:P,reactive:Lt,computed:S,onMounted:Pe,watch:je,get useStore(){return Fe},get useI18n(){return Q},get useVuelidate(){return rt},get required(){return Ge},get minLength(){return Rt},get useAlert(){return Z},get AVAILABLE_CUSTOM_ROLE_PERMISSIONS(){return S4},get MANAGE_ALL_CONVERSATION_PERMISSIONS(){return tc},get CONVERSATION_UNASSIGNED_PERMISSIONS(){return gT},get CONVERSATION_PARTICIPATING_PERMISSIONS(){return bT},Button:Se};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}},E5e={class:"flex flex-col h-auto overflow-auto"},S5e={class:"w-full"},T5e=["placeholder"],A5e={class:"w-full"},y5e=["placeholder"],I5e={class:"w-full"},C5e={class:"flex flex-col gap-2.5 mb-4 mt-2"},O5e=["id","value"],N5e=["for"],x5e={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function R5e(t,n,a,e,s,r){const o=H("woot-modal-header");return p(),g("div",E5e,[v(o,{"header-title":e.modalTitle,"header-content":e.modalDescription},null,8,["header-title","header-content"]),f("form",{class:"flex flex-col w-full",onSubmit:Ve(e.handleCustomRole,["prevent"])},[f("div",S5e,[f("label",{class:oe({error:e.v$.name.$error})},[Oe(C(t.$t("CUSTOM_ROLE.FORM.NAME.LABEL"))+" ",1),ce(f("input",{ref:"nameInput","onUpdate:modelValue":n[0]||(n[0]=i=>e.name=i),type:"text",placeholder:t.$t("CUSTOM_ROLE.FORM.NAME.PLACEHOLDER"),onBlur:n[1]||(n[1]=(...i)=>e.v$.name.$touch&&e.v$.name.$touch(...i))},null,40,T5e),[[Et,e.name,void 0,{trim:!0}]])],2)]),f("div",A5e,[f("label",{class:oe({error:e.v$.description.$error})},[Oe(C(t.$t("CUSTOM_ROLE.FORM.DESCRIPTION.LABEL"))+" ",1),ce(f("textarea",{"onUpdate:modelValue":n[2]||(n[2]=i=>e.description=i),rows:3,placeholder:t.$t("CUSTOM_ROLE.FORM.DESCRIPTION.PLACEHOLDER"),onBlur:n[3]||(n[3]=(...i)=>e.v$.description.$touch&&e.v$.description.$touch(...i))},null,40,y5e),[[Et,e.description]])],2)]),f("div",I5e,[f("label",{class:oe({"text-n-ruby-9":e.v$.selectedPermissions.$error})},C(t.$t("CUSTOM_ROLE.FORM.PERMISSIONS.LABEL")),3),f("div",C5e,[(p(!0),g(de,null,Ae(e.AVAILABLE_CUSTOM_ROLE_PERMISSIONS,i=>(p(),g("div",{key:i,class:"flex items-center"},[ce(f("input",{id:i,"onUpdate:modelValue":n[4]||(n[4]=l=>e.selectedPermissions=l),type:"checkbox",value:i,name:"permissions",class:"ltr:mr-2 rtl:ml-2"},null,8,O5e),[[bn,e.selectedPermissions]]),f("label",{for:i,class:"text-sm font-normal"},C(t.$t(`CUSTOM_ROLE.PERMISSIONS.${i.toUpperCase()}`)),9,N5e)]))),128))])]),f("div",x5e,[v(e.Button,{faded:"",slate:"",type:"reset",label:t.$t("CUSTOM_ROLE.FORM.CANCEL_BUTTON_TEXT"),onClick:n[5]||(n[5]=Ve(i=>e.emit("close"),["prevent"]))},null,8,["label"]),v(e.Button,{type:"submit",label:e.submitButtonText,disabled:e.isSubmitDisabled,"is-loading":e.addCustomRole.showLoading},null,8,["label","disabled","is-loading"])])],32)])}const w5e=G(v5e,[["render",R5e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/customRoles/component/CustomRoleModal.vue"]]),M5e={__name:"CustomRoleTableBody",props:{roles:{type:Array,required:!0},loading:{type:Object,default:()=>({})}},emits:["edit","delete"],setup(t,{expose:n,emit:a}){n();const e=a,{t:s}=Q(),o={emit:e,t:s,getFormattedPermissions:i=>i.permissions.map(l=>s(Yu("CUSTOM_ROLE.PERMISSIONS",l))).join(", "),get useI18n(){return Q},get getI18nKey(){return Yu},Button:Se};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},L5e={class:"divide-y divide-n-weak text-n-slate-11"},D5e=["title"],P5e={class:"py-4 ltr:pr-4 rtl:pl-4 whitespace-normal align-baseline md:break-words"},k5e={class:"py-4 ltr:pr-4 rtl:pl-4 whitespace-normal align-baseline md:break-words"},B5e={class:"flex justify-end gap-1 py-4"};function F5e(t,n,a,e,s,r){const o=nt("tooltip");return p(),g("tbody",L5e,[(p(!0),g(de,null,Ae(a.roles,(i,l)=>(p(),g("tr",{key:l},[f("td",{class:"max-w-xs py-4 ltr:pr-4 rtl:pl-4 font-medium truncate align-baseline",title:i.name},C(i.name),9,D5e),f("td",P5e,C(i.description),1),f("td",k5e,C(e.getFormattedPermissions(i)),1),f("td",B5e,[ce(v(e.Button,{icon:"i-lucide-pen",slate:"",xs:"",faded:"",onClick:c=>e.emit("edit",i)},null,8,["onClick"]),[[o,t.$t("CUSTOM_ROLE.EDIT.BUTTON_TEXT"),void 0,{top:!0}]]),ce(v(e.Button,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"","is-loading":a.loading[i.id],onClick:c=>e.emit("delete",i)},null,8,["is-loading","onClick"]),[[o,t.$t("CUSTOM_ROLE.DELETE.BUTTON_TEXT"),void 0,{top:!0}]])])]))),128))])}const VL=G(M5e,[["render",F5e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/customRoles/component/CustomRoleTableBody.vue"]]),U5e={__name:"CustomRolePaywall",setup(t,{expose:n}){n();const a=[{name:"All Permissions",description:"All permissions",permissions:["conversation_manage","conversation_participating_manage","conversation_unassigned_manage","contact_manage","report_manage","knowledge_base_manage"]},{name:"Conversation Permissions",description:"Conversation permissions",permissions:["conversation_manage","conversation_participating_manage","conversation_unassigned_manage"]},{name:"Contact Permissions",description:"Contact permissions",permissions:["contact_manage"]},{name:"Report Permissions",description:"Report permissions",permissions:["report_manage"]}],e=ft(),s=le("globalConfig/isOnChatwootCloud"),r=le("getCurrentUser"),o=le("getCurrentAccountId"),i=S(()=>r.value.type==="SuperAdmin"),l=S(()=>s.value?"PAYWALL":"ENTERPRISE_PAYWALL"),c=()=>{e.push({name:"billing_settings_index",params:{accountId:o.value}})},{t:d}=Q(),u=S(()=>[d("CUSTOM_ROLE.LIST.TABLE_HEADER.NAME"),d("CUSTOM_ROLE.LIST.TABLE_HEADER.DESCRIPTION"),d("CUSTOM_ROLE.LIST.TABLE_HEADER.PERMISSIONS"),d("CUSTOM_ROLE.LIST.TABLE_HEADER.ACTIONS")]),m={dummyCustomRolesData:a,router:e,isOnChatwootCloud:s,currentUser:r,currentAccountId:o,isSuperAdmin:i,i18nKey:l,goToBillingSettings:c,t:d,tableHeaders:u,computed:S,get useMapGetter(){return le},get useRouter(){return ft},BasePaywallModal:t_,CustomRoleListItem:VL,get useI18n(){return Q}};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}},$5e={class:"w-full min-h-[12rem] relative"},G5e={class:"w-full space-y-3 text-sm"},V5e={class:"opacity-30 dark:opacity-30"},H5e={class:"mb-0"},j5e={class:"absolute inset-0 flex flex-col items-center justify-center w-full h-full bg-gradient-to-t from-white dark:from-slate-900 to-transparent"};function W5e(t,n,a,e,s,r){return p(),g("div",$5e,[f("div",G5e,[f("thead",V5e,[(p(!0),g(de,null,Ae(e.tableHeaders,o=>(p(),g("th",{key:o,class:"py-4 ltr:pr-4 rtl:pl-4 font-semibold text-left text-n-slate-11"},[f("span",H5e,C(o),1)]))),128))]),v(e.CustomRoleListItem,{class:"opacity-25 dark:opacity-20",roles:e.dummyCustomRolesData,loading:{}})]),f("div",j5e,[v(e.BasePaywallModal,{"feature-prefix":"CUSTOM_ROLE","i18n-key":e.i18nKey,"is-on-chatwoot-cloud":e.isOnChatwootCloud,"is-super-admin":e.isSuperAdmin,onUpgrade:e.goToBillingSettings},null,8,["i18n-key","is-on-chatwoot-cloud","is-super-admin"])])])}const z5e=G(U5e,[["render",W5e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/customRoles/component/CustomRolePaywall.vue"]]),Y5e={__name:"Index",setup(t,{expose:n}){n();const a=Fe(),{t:e}=Q(),s=P(!1),r=P("add"),o=P(null),i=P({}),l=P(!1),c=P({}),d=le("customRole/getCustomRoles"),u=le("customRole/getUIFlags"),m=S(()=>`${e("CUSTOM_ROLE.DELETE.CONFIRM.YES")} ${c.value.name}`),h=S(()=>`${e("CUSTOM_ROLE.DELETE.CONFIRM.NO")} ${c.value.name}`),_=S(()=>` ${c.value.name} ? `),E=le("accounts/isFeatureEnabledonAccount"),y=le("getCurrentAccountId"),b=S(()=>!E.value(y.value,"custom_roles")),A=async()=>{try{await a.dispatch("customRole/getCustomRole")}catch{}};Pe(()=>{A()});const T=S(()=>[e("CUSTOM_ROLE.LIST.TABLE_HEADER.NAME"),e("CUSTOM_ROLE.LIST.TABLE_HEADER.DESCRIPTION"),e("CUSTOM_ROLE.LIST.TABLE_HEADER.PERMISSIONS"),e("CUSTOM_ROLE.LIST.TABLE_HEADER.ACTIONS")]),I=V=>{i.value[c.value.id]=!1,c.value={},Z(V)},N=()=>{b.value||(r.value="add",o.value=null,s.value=!0)},x=V=>{r.value="edit",o.value=V,s.value=!0},R=()=>{o.value=null,s.value=!1},M=V=>{l.value=!0,c.value=V},w=()=>{l.value=!1},D=async V=>{try{await a.dispatch("customRole/deleteCustomRole",V),I(e("CUSTOM_ROLE.DELETE.API.SUCCESS_MESSAGE"))}catch(F){const $=(F==null?void 0:F.message)||e("CUSTOM_ROLE.DELETE.API.ERROR_MESSAGE");I($)}},k={store:a,t:e,showCustomRoleModal:s,customRoleModalMode:r,selectedRole:o,loading:i,showDeleteConfirmationPopup:l,activeResponse:c,records:d,uiFlags:u,deleteConfirmText:m,deleteRejectText:h,deleteMessage:_,isFeatureEnabledOnAccount:E,currentAccountId:y,isBehindAPaywall:b,fetchCustomRoles:A,tableHeaders:T,showAlertMessage:I,openAddModal:N,openEditModal:x,hideCustomRoleModal:R,openDeletePopup:M,closeDeletePopup:w,deleteCustomRole:D,confirmDeletion:()=>{i[c.value.id]=!0,w(),D(c.value.id)},get useAlert(){return Z},SettingsLayout:Ha,BaseSettingsHeader:Va,CustomRoleModal:w5e,CustomRoleTableBody:VL,CustomRolePaywall:z5e,Button:Se,computed:S,onMounted:Pe,ref:P,get useI18n(){return Q},get useStore(){return Fe},get useMapGetter(){return le}};return Object.defineProperty(k,"__isScriptSetup",{enumerable:!1,value:!0}),k}},K5e={key:1,class:"min-w-full overflow-x-auto divide-y divide-n-weak"},X5e={class:"mb-0"};function q5e(t,n,a,e,s,r){const o=H("woot-modal"),i=H("woot-delete-modal");return p(),L(e.SettingsLayout,{"is-loading":e.uiFlags.fetchingList,"loading-message":t.$t("CUSTOM_ROLE.LOADING"),"no-records-found":!e.records.length&&!e.isBehindAPaywall,"no-records-message":t.$t("CUSTOM_ROLE.LIST.404")},{header:z(()=>[v(e.BaseSettingsHeader,{title:t.$t("CUSTOM_ROLE.HEADER"),description:t.$t("CUSTOM_ROLE.DESCRIPTION"),"link-text":t.$t("CUSTOM_ROLE.LEARN_MORE"),"feature-name":"canned_responses"},{actions:z(()=>[v(e.Button,{icon:"i-lucide-circle-plus",label:t.$t("CUSTOM_ROLE.HEADER_BTN_TXT"),disabled:e.isBehindAPaywall,onClick:e.openAddModal},null,8,["label","disabled"])]),_:1},8,["title","description","link-text"])]),body:z(()=>[e.isBehindAPaywall?(p(),L(e.CustomRolePaywall,{key:0})):(p(),g("table",K5e,[f("thead",null,[(p(!0),g(de,null,Ae(e.tableHeaders,l=>(p(),g("th",{key:l,class:"py-4 ltr:pr-4 rtl:pl-4 font-semibold text-left text-n-slate-11"},[f("span",X5e,C(l),1)]))),128))]),v(e.CustomRoleTableBody,{roles:e.records,loading:e.loading,onEdit:e.openEditModal,onDelete:e.openDeletePopup},null,8,["roles","loading"])]))]),default:z(()=>[v(o,{show:e.showCustomRoleModal,"onUpdate:show":n[0]||(n[0]=l=>e.showCustomRoleModal=l),"on-close":e.hideCustomRoleModal},{default:z(()=>[v(e.CustomRoleModal,{mode:e.customRoleModalMode,"selected-role":e.selectedRole,onClose:e.hideCustomRoleModal},null,8,["mode","selected-role"])]),_:1},8,["show"]),v(i,{show:e.showDeleteConfirmationPopup,"onUpdate:show":n[1]||(n[1]=l=>e.showDeleteConfirmationPopup=l),"on-close":e.closeDeletePopup,"on-confirm":e.confirmDeletion,title:t.$t("CUSTOM_ROLE.DELETE.CONFIRM.TITLE"),message:t.$t("CUSTOM_ROLE.DELETE.CONFIRM.MESSAGE"),"message-value":e.deleteMessage,"confirm-text":e.deleteConfirmText,"reject-text":e.deleteRejectText},null,8,["show","title","message","message-value","confirm-text","reject-text"])]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"])}const Z5e=G(Y5e,[["render",q5e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/customRoles/Index.vue"]]),Q5e={routes:[{path:vt("accounts/:accountId/settings/custom-roles"),component:cs,children:[{path:"",redirect:"list"},{path:"list",name:"custom_roles_list",meta:{featureFlag:pt.CUSTOM_ROLES,installationTypes:[gn.CLOUD,gn.ENTERPRISE],permissions:["administrator"]},component:Z5e}]}]},J5e={__name:"Wrapper",props:{keepAlive:{type:Boolean,default:!0}},setup(t,{expose:n}){n();const a={};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},eBe={class:"flex flex-col justify-between flex-1 h-full m-0 overflow-auto bg-n-background"};function tBe(t,n,a,e,s,r){const o=H("router-view");return p(),g("div",eBe,[v(o,null,{default:z(({Component:i})=>[a.keepAlive?(p(),L(th,{key:0},[(p(),L(Da(i)))],1024)):(p(),L(Da(i),{key:1}))]),_:1})])}const nBe=G(J5e,[["render",tBe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/profile/Wrapper.vue"]]),aBe={__name:"UserProfilePicture",props:{src:{type:String,default:""},name:{type:String,default:""}},emits:["change","delete"],setup(t,{expose:n,emit:a}){n();const e=a,o={emit:e,updateProfilePicture:i=>{e("change",i)},deleteProfilePicture:()=>{e("delete")},Avatar:qt};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},sBe={class:"flex flex-col gap-2"},oBe={class:"text-sm font-medium text-n-slate-12"};function rBe(t,n,a,e,s,r){return p(),g("div",sBe,[f("span",oBe,C(t.$t("PROFILE_SETTINGS.FORM.PICTURE")),1),v(e.Avatar,{src:a.src||"",name:a.name||"",size:72,"allow-upload":"",onUpload:e.updateProfilePicture,onDelete:e.deleteProfilePicture},null,8,["src","name"])])}const iBe=G(aBe,[["render",rBe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/profile/UserProfilePicture.vue"]]),lBe={components:{NextButton:Se},props:{name:{type:String,default:""},email:{type:String,default:""},displayName:{type:String,default:""},emailEnabled:{type:Boolean,default:!1}},emits:["updateUser"],setup(){return{v$:rt()}},data(){return{userName:this.name,userDisplayName:this.displayName,userEmail:this.email,inputStyles:{borderRadius:"0.75rem",padding:"0.375rem 0.75rem",fontSize:"0.875rem",marginBottom:"0.125rem"}}},validations:{userName:{required:Ge,minLength:Rt(1)},userDisplayName:{},userEmail:{required:Ge,email:br}},watch:{name:{handler(t){this.userName=t},immediate:!0},displayName:{handler(t){this.userDisplayName=t},immediate:!0},email:{handler(t){this.userEmail=t},immediate:!0}},methods:{async updateUser(){if(this.v$.$touch(),this.v$.$invalid){Z(this.$t("PROFILE_SETTINGS.FORM.ERROR"));return}this.$emit("updateUser",{name:this.userName,displayName:this.userDisplayName,email:this.userEmail})}}};function cBe(t,n,a,e,s,r){const o=H("woot-input"),i=H("NextButton");return p(),g("form",{class:"flex flex-col gap-4",onSubmit:n[3]||(n[3]=Ve(l=>r.updateUser("profile"),["prevent"]))},[v(o,{modelValue:s.userName,"onUpdate:modelValue":n[0]||(n[0]=l=>s.userName=l),styles:s.inputStyles,class:oe({error:e.v$.userName.$error}),label:t.$t("PROFILE_SETTINGS.FORM.NAME.LABEL"),placeholder:t.$t("PROFILE_SETTINGS.FORM.NAME.PLACEHOLDER"),error:`${e.v$.userName.$error?t.$t("PROFILE_SETTINGS.FORM.NAME.ERROR"):""}`,onInput:e.v$.userName.$touch,onBlur:e.v$.userName.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"]),v(o,{modelValue:s.userDisplayName,"onUpdate:modelValue":n[1]||(n[1]=l=>s.userDisplayName=l),styles:s.inputStyles,class:oe({error:e.v$.userDisplayName.$error}),label:t.$t("PROFILE_SETTINGS.FORM.DISPLAY_NAME.LABEL"),placeholder:t.$t("PROFILE_SETTINGS.FORM.DISPLAY_NAME.PLACEHOLDER"),error:`${e.v$.userDisplayName.$error?t.$t("PROFILE_SETTINGS.FORM.DISPLAY_NAME.ERROR"):""}`,onInput:e.v$.userDisplayName.$touch,onBlur:e.v$.userDisplayName.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"]),a.emailEnabled?(p(),L(o,{key:0,modelValue:s.userEmail,"onUpdate:modelValue":n[2]||(n[2]=l=>s.userEmail=l),styles:s.inputStyles,class:oe({error:e.v$.userEmail.$error}),label:t.$t("PROFILE_SETTINGS.FORM.EMAIL.LABEL"),placeholder:t.$t("PROFILE_SETTINGS.FORM.EMAIL.PLACEHOLDER"),error:`${e.v$.userEmail.$error?t.$t("PROFILE_SETTINGS.FORM.EMAIL.ERROR"):""}`,onInput:e.v$.userEmail.$touch,onBlur:e.v$.userEmail.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"])):O("v-if",!0),f("div",null,[v(i,{type:"submit",label:t.$t("PROFILE_SETTINGS.BTN_TEXT")},null,8,["label"])])],32)}const dBe=G(lBe,[["render",cBe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/profile/UserBasicDetails.vue"]]),uBe={__name:"MessageSignature",props:{messageSignature:{type:String,default:""}},emits:["updateSignature"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=HI,o=P(e.messageSignature);je(()=>e.messageSignature??"",c=>{o.value=c});const l={props:e,emit:s,customEditorMenuList:r,signature:o,updateSignature:()=>{s("updateSignature",o.value)},ref:P,watch:je,WootMessageEditor:ai,get MESSAGE_SIGNATURE_EDITOR_MENU_OPTIONS(){return HI},NextButton:Se};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}};function pBe(t,n,a,e,s,r){return p(),g("form",{class:"flex flex-col gap-6",onSubmit:n[1]||(n[1]=Ve(o=>e.updateSignature(),["prevent"]))},[v(e.WootMessageEditor,{id:"message-signature-input",modelValue:e.signature,"onUpdate:modelValue":n[0]||(n[0]=o=>e.signature=o),class:"message-editor h-[10rem] !px-3","is-format-mode":"",placeholder:t.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE.PLACEHOLDER"),"enabled-menu-options":e.customEditorMenuList,"enable-suggestions":!1,"show-image-resize-toolbar":""},null,8,["modelValue","placeholder","enabled-menu-options"]),f("div",null,[v(e.NextButton,{type:"submit",label:t.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.BTN_TEXT")},null,8,["label"])])],32)}const fBe=G(uBe,[["render",pBe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/profile/MessageSignature.vue"]]),mBe={components:{WithLabel:$l},props:{id:{type:String,default:""},options:{type:Array,default:()=>[]},placeholder:{type:String,default:""},name:{type:String,required:!0},icon:{type:String,default:""},label:{type:String,required:!0},modelValue:{type:String,default:""},hasError:{type:Boolean,default:!1},errorMessage:{type:String,default:""}},emits:["update:modelValue"],methods:{onInput(t){this.$emit("update:modelValue",t.target.value)}}},hBe=["id","selected","name"],_Be={value:"",disabled:"",selected:"",class:"hidden"},gBe=["value"];function bBe(t,n,a,e,s,r){const o=H("WithLabel");return p(),L(o,{label:a.label,icon:a.icon,name:a.name,"has-error":a.hasError,"error-message":a.errorMessage},{default:z(()=>[f("select",{id:a.id,selected:a.modelValue,name:a.name,class:oe([{"text-n-slate-9":!a.modelValue,"text-n-slate-12":a.modelValue,"pl-9":a.icon},"block w-full px-3 py-2 pr-6 mb-0 border-0 shadow-sm appearance-none rounded-xl select-caret leading-6"]),onInput:n[0]||(n[0]=(...i)=>r.onInput&&r.onInput(...i))},[f("option",_Be,C(a.placeholder),1),qe(t.$slots,"default",{},()=>[(p(!0),g(de,null,Ae(a.options,i=>(p(),g("option",{key:i.value,value:i.value},C(i.label),9,gBe))),128))],!0)],42,hBe)]),_:3},8,["label","icon","name","has-error","error-message"])}const c1=G(mBe,[["render",bBe],["__scopeId","data-v-a5db4b90"],["__file","/app/app/javascript/v3/components/Form/Select.vue"]]),vBe={__name:"FontSize",props:{value:{type:String,default:"default"},label:{type:String,default:""},description:{type:String,default:""}},emits:["change"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{fontSizeOptions:r}=Im(),o=S({get:()=>e.value,set:l=>{s("change",l)}}),i={props:e,emit:s,fontSizeOptions:r,selectedValue:o,computed:S,FormSelect:c1,get useFontSize(){return Im}};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}},EBe={class:"flex gap-2 justify-between w-full items-start"},SBe={class:"text-n-gray-12 font-medium leading-6 text-sm"},TBe={class:"text-n-gray-11"},ABe=["value","selected"];function yBe(t,n,a,e,s,r){return p(),g("div",EBe,[f("div",null,[f("label",SBe,C(a.label),1),f("p",TBe,C(a.description),1)]),v(e.FormSelect,{modelValue:e.selectedValue,"onUpdate:modelValue":n[0]||(n[0]=o=>e.selectedValue=o),name:"fontSize",spacing:"compact",class:"min-w-28 mt-px",value:e.selectedValue,options:e.fontSizeOptions,label:""},{default:z(()=>[(p(!0),g(de,null,Ae(e.fontSizeOptions,o=>(p(),g("option",{key:o.value,value:o.value,selected:o.value===e.selectedValue},C(o.label),9,ABe))),128))]),_:1},8,["modelValue","value","options"])])}const IBe=G(vBe,[["render",yBe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/profile/FontSize.vue"]]),CBe={__name:"UserLanguageSelect",props:{label:{type:String,default:""},description:{type:String,default:""}},setup(t,{expose:n}){n();const{t:a,locale:e}=Q(),{updateUISettings:s,uiSettings:r}=Ct(),{enabledLanguages:o}=io(),{currentAccount:i}=Ut(),l=S(()=>{var h;return((h=r.value)==null?void 0:h.locale)??""}),c=S(()=>[{name:a("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.LANGUAGE.USE_ACCOUNT_DEFAULT"),iso_639_1_code:""},...o??[]]),d=async h=>{try{if(!h){await s({locale:null}),e.value=i.value.locale,Z(a("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.LANGUAGE.UPDATE_SUCCESS"));return}if(!(o||[]).some(E=>E.iso_639_1_code===h))throw new Error(`Invalid language code: ${h}`);await s({locale:h}),e.value=h,Z(a("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.LANGUAGE.UPDATE_SUCCESS"))}catch(_){throw Z(a("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.LANGUAGE.UPDATE_ERROR")),_}},u=S({get:()=>l.value,set:h=>{d(h)}}),m={t:a,locale:e,updateUISettings:s,uiSettings:r,enabledLanguages:o,currentAccount:i,currentLanguage:l,languageOptions:c,updateLanguage:d,selectedValue:u,computed:S,get useI18n(){return Q},get useAlert(){return Z},get useConfig(){return io},get useAccount(){return Ut},get useUISettings(){return Ct},FormSelect:c1};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}},OBe={class:"flex gap-2 justify-between w-full items-start"},NBe={class:"text-n-gray-12 font-medium leading-6 text-sm"},xBe={class:"text-n-gray-11"},RBe=["value","selected"];function wBe(t,n,a,e,s,r){return p(),g("div",OBe,[f("div",null,[f("label",NBe,C(a.label),1),f("p",xBe,C(a.description),1)]),v(e.FormSelect,{modelValue:e.selectedValue,"onUpdate:modelValue":n[0]||(n[0]=o=>e.selectedValue=o),name:"language",spacing:"compact",class:"min-w-28 mt-px",options:e.languageOptions,label:""},{default:z(()=>[(p(!0),g(de,null,Ae(e.languageOptions,o=>(p(),g("option",{key:o.iso_639_1_code||"default",value:o.iso_639_1_code,selected:o.iso_639_1_code===e.selectedValue},C(o.name),9,RBe))),128))]),_:1},8,["modelValue","options"])])}const MBe=G(CBe,[["render",wBe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/profile/UserLanguageSelect.vue"]]),LBe={__name:"HotKeyCard",props:{active:{type:Boolean,default:!1},title:{type:String,default:""},description:{type:String,default:""},lightImage:{type:String,default:""},darkImage:{type:String,default:""}},setup(t,{expose:n}){n();const a={};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},DBe={class:"flex flex-col gap-2 items-center w-full rounded-t-[5px]"},PBe={class:"grid grid-cols-[1fr_auto] items-center w-full gap-1"},kBe={class:"overflow-hidden text-base font-medium text-n-slate-12 text-left"},BBe={class:"block truncate"},FBe=["checked","name"],UBe={class:"text-n-slate-12 text-sm line-clamp-2 leading-[1.4] text-start"},$Be=["src","alt"],GBe=["src","alt"];function VBe(t,n,a,e,s,r){return p(),g("button",{class:oe(["flex flex-col gap-4 w-full h-fit p-4 rounded-md border border-n-weak dark:border-n-weak",{"border-n-brand ":a.active}])},[f("div",DBe,[f("div",PBe,[f("div",kBe,[f("span",BBe,C(a.title),1)]),f("input",{checked:a.active,type:"radio",name:`hotkey-${a.title}`,class:"shadow cursor-pointer grid place-items-center border-2 border-n-strong appearance-none rounded-full w-5 h-5 checked:bg-n-brand before:content-[''] before:bg-n-brand before:border-4 before:rounded-full before:border-n-strong checked:before:w-[18px] checked:before:h-[18px] checked:border checked:border-n-brand"},null,8,FBe)]),f("span",UBe,C(a.description),1)]),f("div",null,[f("img",{src:a.lightImage,alt:`Light themed image for ${a.title}`,class:"block object-cover w-full dark:hidden"},null,8,$Be),f("img",{src:a.darkImage,alt:`Dark themed image for ${a.title}`,class:"hidden object-cover w-full dark:block"},null,8,GBe)])],2)}const HBe=G(LBe,[["render",VBe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/profile/HotKeyCard.vue"]]),jBe={components:{NextButton:Se},setup(){return{v$:rt()}},data(){return{currentPassword:"",password:"",passwordConfirmation:"",isPasswordChanging:!1,errorMessage:"",inputStyles:{borderRadius:"0.75rem",padding:"0.375rem 0.75rem",fontSize:"0.875rem",marginBottom:"0.125rem"}}},validations:{currentPassword:{required:Ge},password:{minLength:Rt(6)},passwordConfirmation:{minLength:Rt(6),isEqPassword(t){return t===this.password}}},computed:{isButtonDisabled(){return!this.currentPassword||!this.passwordConfirmation||!this.v$.passwordConfirmation.isEqPassword}},methods:{async changePassword(){if(this.v$.$touch(),this.v$.$invalid){Z(this.$t("PROFILE_SETTINGS.FORM.ERROR"));return}let t=this.$t("PROFILE_SETTINGS.PASSWORD_UPDATE_SUCCESS");try{await this.$store.dispatch("updatePassword",{password:this.password,passwordConfirmation:this.passwordConfirmation,currentPassword:this.currentPassword})}catch(n){t=Kr(n)||this.$t("RESET_PASSWORD.API.ERROR_MESSAGE")}finally{Z(t)}}}},WBe={class:"flex flex-col w-full gap-4"};function zBe(t,n,a,e,s,r){const o=H("woot-input"),i=H("NextButton");return p(),g("form",{onSubmit:n[3]||(n[3]=Ve(l=>r.changePassword(),["prevent"]))},[f("div",WBe,[v(o,{modelValue:s.currentPassword,"onUpdate:modelValue":n[0]||(n[0]=l=>s.currentPassword=l),type:"password",styles:s.inputStyles,class:oe({error:e.v$.currentPassword.$error}),label:t.$t("PROFILE_SETTINGS.FORM.CURRENT_PASSWORD.LABEL"),placeholder:t.$t("PROFILE_SETTINGS.FORM.CURRENT_PASSWORD.PLACEHOLDER"),error:`${e.v$.currentPassword.$error?t.$t("PROFILE_SETTINGS.FORM.CURRENT_PASSWORD.ERROR"):""}`,onInput:e.v$.currentPassword.$touch,onBlur:e.v$.currentPassword.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"]),v(o,{modelValue:s.password,"onUpdate:modelValue":n[1]||(n[1]=l=>s.password=l),type:"password",styles:s.inputStyles,class:oe({error:e.v$.password.$error}),label:t.$t("PROFILE_SETTINGS.FORM.PASSWORD.LABEL"),placeholder:t.$t("PROFILE_SETTINGS.FORM.PASSWORD.PLACEHOLDER"),error:`${e.v$.password.$error?t.$t("PROFILE_SETTINGS.FORM.PASSWORD.ERROR"):""}`,onInput:e.v$.password.$touch,onBlur:e.v$.password.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"]),v(o,{modelValue:s.passwordConfirmation,"onUpdate:modelValue":n[2]||(n[2]=l=>s.passwordConfirmation=l),type:"password",styles:s.inputStyles,class:oe({error:e.v$.passwordConfirmation.$error}),label:t.$t("PROFILE_SETTINGS.FORM.PASSWORD_CONFIRMATION.LABEL"),placeholder:t.$t("PROFILE_SETTINGS.FORM.PASSWORD_CONFIRMATION.PLACEHOLDER"),error:`${e.v$.passwordConfirmation.$error?t.$t("PROFILE_SETTINGS.FORM.PASSWORD_CONFIRMATION.ERROR"):""}`,onInput:e.v$.passwordConfirmation.$touch,onBlur:e.v$.passwordConfirmation.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"]),f("div",null,[v(i,{type:"submit",label:t.$t("PROFILE_SETTINGS.FORM.PASSWORD_SECTION.BTN_TEXT"),disabled:r.isButtonDisabled},null,8,["label","disabled"])])])],32)}const YBe=G(jBe,[["render",zBe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/profile/ChangePassword.vue"]]),KBe={__name:"CheckBox",props:{isChecked:{type:Boolean,default:!1},value:{type:String,default:null}},emits:["update"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=S({get:()=>e.isChecked,set:i=>s("update",e.value,i)}),o={props:e,emit:s,checked:r,computed:S};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},XBe=["id","value"];function qBe(t,n,a,e,s,r){return ce((p(),g("input",{id:a.value,"onUpdate:modelValue":n[0]||(n[0]=o=>e.checked=o),type:"checkbox",value:a.value,class:"flex-shrink-0 mt-0.5 border-n-strong border bg-n-slate-2 checked:border-none checked:bg-n-brand shadow-sm appearance-none rounded-[4px] w-4 h-4 focus:ring-1 after:content-[''] after:text-white checked:after:content-[''] after:flex after:items-center after:justify-center after:text-center after:text-xs after:font-bold after:relative"},null,8,XBe)),[[bn,e.checked]])}const d1=G(KBe,[["render",qBe],["__file","/app/app/javascript/v3/components/Form/CheckBox.vue"]]),ZBe={components:{TableHeaderCell:wL,ToggleSwitch:mo,CheckBox:d1},data(){return{selectedEmailFlags:[],selectedPushFlags:[],enableAudioAlerts:!1,hasEnabledPushPermissions:!1,notificationTypes:T4}},computed:{..._t({accountId:"getCurrentAccountId",emailFlags:"userNotificationSettings/getSelectedEmailFlags",pushFlags:"userNotificationSettings/getSelectedPushFlags",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"}),hasPushAPISupport(){return"Notification"in window},isSLAEnabled(){return this.isFeatureEnabledonAccount(this.accountId,pt.SLA)},filteredNotificationTypes(){return this.notificationTypes.filter(t=>this.isSLAEnabled?!0:!["sla_missed_first_response","sla_missed_next_response","sla_missed_resolution"].includes(t.value))}},watch:{emailFlags(t){this.selectedEmailFlags=t},pushFlags(t){this.selectedPushFlags=t}},mounted(){YQ()&&this.getPushSubscription(),this.$store.dispatch("userNotificationSettings/get")},methods:{checkFlagStatus(t,n){return(t==="email"?this.selectedEmailFlags:this.selectedPushFlags).includes(`${t}_${n}`)},onRegistrationSuccess(){this.hasEnabledPushPermissions=!0},onRequestPermissions(t){t?qQ({onSuccess:this.onRegistrationSuccess}):this.disablePushPermissions()},disablePushPermissions(){Pv(t=>t.pushManager.getSubscription().then(n=>n?n.unsubscribe():null).finally(()=>{this.hasEnabledPushPermissions=!1}).catch(()=>{}))},getPushSubscription(){Pv(t=>t.pushManager.getSubscription().then(n=>{n?this.hasEnabledPushPermissions=!0:this.hasEnabledPushPermissions=!1}).catch(n=>console.log(n)))},async updateNotificationSettings(){try{this.$store.dispatch("userNotificationSettings/update",{selectedEmailFlags:this.selectedEmailFlags,selectedPushFlags:this.selectedPushFlags}),Z(this.$t("PROFILE_SETTINGS.FORM.API.UPDATE_SUCCESS"))}catch{Z(this.$t("PROFILE_SETTINGS.FORM.API.UPDATE_ERROR"))}},handleInput(t,n){t==="email"?this.handleEmailInput(n):this.handlePushInput(n)},handleEmailInput(t){this.selectedEmailFlags=this.toggleInput(this.selectedEmailFlags,t),this.updateNotificationSettings()},handlePushInput(t){this.selectedPushFlags=this.toggleInput(this.selectedPushFlags,t),this.updateNotificationSettings()},toggleInput(t,n){return t.includes(n)?t.filter(e=>e!==n):[...t,n]}}},QBe={id:"profile-settings-notifications",class:"flex flex-col gap-6"},JBe={class:"hidden sm:block"},e6e={class:"grid content-center h-12 grid-cols-12 gap-4 py-0 rounded-t-xl"},t6e={class:"text-sm font-normal normal-case text-n-slate-11"},n6e={class:"text-sm font-medium normal-case text-n-slate-12"},a6e={class:"flex items-center justify-between gap-1"},s6e={class:"text-sm font-medium normal-case text-n-slate-12 whitespace-nowrap"},o6e={class:"grid items-center content-center h-12 grid-cols-12 gap-4 py-0 rounded-t-xl"},r6e={class:"flex flex-row items-start gap-2 col-span-7 px-0 py-2 text-sm tracking-[0.5] rtl:text-right"},i6e={class:"text-sm text-n-slate-12"},l6e={class:"flex flex-col gap-6 sm:hidden"},c6e={class:"text-sm font-medium normal-case text-n-slate-12"},d6e={class:"flex flex-col gap-4"},u6e={class:"text-sm text-n-slate-12"},p6e={class:"flex items-center justify-start gap-2"},f6e={class:"text-sm font-medium normal-case text-n-slate-12"},m6e={class:"flex flex-col gap-4"},h6e={class:"text-sm text-n-slate-12"},_6e={class:"flex items-center justify-between w-full gap-2 p-4 border border-solid border-n-weak rounded-xl"},g6e={class:"flex flex-row items-center gap-2"},b6e={class:"text-sm text-n-slate-12"};function v6e(t,n,a,e,s,r){const o=H("TableHeaderCell"),i=H("CheckBox"),l=H("fluent-icon"),c=H("ToggleSwitch");return p(),g("div",QBe,[O(" Layout for desktop devices "),f("div",JBe,[f("div",e6e,[v(o,{span:7,label:"`${$t('PROFILE_SETTINGS.FORM.NOTIFICATIONS.TYPE_TITLE')}`"},{default:z(()=>[f("span",t6e,C(t.$t("PROFILE_SETTINGS.FORM.NOTIFICATIONS.TYPE_TITLE")),1)]),_:1}),v(o,{span:2,label:"`${$t('PROFILE_SETTINGS.FORM.NOTIFICATIONS.EMAIL')}`"},{default:z(()=>[f("span",n6e,C(t.$t("PROFILE_SETTINGS.FORM.NOTIFICATIONS.EMAIL")),1)]),_:1}),v(o,{span:3,label:"`${$t('PROFILE_SETTINGS.FORM.NOTIFICATIONS.PUSH')}`"},{default:z(()=>[f("div",a6e,[f("span",s6e,C(t.$t("PROFILE_SETTINGS.FORM.NOTIFICATIONS.PUSH")),1)])]),_:1})]),(p(!0),g(de,null,Ae(r.filteredNotificationTypes,(d,u)=>(p(),g("div",{key:u},[f("div",o6e,[f("div",r6e,[f("span",i6e,C(t.$t(d.label)),1)]),(p(),g(de,null,Ae(["email","push"],(m,h)=>f("div",{key:h,class:oe(["flex items-start gap-2 px-0 text-sm tracking-[0.5] text-left rtl:text-right",`col-span-${m==="push"?3:2}`])},[v(i,{value:`${m}_${d.value}`,"is-checked":r.checkFlagStatus(m,d.value,s.selectedPushFlags),onUpdate:_=>r.handleInput(m,_)},null,8,["value","is-checked","onUpdate"])],2)),64))])]))),128))]),O("  Layout for mobile devices "),f("div",l6e,[f("span",c6e,C(t.$t("PROFILE_SETTINGS.FORM.EMAIL_NOTIFICATIONS_SECTION.TITLE")),1),f("div",d6e,[(p(!0),g(de,null,Ae(r.filteredNotificationTypes,(d,u)=>(p(),g("div",{key:u,class:"flex flex-row items-start gap-2"},[v(i,{id:`email_${d.value}`,value:`email_${d.value}`,"is-checked":r.checkFlagStatus("email",d.value),onUpdate:r.handleEmailInput},null,8,["id","value","is-checked","onUpdate"]),f("span",u6e,C(t.$t(d.label)),1)]))),128))]),f("div",p6e,[f("span",f6e,C(t.$t("PROFILE_SETTINGS.FORM.PUSH_NOTIFICATIONS_SECTION.TITLE")),1)]),f("div",m6e,[(p(!0),g(de,null,Ae(r.filteredNotificationTypes,(d,u)=>(p(),g("div",{key:u,class:"flex flex-row items-start gap-2"},[v(i,{id:`push_${d.value}`,value:`push_${d.value}`,"is-checked":r.checkFlagStatus("push",d.value),onUpdate:r.handlePushInput},null,8,["id","value","is-checked","onUpdate"]),f("span",h6e,C(t.$t(d.label)),1)]))),128))])]),f("div",_6e,[f("div",g6e,[v(l,{icon:"alert",class:"flex-shrink-0 text-n-slate-12",size:"18"}),f("span",b6e,C(t.$t("PROFILE_SETTINGS.FORM.NOTIFICATIONS.BROWSER_PERMISSION")),1)]),v(c,{modelValue:s.hasEnabledPushPermissions,"onUpdate:modelValue":n[0]||(n[0]=d=>s.hasEnabledPushPermissions=d),onChange:r.onRequestPermissions},null,8,["modelValue","onChange"])])])}const E6e=G(ZBe,[["render",v6e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/profile/NotificationPreferences.vue"]]),S6e={__name:"AudioAlertTone",props:{value:{type:String,required:!0,validator:t=>["ding","bell","chime","magic","ping"].includes(t)},label:{type:String,default:""}},emits:["change"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=S(()=>[{value:"ding",label:"Ding"},{value:"bell",label:"Bell"},{value:"chime",label:"Chime"},{value:"magic",label:"Magic"},{value:"ping",label:"Ping"}]),o=S({get:()=>e.value,set:d=>{s("change",d)}}),i=new Audio,c={props:e,emit:s,alertTones:r,selectedValue:o,audio:i,playAudio:async()=>{try{i.src=`/audio/dashboard/${o.value}.mp3`,await i.play()}catch(d){vd(d)}},computed:S,Icon:Bt,get Sentry(){return gQ},FormSelect:c1};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}},T6e={class:"flex items-center gap-2"},A6e=["value","selected"];function y6e(t,n,a,e,s,r){const o=nt("tooltip");return p(),g("div",T6e,[v(e.FormSelect,{modelValue:e.selectedValue,"onUpdate:modelValue":n[0]||(n[0]=i=>e.selectedValue=i),name:"alertTone",spacing:"compact",class:"flex-grow",value:e.selectedValue,options:e.alertTones,label:a.label},{default:z(()=>[(p(!0),g(de,null,Ae(e.alertTones,i=>(p(),g("option",{key:i.label,value:i.value,selected:i.value===e.selectedValue},C(i.label),9,A6e))),128))]),_:1},8,["modelValue","value","options","label"]),ce((p(),g("button",{class:"border-0 shadow-sm outline-none flex justify-center items-center size-10 appearance-none rounded-xl ring-n-weak ring-1 ring-inset focus:ring-2 focus:ring-inset focus:ring-n-brand flex-shrink-0 mt-[1.75rem]",onClick:e.playAudio},[v(e.Icon,{icon:"i-lucide-volume-2"})])),[[o,t.$t("PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION.PLAY"),void 0,{top:!0}]])])}const I6e=G(S6e,[["render",y6e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/profile/AudioAlertTone.vue"]]),C6e={__name:"AudioAlertEvent",props:{label:{type:String,default:""},value:{type:String,default:""}},emits:["update"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=vT,o=Object.values(S_),i=S({get:()=>{if(e.value==="none")return[];if(e.value==="mine")return[S_.ASSIGNED];if(e.value==="all")return[...o];const u=e.value.split("+").filter(m=>o.includes(m));return[...new Set(u)]},set:u=>{const m=u.filter(Boolean).sort(),h=[...new Set(m)];if(h.length===0){s("update","none");return}s("update",h.join("+"))}}),l=(u,m)=>{let h=i.value;u?h.push(m):h=h.filter(_=>_!==m),i.value=h},c=S(()=>{const u="PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION.ALERT_COMBINATIONS.";return e.value===""||e.value==="none"?u+"NONE":u+i.value.join("+").toUpperCase()}),d={props:e,emit:s,alertEvents:r,alertEventValues:o,selectedValue:i,setValue:l,alertDescription:c,computed:S,CheckBox:d1,get ALERT_EVENTS(){return vT},get EVENT_TYPES(){return S_}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}},O6e={class:"pb-1 text-sm font-medium leading-6 text-n-slate-12"},N6e={class:"grid gap-3 mt-2"},x6e=["for"],R6e={class:"text-n-slate-11 text-sm font-medium mt-2"};function w6e(t,n,a,e,s,r){return p(),g("div",null,[f("label",O6e,C(a.label),1),f("div",N6e,[(p(!0),g(de,null,Ae(e.alertEvents,o=>(p(),g("div",{key:o.value,class:"flex items-center gap-2"},[v(e.CheckBox,{id:`checkbox-${o.value}`,"is-checked":e.selectedValue.includes(o.value),onUpdate:(i,l)=>e.setValue(l,o.value)},null,8,["id","is-checked","onUpdate"]),f("label",{for:`checkbox-${o.value}`,class:"text-sm text-n-slate-12 font-normal"},C(t.$t(`PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION.ALERT_TYPES.${o.label.toUpperCase()}`)),9,x6e)]))),128)),f("div",R6e,C(t.$t(e.alertDescription)),1)])])}const M6e=G(C6e,[["render",w6e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/profile/AudioAlertEvent.vue"]]),L6e={__name:"AudioAlertCondition",props:{label:{type:String,required:!0},items:{type:Array,required:!0}},emits:["change"],setup(t,{expose:n,emit:a}){n();const e=a,r={emit:e,onChange:(o,i)=>{e("change",o,i)},CheckBox:d1};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},D6e={class:"flex justify-between pb-1 text-sm font-medium leading-6 text-n-slate-12"},P6e={class:"flex flex-col gap-3 mt-2"},k6e=["for"];function B6e(t,n,a,e,s,r){return p(),g("div",null,[f("label",D6e,C(a.label),1),f("div",P6e,[(p(!0),g(de,null,Ae(a.items,o=>(p(),g("div",{key:o.id,class:"flex flex-row items-start gap-2"},[v(e.CheckBox,{id:`checkbox-condition-${o.value}`,"is-checked":o.model,value:o.value,onUpdate:e.onChange},null,8,["id","is-checked","value"]),f("label",{class:"text-sm font-normal text-n-slate-12",for:`checkbox-condition-${o.value}`},C(o.label),9,k6e)]))),128))])])}const F6e=G(L6e,[["render",B6e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/profile/AudioAlertCondition.vue"]]),hb="PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION",U6e={__name:"AudioNotifications",setup(t,{expose:n}){n();const a=Fe(),e=xt(),s=S(()=>e.getCurrentUser.value),{uiSettings:r,updateUISettings:o}=Ct(),{t:i}=Q(),l=P(""),c=P(!1),d=P(!1),u=P("ding"),m=P([]),h=T=>{const I=Di(T);l.value=I.enableAudioAlerts,c.value=!I.alwaysPlayAudioAlert,d.value=I.alertIfUnreadAssignedConversationExist,m.value=[{id:"audio1",label:i(`${hb}.CONDITIONS.CONDITION_ONE`),model:c.value,value:"tab_is_inactive"},{id:"audio2",label:i(`${hb}.CONDITIONS.CONDITION_TWO`),model:d.value,value:"conversations_are_read"}],u.value=I.notificationTone||"ding"};je(r,T=>{h(T)},{immediate:!0});const _=T=>{o(T),ET(s.value),Z(i("PROFILE_SETTINGS.FORM.API.UPDATE_SUCCESS"))};Pe(()=>{a.dispatch("userNotificationSettings/get")});const A={store:a,getters:e,currentUser:s,uiSettings:r,updateUISettings:o,t:i,audioAlert:l,playAudioWhenTabIsInactive:c,alertIfUnreadConversationExist:d,alertTone:u,audioAlertConditions:m,i18nKeyPrefix:hb,initializeNotificationUISettings:h,handleAudioConfigChange:_,handAudioAlertChange:T=>{l.value=T,_({enable_audio_alerts:T})},handleAudioAlertConditions:(T,I)=>{T==="tab_is_inactive"?_({always_play_audio_alert:!I}):T==="conversations_are_read"&&_({alert_if_unread_assigned_conversation_exist:I})},handleAudioToneChange:T=>{_({notification_tone:T})},get useAlert(){return Z},get useUISettings(){return Ct},AudioAlertTone:I6e,AudioAlertEvent:M6e,AudioAlertCondition:F6e,computed:S,onMounted:Pe,ref:P,watch:je,get useStore(){return Fe},get useI18n(){return Q},get camelcaseKeys(){return Di},get initializeAudioAlerts(){return ET},get useStoreGetters(){return xt}};return Object.defineProperty(A,"__isScriptSetup",{enumerable:!1,value:!0}),A}},$6e={id:"profile-settings-notifications",class:"flex flex-col gap-6"};function G6e(t,n,a,e,s,r){return p(),g("div",$6e,[v(e.AudioAlertTone,{value:e.alertTone,label:t.$t(`${e.i18nKeyPrefix}.DEFAULT_TONE.TITLE`),onChange:e.handleAudioToneChange},null,8,["value","label"]),v(e.AudioAlertEvent,{label:t.$t(`${e.i18nKeyPrefix}.ALERT_TYPE.TITLE`),value:e.audioAlert,onUpdate:e.handAudioAlertChange},null,8,["label","value"]),v(e.AudioAlertCondition,{items:e.audioAlertConditions,label:t.$t(`${e.i18nKeyPrefix}.CONDITIONS.TITLE`),onChange:e.handleAudioAlertConditions},null,8,["items","label"])])}const V6e=G(U6e,[["render",G6e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/profile/AudioNotifications.vue"]]),H6e={__name:"FormSection",props:{title:{type:String,default:""},description:{type:String,default:""}},setup(t,{expose:n}){n();const a={};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},j6e={class:"flex flex-col items-start w-full gap-6"},W6e={class:"flex flex-col w-full gap-4"},z6e={key:0,class:"text-lg font-medium text-n-slate-12"},Y6e={key:1,class:"mb-0 text-sm font-normal text-n-slate-12"},K6e={class:"flex flex-col w-full gap-6"};function X6e(t,n,a,e,s,r){return p(),g("div",j6e,[f("div",W6e,[a.title?(p(),g("h4",z6e,C(a.title),1)):O("v-if",!0),n[0]||(n[0]=f("div",{class:"flex flex-row items-center justify-between"},[f("div",{class:"flex-grow h-px bg-n-weak"})],-1)),a.description?(p(),g("p",Y6e,C(a.description),1)):O("v-if",!0)]),f("div",K6e,[qe(t.$slots,"default")])])}const q6e=G(H6e,[["render",X6e],["__file","/app/app/javascript/dashboard/components/FormSection.vue"]]),Z6e={__name:"MfaSettingsCard",setup(t,{expose:n}){n();const a=ft(),e=lt(),r={router:a,route:e,navigateToMfa:()=>{a.push({name:"profile_settings_mfa",params:{accountId:e.params.accountId}})},get useRouter(){return ft},get useRoute(){return lt},Button:Se,Icon:Bt};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},Q6e={class:"bg-n-background rounded-xl p-4 border border-n-slate-4"},J6e={class:"flex flex-col xs:flex-row items-center justify-between gap-4"},eFe={class:"flex flex-col items-start gap-1.5"},tFe={class:"flex items-center gap-2"},nFe={class:"text-sm font-semibold text-n-slate-12"},aFe={class:"text-sm text-n-slate-11"};function sFe(t,n,a,e,s,r){return p(),g("div",Q6e,[f("div",J6e,[f("div",eFe,[f("div",tFe,[v(e.Icon,{icon:"i-lucide-lock-keyhole",class:"size-4 text-n-slate-10 flex-shrink-0"}),f("h5",nFe,C(t.$t("MFA_SETTINGS.TITLE")),1)]),f("p",aFe,C(t.$t("MFA_SETTINGS.DESCRIPTION")),1)]),v(e.Button,{type:"button",faded:"",label:t.$t("PROFILE_SETTINGS.FORM.SECURITY_SECTION.MFA_BUTTON"),icon:"i-lucide-settings",class:"flex-shrink-0",onClick:e.navigateToMfa},null,8,["label"])])])}const oFe=G(Z6e,[["render",sFe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/profile/MfaSettingsCard.vue"]]);function uo(){const t=le("getCurrentUser"),n=le("accounts/isFeatureEnabledonAccount"),a=le("globalConfig/isOnChatwootCloud"),e=le("globalConfig/isACustomBrandedInstance"),{isEnterprise:s,enterprisePlanName:r}=io(),{accountId:o}=Ut(),i=()=>Yf(t.value,o.value),l=E=>E?n.value(o.value,E):!0,c=E=>{if(!E||!E.length)return!0;const y=i();return SE(E,y)},d=E=>{if(Array.isArray(E)&&E.length>0){const y={[gn.ENTERPRISE]:s,[gn.CLOUD]:a.value,[gn.COMMUNITY]:!0};return E.some(b=>y[b])}return!0},u=E=>E?iJ.includes(E):!0,m=S(()=>s?r!=="community":!0);return{checkPermissions:c,shouldShowPaywall:E=>{const y=Sa(E);if(!y||e.value)return!1;if(u(y)){if(a.value)return!l(y);if(s)return!m.value}return!1},isFeatureFlagEnabled:l,shouldShow:(E,y,b)=>{const A=Sa(E),T=Sa(y),I=Sa(b);return!c(T)||!d(I)?!1:e.value?l(A):a.value?l(A)||u(A):s?l(A)||u(A)&&!m.value:!0}}}const rFe={__name:"policy",props:{as:{type:String,default:"div"},permissions:{type:Array,required:!0},featureFlag:{type:String,default:null},installationTypes:{type:Array,default:null}},setup(t,{expose:n}){n();const a=t,{shouldShow:e}=uo(),s=S(()=>e(a.featureFlag,a.permissions,a.installationTypes)),r={props:a,shouldShow:e,show:s,get usePolicy(){return uo},computed:S};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}};function iFe(t,n,a,e,s,r){return e.show?(p(),L(Da(a.as),{key:0},{default:z(()=>[qe(t.$slots,"default")]),_:3})):O("v-if",!0)}const ii=G(rFe,[["render",iFe],["__file","/app/app/javascript/dashboard/components/policy.vue"]]),lFe={components:{MessageSignature:fBe,FormSection:q6e,FontSize:IBe,UserLanguageSelect:MBe,UserProfilePicture:iBe,Policy:ii,UserBasicDetails:dBe,HotKeyCard:HBe,ChangePassword:YBe,NotificationPreferences:E6e,AudioNotifications:V6e,AccessToken:jw,MfaSettingsCard:oFe},setup(){const{isEditorHotKeyEnabled:t,updateUISettings:n}=Ct(),{currentFontSize:a,updateFontSize:e}=Im(),{replaceInstallationName:s}=Rs();return{currentFontSize:a,updateFontSize:e,isEditorHotKeyEnabled:t,updateUISettings:n,replaceInstallationName:s}},data(){return{avatarFile:"",avatarUrl:"",name:"",displayName:"",email:"",messageSignature:"",hotKeys:[{key:"enter",title:this.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.CARD.ENTER_KEY.HEADING"),description:this.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.CARD.ENTER_KEY.CONTENT"),lightImage:"/assets/images/dashboard/profile/hot-key-enter.svg",darkImage:"/assets/images/dashboard/profile/hot-key-enter-dark.svg"},{key:"cmd_enter",title:this.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.CARD.CMD_ENTER_KEY.HEADING"),description:this.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.CARD.CMD_ENTER_KEY.CONTENT"),lightImage:"/assets/images/dashboard/profile/hot-key-ctrl-enter.svg",darkImage:"/assets/images/dashboard/profile/hot-key-ctrl-enter-dark.svg"}],notificationPermissions:[...Ua,..._s],audioNotificationPermissions:[...Ua,..._s]}},computed:{..._t({currentUser:"getCurrentUser",currentUserId:"getCurrentUserID",globalConfig:"globalConfig/get"}),isMfaEnabled(){var t;return Gf((t=window.chatwootConfig)==null?void 0:t.isMfaEnabled)}},mounted(){this.currentUserId&&this.initializeUser()},methods:{initializeUser(){this.name=this.currentUser.name,this.email=this.currentUser.email,this.avatarUrl=this.currentUser.avatar_url,this.displayName=this.currentUser.display_name,this.messageSignature=this.currentUser.message_signature},async dispatchUpdate(t,n,a){let e="";try{return await this.$store.dispatch("updateProfile",t),e=n,!0}catch(s){return e=Kr(s)||a,!1}finally{Z(e)}},async updateProfile(t){const{name:n,email:a,displayName:e}=t,s=this.currentUser.email!==a;this.name=n||this.name,this.email=a||this.email,this.displayName=e||this.displayName;const r={name:this.name,email:this.email,displayName:this.displayName,avatar:this.avatarFile},o=await this.dispatchUpdate(r,s?this.$t("PROFILE_SETTINGS.AFTER_EMAIL_CHANGED"):this.$t("PROFILE_SETTINGS.UPDATE_SUCCESS"),this.$t("RESET_PASSWORD.API.ERROR_MESSAGE"));s&&o&&A4()},async updateSignature(t){const n={message_signature:t};let a=this.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.API_SUCCESS"),e=this.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.API_ERROR");await this.dispatchUpdate(n,a,e)},updateProfilePicture({file:t,url:n}){this.avatarFile=t,this.avatarUrl=n},async deleteProfilePicture(){try{await this.$store.dispatch("deleteAvatar"),this.avatarUrl="",this.avatarFile="",Z(this.$t("PROFILE_SETTINGS.AVATAR_DELETE_SUCCESS"))}catch{Z(this.$t("PROFILE_SETTINGS.AVATAR_DELETE_FAILED"))}},toggleHotKey(t){this.hotKeys=this.hotKeys.map(n=>n.key===t?{...n,active:!n.active}:n),this.updateUISettings({editor_message_key:t}),Z(this.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.UPDATE_SUCCESS"))},async onCopyToken(t){await Ra(t),Z(this.$t("COMPONENTS.CODE.COPY_SUCCESSFUL"))},async resetAccessToken(){await this.$store.dispatch("resetAccessToken")?Z(this.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.RESET_SUCCESS")):Z(this.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.RESET_ERROR"))}}},cFe={class:"grid py-16 px-5 font-inter mx-auto gap-16 sm:max-w-screen-md"},dFe={class:"flex flex-col gap-6"},uFe={class:"text-2xl font-medium text-n-slate-12"},pFe={class:"flex flex-col justify-between w-full gap-5 sm:gap-4 sm:flex-row"};function fFe(t,n,a,e,s,r){const o=H("UserProfilePicture"),i=H("UserBasicDetails"),l=H("FontSize"),c=H("UserLanguageSelect"),d=H("FormSection"),u=H("MessageSignature"),m=H("HotKeyCard"),h=H("ChangePassword"),_=H("MfaSettingsCard"),E=H("AudioNotifications"),y=H("Policy"),b=H("NotificationPreferences"),A=H("AccessToken");return p(),g("div",cFe,[f("div",dFe,[f("h2",uFe,C(t.$t("PROFILE_SETTINGS.TITLE")),1),v(o,{src:s.avatarUrl,name:s.name,onChange:r.updateProfilePicture,onDelete:r.deleteProfilePicture},null,8,["src","name","onChange","onDelete"]),v(i,{name:s.name,"display-name":s.displayName,email:s.email,"email-enabled":!t.globalConfig.disableUserProfileUpdate,onUpdateUser:r.updateProfile},null,8,["name","display-name","email","email-enabled","onUpdateUser"])]),v(d,{title:t.$t("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.TITLE"),description:e.replaceInstallationName(t.$t("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.NOTE"))},{default:z(()=>[v(l,{value:e.currentFontSize,label:t.$t("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.FONT_SIZE.TITLE"),description:t.$t("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.FONT_SIZE.NOTE"),onChange:e.updateFontSize},null,8,["value","label","description","onChange"]),v(c,{label:t.$t("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.LANGUAGE.TITLE"),description:t.$t("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.LANGUAGE.NOTE")},null,8,["label","description"])]),_:1},8,["title","description"]),v(d,{title:t.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.TITLE"),description:t.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.NOTE")},{default:z(()=>[v(u,{"message-signature":s.messageSignature,onUpdateSignature:r.updateSignature},null,8,["message-signature","onUpdateSignature"])]),_:1},8,["title","description"]),v(d,{title:t.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.TITLE"),description:t.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.NOTE")},{default:z(()=>[f("div",pFe,[(p(!0),g(de,null,Ae(s.hotKeys,T=>(p(),g("button",{key:T.key,class:oe(["px-0 reset-base w-full sm:flex-1 rounded-xl outline-1 outline",e.isEditorHotKeyEnabled(T.key)?"outline-n-brand/30":"outline-n-weak"])},[(p(),L(m,{key:T.title,title:T.title,description:T.description,"light-image":T.lightImage,"dark-image":T.darkImage,active:e.isEditorHotKeyEnabled(T.key),onClick:I=>r.toggleHotKey(T.key)},null,8,["title","description","light-image","dark-image","active","onClick"]))],2))),128))])]),_:1},8,["title","description"]),t.globalConfig.disableUserProfileUpdate?O("v-if",!0):(p(),L(d,{key:0,title:t.$t("PROFILE_SETTINGS.FORM.PASSWORD_SECTION.TITLE")},{default:z(()=>[v(h)]),_:1},8,["title"])),r.isMfaEnabled?(p(),L(d,{key:1,title:t.$t("PROFILE_SETTINGS.FORM.SECURITY_SECTION.TITLE"),description:t.$t("PROFILE_SETTINGS.FORM.SECURITY_SECTION.NOTE")},{default:z(()=>[v(_)]),_:1},8,["title","description"])):O("v-if",!0),v(y,{permissions:s.audioNotificationPermissions},{default:z(()=>[v(d,{title:t.$t("PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION.TITLE"),description:t.$t("PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION.NOTE")},{default:z(()=>[v(E)]),_:1},8,["title","description"])]),_:1},8,["permissions"]),v(y,{permissions:s.notificationPermissions},{default:z(()=>[v(d,{title:t.$t("PROFILE_SETTINGS.FORM.NOTIFICATIONS.TITLE")},{default:z(()=>[v(b)]),_:1},8,["title"])]),_:1},8,["permissions"]),v(d,{title:t.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.TITLE"),description:e.replaceInstallationName(t.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.NOTE"))},{default:z(()=>[v(A,{value:t.currentUser.access_token,onOnCopy:r.onCopyToken,onOnReset:r.resetAccessToken},null,8,["value","onOnCopy","onOnReset"])]),_:1},8,["title","description"])])}const mFe=G(lFe,[["render",fFe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/profile/Index.vue"]]);class hFe extends Xs{constructor(){super("profile/mfa",{accountScoped:!1})}enable(){return axios.post(`${this.url}`)}verify(n){return axios.post(`${this.url}/verify`,{otp_code:n})}disable(n,a){return axios.delete(this.url,{data:{password:n,otp_code:a}})}regenerateBackupCodes(n){return axios.post(`${this.url}/backup_codes`,{otp_code:n})}}const pc=new hFe,_Fe={__name:"MfaStatusCard",props:{mfaEnabled:{type:Boolean,required:!0},showSetup:{type:Boolean,default:!1}},emits:["enableMfa"],setup(t,{expose:n,emit:a}){n();const e=a,r={emit:e,startSetup:()=>{e("enableMfa")},Button:Se,Icon:Bt};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},gFe={key:0,class:"space-y-6"},bFe={class:"bg-n-solid-1 rounded-lg p-6 outline outline-n-weak outline-1 text-center"},vFe={class:"text-lg font-medium text-n-slate-12 mb-2"},EFe={class:"text-sm text-n-slate-11 mb-6 max-w-md mx-auto"},SFe={key:1},TFe={class:"bg-n-solid-1 rounded-xl outline-1 outline-n-weak outline p-4 flex-1 flex flex-col gap-2"},AFe={class:"flex items-center gap-2"},yFe={class:"text-sm font-medium text-n-slate-12"},IFe={class:"text-sm text-n-slate-11"};function CFe(t,n,a,e,s,r){return!a.mfaEnabled&&!a.showSetup?(p(),g("div",gFe,[f("div",bFe,[v(e.Icon,{icon:"i-lucide-lock-keyhole",class:"size-8 text-n-slate-10 mx-auto mb-4 block"}),f("h3",vFe,C(t.$t("MFA_SETTINGS.ENHANCE_SECURITY")),1),f("p",EFe,C(t.$t("MFA_SETTINGS.ENHANCE_SECURITY_DESC")),1),v(e.Button,{icon:"i-lucide-settings",label:t.$t("MFA_SETTINGS.ENABLE_BUTTON"),onClick:e.startSetup},null,8,["label"])])])):a.mfaEnabled&&!a.showSetup?(p(),g("div",SFe,[f("div",TFe,[f("div",AFe,[v(e.Icon,{icon:"i-lucide-lock-keyhole",class:"size-4 flex-shrink-0 text-n-slate-11"}),f("h4",yFe,C(t.$t("MFA_SETTINGS.STATUS_ENABLED")),1)]),f("p",IFe,C(t.$t("MFA_SETTINGS.STATUS_ENABLED_DESC")),1)])])):O("v-if",!0)}const OFe=G(_Fe,[["render",CFe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/profile/MfaStatusCard.vue"]]),NFe={__name:"MfaSetupWizard",props:{showSetup:{type:Boolean,required:!0},mfaEnabled:{type:Boolean,required:!0},provisioningUri:{type:String,default:""},secretKey:{type:String,default:""},backupCodes:{type:Array,default:()=>[]},qrCodeUrlProp:{type:String,default:""}},emits:["cancel","verify","complete"],setup(t,{expose:n,emit:a}){const e=t,s=a,{t:r}=Q(),o=P("qr"),i=P(""),l=P(""),c=P(""),d=P(!1),u=async I=>{try{return await $i.toDataURL(I,{width:256,margin:2,color:{dark:"#000000",light:"#FFFFFF"}})}catch{return null}};je(()=>e.provisioningUri,async I=>{I?i.value=await u(I):e.qrCodeUrlProp&&(i.value=e.qrCodeUrlProp)},{immediate:!0});const m=async()=>{c.value="";try{s("verify",l.value),o.value="backup",l.value=""}catch{c.value=r("MFA_SETTINGS.SETUP.INVALID_CODE")}},h=async()=>{await Ra(e.secretKey),Z(r("MFA_SETTINGS.SETUP.SECRET_COPIED"))},_=async()=>{const I=e.backupCodes.join(`
`);await Ra(I),Z(r("MFA_SETTINGS.BACKUP.CODES_COPIED"))},E=()=>{const I=`Chatwoot Two-Factor Authentication Backup Codes

${e.backupCodes.join(`
`)}

Keep these codes in a safe place.`,N=new Blob([I],{type:"text/plain"}),x=URL.createObjectURL(N),R=document.createElement("a");R.href=x,R.download="chatwoot-backup-codes.txt",R.click(),URL.revokeObjectURL(x)},y=()=>{o.value="qr",l.value="",c.value="",d.value=!1,s("cancel")},b=()=>{o.value="qr",d.value=!1,s("complete")};je(()=>e.showSetup,I=>{I&&(o.value="qr",l.value="",c.value="",d.value=!1)});const A=I=>{c.value=I||r("MFA_SETTINGS.SETUP.INVALID_CODE")};n({handleVerificationError:A,setupStep:o});const T={props:e,emit:s,t:r,setupStep:o,qrCodeUrl:i,verificationCode:l,verificationError:c,backupCodesConfirmed:d,generateQRCode:u,verifyCode:m,copySecret:h,copyBackupCodes:_,downloadBackupCodes:E,cancelSetup:y,completeMfaSetup:b,handleVerificationError:A,ref:P,watch:je,get useI18n(){return Q},get QRCode(){return $i},get copyTextToClipboard(){return Ra},get useAlert(){return Z},Button:Se,Input:sn,Icon:Bt};return Object.defineProperty(T,"__isScriptSetup",{enumerable:!1,value:!0}),T}},xFe={key:0},RFe={key:0,class:"space-y-6"},wFe={class:"bg-n-solid-1 rounded-xl outline-1 outline-n-weak outline p-10 flex flex-col gap-4"},MFe={class:"text-center"},LFe={class:"text-lg font-medium text-n-slate-12 mb-2"},DFe={class:"text-sm text-n-slate-11"},PFe={class:"flex justify-center"},kFe={class:"bg-n-background p-4 rounded-lg outline outline-1 outline-n-weak"},BFe=["src"],FFe={key:1,class:"w-48 h-48 flex items-center justify-center bg-n-slate-2 dark:bg-n-slate-3"},UFe={class:"text-n-slate-10"},$Fe={class:"border border-n-slate-4 rounded-lg"},GFe={class:"px-4 py-3 cursor-pointer hover:bg-n-slate-2 dark:hover:bg-n-slate-3 text-sm font-medium text-n-slate-11"},VFe={class:"px-4 pb-4"},HFe={class:"block text-xs text-n-slate-10 mb-2"},jFe={class:"flex items-center gap-2"},WFe={class:"flex flex-col items-start gap-3 w-full"},zFe={class:"flex gap-3 mt-1 w-full justify-between"},YFe={key:1,class:"space-y-6"},KFe={class:"text-start"},XFe={class:"text-lg font-medium text-n-slate-12 mb-2"},qFe={class:"text-sm text-n-slate-11"},ZFe={class:"flex items-start gap-2 p-4 bg-n-solid-1 outline outline-n-weak rounded-xl outline-1"},QFe={class:"text-sm text-n-slate-11"},JFe={class:"bg-n-solid-1 rounded-xl outline-1 outline-n-weak outline flex flex-col gap-6 p-6"},eUe={class:"grid grid-cols-2 xs:grid-cols-4 sm:grid-cols-5 gap-3"},tUe={class:"flex items-center justify-center gap-3"},nUe={class:"space-y-4"},aUe={class:"flex items-start gap-3"},sUe={class:"text-sm text-n-slate-11"};function oUe(t,n,a,e,s,r){return a.showSetup&&!a.mfaEnabled?(p(),g("div",xFe,[O(" Step 1: QR Code "),e.setupStep==="qr"?(p(),g("div",RFe,[f("div",wFe,[f("div",MFe,[f("h3",LFe,C(t.$t("MFA_SETTINGS.SETUP.STEP1_TITLE")),1),f("p",DFe,C(t.$t("MFA_SETTINGS.SETUP.STEP1_DESCRIPTION")),1)]),f("div",PFe,[f("div",kFe,[e.qrCodeUrl?(p(),g("img",{key:0,src:e.qrCodeUrl,alt:"MFA QR Code",class:"w-48 h-48 dark:invert-0"},null,8,BFe)):(p(),g("div",FFe,[f("span",UFe,C(t.$t("MFA_SETTINGS.SETUP.LOADING_QR")),1)]))])]),f("details",$Fe,[f("summary",GFe,C(t.$t("MFA_SETTINGS.SETUP.MANUAL_ENTRY")),1),f("div",VFe,[f("label",HFe,C(t.$t("MFA_SETTINGS.SETUP.SECRET_KEY")),1),f("div",jFe,[v(e.Input,{"model-value":a.secretKey,readonly:"",class:"flex-1"},null,8,["model-value"]),v(e.Button,{variant:"outline",color:"slate",size:"sm",label:t.$t("MFA_SETTINGS.SETUP.COPY"),onClick:e.copySecret},null,8,["label"])])])]),f("div",WFe,[v(e.Input,{modelValue:e.verificationCode,"onUpdate:modelValue":n[0]||(n[0]=o=>e.verificationCode=o),type:"text",maxlength:"6",pattern:"[0-9]{6}",label:t.$t("MFA_SETTINGS.SETUP.ENTER_CODE"),placeholder:t.$t("MFA_SETTINGS.SETUP.ENTER_CODE_PLACEHOLDER"),message:e.verificationError,"message-type":e.verificationError?"error":"info",class:"w-full",onKeyup:Vn(e.verifyCode,["enter"])},null,8,["modelValue","label","placeholder","message","message-type"]),f("div",zFe,[v(e.Button,{faded:"",color:"slate",class:"flex-1",label:t.$t("MFA_SETTINGS.SETUP.CANCEL"),onClick:e.cancelSetup},null,8,["label"]),v(e.Button,{class:"flex-1",disabled:e.verificationCode.length!==6,label:t.$t("MFA_SETTINGS.SETUP.VERIFY_BUTTON"),onClick:e.verifyCode},null,8,["disabled","label"])])])])])):O("v-if",!0),O(" Step 2: Backup Codes "),e.setupStep==="backup"?(p(),g("div",YFe,[f("div",KFe,[f("h3",XFe,C(t.$t("MFA_SETTINGS.BACKUP.TITLE")),1),f("p",qFe,C(t.$t("MFA_SETTINGS.BACKUP.DESCRIPTION")),1)]),O(" Warning Alert "),f("div",ZFe,[v(e.Icon,{icon:"i-lucide-alert-circle",class:"size-4 text-n-slate-10 flex-shrink-0 mt-0.5"}),f("p",QFe,[f("strong",null,C(t.$t("MFA_SETTINGS.BACKUP.IMPORTANT")),1),Oe(" "+C(t.$t("MFA_SETTINGS.BACKUP.IMPORTANT_NOTE")),1)])]),O(" Backup Codes Grid "),f("div",JFe,[f("div",eUe,[(p(!0),g(de,null,Ae(a.backupCodes,(o,i)=>(p(),g("span",{key:i,class:"px-1 py-2 font-mono text-base text-center text-n-slate-12"},C(o),1))),128))]),f("div",tUe,[v(e.Button,{outline:"",slate:"",sm:"",icon:"i-lucide-download",label:t.$t("MFA_SETTINGS.BACKUP.DOWNLOAD"),onClick:e.downloadBackupCodes},null,8,["label"]),v(e.Button,{outline:"",slate:"",sm:"",icon:"i-lucide-clipboard",label:t.$t("MFA_SETTINGS.BACKUP.COPY_ALL"),onClick:e.copyBackupCodes},null,8,["label"])])]),O(" Confirmation "),f("div",nUe,[f("label",aUe,[ce(f("input",{"onUpdate:modelValue":n[1]||(n[1]=o=>e.backupCodesConfirmed=o),type:"checkbox",class:"mt-1 rounded border-n-slate-4 text-n-blue-9 focus:ring-n-blue-8"},null,512),[[bn,e.backupCodesConfirmed]]),f("span",sUe,C(t.$t("MFA_SETTINGS.BACKUP.CONFIRM")),1)]),v(e.Button,{disabled:!e.backupCodesConfirmed,label:t.$t("MFA_SETTINGS.BACKUP.COMPLETE_SETUP"),onClick:e.completeMfaSetup},null,8,["disabled","label"])])])):O("v-if",!0)])):(p(),g(de,{key:1},[],64))}const rUe=G(NFe,[["render",oUe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/profile/MfaSetupWizard.vue"]]),iUe={__name:"MfaManagementActions",props:{mfaEnabled:{type:Boolean,required:!0},backupCodes:{type:Array,default:()=>[]}},emits:["disableMfa","regenerateBackupCodes"],setup(t,{expose:n,emit:a}){const e=t,s=a,{t:r}=Q(),o=P(null),i=P(null),l=P(null),c=P(""),d=P(""),u=P(""),m=async()=>{const I=e.backupCodes.join(`
`);await Ra(I),Z(r("MFA_SETTINGS.BACKUP.CODES_COPIED"))},h=()=>{const I=`Chatwoot Two-Factor Authentication Backup Codes

${e.backupCodes.join(`
`)}

Keep these codes in a safe place.`,N=new Blob([I],{type:"text/plain"}),x=URL.createObjectURL(N),R=document.createElement("a");R.href=x,R.download="chatwoot-backup-codes.txt",R.click(),URL.revokeObjectURL(x)},_=async()=>{s("disableMfa",{password:c.value,otpCode:d.value})},E=async()=>{s("regenerateBackupCodes",{otpCode:u.value})},y=()=>{var I;c.value="",d.value="",(I=o.value)==null||I.close()},b=()=>{var I;u.value="",(I=i.value)==null||I.close()},A=()=>{var I;(I=l.value)==null||I.open()};n({resetDisableForm:y,resetRegenerateForm:b,showBackupCodesDialog:A});const T={props:e,emit:s,t:r,disableDialogRef:o,regenerateDialogRef:i,backupCodesDialogRef:l,disablePassword:c,disableOtpCode:d,regenerateOtpCode:u,copyBackupCodes:m,downloadBackupCodes:h,handleDisableMfa:_,handleRegenerateBackupCodes:E,resetDisableForm:y,resetRegenerateForm:b,showBackupCodesDialog:A,ref:P,get useI18n(){return Q},get copyTextToClipboard(){return Ra},get useAlert(){return Z},Button:Se,Input:sn,Icon:Bt,Dialog:la};return Object.defineProperty(T,"__isScriptSetup",{enumerable:!1,value:!0}),T}},lUe={key:0},cUe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},dUe={class:"bg-n-solid-1 rounded-xl outline-1 outline-n-weak outline p-5"},uUe={class:"flex-1 flex flex-col gap-2"},pUe={class:"flex items-center gap-2"},fUe={class:"font-medium text-n-slate-12"},mUe={class:"text-sm text-n-slate-11"},hUe={class:"bg-n-solid-1 rounded-xl outline-1 outline-n-weak outline p-5"},_Ue={class:"flex-1 flex flex-col gap-2"},gUe={class:"flex items-center gap-2"},bUe={class:"font-medium text-n-slate-12"},vUe={class:"text-sm text-n-slate-11"},EUe={class:"space-y-4"},SUe={class:"flex items-start gap-2 p-4 bg-n-solid-1 outline outline-n-weak rounded-xl outline-1"},TUe={class:"text-sm text-n-slate-11"},AUe={class:"bg-n-solid-1 rounded-xl outline-1 outline-n-weak outline flex flex-col gap-6 p-6"},yUe={class:"grid grid-cols-2 xs:grid-cols-4 sm:grid-cols-5 gap-3"},IUe={class:"flex items-center justify-center gap-3"};function CUe(t,n,a,e,s,r){return a.mfaEnabled?(p(),g("div",lUe,[O(" Actions Grid "),f("div",cUe,[O(" Regenerate Backup Codes "),f("div",dUe,[f("div",uUe,[f("div",pUe,[v(e.Icon,{icon:"i-lucide-key",class:"size-4 flex-shrink-0 text-n-slate-11"}),f("h4",fUe,C(t.$t("MFA_SETTINGS.MANAGEMENT.BACKUP_CODES")),1)]),f("p",mUe,C(t.$t("MFA_SETTINGS.MANAGEMENT.BACKUP_CODES_DESC")),1),v(e.Button,{faded:"",slate:"",label:t.$t("MFA_SETTINGS.MANAGEMENT.REGENERATE"),onClick:n[0]||(n[0]=o=>{var i;return(i=e.regenerateDialogRef)==null?void 0:i.open()})},null,8,["label"])])]),O(" Disable MFA "),f("div",hUe,[f("div",_Ue,[f("div",gUe,[v(e.Icon,{icon:"i-lucide-lock-keyhole-open",class:"size-4 flex-shrink-0 text-n-slate-11"}),f("h4",bUe,C(t.$t("MFA_SETTINGS.MANAGEMENT.DISABLE_MFA")),1)]),f("p",vUe,C(t.$t("MFA_SETTINGS.MANAGEMENT.DISABLE_MFA_DESC")),1),v(e.Button,{faded:"",ruby:"",label:t.$t("MFA_SETTINGS.MANAGEMENT.DISABLE_BUTTON"),onClick:n[1]||(n[1]=o=>{var i;return(i=e.disableDialogRef)==null?void 0:i.open()})},null,8,["label"])])])]),O(" Disable MFA Dialog "),v(e.Dialog,{ref:"disableDialogRef",type:"alert",title:t.$t("MFA_SETTINGS.DISABLE.TITLE"),description:t.$t("MFA_SETTINGS.DISABLE.DESCRIPTION"),"confirm-button-label":t.$t("MFA_SETTINGS.DISABLE.CONFIRM"),"cancel-button-label":t.$t("MFA_SETTINGS.DISABLE.CANCEL"),onConfirm:e.handleDisableMfa},{default:z(()=>[f("div",EUe,[v(e.Input,{modelValue:e.disablePassword,"onUpdate:modelValue":n[2]||(n[2]=o=>e.disablePassword=o),type:"password",label:t.$t("MFA_SETTINGS.DISABLE.PASSWORD")},null,8,["modelValue","label"]),v(e.Input,{modelValue:e.disableOtpCode,"onUpdate:modelValue":n[3]||(n[3]=o=>e.disableOtpCode=o),type:"text",maxlength:"6",label:t.$t("MFA_SETTINGS.DISABLE.OTP_CODE"),placeholder:t.$t("MFA_SETTINGS.DISABLE.OTP_CODE_PLACEHOLDER")},null,8,["modelValue","label","placeholder"])])]),_:1},8,["title","description","confirm-button-label","cancel-button-label"]),O(" Regenerate Backup Codes Dialog "),v(e.Dialog,{ref:"regenerateDialogRef",type:"edit",title:t.$t("MFA_SETTINGS.REGENERATE.TITLE"),description:t.$t("MFA_SETTINGS.REGENERATE.DESCRIPTION"),"confirm-button-label":t.$t("MFA_SETTINGS.REGENERATE.CONFIRM"),"cancel-button-label":t.$t("MFA_SETTINGS.DISABLE.CANCEL"),onConfirm:e.handleRegenerateBackupCodes},{default:z(()=>[v(e.Input,{modelValue:e.regenerateOtpCode,"onUpdate:modelValue":n[4]||(n[4]=o=>e.regenerateOtpCode=o),type:"text",maxlength:"6",label:t.$t("MFA_SETTINGS.REGENERATE.OTP_CODE"),placeholder:t.$t("MFA_SETTINGS.REGENERATE.OTP_CODE_PLACEHOLDER")},null,8,["modelValue","label","placeholder"])]),_:1},8,["title","description","confirm-button-label","cancel-button-label"]),O(" Backup Codes Display Dialog "),v(e.Dialog,{ref:"backupCodesDialogRef",type:"edit",width:"2xl",title:t.$t("MFA_SETTINGS.REGENERATE.NEW_CODES_TITLE"),description:t.$t("MFA_SETTINGS.REGENERATE.NEW_CODES_DESC"),"show-cancel-button":!1,"confirm-button-label":t.$t("MFA_SETTINGS.REGENERATE.CODES_SAVED"),onConfirm:n[5]||(n[5]=o=>{var i;return(i=e.backupCodesDialogRef)==null?void 0:i.close()})},{default:z(()=>[O(" Warning Alert "),f("div",SUe,[v(e.Icon,{icon:"i-lucide-alert-circle",class:"size-4 text-n-slate-10 flex-shrink-0 mt-0.5"}),f("p",TUe,[f("strong",null,C(t.$t("MFA_SETTINGS.BACKUP.IMPORTANT")),1),Oe(" "+C(t.$t("MFA_SETTINGS.BACKUP.IMPORTANT_NOTE")),1)])]),f("div",AUe,[f("div",yUe,[(p(!0),g(de,null,Ae(a.backupCodes,(o,i)=>(p(),g("span",{key:i,class:"px-1 py-2 font-mono text-base text-center text-n-slate-12"},C(o),1))),128))]),f("div",IUe,[v(e.Button,{outline:"",slate:"",sm:"",icon:"i-lucide-download",label:t.$t("MFA_SETTINGS.BACKUP.DOWNLOAD"),onClick:e.downloadBackupCodes},null,8,["label"]),v(e.Button,{outline:"",slate:"",sm:"",icon:"i-lucide-clipboard",label:t.$t("MFA_SETTINGS.BACKUP.COPY_ALL"),onClick:e.copyBackupCodes},null,8,["label"])])])]),_:1},8,["title","description","confirm-button-label"])])):(p(),g(de,{key:1},[],64))}const OUe=G(iUe,[["render",CUe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/profile/MfaManagementActions.vue"]]),NUe={__name:"MfaSettings",setup(t,{expose:n}){n();const{t:a}=Q(),e=ft(),s=lt(),r=P(!1),o=P(!1),i=P(!1),l=P(""),c=P(""),d=P(""),u=P([]),m=P(null),h=P(null);Pe(async()=>{var N;if(!Gf((N=window.chatwootConfig)==null?void 0:N.isMfaEnabled)){e.push({name:"profile_settings_index",params:{accountId:s.params.accountId}});return}try{const x=await pc.get();r.value=x.data.enabled,o.value=x.data.backup_codes_generated}catch{}});const I={t:a,router:e,route:s,mfaEnabled:r,backupCodesGenerated:o,showSetup:i,provisioningUri:l,qrCodeUrl:c,secretKey:d,backupCodes:u,setupWizardRef:m,managementActionsRef:h,startMfaSetup:async()=>{try{const N=await pc.enable();l.value=N.data.provisioning_uri||N.data.provisioning_url,N.data.qr_code_url&&(c.value=N.data.qr_code_url),d.value=N.data.secret,u.value=[],i.value=!0}catch{Z(a("MFA_SETTINGS.SETUP.ERROR_STARTING"))}},verifyCode:async N=>{var x,R,M;try{const w=await pc.verify(N);return w.data.backup_codes&&(u.value=w.data.backup_codes),!0}catch(w){throw(M=m.value)==null||M.handleVerificationError(((R=(x=w.response)==null?void 0:x.data)==null?void 0:R.error)||a("MFA_SETTINGS.SETUP.INVALID_CODE")),w}},completeMfaSetup:()=>{r.value=!0,o.value=!0,i.value=!1,Z(a("MFA_SETTINGS.SETUP.SUCCESS"))},cancelSetup:()=>{i.value=!1},disableMfa:async({password:N,otpCode:x})=>{var R;try{await pc.disable(N,x),r.value=!1,o.value=!1,(R=h.value)==null||R.resetDisableForm(),Z(a("MFA_SETTINGS.DISABLE.SUCCESS"))}catch{Z(a("MFA_SETTINGS.DISABLE.ERROR"))}},regenerateBackupCodes:async({otpCode:N})=>{var x,R;try{const M=await pc.regenerateBackupCodes(N);u.value=M.data.backup_codes,(x=h.value)==null||x.resetRegenerateForm(),(R=h.value)==null||R.showBackupCodesDialog(),Z(a("MFA_SETTINGS.REGENERATE.SUCCESS"))}catch{Z(a("MFA_SETTINGS.REGENERATE.ERROR"))}},ref:P,onMounted:Pe,get useI18n(){return Q},get useRouter(){return ft},get useRoute(){return lt},get parseBoolean(){return Gf},get mfaAPI(){return pc},get useAlert(){return Z},MfaStatusCard:OFe,MfaSetupWizard:rUe,MfaManagementActions:OUe};return Object.defineProperty(I,"__isScriptSetup",{enumerable:!1,value:!0}),I}},xUe={class:"grid py-16 px-5 font-inter mx-auto gap-16 sm:max-w-screen-md w-full"},RUe={class:"flex flex-col gap-6"},wUe={class:"text-2xl font-medium text-n-slate-12"},MUe={class:"text-sm text-n-slate-11"},LUe={class:"grid gap-4 w-full"};function DUe(t,n,a,e,s,r){return p(),g("div",xUe,[O(" Page Header "),f("div",RUe,[f("h2",wUe,C(t.$t("MFA_SETTINGS.TITLE")),1),f("p",MUe,C(t.$t("MFA_SETTINGS.SUBTITLE")),1)]),f("div",LUe,[O(" MFA Status Card "),v(e.MfaStatusCard,{"mfa-enabled":e.mfaEnabled,"show-setup":e.showSetup,onEnableMfa:e.startMfaSetup},null,8,["mfa-enabled","show-setup"]),O(" MFA Setup Wizard "),v(e.MfaSetupWizard,{ref:"setupWizardRef","show-setup":e.showSetup,"mfa-enabled":e.mfaEnabled,"provisioning-uri":e.provisioningUri,"secret-key":e.secretKey,"backup-codes":e.backupCodes,"qr-code-url-prop":e.qrCodeUrl,onCancel:e.cancelSetup,onVerify:e.verifyCode,onComplete:e.completeMfaSetup},null,8,["show-setup","mfa-enabled","provisioning-uri","secret-key","backup-codes","qr-code-url-prop"]),O(" MFA Management Actions "),v(e.MfaManagementActions,{ref:"managementActionsRef","mfa-enabled":e.mfaEnabled,"backup-codes":e.backupCodes,onDisableMfa:e.disableMfa,onRegenerateBackupCodes:e.regenerateBackupCodes},null,8,["mfa-enabled","backup-codes"])])])}const PUe=G(NUe,[["render",DUe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/profile/MfaSettings.vue"]]),kUe={routes:[{path:vt("accounts/:accountId/profile"),name:"profile_settings",meta:{permissions:["administrator","agent","custom_role"]},component:nBe,children:[{path:"settings",name:"profile_settings_index",component:mFe,meta:{permissions:["administrator","agent","custom_role"]}},{path:"mfa",name:"profile_settings_mfa",component:PUe,meta:{permissions:["administrator","agent","custom_role"]},beforeEnter:(t,n,a)=>{var e;Gf((e=window.chatwootConfig)==null?void 0:e.isMfaEnabled)?a():a({name:"profile_settings_index"})}}]}]};class BUe extends Xs{constructor(){super("saml_settings",{accountScoped:!0})}get(){return axios.get(this.url)}create(n){return axios.post(this.url,{saml_settings:n})}update(n){return axios.put(this.url,{saml_settings:n})}delete(){return axios.delete(this.url)}}const Yd=new BUe,FUe={__name:"SamlInfoSection",props:{fingerprint:{type:String,default:""},spEntityId:{type:String,default:""}},setup(t,{expose:n}){n();const a=t,{t:e}=Q(),{accountId:s}=Ut(),r=S(()=>`${window.location.origin}/omniauth/saml/callback?account_id=${s.value}`),o=S(()=>[{key:"ACS_URL",label:e("SECURITY_SETTINGS.SAML.ACS_URL.LABEL"),value:r.value,tooltip:e("SECURITY_SETTINGS.SAML.ACS_URL.TOOLTIP"),show:!0},{key:"SP_ENTITY_ID",label:e("SECURITY_SETTINGS.SAML.SP_ENTITY_ID.LABEL"),value:a.spEntityId,tooltip:e("SECURITY_SETTINGS.SAML.SP_ENTITY_ID.TOOLTIP"),show:!!a.spEntityId},{key:"FINGERPRINT",label:e("SECURITY_SETTINGS.SAML.FINGERPRINT.LABEL"),value:a.fingerprint,tooltip:e("SECURITY_SETTINGS.SAML.FINGERPRINT.TOOLTIP"),show:!!a.fingerprint}]),i=S(()=>o.value.filter(d=>d.show)),c={props:a,t:e,accountId:s,acsUrl:r,allInfoItems:o,visibleInfoItems:i,handleCopy:async d=>{await Ra(d),Z(e("SECURITY_SETTINGS.SAML.COPY_SUCCESS"))},computed:S,get useI18n(){return Q},get copyTextToClipboard(){return Ra},get useAlert(){return Z},get useAccount(){return Ut},NextButton:Se};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}},UUe={class:"space-y-4"},$Ue={class:"flex items-center gap-2"},GUe={class:"text-sm font-medium text-n-slate-12"},VUe={class:"i-lucide-info text-n-slate-10 w-4 h-4 cursor-help"},HUe={class:"rounded-xl border border-n-weak bg-n-solid-1 w-full text-sm text-n-slate-12 divide-y divide-n-weak"},jUe={class:"flex items-center gap-2"},WUe={class:"text-n-slate-11 w-32 flex items-center gap-1"},zUe={class:"i-lucide-info text-n-slate-9 w-3 h-3 cursor-help"},YUe={class:"flex-1"};function KUe(t,n,a,e,s,r){const o=nt("tooltip");return p(),g("div",UUe,[f("div",$Ue,[f("h3",GUe,C(e.t("SECURITY_SETTINGS.SAML.INFO_SECTION.TITLE")),1),ce(f("i",VUe,null,512),[[o,e.t("SECURITY_SETTINGS.SAML.INFO_SECTION.TOOLTIP"),void 0,{top:!0}]])]),f("section",HUe,[(p(!0),g(de,null,Ae(e.visibleInfoItems,i=>(p(),g("div",{key:i.key,class:"ps-4 pe-1 py-1 flex justify-between items-center"},[f("div",jUe,[f("span",WUe,[Oe(C(i.label)+" ",1),ce(f("i",zUe,null,512),[[o,i.tooltip,void 0,{top:!0}]])]),f("span",YUe,C(i.value),1)]),v(e.NextButton,{type:"button",ghost:"",sm:"",slate:"",icon:"i-lucide-copy",onClick:l=>e.handleCopy(i.value)},null,8,["onClick"])]))),128))])])}const XUe=G(FUe,[["render",KUe],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/security/components/SamlInfoSection.vue"]]),qUe={__name:"SamlAttributeMap",setup(t,{expose:n}){n();const{t:a}=Q(),e=P(!1),r={t:a,isExpanded:e,toggleExpanded:()=>{e.value=!e.value},ref:P,get useI18n(){return Q},Icon:Bt};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},ZUe={class:"rounded-xl border border-n-weak bg-n-solid-1 w-full text-sm text-n-slate-12 mb-5 overflow-hidden"},QUe={class:"font-medium text-n-slate-12"},JUe={class:"px-4 pb-3"},e9e={class:"text-n-slate-11 mb-2"};function t9e(t,n,a,e,s,r){return p(),g("section",ZUe,[f("button",{type:"button",class:"w-full px-4 py-3 flex items-center justify-between text-left hover:bg-n-solid-2 transition-colors",onClick:e.toggleExpanded},[f("h4",QUe,C(e.t("SECURITY_SETTINGS.SAML.ATTRIBUTE_MAPPING.TITLE")),1),v(e.Icon,{icon:"i-lucide-chevron-down",class:oe(["transition-transform duration-200",{"rotate-180":e.isExpanded}])},null,8,["class"])]),f("div",{class:oe(["transition-[height] duration-200 ease-in-out overflow-hidden",e.isExpanded?"h-auto":"h-0"])},[f("div",JUe,[f("p",e9e,C(e.t("SECURITY_SETTINGS.SAML.ATTRIBUTE_MAPPING.DESCRIPTION")),1),O(" eslint-disable vue/no-bare-strings-in-template "),n[0]||(n[0]=f("ul",{class:"list-none text-n-slate-12 space-y-1"},[f("li",null,[f("code",{class:"px-1 rounded bg-n-slate-3"},"email")]),f("li",null,[f("code",{class:"px-1 rounded bg-n-slate-3"},"first_name")]),f("li",null,[f("code",{class:"px-1 rounded bg-n-slate-3"},"last_name")])],-1))])],2)])}const n9e=G(qUe,[["render",t9e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/security/components/SamlAttributeMap.vue"]]),a9e={__name:"SamlSettings",setup(t,{expose:n}){n();const{t:a}=Q(),{isCloudFeatureEnabled:e}=Ut(),s=P(null),r=P(""),o=P(""),i=P(!1),l=P(!1),c=P(!0),d=Lt({ssoUrl:"",certificate:"",idpEntityId:""}),u={ssoUrl:{required:Ge},certificate:{required:Ge},idpEntityId:{required:Ge}},m=rt(u,d),h=S(()=>e("saml")),_=S(()=>m.value.ssoUrl.$error?a("SECURITY_SETTINGS.SAML.VALIDATION.SSO_URL_ERROR"):""),E=S(()=>m.value.certificate.$error?a("SECURITY_SETTINGS.SAML.VALIDATION.CERTIFICATE_ERROR"):""),y=S(()=>m.value.idpEntityId.$error?a("SECURITY_SETTINGS.SAML.VALIDATION.IDP_ENTITY_ID_ERROR"):""),b=async()=>{var R;if(h.value)try{c.value=!0;const w=(await Yd.get()).data;w.sso_url&&(s.value=w.id,d.ssoUrl=w.sso_url,d.certificate=w.certificate||"",o.value=w.sp_entity_id||"",d.idpEntityId=w.idp_entity_id||"",r.value=w.fingerprint||"",i.value=d.ssoUrl!=="")}catch(M){((R=M.response)==null?void 0:R.status)!==404&&Z(a("SECURITY_SETTINGS.SAML.API.ERROR_LOADING"))}finally{c.value=!1}},A=async R=>{var M,w;try{if(l.value=!0,i.value&&d.ssoUrl){let D;s.value?D=await Yd.update(R):D=await Yd.create(R),D!=null&&D.data&&(s.value=D.data.id,r.value=D.data.fingerprint||"",o.value=D.data.sp_entity_id||""),Z(a("SECURITY_SETTINGS.SAML.API.SUCCESS"))}else await Yd.delete(),Z(a("SECURITY_SETTINGS.SAML.API.DISABLED"))}catch(D){if((w=(M=D.response)==null?void 0:M.data)!=null&&w.errors){const B=D.response.data.errors,k=Array.isArray(B)?B[0]:B;Z(k)}else Z(a("SECURITY_SETTINGS.SAML.API.ERROR"));throw D}finally{l.value=!1}},T=async()=>{if(m.value.$touch(),m.value.$invalid)return;const R={sso_url:d.ssoUrl,certificate:d.certificate,idp_entity_id:d.idpEntityId,role_mappings:{}};await A(R)},I=async()=>{s.value=null,d.ssoUrl="",d.certificate="",o.value="",d.idpEntityId="",r.value="",await A({})},N=async()=>{i.value||await I()};Pe(()=>{b()});const x={t:a,isCloudFeatureEnabled:e,id:s,fingerprint:r,spEntityId:o,isEnabled:i,isSubmitting:l,isLoading:c,formState:d,validations:u,v$:m,hasFeature:h,ssoUrlError:_,certificateError:E,idpEntityIdError:y,loadSamlSettings:b,saveSamlSettings:A,handleSubmit:T,handleDisable:I,toggleSaml:N,ref:P,computed:S,onMounted:Pe,reactive:Lt,get useI18n(){return Q},get useVuelidate(){return rt},get required(){return Ge},get useAlert(){return Z},get useAccount(){return Ut},get samlSettingsAPI(){return Yd},SectionLayout:zl,WithLabel:$l,TextInput:sn,TextArea:ni,Switch:mo,NextButton:Se,SamlInfoSection:XUe,SamlAttributeMap:n9e};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}},s9e={class:"flex justify-end"},o9e={class:"flex gap-2"};function r9e(t,n,a,e,s,r){return p(),L(e.SectionLayout,{title:e.t("SECURITY_SETTINGS.SAML.TITLE"),description:e.t("SECURITY_SETTINGS.SAML.NOTE"),beta:"","hide-content":!e.hasFeature||!e.isEnabled||e.isLoading},{headerActions:z(()=>[f("div",s9e,[v(e.Switch,{modelValue:e.isEnabled,"onUpdate:modelValue":n[0]||(n[0]=o=>e.isEnabled=o),disabled:e.isLoading,onChange:e.toggleSaml},null,8,["modelValue","disabled"])])]),default:z(()=>[v(e.SamlInfoSection,{class:"mb-5",fingerprint:e.fingerprint,"sp-entity-id":e.spEntityId},null,8,["fingerprint","sp-entity-id"]),v(e.SamlAttributeMap,{class:"mb-5"}),f("form",{class:"grid gap-5",onSubmit:Ve(e.handleSubmit,["prevent"])},[v(e.WithLabel,{name:"ssoUrl",label:e.t("SECURITY_SETTINGS.SAML.SSO_URL.LABEL"),"help-message":e.t("SECURITY_SETTINGS.SAML.SSO_URL.HELP"),"has-error":e.v$.ssoUrl.$error,"error-message":e.ssoUrlError,required:""},{default:z(()=>[v(e.TextInput,{modelValue:e.formState.ssoUrl,"onUpdate:modelValue":n[1]||(n[1]=o=>e.formState.ssoUrl=o),class:"w-full",type:"url",placeholder:e.t("SECURITY_SETTINGS.SAML.SSO_URL.PLACEHOLDER")},null,8,["modelValue","placeholder"])]),_:1},8,["label","help-message","has-error","error-message"]),v(e.WithLabel,{name:"idpEntityId",label:e.t("SECURITY_SETTINGS.SAML.IDP_ENTITY_ID.LABEL"),"help-message":e.t("SECURITY_SETTINGS.SAML.IDP_ENTITY_ID.HELP"),"has-error":e.v$.idpEntityId.$error,"error-message":e.idpEntityIdError,required:""},{default:z(()=>[v(e.TextInput,{modelValue:e.formState.idpEntityId,"onUpdate:modelValue":n[2]||(n[2]=o=>e.formState.idpEntityId=o),class:"w-full",placeholder:e.t("SECURITY_SETTINGS.SAML.IDP_ENTITY_ID.PLACEHOLDER")},null,8,["modelValue","placeholder"])]),_:1},8,["label","help-message","has-error","error-message"]),v(e.WithLabel,{name:"certificate",label:e.t("SECURITY_SETTINGS.SAML.CERTIFICATE.LABEL"),"help-message":e.t("SECURITY_SETTINGS.SAML.CERTIFICATE.HELP"),"has-error":e.v$.certificate.$error,"error-message":e.certificateError,required:""},{default:z(()=>[v(e.TextArea,{modelValue:e.formState.certificate,"onUpdate:modelValue":n[3]||(n[3]=o=>e.formState.certificate=o),class:"w-full",rows:"8",placeholder:e.t("SECURITY_SETTINGS.SAML.CERTIFICATE.PLACEHOLDER")},null,8,["modelValue","placeholder"])]),_:1},8,["label","help-message","has-error","error-message"]),f("div",o9e,[v(e.NextButton,{blue:"",type:"submit","is-loading":e.isSubmitting,label:e.t("SECURITY_SETTINGS.SAML.UPDATE_BUTTON")},null,8,["is-loading","label"])])],32)]),_:1},8,["title","description","hide-content"])}const i9e=G(a9e,[["render",r9e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/security/components/SamlSettings.vue"]]),l9e={__name:"SamlPaywall",setup(t,{expose:n}){n();const a=ft(),e=le("getCurrentUser"),s=S(()=>e.value.type==="SuperAdmin"),{accountId:r,isOnChatwootCloud:o}=Ut(),i=S(()=>o.value?"PAYWALL":"ENTERPRISE_PAYWALL"),c={router:a,currentUser:e,isSuperAdmin:s,accountId:r,isOnChatwootCloud:o,i18nKey:i,openBilling:()=>{a.push({name:"billing_settings_index",params:{accountId:r.value}})},computed:S,get useRouter(){return ft},get useMapGetter(){return le},get useAccount(){return Ut},BasePaywallModal:t_};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}},c9e={class:"w-full max-w-[60rem] mx-auto h-full max-h-[28rem] grid place-content-center"};function d9e(t,n,a,e,s,r){return p(),g("div",c9e,[v(e.BasePaywallModal,{class:"mx-auto","feature-prefix":"SECURITY_SETTINGS.SAML","i18n-key":e.i18nKey,"is-super-admin":e.isSuperAdmin,"is-on-chatwoot-cloud":e.isOnChatwootCloud,onUpgrade:e.openBilling},null,8,["i18n-key","is-super-admin","is-on-chatwoot-cloud"])])}const u9e=G(l9e,[["render",d9e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/security/components/SamlPaywall.vue"]]),p9e={__name:"Index",setup(t,{expose:n}){n();const{shouldShow:a,shouldShowPaywall:e}=uo(),s=S(()=>a(pt.SAML,["administrator"],[gn.CLOUD,gn.ENTERPRISE])),r=S(()=>e("saml")),o={shouldShow:a,shouldShowPaywall:e,shouldShowSaml:s,showPaywall:r,computed:S,BaseSettingsHeader:Va,SettingsLayout:Ha,SamlSettings:i9e,SamlPaywall:u9e,get usePolicy(){return uo},get INSTALLATION_TYPES(){return gn},get FEATURE_FLAGS(){return pt}};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}};function f9e(t,n,a,e,s,r){return p(),L(e.SettingsLayout,{class:"max-w-2xl mx-auto","loading-message":t.$t("ATTRIBUTES_MGMT.LOADING")},{header:z(()=>[v(e.BaseSettingsHeader,{title:t.$t("SECURITY_SETTINGS.TITLE"),description:t.$t("SECURITY_SETTINGS.DESCRIPTION"),"link-text":t.$t("SECURITY_SETTINGS.LINK_TEXT"),"feature-name":"saml"},null,8,["title","description","link-text"])]),body:z(()=>[e.showPaywall?(p(),L(e.SamlPaywall,{key:0})):e.shouldShowSaml?(p(),L(e.SamlSettings,{key:1})):O("v-if",!0)]),_:1},8,["loading-message"])}const m9e=G(p9e,[["render",f9e],["__file","/app/app/javascript/dashboard/routes/dashboard/settings/security/Index.vue"]]),h9e={routes:[{path:vt("accounts/:accountId/settings/security"),meta:{permissions:["administrator"],installationTypes:[gn.CLOUD,gn.ENTERPRISE]},component:cs,props:{headerTitle:"SECURITY_SETTINGS.TITLE",icon:"i-lucide-shield",showNewButton:!1},children:[{path:"",name:"security_settings_index",component:m9e,meta:{permissions:["administrator"],featureFlag:pt.SAML,installationTypes:[gn.CLOUD,gn.ENTERPRISE]}}]}]},_9e={routes:[{path:vt("accounts/:accountId/settings"),name:"settings_home",meta:{permissions:[...Ua,..._s]},redirect:t=>kl.getters.getCurrentRole==="administrator"&&kl.getters.getCurrentCustomRoleId===null?{name:"general_settings_index",params:t.params}:{name:"canned_list",params:t.params}},...mte.routes,...cne.routes,...Koe.routes,...Ire.routes,...mie.routes,...sde.routes,...Vde.routes,...bue.routes,...Xue.routes,...i0e.routes,...gOe.routes,...YOe.routes,...qNe.routes,...Mke.routes,...Z8e.routes,...b5e.routes,...Q5e.routes,...kUe.routes,...h9e.routes]};function g9e(){var t=window.navigator.userAgent,n=t.indexOf("MSIE ");if(n>0)return parseInt(t.substring(n+5,t.indexOf(".",n)),10);var a=t.indexOf("Trident/");if(a>0){var e=t.indexOf("rv:");return parseInt(t.substring(e+3,t.indexOf(".",e)),10)}var s=t.indexOf("Edge/");return s>0?parseInt(t.substring(s+5,t.indexOf(".",s)),10):-1}let Pf;function sE(){sE.init||(sE.init=!0,Pf=g9e()!==-1)}var n_={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){sE(),At(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const t=document.createElement("object");this._resizeObject=t,t.setAttribute("aria-hidden","true"),t.setAttribute("tabindex",-1),t.onload=this.addResizeHandlers,t.type="text/html",Pf&&this.$el.appendChild(t),t.data="about:blank",Pf||this.$el.appendChild(t)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!Pf&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const b9e=r2();s2("data-v-b329ee4c");const v9e={class:"resize-observer",tabindex:"-1"};o2();const E9e=b9e((t,n,a,e,s,r)=>(p(),L("div",v9e)));n_.render=E9e;n_.__scopeId="data-v-b329ee4c";n_.__file="src/components/ResizeObserver.vue";function kf(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?kf=function(n){return typeof n}:kf=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},kf(t)}function S9e(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function T9e(t,n){for(var a=0;a<n.length;a++){var e=n[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function A9e(t,n,a){return n&&T9e(t.prototype,n),t}function YC(t){return y9e(t)||I9e(t)||C9e(t)||O9e()}function y9e(t){if(Array.isArray(t))return oE(t)}function I9e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function C9e(t,n){if(t){if(typeof t=="string")return oE(t,n);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return oE(t,n)}}function oE(t,n){(n==null||n>t.length)&&(n=t.length);for(var a=0,e=new Array(n);a<n;a++)e[a]=t[a];return e}function O9e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N9e(t){var n;return typeof t=="function"?n={callback:t}:n=t,n}function x9e(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},e,s,r,o=function(l){for(var c=arguments.length,d=new Array(c>1?c-1:0),u=1;u<c;u++)d[u-1]=arguments[u];if(r=d,!(e&&l===s)){var m=a.leading;typeof m=="function"&&(m=m(l,s)),(!e||l!==s)&&m&&t.apply(void 0,[l].concat(YC(r))),s=l,clearTimeout(e),e=setTimeout(function(){t.apply(void 0,[l].concat(YC(r))),e=0},n)}};return o._clear=function(){clearTimeout(e),e=null},o}function HL(t,n){if(t===n)return!0;if(kf(t)==="object"){for(var a in t)if(!HL(t[a],n[a]))return!1;return!0}return!1}var R9e=function(){function t(n,a,e){S9e(this,t),this.el=n,this.observer=null,this.frozen=!1,this.createObserver(a,e)}return A9e(t,[{key:"createObserver",value:function(a,e){var s=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=N9e(a),this.callback=function(i,l){s.options.callback(i,l),i&&s.options.once&&(s.frozen=!0,s.destroyObserver())},this.callback&&this.options.throttle){var r=this.options.throttleOptions||{},o=r.leading;this.callback=x9e(this.callback,this.options.throttle,{leading:function(l){return o==="both"||o==="visible"&&l||o==="hidden"&&!l}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(i){var l=i[0];if(i.length>1){var c=i.find(function(u){return u.isIntersecting});c&&(l=c)}if(s.callback){var d=l.isIntersecting&&l.intersectionRatio>=s.threshold;if(d===s.oldResult)return;s.oldResult=d,s.callback(d,l)}},this.options.intersection),At(function(){s.observer&&s.observer.observe(s.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&typeof this.options.intersection.threshold=="number"?this.options.intersection.threshold:0}}]),t}();function jL(t,n,a){var e=n.value;if(e)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var s=new R9e(t,e,a);t._vue_visibilityState=s}}function w9e(t,n,a){var e=n.value,s=n.oldValue;if(!HL(e,s)){var r=t._vue_visibilityState;if(!e){WL(t);return}r?r.createObserver(e,a):jL(t,{value:e},a)}}function WL(t){var n=t._vue_visibilityState;n&&(n.destroyObserver(),delete t._vue_visibilityState)}var M9e={beforeMount:jL,updated:w9e,unmounted:WL};function L9e(t){return{all:t=t||new Map,on:function(n,a){var e=t.get(n);e&&e.push(a)||t.set(n,[a])},off:function(n,a){var e=t.get(n);e&&e.splice(e.indexOf(a)>>>0,1)},emit:function(n,a){(t.get(n)||[]).slice().map(function(e){e(a)}),(t.get("*")||[]).slice().map(function(e){e(n,a)})}}}var D9e={itemsLimit:1e3},P9e=/(auto|scroll)/;function zL(t,n){return t.parentNode===null?n:zL(t.parentNode,n.concat([t]))}var _b=function(n,a){return getComputedStyle(n,null).getPropertyValue(a)},k9e=function(n){return _b(n,"overflow")+_b(n,"overflow-y")+_b(n,"overflow-x")},B9e=function(n){return P9e.test(k9e(n))};function KC(t){if(t instanceof HTMLElement||t instanceof SVGElement){for(var n=zL(t.parentNode,[]),a=0;a<n.length;a+=1)if(B9e(n[a]))return n[a];return document.scrollingElement||document.documentElement}}function rE(t){"@babel/helpers - typeof";return rE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},rE(t)}var YL={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:function(n){return["vertical","horizontal"].includes(n)}},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"}};function KL(){return this.items.length&&rE(this.items[0])!=="object"}var iE=!1;if(typeof window<"u"){iE=!1;try{var F9e=Object.defineProperty({},"passive",{get:function(){iE=!0}});window.addEventListener("test",null,F9e)}catch{}}let U9e=0;var u1={name:"RecycleScroller",components:{ResizeObserver:n_},directives:{ObserveVisibility:M9e},props:{...YL,itemSize:{type:Number,default:null},gridItems:{type:Number,default:void 0},itemSecondarySize:{type:Number,default:void 0},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1},updateInterval:{type:Number,default:0},skipHover:{type:Boolean,default:!1},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"},listClass:{type:[String,Object,Array],default:""},itemClass:{type:[String,Object,Array],default:""}},emits:["resize","visible","hidden","update","scroll-start","scroll-end"],data(){return{pool:[],totalSize:0,ready:!1,hoverKey:null}},computed:{sizes(){if(this.itemSize===null){const t={"-1":{accumulator:0}},n=this.items,a=this.sizeField,e=this.minItemSize;let s=1e4,r=0,o;for(let i=0,l=n.length;i<l;i++)o=n[i][a]||e,o<s&&(s=o),r+=o,t[i]={accumulator:r,size:o};return this.$_computedMinItemSize=s,t}return[]},simpleArray:KL,itemIndexByKey(){const{keyField:t,items:n}=this,a={};for(let e=0,s=n.length;e<s;e++)a[n[e][t]]=e;return a}},watch:{items(){this.updateVisibleItems(!0)},pageMode(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler(){this.updateVisibleItems(!1)},deep:!0},gridItems(){this.updateVisibleItems(!0)},itemSecondarySize(){this.updateVisibleItems(!0)}},created(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$_lastUpdateScrollPosition=0,this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1)),this.gridItems&&!this.itemSize&&console.error("[vue-recycle-scroller] You must provide an itemSize when using gridItems")},mounted(){this.applyPageMode(),this.$nextTick(()=>{this.$_prerender=!1,this.updateVisibleItems(!0),this.ready=!0})},activated(){const t=this.$_lastUpdateScrollPosition;typeof t=="number"&&this.$nextTick(()=>{this.scrollToPosition(t)})},beforeUnmount(){this.removeListeners()},methods:{addView(t,n,a,e,s){const r=j3({id:U9e++,index:n,used:!0,key:e,type:s}),o=W3({item:a,position:0,nr:r});return t.push(o),o},unuseView(t,n=!1){const a=this.$_unusedViews,e=t.nr.type;let s=a.get(e);s||(s=[],a.set(e,s)),s.push(t),n||(t.nr.used=!1,t.position=-9999)},handleResize(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll(t){if(!this.$_scrollDirty){if(this.$_scrollDirty=!0,this.$_updateTimeout)return;const n=()=>requestAnimationFrame(()=>{this.$_scrollDirty=!1;const{continuous:a}=this.updateVisibleItems(!1,!0);a||(clearTimeout(this.$_refreshTimout),this.$_refreshTimout=setTimeout(this.handleScroll,this.updateInterval+100))});n(),this.updateInterval&&(this.$_updateTimeout=setTimeout(()=>{this.$_updateTimeout=0,this.$_scrollDirty&&n()},this.updateInterval))}},handleVisibilityChange(t,n){this.ready&&(t||n.boundingClientRect.width!==0||n.boundingClientRect.height!==0?(this.$emit("visible"),requestAnimationFrame(()=>{this.updateVisibleItems(!1)})):this.$emit("hidden"))},updateVisibleItems(t,n=!1){const a=this.itemSize,e=this.gridItems||1,s=this.itemSecondarySize||a,r=this.$_computedMinItemSize,o=this.typeField,i=this.simpleArray?null:this.keyField,l=this.items,c=l.length,d=this.sizes,u=this.$_views,m=this.$_unusedViews,h=this.pool,_=this.itemIndexByKey;let E,y,b,A,T;if(!c)E=y=A=T=b=0;else if(this.$_prerender)E=A=0,y=T=Math.min(this.prerender,l.length),b=null;else{const D=this.getScroll();if(n){let V=D.start-this.$_lastUpdateScrollPosition;if(V<0&&(V=-V),a===null&&V<r||V<a)return{continuous:!0}}this.$_lastUpdateScrollPosition=D.start;const B=this.buffer;D.start-=B,D.end+=B;let k=0;if(this.$refs.before&&(k=this.$refs.before.scrollHeight,D.start-=k),this.$refs.after){const V=this.$refs.after.scrollHeight;D.end+=V}if(a===null){let V,F=0,$=c-1,Y=~~(c/2),j;do j=Y,V=d[Y].accumulator,V<D.start?F=Y:Y<c-1&&d[Y+1].accumulator>D.start&&($=Y),Y=~~((F+$)/2);while(Y!==j);for(Y<0&&(Y=0),E=Y,b=d[c-1].accumulator,y=Y;y<c&&d[y].accumulator<D.end;y++);for(y===-1?y=l.length-1:(y++,y>c&&(y=c)),A=E;A<c&&k+d[A].accumulator<D.start;A++);for(T=A;T<c&&k+d[T].accumulator<D.end;T++);}else{E=~~(D.start/a*e);const V=E%e;E-=V,y=Math.ceil(D.end/a*e),A=Math.max(0,Math.floor((D.start-k)/a*e)),T=Math.floor((D.end-k)/a*e),E<0&&(E=0),y>c&&(y=c),A<0&&(A=0),T>c&&(T=c),b=Math.ceil(c/e)*a}}y-E>D9e.itemsLimit&&this.itemsLimitError(),this.totalSize=b;let I;const N=E<=this.$_endIndex&&y>=this.$_startIndex;if(N)for(let D=0,B=h.length;D<B;D++)I=h[D],I.nr.used&&(t&&(I.nr.index=_[I.item[i]]),(I.nr.index==null||I.nr.index<E||I.nr.index>=y)&&this.unuseView(I));const x=N?null:new Map;let R,M,w;for(let D=E;D<y;D++){R=l[D];const B=i?R[i]:R;if(B==null)throw new Error(`Key is ${B} on item (keyField is '${i}')`);if(I=u.get(B),!a&&!d[D].size){I&&this.unuseView(I);continue}M=R[o];let k=m.get(M),V=!1;if(!I)N?k&&k.length?I=k.pop():I=this.addView(h,D,R,B,M):(w=x.get(M)||0,(!k||w>=k.length)&&(I=this.addView(h,D,R,B,M),this.unuseView(I,!0),k=m.get(M)),I=k[w],x.set(M,w+1)),u.delete(I.nr.key),I.nr.used=!0,I.nr.index=D,I.nr.key=B,I.nr.type=M,u.set(B,I),V=!0;else if(!I.nr.used&&(I.nr.used=!0,V=!0,k)){const F=k.indexOf(I);F!==-1&&k.splice(F,1)}I.item=R,V&&(D===l.length-1&&this.$emit("scroll-end"),D===0&&this.$emit("scroll-start")),a===null?(I.position=d[D-1].accumulator,I.offset=0):(I.position=Math.floor(D/e)*a,I.offset=D%e*s)}return this.$_startIndex=E,this.$_endIndex=y,this.emitUpdate&&this.$emit("update",E,y,A,T),clearTimeout(this.$_sortTimer),this.$_sortTimer=setTimeout(this.sortViews,this.updateInterval+300),{continuous:N}},getListenerTarget(){let t=KC(this.$el);return window.document&&(t===window.document.documentElement||t===window.document.body)&&(t=window),t},getScroll(){const{$el:t,direction:n}=this,a=n==="vertical";let e;if(this.pageMode){const s=t.getBoundingClientRect(),r=a?s.height:s.width;let o=-(a?s.top:s.left),i=a?window.innerHeight:window.innerWidth;o<0&&(i+=o,o=0),o+i>r&&(i=r-o),e={start:o,end:o+i}}else a?e={start:t.scrollTop,end:t.scrollTop+t.clientHeight}:e={start:t.scrollLeft,end:t.scrollLeft+t.clientWidth};return e},applyPageMode(){this.pageMode?this.addListeners():this.removeListeners()},addListeners(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,iE?{passive:!0}:!1),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem(t){let n;const a=this.gridItems||1;this.itemSize===null?n=t>0?this.sizes[t-1].accumulator:0:n=Math.floor(t/a)*this.itemSize,this.scrollToPosition(n)},scrollToPosition(t){const n=this.direction==="vertical"?{scroll:"scrollTop",start:"top"}:{scroll:"scrollLeft",start:"left"};let a,e,s;if(this.pageMode){const r=KC(this.$el),o=r.tagName==="HTML"?0:r[n.scroll],i=r.getBoundingClientRect(),c=this.$el.getBoundingClientRect()[n.start]-i[n.start];a=r,e=n.scroll,s=t+o+c}else a=this.$el,e=n.scroll,s=t;a[e]=s},itemsLimitError(){throw setTimeout(()=>{console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",this.$el),console.log("Make sure the scroller has a fixed height (or width) and 'overflow-y' (or 'overflow-x') set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")}),new Error("Rendered items limit reached")},sortViews(){this.pool.sort((t,n)=>t.nr.index-n.nr.index)}}};const $9e={key:0,ref:"before",class:"vue-recycle-scroller__slot"},G9e={key:1,ref:"after",class:"vue-recycle-scroller__slot"};function V9e(t,n,a,e,s,r){const o=H("ResizeObserver"),i=nt("observe-visibility");return ce((p(),g("div",{class:oe(["vue-recycle-scroller",{ready:s.ready,"page-mode":a.pageMode,[`direction-${t.direction}`]:!0}]),onScrollPassive:n[0]||(n[0]=(...l)=>r.handleScroll&&r.handleScroll(...l))},[t.$slots.before?(p(),g("div",$9e,[qe(t.$slots,"before")],512)):O("v-if",!0),(p(),L(Da(a.listTag),{ref:"wrapper",style:nn({[t.direction==="vertical"?"minHeight":"minWidth"]:s.totalSize+"px"}),class:oe(["vue-recycle-scroller__item-wrapper",a.listClass])},{default:z(()=>[(p(!0),g(de,null,Ae(s.pool,l=>(p(),L(Da(a.itemTag),Ta({key:l.nr.id,style:s.ready?{transform:`translate${t.direction==="vertical"?"Y":"X"}(${l.position}px) translate${t.direction==="vertical"?"X":"Y"}(${l.offset}px)`,width:a.gridItems?`${t.direction==="vertical"&&a.itemSecondarySize||a.itemSize}px`:void 0,height:a.gridItems?`${t.direction==="horizontal"&&a.itemSecondarySize||a.itemSize}px`:void 0}:null,class:["vue-recycle-scroller__item-view",[a.itemClass,{hover:!a.skipHover&&s.hoverKey===l.nr.key}]]},z3(a.skipHover?{}:{mouseenter:()=>{s.hoverKey=l.nr.key},mouseleave:()=>{s.hoverKey=null}})),{default:z(()=>[qe(t.$slots,"default",{item:l.item,index:l.nr.index,active:l.nr.used})]),_:2},1040,["style","class"]))),128)),qe(t.$slots,"empty")]),_:3},8,["style","class"])),t.$slots.after?(p(),g("div",G9e,[qe(t.$slots,"after")],512)):O("v-if",!0),v(o,{onNotify:r.handleResize},null,8,["onNotify"])],34)),[[i,r.handleVisibilityChange]])}u1.render=V9e;u1.__file="src/components/RecycleScroller.vue";var p1={name:"DynamicScroller",components:{RecycleScroller:u1},provide(){return typeof ResizeObserver<"u"&&(this.$_resizeObserver=new ResizeObserver(t=>{requestAnimationFrame(()=>{if(Array.isArray(t)){for(const n of t)if(n.target&&n.target.$_vs_onResize){let a,e;if(n.borderBoxSize){const s=n.borderBoxSize[0];a=s.inlineSize,e=s.blockSize}else a=n.contentRect.width,e=n.contentRect.height;n.target.$_vs_onResize(n.target.$_vs_id,a,e)}}})})),{vscrollData:this.vscrollData,vscrollParent:this,vscrollResizeObserver:this.$_resizeObserver}},inheritAttrs:!1,props:{...YL,minItemSize:{type:[Number,String],required:!0}},emits:["resize","visible"],data(){return{vscrollData:{active:!0,sizes:{},keyField:this.keyField,simpleArray:!1}}},computed:{simpleArray:KL,itemsWithSize(){const t=[],{items:n,keyField:a,simpleArray:e}=this,s=this.vscrollData.sizes,r=n.length;for(let o=0;o<r;o++){const i=n[o],l=e?o:i[a];let c=s[l];typeof c>"u"&&!this.$_undefinedMap[l]&&(c=0),t.push({item:i,id:l,size:c})}return t}},watch:{items(){this.forceUpdate()},simpleArray:{handler(t){this.vscrollData.simpleArray=t},immediate:!0},direction(t){this.forceUpdate(!0)},itemsWithSize(t,n){const a=this.$el.scrollTop;let e=0,s=0;const r=Math.min(t.length,n.length);for(let i=0;i<r&&!(e>=a);i++)e+=n[i].size||this.minItemSize,s+=t[i].size||this.minItemSize;const o=s-e;o!==0&&(this.$el.scrollTop+=o)}},beforeCreate(){this.$_updates=[],this.$_undefinedSizes=0,this.$_undefinedMap={},this.$_events=L9e()},activated(){this.vscrollData.active=!0},deactivated(){this.vscrollData.active=!1},unmounted(){this.$_events.all.clear()},methods:{onScrollerResize(){this.$refs.scroller&&this.forceUpdate(),this.$emit("resize")},onScrollerVisible(){this.$_events.emit("vscroll:update",{force:!1}),this.$emit("visible")},forceUpdate(t=!1){(t||this.simpleArray)&&(this.vscrollData.sizes={}),this.$_events.emit("vscroll:update",{force:!0})},scrollToItem(t){const n=this.$refs.scroller;n&&n.scrollToItem(t)},getItemSize(t,n=void 0){const a=this.simpleArray?n??this.items.indexOf(t):t[this.keyField];return this.vscrollData.sizes[a]||0},scrollToBottom(){if(this.$_scrollingToBottom)return;this.$_scrollingToBottom=!0;const t=this.$el;this.$nextTick(()=>{t.scrollTop=t.scrollHeight+5e3;const n=()=>{t.scrollTop=t.scrollHeight+5e3,requestAnimationFrame(()=>{t.scrollTop=t.scrollHeight+5e3,this.$_undefinedSizes===0?this.$_scrollingToBottom=!1:requestAnimationFrame(n)})};requestAnimationFrame(n)})}}};function H9e(t,n,a,e,s,r){const o=H("RecycleScroller");return p(),L(o,Ta({ref:"scroller",items:r.itemsWithSize,"min-item-size":a.minItemSize,direction:t.direction,"key-field":"id","list-tag":t.listTag,"item-tag":t.itemTag},t.$attrs,{onResize:r.onScrollerResize,onVisible:r.onScrollerVisible}),{default:z(({item:i,index:l,active:c})=>[qe(t.$slots,"default",i2(l2({item:i.item,index:l,active:c,itemWithSize:i})))]),before:z(()=>[qe(t.$slots,"before")]),after:z(()=>[qe(t.$slots,"after")]),empty:z(()=>[qe(t.$slots,"empty")]),_:3},16,["items","min-item-size","direction","list-tag","item-tag","onResize","onVisible"])}p1.render=H9e;p1.__file="src/components/DynamicScroller.vue";var XL={name:"DynamicScrollerItem",inject:["vscrollData","vscrollParent","vscrollResizeObserver"],props:{item:{required:!0},watchData:{type:Boolean,default:!1},active:{type:Boolean,required:!0},index:{type:Number,default:void 0},sizeDependencies:{type:[Array,Object],default:null},emitResize:{type:Boolean,default:!1},tag:{type:String,default:"div"}},emits:["resize"],computed:{id(){if(this.vscrollData.simpleArray)return this.index;if(this.vscrollData.keyField in this.item)return this.item[this.vscrollData.keyField];throw new Error(`keyField '${this.vscrollData.keyField}' not found in your item. You should set a valid keyField prop on your Scroller`)},size(){return this.vscrollData.sizes[this.id]||0},finalActive(){return this.active&&this.vscrollData.active}},watch:{watchData:"updateWatchData",id(t,n){if(this.$el.$_vs_id=this.id,this.size||this.onDataUpdate(),this.$_sizeObserved){const a=this.vscrollData.sizes[n],e=this.vscrollData.sizes[t];a!=null&&a!==e&&this.applySize(a)}},finalActive(t){this.size||(t?this.vscrollParent.$_undefinedMap[this.id]||(this.vscrollParent.$_undefinedSizes++,this.vscrollParent.$_undefinedMap[this.id]=!0):this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=!1)),this.vscrollResizeObserver?t?this.observeSize():this.unobserveSize():t&&this.$_pendingVScrollUpdate===this.id&&this.updateSize()}},created(){if(!this.$isServer&&(this.$_forceNextVScrollUpdate=null,this.updateWatchData(),!this.vscrollResizeObserver)){for(const t in this.sizeDependencies)this.$watch(()=>this.sizeDependencies[t],this.onDataUpdate);this.vscrollParent.$_events.on("vscroll:update",this.onVscrollUpdate)}},mounted(){this.finalActive&&(this.updateSize(),this.observeSize())},beforeUnmount(){this.vscrollParent.$_events.off("vscroll:update",this.onVscrollUpdate),this.unobserveSize()},methods:{updateSize(){this.finalActive?this.$_pendingSizeUpdate!==this.id&&(this.$_pendingSizeUpdate=this.id,this.$_forceNextVScrollUpdate=null,this.$_pendingVScrollUpdate=null,this.computeSize(this.id)):this.$_forceNextVScrollUpdate=this.id},updateWatchData(){this.watchData&&!this.vscrollResizeObserver?this.$_watchData=this.$watch("item",()=>{this.onDataUpdate()},{deep:!0}):this.$_watchData&&(this.$_watchData(),this.$_watchData=null)},onVscrollUpdate({force:t}){!this.finalActive&&t&&(this.$_pendingVScrollUpdate=this.id),(this.$_forceNextVScrollUpdate===this.id||t||!this.size)&&this.updateSize()},onDataUpdate(){this.updateSize()},computeSize(t){this.$nextTick(()=>{if(this.id===t){const n=this.$el.offsetWidth,a=this.$el.offsetHeight;this.applyWidthHeight(n,a)}this.$_pendingSizeUpdate=null})},applyWidthHeight(t,n){const a=~~(this.vscrollParent.direction==="vertical"?n:t);a&&this.size!==a&&this.applySize(a)},applySize(t){this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=void 0),this.vscrollData.sizes[this.id]=t,this.emitResize&&this.$emit("resize",this.id)},observeSize(){this.vscrollResizeObserver&&(this.$_sizeObserved||(this.vscrollResizeObserver.observe(this.$el),this.$el.$_vs_id=this.id,this.$el.$_vs_onResize=this.onResize,this.$_sizeObserved=!0))},unobserveSize(){this.vscrollResizeObserver&&this.$_sizeObserved&&(this.vscrollResizeObserver.unobserve(this.$el),this.$el.$_vs_onResize=void 0,this.$_sizeObserved=!1)},onResize(t,n,a){this.id===t&&this.applyWidthHeight(n,a)}},render(){return pn(this.tag,this.$slots.default())}};XL.__file="src/components/DynamicScrollerItem.vue";const j9e={__name:"SelectMenu",props:{options:{type:Array,required:!0},modelValue:{type:String,required:!0},label:{type:String,required:!0},subMenuPosition:{type:String,default:"right",validator:t=>["right","left","bottom"].includes(t)}},emits:["update:modelValue"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=P(!1),o=S(()=>e.label),c={props:e,emit:s,isOpen:r,labelValue:o,toggleMenu:()=>{r.value=!r.value},handleSelect:d=>{s("update:modelValue",d),r.value=!1},ref:P,computed:S,Button:Se};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}},W9e={class:"relative flex flex-col gap-1 w-fit"};function z9e(t,n,a,e,s,r){const o=nt("on-clickaway");return ce((p(),g("div",W9e,[v(e.Button,{icon:"i-lucide-chevron-down",size:"sm","trailing-icon":"",color:"slate",variant:"faded",class:oe(["!w-fit max-w-40",{"dark:!bg-n-alpha-2 !bg-n-slate-9/20":e.isOpen}]),label:e.labelValue,onClick:e.toggleMenu},null,8,["class","label"]),e.isOpen?(p(),g("div",{key:0,class:oe(["absolute select-none max-w-64 flex flex-col gap-1 bg-n-alpha-3 backdrop-blur-[100px] p-1 top-0 shadow-lg z-40 rounded-lg border border-n-weak dark:border-n-strong/50",{"ltr:left-full rtl:right-full ltr:ml-1 rtl:mr-1":a.subMenuPosition==="right","ltr:right-full rtl:left-full ltr:mr-1 rtl:ml-1":a.subMenuPosition==="left","top-full mt-1 ltr:right-0 rtl:left-0":a.subMenuPosition==="bottom"}])},[(p(!0),g(de,null,Ae(a.options,i=>(p(),L(e.Button,{key:i.value,label:i.label,icon:i.value===a.modelValue?"i-lucide-check":"",size:"sm",variant:"ghost",color:"slate","trailing-icon":"",class:oe(["!justify-end !px-2.5 !h-7",{"!bg-n-alpha-2":i.value===a.modelValue}]),onClick:l=>e.handleSelect(i.value)},null,8,["label","icon","class","onClick"]))),128))],2)):O("v-if",!0)])),[[o,()=>e.isOpen=!1]])}const qL=G(j9e,[["render",z9e],["__file","/app/app/javascript/dashboard/components-next/selectmenu/SelectMenu.vue"]]),Y9e={__name:"ConversationBasicFilter",props:{isOnExpandedLayout:{type:Boolean,required:!0}},emits:["changeFilter"],setup(t,{expose:n,emit:a}){n();const e=a,s=Fe(),{t:r}=Q(),{updateUISettings:o}=Ct(),i=le("getChatStatusFilter"),l=le("getChatSortFilter"),[c,d]=$t(),u=S(()=>i.value||gt.STATUS_TYPE.OPEN),m=S(()=>l.value||gt.SORT_BY_TYPE.LAST_ACTIVITY_AT_DESC),h=S(()=>[{label:r("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.open.TEXT"),value:"open"},{label:r("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.resolved.TEXT"),value:"resolved"},{label:r("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.pending.TEXT"),value:"pending"},{label:r("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.snoozed.TEXT"),value:"snoozed"},{label:r("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.all.TEXT"),value:"all"}]),_=S(()=>[{label:r("CHAT_LIST.SORT_ORDER_ITEMS.last_activity_at_asc.TEXT"),value:"last_activity_at_asc"},{label:r("CHAT_LIST.SORT_ORDER_ITEMS.last_activity_at_desc.TEXT"),value:"last_activity_at_desc"},{label:r("CHAT_LIST.SORT_ORDER_ITEMS.created_at_desc.TEXT"),value:"created_at_desc"},{label:r("CHAT_LIST.SORT_ORDER_ITEMS.created_at_asc.TEXT"),value:"created_at_asc"},{label:r("CHAT_LIST.SORT_ORDER_ITEMS.priority_desc.TEXT"),value:"priority_desc"},{label:r("CHAT_LIST.SORT_ORDER_ITEMS.priority_asc.TEXT"),value:"priority_asc"},{label:r("CHAT_LIST.SORT_ORDER_ITEMS.waiting_since_asc.TEXT"),value:"waiting_since_asc"},{label:r("CHAT_LIST.SORT_ORDER_ITEMS.waiting_since_desc.TEXT"),value:"waiting_since_desc"}]),E=S(()=>{var N;return((N=h.value.find(x=>x.value===i.value))==null?void 0:N.label)||""}),y=S(()=>{var N;return((N=_.value.find(x=>x.value===l.value))==null?void 0:N.label)||""}),b=(N,x)=>{o({conversations_filter_by:{status:N==="status"?x:u.value,order_by:N==="sort"?x:m.value}})},I={emit:e,store:s,t:r,updateUISettings:o,chatStatusFilter:i,chatSortFilter:l,showActionsDropdown:c,toggleDropdown:d,currentStatusFilter:u,currentSortBy:m,chatStatusOptions:h,chatSortOptions:_,activeChatStatusLabel:E,activeChatSortLabel:y,saveSelectedFilter:b,handleStatusChange:N=>{e("changeFilter",N,"status"),s.dispatch("setChatStatusFilter",N),b("status",N)},handleSortChange:N=>{e("changeFilter",N,"sort"),s.dispatch("setChatSortFilter",N),b("sort",N)},computed:S,get useI18n(){return Q},get useToggle(){return $t},get vOnClickOutside(){return Ga},get useUISettings(){return Ct},get useMapGetter(){return le},get useStore(){return Fe},get wootConstants(){return gt},SelectMenu:qL,NextButton:Se};return Object.defineProperty(I,"__isScriptSetup",{enumerable:!1,value:!0}),I}},K9e={class:"relative flex"},X9e={class:"flex items-center justify-between last:mt-4 gap-2"},q9e={class:"text-sm truncate text-n-slate-12"},Z9e={class:"flex items-center justify-between last:mt-4 gap-2"},Q9e={class:"text-sm truncate text-n-slate-12"};function J9e(t,n,a,e,s,r){const o=nt("tooltip");return p(),g("div",K9e,[ce(v(e.NextButton,{icon:"i-lucide-arrow-up-down",slate:"",faded:"",xs:"",onClick:n[0]||(n[0]=i=>e.toggleDropdown())},null,512),[[o,t.$t("CHAT_LIST.SORT_TOOLTIP_LABEL"),void 0,{right:!0}]]),e.showActionsDropdown?ce((p(),g("div",{key:0,class:oe(["mt-1 bg-n-alpha-3 backdrop-blur-[100px] border border-n-weak w-72 rounded-xl p-4 absolute z-40 top-full",{"ltr:left-0 rtl:right-0":!a.isOnExpandedLayout,"ltr:right-0 rtl:left-0":a.isOnExpandedLayout}])},[f("div",X9e,[f("span",q9e,C(t.$t("CHAT_LIST.CHAT_SORT.STATUS")),1),v(e.SelectMenu,{"model-value":e.chatStatusFilter,options:e.chatStatusOptions,label:e.activeChatStatusLabel,"sub-menu-position":a.isOnExpandedLayout?"left":"right","onUpdate:modelValue":e.handleStatusChange},null,8,["model-value","options","label","sub-menu-position"])]),f("div",Z9e,[f("span",Q9e,C(t.$t("CHAT_LIST.CHAT_SORT.ORDER_BY")),1),v(e.SelectMenu,{"model-value":e.chatSortFilter,options:e.chatSortOptions,label:e.activeChatSortLabel,"sub-menu-position":a.isOnExpandedLayout?"left":"right","onUpdate:modelValue":e.handleSortChange},null,8,["model-value","options","label","sub-menu-position"])])],2)),[[e.vOnClickOutside,()=>e.toggleDropdown()]]):O("v-if",!0)])}const e$e=G(Y9e,[["render",J9e],["__file","/app/app/javascript/dashboard/components/widgets/conversation/ConversationBasicFilter.vue"]]),t$e={components:{NextButton:Se},props:{isOnExpandedLayout:{type:Boolean,default:!1}},emits:["toggle"],methods:{toggle(){this.$emit("toggle")}}};function n$e(t,n,a,e,s,r){const o=H("NextButton"),i=nt("tooltip");return ce((p(),L(o,{icon:a.isOnExpandedLayout?"i-lucide-arrow-left-to-line":"i-lucide-arrow-right-to-line",slate:"",xs:"",faded:"",class:"flex-shrink-0 rtl:rotate-180 ltr:rotate-0 md:inline-flex hidden",onClick:r.toggle},null,8,["icon","onClick"])),[[i,t.$t("CONVERSATION.SWITCH_VIEW_LAYOUT"),void 0,{left:!0}]])}const a$e=G(t$e,[["render",n$e],["__file","/app/app/javascript/dashboard/routes/dashboard/conversation/search/SwitchLayout.vue"]]),s$e={__name:"ChatListHeader",props:{pageTitle:{type:String,required:!0},hasAppliedFilters:{type:Boolean,required:!0},hasActiveFolders:{type:Boolean,required:!0},activeStatus:{type:String,required:!0},isOnExpandedLayout:{type:Boolean,required:!0},conversationStats:{type:Object,required:!0},isListLoading:{type:Boolean,required:!0}},emits:["addFolders","deleteFolders","resetFilters","basicFilterChange","filtersModal"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{uiSettings:r,updateUISettings:o}=Ct(),i=(h,_)=>{s("basicFilterChange",h,_)},l=S(()=>e.hasAppliedFilters||e.hasActiveFolders),c=S(()=>{var h;return((h=e.conversationStats)==null?void 0:h.allCount)||0}),d=S(()=>z1(c.value)),m={props:e,emit:s,uiSettings:r,updateUISettings:o,onBasicFilterChange:i,hasAppliedFiltersOrActiveFolders:l,allCount:c,formattedAllCount:d,toggleConversationLayout:()=>{const{LAYOUT_TYPES:h}=gt,{conversation_display_type:_=h.CONDENSED}=r.value,E=_===h.CONDENSED?h.EXPANDED:h.CONDENSED;o({conversation_display_type:E,previously_used_conversation_display_type:E})},computed:S,get useUISettings(){return Ct},get formatNumber(){return z1},get wootConstants(){return gt},ConversationBasicFilter:e$e,SwitchLayout:a$e,NextButton:Se};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}},o$e={class:"flex items-center justify-center min-w-0"},r$e=["title"],i$e=["title"],l$e={key:1,class:"px-2 py-1 my-0.5 mx-1 rounded-md capitalize bg-n-slate-3 text-xxs text-n-slate-12 shrink-0"},c$e={class:"flex items-center gap-1"},d$e={class:"relative"},u$e={class:"relative"},p$e={key:2,class:"relative"};function f$e(t,n,a,e,s,r){const o=nt("tooltip");return p(),g("div",{class:oe(["flex items-center justify-between gap-2 px-3 h-12",{"border-b border-n-strong":e.hasAppliedFiltersOrActiveFolders}])},[f("div",o$e,[f("h1",{class:"text-base font-medium truncate text-n-slate-12",title:a.pageTitle},C(a.pageTitle),9,r$e),e.allCount>0&&e.hasAppliedFiltersOrActiveFolders&&!a.isListLoading?(p(),g("span",{key:0,class:"px-2 py-1 my-0.5 mx-1 rounded-md capitalize bg-n-slate-3 text-xxs text-n-slate-12 shrink-0",title:e.allCount},C(e.formattedAllCount),9,i$e)):O("v-if",!0),e.hasAppliedFiltersOrActiveFolders?O("v-if",!0):(p(),g("span",l$e,C(t.$t(`CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.${a.activeStatus}.TEXT`)),1))]),f("div",c$e,[a.hasAppliedFilters&&!a.hasActiveFolders?(p(),g(de,{key:0},[f("div",d$e,[ce(v(e.NextButton,{icon:"i-lucide-save",slate:"",xs:"",faded:"",onClick:n[0]||(n[0]=i=>e.emit("addFolders"))},null,512),[[o,t.$t("FILTER.CUSTOM_VIEWS.ADD.SAVE_BUTTON"),void 0,{"top-end":!0}]]),f("div",{id:"saveFilterTeleportTarget",class:oe(["absolute z-50 mt-2",{"ltr:right-0 rtl:left-0":a.isOnExpandedLayout}])},null,2)]),ce(v(e.NextButton,{icon:"i-lucide-circle-x",ruby:"",faded:"",xs:"",onClick:n[1]||(n[1]=i=>e.emit("resetFilters"))},null,512),[[o,t.$t("FILTER.CLEAR_BUTTON_LABEL"),void 0,{"top-end":!0}]])],64)):O("v-if",!0),a.hasActiveFolders?(p(),g(de,{key:1},[f("div",u$e,[ce(v(e.NextButton,{id:"toggleConversationFilterButton",icon:"i-lucide-pen-line",slate:"",xs:"",faded:"",onClick:n[2]||(n[2]=i=>e.emit("filtersModal"))},null,512),[[o,t.$t("FILTER.CUSTOM_VIEWS.EDIT.EDIT_BUTTON"),void 0,{"top-end":!0}]]),f("div",{id:"conversationFilterTeleportTarget",class:oe(["absolute z-50 mt-2",{"ltr:right-0 rtl:left-0":a.isOnExpandedLayout}])},null,2)]),ce(v(e.NextButton,{id:"toggleConversationFilterButton",icon:"i-lucide-trash-2",ruby:"",xs:"",faded:"",onClick:n[3]||(n[3]=i=>e.emit("deleteFolders"))},null,512),[[o,t.$t("FILTER.CUSTOM_VIEWS.DELETE.DELETE_BUTTON"),void 0,{"top-end":!0}]])],64)):(p(),g("div",p$e,[ce(v(e.NextButton,{id:"toggleConversationFilterButton",icon:"i-lucide-list-filter",slate:"",xs:"",faded:"",onClick:n[4]||(n[4]=i=>e.emit("filtersModal"))},null,512),[[o,t.$t("FILTER.TOOLTIP_LABEL"),void 0,{right:!0}]]),f("div",{id:"conversationFilterTeleportTarget",class:oe(["absolute z-50 mt-2",{"ltr:right-0 rtl:left-0":a.isOnExpandedLayout}])},null,2)])),e.hasAppliedFiltersOrActiveFolders?O("v-if",!0):(p(),L(e.ConversationBasicFilter,{key:3,"is-on-expanded-layout":a.isOnExpandedLayout,onChangeFilter:e.onBasicFilterChange},null,8,["is-on-expanded-layout"])),v(e.SwitchLayout,{"is-on-expanded-layout":a.isOnExpandedLayout,onToggle:e.toggleConversationLayout},null,8,["is-on-expanded-layout"])])],2)}const m$e=G(s$e,[["render",f$e],["__file","/app/app/javascript/dashboard/components/ChatListHeader.vue"]]),Nn={EQUAL_TO:"equal_to",NOT_EQUAL_TO:"not_equal_to",IS_PRESENT:"is_present",IS_NOT_PRESENT:"is_not_present",CONTAINS:"contains",DOES_NOT_CONTAIN:"does_not_contain",IS_GREATER_THAN:"is_greater_than",IS_LESS_THAN:"is_less_than",DAYS_BEFORE:"days_before",STARTS_WITH:"starts_with"},h$e=[Nn.IS_PRESENT,Nn.IS_NOT_PRESENT],_$e={[Nn.DAYS_BEFORE]:"plainText"},g$e={[Nn.EQUAL_TO]:"i-ph-equals-bold",[Nn.NOT_EQUAL_TO]:"i-ph-not-equals-bold",[Nn.IS_PRESENT]:"i-ph-member-of-bold",[Nn.IS_NOT_PRESENT]:"i-ph-not-member-of-bold",[Nn.CONTAINS]:"i-ph-superset-of-bold",[Nn.DOES_NOT_CONTAIN]:"i-ph-not-superset-of-bold",[Nn.IS_GREATER_THAN]:"i-ph-greater-than-bold",[Nn.IS_LESS_THAN]:"i-ph-less-than-bold",[Nn.DAYS_BEFORE]:"i-ph-calendar-minus-bold",[Nn.STARTS_WITH]:"i-ph-caret-line-right-bold"};function ZL(){const{t}=Q(),n=S(()=>Object.values(Nn).reduce((l,c)=>(l[c]={value:c,label:t(`FILTER.OPERATOR_LABELS.${c}`),hasInput:!h$e.includes(c),inputOverride:_$e[c]||null,icon:pn("span",{class:`${g$e[c]} !text-n-blue-text`})},l),{})),a=S(()=>[n.value[Nn.EQUAL_TO],n.value[Nn.NOT_EQUAL_TO]]),e=S(()=>[n.value[Nn.EQUAL_TO],n.value[Nn.NOT_EQUAL_TO],n.value[Nn.IS_PRESENT],n.value[Nn.IS_NOT_PRESENT]]),s=S(()=>[n.value[Nn.EQUAL_TO],n.value[Nn.NOT_EQUAL_TO],n.value[Nn.CONTAINS],n.value[Nn.DOES_NOT_CONTAIN]]),r=S(()=>[n.value[Nn.EQUAL_TO],n.value[Nn.NOT_EQUAL_TO],n.value[Nn.IS_PRESENT],n.value[Nn.IS_NOT_PRESENT],n.value[Nn.IS_GREATER_THAN],n.value[Nn.IS_LESS_THAN]]),o=S(()=>[n.value[Nn.IS_GREATER_THAN],n.value[Nn.IS_LESS_THAN],n.value[Nn.DAYS_BEFORE]]);return{operators:n,equalityOperators:a,presenceOperators:e,containmentOperators:s,comparisonOperators:r,dateOperators:o,getOperatorTypes:l=>{switch(l){case"list":return a.value;case"text":return s.value;case"number":return a.value;case"link":return a.value;case"date":return r.value;case"checkbox":return a.value;default:return a.value}}}}const Kn={STATUS:"status",PRIORITY:"priority",ASSIGNEE_ID:"assignee_id",INBOX_ID:"inbox_id",TEAM_ID:"team_id",DISPLAY_ID:"display_id",CAMPAIGN_ID:"campaign_id",LABELS:"labels",BROWSER_LANGUAGE:"browser_language",COUNTRY_CODE:"country_code",REFERER:"referer",CREATED_AT:"created_at",LAST_ACTIVITY_AT:"last_activity_at"},ga={NAME:"name",EMAIL:"email",PHONE_NUMBER:"phone_number",IDENTIFIER:"identifier",COUNTRY_CODE:"country_code",CITY:"city",CREATED_AT:"created_at",LAST_ACTIVITY_AT:"last_activity_at",REFERER:"referer",BLOCKED:"blocked",LABELS:"labels"},b$e=t=>{switch(t){case"date":return"date";case"text":return"plainText";case"list":return"searchSelect";case"checkbox":return"booleanSelect";default:return"plainText"}},QL=(t,n,a="conversation")=>{const e=Object.values(a==="conversation"?Kn:ga);return t.filter(s=>!e.includes(s.attributeKey)).map(s=>({attributeKey:s.attributeKey,value:s.attributeKey,attributeName:s.attributeDisplayName,label:s.attributeDisplayName,inputType:b$e(s.attributeDisplayType),filterOperators:n(s.attributeDisplayType),options:s.attributeDisplayType==="list"?s.attributeValues.map(r=>({id:r,name:r})):[],attributeModel:"customAttributes"}))},XC=t=>(t==null?void 0:t.replaceAll("_"," "))??"";function qC(){const{t}=Q(),n=le("attributes/getConversationAttributes"),a=le("labels/getLabels"),e=le("agents/getAgents"),s=le("inboxes/getInboxes"),r=le("teams/getTeams"),o=le("campaigns/getAllCampaigns"),{equalityOperators:i,presenceOperators:l,containmentOperators:c,dateOperators:d,getOperatorTypes:u}=ZL(),m=S(()=>QL(n.value,u,"conversation"));return{filterTypes:S(()=>[{attributeKey:Kn.STATUS,value:Kn.STATUS,attributeName:t("FILTER.ATTRIBUTES.STATUS"),label:t("FILTER.ATTRIBUTES.STATUS"),inputType:"multiSelect",options:["open","resolved","pending","snoozed","all"].map(_=>({id:_,name:t(`CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.${_}.TEXT`)})),dataType:"text",filterOperators:i.value,attributeModel:"standard"},{attributeKey:Kn.PRIORITY,value:Kn.PRIORITY,attributeName:t("FILTER.ATTRIBUTES.PRIORITY"),label:t("FILTER.ATTRIBUTES.PRIORITY"),inputType:"multiSelect",options:["low","medium","high","urgent"].map(_=>({id:_,name:t(`CONVERSATION.PRIORITY.OPTIONS.${_.toUpperCase()}`)})),dataType:"text",filterOperators:i.value,attributeModel:"standard"},{attributeKey:Kn.ASSIGNEE_ID,value:Kn.ASSIGNEE_ID,attributeName:t("FILTER.ATTRIBUTES.ASSIGNEE_NAME"),label:t("FILTER.ATTRIBUTES.ASSIGNEE_NAME"),inputType:"searchSelect",options:e.value.map(_=>({id:_.id,name:_.name})),dataType:"text",filterOperators:l.value,attributeModel:"standard"},{attributeKey:Kn.INBOX_ID,value:Kn.INBOX_ID,attributeName:t("FILTER.ATTRIBUTES.INBOX_NAME"),label:t("FILTER.ATTRIBUTES.INBOX_NAME"),inputType:"searchSelect",options:s.value.map(_=>({..._,icon:_k(_).value})),dataType:"text",filterOperators:l.value,attributeModel:"standard"},{attributeKey:Kn.TEAM_ID,value:Kn.TEAM_ID,attributeName:t("FILTER.ATTRIBUTES.TEAM_NAME"),label:t("FILTER.ATTRIBUTES.TEAM_NAME"),inputType:"searchSelect",options:r.value,dataType:"number",filterOperators:l.value,attributeModel:"standard"},{attributeKey:Kn.DISPLAY_ID,value:Kn.DISPLAY_ID,attributeName:t("FILTER.ATTRIBUTES.CONVERSATION_IDENTIFIER"),label:t("FILTER.ATTRIBUTES.CONVERSATION_IDENTIFIER"),inputType:"number",dataType:"number",filterOperators:c.value,attributeModel:"standard"},{attributeKey:Kn.CAMPAIGN_ID,value:Kn.CAMPAIGN_ID,attributeName:t("FILTER.ATTRIBUTES.CAMPAIGN_NAME"),label:t("FILTER.ATTRIBUTES.CAMPAIGN_NAME"),inputType:"searchSelect",options:o.value.map(_=>({id:_.id,name:_.title})),dataType:"number",filterOperators:l.value,attributeModel:"standard"},{attributeKey:Kn.LABELS,value:Kn.LABELS,attributeName:t("FILTER.ATTRIBUTES.LABELS"),label:t("FILTER.ATTRIBUTES.LABELS"),inputType:"multiSelect",options:a.value.map(_=>({id:_.title,name:_.title,icon:pn("span",{class:"rounded-full",style:{backgroundColor:_.color,height:"6px",width:"6px"}})})),dataType:"text",filterOperators:l.value,attributeModel:"standard"},{attributeKey:Kn.BROWSER_LANGUAGE,value:Kn.BROWSER_LANGUAGE,attributeName:t("FILTER.ATTRIBUTES.BROWSER_LANGUAGE"),label:t("FILTER.ATTRIBUTES.BROWSER_LANGUAGE"),inputType:"searchSelect",options:Qf,dataType:"text",filterOperators:i.value,attributeModel:"additional"},{attributeKey:Kn.COUNTRY_CODE,value:Kn.COUNTRY_CODE,attributeName:t("FILTER.ATTRIBUTES.COUNTRY_NAME"),label:t("FILTER.ATTRIBUTES.COUNTRY_NAME"),inputType:"searchSelect",options:rs,dataType:"text",filterOperators:i.value,attributeModel:"additional"},{attributeKey:Kn.REFERER,value:Kn.REFERER,attributeName:t("FILTER.ATTRIBUTES.REFERER_LINK"),label:t("FILTER.ATTRIBUTES.REFERER_LINK"),inputType:"plainText",dataType:"text",filterOperators:c.value,attributeModel:"additional"},{attributeKey:Kn.CREATED_AT,value:Kn.CREATED_AT,attributeName:t("FILTER.ATTRIBUTES.CREATED_AT"),label:t("FILTER.ATTRIBUTES.CREATED_AT"),inputType:"date",dataType:"text",filterOperators:d.value,attributeModel:"standard"},{attributeKey:Kn.LAST_ACTIVITY_AT,value:Kn.LAST_ACTIVITY_AT,attributeName:t("FILTER.ATTRIBUTES.LAST_ACTIVITY"),label:t("FILTER.ATTRIBUTES.LAST_ACTIVITY"),inputType:"date",dataType:"text",filterOperators:d.value,attributeModel:"standard"},...m.value])}}const v$e={__name:"MultiSelect",props:an({options:{type:Array,required:!0},maxChips:{type:Number,default:3}},{modelValue:{type:[Array,String],required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t,{expose:n}){n();const{t:a}=Q(),e=dn(t,"modelValue"),s=S(()=>!(!e.value||!Array.isArray(e.value)||e.value.length===0)),r=S(()=>s.value?e.value.map(m=>m.id):[]),o=S(()=>s.value?t.options.filter(m=>r.value.includes(m.id)):[]),i=S(()=>s.value?o.value.length===t.maxChips+1?o.value:o.value.slice(0,t.maxChips):[]),l=S(()=>s.value?o.value.length===t.maxChips+1?[]:o.value.slice(t.maxChips):[]),c=S(()=>s.value?l.value.map(m=>m.name).join(", "):""),u={t:a,selected:e,hasItems:s,selectedIds:r,selectedItems:o,selectedVisibleItems:i,remainingItems:l,remainingTooltip:c,toggleOption:m=>{const h={id:m.id,name:m.name},_=h.id;if(!s.value){e.value=[h];return}r.value.includes(_)?e.value=e.value.filter(E=>E.id!==_):e.value=[...e.value,h]},computed:S,get useI18n(){return Q},Icon:Bt,Button:Se,DropdownContainer:Yl,DropdownSection:Td,DropdownBody:Kl,DropdownItem:Xi};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}},E$e=["onClick"],S$e={class:"truncate"},T$e={key:0,class:"px-3 border-r rtl:border-l rtl:border-r-0 border-n-weak text-n-slate-12 text-sm flex gap-2 items-center max-w-[100px]"},A$e={class:"truncate"},y$e={class:"flex items-center border-none px-3 gap-2"},I$e={class:"text-n-slate-11"};function C$e(t,n,a,e,s,r){const o=nt("tooltip");return p(),L(e.DropdownContainer,null,{trigger:z(({toggle:i})=>[e.hasItems?(p(),g("button",{key:0,class:"bg-n-alpha-2 py-2 rounded-lg h-8 flex items-center px-0",onClick:i},[(p(!0),g(de,null,Ae(e.selectedVisibleItems,l=>(p(),g("div",{key:l.name,class:"px-3 border-r rtl:border-l rtl:border-r-0 border-n-weak text-n-slate-12 text-sm flex gap-2 items-center max-w-[100px]"},[l.icon?(p(),L(e.Icon,{key:0,icon:l.icon,class:"flex-shrink-0"},null,8,["icon"])):O("v-if",!0),f("span",S$e,C(l.name),1)]))),128)),e.remainingItems.length>0?ce((p(),g("div",T$e,[f("span",A$e,C(e.t("COMBOBOX.MORE",{count:e.remainingItems.length})),1)])),[[o,e.remainingTooltip,void 0,{top:!0}]]):O("v-if",!0),f("div",y$e,[v(e.Icon,{icon:"i-lucide-plus"})])],8,E$e)):(p(),L(e.Button,{key:1,sm:"",slate:"",faded:"",onClick:i},{icon:z(()=>[v(e.Icon,{icon:"i-lucide-plus",class:"text-n-slate-11"})]),default:z(()=>[f("span",I$e,C(e.t("COMBOBOX.PLACEHOLDER")),1)]),_:2},1032,["onClick"]))]),default:z(()=>[v(e.DropdownBody,{class:"top-0 min-w-48 z-50",strong:""},{default:z(()=>[v(e.DropdownSection,{class:"[&>ul]:max-h-80"},{default:z(()=>[(p(!0),g(de,null,Ae(a.options,i=>(p(),L(e.DropdownItem,{key:i.id,icon:i.icon,"preserve-open":"",onClick:l=>e.toggleOption(i)},{label:z(()=>[Oe(C(i.name)+" ",1),e.selectedIds.includes(i.id)?(p(),L(e.Icon,{key:0,icon:"i-lucide-check",class:"bg-n-blue-text pointer-events-none"})):O("v-if",!0)]),_:2},1032,["icon","onClick"]))),128))]),_:1})]),_:1})]),_:1})}const O$e=G(v$e,[["render",C$e],["__file","/app/app/javascript/dashboard/components-next/filter/inputs/MultiSelect.vue"]]),N$e={__name:"ConditionRow",props:an({showQueryOperator:{type:Boolean,default:!1},filterTypes:{type:Array,required:!0}},{attributeKey:{type:String,required:!0},attributeKeyModifiers:{},values:{type:[String,Number,Array,Object],required:!0},valuesModifiers:{},filterOperator:{type:String,required:!0},filterOperatorModifiers:{},queryOperator:{type:String,required:!1,default:void 0,validator:t=>["and","or"].includes(t)},queryOperatorModifiers:{}}),emits:an(["remove"],["update:attributeKey","update:values","update:filterOperator","update:queryOperator"]),setup(t,{expose:n,emit:a}){const e=a,{t:s}=Q(),r=P(!1),o=dn(t,"attributeKey"),i=dn(t,"values"),l=dn(t,"filterOperator"),c=dn(t,"queryOperator"),d=R=>t.filterTypes.find(M=>M.attributeKey===R),u=S(()=>d(o.value)),m=(R,M)=>{const w=R.filterOperators.find(D=>D.value===M);return w||R.filterOperators[0]},h=S(()=>m(u.value,l.value)),_=(R,M)=>R.inputOverride??M.inputType,E=S(()=>_(h.value,u.value)),y=S(()=>[{label:s("FILTER.QUERY_DROPDOWN_LABELS.AND"),value:"and",icon:pn("span",{class:"i-lucide-ampersands !text-n-blue-text"})},{label:s("FILTER.QUERY_DROPDOWN_LABELS.OR"),value:"or",icon:pn("span",{class:"i-woot-logic-or !text-n-blue-text"})}]),b=S(()=>[{id:!0,name:s("FILTER.ATTRIBUTE_LABELS.TRUE")},{id:!1,name:s("FILTER.ATTRIBUTE_LABELS.FALSE")}]),A=S(()=>Uv(ha({attributeKey:o.value,filterOperator:l.value,values:i.value}))),T=S(()=>E.value==="date"?"date":E.value==="number"?"number":"text"),I=R=>{const M=d(R),w=m(M,l.value),D=_(w,M);D==="multiSelect"?i.value=[]:["searchSelect","booleanSelect"].includes(D)?i.value={}:i.value="",l.value=w.value};je([o,i,l],()=>{r.value=!1});const N=()=>(r.value=!0,!A.value);n({validate:N});const x={emit:e,t:s,showErrors:r,attributeKey:o,values:i,filterOperator:l,queryOperator:c,getFilterFromFilterTypes:d,currentFilter:u,getOperator:m,currentOperator:h,getInputType:_,inputType:E,queryOperatorOptions:y,booleanOptions:b,validationError:A,inputFieldType:T,resetModelOnAttributeKeyChange:I,validate:N,computed:S,h:pn,watch:je,ref:P,get useI18n(){return Q},Button:Se,Input:sn,FilterSelect:FS,MultiSelect:O$e,SingleSelect:kw,get useSnakeCase(){return ha},get validateSingleFilter(){return Uv}};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}},x$e={class:"list-none"},R$e={key:0,class:"text-sm text-n-ruby-11"};function w$e(t,n,a,e,s,r){return p(),g("li",x$e,[f("div",{class:oe(["flex items-center gap-2 rounded-md",{"animate-wiggle":e.showErrors&&e.validationError}])},[a.showQueryOperator?(p(),L(e.FilterSelect,{key:0,modelValue:e.queryOperator,"onUpdate:modelValue":n[0]||(n[0]=o=>e.queryOperator=o),variant:"faded","hide-icon":"",class:"text-sm",options:e.queryOperatorOptions},null,8,["modelValue","options"])):O("v-if",!0),v(e.FilterSelect,{modelValue:e.attributeKey,"onUpdate:modelValue":[n[1]||(n[1]=o=>e.attributeKey=o),e.resetModelOnAttributeKeyChange],variant:"faded",options:a.filterTypes},null,8,["modelValue","options"]),v(e.FilterSelect,{modelValue:e.filterOperator,"onUpdate:modelValue":n[2]||(n[2]=o=>e.filterOperator=o),variant:"ghost",options:e.currentFilter.filterOperators},null,8,["modelValue","options"]),e.currentOperator.hasInput?(p(),g(de,{key:1},[e.inputType==="multiSelect"?(p(),L(e.MultiSelect,{key:0,modelValue:e.values,"onUpdate:modelValue":n[3]||(n[3]=o=>e.values=o),options:e.currentFilter.options},null,8,["modelValue","options"])):e.inputType==="searchSelect"?(p(),L(e.SingleSelect,{key:1,modelValue:e.values,"onUpdate:modelValue":n[4]||(n[4]=o=>e.values=o),options:e.currentFilter.options},null,8,["modelValue","options"])):e.inputType==="booleanSelect"?(p(),L(e.SingleSelect,{key:2,modelValue:e.values,"onUpdate:modelValue":n[5]||(n[5]=o=>e.values=o),"disable-search":"",options:e.booleanOptions},null,8,["modelValue","options"])):(p(),L(e.Input,{key:3,modelValue:e.values,"onUpdate:modelValue":n[6]||(n[6]=o=>e.values=o),type:e.inputFieldType,class:"[&>input]:h-8 [&>input]:py-1.5 [&>input]:outline-offset-0",placeholder:e.t("FILTER.INPUT_PLACEHOLDER")},null,8,["modelValue","type","placeholder"]))],64)):O("v-if",!0),v(e.Button,{sm:"",solid:"",slate:"",icon:"i-lucide-trash",class:"flex-shrink-0",onClick:n[7]||(n[7]=Ve(o=>e.emit("remove"),["stop"]))})],2),e.showErrors&&e.validationError?(p(),g("span",R$e,C(e.t(`FILTER.ERRORS.${e.validationError}`)),1)):O("v-if",!0)])}const JL=G(N$e,[["render",w$e],["__file","/app/app/javascript/dashboard/components-next/filter/ConditionRow.vue"]]),M$e={__name:"ConversationFilter",props:an({isFolderView:{type:Boolean,default:!1},folderName:{type:String,default:""}},{modelValue:{type:Array,default:[]},modelModifiers:{}}),emits:an(["applyFilter","updateFolder","close"],["update:modelValue"]),setup(t,{expose:n,emit:a}){n();const e=t,s=a,{filterTypes:r}=qC(),o=dn(t,"modelValue"),i=P(e.folderName),l={attributeKey:"status",filterOperator:"equal_to",values:[],queryOperator:"and"},{t:c}=Q(),d=Fe(),u=()=>{o.value=[{...l}]},m=N=>{o.value.length===1?u():o.value.splice(N,1)},h=()=>{o.value.push({...l})},_=xn("conditionsRef"),E=()=>_.value.every(N=>N.validate()),y=()=>{E()&&s("updateFolder",o.value,i.value)};function b(){E()&&(d.dispatch("setConversationFilters",ha(JSON.parse(JSON.stringify(o.value)))),s("applyFilter",o.value),Nt($a.APPLY_FILTER,{appliedFilters:o.value.map(N=>({key:N.attributeKey,operator:N.filterOperator,queryOperator:N.queryOperator}))}))}const A=S(()=>e.isFolderView?c("FILTER.EDIT_CUSTOM_FILTER"):c("FILTER.TITLE"));gr(()=>s("close"));const I={props:e,emit:s,filterTypes:r,filters:o,folderNameLocal:i,DEFAULT_FILTER:l,t:c,store:d,resetFilter:u,removeFilter:m,addFilter:h,conditionsRef:_,isConditionsValid:E,updateSavedCustomViews:y,validateAndSubmit:b,filterModalHeaderTitle:A,outsideClickHandler:[()=>s("close"),{ignore:["#toggleConversationFilterButton"]}],useTemplateRef:xn,onBeforeUnmount:gr,computed:S,ref:P,get useI18n(){return Q},get useTrack(){return Nt},get useStore(){return Fe},get vOnClickOutside(){return Ga},get CONVERSATION_EVENTS(){return $a},get useConversationFilterContext(){return qC},get useSnakeCase(){return ha},Button:Se,Input:sn,ConditionRow:JL};return Object.defineProperty(I,"__isScriptSetup",{enumerable:!1,value:!0}),I}},L$e={class:"z-40 max-w-3xl lg:w-[750px] overflow-visible w-full border border-n-weak bg-n-alpha-3 backdrop-blur-[100px] shadow-lg rounded-xl p-6 grid gap-6"},D$e={class:"text-base font-medium leading-6 text-n-slate-12"},P$e={key:0},k$e={class:"border-b border-n-weak pb-6"},B$e={class:"grid gap-4 list-none"},F$e={class:"flex gap-2 justify-between"},U$e={class:"flex gap-2"};function $$e(t,n,a,e,s,r){return ce((p(),g("div",L$e,[f("h3",D$e,C(e.filterModalHeaderTitle),1),e.props.isFolderView?(p(),g("div",P$e,[f("div",k$e,[v(e.Input,{modelValue:e.folderNameLocal,"onUpdate:modelValue":n[0]||(n[0]=o=>e.folderNameLocal=o),label:e.t("FILTER.FOLDER_LABEL"),placeholder:e.t("FILTER.INPUT_PLACEHOLDER")},null,8,["modelValue","label","placeholder"])])])):O("v-if",!0),f("ul",B$e,[(p(!0),g(de,null,Ae(e.filters,(o,i)=>(p(),g(de,{key:o.id},[i===0?(p(),L(e.ConditionRow,{ref_for:!0,ref:"conditionsRef",key:`filter-${o.attributeKey}-0`,"attribute-key":o.attributeKey,"onUpdate:attributeKey":l=>o.attributeKey=l,"filter-operator":o.filterOperator,"onUpdate:filterOperator":l=>o.filterOperator=l,values:o.values,"onUpdate:values":l=>o.values=l,"filter-types":e.filterTypes,"show-query-operator":!1,onRemove:l=>e.removeFilter(i)},null,8,["attribute-key","onUpdate:attributeKey","filter-operator","onUpdate:filterOperator","values","onUpdate:values","filter-types","onRemove"])):(p(),L(e.ConditionRow,{key:`filter-${o.attributeKey}-${i}`,ref_for:!0,ref:"conditionsRef","attribute-key":o.attributeKey,"onUpdate:attributeKey":l=>o.attributeKey=l,"filter-operator":o.filterOperator,"onUpdate:filterOperator":l=>o.filterOperator=l,"query-operator":e.filters[i-1].queryOperator,"onUpdate:queryOperator":l=>e.filters[i-1].queryOperator=l,values:o.values,"onUpdate:values":l=>o.values=l,"show-query-operator":"","filter-types":e.filterTypes,onRemove:l=>e.removeFilter(i)},null,8,["attribute-key","onUpdate:attributeKey","filter-operator","onUpdate:filterOperator","query-operator","onUpdate:queryOperator","values","onUpdate:values","filter-types","onRemove"]))],64))),128))]),f("div",F$e,[v(e.Button,{sm:"",ghost:"",blue:"",onClick:e.addFilter},{default:z(()=>[Oe(C(t.$t("FILTER.ADD_NEW_FILTER")),1)]),_:1}),f("div",U$e,[v(e.Button,{sm:"",faded:"",slate:"",onClick:e.resetFilter},{default:z(()=>[Oe(C(e.t("FILTER.CLEAR_BUTTON_LABEL")),1)]),_:1}),a.isFolderView?(p(),L(e.Button,{key:0,sm:"",solid:"",blue:"",disabled:!e.folderNameLocal,onClick:e.updateSavedCustomViews},{default:z(()=>[Oe(C(e.t("FILTER.UPDATE_BUTTON_LABEL")),1)]),_:1},8,["disabled"])):(p(),L(e.Button,{key:1,sm:"",solid:"",blue:"",onClick:e.validateAndSubmit},{default:z(()=>[Oe(C(e.t("FILTER.SUBMIT_BUTTON_LABEL")),1)]),_:1}))])])])),[[e.vOnClickOutside,e.outsideClickHandler]])}const G$e=G(M$e,[["render",$$e],["__file","/app/app/javascript/dashboard/components-next/filter/ConversationFilter.vue"]]),V$e={components:{NextButton:Se,NextInput:sn},directives:{onClickOutside:Ga},props:{filterType:{type:Number,default:0},customViewsQuery:{type:Object,default:()=>{}},openLastSavedItem:{type:Function,default:()=>{}}},emits:["close"],setup(){return{v$:rt()}},data(){return{show:!0,name:""}},computed:{isButtonDisabled(){return this.v$.name.$invalid}},validations:{name:{required:Ge,minLength:Rt(1)}},methods:{onClose(){this.$emit("close")},async saveCustomViews(){if(this.v$.$touch(),!this.v$.$invalid){try{await this.$store.dispatch("customViews/create",{name:this.name,filter_type:this.filterType,query:this.customViewsQuery}),this.alertMessage=this.filterType===0?this.$t("FILTER.CUSTOM_VIEWS.ADD.API_FOLDERS.SUCCESS_MESSAGE"):this.$t("FILTER.CUSTOM_VIEWS.ADD.API_SEGMENTS.SUCCESS_MESSAGE"),this.onClose(),Nt(hr.SAVE_FILTER,{type:this.filterType===0?"folder":"segment"})}catch(t){const n=t==null?void 0:t.message;this.alertMessage=n||this.filterType===0?n:this.$t("FILTER.CUSTOM_VIEWS.ADD.API_SEGMENTS.ERROR_MESSAGE")}finally{Z(this.alertMessage)}this.openLastSavedItem()}}}},H$e={class:"z-40 max-w-3xl lg:w-[500px] overflow-visible w-full border border-n-weak bg-n-alpha-3 backdrop-blur-[100px] shadow-lg rounded-xl p-6 grid gap-6"},j$e={class:"text-base font-medium leading-6 text-n-slate-12"},W$e={class:"flex flex-row justify-end w-full gap-2"};function z$e(t,n,a,e,s,r){const o=H("NextInput"),i=H("NextButton"),l=nt("on-click-outside");return ce((p(),g("div",H$e,[f("h3",j$e,C(t.$t("FILTER.CUSTOM_VIEWS.ADD.TITLE")),1),f("form",{class:"w-full grid gap-6",onSubmit:n[1]||(n[1]=Ve((...c)=>r.saveCustomViews&&r.saveCustomViews(...c),["prevent"]))},[v(o,{modelValue:s.name,"onUpdate:modelValue":n[0]||(n[0]=c=>s.name=c),placeholder:t.$t("FILTER.CUSTOM_VIEWS.ADD.PLACEHOLDER"),message:e.v$.name.$error&&t.$t("FILTER.CUSTOM_VIEWS.ADD.ERROR_MESSAGE"),"message-type":e.v$.name.$error&&"error",onBlur:e.v$.name.$touch},null,8,["modelValue","placeholder","message","message-type","onBlur"]),f("div",W$e,[v(i,{faded:"",slate:"",sm:"",onClick:Ve(r.onClose,["prevent"])},{default:z(()=>[Oe(C(t.$t("FILTER.CUSTOM_VIEWS.ADD.CANCEL_BUTTON")),1)]),_:1},8,["onClick"]),v(i,{solid:"",blue:"",sm:"",disabled:r.isButtonDisabled},{default:z(()=>[Oe(C(t.$t("FILTER.CUSTOM_VIEWS.ADD.SAVE_BUTTON")),1)]),_:1},8,["disabled"])])],32)])),[[l,[()=>t.$emit("close"),{ignore:["#saveFilterTeleportTarget"]}]]])}const Y$e=G(V$e,[["render",z$e],["__file","/app/app/javascript/dashboard/components-next/filter/SaveCustomView.vue"]]),K$e={__name:"ChatTypeTabs",props:{items:{type:Array,default:()=>[]},activeTab:{type:String,default:gt.ASSIGNEE_TYPE.ME}},emits:["chatTabChange"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=S(()=>e.items.findIndex(c=>c.key===e.activeTab)),o=c=>{if(c>=0&&c<e.items.length){const d=e.items[c];d.key!==e.activeTab&&s("chatTabChange",d.key)}},i={"Alt+KeyN":{action:()=>{if(e.activeTab===gt.ASSIGNEE_TYPE.ALL)o(0);else{const c=(r.value+1)%e.items.length;o(c)}}}};jn(i);const l={props:e,emit:s,activeTabIndex:r,onTabChange:o,keyboardEvents:i,computed:S,get useKeyboardEvents(){return jn},get wootConstants(){return gt}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}};function X$e(t,n,a,e,s,r){const o=H("woot-tabs-item"),i=H("woot-tabs");return p(),L(i,{index:e.activeTabIndex,class:"w-full px-3 -mt-1 py-0 [&_ul]:p-0",onChange:e.onTabChange},{default:z(()=>[(p(!0),g(de,null,Ae(a.items,(l,c)=>(p(),L(o,{key:l.key,class:"text-sm [&_a]:font-medium",index:c,name:l.name,count:l.count,"is-compact":""},null,8,["index","name","count"]))),128))]),_:1},8,["index"])}const q$e=G(K$e,[["render",X$e],["__file","/app/app/javascript/dashboard/components/widgets/ChatTypeTabs.vue"]]),Z$e=(t,n)=>t&&n?t.created_at>=n.created_at?t:n:t||n,Q$e=(t=[])=>{const n=[];return t.forEach(a=>{a.source_id?n.findIndex(s=>a.source_id===s.source_id)<0&&n.push(a):n.push(a)}),n},ZC=t=>{const n=t.messages[t.messages.length-1],a=t.messages.filter(r=>r.message_type!==2),e=a[a.length-1],s=t.last_non_activity_message;return!e&&!s?n:Z$e(e,s)},J$e=(t,n)=>t.filter(a=>a.created_at*1e3<=n*1e3),e7e=(t,n)=>t.filter(a=>a.created_at*1e3>n*1e3),Gs={IN_PROGRESS:"in-progress",RINGING:"ringing",NO_ANSWER:"no-answer",BUSY:"busy",FAILED:"failed",COMPLETED:"completed",CANCELED:"canceled"},t7e={OUTBOUND:"outbound"};function Xm(t,n){const a=S(()=>{var m;return(m=Sa(t))==null?void 0:m.toString()}),e=S(()=>{var m;return(m=Sa(n))==null?void 0:m.toString()}),s=S(()=>[Gs.NO_ANSWER,Gs.BUSY,Gs.FAILED].includes(a.value)),r=S(()=>[Gs.COMPLETED,Gs.CANCELED].includes(a.value)),o=S(()=>e.value===t7e.OUTBOUND),i=S(()=>{const m=a.value;return m===Gs.IN_PROGRESS?o.value?"CONVERSATION.VOICE_CALL.OUTGOING_CALL":"CONVERSATION.VOICE_CALL.CALL_IN_PROGRESS":m===Gs.RINGING?o.value?"CONVERSATION.VOICE_CALL.OUTGOING_CALL":"CONVERSATION.VOICE_CALL.INCOMING_CALL":m===Gs.NO_ANSWER?"CONVERSATION.VOICE_CALL.MISSED_CALL":s.value?"CONVERSATION.VOICE_CALL.NO_ANSWER":r.value?"CONVERSATION.VOICE_CALL.CALL_ENDED":"CONVERSATION.VOICE_CALL.INCOMING_CALL"}),l=S(()=>{const m=a.value;return m===Gs.RINGING?"CONVERSATION.VOICE_CALL.NOT_ANSWERED_YET":m===Gs.IN_PROGRESS?o.value?"CONVERSATION.VOICE_CALL.THEY_ANSWERED":"CONVERSATION.VOICE_CALL.YOU_ANSWERED":s.value?"CONVERSATION.VOICE_CALL.NO_ANSWER":r.value?"CONVERSATION.VOICE_CALL.CALL_ENDED":"CONVERSATION.VOICE_CALL.NOT_ANSWERED_YET"}),c=S(()=>a.value===Gs.IN_PROGRESS?o.value?"i-ph-phone-outgoing-fill":"i-ph-phone-incoming-fill":s.value?"i-ph-phone-x-fill":o.value?"i-ph-phone-outgoing-fill":"i-ph-phone-incoming-fill"),d=S(()=>a.value===Gs.IN_PROGRESS?"bg-n-teal-9":s.value?"bg-n-ruby-9":r.value?"bg-n-slate-11":"bg-n-teal-9 animate-pulse"),u=S(()=>{const m=a.value;return m===Gs.IN_PROGRESS||m===Gs.RINGING?"text-n-teal-9":s.value?"text-n-ruby-9":r.value?"text-n-slate-11":"text-n-teal-9"});return{status:a,labelKey:i,subtextKey:l,bubbleIconName:c,bubbleIconBg:d,listIconColor:u}}const n7e={name:"MessagePreview",props:{message:{type:Object,required:!0},showMessageType:{type:Boolean,default:!0},defaultEmptyMessage:{type:String,default:""}},setup(){const{getPlainText:t}=ta();return{getPlainText:t}},computed:{messageByAgent(){const{message_type:t}=this.message;return t===oA.OUTGOING},isMessageAnActivity(){const{message_type:t}=this.message;return t===oA.ACTIVITY},isMessagePrivate(){const{private:t}=this.message;return t},parsedLastMessage(){const{content_attributes:t}=this.message,{email:{subject:n}={}}=t||{};return this.getPlainText(n||this.message.content)},lastMessageFileType(){const[{file_type:t}={}]=this.message.attachments;return t},attachmentIcon(){return K3[this.lastMessageFileType]},attachmentMessageContent(){return`CHAT_LIST.ATTACHMENTS.${this.lastMessageFileType}.CONTENT`},isMessageSticker(){return this.message&&this.message.content_type==="sticker"}}},a7e={class:"overflow-hidden text-ellipsis whitespace-nowrap"},s7e={key:1},o7e={key:2},r7e={key:3},i7e={key:4};function l7e(t,n,a,e,s,r){const o=H("fluent-icon");return p(),g("div",a7e,[a.showMessageType?(p(),g(de,{key:0},[r.isMessagePrivate?(p(),L(o,{key:0,size:"16",class:"-mt-0.5 align-middle text-n-slate-11 inline-block",icon:"lock-closed"})):r.messageByAgent?(p(),L(o,{key:1,size:"16",class:"-mt-0.5 align-middle text-n-slate-11 inline-block",icon:"arrow-reply"})):r.isMessageAnActivity?(p(),L(o,{key:2,size:"16",class:"-mt-0.5 align-middle text-n-slate-11 inline-block",icon:"info"})):O("v-if",!0)],64)):O("v-if",!0),a.message.content&&r.isMessageSticker?(p(),g("span",s7e,[v(o,{size:"16",class:"-mt-0.5 align-middle inline-block text-n-slate-11",icon:"image"}),Oe(" "+C(t.$t("CHAT_LIST.ATTACHMENTS.image.CONTENT")),1)])):a.message.content?(p(),g("span",o7e,C(r.parsedLastMessage),1)):a.message.attachments?(p(),g("span",r7e,[r.attachmentIcon&&a.showMessageType?(p(),L(o,{key:0,size:"16",class:"-mt-0.5 align-middle inline-block text-n-slate-11",icon:r.attachmentIcon},null,8,["icon"])):O("v-if",!0),Oe(" "+C(t.$t(`${r.attachmentMessageContent}`)),1)])):(p(),g("span",i7e,C(a.defaultEmptyMessage||t.$t("CHAT_LIST.NO_CONTENT")),1))])}const eD=G(n7e,[["render",l7e],["__file","/app/app/javascript/dashboard/components/widgets/conversation/MessagePreview.vue"]]),c7e={__name:"InboxName",props:{inbox:{type:Object,default:()=>{}}},setup(t,{expose:n}){n();const a={ChannelIcon:hE};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},d7e={class:"flex items-center text-n-slate-11 text-xs min-w-0"},u7e={class:"truncate"};function p7e(t,n,a,e,s,r){return p(),g("div",d7e,[v(e.ChannelIcon,{inbox:a.inbox,class:"size-3 ltr:mr-1 rtl:ml-1 flex-shrink-0"},null,8,["inbox"]),f("span",u7e,C(a.inbox.name),1)])}const f1=G(c7e,[["render",p7e],["__file","/app/app/javascript/dashboard/components/widgets/InboxName.vue"]]),gb=(t,n)=>t.filter(a=>a.availability_status===n).sort((a,e)=>a.name.localeCompare(e.name)),tD=t=>{const n=gb(t,"online"),a=gb(t,"busy"),e=gb(t,"offline");return[...n,...a,...e]},nD=(t,n,a)=>t.map(s=>s.id===n.id?{...s,availability_status:n.accounts.find(r=>r.id===a).availability_status}:s),f7e={__name:"menuItem",props:{option:{type:Object,default:()=>{}},variant:{type:String,default:"default"}},setup(t,{expose:n}){n();const a={Avatar:qt};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},m7e={class:"menu text-n-slate-12 min-h-7 min-w-0",role:"button"},h7e={class:"menu-label truncate min-w-0 flex-1"};function _7e(t,n,a,e,s,r){const o=H("fluent-icon");return p(),g("div",m7e,[a.variant==="icon"&&a.option.icon?(p(),L(o,{key:0,icon:a.option.icon,size:"14",class:"flex-shrink-0"},null,8,["icon"])):O("v-if",!0),a.variant==="label"&&a.option.color?(p(),g("span",{key:1,class:"label-pill flex-shrink-0",style:nn({backgroundColor:a.option.color})},null,4)):O("v-if",!0),a.variant==="agent"?(p(),L(e.Avatar,{key:2,name:a.option.label,src:a.option.thumbnail,status:a.option.status==="online"?a.option.status:null,size:20,class:"flex-shrink-0"},null,8,["name","src","status"])):O("v-if",!0),f("p",h7e,C(a.option.label),1)])}const m1=G(f7e,[["render",_7e],["__scopeId","data-v-182e3cc5"],["__file","/app/app/javascript/dashboard/components/widgets/conversation/contextMenu/menuItem.vue"]]),g7e={__name:"menuItemWithSubmenu",props:{option:{type:Object,default:()=>{}},subMenuAvailable:{type:Boolean,default:!0}},setup(t,{expose:n}){n();const a=xn("menuRef"),{width:e,height:s}=ws(),{bottom:r,right:o}=mr(a),i=S(()=>s.value-r.value<240?"bottom-0":"top-0"),l=S(()=>e.value-o.value<240?"right-full":"left-full"),c=S(()=>[i.value,l.value]),d={menuRef:a,windowWidth:e,windowHeight:s,bottom:r,right:o,verticalPosition:i,horizontalPosition:l,submenuPosition:c,computed:S,useTemplateRef:xn,get useWindowSize(){return ws},get useElementBounding(){return mr}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}},b7e={class:"flex items-center h-4"},v7e={class:"my-0 mx-2 text-xs"};function E7e(t,n,a,e,s,r){const o=H("fluent-icon");return p(),g("div",{ref:"menuRef",class:oe(["text-n-slate-12 menu-with-submenu min-width-calc w-full p-1 flex items-center h-7 rounded-md relative bg-n-alpha-3/50 backdrop-blur-[100px] justify-between hover:bg-n-brand/10 cursor-pointer dark:hover:bg-n-solid-3",a.subMenuAvailable?"":"opacity-50 cursor-not-allowed"])},[f("div",b7e,[v(o,{icon:a.option.icon,size:"14",class:"menu-icon"},null,8,["icon"]),f("p",v7e,C(a.option.label),1)]),v(o,{icon:"chevron-right",size:"12"}),a.subMenuAvailable?(p(),g("div",{key:0,class:oe(["submenu bg-n-alpha-3 backdrop-blur-[100px] p-1 shadow-lg rounded-md absolute hidden max-h-[15rem] overflow-y-auto overflow-x-hidden cursor-pointer",e.submenuPosition])},[qe(t.$slots,"default",{},void 0,!0)],2)):O("v-if",!0)],2)}const S7e=G(g7e,[["render",E7e],["__scopeId","data-v-fa059a8c"],["__file","/app/app/javascript/dashboard/components/widgets/conversation/contextMenu/menuItemWithSubmenu.vue"]]),T7e={components:{Spinner:ls}},A7e={class:"agent-placeholder"};function y7e(t,n,a,e,s,r){const o=H("Spinner");return p(),g("div",A7e,[v(o),f("p",null,C(t.$t("CONVERSATION.CARD_CONTEXT_MENU.AGENTS_LOADING")),1)])}const I7e=G(T7e,[["render",y7e],["__scopeId","data-v-e138f5c6"],["__file","/app/app/javascript/dashboard/components/widgets/conversation/contextMenu/agentLoadingPlaceholder.vue"]]),mi={MARK_AS_READ:"mark-as-read",MARK_AS_UNREAD:"mark-as-unread",PRIORITY:"priority",STATUS:"status",SNOOZE:"snooze",AGENT:"agent",TEAM:"team",LABEL:"label",DELETE:"delete",OPEN_NEW_TAB:"open-new-tab",COPY_LINK:"copy-link"},C7e={components:{MenuItem:m1,MenuItemWithSubmenu:S7e,AgentLoadingPlaceholder:I7e},props:{chatId:{type:Number,default:null},status:{type:String,default:""},hasUnreadMessages:{type:Boolean,default:!1},inboxId:{type:Number,default:null},priority:{type:String,default:null},conversationUrl:{type:String,default:""},allowedOptions:{type:Array,default:()=>[]}},emits:["updateConversation","assignPriority","markAsUnread","markAsRead","assignAgent","assignTeam","assignLabel","deleteConversation","close"],setup(){const{isAdmin:t}=Es();return{isAdmin:t}},data(){return{MENU:mi,STATUS_TYPE:gt.STATUS_TYPE,readOption:{label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.MARK_AS_READ"),icon:"mail"},unreadOption:{label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.MARK_AS_UNREAD"),icon:"mail-unread"},statusMenuConfig:[{key:gt.STATUS_TYPE.RESOLVED,label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.RESOLVED"),icon:"checkmark"},{key:gt.STATUS_TYPE.OPEN,label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.REOPEN"),icon:"arrow-redo"},{key:gt.STATUS_TYPE.PENDING,label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.PENDING"),icon:"book-clock"}],snoozeOption:{key:gt.STATUS_TYPE.SNOOZED,label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.SNOOZE.TITLE"),icon:"snooze"},priorityConfig:{key:mi.PRIORITY,label:this.$t("CONVERSATION.PRIORITY.TITLE"),icon:"warning",options:[{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.NONE"),key:null},{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.URGENT"),key:"urgent"},{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.HIGH"),key:"high"},{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.MEDIUM"),key:"medium"},{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.LOW"),key:"low"}].filter(t=>t.key!==this.priority)},labelMenuConfig:{key:mi.LABEL,icon:"tag",label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.ASSIGN_LABEL")},agentMenuConfig:{key:mi.AGENT,icon:"person-add",label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.ASSIGN_AGENT")},teamMenuConfig:{key:mi.TEAM,icon:"people-team-add",label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.ASSIGN_TEAM")},deleteOption:{key:mi.DELETE,icon:"delete",label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.DELETE")},openInNewTabOption:{key:mi.OPEN_NEW_TAB,icon:"open",label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.OPEN_IN_NEW_TAB")},copyLinkOption:{key:mi.COPY_LINK,icon:"copy",label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.COPY_LINK")}}},computed:{..._t({labels:"labels/getLabels",teams:"teams/getTeams",assignableAgentsUiFlags:"inboxAssignableAgents/getUIFlags",currentUser:"getCurrentUser",currentAccountId:"getCurrentAccountId"}),filteredAgentOnAvailability(){const t=this.$store.getters["inboxAssignableAgents/getAssignableAgents"](this.inboxId),n=nD(t,this.currentUser,this.currentAccountId);return tD(n)},assignableAgents(){return[{confirmed:!0,name:"None",id:null,role:"agent",account_id:0,email:"None"},...this.filteredAgentOnAvailability]},showSnooze(){return this.status===gt.STATUS_TYPE.OPEN}},mounted(){this.$store.dispatch("inboxAssignableAgents/fetch",[this.inboxId])},methods:{isAllowed(t){return this.allowedOptions.length?t.some(n=>this.allowedOptions.includes(n)):!0},toggleStatus(t,n){this.$emit("updateConversation",t,n)},async snoozeConversation(){await this.$store.dispatch("setContextMenuChatId",this.chatId),document.querySelector("ninja-keys").open({parent:"snooze_conversation"})},assignPriority(t){this.$emit("assignPriority",t)},deleteConversation(){this.$emit("deleteConversation",this.chatId)},openInNewTab(){if(!this.conversationUrl)return;const t=`${window.chatwootConfig.hostURL}${this.conversationUrl}`;window.open(t,"_blank","noopener,noreferrer"),this.$emit("close")},async copyConversationLink(){if(this.conversationUrl)try{const t=`${window.chatwootConfig.hostURL}${this.conversationUrl}`;await Ra(t),Z(this.$t("CONVERSATION.CARD_CONTEXT_MENU.COPY_LINK_SUCCESS")),this.$emit("close")}catch{}},show(t){return this.status!==t},generateMenuLabelConfig(t,n="text"){return{key:t.id,...n==="icon"&&{icon:t.icon},...n==="label"&&{color:t.color},...n==="agent"&&{thumbnail:t.thumbnail},...n==="agent"&&{status:t.availability_status},...n==="text"&&{label:t.label},...n==="label"&&{label:t.title},...n==="agent"&&{label:t.name},...n==="team"&&{label:t.name}}}}},O7e={class:"p-1 rounded-md shadow-xl bg-n-alpha-3/50 backdrop-blur-[100px] outline-1 outline outline-n-weak/50"};function N7e(t,n,a,e,s,r){const o=H("MenuItem"),i=H("MenuItemWithSubmenu"),l=H("AgentLoadingPlaceholder");return p(),g("div",O7e,[r.isAllowed([s.MENU.MARK_AS_READ,s.MENU.MARK_AS_UNREAD])?(p(),g(de,{key:0},[a.hasUnreadMessages?(p(),L(o,{key:1,option:s.readOption,variant:"icon",onClick:n[1]||(n[1]=Ve(c=>t.$emit("markAsRead"),["stop"]))},null,8,["option"])):(p(),L(o,{key:0,option:s.unreadOption,variant:"icon",onClick:n[0]||(n[0]=Ve(c=>t.$emit("markAsUnread"),["stop"]))},null,8,["option"])),n[3]||(n[3]=f("hr",{class:"m-1 rounded border-b border-n-weak dark:border-n-weak"},null,-1))],64)):O("v-if",!0),r.isAllowed([s.MENU.STATUS,s.MENU.SNOOZE])?(p(),g(de,{key:1},[(p(!0),g(de,null,Ae(s.statusMenuConfig,c=>(p(),g(de,null,[r.show(c.key)&&r.isAllowed([s.MENU.STATUS])?(p(),L(o,{key:c.key,option:c,variant:"icon",onClick:Ve(d=>r.toggleStatus(c.key,null),["stop"])},null,8,["option","onClick"])):O("v-if",!0)],64))),256)),r.showSnooze&&r.isAllowed([s.MENU.SNOOZE])?(p(),L(o,{key:0,option:s.snoozeOption,variant:"icon",onClick:n[2]||(n[2]=Ve(c=>r.snoozeConversation(),["stop"]))},null,8,["option"])):O("v-if",!0),n[4]||(n[4]=f("hr",{class:"m-1 rounded border-b border-n-weak dark:border-n-weak"},null,-1))],64)):O("v-if",!0),r.isAllowed([s.MENU.PRIORITY,s.MENU.LABEL,s.MENU.AGENT,s.MENU.TEAM])?(p(),g(de,{key:2},[r.isAllowed([s.MENU.PRIORITY])?(p(),L(i,{key:0,option:s.priorityConfig},{default:z(()=>[(p(!0),g(de,null,Ae(s.priorityConfig.options,(c,d)=>(p(),L(o,{key:d,option:c,onClick:Ve(u=>r.assignPriority(c.key),["stop"])},null,8,["option","onClick"]))),128))]),_:1},8,["option"])):O("v-if",!0),r.isAllowed([s.MENU.LABEL])?(p(),L(i,{key:1,option:s.labelMenuConfig,"sub-menu-available":!!t.labels.length},{default:z(()=>[(p(!0),g(de,null,Ae(t.labels,c=>(p(),L(o,{key:c.id,option:r.generateMenuLabelConfig(c,"label"),variant:"label",onClick:Ve(d=>t.$emit("assignLabel",c),["stop"])},null,8,["option","onClick"]))),128))]),_:1},8,["option","sub-menu-available"])):O("v-if",!0),r.isAllowed([s.MENU.AGENT])?(p(),L(i,{key:2,option:s.agentMenuConfig,"sub-menu-available":!!r.assignableAgents.length},{default:z(()=>[t.assignableAgentsUiFlags.isFetching?(p(),L(l,{key:0})):(p(!0),g(de,{key:1},Ae(r.assignableAgents,c=>(p(),L(o,{key:c.id,option:r.generateMenuLabelConfig(c,"agent"),variant:"agent",onClick:Ve(d=>t.$emit("assignAgent",c),["stop"])},null,8,["option","onClick"]))),128))]),_:1},8,["option","sub-menu-available"])):O("v-if",!0),r.isAllowed([s.MENU.TEAM])?(p(),L(i,{key:3,option:s.teamMenuConfig,"sub-menu-available":!!t.teams.length},{default:z(()=>[(p(!0),g(de,null,Ae(t.teams,c=>(p(),L(o,{key:c.id,option:r.generateMenuLabelConfig(c,"team"),onClick:Ve(d=>t.$emit("assignTeam",c),["stop"])},null,8,["option","onClick"]))),128))]),_:1},8,["option","sub-menu-available"])):O("v-if",!0),n[5]||(n[5]=f("hr",{class:"m-1 rounded border-b border-n-weak dark:border-n-weak"},null,-1))],64)):O("v-if",!0),r.isAllowed([s.MENU.OPEN_NEW_TAB,s.MENU.COPY_LINK])?(p(),g(de,{key:3},[r.isAllowed([s.MENU.OPEN_NEW_TAB])?(p(),L(o,{key:0,option:s.openInNewTabOption,variant:"icon",onClick:Ve(r.openInNewTab,["stop"])},null,8,["option","onClick"])):O("v-if",!0),r.isAllowed([s.MENU.COPY_LINK])?(p(),L(o,{key:1,option:s.copyLinkOption,variant:"icon",onClick:Ve(r.copyConversationLink,["stop"])},null,8,["option","onClick"])):O("v-if",!0)],64)):O("v-if",!0),e.isAdmin&&r.isAllowed([s.MENU.DELETE])?(p(),g(de,{key:4},[n[6]||(n[6]=f("hr",{class:"m-1 rounded border-b border-n-weak dark:border-n-weak"},null,-1)),v(o,{option:s.deleteOption,variant:"icon",onClick:Ve(r.deleteConversation,["stop"])},null,8,["option","onClick"])],64)):O("v-if",!0)])}const x7e=G(C7e,[["render",N7e],["__file","/app/app/javascript/dashboard/components/widgets/conversation/contextMenu/Index.vue"]]),aD=6e4,lE=aD*60,sf=lE*24,R7e={name:"TimeAgo",props:{isAutoRefreshEnabled:{type:Boolean,default:!0},lastActivityTimestamp:{type:[String,Date,Number],default:""},createdAtTimestamp:{type:[String,Date,Number],default:""}},data(){return{lastActivityAtTimeAgo:kn(this.lastActivityTimestamp),createdAtTimeAgo:kn(this.createdAtTimestamp),timer:null}},computed:{lastActivityTime(){return Rl(this.lastActivityAtTimeAgo)},createdAtTime(){return Rl(this.createdAtTimeAgo)},createdAt(){return Date.now()-this.createdAtTimestamp*1e3>sf*30?`${this.$t("CHAT_LIST.CHAT_TIME_STAMP.CREATED.OLDEST")} ${XT(this.createdAtTimestamp)}`:`${this.$t("CHAT_LIST.CHAT_TIME_STAMP.CREATED.LATEST")} ${this.createdAtTimeAgo}`},lastActivity(){return Date.now()-this.lastActivityTimestamp*1e3>sf*30?`${this.$t("CHAT_LIST.CHAT_TIME_STAMP.LAST_ACTIVITY.NOT_ACTIVE")} ${XT(this.lastActivityTimestamp)}`:`${this.$t("CHAT_LIST.CHAT_TIME_STAMP.LAST_ACTIVITY.ACTIVE")} ${this.lastActivityAtTimeAgo}`},tooltipText(){return`${this.createdAt}
              ${this.lastActivity}`}},watch:{lastActivityTimestamp(){this.lastActivityAtTimeAgo=kn(this.lastActivityTimestamp)},createdAtTimestamp(){this.createdAtTimeAgo=kn(this.createdAtTimestamp)}},mounted(){this.isAutoRefreshEnabled&&this.createTimer()},unmounted(){clearTimeout(this.timer)},methods:{createTimer(){this.timer=setTimeout(()=>{this.lastActivityAtTimeAgo=kn(this.lastActivityTimestamp),this.createdAtTimeAgo=kn(this.createdAtTimestamp),this.createTimer()},this.refreshTime())},refreshTime(){const t=Date.now()-this.lastActivityTimestamp*1e3;return t>sf?sf:t>lE?lE:aD}}},w7e={class:"ml-auto leading-4 text-xxs text-n-slate-10 hover:text-n-slate-11"};function M7e(t,n,a,e,s,r){const o=nt("tooltip");return ce((p(),g("div",w7e,[f("span",null,C(`${r.createdAtTime}  ${r.lastActivityTime}`),1)])),[[o,{content:r.tooltipText,delay:{show:1e3,hide:0},hideOnClick:!0},void 0,{top:!0}]])}const L7e=G(R7e,[["render",M7e],["__file","/app/app/javascript/dashboard/components/ui/TimeAgo.vue"]]),D7e={name:"PriorityMark",props:{priority:{type:String,default:"",validate:t=>[...Object.values(Ao),""].includes(t)}},data(){return{CONVERSATION_PRIORITY:Ao}},computed:{tooltipText(){return this.$t(`CONVERSATION.PRIORITY.OPTIONS.${this.priority.toUpperCase()}`)},isUrgent(){return this.priority===Ao.URGENT}}};function P7e(t,n,a,e,s,r){const o=H("fluent-icon"),i=nt("tooltip");return a.priority?ce((p(),g("span",{key:0,class:oe(["shrink-0 rounded-sm inline-flex items-center justify-center w-3.5 h-3.5",{"bg-n-ruby-4 text-n-ruby-10":r.isUrgent,"bg-n-slate-4 text-n-slate-11":!r.isUrgent}])},[v(o,{icon:`priority-${a.priority.toLowerCase()}`,size:r.isUrgent?12:14,class:"flex-shrink-0","view-box":"0 0 14 14"},null,8,["icon","size"])],2)),[[i,{content:r.tooltipText,delay:{show:1500,hide:0},hideOnClick:!0}]]):O("v-if",!0)}const k7e=G(D7e,[["render",P7e],["__file","/app/app/javascript/dashboard/components/widgets/conversation/PriorityMark.vue"]]),QC=6e4,B7e={__name:"SLACardLabel",props:{chat:{type:Object,default:()=>({})},showExtendedInfo:{type:Boolean,default:!1},parentWidth:{type:Number,default:1e3}},setup(t,{expose:n}){n();const a=t,{t:e}=Q(),s=P(null),r=P({threshold:null,isSlaMissed:!1,type:null,icon:null}),o=S(()=>{var A;return(A=a.chat)==null?void 0:A.applied_sla}),i=S(()=>{var A;return(A=a.chat)==null?void 0:A.sla_events}),l=S(()=>{var A;return(A=r.value)==null?void 0:A.threshold}),c=S(()=>{var A;return(A=r.value)==null?void 0:A.isSlaMissed}),d=S(()=>c.value?"text-n-ruby-11":"text-n-amber-11"),u=S(()=>{var I,N;const A=(N=(I=r.value)==null?void 0:I.type)==null?void 0:N.toUpperCase(),T=c.value?"MISSED":"DUE";return e(`CONVERSATION.HEADER.SLA_STATUS.${A}`,{status:e(`CONVERSATION.HEADER.SLA_STATUS.${T}`)})}),m=S(()=>{var A;return a.showExtendedInfo&&((A=i.value)==null?void 0:A.length)>0}),h=S(()=>a.showExtendedInfo?"h-[26px] rounded-lg bg-n-alpha-1":"rounded h-5  border border-n-strong"),_=()=>{r.value=Vf({appliedSla:o.value,chat:a.chat})},E=()=>{s.value=setTimeout(()=>{_(),E()},QC)};je(()=>a.chat,()=>{_()});const y=S(()=>a.showExtendedInfo?"ltr:pr-1.5 rtl:pl-1.5 ltr:border-r rtl:border-l border-n-strong":"");Pe(()=>{_(),E()}),is(()=>{s.value&&clearTimeout(s.value)});const b={props:a,REFRESH_INTERVAL:QC,t:e,timer:s,slaStatus:r,appliedSLA:o,slaEvents:i,hasSlaThreshold:l,isSlaMissed:c,slaTextStyles:d,slaStatusText:u,showSlaPopoverCard:m,groupClass:h,updateSlaStatus:_,createTimer:E,slaPopoverClass:y,ref:P,computed:S,onMounted:Pe,onUnmounted:is,watch:je,get useI18n(){return Q},get evaluateSLAStatus(){return Vf},SLAPopoverCard:LL};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}};function F7e(t,n,a,e,s,r){const o=H("fluent-icon");return e.hasSlaThreshold?(p(),g("div",{key:0,class:oe(["relative flex items-center cursor-pointer min-w-fit group",e.groupClass])},[f("div",{class:oe(["flex items-center w-full truncate px-1.5",a.showExtendedInfo?"":"gap-1"])},[f("div",{class:oe(["flex items-center gap-1",e.slaPopoverClass])},[v(o,{size:"12",icon:e.slaStatus.icon,type:"outline","icon-lib":e.isSlaMissed?"lucide":"fluent",class:oe(["flex-shrink-0",e.slaTextStyles])},null,8,["icon","icon-lib","class"]),a.showExtendedInfo&&a.parentWidth>650?(p(),g("span",{key:0,class:oe(["text-xs font-medium",e.slaTextStyles])},C(e.slaStatusText),3)):O("v-if",!0)],2),f("span",{class:oe(["text-xs font-medium",[e.slaTextStyles,a.showExtendedInfo&&"ltr:pl-1.5 rtl:pr-1.5"]])},C(e.slaStatus.threshold),3)],2),e.showSlaPopoverCard?(p(),L(e.SLAPopoverCard,{key:0,"sla-missed-events":e.slaEvents,class:"start-0 xl:start-auto xl:end-0 top-7 hidden group-hover:flex"},null,8,["sla-missed-events"])):O("v-if",!0)],2)):O("v-if",!0)}const sD=G(B7e,[["render",F7e],["__file","/app/app/javascript/dashboard/components/widgets/conversation/components/SLACardLabel.vue"]]),U7e={__name:"ContextMenu",props:{x:{type:Number,default:0},y:{type:Number,default:0}},emits:["close"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=so("contextMenuElementTarget",null),o=xn("menuRef"),i=S(()=>{var b;return r!=null&&r.value?(b=r.value)==null?void 0:b.$el:null}),l=ST(i),{width:c,height:d}=ws(),{width:u,height:m}=mr(o),h=(b,A,T,I,N,x)=>{let M=b,w=A;const D=M+T>N-16,B=w+I>x-16;return D&&(M=N-T-16),B&&(w=x-I-16),{left:Math.max(16,M),top:Math.max(16,w)}},_=S(()=>{if(!o.value)return{top:`${e.y}px`,left:`${e.x}px`};const{left:b,top:A}=h(e.x,e.y,u.value,m.value,c.value,d.value);return{top:`${A}px`,left:`${b}px`}});Pe(()=>{l.value=!0,At(()=>{var b;return(b=o.value)==null?void 0:b.focus()})});const E=()=>{l.value=!1,s("close")};is(()=>{l.value=!1});const y={props:e,emit:s,elementToLock:r,menuRef:o,scrollLockElement:i,isLocked:l,windowWidth:c,windowHeight:d,menuWidth:u,menuHeight:m,calculatePosition:h,position:_,handleClose:E,computed:S,onMounted:Pe,nextTick:At,onUnmounted:is,useTemplateRef:xn,inject:so,get useWindowSize(){return ws},get useElementBounding(){return mr},get useScrollLock(){return ST},TeleportWithDirection:yE};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}};function $7e(t,n,a,e,s,r){return p(),L(e.TeleportWithDirection,{to:"body"},{default:z(()=>[f("div",{ref:"menuRef",class:"fixed outline-none z-[9999] cursor-pointer",style:nn(e.position),tabindex:"0",onBlur:e.handleClose},[qe(t.$slots,"default")],36)]),_:3})}const h1=G(U7e,[["render",$7e],["__file","/app/app/javascript/dashboard/components/ui/ContextMenu.vue"]]),G7e={__name:"ConversationCard",props:{activeLabel:{type:String,default:""},chat:{type:Object,default:()=>({})},hideInboxName:{type:Boolean,default:!1},hideThumbnail:{type:Boolean,default:!1},teamId:{type:[String,Number],default:0},foldersId:{type:[String,Number],default:0},showAssignee:{type:Boolean,default:!1},conversationType:{type:String,default:""},selected:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},enableContextMenu:{type:Boolean,default:!1},allowedContextMenuOptions:{type:Array,default:()=>[]}},emits:["contextMenuToggle","assignAgent","assignLabel","assignTeam","markAsUnread","markAsRead","assignPriority","updateConversationStatus","deleteConversation","selectConversation","deSelectConversation"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=ft(),o=Fe(),i=P(!1),l=P(!1),c=P({x:null,y:null}),d=le("getSelectedChat"),u=le("inboxes/getInboxes"),m=le("getSelectedInbox"),h=le("getCurrentAccountId"),_=S(()=>e.chat.meta||{}),E=S(()=>_.value.assignee||{}),y=S(()=>{var Le;return(Le=_.value.sender)==null?void 0:Le.id}),b=S(()=>y.value?o.getters["contacts/getContact"](y.value):{}),A=S(()=>d.value.id===e.chat.id),T=S(()=>e.chat.unread_count),I=S(()=>T.value>0),N=S(()=>!m.value),x=S(()=>ZC(e.chat)),R=S(()=>{var Le;return(Le=e.chat.additional_attributes)==null?void 0:Le.call_status}),M=S(()=>{var Le;return(Le=e.chat.additional_attributes)==null?void 0:Le.call_direction}),{labelKey:w,listIconColor:D}=Xm(R,M),B=S(()=>e.chat.inbox_id),k=S(()=>B.value?o.getters["inboxes/getInbox"](B.value):{}),V=S(()=>!e.hideInboxName&&N.value&&u.value.length>1),F=S(()=>V.value||e.showAssignee&&E.value.name||e.chat.priority),$=S(()=>{var Le;return(Le=e.chat)==null?void 0:Le.sla_policy_id}),Y=S(()=>{var Le;return((Le=e.chat.labels)==null?void 0:Le.length)>0||$.value}),j=S(()=>[I.value?"font-medium text-n-slate-12":"text-n-slate-11",!e.compact&&I.value?"ltr:pr-4 rtl:pl-4":"",e.compact&&I.value?"ltr:pr-6 rtl:pl-6":""]),U=S(()=>vt(Cu({accountId:h.value,activeInbox:m.value,id:e.chat.id,label:e.activeLabel,teamId:e.teamId,conversationType:e.conversationType,foldersId:e.foldersId}))),J=Le=>{const Xe=U.value;if(Xe){if(Le.metaKey||Le.ctrlKey){Le.preventDefault(),window.open(`${window.chatwootConfig.hostURL}${Xe}`,"_blank","noopener,noreferrer");return}A.value||r.push({path:Xe})}},te=()=>{i.value=!e.hideThumbnail},q=()=>{i.value=!1},K=Le=>{s(Le?"selectConversation":"deSelectConversation",e.chat.id,k.value.id)},W=Le=>{e.enableContextMenu&&(Le.preventDefault(),s("contextMenuToggle",!0),c.value.x=Le.pageX||Le.clientX,c.value.y=Le.pageY||Le.clientY,l.value=!0)},ee=()=>{s("contextMenuToggle",!1),l.value=!1,c.value.x=null,c.value.y=null},Re={props:e,emit:s,router:r,store:o,hovered:i,showContextMenu:l,contextMenu:c,currentChat:d,inboxesList:u,activeInbox:m,accountId:h,chatMetadata:_,assignee:E,senderId:y,currentContact:b,isActiveChat:A,unreadCount:T,hasUnread:I,isInboxNameVisible:N,lastMessageInChat:x,callStatus:R,callDirection:M,voiceLabelKey:w,voiceIconColor:D,inboxId:B,inbox:k,showInboxName:V,showMetaSection:F,hasSlaPolicyId:$,showLabelsSection:Y,messagePreviewClass:j,conversationPath:U,onCardClick:J,onThumbnailHover:te,onThumbnailLeave:q,onSelectConversation:K,openContextMenu:W,closeContextMenu:ee,onUpdateConversation:(Le,Xe)=>{ee(),s("updateConversationStatus",e.chat.id,Le,Xe)},onAssignAgent:Le=>{s("assignAgent",Le,[e.chat.id]),ee()},onAssignLabel:Le=>{s("assignLabel",[Le.title],[e.chat.id]),ee()},onAssignTeam:Le=>{s("assignTeam",Le,e.chat.id),ee()},markAsUnread:()=>{s("markAsUnread",e.chat.id),ee()},markAsRead:()=>{s("markAsRead",e.chat.id),ee()},assignPriority:Le=>{s("assignPriority",Le,e.chat.id),ee()},deleteConversation:()=>{s("deleteConversation",e.chat.id),ee()},computed:S,ref:P,get useRouter(){return ft},get useStore(){return Fe},get useMapGetter(){return le},get getLastMessage(){return ZC},get useVoiceCallStatus(){return Xm},get frontendURL(){return vt},get conversationUrl(){return Cu},Avatar:qt,MessagePreview:eD,InboxName:f1,ConversationContextMenu:x7e,TimeAgo:L7e,CardLabels:ML,PriorityMark:k7e,SLACardLabel:sD,ContextMenu:h1};return Object.defineProperty(Re,"__isScriptSetup",{enumerable:!1,value:!0}),Re}},V7e=["value","checked"],H7e={class:"px-0 py-3 border-b group-hover:border-transparent flex-1 border-n-slate-3 min-w-0"},j7e={key:0,class:"text-n-slate-11 text-xs font-medium leading-3 py-0.5 px-0 inline-flex items-center truncate"},W7e={class:"mx-1"},z7e={class:"mx-0.5"},Y7e={class:"ml-auto font-normal leading-4 text-xxs"};function K7e(t,n,a,e,s,r){const o=H("fluent-icon");return p(),g("div",{class:oe(["relative flex items-start flex-grow-0 flex-shrink-0 w-auto max-w-full py-0 border-t-0 border-b-0 border-l-0 border-r-0 border-transparent border-solid cursor-pointer conversation hover:bg-n-alpha-1 dark:hover:bg-n-alpha-3 group",{"active animate-card-select bg-n-alpha-1 dark:bg-n-alpha-3 border-n-weak":e.isActiveChat,"bg-n-slate-2 dark:bg-n-slate-3":a.selected,"px-0":a.compact,"px-3":!a.compact}]),onClick:e.onCardClick,onContextmenu:n[2]||(n[2]=i=>e.openContextMenu(i))},[f("div",{class:"relative",onMouseenter:e.onThumbnailHover,onMouseleave:e.onThumbnailLeave},[a.hideThumbnail?O("v-if",!0):(p(),L(e.Avatar,{key:0,name:e.currentContact.name,src:e.currentContact.thumbnail,size:32,status:e.currentContact.availability_status,class:oe(e.showInboxName?"mt-8":"mt-4"),"hide-offline-status":"","rounded-full":""},{overlay:z(({size:i})=>[e.hovered||a.selected?(p(),g("label",{key:0,class:"flex items-center justify-center rounded-full cursor-pointer absolute inset-0 z-10 backdrop-blur-[2px]",style:nn({width:`${i}px`,height:`${i}px`}),onClick:n[1]||(n[1]=Ve(()=>{},["stop"]))},[f("input",{value:a.selected,checked:a.selected,class:"!m-0 cursor-pointer",type:"checkbox",onChange:n[0]||(n[0]=l=>e.onSelectConversation(l.target.checked))},null,40,V7e)],4)):O("v-if",!0)]),_:1},8,["name","src","status","class"]))],32),f("div",H7e,[e.showMetaSection?(p(),g("div",{key:0,class:oe(["flex items-center min-w-0 gap-1",{"ltr:ml-2 rtl:mr-2":!a.compact,"mx-2":a.compact}])},[e.showInboxName?(p(),L(e.InboxName,{key:0,inbox:e.inbox,class:"flex-1 min-w-0"},null,8,["inbox"])):O("v-if",!0),f("div",{class:oe(["flex items-center gap-2 flex-shrink-0",{"flex-1 justify-between":!e.showInboxName}])},[a.showAssignee&&e.assignee.name?(p(),g("span",j7e,[v(o,{icon:"person",size:"12",class:"text-n-slate-11"}),Oe(" "+C(e.assignee.name),1)])):O("v-if",!0),v(e.PriorityMark,{priority:a.chat.priority,class:"flex-shrink-0"},null,8,["priority"])],2)],2)):O("v-if",!0),f("h4",{class:oe(["conversation--user text-sm my-0 mx-2 capitalize pt-0.5 text-ellipsis overflow-hidden whitespace-nowrap flex-1 min-w-0 ltr:pr-16 rtl:pl-16 text-n-slate-12",e.hasUnread?"font-semibold":"font-medium"])},C(e.currentContact.name),3),e.callStatus?(p(),g("div",{key:"voice-status-row",class:oe(["my-0 mx-2 leading-6 h-6 flex-1 min-w-0 text-sm overflow-hidden text-ellipsis whitespace-nowrap",e.messagePreviewClass])},[f("span",{class:oe(["inline-block -mt-0.5 align-middle text-[16px] i-ph-phone-incoming",[e.voiceIconColor]])},null,2),f("span",W7e,C(t.$t(e.voiceLabelKey)),1)],2)):e.lastMessageInChat?(p(),L(e.MessagePreview,{key:"message-preview",message:e.lastMessageInChat,class:oe(["my-0 mx-2 leading-6 h-6 flex-1 min-w-0 text-sm",e.messagePreviewClass])},null,8,["message","class"])):(p(),g("p",{key:"no-messages",class:oe(["text-n-slate-11 text-sm my-0 mx-2 leading-6 h-6 flex-1 min-w-0 overflow-hidden text-ellipsis whitespace-nowrap",e.messagePreviewClass])},[v(o,{size:"16",class:"-mt-0.5 align-middle inline-block text-n-slate-10",icon:"info"}),f("span",z7e,C(t.$t("CHAT_LIST.NO_MESSAGES")),1)],2)),f("div",{class:oe(["absolute flex flex-col ltr:right-3 rtl:left-3",e.showMetaSection?"top-8":"top-4"])},[f("span",Y7e,[v(e.TimeAgo,{"last-activity-timestamp":a.chat.timestamp,"created-at-timestamp":a.chat.created_at},null,8,["last-activity-timestamp","created-at-timestamp"])]),f("span",{class:oe(["shadow-lg rounded-full text-xxs font-semibold h-4 leading-4 ltr:ml-auto rtl:mr-auto mt-1 min-w-[1rem] px-1 py-0 text-center text-white bg-n-teal-9",e.hasUnread?"block":"hidden"])},C(e.unreadCount>9?"9+":e.unreadCount),3)],2),e.showLabelsSection?(p(),L(e.CardLabels,{key:4,"conversation-labels":a.chat.labels,class:"mt-0.5 mx-2 mb-0"},Ro({_:2},[e.hasSlaPolicyId?{name:"before",fn:z(()=>[v(e.SLACardLabel,{chat:a.chat,class:"ltr:mr-1 rtl:ml-1"},null,8,["chat"])]),key:"0"}:void 0]),1032,["conversation-labels"])):O("v-if",!0)]),e.showContextMenu?(p(),L(e.ContextMenu,{key:0,x:e.contextMenu.x,y:e.contextMenu.y,onClose:e.closeContextMenu},{default:z(()=>[v(e.ConversationContextMenu,{status:a.chat.status,"inbox-id":e.inbox.id,priority:a.chat.priority,"chat-id":a.chat.id,"has-unread-messages":e.hasUnread,"conversation-url":e.conversationPath,"allowed-options":a.allowedContextMenuOptions,onUpdateConversation:e.onUpdateConversation,onAssignAgent:e.onAssignAgent,onAssignLabel:e.onAssignLabel,onAssignTeam:e.onAssignTeam,onMarkAsUnread:e.markAsUnread,onMarkAsRead:e.markAsRead,onAssignPriority:e.assignPriority,onDeleteConversation:e.deleteConversation,onClose:e.closeContextMenu},null,8,["status","inbox-id","priority","chat-id","has-unread-messages","conversation-url","allowed-options"])]),_:1},8,["x","y"])):O("v-if",!0)],34)}const oD=G(G7e,[["render",K7e],["__file","/app/app/javascript/dashboard/components/widgets/conversation/ConversationCard.vue"]]),X7e={components:{ConversationCard:oD},inject:["selectConversation","deSelectConversation","assignAgent","assignTeam","assignLabels","updateConversationStatus","toggleContextMenu","markAsUnread","markAsRead","assignPriority","isConversationSelected","deleteConversation"],props:{source:{type:Object,required:!0},teamId:{type:[String,Number],default:0},label:{type:String,default:""},conversationType:{type:String,default:""},foldersId:{type:[String,Number],default:0},showAssignee:{type:Boolean,default:!1}}};function q7e(t,n,a,e,s,r){const o=H("ConversationCard");return p(),L(o,{key:a.source.id,"active-label":a.label,"team-id":a.teamId,"folders-id":a.foldersId,chat:a.source,"conversation-type":a.conversationType,selected:r.isConversationSelected(a.source.id),"show-assignee":a.showAssignee,"enable-context-menu":"",onSelectConversation:r.selectConversation,onDeSelectConversation:r.deSelectConversation,onAssignAgent:r.assignAgent,onAssignTeam:r.assignTeam,onAssignLabel:r.assignLabels,onUpdateConversationStatus:r.updateConversationStatus,onContextMenuToggle:r.toggleContextMenu,onMarkAsUnread:r.markAsUnread,onMarkAsRead:r.markAsRead,onAssignPriority:r.assignPriority,onDeleteConversation:r.deleteConversation},null,8,["active-label","team-id","folders-id","chat","conversation-type","selected","show-assignee","onSelectConversation","onDeSelectConversation","onAssignAgent","onAssignTeam","onAssignLabel","onUpdateConversationStatus","onContextMenuToggle","onMarkAsUnread","onMarkAsRead","onAssignPriority","onDeleteConversation"])}const Z7e=G(X7e,[["render",q7e],["__file","/app/app/javascript/dashboard/components/ConversationItem.vue"]]),Q7e={props:{show:{type:Boolean,default:!1},activeCustomView:{type:Object,default:()=>{}},customViewsId:{type:[String,Number],default:0},activeFilterType:{type:Number,default:0},openLastItemAfterDelete:{type:Function,default:()=>{}}},emits:["close","update:show"],computed:{localShow:{get(){return this.show},set(t){this.$emit("update:show",t)}},activeCustomViews(){return this.activeFilterType===0?"conversation":this.activeFilterType===1?"contact":""},deleteMessage(){return` ${this.activeCustomView&&this.activeCustomView.name}?`},deleteConfirmText(){return`${this.$t("FILTER.CUSTOM_VIEWS.DELETE.MODAL.CONFIRM.YES")}`},deleteRejectText(){return`${this.$t("FILTER.CUSTOM_VIEWS.DELETE.MODAL.CONFIRM.NO")}`},isFolderSection(){return this.activeFilterType===0&&this.$route.name!=="home"},isSegmentSection(){return this.activeFilterType===1&&this.$route.name!=="contacts_dashboard"}},methods:{async deleteSavedCustomViews(){var t;try{const n=Number(this.customViewsId),a=this.activeCustomViews;await this.$store.dispatch("customViews/delete",{id:n,filterType:a}),this.closeDeletePopup(),Z(this.activeFilterType===0?this.$t("FILTER.CUSTOM_VIEWS.DELETE.API_FOLDERS.SUCCESS_MESSAGE"):this.$t("FILTER.CUSTOM_VIEWS.DELETE.API_SEGMENTS.SUCCESS_MESSAGE")),Nt(hr.DELETE_FILTER,{type:this.filterType===0?"folder":"segment"})}catch(n){const a=(t=n==null?void 0:n.response)!=null&&t.message||this.activeFilterType===0?this.$t("FILTER.CUSTOM_VIEWS.DELETE.API_FOLDERS.SUCCESS_MESSAGE"):this.$t("FILTER.CUSTOM_VIEWS.DELETE.API_SEGMENTS.SUCCESS_MESSAGE");Z(a)}this.openLastItemAfterDelete()},closeDeletePopup(){this.$emit("close")}}};function J7e(t,n,a,e,s,r){const o=H("woot-delete-modal");return p(),g("div",null,[r.localShow?(p(),L(o,{key:0,show:r.localShow,"onUpdate:show":n[0]||(n[0]=i=>r.localShow=i),"on-close":r.closeDeletePopup,"on-confirm":r.deleteSavedCustomViews,title:t.$t("FILTER.CUSTOM_VIEWS.DELETE.MODAL.CONFIRM.TITLE"),message:t.$t("FILTER.CUSTOM_VIEWS.DELETE.MODAL.CONFIRM.MESSAGE"),"message-value":r.deleteMessage,"confirm-text":r.deleteConfirmText,"reject-text":r.deleteRejectText},null,8,["show","on-close","on-confirm","title","message","message-value","confirm-text","reject-text"])):O("v-if",!0)])}const eGe=G(Q7e,[["render",J7e],["__file","/app/app/javascript/dashboard/routes/dashboard/customviews/DeleteCustomViews.vue"]]),of=gt.SNOOZE_OPTIONS,tGe=t=>{const n=$x(U$(t,1));return Gx(n)?n:Bu(n,{days:(8-n.getDay())%7})},nGe=t=>{const n=Ur(Bu(t,{months:1}));return Gx(n)?n:Bu(n,{days:(8-n.getDay())%7})},aGe=t=>Bu(t,{days:1}),bb=t=>u7(d7(c7(t,9),0),0),qm=(t,n=new Date)=>{let a=null;return t===of.AN_HOUR_FROM_NOW?a=Bu(n,{hours:1}):t===of.UNTIL_TOMORROW?a=bb(aGe(n)):t===of.UNTIL_NEXT_WEEK?a=bb(tGe(n)):t===of.UNTIL_NEXT_MONTH&&(a=bb(nGe(n))),a?Co(a):null},JC=t=>{if(!t)return null;const n=new Date(t);return gk(n)?Mn(n,"h.mmaaa"):t?Mn(n,"d MMM, h.mmaaa"):null},eO=t=>t?Co(new Date(t)):null,tO=t=>{if(!t)return null;const n={minutes:"m",minute:"m",hours:"h",hour:"h",days:"d",day:"d",months:"mo",month:"mo",years:"y",year:"y"};return t.replace(/^in\s+/i,"").replace(/\s(minute|hour|day|month|year)s?\b/gi,(e,s)=>n[s.toLowerCase()]||e)},vb="CMD_MUTE_CONVERSATION",Eb="CMD_UNMUTE_CONVERSATION",Sb="CMD_SEND_TRANSCRIPT",nO="CMD_REOPEN_CONVERSATION",aO="CMD_RESOLVE_CONVERSATION",sO="CMD_SNOOZE_CONVERSATION",sGe="CMD_AI_ASSIST",oO="CMD_BULK_ACTION_SNOOZE_CONVERSATION",rO="CMD_BULK_ACTION_REOPEN_CONVERSATION",iO="CMD_BULK_ACTION_RESOLVE_CONVERSATION",lO="CMD_SNOOZE_NOTIFICATION",oGe={components:{Avatar:qt,Spinner:ls,NextButton:Se},props:{selectedInboxes:{type:Array,default:()=>[]},conversationCount:{type:Number,default:0}},emits:["select","close"],data(){return{query:"",selectedAgent:null,goBackToAgentList:!1}},computed:{..._t({uiFlags:"bulkActions/getUIFlags",assignableAgentsUiFlags:"inboxAssignableAgents/getUIFlags"}),filteredAgents(){return this.query?this.assignableAgents.filter(t=>t.name.toLowerCase().includes(this.query.toLowerCase())):[{confirmed:!0,name:"None",id:null,role:"agent",account_id:0,email:"None"},...this.assignableAgents]},assignableAgents(){return this.$store.getters["inboxAssignableAgents/getAssignableAgents"](this.selectedInboxes.join(","))},conversationLabel(){return this.conversationCount>1?"conversations":"conversation"}},mounted(){this.$store.dispatch("inboxAssignableAgents/fetch",this.selectedInboxes)},methods:{submit(){this.$emit("select",this.selectedAgent)},goBack(){this.goBackToAgentList=!0,this.selectedAgent=null},assignAgent(t){this.selectedAgent=t},onClose(){this.$emit("close")},onCloseAgentList(){this.selectedAgent===null&&!this.goBackToAgentList&&this.onClose(),this.goBackToAgentList=!1}}},rGe={class:"bulk-action__agents"},iGe={class:"flex items-center justify-between header"},lGe={class:"container"},cGe={key:0,class:"agent__list-loading"},dGe={key:1,class:"agent__list-container"},uGe={key:0},pGe={class:"search-container"},fGe={class:"flex items-center justify-between h-8 gap-2 agent-list-search"},mGe=["placeholder"],hGe=["onClick"],_Ge={class:"my-0 text-n-slate-12"},gGe={key:1,class:"agent-confirmation-container"},bGe={key:0},vGe={key:1},EGe={class:"agent-confirmation-actions"};function SGe(t,n,a,e,s,r){const o=H("NextButton"),i=H("Spinner"),l=H("fluent-icon"),c=H("Avatar"),d=nt("on-clickaway");return ce((p(),g("div",rGe,[n[2]||(n[2]=f("div",{class:"triangle"},[f("svg",{height:"12",viewBox:"0 0 24 12",width:"24"},[f("path",{d:"M20 12l-8-8-12 12","fill-rule":"evenodd","stroke-width":"1px"})])],-1)),f("div",iGe,[f("span",null,C(t.$t("BULK_ACTION.AGENT_SELECT_LABEL")),1),v(o,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",onClick:r.onClose},null,8,["onClick"])]),f("div",lGe,[t.assignableAgentsUiFlags.isFetching?(p(),g("div",cGe,[v(i),f("p",null,C(t.$t("BULK_ACTION.AGENT_LIST_LOADING")),1)])):(p(),g("div",dGe,[s.selectedAgent?(p(),g("div",gGe,[s.selectedAgent.id?(p(),g("p",bGe,[Oe(C(t.$t("BULK_ACTION.ASSIGN_CONFIRMATION_LABEL",{conversationCount:a.conversationCount,conversationLabel:r.conversationLabel}))+" ",1),f("strong",null,C(s.selectedAgent.name),1),n[1]||(n[1]=f("span",null,"?",-1))])):(p(),g("p",vGe,C(t.$t("BULK_ACTION.UNASSIGN_CONFIRMATION_LABEL",{conversationCount:a.conversationCount,conversationLabel:r.conversationLabel})),1)),f("div",EGe,[v(o,{faded:"",sm:"",slate:"",type:"reset",label:t.$t("BULK_ACTION.GO_BACK_LABEL"),onClick:r.goBack},null,8,["label","onClick"]),v(o,{sm:"",type:"submit",label:t.$t("BULK_ACTION.YES"),"is-loading":t.uiFlags.isUpdating,onClick:r.submit},null,8,["label","is-loading","onClick"])])])):(p(),g("ul",uGe,[f("li",pGe,[f("div",fGe,[v(l,{icon:"search",class:"search-icon",size:"16"}),ce(f("input",{"onUpdate:modelValue":n[0]||(n[0]=u=>s.query=u),type:"search",placeholder:t.$t("BULK_ACTION.SEARCH_INPUT_PLACEHOLDER"),class:"reset-base !outline-0 !text-sm agent--search_input"},null,8,mGe),[[Et,s.query]])])]),(p(!0),g(de,null,Ae(r.filteredAgents,u=>(p(),g("li",{key:u.id},[f("div",{class:"agent-list-item",onClick:m=>r.assignAgent(u)},[v(c,{name:u.name,src:u.thumbnail,status:u.availability_status,size:22,"hide-offline-status":"","rounded-full":""},null,8,["name","src","status"]),f("span",_Ge,C(u.name),1)],8,hGe)]))),128))]))]))])])),[[d,r.onCloseAgentList]])}const TGe=G(oGe,[["render",SGe],["__scopeId","data-v-2e95d0e1"],["__file","/app/app/javascript/dashboard/components/widgets/conversation/conversationBulkActions/AgentSelector.vue"]]),AGe={__name:"UpdateActions",props:{showResolve:{type:Boolean,default:!0},showReopen:{type:Boolean,default:!0},showSnooze:{type:Boolean,default:!0}},emits:["update","close"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=P([{icon:"i-lucide-check",key:"resolved"},{icon:"i-lucide-redo",key:"open"},{icon:"i-lucide-alarm-clock",key:"snoozed"}]),u={props:e,emit:s,t:r,actions:o,updateConversations:m=>{if(m==="snoozed"){const h=document.querySelector("ninja-keys");h==null||h.open({parent:"bulk_action_snooze_conversation"})}else s("update",m)},onClose:()=>{s("close")},showAction:m=>({resolved:e.showResolve,open:e.showReopen,snoozed:e.showSnooze})[m]||!1,actionLabel:m=>({resolved:r("CONVERSATION.HEADER.RESOLVE_ACTION"),open:r("CONVERSATION.HEADER.REOPEN_ACTION"),snoozed:r("BULK_ACTION.UPDATE.SNOOZE_UNTIL")})[m]||"",get useI18n(){return Q},ref:P,WootDropdownItem:hh,WootDropdownMenu:_h,Button:Se};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}},yGe={class:"absolute z-20 w-auto origin-top-right border border-solid rounded-lg shadow-md ltr:right-2 rtl:left-2 top-12 bg-n-alpha-3 backdrop-blur-[100px] border-n-weak"},IGe={class:"p-2.5 flex gap-1 items-center justify-between"},CGe={class:"text-sm font-medium text-n-slate-12"},OGe={class:"px-2.5 pt-0 pb-2.5"};function NGe(t,n,a,e,s,r){const o=nt("on-clickaway");return ce((p(),g("div",yGe,[n[0]||(n[0]=f("div",{class:"right-[var(--triangle-position)] block z-10 absolute text-left -top-3"},[f("svg",{height:"12",viewBox:"0 0 24 12",width:"24"},[f("path",{d:"M20 12l-8-8-12 12","fill-rule":"evenodd","stroke-width":"1px",class:"fill-n-alpha-3 backdrop-blur-[100px] stroke-n-weak"})])],-1)),f("div",IGe,[f("span",CGe,C(t.$t("BULK_ACTION.UPDATE.CHANGE_STATUS")),1),v(e.Button,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",onClick:e.onClose})]),f("div",OGe,[v(e.WootDropdownMenu,{class:"m-0 list-none"},{default:z(()=>[(p(!0),g(de,null,Ae(e.actions,i=>(p(),g(de,null,[e.showAction(i.key)?(p(),L(e.WootDropdownItem,{key:i.key},{default:z(()=>[v(e.Button,{ghost:"",sm:"",slate:"",class:"!w-full !justify-start",icon:i.icon,label:e.actionLabel(i.key),onClick:l=>e.updateConversations(i.key)},null,8,["icon","label","onClick"])]),_:2},1024)):O("v-if",!0)],64))),256))]),_:1})])])),[[o,e.onClose]])}const xGe=G(AGe,[["render",NGe],["__file","/app/app/javascript/dashboard/components/widgets/conversation/conversationBulkActions/UpdateActions.vue"]]),RGe={__name:"LabelActions",emits:["close","assign"],setup(t,{expose:n,emit:a}){n();const e=a,{t:s}=Q(),r=le("labels/getLabels"),o=P(""),i=P([]),l=S(()=>o.value?r.value.filter(E=>E.title.toLowerCase().includes(o.value.toLowerCase())):r.value),c=S(()=>r.value.length>0),d=S(()=>l.value.length>0),_={emit:e,t:s,labels:r,query:o,selectedLabels:i,filteredLabels:l,hasLabels:c,hasFilteredLabels:d,isLabelSelected:E=>i.value.includes(E),onClose:()=>{e("close")},handleAssign:()=>{i.value.length>0&&e("assign",i.value)},ref:P,computed:S,get useI18n(){return Q},get useMapGetter(){return le},get vOnClickOutside(){return Ga},NextButton:Se,Input:sn};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}},wGe={class:"absolute ltr:right-2 rtl:left-2 top-12 origin-top-right z-20 w-60 bg-n-alpha-3 backdrop-blur-[100px] border-n-weak rounded-lg border border-solid shadow-md",role:"dialog","aria-labelledby":"label-dialog-title"},MGe={class:"flex items-center justify-between p-2.5"},LGe={class:"text-sm font-medium"},DGe={class:"flex flex-col max-h-60 min-h-0"},PGe={class:"py-2 px-2.5"},kGe=["aria-label"],BGe={key:0,class:"p-2 text-center"},FGe={class:"text-sm text-n-slate-11"},UGe=["aria-selected"],$Ge={class:"items-center rounded-md cursor-pointer flex py-1 px-2.5 hover:bg-n-slate-3 dark:hover:bg-n-solid-3 has-[:checked]:bg-n-slate-2"},GGe=["value","aria-label"],VGe={class:"overflow-hidden flex-grow w-full text-sm whitespace-nowrap text-ellipsis"},HGe={key:1,class:"p-2 text-center"},jGe={class:"text-sm text-n-slate-11"},WGe={class:"p-2"};function zGe(t,n,a,e,s,r){return ce((p(),g("div",wGe,[n[2]||(n[2]=f("div",{class:"triangle"},[f("svg",{height:"12",viewBox:"0 0 24 12",width:"24"},[f("path",{d:"M20 12l-8-8-12 12","fill-rule":"evenodd","stroke-width":"1px"})])],-1)),f("div",MGe,[f("span",LGe,C(e.t("BULK_ACTION.LABELS.ASSIGN_LABELS")),1),v(e.NextButton,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",onClick:e.onClose})]),f("div",DGe,[f("header",PGe,[v(e.Input,{modelValue:e.query,"onUpdate:modelValue":n[0]||(n[0]=o=>e.query=o),type:"search",placeholder:e.t("BULK_ACTION.SEARCH_INPUT_PLACEHOLDER"),"icon-left":"i-lucide-search",size:"sm",class:"w-full","aria-label":e.t("BULK_ACTION.SEARCH_INPUT_PLACEHOLDER")},null,8,["modelValue","placeholder","aria-label"])]),e.hasLabels?(p(),g("ul",{key:0,class:"flex-1 overflow-y-auto m-0 list-none",role:"listbox","aria-label":e.t("BULK_ACTION.LABELS.ASSIGN_LABELS")},[e.hasFilteredLabels?O("v-if",!0):(p(),g("li",BGe,[f("span",FGe,C(e.t("BULK_ACTION.LABELS.NO_LABELS_FOUND")),1)])),(p(!0),g(de,null,Ae(e.filteredLabels,o=>(p(),g("li",{key:o.id,class:"my-1 mx-0 py-0 px-2.5",role:"option","aria-selected":e.isLabelSelected(o.title)},[f("label",$Ge,[ce(f("input",{"onUpdate:modelValue":n[1]||(n[1]=i=>e.selectedLabels=i),type:"checkbox",value:o.title,class:"my-0 ltr:mr-2.5 rtl:ml-2.5","aria-label":o.title},null,8,GGe),[[bn,e.selectedLabels]]),f("span",VGe,C(o.title),1),f("span",{class:"rounded-md h-3 w-3 flex-shrink-0 border border-solid border-n-weak",style:nn({backgroundColor:o.color})},null,4)])],8,UGe))),128))],8,kGe)):(p(),g("div",HGe,[f("span",jGe,C(e.t("CONTACTS_BULK_ACTIONS.NO_LABELS_FOUND")),1)])),f("footer",WGe,[v(e.NextButton,{sm:"",type:"submit",class:"w-full",label:e.t("BULK_ACTION.LABELS.ASSIGN_SELECTED_LABELS"),disabled:!e.selectedLabels.length,onClick:e.handleAssign},null,8,["label","disabled"])])])])),[[e.vOnClickOutside,e.onClose]])}const rD=G(RGe,[["render",zGe],["__scopeId","data-v-cc239934"],["__file","/app/app/javascript/dashboard/components/widgets/conversation/conversationBulkActions/LabelActions.vue"]]),YGe={components:{NextButton:Se},emits:["assignTeam","close"],data(){return{query:"",selectedteams:[]}},computed:{..._t({teams:"teams/getTeams"}),filteredTeams(){return[{name:"None",id:0},...this.teams.filter(t=>t.name.toLowerCase().includes(this.query.toLowerCase()))]}},methods:{assignTeam(t){this.$emit("assignTeam",t)},onClose(){this.$emit("close")}}},KGe={class:"bulk-action__teams"},XGe={class:"flex items-center justify-between header"},qGe={class:"container"},ZGe={class:"team__list-container"},QGe={class:"search-container"},JGe={class:"flex items-center justify-between h-8 gap-2 agent-list-search"},eVe=["placeholder"],tVe=["onClick"],nVe={class:"my-0 ltr:ml-2 rtl:mr-2 text-n-slate-12"},aVe={key:1},sVe={class:"team__list-item"},oVe={class:"my-0 ltr:ml-2 rtl:mr-2 text-n-slate-12"};function rVe(t,n,a,e,s,r){const o=H("NextButton"),i=H("fluent-icon"),l=nt("on-clickaway");return ce((p(),g("div",KGe,[n[1]||(n[1]=f("div",{class:"triangle"},[f("svg",{height:"12",viewBox:"0 0 24 12",width:"24"},[f("path",{d:"M20 12l-8-8-12 12","fill-rule":"evenodd","stroke-width":"1px"})])],-1)),f("div",XGe,[f("span",null,C(t.$t("BULK_ACTION.TEAMS.TEAM_SELECT_LABEL")),1),v(o,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",onClick:r.onClose},null,8,["onClick"])]),f("div",qGe,[f("div",ZGe,[f("ul",null,[f("li",QGe,[f("div",JGe,[v(i,{icon:"search",class:"search-icon",size:"16"}),ce(f("input",{"onUpdate:modelValue":n[0]||(n[0]=c=>s.query=c),type:"search",placeholder:t.$t("BULK_ACTION.SEARCH_INPUT_PLACEHOLDER"),class:"reset-base !outline-0 !text-sm agent--search_input"},null,8,eVe),[[Et,s.query]])])]),r.filteredTeams.length?(p(!0),g(de,{key:0},Ae(r.filteredTeams,c=>(p(),g("li",{key:c.id},[f("div",{class:"team__list-item",onClick:d=>r.assignTeam(c)},[f("span",nVe,C(c.name),1)],8,tVe)]))),128)):(p(),g("li",aVe,[f("div",sVe,[f("span",oVe,C(t.$t("BULK_ACTION.TEAMS.NO_TEAMS_AVAILABLE")),1)])]))])])])])),[[l,r.onClose]])}const iVe=G(YGe,[["render",rVe],["__scopeId","data-v-73e7b148"],["__file","/app/app/javascript/dashboard/components/widgets/conversation/conversationBulkActions/TeamActions.vue"]]),lVe={components:{DatePicker:gL,NextButton:Se},emits:["close","chooseTime"],data(){return{snoozeTime:null,lang:{days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],yearFormat:"YYYY",monthFormat:"MMMM"}}},methods:{onClose(){this.$emit("close")},chooseTime(){this.$emit("chooseTime",this.snoozeTime)},disabledDate(t){const n=new Date;return n.setDate(n.getDate()-1),t<n},disabledTime(t){const n=new Date;return n.setHours(n.getHours()+1),t<n}}},cVe={class:"flex flex-col"},dVe={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function uVe(t,n,a,e,s,r){const o=H("woot-modal-header"),i=H("DatePicker"),l=H("NextButton");return p(),g("div",cVe,[v(o,{"header-title":t.$t("CONVERSATION.CUSTOM_SNOOZE.TITLE")},null,8,["header-title"]),f("form",{class:"modal-content w-full pt-2 px-5 pb-6",onSubmit:n[1]||(n[1]=Ve((...c)=>r.chooseTime&&r.chooseTime(...c),["prevent"]))},[v(i,{value:s.snoozeTime,"onUpdate:value":n[0]||(n[0]=c=>s.snoozeTime=c),type:"datetime",inline:"","input-class":"mx-input ",lang:s.lang,"disabled-date":r.disabledDate,"disabled-time":r.disabledTime},null,8,["value","lang","disabled-date","disabled-time"]),f("div",dVe,[v(l,{faded:"",slate:"",type:"reset",label:t.$t("CONVERSATION.CUSTOM_SNOOZE.CANCEL"),onClick:Ve(r.onClose,["prevent"])},null,8,["label","onClick"]),v(l,{type:"submit",label:t.$t("CONVERSATION.CUSTOM_SNOOZE.APPLY")},null,8,["label"])])],32)])}const _1=G(lVe,[["render",uVe],["__file","/app/app/javascript/dashboard/components/CustomSnoozeModal.vue"]]),pVe={components:{AgentSelector:TGe,UpdateActions:xGe,LabelActions:rD,TeamActions:iVe,CustomSnoozeModal:_1,NextButton:Se},props:{conversations:{type:Array,default:()=>[]},allConversationsSelected:{type:Boolean,default:!1},selectedInboxes:{type:Array,default:()=>[]},showOpenAction:{type:Boolean,default:!1},showResolvedAction:{type:Boolean,default:!1},showSnoozedAction:{type:Boolean,default:!1}},emits:["selectAllConversations","assignAgent","updateConversations","assignLabels","assignTeam","resolveConversations"],data(){return{showAgentsList:!1,showUpdateActions:!1,showLabelActions:!1,showTeamsList:!1,popoverPositions:{},showCustomTimeSnoozeModal:!1}},mounted(){Mt.on(oO,this.onCmdSnoozeConversation),Mt.on(rO,this.onCmdReopenConversation),Mt.on(iO,this.onCmdResolveConversation)},unmounted(){Mt.off(oO,this.onCmdSnoozeConversation),Mt.off(rO,this.onCmdReopenConversation),Mt.off(iO,this.onCmdResolveConversation)},methods:{onCmdSnoozeConversation(t){t===gt.SNOOZE_OPTIONS.UNTIL_CUSTOM_TIME?this.showCustomTimeSnoozeModal=!0:this.updateConversations("snoozed",qm(t)||null)},onCmdReopenConversation(){this.updateConversations("open",null)},onCmdResolveConversation(){this.updateConversations("resolved",null)},customSnoozeTime(t){this.showCustomTimeSnoozeModal=!1,t&&this.updateConversations("snoozed",Co(t))},hideCustomSnoozeModal(){this.showCustomTimeSnoozeModal=!1},selectAll(t){this.$emit("selectAllConversations",t.target.checked)},submit(t){this.$emit("assignAgent",t)},updateConversations(t,n){this.$emit("updateConversations",t,n)},assignLabels(t){this.$emit("assignLabels",t)},assignTeam(t){this.$emit("assignTeam",t)},resolveConversations(){this.$emit("resolveConversations")},toggleUpdateActions(){this.showUpdateActions=!this.showUpdateActions},toggleLabelActions(){this.showLabelActions=!this.showLabelActions},toggleAgentList(){this.showAgentsList=!this.showAgentsList},toggleTeamsList(){this.showTeamsList=!this.showTeamsList}}},fVe={class:"bulk-action__container"},mVe={class:"flex items-center justify-between"},hVe={class:"flex items-center justify-between bulk-action__panel"},_Ve=["checked",".indeterminate"],gVe={class:"flex items-center gap-1 bulk-action__actions"},bVe={key:0,class:"bulk-action__alert"};function vVe(t,n,a,e,s,r){const o=H("NextButton"),i=H("LabelActions"),l=H("UpdateActions"),c=H("AgentSelector"),d=H("TeamActions"),u=H("CustomSnoozeModal"),m=H("woot-modal"),h=nt("tooltip");return p(),g("div",fVe,[f("div",mVe,[f("label",hVe,[f("input",{type:"checkbox",class:"checkbox",checked:a.allConversationsSelected,".indeterminate":!a.allConversationsSelected,onChange:n[0]||(n[0]=_=>r.selectAll(_))},null,40,_Ve),f("span",null,C(t.$t("BULK_ACTION.CONVERSATIONS_SELECTED",{conversationCount:a.conversations.length})),1)]),f("div",gVe,[ce(v(o,{icon:"i-lucide-tags",slate:"",xs:"",faded:"",onClick:r.toggleLabelActions},null,8,["onClick"]),[[h,t.$t("BULK_ACTION.LABELS.ASSIGN_LABELS")]]),ce(v(o,{icon:"i-lucide-repeat",slate:"",xs:"",faded:"",onClick:r.toggleUpdateActions},null,8,["onClick"]),[[h,t.$t("BULK_ACTION.UPDATE.CHANGE_STATUS")]]),ce(v(o,{icon:"i-lucide-user-round-plus",slate:"",xs:"",faded:"",onClick:r.toggleAgentList},null,8,["onClick"]),[[h,t.$t("BULK_ACTION.ASSIGN_AGENT_TOOLTIP")]]),ce(v(o,{icon:"i-lucide-users-round",slate:"",xs:"",faded:"",onClick:r.toggleTeamsList},null,8,["onClick"]),[[h,t.$t("BULK_ACTION.ASSIGN_TEAM_TOOLTIP")]])]),v(Qa,{name:"popover-animation"},{default:z(()=>[s.showLabelActions?(p(),L(i,{key:0,class:"label-actions-box",onAssign:r.assignLabels,onClose:n[1]||(n[1]=_=>s.showLabelActions=!1)},null,8,["onAssign"])):O("v-if",!0)]),_:1}),v(Qa,{name:"popover-animation"},{default:z(()=>[s.showUpdateActions?(p(),L(l,{key:0,class:"update-actions-box","selected-inboxes":a.selectedInboxes,"conversation-count":a.conversations.length,"show-resolve":!a.showResolvedAction,"show-reopen":!a.showOpenAction,"show-snooze":!a.showSnoozedAction,onUpdate:r.updateConversations,onClose:n[2]||(n[2]=_=>s.showUpdateActions=!1)},null,8,["selected-inboxes","conversation-count","show-resolve","show-reopen","show-snooze","onUpdate"])):O("v-if",!0)]),_:1}),v(Qa,{name:"popover-animation"},{default:z(()=>[s.showAgentsList?(p(),L(c,{key:0,class:"agent-actions-box","selected-inboxes":a.selectedInboxes,"conversation-count":a.conversations.length,onSelect:r.submit,onClose:n[3]||(n[3]=_=>s.showAgentsList=!1)},null,8,["selected-inboxes","conversation-count","onSelect"])):O("v-if",!0)]),_:1}),v(Qa,{name:"popover-animation"},{default:z(()=>[s.showTeamsList?(p(),L(d,{key:0,class:"team-actions-box",onAssignTeam:r.assignTeam,onClose:n[4]||(n[4]=_=>s.showTeamsList=!1)},null,8,["onAssignTeam"])):O("v-if",!0)]),_:1})]),a.allConversationsSelected?(p(),g("div",bVe,C(t.$t("BULK_ACTION.ALL_CONVERSATIONS_SELECTED_ALERT")),1)):O("v-if",!0),v(m,{show:s.showCustomTimeSnoozeModal,"onUpdate:show":n[5]||(n[5]=_=>s.showCustomTimeSnoozeModal=_),"on-close":r.hideCustomSnoozeModal},{default:z(()=>[v(u,{onClose:r.hideCustomSnoozeModal,onChooseTime:r.customSnoozeTime},null,8,["onClose","onChooseTime"])]),_:1},8,["show","on-close"])])}const EVe=G(pVe,[["render",vVe],["__scopeId","data-v-c4b7c345"],["__file","/app/app/javascript/dashboard/components/widgets/conversation/conversationBulkActions/Index.vue"]]),SVe={__name:"IntersectionObserver",props:{options:{type:Object,default:()=>({root:document,rootMargin:"100px 0 100px 0)"})}},emits:["observed"],setup(t,{expose:n,emit:a}){n();const e=a,s=P("");TT(s,([{isIntersecting:o}])=>{o&&e("observed")},t.options);const r={emit:e,observedElement:s,ref:P,get useIntersectionObserver(){return TT}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},TVe={ref:"observedElement",class:"h-6 w-full"};function AVe(t,n,a,e,s,r){return p(),g("div",TVe,null,512)}const iD=G(SVe,[["render",AVe],["__file","/app/app/javascript/dashboard/components/IntersectionObserver.vue"]]);function cO(t){const n=()=>{const s=t.value.querySelectorAll("div.conversations-list div.conversation"),r=t.value.querySelector("div.conversations-list div.conversation.active"),o=[...s].indexOf(r),i=s.length-1;return{allConversations:s,activeConversation:r,activeConversationIndex:o,lastConversationIndex:i}},a=s=>{const{allConversations:r,activeConversationIndex:o,lastConversationIndex:i}=n(),l=s==="previous"?o-1:o+1;r.length>0&&l>=0&&l<=i?r[l].click():r.length>0&&r[s==="previous"?0:i].click()};jn({"Alt+KeyJ":{action:()=>a("previous"),allowOnFocusedInput:!0},"Alt+KeyK":{action:()=>a("next"),allowOnFocusedInput:!0}})}function dO(){const t=Bn(),{t:n}=Q(),a=le("bulkActions/getSelectedConversationIds"),e=P([]);function s(h,_){t.dispatch("bulkActions/setSelectedConversationIds",h),e.value=[...e.value,_]}function r(h,_){t.dispatch("bulkActions/removeSelectedConversationIds",h),e.value=e.value.filter(E=>E!==_)}function o(){t.dispatch("bulkActions/clearSelectedConversationIds"),e.value=[]}function i(h,_){const E=Sa(_);h?(t.dispatch("bulkActions/setSelectedConversationIds",E.map(y=>y.id)),e.value=E.map(y=>y.inbox_id)):o()}function l(h){return a.value.includes(h)}async function c(h,_=null){try{await t.dispatch("bulkActions/process",{type:"Conversation",ids:_||a.value,fields:{assignee_id:h.id}}),t.dispatch("bulkActions/clearSelectedConversationIds"),_?Z(n("CONVERSATION.CARD_CONTEXT_MENU.API.AGENT_ASSIGNMENT.SUCCESFUL",{agentName:h.name,conversationId:_})):Z(n("BULK_ACTION.ASSIGN_SUCCESFUL"))}catch{Z(n("BULK_ACTION.ASSIGN_FAILED"))}}async function d(h,_=null){try{await t.dispatch("bulkActions/process",{type:"Conversation",ids:_||a.value,labels:{add:h}}),t.dispatch("bulkActions/clearSelectedConversationIds"),_?Z(n("CONVERSATION.CARD_CONTEXT_MENU.API.LABEL_ASSIGNMENT.SUCCESFUL",{labelName:h[0],conversationId:_})):Z(n("BULK_ACTION.LABELS.ASSIGN_SUCCESFUL"))}catch{Z(n("BULK_ACTION.LABELS.ASSIGN_FAILED"))}}async function u(h){try{await t.dispatch("bulkActions/process",{type:"Conversation",ids:a.value,fields:{team_id:h.id}}),t.dispatch("bulkActions/clearSelectedConversationIds"),Z(n("BULK_ACTION.TEAMS.ASSIGN_SUCCESFUL"))}catch{Z(n("BULK_ACTION.TEAMS.ASSIGN_FAILED"))}}async function m(h,_){try{await t.dispatch("bulkActions/process",{type:"Conversation",ids:a.value,fields:{status:h},snoozed_until:_}),t.dispatch("bulkActions/clearSelectedConversationIds"),Z(n("BULK_ACTION.UPDATE.UPDATE_SUCCESFUL"))}catch{Z(n("BULK_ACTION.UPDATE.UPDATE_FAILED"))}}return{selectedConversations:a,selectedInboxes:e,selectConversation:s,deSelectConversation:r,selectAllConversations:i,resetBulkActions:o,isConversationSelected:l,onAssignAgent:c,onAssignLabels:d,onAssignTeamsForBulk:u,onUpdateConversations:m}}const ao=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"}],Tc=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"is_present",label:"Is present"},{value:"is_not_present",label:"Is not present"}],Gc=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"contains",label:"Contains"},{value:"does_not_contain",label:"Does not contain"}],yVe=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"is_present",label:"Is present"},{value:"is_not_present",label:"Is not present"},{value:"is_greater_than",label:"Is greater than"},{value:"is_less_than",label:"Is less than"}],Vc=[{value:"is_greater_than",label:"Is greater than"},{value:"is_less_than",label:"Is less than"},{value:"days_before",label:"Is x days before"}],uO=[{attributeKey:"status",attributeI18nKey:"STATUS",inputType:"multi_select",dataType:"text",filterOperators:ao,attributeModel:"standard"},{attributeKey:"assignee_id",attributeI18nKey:"ASSIGNEE_NAME",inputType:"search_select",dataType:"text",filterOperators:Tc,attributeModel:"standard"},{attributeKey:"priority",attributeI18nKey:"PRIORITY",inputType:"multi_select",dataType:"text",filterOperators:ao,attributeModel:"standard"},{attributeKey:"inbox_id",attributeI18nKey:"INBOX_NAME",inputType:"search_select",dataType:"text",filterOperators:Tc,attributeModel:"standard"},{attributeKey:"team_id",attributeI18nKey:"TEAM_NAME",inputType:"search_select",dataType:"number",filterOperators:Tc,attributeModel:"standard"},{attributeKey:"display_id",attributeI18nKey:"CONVERSATION_IDENTIFIER",inputType:"plain_text",dataType:"Number",filterOperators:Gc,attributeModel:"standard"},{attributeKey:"campaign_id",attributeI18nKey:"CAMPAIGN_NAME",inputType:"search_select",dataType:"Number",filterOperators:Tc,attributeModel:"standard"},{attributeKey:"labels",attributeI18nKey:"LABELS",inputType:"multi_select",dataType:"text",filterOperators:Tc,attributeModel:"standard"},{attributeKey:"browser_language",attributeI18nKey:"BROWSER_LANGUAGE",inputType:"search_select",dataType:"text",filterOperators:ao,attributeModel:"additional"},{attributeKey:"country_code",attributeI18nKey:"COUNTRY_NAME",inputType:"search_select",dataType:"text",filterOperators:ao,attributeModel:"additional"},{attributeKey:"referer",attributeI18nKey:"REFERER_LINK",inputType:"plain_text",dataType:"text",filterOperators:Gc,attributeModel:"additional"},{attributeKey:"created_at",attributeI18nKey:"CREATED_AT",inputType:"date",dataType:"text",filterOperators:Vc,attributeModel:"standard"},{attributeKey:"last_activity_at",attributeI18nKey:"LAST_ACTIVITY",inputType:"date",dataType:"text",filterOperators:Vc,attributeModel:"standard"},{attributeKey:"referer",attributeI18nKey:"REFERER_LINK",inputType:"plain_text",dataType:"text",filterOperators:Vc,attributeModel:"standard"}],IVe=[{name:"Standard Filters",i18nGroup:"STANDARD_FILTERS",attributes:[{key:"status",i18nKey:"STATUS"},{key:"assignee_id",i18nKey:"ASSIGNEE_NAME"},{key:"inbox_id",i18nKey:"INBOX_NAME"},{key:"team_id",i18nKey:"TEAM_NAME"},{key:"display_id",i18nKey:"CONVERSATION_IDENTIFIER"},{key:"campaign_id",i18nKey:"CAMPAIGN_NAME"},{key:"labels",i18nKey:"LABELS"},{key:"created_at",i18nKey:"CREATED_AT"},{key:"last_activity_at",i18nKey:"LAST_ACTIVITY"}]},{name:"Additional Filters",i18nGroup:"ADDITIONAL_FILTERS",attributes:[{key:"browser_language",i18nKey:"BROWSER_LANGUAGE"},{key:"country_code",i18nKey:"COUNTRY_NAME"},{key:"referer",i18nKey:"REFERER_LINK"}]}],pO=[{attributeKey:"name",attributeI18nKey:"NAME",inputType:"plain_text",dataType:"text",filterOperators:ao,attribute_type:"standard"},{attributeKey:"email",attributeI18nKey:"EMAIL",inputType:"plain_text",dataType:"text",filterOperators:Gc,attribute_type:"standard"},{attributeKey:"phone_number",attributeI18nKey:"PHONE_NUMBER",inputType:"plain_text",dataType:"text",filterOperators:Gc,attribute_type:"standard"},{attributeKey:"identifier",attributeI18nKey:"IDENTIFIER",inputType:"plain_text",dataType:"number",filterOperators:ao,attribute_type:"standard"},{attributeKey:"country_code",attributeI18nKey:"COUNTRY",inputType:"search_select",dataType:"number",filterOperators:ao,attribute_type:"standard"},{attributeKey:"city",attributeI18nKey:"CITY",inputType:"plain_text",dataType:"Number",filterOperators:Gc,attribute_type:"standard"},{attributeKey:"created_at",attributeI18nKey:"CREATED_AT",inputType:"date",dataType:"text",filterOperators:Vc,attributeModel:"standard"},{attributeKey:"last_activity_at",attributeI18nKey:"LAST_ACTIVITY",inputType:"date",dataType:"text",filterOperators:Vc,attributeModel:"standard"},{attributeKey:"referer",attributeI18nKey:"REFERER_LINK",inputType:"plain_text",dataType:"text",filterOperators:Vc,attributeModel:"standard"},{attributeKey:"blocked",attributeI18nKey:"BLOCKED",inputType:"search_select",dataType:"text",filterOperators:ao,attributeModel:"standard"},{attributeKey:"labels",attributeI18nKey:"LABELS",inputType:"multi_select",dataType:"text",filterOperators:Tc,attributeModel:"standard"}],CVe=[{name:"Standard Filters",i18nGroup:"STANDARD_FILTERS",attributes:[{key:"name",i18nKey:"NAME"},{key:"email",i18nKey:"EMAIL"},{key:"phone_number",i18nKey:"PHONE_NUMBER"},{key:"identifier",i18nKey:"IDENTIFIER"},{key:"country_code",i18nKey:"COUNTRY"},{key:"city",i18nKey:"CITY"},{key:"created_at",i18nKey:"CREATED_AT"},{key:"last_activity_at",i18nKey:"LAST_ACTIVITY"},{key:"blocked",i18nKey:"BLOCKED"},{key:"labels",i18nKey:"LABELS"}]}],OVe=t=>{switch(t){case"date":return"date";case"text":return"plain_text";case"list":return"search_select";case"checkbox":return"search_select";default:return"plain_text"}},NVe=t=>{switch(t){case"list":return ao;case"text":return Gc;case"number":return ao;case"link":return ao;case"date":return yVe;case"checkbox":return ao;default:return ao}},fO=({filteri18nKey:t,attributeModel:n})=>{const{t:a}=Q(),{getters:e}=Fe(),s=n==="contact_attribute"?CVe:IVe;return{setFilterAttributes:()=>{const l=e["attributes/getAttributesByModel"](n),c={name:a(`${t}.GROUPS.CUSTOM_ATTRIBUTES`),attributes:l.map(m=>({key:m.attribute_key,name:m.attribute_display_name}))},d=s.map(m=>({name:a(`${t}.GROUPS.${m.i18nGroup}`),attributes:m.attributes.map(h=>({key:h.key,name:a(`${t}.ATTRIBUTES.${h.i18nKey}`)}))})),u=l.map(m=>({attributeKey:m.attribute_key,attributeI18nKey:`CUSTOM_ATTRIBUTE_${m.attribute_display_type.toUpperCase()}`,inputType:OVe(m.attribute_display_type),filterOperators:NVe(m.attribute_display_type),attributeModel:"custom_attributes"}));return{filterGroups:[...d,c],filterTypes:[...u]}},initializeStatusAndAssigneeFilterToModal:(l,c,d)=>l!==""?{attribute_key:"status",attribute_model:"standard",filter_operator:"equal_to",values:[{id:l,name:a(`CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.${l}.TEXT`)}],query_operator:"and",custom_attribute_type:""}:d===gt.ASSIGNEE_TYPE.ME?{attribute_key:"assignee_id",filter_operator:"equal_to",values:c,query_operator:"and",custom_attribute_type:""}:null,initializeInboxTeamAndLabelFilterToModal:(l,c,d,u,m)=>{const h=[];return l&&h.push({attribute_key:"inbox_id",attribute_model:"standard",filter_operator:"equal_to",values:[{id:l,name:c.name}],query_operator:"and",custom_attribute_type:""}),d&&h.push({attribute_key:"team_id",attribute_model:"standard",filter_operator:"equal_to",values:u,query_operator:"and",custom_attribute_type:""}),m&&h.push({attribute_key:"labels",attribute_model:"standard",filter_operator:"equal_to",values:[{id:m,name:m}],query_operator:"and",custom_attribute_type:""}),h}}},xVe=(t,n,a)=>{if((t==="created_at"||t==="last_activity_at")&&n==="days_before")return"plain_text";const e=a.find(s=>s.attributeKey===t);return e==null?void 0:e.inputType},RVe=t=>({text:"string",number:"string",date:"string",checkbox:"multi_select",list:"multi_select",link:"string"})[t],wVe=(t,n)=>{const a=n.find(r=>r.attribute_key===t),{attribute_display_type:e}=a;return RVe(e)},rf=(t,n,a,e)=>{const s=n==null?void 0:n.find(r=>r[a]===t[0]);return{id:t[0],name:s?s[e]:t[0]}},MVe=t=>t.map(n=>({id:n,name:n})),LVe=(t,n)=>n.filter(e=>t.includes(e.title)).map(({title:e})=>({id:e,name:e})),DVe=(t,n)=>n.filter(e=>t.includes(e.id)).map(({id:e,name:s})=>({id:e.toLowerCase(),name:s})),PVe=(t,n)=>n.filter(e=>t.includes(e.id)).map(({id:e,name:s})=>({id:e,name:s})),kVe=(t,n)=>n.filter(a=>t.includes(a.id)),BVe=(t,n)=>{const{attribute_key:a,values:e}=t,{languages:s,countries:r,agents:o,inboxes:i,teams:l,campaigns:c,labels:d,priority:u}=n;switch(a){case"status":return MVe(e);case"assignee_id":return rf(e,o,"id","name");case"inbox_id":return rf(e,i,"id","name");case"team_id":return rf(e,l,"id","name");case"campaign_id":return rf(e,c,"id","title");case"labels":return LVe(e,d);case"priority":return kVe(e,u);case"browser_language":return DVe(e,s);case"country_code":return PVe(e,r);default:return{id:e[0],name:e[0]}}},Zm=(t,n)=>{const{attribute_key:a,filter_operator:e,values:s}=t,{filterTypes:r,allCustomAttributes:o}=n,i=xVe(a,e,r);return i===void 0?wVe(a,o)==="string"?s[0].toString():{id:s[0],name:s[0]}:i==="multi_select"||i==="search_select"?BVe(t,n):s[0].toString()},FVe={__name:"ChatList",props:{conversationInbox:{type:[String,Number],default:0},teamId:{type:[String,Number],default:0},label:{type:String,default:""},conversationType:{type:String,default:""},foldersId:{type:[String,Number],default:0},showConversationList:{default:!0,type:Boolean},isOnExpandedLayout:{default:!1,type:Boolean}},emits:["conversationLoad"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{uiSettings:r}=Ct(),{t:o}=Q(),i=ft(),l=lt(),c=Bn(),d=P(null),u=P(null);qn("contextMenuElementTarget",u);const m=P(gt.ASSIGNEE_TYPE.ME),h=P(gt.STATUS_TYPE.OPEN),_=P(gt.SORT_BY_TYPE.LAST_ACTIVITY_AT_DESC),E=P(!1),y=P([]),b=P({}),A=P(!1),T=P(!1),I=P(!1),N=P([]),x=P(uO.map(dt=>({...dt,attributeName:o(`FILTER.ATTRIBUTES.${dt.attributeI18nKey}`)}))),R=le("getCurrentUser"),M=le("getFilteredConversations"),w=le("getMineChats"),D=le("getAllStatusChats"),B=le("getUnAssignedChats"),k=le("getChatListLoadingStatus"),V=le("getSelectedInbox"),F=le("conversationStats/getStats"),$=le("getAppliedConversationFiltersV2"),Y=le("customViews/getConversationCustomViews"),j=le("agents/getAgents"),U=le("teams/getTeams"),J=le("inboxes/getInboxes"),te=le("campaigns/getAllCampaigns"),q=le("labels/getLabels"),K=le("getCurrentAccountId"),W=le("teams/getTeam");cO(d);const{selectedConversations:ee,selectedInboxes:ae,selectConversation:ve,deSelectConversation:Ce,selectAllConversations:ue,resetBulkActions:ge,isConversationSelected:Me,onAssignAgent:We,onAssignLabels:Ue,onAssignTeamsForBulk:Re,onUpdateConversations:Le}=dO(),{initializeStatusAndAssigneeFilterToModal:Xe,initializeInboxTeamAndLabelFilterToModal:et}=fO({filteri18nKey:"FILTER",attributeModel:"conversation_attribute"}),yt=S(()=>({root:d.value,rootMargin:"100px 0px 100px 0px"})),Dt=S(()=>$.value.length!==0),X=S(()=>{if(e.foldersId){const dt=Y.value.filter(aa=>aa.id===Number(e.foldersId)),[Pt]=dt;return Pt}}),se=S(()=>{var dt;return(dt=X.value)==null?void 0:dt.name}),ie=S(()=>!!(X.value&&e.foldersId!==0)),fe=S(()=>Dt.value||ie.value),me=S(()=>{const{id:dt,name:Pt}=R.value;return{id:dt,name:Pt}}),De=S(()=>Yf(R.value,K.value)),Ye=S(()=>AT(yT,De.value,dt=>dt.permissions).map(({key:dt,count:Pt})=>({key:dt,name:o(`CHAT_LIST.ASSIGNEE_TYPE_TABS.${dt}`),count:F.value[Pt]||0}))),ze=S(()=>fe.value||m.value===gt.ASSIGNEE_TYPE.ALL),He=S(()=>fe.value?"appliedFilters":m.value),xe=Jn("inboxes/getInbox",V),pe=Jn("conversationPage/getCurrentPageFilter",m),ye=Jn("conversationPage/getCurrentPageFilter",He),Be=Jn("conversationPage/getHasEndReached",He),ne=Jn("attributes/getAttributesByModel","conversation_attribute"),re=S(()=>Ye.value.find(Pt=>Pt.key===m.value).count),he=S(()=>{const Pt=y.value&&Array.isArray(y.value)&&!y.value.length,aa=!fe.value&&Pt,Dn=y.value.length<25&&re.value<25&&re.value>y.value.length;return aa&&Dn?1:pe.value+1}),Ee=S(()=>({inboxId:e.conversationInbox?e.conversationInbox:void 0,assigneeType:m.value,status:h.value,sortBy:_.value,page:he.value,labels:e.label?[e.label]:void 0,teamId:e.teamId||void 0,conversationType:e.conversationType||void 0})),we=S(()=>e.teamId?W.value(e.teamId):{}),be=S(()=>Dt.value?o("CHAT_LIST.TAB_HEADING"):xe.value.name?xe.value.name:we.value.name?we.value.name:e.label?`#${e.label}`:e.conversationType==="mention"?o("CHAT_LIST.MENTION_HEADING"):e.conversationType==="participating"?o("CONVERSATION_PARTICIPANTS.SIDEBAR_MENU_TITLE"):e.conversationType==="unattended"?o("CHAT_LIST.UNATTENDED_HEADING"):ie.value?X.value.name:o("CHAT_LIST.TAB_HEADING")),Te=S(()=>{let dt=[];if(fe.value)dt=[...M.value];else{const Pt=Ee.value;m.value==="me"?dt=[...w.value(Pt)]:m.value==="unassigned"?dt=[...B.value(Pt)]:dt=[...D.value(Pt)]}if(X.value){const{payload:Pt}=X.value.query;dt=dt.filter(aa=>IT(aa,Pt))}return dt}),Ne=S(()=>Te.value.length&&Be.value&&!k.value),Ie=S(()=>Te.value.length===ee.value.length&&Te.value.every(dt=>ee.value.includes(dt.id))),$e=S(()=>[...new Set(ae.value)]);function ke(){const{conversations_filter_by:dt={}}=r.value,{status:Pt,order_by:aa}=dt;h.value=Pt||gt.STATUS_TYPE.OPEN,_.value=Object.values(gt.SORT_BY_TYPE).includes(aa)?aa:gt.SORT_BY_TYPE.LAST_ACTIVITY_AT_DESC}function Ke(){s("conversationLoad")}function ct(dt){dt=ha(dt);let Pt=ye.value+1;c.dispatch("fetchFilteredConversations",{queryData:zs(dt),page:Pt}).then(Ke),E.value=!1}function It(dt){dt=ha(dt);let Pt=ye.value+1;c.dispatch("fetchFilteredConversations",{queryData:dt,page:Pt}).then(Ke)}function at(dt){dt=ha(dt),ge(),b.value=zs(dt),c.dispatch("conversationPage/reset"),c.dispatch("emptyAllConversations"),ct(dt)}function Ot(){E.value=!1,N.value=[]}function Ze(dt,Pt){const aa=ha(dt),Dn={...Sa(X),name:Sa(Pt),query:zs(aa)};c.dispatch("customViews/update",Dn),Ot()}function St(){A.value=!0}function zt(){A.value=!1}function ot(){T.value=!0}function Tt(){T.value=!1}function st(){return{agents:j.value,teams:U.value,inboxes:J.value,labels:q.value,campaigns:te.value,languages:Qf,countries:rs,priority:[{id:"low",name:o("CONVERSATION.PRIORITY.OPTIONS.LOW")},{id:"medium",name:o("CONVERSATION.PRIORITY.OPTIONS.MEDIUM")},{id:"high",name:o("CONVERSATION.PRIORITY.OPTIONS.HIGH")},{id:"urgent",name:o("CONVERSATION.PRIORITY.OPTIONS.URGENT")}],filterTypes:x.value,allCustomAttributes:ne.value}}function wt(){const dt=Xe(h.value,me.value,m.value);dt&&(N.value=[...N.value,Os(dt)]);const Pt=et(e.conversationInbox,xe.value,e.teamId,we.value,e.label).map(Os);N.value=[...N.value,...Pt]}function Ln(dt){var Dn,Po;const Pt=(Po=(Dn=Sa(dt))==null?void 0:Dn.query)==null?void 0:Po.payload;if(!Array.isArray(Pt))return;const aa=Pt.map(go=>{const bo=Os(go),Xa=Array.isArray(bo.values)?Zm(ha(go),st()):[];return{attributeKey:bo.attributeKey,attributeModel:bo.attributeModel,customAttributeType:bo.customAttributeType,filterOperator:bo.filterOperator,queryOperator:bo.queryOperator??"and",values:Xa}});N.value=[...N.value,...aa]}function mt(){N.value=[...$.value]}function Vt(){if(E.value===!0){Ot();return}!Dt.value&&!ie.value&&wt(),ie.value&&Ln(X.value),Dt.value&&mt(),E.value=!0}function Ht(){c.dispatch("updateChatListFilters",Ee.value),c.dispatch("fetchAllConversations").then(Ke)}function Tn(){if(N.value=[],ge(),c.dispatch("conversationPage/reset"),c.dispatch("emptyAllConversations"),c.dispatch("clearConversationFilters"),ie.value){const dt=X.value.query;It(dt)}e.foldersId||Ht()}function za(){if(!(Be.value||k.value))if(!fe.value)Ht();else if(ie.value){const dt=X.value.query;It(dt)}else Dt.value&&ct($.value)}function na(){const dt=u.value;if(dt&&dt.hasScrollbar){const{scrollTop:Pt,scrollHeight:aa,clientHeight:Dn}=dt.$el;aa-(Pt+Dn)<100&&za()}}function Wn(dt){m.value!==dt&&(ge(),Mt.emit("clearSearchInput"),m.value=dt,pe.value||Ht())}function Ya(dt,Pt){Pt==="status"?h.value=dt:_.value=dt,Tn()}function Ka(){const Pt=Y.value[Y.value.length-1].id;i.push({name:"folder_conversations",params:{id:Pt}})}function es(){Y.value.length>0?Ka():(i.push({name:"home"}),Ht())}function us(){const{params:{accountId:dt,inbox_id:Pt,label:aa,teamId:Dn},name:Po}=l;let go="";OT({route:{name:Po}})?go="mention":CT({route:{name:Po}})&&(go="unattended"),i.push(Kf({accountId:dt,conversationType:go,customViewId:e.foldersId,inboxId:Pt,label:aa,teamId:Dn}))}async function ts(dt,Pt=null){c.dispatch("setCurrentChatPriority",{priority:dt,conversationId:Pt}),c.dispatch("assignPriority",{conversationId:Pt,priority:dt}).then(()=>{Nt($a.CHANGE_PRIORITY,{newValue:dt,from:"Context menu"}),Z(o("CONVERSATION.PRIORITY.CHANGE_PRIORITY.SUCCESSFUL",{priority:dt,conversationId:Pt}))})}async function Ma(dt){try{await c.dispatch("markMessagesUnread",{id:dt}),us()}catch{}}async function As(dt){try{await c.dispatch("markMessagesRead",{id:dt})}catch{}}async function Do(dt,Pt=null){try{await c.dispatch("assignTeam",{conversationId:Pt,teamId:dt.id}),Z(o("CONVERSATION.CARD_CONTEXT_MENU.API.TEAM_ASSIGNMENT.SUCCESFUL",{team:dt.name,conversationId:Pt}))}catch{Z(o("CONVERSATION.CARD_CONTEXT_MENU.API.TEAM_ASSIGNMENT.FAILED"))}}function ci(dt,Pt,aa){c.dispatch("toggleStatus",{conversationId:dt,status:Pt,snoozedUntil:aa}).then(()=>{Z(o("CONVERSATION.CHANGE_STATUS"))})}function Zl(dt){return ee.value.length?ee.value.every(Pt=>{var aa;return((aa=c.getters.getConversationById(Pt))==null?void 0:aa.status)===dt}):!1}function al(dt){I.value=dt}function Ql(dt){ue(dt,Te)}Ns("fetch_conversation_stats",()=>{fe.value||c.dispatch("conversationStats/get",Ee.value)}),pr(u,"scroll",na),Pe(()=>{c.dispatch("setChatListFilters",Ee.value),ke(),c.dispatch("setChatStatusFilter",h.value),c.dispatch("setChatSortFilter",_.value),Tn(),ie.value&&c.dispatch("campaigns/get")});const Fn=P(null),Nr=P(null);async function Jl(){try{await c.dispatch("deleteConversation",Nr.value),us(),Nr.value=null,Fn.value.close(),Z(o("CONVERSATION.SUCCESS_DELETE_CONVERSATION"))}catch{Z(o("CONVERSATION.FAIL_DELETE_CONVERSATION"))}}const di=dt=>{Nr.value=dt,Fn.value.open()};qn("selectConversation",ve),qn("deSelectConversation",Ce),qn("assignAgent",We),qn("assignTeam",Do),qn("assignLabels",Ue),qn("updateConversationStatus",ci),qn("toggleContextMenu",al),qn("markAsUnread",Ma),qn("markAsRead",As),qn("assignPriority",ts),qn("isConversationSelected",Me),qn("deleteConversation",di),je(we,()=>Tn()),je(S(()=>e.conversationInbox),()=>Tn()),je(S(()=>e.label),()=>Tn()),je(S(()=>e.conversationType),()=>Tn()),je(X,(dt,Pt)=>{dt!==Pt&&c.dispatch("customViews/setActiveConversationFolder",dt||null),Tn()}),je(M,()=>{y.value=Te.value}),je(Ee,(dt,Pt)=>{dt!==Pt&&c.dispatch("updateChatListFilters",dt)});const ui={props:e,emit:s,uiSettings:r,t:o,router:i,route:l,store:c,conversationListRef:d,conversationDynamicScroller:u,activeAssigneeTab:m,activeStatus:h,activeSortBy:_,showAdvancedFilters:E,chatsOnView:y,foldersQuery:b,showAddFoldersModal:A,showDeleteFoldersModal:T,isContextMenuOpen:I,appliedFilter:N,advancedFilterTypes:x,currentUser:R,chatLists:M,mineChatsList:w,allChatList:D,unAssignedChatsList:B,chatListLoading:k,activeInbox:V,conversationStats:F,appliedFilters:$,folders:Y,agentList:j,teamsList:U,inboxesList:J,campaigns:te,labels:q,currentAccountId:K,getTeamFn:W,selectedConversations:ee,selectedInboxes:ae,selectConversation:ve,deSelectConversation:Ce,selectAllConversations:ue,resetBulkActions:ge,isConversationSelected:Me,onAssignAgent:We,onAssignLabels:Ue,onAssignTeamsForBulk:Re,onUpdateConversations:Le,initializeStatusAndAssigneeFilterToModal:Xe,initializeInboxTeamAndLabelFilterToModal:et,intersectionObserverOptions:yt,hasAppliedFilters:Dt,activeFolder:X,activeFolderName:se,hasActiveFolders:ie,hasAppliedFiltersOrActiveFolders:fe,currentUserDetails:me,userPermissions:De,assigneeTabItems:Ye,showAssigneeInConversationCard:ze,currentPageFilterKey:He,inbox:xe,currentPage:pe,currentFiltersPage:ye,hasCurrentPageEndReached:Be,conversationCustomAttributes:ne,activeAssigneeTabCount:re,conversationListPagination:he,conversationFilters:Ee,activeTeam:we,pageTitle:be,conversationList:Te,showEndOfListMessage:Ne,allConversationsSelected:Ie,uniqueInboxes:$e,setFiltersFromUISettings:ke,emitConversationLoaded:Ke,fetchFilteredConversations:ct,fetchSavedFilteredConversations:It,onApplyFilter:at,closeAdvanceFiltersModal:Ot,onUpdateSavedFilter:Ze,onClickOpenAddFoldersModal:St,onCloseAddFoldersModal:zt,onClickOpenDeleteFoldersModal:ot,onCloseDeleteFoldersModal:Tt,setParamsForEditFolderModal:st,initializeExistingFilterToModal:wt,initializeFolderToFilterModal:Ln,initalizeAppliedFiltersToModal:mt,onToggleAdvanceFiltersModal:Vt,fetchConversations:Ht,resetAndFetchData:Tn,loadMoreConversations:za,handleScroll:na,updateAssigneeTab:Wn,onBasicFilterChange:Ya,openLastSavedItemInFolder:Ka,openLastItemAfterDeleteInFolder:es,redirectToConversationList:us,assignPriority:ts,markAsUnread:Ma,markAsRead:As,onAssignTeam:Do,toggleConversationStatus:ci,allSelectedConversationsStatus:Zl,onContextMenuToggle:al,toggleSelectAll:Ql,deleteConversationDialogRef:Fn,selectedConversationId:Nr,deleteConversation:Jl,handleDelete:di,ref:P,unref:Sa,provide:qn,computed:S,watch:je,onMounted:Pe,get useStore(){return Bn},get useRoute(){return lt},get useRouter(){return ft},get useMapGetter(){return le},get useFunctionGetter(){return Jn},get DynamicScroller(){return p1},get DynamicScrollerItem(){return XL},ChatListHeader:m$e,Dialog:la,ConversationFilter:G$e,SaveCustomView:Y$e,ChatTypeTabs:q$e,ConversationItem:Z7e,DeleteCustomViews:eGe,ConversationBulkActions:EVe,IntersectionObserver:iD,TeleportWithDirection:yE,Spinner:$n,get useUISettings(){return Ct},get useAlert(){return Z},get useChatListKeyboardEvents(){return cO},get useBulkActions(){return dO},get useFilter(){return fO},get useTrack(){return Nt},get useI18n(){return Q},get useCamelCase(){return Os},get useSnakeCase(){return ha},get useEmitter(){return Ns},get useEventListener(){return pr},get emitter(){return Mt},get wootConstants(){return gt},get advancedFilterOptions(){return uO},get filterQueryGenerator(){return zs},get languages(){return Qf},get countries(){return rs},get generateValuesForEditCustomViews(){return Zm},get conversationListPageURL(){return Kf},get isOnMentionsView(){return OT},get isOnUnattendedView(){return CT},get getUserPermissions(){return Yf},get filterItemsByPermission(){return AT},get matchesFilters(){return IT},get CONVERSATION_EVENTS(){return $a},get ASSIGNEE_TYPE_TAB_PERMISSIONS(){return yT}};return Object.defineProperty(ui,"__isScriptSetup",{enumerable:!1,value:!0}),ui}},UVe={key:3,class:"flex items-center justify-center p-4 overflow-auto"},$Ve={key:0,class:"flex justify-center my-4"},GVe={key:1,class:"p-4 text-center text-n-slate-11"};function VVe(t,n,a,e,s,r){return p(),g("div",{class:oe(["flex flex-col flex-shrink-0 bg-n-solid-1 conversations-list-wrap",[{hidden:!a.showConversationList},a.isOnExpandedLayout?"basis-full":"w-[340px] 2xl:w-[412px]"]])},[qe(t.$slots,"default"),v(e.ChatListHeader,{"page-title":e.pageTitle,"has-applied-filters":e.hasAppliedFilters,"has-active-folders":e.hasActiveFolders,"active-status":e.activeStatus,"is-on-expanded-layout":a.isOnExpandedLayout,"conversation-stats":e.conversationStats,"is-list-loading":e.chatListLoading&&!e.conversationList.length,onAddFolders:e.onClickOpenAddFoldersModal,onDeleteFolders:e.onClickOpenDeleteFoldersModal,onFiltersModal:e.onToggleAdvanceFiltersModal,onResetFilters:e.resetAndFetchData,onBasicFilterChange:e.onBasicFilterChange},null,8,["page-title","has-applied-filters","has-active-folders","active-status","is-on-expanded-layout","conversation-stats","is-list-loading"]),e.showAddFoldersModal?(p(),L(e.TeleportWithDirection,{key:0,to:"#saveFilterTeleportTarget"},{default:z(()=>[v(e.SaveCustomView,{modelValue:e.appliedFilter,"onUpdate:modelValue":n[0]||(n[0]=o=>e.appliedFilter=o),"custom-views-query":e.foldersQuery,"open-last-saved-item":e.openLastSavedItemInFolder,onClose:e.onCloseAddFoldersModal},null,8,["modelValue","custom-views-query"])]),_:1})):O("v-if",!0),e.showDeleteFoldersModal?(p(),L(e.DeleteCustomViews,{key:1,show:e.showDeleteFoldersModal,"onUpdate:show":n[1]||(n[1]=o=>e.showDeleteFoldersModal=o),"active-custom-view":e.activeFolder,"custom-views-id":a.foldersId,"open-last-item-after-delete":e.openLastItemAfterDeleteInFolder,onClose:e.onCloseDeleteFoldersModal},null,8,["show","active-custom-view","custom-views-id"])):O("v-if",!0),e.hasAppliedFiltersOrActiveFolders?O("v-if",!0):(p(),L(e.ChatTypeTabs,{key:2,items:e.assigneeTabItems,"active-tab":e.activeAssigneeTab,"is-compact":"",onChatTabChange:e.updateAssigneeTab},null,8,["items","active-tab"])),!e.chatListLoading&&!e.conversationList.length?(p(),g("p",UVe,C(t.$t("CHAT_LIST.LIST.404")),1)):O("v-if",!0),e.selectedConversations.length?(p(),L(e.ConversationBulkActions,{key:4,conversations:e.selectedConversations,"all-conversations-selected":e.allConversationsSelected,"selected-inboxes":e.uniqueInboxes,"show-open-action":e.allSelectedConversationsStatus("open"),"show-resolved-action":e.allSelectedConversationsStatus("resolved"),"show-snoozed-action":e.allSelectedConversationsStatus("snoozed"),onSelectAllConversations:e.toggleSelectAll,onAssignAgent:e.onAssignAgent,onUpdateConversations:e.onUpdateConversations,onAssignLabels:e.onAssignLabels,onAssignTeam:e.onAssignTeamsForBulk},null,8,["conversations","all-conversations-selected","selected-inboxes","show-open-action","show-resolved-action","show-snoozed-action","onAssignAgent","onUpdateConversations","onAssignLabels","onAssignTeam"])):O("v-if",!0),f("div",{ref:"conversationListRef",class:oe(["flex-1 overflow-hidden conversations-list hover:overflow-y-auto",{"overflow-hidden":e.isContextMenuOpen}])},[v(e.DynamicScroller,{ref:"conversationDynamicScroller",items:e.conversationList,"min-item-size":24,class:"w-full h-full overflow-auto"},{default:z(({item:o,index:i,active:l})=>[O(`
            If we encounter resizing issues, we can set the \`watchData\` prop to true
            this will deeply watch the entire object instead of just size dependencies
            But it can impact performance
          `),v(e.DynamicScrollerItem,{item:o,active:l,"data-index":i,"size-dependencies":[o.messages,o.labels,o.uuid,o.inbox_id]},{default:z(()=>[v(e.ConversationItem,{source:o,label:a.label,"team-id":a.teamId,"folders-id":a.foldersId,"conversation-type":a.conversationType,"show-assignee":e.showAssigneeInConversationCard,onSelectConversation:e.selectConversation,onDeSelectConversation:e.deSelectConversation},null,8,["source","label","team-id","folders-id","conversation-type","show-assignee","onSelectConversation","onDeSelectConversation"])]),_:2},1032,["item","active","data-index","size-dependencies"])]),after:z(()=>[e.chatListLoading?(p(),g("div",$Ve,[v(e.Spinner,{class:"text-n-brand"})])):e.showEndOfListMessage?(p(),g("p",GVe,C(t.$t("CHAT_LIST.EOF")),1)):(p(),L(e.IntersectionObserver,{key:2,options:e.intersectionObserverOptions,onObserved:e.loadMoreConversations},null,8,["options"]))]),_:1},8,["items"])],2),v(e.Dialog,{ref:"deleteConversationDialogRef",type:"alert",title:t.$t("CONVERSATION.DELETE_CONVERSATION.TITLE",{conversationId:e.selectedConversationId}),description:t.$t("CONVERSATION.DELETE_CONVERSATION.DESCRIPTION"),"confirm-button-label":t.$t("CONVERSATION.DELETE_CONVERSATION.CONFIRM"),onConfirm:e.deleteConversation,onClose:n[2]||(n[2]=o=>e.selectedConversationId=null)},null,8,["title","description","confirm-button-label"]),e.showAdvancedFilters?(p(),L(e.TeleportWithDirection,{key:5,to:"#conversationFilterTeleportTarget"},{default:z(()=>[v(e.ConversationFilter,{modelValue:e.appliedFilter,"onUpdate:modelValue":n[3]||(n[3]=o=>e.appliedFilter=o),"folder-name":e.activeFolderName,"is-folder-view":e.hasActiveFolders,onApplyFilter:e.onApplyFilter,onUpdateFolder:e.onUpdateSavedFilter,onClose:e.closeAdvanceFiltersModal},null,8,["modelValue","folder-name","is-folder-view"])]),_:1})):O("v-if",!0)],2)}const HVe=G(FVe,[["render",VVe],["__file","/app/app/javascript/dashboard/components/ChatList.vue"]]),jVe={components:{NextButton:Se},props:{show:{type:Boolean,default:!1},currentChat:{type:Object,default:()=>({})}},emits:["cancel","update:show"],setup(){return{v$:rt()}},data(){return{email:"",selectedType:"",isSubmitting:!1}},validations:{email:{required:Ge,email:br,minLength:Rt(4)}},computed:{localShow:{get(){return this.show},set(t){this.$emit("update:show",t)}},sentToOtherEmailAddress(){return this.selectedType==="other_email_address"},isFormValid(){return this.selectedType?this.sentToOtherEmailAddress?!!this.email&&!this.v$.email.$error:!0:!1},selectedEmailAddress(){const{meta:t}=this.currentChat;switch(this.selectedType){case"contact":return t.sender.email;case"assignee":return t.assignee.email;case"other_email_address":return this.email;default:return""}}},methods:{onCancel(){this.$emit("cancel")},async onSubmit(){this.isSubmitting=!1;try{await this.$store.dispatch("sendEmailTranscript",{email:this.selectedEmailAddress,conversationId:this.currentChat.id}),Z(this.$t("EMAIL_TRANSCRIPT.SEND_EMAIL_SUCCESS")),this.onCancel()}catch{Z(this.$t("EMAIL_TRANSCRIPT.SEND_EMAIL_ERROR"))}finally{this.isSubmitting=!1}}}},WVe={class:"flex flex-col h-auto overflow-auto"},zVe={class:"w-full"},YVe={key:0,class:"flex items-center gap-2"},KVe={for:"contact"},XVe={key:1,class:"flex items-center gap-2"},qVe={for:"assignee"},ZVe={class:"flex items-center gap-2"},QVe={for:"other_email_address"},JVe={key:2,class:"w-[50%] mt-1"},eHe=["placeholder"],tHe={key:0,class:"message"},nHe={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function aHe(t,n,a,e,s,r){const o=H("woot-modal-header"),i=H("NextButton"),l=H("woot-modal");return p(),L(l,{show:r.localShow,"onUpdate:show":n[6]||(n[6]=c=>r.localShow=c),"on-close":r.onCancel},{default:z(()=>[f("div",WVe,[v(o,{"header-title":t.$t("EMAIL_TRANSCRIPT.TITLE"),"header-content":t.$t("EMAIL_TRANSCRIPT.DESC")},null,8,["header-title","header-content"]),f("form",{class:"w-full",onSubmit:n[5]||(n[5]=Ve((...c)=>r.onSubmit&&r.onSubmit(...c),["prevent"]))},[f("div",zVe,[a.currentChat.meta.sender&&a.currentChat.meta.sender.email?(p(),g("div",YVe,[ce(f("input",{id:"contact","onUpdate:modelValue":n[0]||(n[0]=c=>s.selectedType=c),type:"radio",name:"selectedType",value:"contact"},null,512),[[b_,s.selectedType]]),f("label",KVe,C(t.$t("EMAIL_TRANSCRIPT.FORM.SEND_TO_CONTACT")),1)])):O("v-if",!0),a.currentChat.meta.assignee?(p(),g("div",XVe,[ce(f("input",{id:"assignee","onUpdate:modelValue":n[1]||(n[1]=c=>s.selectedType=c),type:"radio",name:"selectedType",value:"assignee"},null,512),[[b_,s.selectedType]]),f("label",qVe,C(t.$t("EMAIL_TRANSCRIPT.FORM.SEND_TO_AGENT")),1)])):O("v-if",!0),f("div",ZVe,[ce(f("input",{id:"other_email_address","onUpdate:modelValue":n[2]||(n[2]=c=>s.selectedType=c),type:"radio",name:"selectedType",value:"other_email_address"},null,512),[[b_,s.selectedType]]),f("label",QVe,C(t.$t("EMAIL_TRANSCRIPT.FORM.SEND_TO_OTHER_EMAIL_ADDRESS")),1)]),r.sentToOtherEmailAddress?(p(),g("div",JVe,[f("label",{class:oe({error:e.v$.email.$error})},[ce(f("input",{"onUpdate:modelValue":n[3]||(n[3]=c=>s.email=c),type:"text",placeholder:t.$t("EMAIL_TRANSCRIPT.FORM.EMAIL.PLACEHOLDER"),onInput:n[4]||(n[4]=(...c)=>e.v$.email.$touch&&e.v$.email.$touch(...c))},null,40,eHe),[[Et,s.email]]),e.v$.email.$error?(p(),g("span",tHe,C(t.$t("EMAIL_TRANSCRIPT.FORM.EMAIL.ERROR")),1)):O("v-if",!0)],2)])):O("v-if",!0)]),f("div",nHe,[v(i,{faded:"",slate:"",type:"reset",label:t.$t("EMAIL_TRANSCRIPT.CANCEL"),onClick:Ve(r.onCancel,["prevent"])},null,8,["label","onClick"]),v(i,{type:"submit",label:t.$t("EMAIL_TRANSCRIPT.SUBMIT"),disabled:!r.isFormValid},null,8,["label","disabled"])])],32)])]),_:1},8,["show","on-close"])}const sHe=G(jVe,[["render",aHe],["__file","/app/app/javascript/dashboard/components/widgets/conversation/EmailTranscriptModal.vue"]]),oHe={__name:"ResolveAction",setup(t,{expose:n}){n();const a=Fe(),e=xt(),{t:s}=Q(),r=P(null),o=P(!1),[i,l]=$t(),c=()=>l(!1),d=()=>l(!0),u=S(()=>e.getSelectedChat.value),m=S(()=>u.value.status===gt.STATUS_TYPE.OPEN),h=S(()=>u.value.status===gt.STATUS_TYPE.PENDING),_=S(()=>u.value.status===gt.STATUS_TYPE.RESOLVED),E=S(()=>u.value.status===gt.STATUS_TYPE.SNOOZED),y=S(()=>!h.value&&!E.value),b=S(()=>h.value||E.value),A=()=>{const w=document.querySelectorAll(".conversations-list .conversation"),D=document.querySelector("div.conversations-list div.conversation.active"),B=[...w].indexOf(D),k=w.length-1;return{all:w,activeIndex:B,lastIndex:k}},T=()=>{document.querySelector("ninja-keys").open({parent:"snooze_conversation"})},I=(w,D)=>{c(),o.value=!0,a.dispatch("toggleStatus",{conversationId:u.value.id,status:w,snoozedUntil:D}).then(()=>{Z(s("CONVERSATION.CHANGE_STATUS")),o.value=!1})},N=()=>{I(gt.STATUS_TYPE.OPEN)},x=()=>{I(gt.STATUS_TYPE.RESOLVED)},R={"Alt+KeyM":{action:()=>{var w;return(w=r.value)==null?void 0:w.$el.click()},allowOnFocusedInput:!0},"Alt+KeyE":{action:async()=>{await I(gt.STATUS_TYPE.RESOLVED)}},"$mod+Alt+KeyE":{action:async w=>{const{all:D,activeIndex:B,lastIndex:k}=A();await I(gt.STATUS_TYPE.RESOLVED),B<k?D[B+1].click():D.length>1&&(D[0].click(),document.querySelector(".conversations-list").scrollTop=0),w.preventDefault()}}};jn(R),Ns(nO,N),Ns(aO,x);const M={store:a,getters:e,t:s,arrowDownButtonRef:r,isLoading:o,showActionsDropdown:i,toggleDropdown:l,closeDropdown:c,openDropdown:d,currentChat:u,isOpen:m,isPending:h,isResolved:_,isSnoozed:E,showAdditionalActions:y,showOpenButton:b,getConversationParams:A,openSnoozeModal:T,toggleStatus:I,onCmdOpenConversation:N,onCmdResolveConversation:x,keyboardEvents:R,ref:P,computed:S,get useAlert(){return Z},get useToggle(){return $t},get useI18n(){return Q},get useStore(){return Fe},get useStoreGetters(){return xt},get useEmitter(){return Ns},get useKeyboardEvents(){return jn},WootDropdownItem:hh,WootDropdownMenu:_h,get wootConstants(){return gt},get CMD_REOPEN_CONVERSATION(){return nO},get CMD_RESOLVE_CONVERSATION(){return aO},Button:Se};return Object.defineProperty(M,"__isScriptSetup",{enumerable:!1,value:!0}),M}},rHe={class:"relative flex items-center justify-end resolve-actions"},iHe={key:0,class:"border rounded-lg shadow-lg border-n-strong dark:border-n-strong box-content p-2 w-fit z-10 bg-n-alpha-3 backdrop-blur-[100px] absolute block left-auto top-full mt-0.5 start-0 xl:start-auto xl:end-0 max-w-[12.5rem] min-w-[9.75rem] [&_ul>li]:mb-0"};function lHe(t,n,a,e,s,r){const o=nt("on-clickaway");return p(),g("div",rHe,[f("div",{class:oe(["rounded-lg shadow outline-1 outline flex-shrink-0",e.showOpenButton?"outline-transparent":"outline-n-container"])},[e.isOpen?(p(),L(e.Button,{key:0,label:e.t("CONVERSATION.HEADER.RESOLVE_ACTION"),size:"sm",color:"slate",class:"ltr:rounded-r-none rtl:rounded-l-none !outline-0","is-loading":e.isLoading,onClick:e.onCmdResolveConversation},null,8,["label","is-loading"])):e.isResolved?(p(),L(e.Button,{key:1,label:e.t("CONVERSATION.HEADER.REOPEN_ACTION"),size:"sm",color:"slate",class:"ltr:rounded-r-none rtl:rounded-l-none !outline-0","is-loading":e.isLoading,onClick:e.onCmdOpenConversation},null,8,["label","is-loading"])):e.showOpenButton?(p(),L(e.Button,{key:2,label:e.t("CONVERSATION.HEADER.OPEN_ACTION"),size:"sm",color:"slate","is-loading":e.isLoading,onClick:e.onCmdOpenConversation},null,8,["label","is-loading"])):O("v-if",!0),e.showAdditionalActions?(p(),L(e.Button,{key:3,ref:"arrowDownButtonRef",icon:"i-lucide-chevron-down",disabled:e.isLoading,size:"sm",class:"ltr:rounded-l-none rtl:rounded-r-none !outline-0",color:"slate","trailing-icon":"",onClick:e.openDropdown},null,8,["disabled"])):O("v-if",!0)],2),e.showActionsDropdown?ce((p(),g("div",iHe,[v(e.WootDropdownMenu,{class:"mb-0"},{default:z(()=>[e.isPending?O("v-if",!0):(p(),L(e.WootDropdownItem,{key:0},{default:z(()=>[v(e.Button,{label:e.t("CONVERSATION.RESOLVE_DROPDOWN.SNOOZE_UNTIL"),ghost:"",slate:"",sm:"",start:"",icon:"i-lucide-alarm-clock-minus",class:"w-full",onClick:n[0]||(n[0]=()=>e.openSnoozeModal())},null,8,["label"])]),_:1})),e.isPending?O("v-if",!0):(p(),L(e.WootDropdownItem,{key:1},{default:z(()=>[v(e.Button,{label:e.t("CONVERSATION.RESOLVE_DROPDOWN.MARK_PENDING"),ghost:"",slate:"",sm:"",start:"",icon:"i-lucide-circle-dot-dashed",class:"w-full",onClick:n[1]||(n[1]=()=>e.toggleStatus(e.wootConstants.STATUS_TYPE.PENDING))},null,8,["label"])]),_:1}))]),_:1})])),[[o,e.closeDropdown]]):O("v-if",!0)])}const cHe=G(oHe,[["render",lHe],["__file","/app/app/javascript/dashboard/components/buttons/ResolveAction.vue"]]),dHe={__name:"MoreActions",setup(t,{expose:n}){n();const a=Bn(),{t:e}=Q(),[s,r]=$t(!1),[o,i]=$t(!1),l=S(()=>a.getters.getSelectedChat),c=S(()=>{const _=[];return l.value.muted?_.push({icon:"i-lucide-volume-1",label:e("CONTACT_PANEL.UNMUTE_CONTACT"),action:"unmute",value:"unmute"}):_.push({icon:"i-lucide-volume-off",label:e("CONTACT_PANEL.MUTE_CONTACT"),action:"mute",value:"mute"}),_.push({icon:"i-lucide-share",label:e("CONTACT_PANEL.SEND_TRANSCRIPT"),action:"send_transcript",value:"send_transcript"}),_}),d=({action:_})=>{i(!1),_==="mute"?(a.dispatch("muteConversation",l.value.id),Z(e("CONTACT_PANEL.MUTED_SUCCESS"))):_==="unmute"?(a.dispatch("unmuteConversation",l.value.id),Z(e("CONTACT_PANEL.UNMUTED_SUCCESS"))):_==="send_transcript"&&r()},u=()=>{a.dispatch("muteConversation",l.value.id),Z(e("CONTACT_PANEL.MUTED_SUCCESS"))},m=()=>{a.dispatch("unmuteConversation",l.value.id),Z(e("CONTACT_PANEL.UNMUTED_SUCCESS"))};Mt.on(vb,u),Mt.on(Eb,m),Mt.on(Sb,r),is(()=>{Mt.off(vb,u),Mt.off(Eb,m),Mt.off(Sb,r)});const h={store:a,t:e,showEmailActionsModal:s,toggleEmailModal:r,showActionsDropdown:o,toggleDropdown:i,currentChat:l,actionMenuItems:c,handleActionClick:d,mute:u,unmute:m,computed:S,onUnmounted:is,get useToggle(){return $t},get useStore(){return Bn},get useAlert(){return Z},get useI18n(){return Q},get emitter(){return Mt},EmailTranscriptModal:sHe,ResolveAction:cHe,ButtonV4:Se,DropdownMenu:ds,get CMD_MUTE_CONVERSATION(){return vb},get CMD_SEND_TRANSCRIPT(){return Sb},get CMD_UNMUTE_CONVERSATION(){return Eb}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}},uHe={class:"relative flex items-center gap-2 actions--container"},pHe={class:"relative flex items-center group"};function fHe(t,n,a,e,s,r){const o=nt("tooltip"),i=nt("on-clickaway");return p(),g("div",uHe,[v(e.ResolveAction,{"conversation-id":e.currentChat.id,status:e.currentChat.status},null,8,["conversation-id","status"]),ce((p(),g("div",pHe,[ce(v(e.ButtonV4,{size:"sm",variant:"ghost",color:"slate",icon:"i-lucide-more-vertical",class:"rounded-md group-hover:bg-n-alpha-2",onClick:n[0]||(n[0]=l=>e.toggleDropdown())},null,512),[[o,t.$t("CONVERSATION.HEADER.MORE_ACTIONS")]]),e.showActionsDropdown?(p(),L(e.DropdownMenu,{key:0,"menu-items":e.actionMenuItems,class:"mt-1 ltr:right-0 rtl:left-0 top-full",onAction:e.handleActionClick},null,8,["menu-items"])):O("v-if",!0)])),[[i,()=>e.toggleDropdown(!1)]]),e.showEmailActionsModal?(p(),L(e.EmailTranscriptModal,{key:0,show:e.showEmailActionsModal,"current-chat":e.currentChat,onCancel:e.toggleEmailModal},null,8,["show","current-chat","onCancel"])):O("v-if",!0)])}const mHe=G(dHe,[["render",fHe],["__file","/app/app/javascript/dashboard/components/widgets/conversation/MoreActions.vue"]]),hHe={__name:"ConversationHeader",props:{chat:{type:Object,default:()=>({})},showBackButton:{type:Boolean,default:!1}},setup(t,{expose:n}){n();const a=t,{t:e}=Q(),s=Bn(),r=lt(),o=P(null),{width:i}=fr(o),{isAWebWidgetInbox:l}=Gi(),c=S(()=>s.getters.getSelectedChat),d=S(()=>s.getters.getCurrentAccountId),u=S(()=>a.chat.meta),m=S(()=>{const{params:{inbox_id:N,label:x,teamId:R,id:M},name:w}=r,D={conversation_through_mentions:"mention",conversation_through_unattended:"unattended"};return Kf({accountId:d.value,inboxId:N,label:x,teamId:R,conversationType:D[w],customViewId:M})}),h=S(()=>l.value?u.value.hmac_verified:!0),_=S(()=>s.getters["contacts/getContact"](a.chat.meta.sender.id)),E=S(()=>c.value.status===gt.STATUS_TYPE.SNOOZED),y=S(()=>{const{snoozed_until:N}=c.value;return N?`${e("CONVERSATION.HEADER.SNOOZED_UNTIL")} ${JC(N)}`:e("CONVERSATION.HEADER.SNOOZED_UNTIL_NEXT_REPLY")}),b=S(()=>{const{inbox_id:N}=a.chat;return s.getters["inboxes/getInbox"](N)}),A=S(()=>s.getters["inboxes/getInboxes"].length>1),T=S(()=>{var N;return(N=a.chat)==null?void 0:N.sla_policy_id}),I={props:a,t:e,store:s,route:r,conversationHeader:o,width:i,isAWebWidgetInbox:l,currentChat:c,accountId:d,chatMetadata:u,backButtonUrl:m,isHMACVerified:h,currentContact:_,isSnoozed:E,snoozedDisplayText:y,inbox:b,hasMultipleInboxes:A,hasSlaPolicyId:T,computed:S,ref:P,get useRoute(){return lt},get useStore(){return Bn},get useElementSize(){return fr},BackButton:Wl,InboxName:f1,MoreActions:mHe,Avatar:qt,SLACardLabel:sD,get wootConstants(){return gt},get conversationListPageURL(){return Kf},get snoozedReopenTime(){return JC},get useInbox(){return Gi},get useI18n(){return Q}};return Object.defineProperty(I,"__isScriptSetup",{enumerable:!1,value:!0}),I}},_He={ref:"conversationHeader",class:"flex flex-col gap-3 items-center justify-between flex-1 w-full min-w-0 xl:flex-row px-3 py-2 border-b bg-n-background border-n-weak h-24 xl:h-12"},gHe={class:"flex items-center justify-start w-full xl:w-auto max-w-full min-w-0 xl:flex-1"},bHe={class:"flex flex-col items-start min-w-0 ml-2 overflow-hidden rtl:ml-0 rtl:mr-2"},vHe={class:"flex flex-row items-center max-w-full gap-1 p-0 m-0"},EHe={class:"text-sm font-medium truncate leading-tight text-n-slate-12"},SHe={class:"flex items-center gap-2 overflow-hidden text-xs conversation--header--actions text-ellipsis whitespace-nowrap"},THe={key:1,class:"font-medium text-n-amber-10"},AHe={class:"flex flex-row items-center justify-start xl:justify-end flex-shrink-0 gap-2 w-full xl:w-auto header-actions-wrap"};function yHe(t,n,a,e,s,r){const o=H("fluent-icon"),i=nt("tooltip");return p(),g("div",_He,[f("div",gHe,[a.showBackButton?(p(),L(e.BackButton,{key:0,"back-url":e.backButtonUrl,class:"ltr:mr-2 rtl:ml-2"},null,8,["back-url"])):O("v-if",!0),v(e.Avatar,{name:e.currentContact.name,src:e.currentContact.thumbnail,size:32,status:e.currentContact.availability_status,"hide-offline-status":"","rounded-full":""},null,8,["name","src","status"]),f("div",bHe,[f("div",vHe,[f("span",EHe,C(e.currentContact.name),1),e.isHMACVerified?O("v-if",!0):ce((p(),L(o,{key:0,size:"14",class:"text-n-amber-10 my-0 mx-0 min-w-[14px] flex-shrink-0",icon:"warning"},null,512)),[[i,t.$t("CONVERSATION.UNVERIFIED_SESSION")]])]),f("div",SHe,[e.hasMultipleInboxes?(p(),L(e.InboxName,{key:0,inbox:e.inbox,class:"!mx-0"},null,8,["inbox"])):O("v-if",!0),e.isSnoozed?(p(),g("span",THe,C(e.snoozedDisplayText),1)):O("v-if",!0)])])]),f("div",AHe,[e.hasSlaPolicyId?(p(),L(e.SLACardLabel,{key:0,chat:a.chat,"show-extended-info":"","parent-width":e.width,class:"hidden md:flex"},null,8,["chat","parent-width"])):O("v-if",!0),v(e.MoreActions,{"conversation-id":e.currentChat.id},null,8,["conversation-id"])])],512)}const IHe=G(hHe,[["render",yHe],["__file","/app/app/javascript/dashboard/components/widgets/conversation/ConversationHeader.vue"]]),CHe={components:{LoadingState:Ed},props:{config:{type:Array,default:()=>[]},currentChat:{type:Object,default:()=>({})},isVisible:{type:Boolean,default:!1},position:{type:Number,required:!0}},data(){return{hasOpenedAtleastOnce:!1,iframeLoading:!0}},computed:{dashboardAppContext(){return{conversation:this.currentChat,contact:this.$store.getters["contacts/getContact"](this.contactId),currentAgent:this.currentAgent}},contactId(){var t,n,a;return(a=(n=(t=this.currentChat)==null?void 0:t.meta)==null?void 0:n.sender)==null?void 0:a.id},currentAgent(){const{id:t,name:n,email:a}=this.$store.getters.getCurrentUser;return{id:t,name:n,email:a}}},watch:{isVisible(){this.isVisible&&(this.hasOpenedAtleastOnce=!0)}},mounted(){window.addEventListener("message",this.triggerEvent)},unmounted(){window.removeEventListener("message",this.triggerEvent)},methods:{triggerEvent(t){this.isVisible&&t.data==="chatwoot-dashboard-app:fetch-info"&&this.onIframeLoad(0)},getFrameId(t){return`dashboard-app--frame-${this.position}-${t}`},onIframeLoad(t){const n=document.getElementById(this.getFrameId(t)),a={event:"appContext",data:this.dashboardAppContext};n.contentWindow.postMessage(JSON.stringify(a),"*"),this.iframeLoading=!1}}},OHe={key:0,class:"dashboard-app--container"},NHe=["id","src","onLoad"];function xHe(t,n,a,e,s,r){const o=H("LoadingState");return s.hasOpenedAtleastOnce?(p(),g("div",OHe,[(p(!0),g(de,null,Ae(a.config,(i,l)=>(p(),g("div",{key:l,class:"dashboard-app--list"},[s.iframeLoading?(p(),L(o,{key:0,message:t.$t("DASHBOARD_APPS.LOADING_MESSAGE"),class:"dashboard-app_loading-container"},null,8,["message"])):O("v-if",!0),i.type==="frame"&&i.url?(p(),g("iframe",{key:1,id:r.getFrameId(l),src:i.url,onLoad:()=>r.onIframeLoad(l)},null,40,NHe)):O("v-if",!0)]))),128))])):O("v-if",!0)}const RHe=G(CHe,[["render",xHe],["__scopeId","data-v-ea090d96"],["__file","/app/app/javascript/dashboard/components/widgets/DashboardApp/Frame.vue"]]),wHe={__name:"OnboardingFeatureCard",props:{imageSrc:{type:String,default:""},imageAlt:{type:String,default:""},title:{type:String,default:""},description:{type:String,default:""},to:{type:String,default:""},linkText:{type:String,default:""}},setup(t,{expose:n}){n();const a={};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},MHe={class:"h-full w-full bg-n-background border border-n-weak rounded-lg p-4 flex flex-col"},LHe={class:"flex-1 flex items-center justify-center"},DHe=["src","alt"],PHe={class:"mt-auto"},kHe={class:"text-base text-n-slate-12 font-interDisplay font-semibold tracking-[0.3px]"},BHe={class:"text-n-slate-11 text-sm"};function FHe(t,n,a,e,s,r){const o=H("router-link");return p(),g("div",MHe,[f("div",LHe,[f("img",{src:a.imageSrc,alt:a.imageAlt,class:"h-36 w-auto mx-auto"},null,8,DHe)]),f("div",PHe,[f("p",kHe,C(a.title),1),f("p",BHe,C(a.description),1),a.to?(p(),L(o,{key:0,to:{name:a.to},class:"no-underline text-n-brand text-sm font-medium"},{default:z(()=>[f("span",null,C(a.linkText),1),n[0]||(n[0]=f("span",{class:"ml-2"},C(""),-1))]),_:1},8,["to"])):O("v-if",!0)])])}const UHe=G(wHe,[["render",FHe],["__file","/app/app/javascript/dashboard/components/widgets/conversation/OnboardingFeatureCard.vue"]]),$He={__name:"OnboardingView",setup(t,{expose:n}){n();const a=xt(),{t:e}=Q(),s=S(()=>a["globalConfig/get"].value),r=S(()=>a.getCurrentUser.value),o=S(()=>{const l=new Date().getHours();let c;return l<12?c="ONBOARDING.GREETING_MORNING":l<18?c="ONBOARDING.GREETING_AFTERNOON":c="ONBOARDING.GREETING_EVENING",e(c,{name:r.value.name,installationName:s.value.installationName})}),i={getters:a,t:e,globalConfig:s,currentUser:r,greetingMessage:o,OnboardingFeatureCard:UHe,computed:S,get useI18n(){return Q},get useStoreGetters(){return xt}};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}},GHe={class:"min-h-screen lg:max-w-5xl max-w-4xl mx-auto grid grid-cols-2 grid-rows-[auto_1fr_1fr] auto-rows-min gap-4 p-8 w-full font-inter overflow-auto"},VHe={class:"col-span-full self-start"},HHe={class:"text-xl font-semibold text-n-slate-12 font-interDisplay tracking-[0.3px]"},jHe={class:"text-n-slate-11 max-w-2xl text-base"};function WHe(t,n,a,e,s,r){return p(),g("div",GHe,[f("div",VHe,[f("p",HHe,C(e.greetingMessage),1),f("p",jHe,C(t.$t("ONBOARDING.DESCRIPTION",{installationName:e.globalConfig.installationName})),1)]),v(e.OnboardingFeatureCard,{"image-src":"/dashboard/images/onboarding/omnichannel-inbox.png","image-alt":"Omnichannel",to:"settings_inbox_new",title:t.$t("ONBOARDING.ALL_CONVERSATION.TITLE"),description:t.$t("ONBOARDING.ALL_CONVERSATION.DESCRIPTION"),"link-text":t.$t("ONBOARDING.ALL_CONVERSATION.NEW_LINK")},null,8,["title","description","link-text"]),v(e.OnboardingFeatureCard,{"image-src":"/dashboard/images/onboarding/teams.png","image-alt":"Teams",to:"settings_teams_new",title:t.$t("ONBOARDING.TEAM_MEMBERS.TITLE"),description:t.$t("ONBOARDING.TEAM_MEMBERS.DESCRIPTION"),"link-text":t.$t("ONBOARDING.TEAM_MEMBERS.NEW_LINK")},null,8,["title","description","link-text"]),v(e.OnboardingFeatureCard,{"image-src":"/dashboard/images/onboarding/canned-responses.png","image-alt":"Canned responses",to:"canned_list",title:t.$t("ONBOARDING.CANNED_RESPONSES.TITLE"),description:t.$t("ONBOARDING.CANNED_RESPONSES.DESCRIPTION"),"link-text":t.$t("ONBOARDING.CANNED_RESPONSES.NEW_LINK")},null,8,["title","description","link-text"]),v(e.OnboardingFeatureCard,{"image-src":"/dashboard/images/onboarding/labels.png","image-alt":"Labels",to:"labels_list",title:t.$t("ONBOARDING.LABELS.TITLE"),description:t.$t("ONBOARDING.LABELS.DESCRIPTION"),"link-text":t.$t("ONBOARDING.LABELS.NEW_LINK")},null,8,["title","description","link-text"])])}const zHe=G($He,[["render",WHe],["__file","/app/app/javascript/dashboard/components/widgets/conversation/OnboardingView.vue"]]),YHe={props:{customClass:{type:String,default:""}}};function KHe(t,n,a,e,s,r){return p(),g("kbd",{class:oe(["hotkey p-0.5 min-w-[1rem] uppercase",a.customClass])},[qe(t.$slots,"default")],2)}const g1=G(YHe,[["render",KHe],["__file","/app/app/javascript/dashboard/components/base/Hotkey.vue"]]),XHe={components:{Hotkey:g1},data(){return{keyShortcuts:[{key:"K",description:this.$t("CONVERSATION.EMPTY_STATE.CMD_BAR")},{key:"/",description:this.$t("CONVERSATION.EMPTY_STATE.KEYBOARD_SHORTCUTS")}]}}},qHe={class:"flex flex-col gap-2 mt-9"},ZHe={class:"flex items-center gap-2"},QHe={class:"text-sm font-medium text-center text-n-slate-12"};function JHe(t,n,a,e,s,r){const o=H("Hotkey");return p(),g("div",qHe,[(p(!0),g(de,null,Ae(s.keyShortcuts,i=>(p(),g("div",{key:i.key,class:"flex items-center gap-2"},[f("div",ZHe,[v(o,{"custom-class":"w-8 h-6 text-lg font-medium text-n-slate-12 outline outline-n-container outline-1 bg-n-alpha-3"},{default:z(()=>[...n[0]||(n[0]=[Oe("  ")])]),_:1}),v(o,{"custom-class":"w-8 h-6 text-xs font-medium text-n-slate-12 outline outline-n-container outline-1 bg-n-alpha-3"},{default:z(()=>[Oe(C(i.key),1)]),_:2},1024)]),f("span",QHe,C(i.description),1)]))),128))])}const eje=G(XHe,[["render",JHe],["__file","/app/app/javascript/dashboard/components/widgets/conversation/EmptyState/FeaturePlaceholder.vue"]]),tje="/vite-dev/assets/no-chat-dark-BSWrQBd3.svg",nje="/vite-dev/assets/no-chat-okxWD-4P.svg",aje={components:{FeaturePlaceholder:eje},props:{message:{type:String,required:!0}}},sje={class:"flex flex-col items-center justify-center h-full"},oje={class:"text-sm text-n-slate-12 font-medium text-center"};function rje(t,n,a,e,s,r){const o=H("FeaturePlaceholder");return p(),g("div",sje,[n[1]||(n[1]=f("img",{class:"m-4 w-32 hidden dark:block",src:tje,alt:"No Chat dark"},null,-1)),n[2]||(n[2]=f("img",{class:"m-4 w-32 block dark:hidden",src:nje,alt:"No Chat"},null,-1)),f("span",oje,[Oe(C(a.message)+" ",1),n[0]||(n[0]=f("br",null,null,-1))]),O(" Cmd bar, keyboard shortcuts placeholder "),v(o)])}const ije=G(aje,[["render",rje],["__file","/app/app/javascript/dashboard/components/widgets/conversation/EmptyState/EmptyStateMessage.vue"]]),lje={components:{OnboardingView:zHe,EmptyStateMessage:ije},props:{isOnExpandedLayout:{type:Boolean,default:!1}},setup(){const{isAdmin:t}=Es(),{accountScopedUrl:n}=Ut();return{isAdmin:t,accountScopedUrl:n}},computed:{..._t({currentChat:"getSelectedChat",allConversations:"getAllConversations",inboxesList:"inboxes/getInboxes",uiFlags:"inboxes/getUIFlags",loadingChatList:"getChatListLoadingStatus"}),loadingIndicatorMessage(){return this.uiFlags.isFetching?this.$t("CONVERSATION.LOADING_INBOXES"):this.$t("CONVERSATION.LOADING_CONVERSATIONS")},conversationMissingMessage(){return this.isOnExpandedLayout?this.$t("CONVERSATION.404"):this.$t("CONVERSATION.SELECT_A_CONVERSATION")},newInboxURL(){return this.accountScopedUrl("settings/inboxes/new")},emptyClassName(){return!this.inboxesList.length&&!this.uiFlags.isFetching&&!this.loadingChatList&&this.isAdmin?"h-full overflow-auto w-full":"flex-1 min-w-0 px-0 flex flex-col items-center justify-center h-full"}}},cje={key:1,class:"clearfix mx-auto"},dje={class:"flex flex-col items-center justify-center h-full"};function uje(t,n,a,e,s,r){const o=H("woot-loading-state"),i=H("OnboardingView"),l=H("EmptyStateMessage");return p(),g("div",{class:oe(r.emptyClassName)},[t.uiFlags.isFetching||t.loadingChatList?(p(),L(o,{key:0,message:r.loadingIndicatorMessage},null,8,["message"])):O("v-if",!0),O(" No inboxes attached "),!t.inboxesList.length&&!t.uiFlags.isFetching&&!t.loadingChatList?(p(),g("div",cje,[e.isAdmin?(p(),L(i,{key:0})):(p(),L(l,{key:1,message:t.$t("CONVERSATION.NO_INBOX_AGENT")},null,8,["message"]))])):!t.uiFlags.isFetching&&!t.loadingChatList?(p(),g(de,{key:2},[O(" Show empty state images if not loading "),f("div",dje,[O(" No conversations available "),t.allConversations.length?t.allConversations.length&&!t.currentChat.id?(p(),L(l,{key:1,message:r.conversationMissingMessage},null,8,["message"])):O("v-if",!0):(p(),L(l,{key:0,message:t.$t("CONVERSATION.NO_MESSAGE_1")},null,8,["message"]))])],2112)):O("v-if",!0)],2)}const pje=G(lje,[["render",uje],["__file","/app/app/javascript/dashboard/components/widgets/conversation/EmptyState/EmptyState.vue"]]);class fje extends Xs{constructor(){super("integrations",{accountScoped:!0}),this.conversation_events=["summarize","reply_suggestion","label_suggestion"],this.message_events=["rephrase"]}processEvent({type:n="rephrase",content:a,tone:e,conversationId:s,hookId:r}){let o={tone:e,content:a};return this.conversation_events.includes(n)&&(o={conversation_display_id:s}),axios.post(`${this.url}/hooks/${r}/process_event`,{event:{name:n,data:o}})}}const mO=new fje,mje=t=>t.toLowerCase().split(",").filter(n=>n.trim()).map(n=>n.trim()).filter((n,a,e)=>e.indexOf(n)===a);function fp(){const t=Fe(),n=xt(),{t:a}=Q(),e=S(()=>n["integrations/getUIFlags"].value),s=le("integrations/getAppIntegrations"),r=le("getSelectedChat"),o=le("draftMessages/getReplyEditorMode"),i=S(()=>{var T;return(T=s.value.find(I=>I.id==="openai"&&!!I.hooks.length))==null?void 0:T.hooks[0]}),l=S(()=>!!i.value),c=S(()=>{if(i.value){const{settings:T={}}=i.value||{};return T.label_suggestion}return!1}),d=S(()=>e.value.isFetching),u=S(()=>{var T;return(T=i.value)==null?void 0:T.id}),m=S(()=>{var T;return(T=r.value)==null?void 0:T.id}),h=S(()=>`draft-${m.value}-${o.value}`),_=S(()=>n["draftMessages/get"].value(h.value)),E=async()=>{s.value.length||await t.dispatch("integrations/get")},y=async(T,I)=>{const N=Xf[T.toUpperCase()];N&&Nt(N,{type:T,...I})},b=async()=>{if(!m.value)return[];try{const T=await mO.processEvent({type:"label_suggestion",hookId:u.value,conversationId:m.value}),{data:{message:I}}=T;return mje(I)}catch{return[]}},A=async(T="rephrase")=>{var I;try{const N=await mO.processEvent({hookId:u.value,type:T,content:_.value,conversationId:m.value}),{data:{message:x}}=N;return x}catch(N){const x=N.response.data.error,R=((I=x==null?void 0:x.error)==null?void 0:I.message)||a("INTEGRATION_SETTINGS.OPEN_AI.GENERATE_ERROR");return Z(R),""}};return Pe(()=>{E()}),{draftMessage:_,uiFlags:e,appIntegrations:s,currentChat:r,replyMode:o,isAIIntegrationEnabled:l,isLabelSuggestionFeatureEnabled:c,isFetchingAppIntegrations:d,fetchIntegrationsIfRequired:E,recordAnalytics:y,fetchLabelSuggestions:b,processEvent:A}}const hO=[],hje={mounted(){const t=this.getKeyboardEvents();if(t){const n=this.wrapEventsInKeybindingsHandler(t),a=j4(n);this.addEventHandler(a)}},unmounted(){var t;if(this.$el&&((t=this.$el.dataset)!=null&&t.keydownHandlerIndex)){const n=hO[this.$el.dataset.keydownHandlerIndex];document.removeEventListener("keydown",n)}},methods:{addEventHandler(t){const n=hO.push(t)-1,a=this.getElementToBind();a&&a.dataset&&(document.addEventListener("keydown",t),a.dataset.keydownHandlerIndex=n)},getElementToBind(){return this.$el},getKeyboardEvents(){return null},wrapEventsInKeybindingsHandler(t){const n={};return Object.keys(t).forEach(a=>{n[a]=this.keydownWrapper(t[a])}),n},keydownWrapper(t){return n=>{const a=typeof t=="function"?t:t.action,e=typeof t=="function"?!1:t.allowOnFocusedInput;V4(n)&&(H4(n)&&n.target.blur(),!e)||a(n)}}}},_je={__name:"ReplyToMessage",props:{message:{type:Object,required:!0}},emits:["dismiss"],setup(t,{expose:n,emit:a}){n();const s={emit:a,MessagePreview:eD,Button:Se};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}},gje={class:"reply-editor bg-n-slate-9/10 rounded-md py-1 pl-2 pr-1 text-xs tracking-wide mt-2 flex items-center gap-1.5 -mx-2"},bje={class:"flex-grow gap-1 mt-px text-xs truncate"};function vje(t,n,a,e,s,r){const o=H("fluent-icon"),i=nt("tooltip");return p(),g("div",gje,[v(o,{class:"flex-shrink-0 icon",icon:"arrow-reply",size:"14"}),f("div",bje,[Oe(C(t.$t("CONVERSATION.REPLYBOX.REPLYING_TO"))+" ",1),v(e.MessagePreview,{message:a.message,"show-message-type":!1,"default-empty-message":t.$t("CONVERSATION.REPLY_MESSAGE_NOT_FOUND"),class:"inline"},null,8,["message","default-empty-message"])]),ce(v(e.Button,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",onClick:n[0]||(n[0]=Ve(l=>e.emit("dismiss"),["stop"]))},null,512),[[i,t.$t("CONVERSATION.REPLYBOX.DISMISS_REPLY")]])])}const Eje=G(_je,[["render",vje],["__file","/app/app/javascript/dashboard/components/widgets/conversation/ReplyToMessage.vue"]]),Sje={__name:"AttachmentsPreview",props:{attachments:{type:Array,default:()=>[]}},emits:["removeAttachment"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=S(()=>e.attachments.filter(m=>!(m!=null&&m.isRecordedAudio))),o=S(()=>e.attachments.filter(m=>m.isRecordedAudio)),u={props:e,emit:s,nonRecordedAudioAttachments:r,recordedAudioAttachments:o,onRemoveAttachment:m=>{s("removeAttachment",r.value.filter((h,_)=>_!==m).concat(o.value))},formatFileSize:m=>{const h=m.byte_size||m.size;return qT(h,0)},isTypeImage:m=>(m.content_type||m.type).includes("image"),fileName:m=>m.filename||m.name,computed:S,get formatBytes(){return qT},Button:Se};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}},Tje={class:"flex overflow-auto max-h-[12.5rem]"},Aje={class:"max-w-[4rem] flex-shrink-0 w-6 flex items-center"},yje=["src"],Ije={key:1,class:"relative w-6 h-6 text-lg text-left -top-px"},Cje={class:"max-w-3/5 min-w-[50%] overflow-hidden text-ellipsis"},Oje={class:"h-4 overflow-hidden text-sm font-medium text-ellipsis whitespace-nowrap"},Nje={class:"w-[30%] justify-center"},xje={class:"overflow-hidden text-xs text-ellipsis whitespace-nowrap"},Rje={class:"flex items-center justify-center"};function wje(t,n,a,e,s,r){return p(),g("div",Tje,[(p(!0),g(de,null,Ae(e.nonRecordedAudioAttachments,(o,i)=>(p(),g("div",{key:o.id,class:"flex items-center p-1 bg-n-slate-3 gap-1 rounded-md w-[15rem] mb-1"},[f("div",Aje,[e.isTypeImage(o.resource)?(p(),g("img",{key:0,class:"object-cover w-6 h-6 rounded-sm",src:o.thumb},null,8,yje)):(p(),g("span",Ije,"  "))]),f("div",Cje,[f("span",Oje,C(e.fileName(o.resource)),1)]),f("div",Nje,[f("span",xje,C(e.formatFileSize(o.resource)),1)]),f("div",Rje,[v(e.Button,{ghost:"",slate:"",xs:"",icon:"i-lucide-x",onClick:l=>e.onRemoveAttachment(i)},null,8,["onClick"])])]))),128))])}const Mje=G(Sje,[["render",wje],["__file","/app/app/javascript/dashboard/components/widgets/AttachmentsPreview.vue"]]),Lje={__name:"EditorModeToggle",props:{mode:{type:String,default:ss.REPLY},disabled:{type:Boolean,default:!1}},emits:["toggleMode"],setup(t,{expose:n}){n();const a=t,e=xn("wootEditorReplyMode"),s=xn("wootEditorPrivateMode"),r=fr(e),o=fr(s),i=S(()=>a.disabled||a.mode===ss.NOTE),l=S(()=>`${(i.value?o.width.value:r.width.value)+16}px`),c=S(()=>`${i.value?r.width.value+16:0}px`),d={props:a,wootEditorReplyMode:e,wootEditorPrivateMode:s,replyModeSize:r,privateModeSize:o,isPrivate:i,width:l,translateValue:c,computed:S,useTemplateRef:xn,get useElementSize(){return fr},get REPLY_EDITOR_MODES(){return ss}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}},Dje=["disabled"];function Pje(t,n,a,e,s,r){return p(),g("button",{class:oe(["flex items-center w-auto h-8 p-1 transition-all border rounded-full bg-n-alpha-2 group relative duration-300 ease-in-out z-0",{"cursor-not-allowed":a.disabled}]),disabled:a.disabled,onClick:n[0]||(n[0]=o=>t.$emit("toggleMode"))},[f("div",{ref:"wootEditorReplyMode",class:"flex items-center gap-1 px-2 z-20"},C(t.$t("CONVERSATION.REPLYBOX.REPLY")),513),f("div",{ref:"wootEditorPrivateMode",class:"flex items-center gap-1 px-2 z-20"},C(t.$t("CONVERSATION.REPLYBOX.PRIVATE_NOTE")),513),f("div",{class:oe(["absolute shadow-sm rounded-full h-6 w-[var(--chip-width)] ease-in-out translate-x-[var(--translate-x)] rtl:translate-x-[var(--rtl-translate-x)] bg-n-solid-1",{"transition-all duration-300":!a.disabled}]),style:nn({"--chip-width":e.width,"--translate-x":e.translateValue,"--rtl-translate-x":"calc(-1 * var(--translate-x))"})},null,6)],10,Dje)}const kje=G(Lje,[["render",Pje],["__file","/app/app/javascript/dashboard/components/widgets/WootWriter/EditorModeToggle.vue"]]),Bje={name:"ReplyTopPanel",components:{NextButton:Se,EditorModeToggle:kje},props:{mode:{type:String,default:ss.REPLY},isReplyRestricted:{type:Boolean,default:!1},isMessageLengthReachingThreshold:{type:Boolean,default:()=>!1},charactersRemaining:{type:Number,default:()=>0}},emits:["setReplyMode","togglePopout"],setup(t,{emit:n}){const a=i=>{n("setReplyMode",i)},e=()=>{t.isReplyRestricted||a(ss.REPLY)},s=()=>{a(ss.NOTE)},r=()=>{const i=t.mode===ss.REPLY?ss.NOTE:ss.REPLY;a(i)};return jn({"Alt+KeyP":{action:()=>s(),allowOnFocusedInput:!0},"Alt+KeyL":{action:()=>e(),allowOnFocusedInput:!0}}),{handleModeToggle:r,handleReplyClick:e,handleNoteClick:s,REPLY_EDITOR_MODES:ss}},computed:{replyButtonClass(){return{"is-active":this.mode===ss.REPLY}},noteButtonClass(){return{"is-active":this.mode===ss.NOTE}},charLengthClass(){return this.charactersRemaining<0?"text-n-ruby-9":"text-n-slate-11"},characterLengthWarning(){return this.charactersRemaining<0?`${-this.charactersRemaining} ${NT.NEGATIVE}`:`${this.charactersRemaining} ${NT.UNDER_50}`}}},Fje={class:"flex justify-between h-[3.25rem] gap-2 ltr:pl-3 rtl:pr-3"},Uje={class:"flex items-center mx-4 my-0"},$je={key:0,class:"text-xs"};function Gje(t,n,a,e,s,r){const o=H("EditorModeToggle"),i=H("NextButton");return p(),g("div",Fje,[v(o,{mode:a.mode,disabled:a.isReplyRestricted,class:"mt-3",onToggleMode:e.handleModeToggle},null,8,["mode","disabled","onToggleMode"]),f("div",Uje,[a.isMessageLengthReachingThreshold?(p(),g("div",$je,[f("span",{class:oe(r.charLengthClass)},C(r.characterLengthWarning),3)])):O("v-if",!0)]),v(i,{ghost:"",class:"ltr:rounded-bl-md rtl:rounded-br-md ltr:rounded-br-none rtl:rounded-bl-none ltr:rounded-tl-none rtl:rounded-tr-none text-n-slate-11 ltr:rounded-tr-[11px] rtl:rounded-tl-[11px]",icon:"i-lucide-maximize-2",onClick:n[0]||(n[0]=l=>t.$emit("togglePopout"))})])}const Vje=G(Bje,[["render",Gje],["__file","/app/app/javascript/dashboard/components/widgets/WootWriter/ReplyTopPanel.vue"]]),Tb=t=>t.length?t.replace(/\s+/g,"").split(",").every(a=>br.$validator(a)):!0,Hje={components:{ButtonV4:Se},props:{ccEmails:{type:String,default:""},bccEmails:{type:String,default:""},toEmails:{type:String,default:""}},emits:["update:bccEmails","update:ccEmails","update:toEmails"],setup(){return{v$:rt()}},data(){return{showBcc:!1,ccEmailsVal:"",bccEmailsVal:"",toEmailsVal:""}},watch:{bccEmails(t){t!==this.bccEmailsVal&&(this.bccEmailsVal=t)},ccEmails(t){t!==this.ccEmailsVal&&(this.ccEmailsVal=t)},toEmails(t){t!==this.toEmailsVal&&(this.toEmailsVal=t)}},mounted(){this.ccEmailsVal=this.ccEmails,this.bccEmailsVal=this.bccEmails,this.toEmailsVal=this.toEmails},validations:{ccEmailsVal:{hasValidEmails(t){return Tb(t)}},bccEmailsVal:{hasValidEmails(t){return Tb(t)}},toEmailsVal:{hasValidEmails(t){return Tb(t)}}},methods:{handleAddBcc(){this.showBcc=!0},onBlur(){this.v$.$touch(),this.$emit("update:bccEmails",this.bccEmailsVal),this.$emit("update:ccEmails",this.ccEmailsVal),this.$emit("update:toEmails",this.toEmailsVal)}}},jje={key:0},Wje={class:"input-group-label"},zje={class:"flex-1 min-w-0 m-0 rounded-none whitespace-nowrap"},Yje={class:"input-group-wrap"},Kje={class:"input-group-label"},Xje={class:"flex-1 min-w-0 m-0 rounded-none whitespace-nowrap"},qje={key:0,class:"message"},Zje={key:1,class:"input-group-wrap"},Qje={class:"input-group-label"},Jje={class:"flex-1 min-w-0 m-0 rounded-none whitespace-nowrap"},eWe={key:0,class:"message"};function tWe(t,n,a,e,s,r){const o=H("woot-input"),i=H("ButtonV4");return p(),g("div",null,[a.toEmails?(p(),g("div",jje,[f("div",{class:oe(["input-group small",{error:e.v$.toEmailsVal.$error}])},[f("label",Wje,C(t.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.TO")),1),f("div",zje,[v(o,{modelValue:e.v$.toEmailsVal.$model,"onUpdate:modelValue":n[0]||(n[0]=l=>e.v$.toEmailsVal.$model=l),type:"text",class:oe(["[&>input]:!mb-0 [&>input]:border-transparent [&>input]:!outline-none [&>input]:h-8 [&>input]:!text-sm [&>input]:!border-0 [&>input]:border-none [&>input]:!bg-transparent dark:[&>input]:!bg-transparent",{error:e.v$.toEmailsVal.$error}]),placeholder:t.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.CC.PLACEHOLDER"),onBlur:r.onBlur},null,8,["modelValue","class","placeholder","onBlur"])])],2)])):O("v-if",!0),f("div",Yje,[f("div",{class:oe(["input-group small",{error:e.v$.ccEmailsVal.$error}])},[f("label",Kje,C(t.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.CC.LABEL")),1),f("div",Xje,[v(o,{modelValue:e.v$.ccEmailsVal.$model,"onUpdate:modelValue":n[1]||(n[1]=l=>e.v$.ccEmailsVal.$model=l),class:oe(["[&>input]:!mb-0 [&>input]:border-transparent [&>input]:!outline-none [&>input]:h-8 [&>input]:!text-sm [&>input]:!border-0 [&>input]:border-none [&>input]:!bg-transparent dark:[&>input]:!bg-transparent",{error:e.v$.ccEmailsVal.$error}]),type:"text",placeholder:t.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.CC.PLACEHOLDER"),onBlur:r.onBlur},null,8,["modelValue","class","placeholder","onBlur"])]),s.showBcc?O("v-if",!0):(p(),L(i,{key:0,label:t.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.ADD_BCC"),ghost:"",xs:"",primary:"",onClick:r.handleAddBcc},null,8,["label","onClick"]))],2),e.v$.ccEmailsVal.$error?(p(),g("span",qje,C(t.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.CC.ERROR")),1)):O("v-if",!0)]),s.showBcc?(p(),g("div",Zje,[f("div",{class:oe(["input-group small",{error:e.v$.bccEmailsVal.$error}])},[f("label",Qje,C(t.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.BCC.LABEL")),1),f("div",Jje,[v(o,{modelValue:e.v$.bccEmailsVal.$model,"onUpdate:modelValue":n[2]||(n[2]=l=>e.v$.bccEmailsVal.$model=l),type:"text",class:oe(["[&>input]:!mb-0 [&>input]:border-transparent [&>input]:!outline-none [&>input]:h-8 [&>input]:!text-sm [&>input]:!border-0 [&>input]:border-none [&>input]:!bg-transparent dark:[&>input]:!bg-transparent",{error:e.v$.bccEmailsVal.$error}]),placeholder:t.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.BCC.PLACEHOLDER"),onBlur:r.onBlur},null,8,["modelValue","class","placeholder","onBlur"])])],2),e.v$.bccEmailsVal.$error?(p(),g("span",eWe,C(t.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.BCC.ERROR")),1)):O("v-if",!0)])):O("v-if",!0)])}const nWe=G(Hje,[["render",tWe],["__scopeId","data-v-e14b457e"],["__file","/app/app/javascript/dashboard/components/widgets/conversation/ReplyEmailHead.vue"]]);class aWe extends Xs{constructor(){super("integrations/dyte",{accountScoped:!0})}createAMeeting(n){return axios.post(`${this.url}/create_a_meeting`,{conversation_id:n})}addParticipantToMeeting(n){return axios.post(`${this.url}/add_participant_to_meeting`,{message_id:n})}}const cE=new aWe,sWe={components:{NextButton:Se},props:{conversationId:{type:Number,default:0}},data(){return{isLoading:!1}},computed:{..._t({appIntegrations:"integrations/getAppIntegrations"}),isVideoIntegrationEnabled(){return this.appIntegrations.find(t=>t.id==="dyte"&&!!t.hooks.length)}},mounted(){this.appIntegrations.length||this.$store.dispatch("integrations/get")},methods:{async onClick(){this.isLoading=!0;try{await cE.createAMeeting(this.conversationId)}catch{Z(this.$t("INTEGRATION_SETTINGS.DYTE.CREATE_ERROR"))}finally{this.isLoading=!1}}}};function oWe(t,n,a,e,s,r){const o=H("NextButton"),i=nt("tooltip");return r.isVideoIntegrationEnabled?ce((p(),L(o,{key:0,icon:"i-ph-video-camera",slate:"",faded:"",sm:"",onClick:r.onClick},null,8,["onClick"])),[[i,t.$t("INTEGRATION_SETTINGS.DYTE.START_VIDEO_CALL_HELP_TEXT"),void 0,{"top-end":!0}]]):O("v-if",!0)}const rWe=G(sWe,[["render",oWe],["__file","/app/app/javascript/dashboard/components/widgets/VideoCallButton.vue"]]),iWe={components:{NextButton:Se},emits:["close"],setup(){const{updateUISettings:t}=Ct(),{recordAnalytics:n}=fp(),a=rt();return{updateUISettings:t,v$:a,recordAnalytics:n}},data(){return{value:""}},validations:{value:{required:Ge}},methods:{onClose(){this.$emit("close")},onDismiss(){Z(this.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.DISMISS_MESSAGE")),this.updateUISettings({is_open_ai_cta_modal_dismissed:!0}),this.onClose()},async finishOpenAI(){var n,a;const t={app_id:"openai",settings:{api_key:this.value}};try{await this.$store.dispatch("integrations/createHook",t),this.alertMessage=this.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.SUCCESS_MESSAGE"),this.recordAnalytics(Xf.ADDED_AI_INTEGRATION_VIA_CTA_BUTTON),this.onClose()}catch(e){const s=(a=(n=e==null?void 0:e.response)==null?void 0:n.data)==null?void 0:a.message;this.alertMessage=s||this.$t("INTEGRATION_APPS.ADD.API.ERROR_MESSAGE")}finally{Z(this.alertMessage)}},openOpenAIDoc(){window.open("https://www.chatwoot.com/blog/v2-17","_blank")}}},lWe={class:"flex-1 min-w-0 px-0"},cWe={class:"w-full mt-2"},dWe={class:"flex flex-row justify-between w-full gap-2 px-0 py-2"},uWe={class:"flex items-center gap-1"};function pWe(t,n,a,e,s,r){const o=H("woot-modal-header"),i=H("woot-input"),l=H("NextButton");return p(),g("div",lWe,[v(o,{"header-title":t.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.TITLE"),"header-content":t.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.DESC")},null,8,["header-title","header-content"]),f("form",{class:"flex flex-col flex-wrap modal-content",onSubmit:n[1]||(n[1]=Ve((...c)=>r.finishOpenAI&&r.finishOpenAI(...c),["prevent"]))},[f("div",cWe,[v(i,{modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=c=>s.value=c),type:"text",class:oe({error:e.v$.value.$error}),placeholder:t.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.KEY_PLACEHOLDER"),onBlur:e.v$.value.$touch},null,8,["modelValue","class","placeholder","onBlur"])]),f("div",dWe,[v(l,{ghost:"",type:"button",class:"!px-3",label:t.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.BUTTONS.NEED_HELP"),onClick:Ve(r.openOpenAIDoc,["prevent"])},null,8,["label","onClick"]),f("div",uWe,[v(l,{faded:"",slate:"",type:"reset",label:t.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.BUTTONS.DISMISS"),onClick:Ve(r.onDismiss,["prevent"])},null,8,["label","onClick"]),v(l,{type:"submit",disabled:e.v$.value.$invalid,label:t.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.BUTTONS.FINISH")},null,8,["disabled","label"])])])],32)])}const fWe=G(iWe,[["render",pWe],["__file","/app/app/javascript/dashboard/components/widgets/AICTAModal.vue"]]),mWe={},hWe={class:"animation-container margin-top-1"},_We={class:"ai-typing--wrap"};function gWe(t,n){const a=H("fluent-icon");return p(),g("div",hWe,[f("div",_We,[v(a,{icon:"wand",size:"14",class:"ai-typing--icon"}),f("label",null,C(t.$t("INTEGRATION_SETTINGS.OPEN_AI.ASSISTANCE_MODAL.AI_WRITING")),1)]),n[0]||(n[0]=f("span",{class:"loader"},null,-1)),n[1]||(n[1]=f("span",{class:"loader"},null,-1)),n[2]||(n[2]=f("span",{class:"loader"},null,-1))])}const bWe=G(mWe,[["render",gWe],["__scopeId","data-v-2ddeadaa"],["__file","/app/app/javascript/dashboard/components/widgets/AILoader.vue"]]),vWe={components:{AILoader:bWe,NextButton:Se},props:{aiOption:{type:String,required:!0}},emits:["close","applyText"],setup(){const{formatMessage:t}=ta(),{draftMessage:n,processEvent:a,recordAnalytics:e}=fp();return{draftMessage:n,processEvent:a,recordAnalytics:e,formatMessage:t}},data(){return{generatedContent:"",isGenerating:!0}},computed:{headerTitle(){var n;const t=(n=this.aiOption)==null?void 0:n.toUpperCase();return t?this.$t("INTEGRATION_SETTINGS.OPEN_AI.WITH_AI",{option:this.$t(`INTEGRATION_SETTINGS.OPEN_AI.OPTIONS.${t}`)}):""}},mounted(){this.generateAIContent(this.aiOption)},methods:{onClose(){this.$emit("close")},async generateAIContent(t="rephrase"){this.isGenerating=!0,this.generatedContent=await this.processEvent(t),this.isGenerating=!1},applyText(){this.recordAnalytics(this.aiOption),this.$emit("applyText",this.generatedContent),this.onClose()}}},EWe={class:"flex flex-col"},SWe={key:0,class:"w-full"},TWe={class:"mt-1 text-base text-n-slate-12"},AWe={class:"mt-1 text-base text-n-slate-12"},yWe={key:1},IWe={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function CWe(t,n,a,e,s,r){const o=H("woot-modal-header"),i=H("AILoader"),l=H("NextButton"),c=nt("dompurify-html");return p(),g("div",EWe,[v(o,{"header-title":r.headerTitle},null,8,["header-title"]),f("form",{class:"flex flex-col w-full modal-content",onSubmit:n[0]||(n[0]=Ve((...d)=>r.applyText&&r.applyText(...d),["prevent"]))},[e.draftMessage?(p(),g("div",SWe,[f("h4",TWe,C(t.$t("INTEGRATION_SETTINGS.OPEN_AI.ASSISTANCE_MODAL.DRAFT_TITLE")),1),ce(f("p",null,null,512),[[c,e.formatMessage(e.draftMessage,!1)]]),f("h4",AWe,C(t.$t("INTEGRATION_SETTINGS.OPEN_AI.ASSISTANCE_MODAL.GENERATED_TITLE")),1)])):O("v-if",!0),f("div",null,[s.isGenerating?(p(),L(i,{key:0})):ce((p(),g("p",yWe,null,512)),[[c,e.formatMessage(s.generatedContent,!1)]])]),f("div",IWe,[v(l,{faded:"",slate:"",type:"reset",label:t.$t("INTEGRATION_SETTINGS.OPEN_AI.ASSISTANCE_MODAL.BUTTONS.CANCEL"),onClick:Ve(r.onClose,["prevent"])},null,8,["label","onClick"]),v(l,{type:"submit",disabled:!s.generatedContent,label:t.$t("INTEGRATION_SETTINGS.OPEN_AI.ASSISTANCE_MODAL.BUTTONS.APPLY")},null,8,["disabled","label"])])],32)])}const OWe=G(vWe,[["render",CWe],["__scopeId","data-v-4a525328"],["__file","/app/app/javascript/dashboard/components/widgets/AIAssistanceModal.vue"]]),NWe={__name:"AIAssistanceCTAButton",emits:["open"],setup(t,{expose:n,emit:a}){n();const e=a,r={emit:e,onClick:()=>{e("open")},NextButton:Se};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},xWe={class:"relative"};function RWe(t,n,a,e,s,r){return p(),g("div",xWe,[v(e.NextButton,{class:"cta-btn cta-btn-light dark:cta-btn-dark hover:cta-btn-light-hover dark:hover:cta-btn-dark-hover",label:t.$t("INTEGRATION_SETTINGS.OPEN_AI.AI_ASSIST"),icon:"i-ph-magic-wand",sm:"",onClick:e.onClick},null,8,["label"]),n[0]||(n[0]=f("div",{class:"radar-ping-animation absolute top-0 right-0 -mt-1 -mr-1 rounded-full w-3 h-3 bg-n-brand"},null,-1)),n[1]||(n[1]=f("div",{class:"absolute top-0 right-0 -mt-1 -mr-1 rounded-full w-3 h-3 bg-n-brand opacity-50"},null,-1))])}const wWe=G(NWe,[["render",RWe],["__scopeId","data-v-f663446a"],["__file","/app/app/javascript/dashboard/components/widgets/AIAssistanceCTAButton.vue"]]),MWe={components:{NextButton:Se,AIAssistanceModal:OWe,AICTAModal:fWe,AIAssistanceCTAButton:wWe},emits:["replaceText"],setup(t,{emit:n}){const{uiSettings:a,updateUISettings:e}=Ct(),{isAIIntegrationEnabled:s,draftMessage:r,recordAnalytics:o}=fp(),{isAdmin:i}=Es(),l=P(""),c=u=>{l.value=u};return jn({"$mod+KeyZ":{action:()=>{l.value&&(n("replaceText",l.value),l.value="")},allowOnFocusedInput:!0}}),{uiSettings:a,updateUISettings:e,isAdmin:i,initialMessage:l,initializeMessage:c,recordAnalytics:o,isAIIntegrationEnabled:s,draftMessage:r}},data:()=>({showAIAssistanceModal:!1,showAICtaModal:!1,aiOption:""}),computed:{..._t({isAChatwootInstance:"globalConfig/isAChatwootInstance"}),isAICTAModalDismissed(){return this.uiSettings.is_open_ai_cta_modal_dismissed},shouldShowAIAssistCTAButtonForAdmin(){return this.isAdmin&&!this.isAIIntegrationEnabled&&!this.isAICTAModalDismissed&&this.isAChatwootInstance},shouldShowAIAssistCTAButton(){return this.isAIIntegrationEnabled&&!this.isAICTAModalDismissed}},mounted(){Mt.on(sGe,this.onAIAssist),this.initializeMessage(this.draftMessage)},methods:{hideAIAssistanceModal(){this.recordAnalytics("DISMISS_AI_SUGGESTION",{aiOption:this.aiOption}),this.showAIAssistanceModal=!1},openAIAssist(){this.isAICTAModalDismissed||this.updateUISettings({is_open_ai_cta_modal_dismissed:!0}),this.initializeMessage(this.draftMessage),document.querySelector("ninja-keys").open({parent:"ai_assist"})},hideAICtaModal(){this.showAICtaModal=!1},openAICta(){this.showAICtaModal=!0},onAIAssist(t){this.aiOption=t,this.showAIAssistanceModal=!0},insertText(t){this.$emit("replaceText",t)}}},LWe={key:0,class:"relative"},DWe={key:1,class:"relative"};function PWe(t,n,a,e,s,r){const o=H("AIAssistanceCTAButton"),i=H("NextButton"),l=H("AIAssistanceModal"),c=H("woot-modal"),d=H("AICTAModal"),u=nt("tooltip");return p(),g("div",null,[e.isAIIntegrationEnabled?(p(),g("div",LWe,[r.shouldShowAIAssistCTAButton?(p(),L(o,{key:0,onOpen:r.openAIAssist},null,8,["onOpen"])):ce((p(),L(i,{key:1,icon:"i-ph-magic-wand",slate:"",faded:"",sm:"",onClick:r.openAIAssist},null,8,["onClick"])),[[u,t.$t("INTEGRATION_SETTINGS.OPEN_AI.AI_ASSIST"),void 0,{"top-end":!0}]]),v(c,{show:t.showAIAssistanceModal,"onUpdate:show":n[0]||(n[0]=m=>t.showAIAssistanceModal=m),"on-close":r.hideAIAssistanceModal},{default:z(()=>[v(l,{"ai-option":t.aiOption,onApplyText:r.insertText,onClose:r.hideAIAssistanceModal},null,8,["ai-option","onApplyText","onClose"])]),_:1},8,["show","on-close"])])):r.shouldShowAIAssistCTAButtonForAdmin?(p(),g("div",DWe,[v(o,{onClick:r.openAICta},null,8,["onClick"]),v(c,{show:t.showAICtaModal,"onUpdate:show":n[1]||(n[1]=m=>t.showAICtaModal=m),"on-close":r.hideAICtaModal},{default:z(()=>[v(d,{onClose:r.hideAICtaModal},null,8,["onClose"])]),_:1},8,["show","on-close"])])):O("v-if",!0)])}const kWe=G(MWe,[["render",PWe],["__file","/app/app/javascript/dashboard/components/widgets/AIAssistanceButton.vue"]]),BWe={name:"ReplyBottomPanel",components:{NextButton:Se,FileUpload:V2,VideoCallButton:rWe,AIAssistanceButton:kWe},mixins:[Ad],props:{isNote:{type:Boolean,default:!1},onSend:{type:Function,default:()=>{}},sendButtonText:{type:String,default:""},recordingAudioDurationText:{type:String,default:"00:00"},inbox:{type:Object,default:()=>({})},showFileUpload:{type:Boolean,default:!1},showAudioRecorder:{type:Boolean,default:!1},onFileUpload:{type:Function,default:()=>{}},toggleEmojiPicker:{type:Function,default:()=>{}},toggleAudioRecorder:{type:Function,default:()=>{}},toggleAudioRecorderPlayPause:{type:Function,default:()=>{}},isRecordingAudio:{type:Boolean,default:!1},recordingAudioState:{type:String,default:""},isSendDisabled:{type:Boolean,default:!1},showEditorToggle:{type:Boolean,default:!1},isOnPrivateNote:{type:Boolean,default:!1},enableMultipleFileUpload:{type:Boolean,default:!0},enableWhatsAppTemplates:{type:Boolean,default:!1},enableContentTemplates:{type:Boolean,default:!1},conversationId:{type:Number,required:!0},message:{type:String,default:""},newConversationModalActive:{type:Boolean,default:!1},portalSlug:{type:String,required:!0},conversationType:{type:String,default:""},showQuotedReplyToggle:{type:Boolean,default:!1},quotedReplyEnabled:{type:Boolean,default:!1}},emits:["replaceText","toggleInsertArticle","toggleEditor","selectWhatsappTemplate","selectContentTemplate","toggleQuotedReply"],setup(){const{setSignatureFlagForInbox:t,fetchSignatureFlagFromUISettings:n}=Ct(),a=P(!1);return jn({"$mod+Alt+KeyA":{action:()=>{document.querySelector("#conversationAttachment").click()},allowOnFocusedInput:!0}}),{setSignatureFlagForInbox:t,fetchSignatureFlagFromUISettings:n,uploadRef:a}},data(){return{ALLOWED_FILE_TYPES:u2}},computed:{..._t({accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount",uiFlags:"integrations/getUIFlags"}),wrapClass(){return{"is-note-mode":this.isNote}},showAttachButton(){return this.showFileUpload||this.isNote},showAudioRecorderButton(){return this.isALineChannel?!1:this.isFeatureEnabledonAccount(this.accountId,pt.VOICE_RECORDER)&&this.showAudioRecorder},showAudioPlayStopButton(){return this.showAudioRecorder&&this.isRecordingAudio},isInstagramDM(){return this.conversationType==="instagram_direct_message"},allowedFileTypes(){var n,a;if(this.isOnPrivateNote)return this.ALLOWED_FILE_TYPES;let t=this.channelType||((n=this.inbox)==null?void 0:n.channel_type);return(this.isAnInstagramChannel||this.isInstagramDM)&&(t=ht.INSTAGRAM),Z3({channelType:t,medium:(a=this.inbox)==null?void 0:a.medium})},enableDragAndDrop(){return!this.newConversationModalActive},audioRecorderPlayStopIcon(){switch(this.recordingAudioState){case"playing":return"i-ph-pause";case"paused":return"i-ph-play";case"stopped":return"i-ph-play";default:return"i-ph-stop"}},showMessageSignatureButton(){return!this.isOnPrivateNote},sendWithSignature(){return this.fetchSignatureFlagFromUISettings(this.channelType)},signatureToggleTooltip(){return this.sendWithSignature?this.$t("CONVERSATION.FOOTER.DISABLE_SIGN_TOOLTIP"):this.$t("CONVERSATION.FOOTER.ENABLE_SIGN_TOOLTIP")},enableInsertArticleInReply(){return this.portalSlug},isFetchingAppIntegrations(){return this.uiFlags.isFetching},quotedReplyToggleTooltip(){return this.quotedReplyEnabled?this.$t("CONVERSATION.REPLYBOX.QUOTED_REPLY.DISABLE_TOOLTIP"):this.$t("CONVERSATION.REPLYBOX.QUOTED_REPLY.ENABLE_TOOLTIP")}},mounted(){CE.start()},methods:{toggleMessageSignature(){this.setSignatureFlagForInbox(this.channelType,!this.sendWithSignature)},replaceText(t){this.$emit("replaceText",t)},toggleInsertArticle(){this.$emit("toggleInsertArticle")}}},FWe={class:"left-wrap"},UWe={class:"flex fixed top-0 right-0 bottom-0 left-0 z-20 flex-col gap-2 justify-center items-center w-full h-full text-n-slate-12 bg-modal-backdrop-light dark:bg-modal-backdrop-dark"},$We={class:"text-2xl break-words text-n-slate-12"},GWe={class:"right-wrap"};function VWe(t,n,a,e,s,r){const o=H("NextButton"),i=H("FileUpload"),l=H("VideoCallButton"),c=H("AIAssistanceButton"),d=H("fluent-icon"),u=nt("tooltip");return p(),g("div",{class:oe(["flex justify-between p-3",r.wrapClass])},[f("div",FWe,[ce(v(o,{icon:"i-ph-smiley-sticker",slate:"",faded:"",sm:"",onClick:a.toggleEmojiPicker},null,8,["onClick"]),[[u,t.$t("CONVERSATION.REPLYBOX.TIP_EMOJI_ICON"),void 0,{"top-end":!0}]]),ce((p(),L(i,{ref:"uploadRef","input-id":"conversationAttachment",size:4096*4096,accept:r.allowedFileTypes,multiple:a.enableMultipleFileUpload,drop:r.enableDragAndDrop,"drop-directory":!1,data:{direct_upload_url:"/rails/active_storage/direct_uploads",direct_upload:!0},onInputFile:a.onFileUpload},{default:z(()=>[r.showAttachButton?ce((p(),L(o,{key:0,icon:"i-ph-paperclip",slate:"",faded:"",sm:""},null,512)),[[u,t.$t("CONVERSATION.REPLYBOX.TIP_ATTACH_ICON"),void 0,{"top-end":!0}]]):O("v-if",!0)]),_:1},8,["accept","multiple","drop","onInputFile"])),[[u,t.$t("CONVERSATION.REPLYBOX.TIP_ATTACH_ICON"),void 0,{"top-end":!0}]]),r.showAudioRecorderButton?ce((p(),L(o,{key:0,icon:a.isRecordingAudio?"i-ph-microphone-slash":"i-ph-microphone",slate:"",faded:"",sm:"",onClick:a.toggleAudioRecorder},null,8,["icon","onClick"])),[[u,t.$t("CONVERSATION.REPLYBOX.TIP_AUDIORECORDER_ICON"),void 0,{"top-end":!0}]]):O("v-if",!0),a.showEditorToggle?ce((p(),L(o,{key:1,icon:"i-ph-quotes",slate:"",faded:"",sm:"",onClick:n[0]||(n[0]=m=>t.$emit("toggleEditor"))},null,512)),[[u,t.$t("CONVERSATION.REPLYBOX.TIP_FORMAT_ICON"),void 0,{"top-end":!0}]]):O("v-if",!0),r.showAudioPlayStopButton?ce((p(),L(o,{key:2,icon:r.audioRecorderPlayStopIcon,slate:"",faded:"",sm:"",label:a.recordingAudioDurationText,onClick:a.toggleAudioRecorderPlayPause},null,8,["icon","label","onClick"])),[[u,t.$t("CONVERSATION.REPLYBOX.TIP_FORMAT_ICON"),void 0,{"top-end":!0}]]):O("v-if",!0),r.showMessageSignatureButton?ce((p(),L(o,{key:3,icon:"i-ph-signature",slate:"",faded:"",sm:"",onClick:r.toggleMessageSignature},null,8,["onClick"])),[[u,r.signatureToggleTooltip,void 0,{"top-end":!0}]]):O("v-if",!0),a.showQuotedReplyToggle?ce((p(),L(o,{key:4,icon:"i-ph-quotes",variant:a.quotedReplyEnabled?"solid":"faded",color:"slate",sm:"","aria-pressed":a.quotedReplyEnabled,onClick:n[1]||(n[1]=m=>t.$emit("toggleQuotedReply"))},null,8,["variant","aria-pressed"])),[[u,r.quotedReplyToggleTooltip,void 0,{"top-end":!0}]]):O("v-if",!0),a.enableWhatsAppTemplates?ce((p(),L(o,{key:5,icon:"i-ph-whatsapp-logo",slate:"",faded:"",sm:"",onClick:n[2]||(n[2]=m=>t.$emit("selectWhatsappTemplate"))},null,512)),[[u,t.$t("CONVERSATION.FOOTER.WHATSAPP_TEMPLATES"),void 0,{"top-end":!0}]]):O("v-if",!0),a.enableContentTemplates?ce((p(),L(o,{key:6,icon:"i-ph-whatsapp-logo",slate:"",faded:"",sm:"",onClick:n[3]||(n[3]=m=>t.$emit("selectContentTemplate"))},null,512)),[[u,"Content Templates",void 0,{"top-end":!0}]]):O("v-if",!0),(t.isAWebWidgetInbox||t.isAPIInbox)&&!a.isOnPrivateNote?(p(),L(l,{key:7,"conversation-id":a.conversationId},null,8,["conversation-id"])):O("v-if",!0),r.isFetchingAppIntegrations?O("v-if",!0):(p(),L(c,{key:8,"conversation-id":a.conversationId,"is-private-note":a.isOnPrivateNote,message:a.message,onReplaceText:r.replaceText},null,8,["conversation-id","is-private-note","message","onReplaceText"])),v(Qa,{name:"modal-fade",persisted:""},{default:z(()=>[ce(f("div",UWe,[v(d,{icon:"cloud-backup",size:"40"}),f("h4",$We,C(t.$t("CONVERSATION.REPLYBOX.DRAG_DROP")),1)],512),[[En,e.uploadRef&&e.uploadRef.dropActive]])]),_:1}),r.enableInsertArticleInReply?ce((p(),L(o,{key:9,icon:"i-ph-article-ny-times",slate:"",faded:"",sm:"",onClick:r.toggleInsertArticle},null,8,["onClick"])),[[u,t.$t("HELP_CENTER.ARTICLE_SEARCH.OPEN_ARTICLE_SEARCH"),void 0,{"top-end":!0}]]):O("v-if",!0)]),f("div",GWe,[v(o,{label:a.sendButtonText,type:"submit",sm:"",color:a.isNote?"amber":"blue",disabled:a.isSendDisabled,class:"flex-shrink-0",onClick:a.onSend},null,8,["label","color","disabled","onClick"])])],2)}const HWe=G(BWe,[["render",VWe],["__scopeId","data-v-f82288fb"],["__file","/app/app/javascript/dashboard/components/widgets/WootWriter/ReplyBottomPanel.vue"]]),jWe={af:"Afrikaans",af_NA:"Afrikaans (Namibia)",af_ZA:"Afrikaans (South Africa)",ak:"Akan",ak_GH:"Akan (Ghana)",sq:"Albanian",sq_AL:"Albanian (Albania)",sq_XK:"Albanian (Kosovo)",sq_MK:"Albanian (Macedonia)",am:"Amharic",am_ET:"Amharic (Ethiopia)",ar:"Arabic",ar_DZ:"Arabic (Algeria)",ar_BH:"Arabic (Bahrain)",ar_TD:"Arabic (Chad)",ar_KM:"Arabic (Comoros)",ar_DJ:"Arabic (Djibouti)",ar_EG:"Arabic (Egypt)",ar_ER:"Arabic (Eritrea)",ar_IQ:"Arabic (Iraq)",ar_IL:"Arabic (Israel)",ar_JO:"Arabic (Jordan)",ar_KW:"Arabic (Kuwait)",ar_LB:"Arabic (Lebanon)",ar_LY:"Arabic (Libya)",ar_MR:"Arabic (Mauritania)",ar_MA:"Arabic (Morocco)",ar_OM:"Arabic (Oman)",ar_PS:"Arabic (Palestinian Territories)",ar_QA:"Arabic (Qatar)",ar_SA:"Arabic (Saudi Arabia)",ar_SO:"Arabic (Somalia)",ar_SS:"Arabic (South Sudan)",ar_SD:"Arabic (Sudan)",ar_SY:"Arabic (Syria)",ar_TN:"Arabic (Tunisia)",ar_AE:"Arabic (United Arab Emirates)",ar_EH:"Arabic (Western Sahara)",ar_YE:"Arabic (Yemen)",hy:"Armenian",hy_AM:"Armenian (Armenia)",as:"Assamese",as_IN:"Assamese (India)",az:"Azerbaijani",az_AZ:"Azerbaijani (Azerbaijan)",az_Cyrl_AZ:"Azerbaijani (Cyrillic, Azerbaijan)",az_Cyrl:"Azerbaijani (Cyrillic)",az_Latn_AZ:"Azerbaijani (Latin, Azerbaijan)",az_Latn:"Azerbaijani (Latin)",bm:"Bambara",bm_Latn_ML:"Bambara (Latin, Mali)",bm_Latn:"Bambara (Latin)",eu:"Basque",eu_ES:"Basque (Spain)",be:"Belarusian",be_BY:"Belarusian (Belarus)",bn:"Bengali",bn_BD:"Bengali (Bangladesh)",bn_IN:"Bengali (India)",bs:"Bosnian",bs_BA:"Bosnian (Bosnia & Herzegovina)",bs_Cyrl_BA:"Bosnian (Cyrillic, Bosnia & Herzegovina)",bs_Cyrl:"Bosnian (Cyrillic)",bs_Latn_BA:"Bosnian (Latin, Bosnia & Herzegovina)",bs_Latn:"Bosnian (Latin)",br:"Breton",br_FR:"Breton (France)",bg:"Bulgarian",bg_BG:"Bulgarian (Bulgaria)",my:"Burmese",my_MM:"Burmese (Myanmar (Burma))",ca:"Catalan",ca_AD:"Catalan (Andorra)",ca_FR:"Catalan (France)",ca_IT:"Catalan (Italy)",ca_ES:"Catalan (Spain)",zh:"Chinese",zh_CN:"Chinese (China)",zh_HK:"Chinese (Hong Kong SAR China)",zh_MO:"Chinese (Macau SAR China)",zh_Hans_CN:"Chinese (Simplified, China)",zh_Hans_HK:"Chinese (Simplified, Hong Kong SAR China)",zh_Hans_MO:"Chinese (Simplified, Macau SAR China)",zh_Hans_SG:"Chinese (Simplified, Singapore)",zh_Hans:"Chinese (Simplified)",zh_SG:"Chinese (Singapore)",zh_TW:"Chinese (Taiwan)",zh_Hant_HK:"Chinese (Traditional, Hong Kong SAR China)",zh_Hant_MO:"Chinese (Traditional, Macau SAR China)",zh_Hant_TW:"Chinese (Traditional, Taiwan)",zh_Hant:"Chinese (Traditional)",kw:"Cornish",kw_GB:"Cornish (United Kingdom)",hr:"Croatian",hr_BA:"Croatian (Bosnia & Herzegovina)",hr_HR:"Croatian (Croatia)",cs:"Czech",cs_CZ:"Czech (Czech Republic)",da:"Danish",da_DK:"Danish (Denmark)",da_GL:"Danish (Greenland)",nl:"Dutch",nl_AW:"Dutch (Aruba)",nl_BE:"Dutch (Belgium)",nl_BQ:"Dutch (Caribbean Netherlands)",nl_CW:"Dutch (Curaao)",nl_NL:"Dutch (Netherlands)",nl_SX:"Dutch (Sint Maarten)",nl_SR:"Dutch (Suriname)",dz:"Dzongkha",dz_BT:"Dzongkha (Bhutan)",en:"English",en_AS:"English (American Samoa)",en_AI:"English (Anguilla)",en_AG:"English (Antigua & Barbuda)",en_AU:"English (Australia)",en_BS:"English (Bahamas)",en_BB:"English (Barbados)",en_BE:"English (Belgium)",en_BZ:"English (Belize)",en_BM:"English (Bermuda)",en_BW:"English (Botswana)",en_IO:"English (British Indian Ocean Territory)",en_VG:"English (British Virgin Islands)",en_CM:"English (Cameroon)",en_CA:"English (Canada)",en_KY:"English (Cayman Islands)",en_CX:"English (Christmas Island)",en_CC:"English (Cocos (Keeling) Islands)",en_CK:"English (Cook Islands)",en_DG:"English (Diego Garcia)",en_DM:"English (Dominica)",en_ER:"English (Eritrea)",en_FK:"English (Falkland Islands)",en_FJ:"English (Fiji)",en_GM:"English (Gambia)",en_GH:"English (Ghana)",en_GI:"English (Gibraltar)",en_GD:"English (Grenada)",en_GU:"English (Guam)",en_GG:"English (Guernsey)",en_GY:"English (Guyana)",en_HK:"English (Hong Kong SAR China)",en_IN:"English (India)",en_IE:"English (Ireland)",en_IM:"English (Isle of Man)",en_JM:"English (Jamaica)",en_JE:"English (Jersey)",en_KE:"English (Kenya)",en_KI:"English (Kiribati)",en_LS:"English (Lesotho)",en_LR:"English (Liberia)",en_MO:"English (Macau SAR China)",en_MG:"English (Madagascar)",en_MW:"English (Malawi)",en_MY:"English (Malaysia)",en_MT:"English (Malta)",en_MH:"English (Marshall Islands)",en_MU:"English (Mauritius)",en_FM:"English (Micronesia)",en_MS:"English (Montserrat)",en_NA:"English (Namibia)",en_NR:"English (Nauru)",en_NZ:"English (New Zealand)",en_NG:"English (Nigeria)",en_NU:"English (Niue)",en_NF:"English (Norfolk Island)",en_MP:"English (Northern Mariana Islands)",en_PK:"English (Pakistan)",en_PW:"English (Palau)",en_PG:"English (Papua New Guinea)",en_PH:"English (Philippines)",en_PN:"English (Pitcairn Islands)",en_PR:"English (Puerto Rico)",en_RW:"English (Rwanda)",en_WS:"English (Samoa)",en_SC:"English (Seychelles)",en_SL:"English (Sierra Leone)",en_SG:"English (Singapore)",en_SX:"English (Sint Maarten)",en_SB:"English (Solomon Islands)",en_ZA:"English (South Africa)",en_SS:"English (South Sudan)",en_SH:"English (St. Helena)",en_KN:"English (St. Kitts & Nevis)",en_LC:"English (St. Lucia)",en_VC:"English (St. Vincent & Grenadines)",en_SD:"English (Sudan)",en_SZ:"English (Swaziland)",en_TZ:"English (Tanzania)",en_TK:"English (Tokelau)",en_TO:"English (Tonga)",en_TT:"English (Trinidad & Tobago)",en_TC:"English (Turks & Caicos Islands)",en_TV:"English (Tuvalu)",en_UM:"English (U.S. Outlying Islands)",en_VI:"English (U.S. Virgin Islands)",en_UG:"English (Uganda)",en_GB:"English (United Kingdom)",en_US:"English (United States)",en_VU:"English (Vanuatu)",en_ZM:"English (Zambia)",en_ZW:"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",et_EE:"Estonian (Estonia)",ee:"Ewe",ee_GH:"Ewe (Ghana)",ee_TG:"Ewe (Togo)",fo:"Faroese",fo_FO:"Faroese (Faroe Islands)",fi:"Finnish",fi_FI:"Finnish (Finland)",fr:"French",fr_DZ:"French (Algeria)",fr_BE:"French (Belgium)",fr_BJ:"French (Benin)",fr_BF:"French (Burkina Faso)",fr_BI:"French (Burundi)",fr_CM:"French (Cameroon)",fr_CA:"French (Canada)",fr_CF:"French (Central African Republic)",fr_TD:"French (Chad)",fr_KM:"French (Comoros)",fr_CG:"French (Congo - Brazzaville)",fr_CD:"French (Congo - Kinshasa)",fr_CI:"French (Cte dIvoire)",fr_DJ:"French (Djibouti)",fr_GQ:"French (Equatorial Guinea)",fr_FR:"French (France)",fr_GF:"French (French Guiana)",fr_PF:"French (French Polynesia)",fr_GA:"French (Gabon)",fr_GP:"French (Guadeloupe)",fr_GN:"French (Guinea)",fr_HT:"French (Haiti)",fr_LU:"French (Luxembourg)",fr_MG:"French (Madagascar)",fr_ML:"French (Mali)",fr_MQ:"French (Martinique)",fr_MR:"French (Mauritania)",fr_MU:"French (Mauritius)",fr_YT:"French (Mayotte)",fr_MC:"French (Monaco)",fr_MA:"French (Morocco)",fr_NC:"French (New Caledonia)",fr_NE:"French (Niger)",fr_RE:"French (Runion)",fr_RW:"French (Rwanda)",fr_SN:"French (Senegal)",fr_SC:"French (Seychelles)",fr_BL:"French (St. Barthlemy)",fr_MF:"French (St. Martin)",fr_PM:"French (St. Pierre & Miquelon)",fr_CH:"French (Switzerland)",fr_SY:"French (Syria)",fr_TG:"French (Togo)",fr_TN:"French (Tunisia)",fr_VU:"French (Vanuatu)",fr_WF:"French (Wallis & Futuna)",ff:"Fulah",ff_CM:"Fulah (Cameroon)",ff_GN:"Fulah (Guinea)",ff_MR:"Fulah (Mauritania)",ff_SN:"Fulah (Senegal)",gl:"Galician",gl_ES:"Galician (Spain)",lg:"Ganda",lg_UG:"Ganda (Uganda)",ka:"Georgian",ka_GE:"Georgian (Georgia)",de:"German",de_AT:"German (Austria)",de_BE:"German (Belgium)",de_DE:"German (Germany)",de_LI:"German (Liechtenstein)",de_LU:"German (Luxembourg)",de_CH:"German (Switzerland)",el:"Greek",el_CY:"Greek (Cyprus)",el_GR:"Greek (Greece)",gu:"Gujarati",gu_IN:"Gujarati (India)",ha:"Hausa",ha_GH:"Hausa (Ghana)",ha_Latn_GH:"Hausa (Latin, Ghana)",ha_Latn_NE:"Hausa (Latin, Niger)",ha_Latn_NG:"Hausa (Latin, Nigeria)",ha_Latn:"Hausa (Latin)",ha_NE:"Hausa (Niger)",ha_NG:"Hausa (Nigeria)",he:"Hebrew",he_IL:"Hebrew (Israel)",hi:"Hindi",hi_IN:"Hindi (India)",hu:"Hungarian",hu_HU:"Hungarian (Hungary)",is:"Icelandic",is_IS:"Icelandic (Iceland)",ig:"Igbo",ig_NG:"Igbo (Nigeria)",id:"Indonesian",id_ID:"Indonesian (Indonesia)",ga:"Irish",ga_IE:"Irish (Ireland)",it:"Italian",it_IT:"Italian (Italy)",it_SM:"Italian (San Marino)",it_CH:"Italian (Switzerland)",ja:"Japanese",ja_JP:"Japanese (Japan)",kl:"Kalaallisut",kl_GL:"Kalaallisut (Greenland)",kn:"Kannada",kn_IN:"Kannada (India)",ks:"Kashmiri",ks_Arab_IN:"Kashmiri (Arabic, India)",ks_Arab:"Kashmiri (Arabic)",ks_IN:"Kashmiri (India)",kk:"Kazakh",kk_Cyrl_KZ:"Kazakh (Cyrillic, Kazakhstan)",kk_Cyrl:"Kazakh (Cyrillic)",kk_KZ:"Kazakh (Kazakhstan)",km:"Khmer",km_KH:"Khmer (Cambodia)",ki:"Kikuyu",ki_KE:"Kikuyu (Kenya)",rw:"Kinyarwanda",rw_RW:"Kinyarwanda (Rwanda)",ko:"Korean",ko_KP:"Korean (North Korea)",ko_KR:"Korean (South Korea)",ky:"Kyrgyz",ky_Cyrl_KG:"Kyrgyz (Cyrillic, Kyrgyzstan)",ky_Cyrl:"Kyrgyz (Cyrillic)",ky_KG:"Kyrgyz (Kyrgyzstan)",lo:"Lao",lo_LA:"Lao (Laos)",lv:"Latvian",lv_LV:"Latvian (Latvia)",ln:"Lingala",ln_AO:"Lingala (Angola)",ln_CF:"Lingala (Central African Republic)",ln_CG:"Lingala (Congo - Brazzaville)",ln_CD:"Lingala (Congo - Kinshasa)",lt:"Lithuanian",lt_LT:"Lithuanian (Lithuania)",lu:"Luba-Katanga",lu_CD:"Luba-Katanga (Congo - Kinshasa)",lb:"Luxembourgish",lb_LU:"Luxembourgish (Luxembourg)",mk:"Macedonian",mk_MK:"Macedonian (Macedonia)",mg:"Malagasy",mg_MG:"Malagasy (Madagascar)",ms:"Malay",ms_BN:"Malay (Brunei)",ms_Latn_BN:"Malay (Latin, Brunei)",ms_Latn_MY:"Malay (Latin, Malaysia)",ms_Latn_SG:"Malay (Latin, Singapore)",ms_Latn:"Malay (Latin)",ms_MY:"Malay (Malaysia)",ms_SG:"Malay (Singapore)",ml:"Malayalam",ml_IN:"Malayalam (India)",mt:"Maltese",mt_MT:"Maltese (Malta)",gv:"Manx",gv_IM:"Manx (Isle of Man)",mr:"Marathi",mr_IN:"Marathi (India)",mn:"Mongolian",mn_Cyrl_MN:"Mongolian (Cyrillic, Mongolia)",mn_Cyrl:"Mongolian (Cyrillic)",mn_MN:"Mongolian (Mongolia)",ne:"Nepali",ne_IN:"Nepali (India)",ne_NP:"Nepali (Nepal)",nd:"North Ndebele",nd_ZW:"North Ndebele (Zimbabwe)",se:"Northern Sami",se_FI:"Northern Sami (Finland)",se_NO:"Northern Sami (Norway)",se_SE:"Northern Sami (Sweden)",no:"Norwegian",no_NO:"Norwegian (Norway)",nb:"Norwegian Bokml",nb_NO:"Norwegian Bokml (Norway)",nb_SJ:"Norwegian Bokml (Svalbard & Jan Mayen)",nn:"Norwegian Nynorsk",nn_NO:"Norwegian Nynorsk (Norway)",or:"Oriya",or_IN:"Oriya (India)",om:"Oromo",om_ET:"Oromo (Ethiopia)",om_KE:"Oromo (Kenya)",os:"Ossetic",os_GE:"Ossetic (Georgia)",os_RU:"Ossetic (Russia)",ps:"Pashto",ps_AF:"Pashto (Afghanistan)",fa:"Persian",fa_AF:"Persian (Afghanistan)",fa_IR:"Persian (Iran)",pl:"Polish",pl_PL:"Polish (Poland)",pt:"Portuguese",pt_AO:"Portuguese (Angola)",pt_BR:"Portuguese (Brazil)",pt_CV:"Portuguese (Cape Verde)",pt_GW:"Portuguese (Guinea-Bissau)",pt_MO:"Portuguese (Macau SAR China)",pt_MZ:"Portuguese (Mozambique)",pt_PT:"Portuguese (Portugal)",pt_ST:"Portuguese (So Tom & Prncipe)",pt_TL:"Portuguese (Timor-Leste)",pa:"Punjabi",pa_Arab_PK:"Punjabi (Arabic, Pakistan)",pa_Arab:"Punjabi (Arabic)",pa_Guru_IN:"Punjabi (Gurmukhi, India)",pa_Guru:"Punjabi (Gurmukhi)",pa_IN:"Punjabi (India)",pa_PK:"Punjabi (Pakistan)",qu:"Quechua",qu_BO:"Quechua (Bolivia)",qu_EC:"Quechua (Ecuador)",qu_PE:"Quechua (Peru)",ro:"Romanian",ro_MD:"Romanian (Moldova)",ro_RO:"Romanian (Romania)",rm:"Romansh",rm_CH:"Romansh (Switzerland)",rn:"Rundi",rn_BI:"Rundi (Burundi)",ru:"Russian",ru_BY:"Russian (Belarus)",ru_KZ:"Russian (Kazakhstan)",ru_KG:"Russian (Kyrgyzstan)",ru_MD:"Russian (Moldova)",ru_RU:"Russian (Russia)",ru_UA:"Russian (Ukraine)",sg:"Sango",sg_CF:"Sango (Central African Republic)",gd:"Scottish Gaelic",gd_GB:"Scottish Gaelic (United Kingdom)",sr:"Serbian",sr_BA:"Serbian (Bosnia & Herzegovina)",sr_Cyrl_BA:"Serbian (Cyrillic, Bosnia & Herzegovina)",sr_Cyrl_XK:"Serbian (Cyrillic, Kosovo)",sr_Cyrl_ME:"Serbian (Cyrillic, Montenegro)",sr_Cyrl_RS:"Serbian (Cyrillic, Serbia)",sr_Cyrl:"Serbian (Cyrillic)",sr_XK:"Serbian (Kosovo)",sr_Latn_BA:"Serbian (Latin, Bosnia & Herzegovina)",sr_Latn_XK:"Serbian (Latin, Kosovo)",sr_Latn_ME:"Serbian (Latin, Montenegro)",sr_Latn_RS:"Serbian (Latin, Serbia)",sr_Latn:"Serbian (Latin)",sr_ME:"Serbian (Montenegro)",sr_RS:"Serbian (Serbia)",sh:"Serbo-Croatian",sh_BA:"Serbo-Croatian (Bosnia & Herzegovina)",sn:"Shona",sn_ZW:"Shona (Zimbabwe)",ii:"Sichuan Yi",ii_CN:"Sichuan Yi (China)",si:"Sinhala",si_LK:"Sinhala (Sri Lanka)",sk:"Slovak",sk_SK:"Slovak (Slovakia)",sl:"Slovenian",sl_SI:"Slovenian (Slovenia)",so:"Somali",so_DJ:"Somali (Djibouti)",so_ET:"Somali (Ethiopia)",so_KE:"Somali (Kenya)",so_SO:"Somali (Somalia)",es:"Spanish",es_AR:"Spanish (Argentina)",es_BO:"Spanish (Bolivia)",es_IC:"Spanish (Canary Islands)",es_EA:"Spanish (Ceuta & Melilla)",es_CL:"Spanish (Chile)",es_CO:"Spanish (Colombia)",es_CR:"Spanish (Costa Rica)",es_CU:"Spanish (Cuba)",es_DO:"Spanish (Dominican Republic)",es_EC:"Spanish (Ecuador)",es_SV:"Spanish (El Salvador)",es_GQ:"Spanish (Equatorial Guinea)",es_GT:"Spanish (Guatemala)",es_HN:"Spanish (Honduras)",es_MX:"Spanish (Mexico)",es_NI:"Spanish (Nicaragua)",es_PA:"Spanish (Panama)",es_PY:"Spanish (Paraguay)",es_PE:"Spanish (Peru)",es_PH:"Spanish (Philippines)",es_PR:"Spanish (Puerto Rico)",es_ES:"Spanish (Spain)",es_US:"Spanish (United States)",es_UY:"Spanish (Uruguay)",es_VE:"Spanish (Venezuela)",sw:"Swahili",sw_KE:"Swahili (Kenya)",sw_TZ:"Swahili (Tanzania)",sw_UG:"Swahili (Uganda)",sv:"Swedish",sv_AX:"Swedish (land Islands)",sv_FI:"Swedish (Finland)",sv_SE:"Swedish (Sweden)",tl:"Tagalog",tl_PH:"Tagalog (Philippines)",ta:"Tamil",ta_IN:"Tamil (India)",ta_MY:"Tamil (Malaysia)",ta_SG:"Tamil (Singapore)",ta_LK:"Tamil (Sri Lanka)",te:"Telugu",te_IN:"Telugu (India)",th:"Thai",th_TH:"Thai (Thailand)",bo:"Tibetan",bo_CN:"Tibetan (China)",bo_IN:"Tibetan (India)",ti:"Tigrinya",ti_ER:"Tigrinya (Eritrea)",ti_ET:"Tigrinya (Ethiopia)",to:"Tongan",to_TO:"Tongan (Tonga)",tr:"Turkish",tr_CY:"Turkish (Cyprus)",tr_TR:"Turkish (Turkey)",uk:"Ukrainian",uk_UA:"Ukrainian (Ukraine)",ur:"Urdu",ur_IN:"Urdu (India)",ur_PK:"Urdu (Pakistan)",ug:"Uyghur",ug_Arab_CN:"Uyghur (Arabic, China)",ug_Arab:"Uyghur (Arabic)",ug_CN:"Uyghur (China)",uz:"Uzbek",uz_AF:"Uzbek (Afghanistan)",uz_Arab_AF:"Uzbek (Arabic, Afghanistan)",uz_Arab:"Uzbek (Arabic)",uz_Cyrl_UZ:"Uzbek (Cyrillic, Uzbekistan)",uz_Cyrl:"Uzbek (Cyrillic)",uz_Latn_UZ:"Uzbek (Latin, Uzbekistan)",uz_Latn:"Uzbek (Latin)",uz_UZ:"Uzbek (Uzbekistan)",vi:"Vietnamese",vi_VN:"Vietnamese (Vietnam)",cy:"Welsh",cy_GB:"Welsh (United Kingdom)",fy:"Western Frisian",fy_NL:"Western Frisian (Netherlands)",yi:"Yiddish",yo:"Yoruba",yo_BJ:"Yoruba (Benin)",yo_NG:"Yoruba (Nigeria)",zu:"Zulu",zu_ZA:"Zulu (South Africa)"},WWe={__name:"Header",props:{title:{type:String,default:"Chatwoot"}},emits:["search","close"],setup(t,{expose:n,emit:a}){n();const e=a,s=P(null),r=P("");Pe(()=>{s.value.focus()});const o=d=>{e("search",d.target.value)},i=()=>{e("close")},l={Slash:{action:d=>{d.preventDefault(),s.value.focus()}},Escape:{action:()=>{i()},allowOnFocusedInput:!0}};jn(l);const c={emit:e,searchInputRef:s,searchQuery:r,onInput:o,onClose:i,keyboardEvents:l,ref:P,onMounted:Pe,get useKeyboardEvents(){return jn},Button:Se};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}},zWe={class:"flex flex-col py-1"},YWe={class:"flex items-center justify-between py-2 mb-1"},KWe={class:"text-base text-n-slate-12"},XWe={class:"relative"},qWe={class:"absolute ltr:left-0 rtl:right-0 w-8 top-0.5 h-8 flex justify-center items-center"},ZWe=["placeholder","value"];function QWe(t,n,a,e,s,r){const o=H("fluent-icon");return p(),g("div",zWe,[f("div",YWe,[f("h3",KWe,C(a.title),1),v(e.Button,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",onClick:e.onClose})]),f("div",XWe,[f("div",qWe,[v(o,{icon:"search",class:"",size:"18"})]),f("input",{ref:"searchInputRef",type:"text",placeholder:t.$t("HELP_CENTER.ARTICLE_SEARCH.PLACEHOLDER"),class:"block w-full !h-9 ltr:!pl-8 rtl:!pr-8 dark:!bg-n-slate-2 !border-n-weak !bg-n-slate-2 text-sm rounded-md leading-8 text-n-slate-12 shadow-sm ring-2 ring-transparent ring-n-weak border border-solid placeholder:text-n-slate-10 focus:border-n-brand focus:ring-n-brand !mb-0",value:e.searchQuery,onInput:e.onInput},null,40,ZWe)])])}const JWe=G(WWe,[["render",QWe],["__file","/app/app/javascript/dashboard/routes/dashboard/helpcenter/components/ArticleSearch/Header.vue"]]),eze={__name:"ArticleSearchResultItem",props:{id:{type:Number,default:0},title:{type:String,default:"Untitled"},url:{type:String,default:""},category:{type:String,default:""},locale:{type:String,default:""}},emits:["insert","preview"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),c={props:e,emit:s,t:r,handleInsert:d=>{d.stopPropagation(),s("insert",e.id)},handlePreview:d=>{d.stopPropagation(),s("preview",e.id)},handleCopy:async d=>{d.stopPropagation(),await Ra(e.url),Z(r("CONTACT_PANEL.COPY_SUCCESSFUL"))},get useAlert(){return Z},get useI18n(){return Q},get copyTextToClipboard(){return Ra},Button:Se};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}},tze={class:"w-full mb-0 -mx-1 text-sm rounded-sm ltr:text-left rtl:text-right text-n-slate-12 hover:underline group-hover:underline"},nze={class:"flex content-between items-center gap-0.5 w-full"},aze={class:"w-full mb-0 text-sm ltr:text-left rtl:text-right text-n-slate-11"},sze={class:"flex gap-0.5"};function oze(t,n,a,e,s,r){return p(),g("button",{class:"flex flex-col w-full gap-1 px-2 py-1 border border-transparent border-solid rounded-md cursor-pointer hover:bg-n-slate-3 group focus:outline-none focus:bg-n-slate-3",onClick:e.handlePreview},[f("h4",tze,C(a.title),1),f("div",nze,[f("p",aze,C(a.locale)+" "+C(" / ")+" "+C(a.category||t.$t("HELP_CENTER.ARTICLE_SEARCH_RESULT.UNCATEGORIZED")),1),f("div",sze,[v(e.Button,{title:t.$t("HELP_CENTER.ARTICLE_SEARCH_RESULT.COPY_LINK"),faded:"",slate:"",xs:"",type:"reset",icon:"i-lucide-copy",class:"invisible group-hover:visible",onClick:e.handleCopy},null,8,["title"]),v(e.Button,{xs:"",faded:"",slate:"",label:t.$t("HELP_CENTER.ARTICLE_SEARCH_RESULT.INSERT_ARTICLE"),onClick:e.handleInsert},null,8,["label"])])])])}const rze=G(eze,[["render",oze],["__file","/app/app/javascript/dashboard/routes/dashboard/helpcenter/components/ArticleSearch/ArticleSearchResultItem.vue"]]),ize={name:"SearchResults",components:{SearchResultItem:rze},props:{articles:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1},searchQuery:{type:String,default:""}},emits:["preview","insert"],computed:{showNoResults(){return this.searchQuery&&this.articles.length===0}},methods:{handlePreview(t){this.$emit("preview",t)},handleInsert(t){this.$emit("insert",t)}}},lze={class:"flex justify-end h-full gap-1 py-4 overflow-y-auto bg-n-background"},cze={class:"flex flex-col w-full gap-1"},dze={key:0,class:"text-center flex items-center justify-center px-4 py-8 text-n-slate-10 text-sm"},uze={key:1,class:"text-center flex items-center justify-center px-4 py-8 text-n-slate-10 text-sm"};function pze(t,n,a,e,s,r){const o=H("SearchResultItem");return p(),g("div",lze,[f("div",cze,[a.isLoading?(p(),g("div",dze,C(t.$t("HELP_CENTER.ARTICLE_SEARCH_RESULT.SEARCH_LOADER")),1)):r.showNoResults?(p(),g("div",uze,C(t.$t("HELP_CENTER.ARTICLE_SEARCH_RESULT.NO_RESULT")),1)):(p(!0),g(de,{key:2},Ae(a.articles,i=>(p(),L(o,{id:i.id,key:i.id,title:i.title,body:i.content,url:i.url,category:i.category.name,locale:i.localeName,onPreview:r.handlePreview,onInsert:r.handleInsert},null,8,["id","title","body","url","category","locale","onPreview","onInsert"]))),128))])])}const fze=G(ize,[["render",pze],["__file","/app/app/javascript/dashboard/routes/dashboard/helpcenter/components/ArticleSearch/SearchResults.vue"]]),mze={__name:"ArticleView",props:{url:{type:String,default:""}},emits:["back","insert"],setup(t,{expose:n,emit:a}){n();const e=a,s=le("accounts/isRTL"),i={emit:e,isRTL:s,onBack:l=>{l.stopPropagation(),e("back")},onInsert:l=>{l.stopPropagation(),e("insert")},IframeLoader:X4,Button:Se,get useMapGetter(){return le}};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}},hze={class:"h-full w-full flex flex-col flex-1 overflow-hidden"},_ze={class:"py-1"},gze={class:"-ml-4 h-full overflow-y-auto"},bze={class:"w-full h-full min-h-0"},vze={class:"flex justify-end gap-2 py-2"};function Eze(t,n,a,e,s,r){return p(),g("div",hze,[f("div",_ze,[v(e.Button,{link:"",xs:"",label:t.$t("HELP_CENTER.ARTICLE_SEARCH.BACK_RESULTS"),icon:"i-lucide-chevron-left",onClick:e.onBack},null,8,["label"])]),f("div",gze,[f("div",bze,[v(e.IframeLoader,{url:a.url,"is-rtl":e.isRTL,"is-dir-applied":""},null,8,["url","is-rtl"])])]),f("div",vze,[v(e.Button,{faded:"",slate:"",sm:"",type:"reset",icon:"i-lucide-chevron-left",label:t.$t("HELP_CENTER.ARTICLE_SEARCH.BACK"),onClick:e.onBack},null,8,["label"]),v(e.Button,{sm:"",type:"submit",icon:"i-lucide-arrow-down-to-dot",label:t.$t("HELP_CENTER.ARTICLE_SEARCH.INSERT_ARTICLE"),onClick:e.onInsert},null,8,["label"])])])}const Sze=G(mze,[["render",Eze],["__file","/app/app/javascript/dashboard/routes/dashboard/helpcenter/components/ArticleSearch/ArticleView.vue"]]),Tze=t=>t.startsWith("https")?t:`https://${t}`,Aze=()=>{const{hostURL:t,helpCenterURL:n}=window.chatwootConfig||{},a=n||t||"";if(!a)throw new Error("No valid base URL found in configuration");return a},yze=t=>t?Tze(t):Aze(),lD=(t,n)=>`${yze(n)}/hc/${t}`,Ize=(t,n,a,e,s)=>`${lD(t,s)}/articles/${e}`,LDt=t=>{switch(t){case"draft":return 0;case"published":return 1;case"archived":return 2;default:return}},Mi={DRAFT:"draft",PUBLISHED:"published",ARCHIVED:"archived"},_O={publish:{label:"HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.DROPDOWN_MENU.PUBLISH",value:Mi.PUBLISHED,action:"publish",icon:"i-lucide-check"},draft:{label:"HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.DROPDOWN_MENU.DRAFT",value:Mi.DRAFT,action:"draft",icon:"i-lucide-pencil-line"},archive:{label:"HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.DROPDOWN_MENU.ARCHIVE",value:Mi.ARCHIVED,action:"archive",icon:"i-lucide-archive-restore"},delete:{label:"HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.DROPDOWN_MENU.DELETE",value:"delete",action:"delete",icon:"i-lucide-trash"}},Ab={[Mi.ARCHIVED]:["publish","draft"],[Mi.DRAFT]:["publish","archive"],[Mi.PUBLISHED]:["draft","archive"]},DDt={ALL:"all",MINE:"mine",DRAFT:"draft",ARCHIVED:"archived"},PDt="all",kDt=[{key:"ALL",value:"all"},{key:"MINE",value:"mine"},{key:"DRAFT",value:"draft"},{key:"ARCHIVED",value:"archived"}],BDt=[{label:"HELP_CENTER.LOCALES_PAGE.LOCALE_CARD.DROPDOWN_MENU.MAKE_DEFAULT",action:"change-default",value:"default",icon:"i-lucide-star"},{label:"HELP_CENTER.LOCALES_PAGE.LOCALE_CARD.DROPDOWN_MENU.DELETE",action:"delete",value:"delete",icon:"i-lucide-trash"}],FDt={published:["archive","draft"],archived:["draft"],draft:["archive"]},Cze={name:"ArticleSearchPopover",components:{SearchHeader:JWe,SearchResults:fze,ArticleView:Sze},props:{selectedPortalSlug:{type:String,required:!0}},emits:["close","insert"],data(){return{searchQuery:"",isLoading:!1,searchResults:[],activeId:"",debounceSearch:()=>{}}},computed:{..._t({portalBySlug:"portals/portalBySlug"}),portal(){return this.portalBySlug(this.selectedPortalSlug)},portalCustomDomain(){var t;return(t=this.portal)==null?void 0:t.custom_domain},articleViewerUrl(){const t=this.activeArticle(this.activeId);if(!t)return"";const n=document.body.classList.contains("dark"),a=new URL(t.url);return a.searchParams.set("show_plain_layout","true"),n&&a.searchParams.set("theme","dark"),`${a}`},searchResultsWithUrl(){return this.searchResults.map(t=>({...t,localeName:this.localeName(t.category.locale||"en"),url:this.generateArticleUrl(t)}))}},mounted(){this.fetchArticlesByQuery(this.searchQuery),this.debounceSearch=Ja(this.fetchArticlesByQuery,500,!1)},methods:{generateArticleUrl(t){return Ize(this.selectedPortalSlug,"","",t.slug,this.portalCustomDomain)},localeName(t){return jWe[t]},activeArticle(t){return this.searchResultsWithUrl.find(n=>n.id===t)},onSearch(t){this.searchQuery=t,this.activeId="",this.debounceSearch(t)},onClose(){this.$emit("close"),this.searchQuery="",this.activeId="",this.searchResults=[]},async fetchArticlesByQuery(t){try{const n=t?"":"views";this.isLoading=!0,this.searchResults=[];const{data:a}=await y4.searchArticles({portalSlug:this.selectedPortalSlug,query:t,sort:n});this.searchResults=a.payload,this.isLoading=!0}catch{}finally{this.isLoading=!1}},handlePreview(t){this.activeId=t},onBack(){this.activeId=""},onInsert(t){const n=this.activeArticle(t||this.activeId);this.$emit("insert",n),Z(this.$t("HELP_CENTER.ARTICLE_SEARCH.SUCCESS_ARTICLE_INSERTED")),this.onClose()}}},Oze={class:"fixed top-0 left-0 z-50 flex items-center justify-center w-screen h-screen bg-modal-backdrop-light dark:bg-modal-backdrop-dark"},Nze={class:"flex flex-col px-4 pb-4 rounded-md shadow-md border border-solid border-n-weak bg-n-background z-[1000] max-w-[720px] md:w-[20rem] lg:w-[24rem] xl:w-[28rem] 2xl:w-[32rem] h-[calc(100vh-20rem)] max-h-[40rem]"};function xze(t,n,a,e,s,r){const o=H("SearchHeader"),i=H("ArticleView"),l=H("SearchResults"),c=nt("on-clickaway");return p(),g("div",Oze,[ce((p(),g("div",Nze,[v(o,{title:t.$t("HELP_CENTER.ARTICLE_SEARCH.TITLE"),class:"w-full sticky top-0 bg-[inherit]",onClose:r.onClose,onSearch:r.onSearch},null,8,["title","onClose","onSearch"]),s.activeId?(p(),L(i,{key:0,url:r.articleViewerUrl,onBack:r.onBack,onInsert:r.onInsert},null,8,["url","onBack","onInsert"])):(p(),L(l,{key:1,"search-query":s.searchQuery,"is-loading":s.isLoading,"portal-slug":a.selectedPortalSlug,articles:r.searchResultsWithUrl,onPreview:r.handlePreview,onInsert:r.onInsert},null,8,["search-query","is-loading","portal-slug","articles","onPreview","onInsert"]))])),[[c,r.onClose]])])}const Rze=G(Cze,[["render",xze],["__file","/app/app/javascript/dashboard/routes/dashboard/helpcenter/components/ArticleSearch/SearchPopover.vue"]]),wze={__name:"MessageSignatureMissingAlert",setup(t,{expose:n}){n();const a=ft(),s={router:a,openProfileSettings:()=>a.push({name:"profile_settings_index"}),get useRouter(){return ft},Button:Se};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}},Mze={class:"my-0 mx-4 px-1 flex max-h-[8vh] items-baseline justify-between hover:bg-n-slate-1 border border-dashed border-n-weak rounded-sm overflow-auto"},Lze={class:"w-fit !m-0"};function Dze(t,n,a,e,s,r){return p(),g("div",Mze,[f("p",Lze,[Oe(C(t.$t("CONVERSATION.FOOTER.MESSAGE_SIGNATURE_NOT_CONFIGURED"))+" ",1),v(e.Button,{link:"",label:t.$t("CONVERSATION.FOOTER.CLICK_HERE"),onClick:e.openProfileSettings},null,8,["label"])])])}const Pze=G(wze,[["render",Dze],["__file","/app/app/javascript/dashboard/components/widgets/conversation/MessageSignatureMissingAlert.vue"]]),kze={__name:"ReplyBoxBanner",props:{message:{type:String,default:""},isOnPrivateNote:{type:Boolean,default:!1}},setup(t,{expose:n}){n();const a=t,e=Bn(),{t:s}=Q(),r=le("getSelectedChat"),o=le("getCurrentUser"),i=S({get(){var I,N;return(N=(I=r.value)==null?void 0:I.meta)==null?void 0:N.assignee},set(I){var x;const N=I?I.id:0;e.dispatch("setCurrentChatAssignee",I),e.dispatch("assignAgent",{conversationId:(x=r.value)==null?void 0:x.id,agentId:N})}}),l=S(()=>a.message!==""&&!a.isOnPrivateNote),c=S(()=>!i.value),d=S(()=>{var I,N;return((I=i.value)==null?void 0:I.id)!==((N=o.value)==null?void 0:N.id)}),u=S(()=>l.value&&(c.value||d.value)),m=S(()=>{var I;return l.value&&((I=r.value)==null?void 0:I.status)===gt.STATUS_TYPE.PENDING}),h=S(()=>{var I,N;return((I=i.value)==null?void 0:I.id)===((N=o.value)==null?void 0:N.id)?s("CONVERSATION.BOT_HANDOFF_REOPEN_ACTION"):s("CONVERSATION.BOT_HANDOFF_ACTION")}),_=async()=>{const{avatar_url:I,...N}=o.value||{};i.value={...N,thumbnail:I}},E=S(()=>c.value||d.value),y=async()=>{try{await _(),Z(s("CONVERSATION.CHANGE_AGENT"))}catch{Z(s("CONVERSATION.CHANGE_AGENT_FAILED"))}},b=async()=>{var I;await e.dispatch("toggleStatus",{conversationId:(I=r.value)==null?void 0:I.id,status:gt.STATUS_TYPE.OPEN})},T={props:a,store:e,t:s,currentChat:r,currentUser:o,assignedAgent:i,isUserTyping:l,isUnassigned:c,isAssignedToOtherAgent:d,showSelfAssignBanner:u,showBotHandoffBanner:m,botHandoffActionLabel:h,selfAssignConversation:_,needsAssignmentToCurrentUser:E,onClickSelfAssign:y,reopenConversation:b,onClickBotHandoff:async()=>{try{await b(),E.value&&await _(),Z(s("CONVERSATION.BOT_HANDOFF_SUCCESS"))}catch{Z(s("CONVERSATION.BOT_HANDOFF_ERROR"))}},computed:S,get useStore(){return Bn},get useMapGetter(){return le},get useAlert(){return Z},get useI18n(){return Q},get wootConstants(){return gt},Banner:qu};return Object.defineProperty(T,"__isScriptSetup",{enumerable:!1,value:!0}),T}};function Bze(t,n,a,e,s,r){return p(),g(de,null,[e.showSelfAssignBanner&&!e.showBotHandoffBanner?(p(),L(e.Banner,{key:0,"action-button-variant":"ghost","color-scheme":"secondary",class:"mx-2 mb-2 rounded-lg !py-2","banner-message":t.$t("CONVERSATION.NOT_ASSIGNED_TO_YOU"),"has-action-button":"","action-button-label":t.$t("CONVERSATION.ASSIGN_TO_ME"),onPrimaryAction:e.onClickSelfAssign},null,8,["banner-message","action-button-label"])):O("v-if",!0),e.showBotHandoffBanner?(p(),L(e.Banner,{key:1,"action-button-variant":"ghost","color-scheme":"secondary",class:"mx-2 mb-2 rounded-lg !py-2","banner-message":t.$t("CONVERSATION.BOT_HANDOFF_MESSAGE"),"has-action-button":"","action-button-label":e.botHandoffActionLabel,onPrimaryAction:e.onClickBotHandoff},null,8,["banner-message","action-button-label"])):O("v-if",!0)],64)}const Fze=G(kze,[["render",Bze],["__file","/app/app/javascript/dashboard/components/widgets/conversation/ReplyBoxBanner.vue"]]),Uze={__name:"QuotedEmailPreview",props:{quotedEmailText:{type:String,required:!0},previewText:{type:String,required:!0}},emits:["toggle"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),{formatMessage:o}=ta(),i=P(!1),l=S(()=>e.quotedEmailText?o(e.quotedEmailText,!1,!1,!0):""),d={props:e,emit:s,t:r,formatMessage:o,isExpanded:i,formattedQuotedEmailText:l,toggleExpand:()=>{i.value=!i.value},computed:S,ref:P,get useMessageFormatter(){return ta},get useI18n(){return Q},NextButton:Se};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}},$ze={class:"mt-2"},Gze={class:"relative rounded-md px-3 py-2 text-xs text-n-slate-12 bg-n-slate-3 dark:bg-n-solid-3"},Vze={class:"absolute top-2 right-2 z-10 flex items-center gap-1"},Hze=["title"];function jze(t,n,a,e,s,r){const o=nt("tooltip"),i=nt("dompurify-html");return p(),g("div",$ze,[f("div",Gze,[f("div",Vze,[ce(v(e.NextButton,{ghost:"",slate:"",xs:"",icon:e.isExpanded?"i-lucide-minimize":"i-lucide-maximize",onClick:e.toggleExpand},null,8,["icon"]),[[o,e.isExpanded?e.t("CONVERSATION.REPLYBOX.QUOTED_REPLY.COLLAPSE"):e.t("CONVERSATION.REPLYBOX.QUOTED_REPLY.EXPAND")]]),ce(v(e.NextButton,{ghost:"",slate:"",xs:"",icon:"i-lucide-x",onClick:n[0]||(n[0]=l=>e.emit("toggle"))},null,512),[[o,e.t("CONVERSATION.REPLYBOX.QUOTED_REPLY.REMOVE_PREVIEW")]])]),ce(f("div",{class:oe(["w-full max-w-none break-words prose prose-sm dark:prose-invert cursor-pointer ltr:pr-8 rtl:pl-8",{"line-clamp-1":!e.isExpanded,"max-h-60 overflow-y-auto":e.isExpanded}]),title:a.previewText,onClick:e.toggleExpand},null,10,Hze),[[i,e.formattedQuotedEmailText]])])])}const Wze=G(Uze,[["render",jze],["__file","/app/app/javascript/dashboard/components/widgets/conversation/QuotedEmailPreview.vue"]]);function bs(t,n,a,e){return new(a||(a=Promise))(function(s,r){function o(c){try{l(e.next(c))}catch(d){r(d)}}function i(c){try{l(e.throw(c))}catch(d){r(d)}}function l(c){var d;c.done?s(c.value):(d=c.value,d instanceof a?d:new a(function(u){u(d)})).then(o,i)}l((e=e.apply(t,n||[])).next())})}let mp=class{constructor(){this.listeners={}}on(n,a,e){if(this.listeners[n]||(this.listeners[n]=new Set),this.listeners[n].add(a),e==null?void 0:e.once){const s=()=>{this.un(n,s),this.un(n,a)};return this.on(n,s),s}return()=>this.un(n,a)}un(n,a){var e;(e=this.listeners[n])===null||e===void 0||e.delete(a)}once(n,a){return this.on(n,a,{once:!0})}unAll(){this.listeners={}}emit(n,...a){this.listeners[n]&&this.listeners[n].forEach(e=>e(...a))}};const gO={decode:function(t,n){return bs(this,void 0,void 0,function*(){const a=new AudioContext({sampleRate:n});return a.decodeAudioData(t).finally(()=>a.close())})},createBuffer:function(t,n){return typeof t[0]=="number"&&(t=[t]),function(a){const e=a[0];if(e.some(s=>s>1||s<-1)){const s=e.length;let r=0;for(let o=0;o<s;o++){const i=Math.abs(e[o]);i>r&&(r=i)}for(const o of a)for(let i=0;i<s;i++)o[i]/=r}}(t),{duration:n,length:t[0].length,sampleRate:t[0].length/n,numberOfChannels:t.length,getChannelData:a=>t==null?void 0:t[a],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function cD(t,n){const a=n.xmlns?document.createElementNS(n.xmlns,t):document.createElement(t);for(const[e,s]of Object.entries(n))if(e==="children")for(const[r,o]of Object.entries(n))typeof o=="string"?a.appendChild(document.createTextNode(o)):a.appendChild(cD(r,o));else e==="style"?Object.assign(a.style,s):e==="textContent"?a.textContent=s:a.setAttribute(e,s.toString());return a}function bO(t,n,a){const e=cD(t,n||{});return a==null||a.appendChild(e),e}var zze=Object.freeze({__proto__:null,createElement:bO,default:bO});const Yze={fetchBlob:function(t,n,a){return bs(this,void 0,void 0,function*(){const e=yield fetch(t,a);if(e.status>=400)throw new Error(`Failed to fetch ${t}: ${e.status} (${e.statusText})`);return function(s,r){bs(this,void 0,void 0,function*(){if(!s.body||!s.headers)return;const o=s.body.getReader(),i=Number(s.headers.get("Content-Length"))||0;let l=0;const c=u=>bs(this,void 0,void 0,function*(){l+=(u==null?void 0:u.length)||0;const m=Math.round(l/i*100);r(m)}),d=()=>bs(this,void 0,void 0,function*(){let u;try{u=yield o.read()}catch{return}u.done||(c(u.value),yield d())});d()})}(e.clone(),n),e.blob()})}};class Kze extends mp{constructor(n){super(),this.isExternalMedia=!1,n.media?(this.media=n.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),n.mediaControls&&(this.media.controls=!0),n.autoplay&&(this.media.autoplay=!0),n.playbackRate!=null&&this.onMediaEvent("canplay",()=>{n.playbackRate!=null&&(this.media.playbackRate=n.playbackRate)},{once:!0})}onMediaEvent(n,a,e){return this.media.addEventListener(n,a,e),()=>this.media.removeEventListener(n,a,e)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const n=this.getSrc();n.startsWith("blob:")&&URL.revokeObjectURL(n)}canPlayType(n){return this.media.canPlayType(n)!==""}setSrc(n,a){const e=this.getSrc();if(n&&e===n)return;this.revokeSrc();const s=a instanceof Blob&&(this.canPlayType(a.type)||!n)?URL.createObjectURL(a):n;try{this.media.src=s}catch{this.media.src=n}}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(n){this.media=n}play(){return bs(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(n){this.media.currentTime=n}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(n){this.media.volume=n}getMuted(){return this.media.muted}setMuted(n){this.media.muted=n}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(n,a){a!=null&&(this.media.preservesPitch=a),this.media.playbackRate=n}getMediaElement(){return this.media}setSinkId(n){return this.media.setSinkId(n)}}class _d extends mp{constructor(n,a){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.subscriptions=[],this.options=n;const e=this.parentFromOptionsContainer(n.container);this.parent=e;const[s,r]=this.initHtml();e.appendChild(s),this.container=s,this.scrollContainer=r.querySelector(".scroll"),this.wrapper=r.querySelector(".wrapper"),this.canvasWrapper=r.querySelector(".canvases"),this.progressWrapper=r.querySelector(".progress"),this.cursor=r.querySelector(".cursor"),a&&r.appendChild(a),this.initEvents()}parentFromOptionsContainer(n){let a;if(typeof n=="string"?a=document.querySelector(n):n instanceof HTMLElement&&(a=n),!a)throw new Error("Container not found");return a}initEvents(){const n=a=>{const e=this.wrapper.getBoundingClientRect(),s=a.clientX-e.left,r=a.clientY-e.top;return[s/e.width,r/e.height]};if(this.wrapper.addEventListener("click",a=>{const[e,s]=n(a);this.emit("click",e,s)}),this.wrapper.addEventListener("dblclick",a=>{const[e,s]=n(a);this.emit("dblclick",e,s)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:a,scrollWidth:e,clientWidth:s}=this.scrollContainer,r=a/e,o=(a+s)/e;this.emit("scroll",r,o,a,a+s)}),typeof ResizeObserver=="function"){const a=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{a().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const n=this.parent.clientWidth;n===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=n,this.reRender())}initDrag(){this.subscriptions.push(function(n,a,e,s,r=3,o=0,i=100){if(!n)return()=>{};const l=matchMedia("(pointer: coarse)").matches;let c=()=>{};const d=u=>{if(u.button!==o)return;u.preventDefault(),u.stopPropagation();let m=u.clientX,h=u.clientY,_=!1;const E=Date.now(),y=N=>{if(N.preventDefault(),N.stopPropagation(),l&&Date.now()-E<i)return;const x=N.clientX,R=N.clientY,M=x-m,w=R-h;if(_||Math.abs(M)>r||Math.abs(w)>r){const D=n.getBoundingClientRect(),{left:B,top:k}=D;_||(e==null||e(m-B,h-k),_=!0),a(M,w,x-B,R-k),m=x,h=R}},b=N=>{if(_){const x=N.clientX,R=N.clientY,M=n.getBoundingClientRect(),{left:w,top:D}=M;s==null||s(x-w,R-D)}c()},A=N=>{N.relatedTarget&&N.relatedTarget!==document.documentElement||b(N)},T=N=>{_&&(N.stopPropagation(),N.preventDefault())},I=N=>{_&&N.preventDefault()};document.addEventListener("pointermove",y),document.addEventListener("pointerup",b),document.addEventListener("pointerout",A),document.addEventListener("pointercancel",A),document.addEventListener("touchmove",I,{passive:!1}),document.addEventListener("click",T,{capture:!0}),c=()=>{document.removeEventListener("pointermove",y),document.removeEventListener("pointerup",b),document.removeEventListener("pointerout",A),document.removeEventListener("pointercancel",A),document.removeEventListener("touchmove",I),setTimeout(()=>{document.removeEventListener("click",T,{capture:!0})},10)}};return n.addEventListener("pointerdown",d),()=>{c(),n.removeEventListener("pointerdown",d)}}(this.wrapper,(n,a,e)=>{this.emit("drag",Math.max(0,Math.min(1,e/this.wrapper.getBoundingClientRect().width)))},n=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,n/this.wrapper.getBoundingClientRect().width)))},n=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,n/this.wrapper.getBoundingClientRect().width)))}))}getHeight(n,a){var e;const s=((e=this.audioData)===null||e===void 0?void 0:e.numberOfChannels)||1;if(n==null)return 128;if(!isNaN(Number(n)))return Number(n);if(n==="auto"){const r=this.parent.clientHeight||128;return a!=null&&a.every(o=>!o.overlay)?r/s:r}return 128}initHtml(){const n=document.createElement("div"),a=n.attachShadow({mode:"open"}),e=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return a.innerHTML=`
      <style${e?` nonce="${e}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[n,a]}setOptions(n){if(this.options.container!==n.container){const a=this.parentFromOptionsContainer(n.container);a.appendChild(this.container),this.parent=a}n.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=n,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(n){this.scrollContainer.scrollLeft=n}setScrollPercentage(n){const{scrollWidth:a}=this.scrollContainer,e=a*n;this.setScroll(e)}destroy(){var n,a;this.subscriptions.forEach(e=>e()),this.container.remove(),(n=this.resizeObserver)===null||n===void 0||n.disconnect(),(a=this.unsubscribeOnScroll)===null||a===void 0||a.call(this)}createDelay(n=10){let a,e;const s=()=>{a&&clearTimeout(a),e&&e()};return this.timeouts.push(s),()=>new Promise((r,o)=>{s(),e=o,a=setTimeout(()=>{a=void 0,e=void 0,r()},n)})}convertColorValues(n){if(!Array.isArray(n))return n||"";if(n.length<2)return n[0]||"";const a=document.createElement("canvas"),e=a.getContext("2d"),s=a.height*(window.devicePixelRatio||1),r=e.createLinearGradient(0,0,0,s),o=1/(n.length-1);return n.forEach((i,l)=>{const c=l*o;r.addColorStop(c,i)}),r}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(n,a,e,s){const r=n[0],o=n[1]||n[0],i=r.length,{width:l,height:c}=e.canvas,d=c/2,u=this.getPixelRatio(),m=a.barWidth?a.barWidth*u:1,h=a.barGap?a.barGap*u:a.barWidth?m/2:0,_=a.barRadius||0,E=l/(m+h)/i,y=_&&"roundRect"in e?"roundRect":"rect";e.beginPath();let b=0,A=0,T=0;for(let I=0;I<=i;I++){const N=Math.round(I*E);if(N>b){const M=Math.round(A*d*s),w=M+Math.round(T*d*s)||1;let D=d-M;a.barAlign==="top"?D=0:a.barAlign==="bottom"&&(D=c-w),e[y](b*(m+h),D,m,w,_),b=N,A=0,T=0}const x=Math.abs(r[I]||0),R=Math.abs(o[I]||0);x>A&&(A=x),R>T&&(T=R)}e.fill(),e.closePath()}renderLineWaveform(n,a,e,s){const r=o=>{const i=n[o]||n[0],l=i.length,{height:c}=e.canvas,d=c/2,u=e.canvas.width/l;e.moveTo(0,d);let m=0,h=0;for(let _=0;_<=l;_++){const E=Math.round(_*u);if(E>m){const b=d+(Math.round(h*d*s)||1)*(o===0?-1:1);e.lineTo(m,b),m=E,h=0}const y=Math.abs(i[_]||0);y>h&&(h=y)}e.lineTo(m,d)};e.beginPath(),r(0),r(1),e.fill(),e.closePath()}renderWaveform(n,a,e){if(e.fillStyle=this.convertColorValues(a.waveColor),a.renderFunction)return void a.renderFunction(n,e);let s=a.barHeight||1;if(a.normalize){const r=Array.from(n[0]).reduce((o,i)=>Math.max(o,Math.abs(i)),0);s=r?1/r:1}a.barWidth||a.barGap||a.barAlign?this.renderBarWaveform(n,a,e,s):this.renderLineWaveform(n,a,e,s)}renderSingleCanvas(n,a,e,s,r,o,i){const l=this.getPixelRatio(),c=document.createElement("canvas");c.width=Math.round(e*l),c.height=Math.round(s*l),c.style.width=`${e}px`,c.style.height=`${s}px`,c.style.left=`${Math.round(r)}px`,o.appendChild(c);const d=c.getContext("2d");if(this.renderWaveform(n,a,d),c.width>0&&c.height>0){const u=c.cloneNode(),m=u.getContext("2d");m.drawImage(c,0,0),m.globalCompositeOperation="source-in",m.fillStyle=this.convertColorValues(a.progressColor),m.fillRect(0,0,c.width,c.height),i.appendChild(u)}}renderMultiCanvas(n,a,e,s,r,o){const i=this.getPixelRatio(),{clientWidth:l}=this.scrollContainer,c=e/i;let d=Math.min(_d.MAX_CANVAS_WIDTH,l,c),u={};if(a.barWidth||a.barGap){const y=a.barWidth||.5,b=y+(a.barGap||y/2);d%b!=0&&(d=Math.floor(d/b)*b)}const m=y=>{if(y<0||y>=h||u[y])return;u[y]=!0;const b=y*d,A=Math.min(c-b,d);if(A<=0)return;const T=n.map(I=>{const N=Math.floor(b/c*I.length),x=Math.floor((b+A)/c*I.length);return I.slice(N,x)});this.renderSingleCanvas(T,a,A,s,b,r,o)},h=Math.ceil(c/d);if(!this.isScrollable){for(let y=0;y<h;y++)m(y);return}const _=this.scrollContainer.scrollLeft/c,E=Math.floor(_*h);m(E-1),m(E),m(E+1),h>1&&(this.unsubscribeOnScroll=this.on("scroll",()=>{const{scrollLeft:y}=this.scrollContainer,b=Math.floor(y/c*h);Object.keys(u).length>_d.MAX_NODES&&(r.innerHTML="",o.innerHTML="",u={}),m(b-1),m(b),m(b+1)}))}renderChannel(n,a,e,s){var{overlay:r}=a,o=function(d,u){var m={};for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&u.indexOf(h)<0&&(m[h]=d[h]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function"){var _=0;for(h=Object.getOwnPropertySymbols(d);_<h.length;_++)u.indexOf(h[_])<0&&Object.prototype.propertyIsEnumerable.call(d,h[_])&&(m[h[_]]=d[h[_]])}return m}(a,["overlay"]);const i=document.createElement("div"),l=this.getHeight(o.height,o.splitChannels);i.style.height=`${l}px`,r&&s>0&&(i.style.marginTop=`-${l}px`),this.canvasWrapper.style.minHeight=`${l}px`,this.canvasWrapper.appendChild(i);const c=i.cloneNode();this.progressWrapper.appendChild(c),this.renderMultiCanvas(n,o,e,l,i,c)}render(n){return bs(this,void 0,void 0,function*(){var a;this.timeouts.forEach(l=>l()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const e=this.getPixelRatio(),s=this.scrollContainer.clientWidth,r=Math.ceil(n.duration*(this.options.minPxPerSec||0));this.isScrollable=r>s;const o=this.options.fillParent&&!this.isScrollable,i=(o?s:r)*e;if(this.wrapper.style.width=o?"100%":`${r}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=n,this.emit("render"),this.options.splitChannels)for(let l=0;l<n.numberOfChannels;l++){const c=Object.assign(Object.assign({},this.options),(a=this.options.splitChannels)===null||a===void 0?void 0:a[l]);this.renderChannel([n.getChannelData(l)],c,i,l)}else{const l=[n.getChannelData(0)];n.numberOfChannels>1&&l.push(n.getChannelData(1)),this.renderChannel(l,this.options,i,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){var n;if((n=this.unsubscribeOnScroll)===null||n===void 0||n.call(this),delete this.unsubscribeOnScroll,!this.audioData)return;const{scrollWidth:a}=this.scrollContainer,{right:e}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&a!==this.scrollContainer.scrollWidth){const{right:s}=this.progressWrapper.getBoundingClientRect();let r=s-e;r*=2,r=r<0?Math.floor(r):Math.ceil(r),r/=2,this.scrollContainer.scrollLeft+=r}}zoom(n){this.options.minPxPerSec=n,this.reRender()}scrollIntoView(n,a=!1){const{scrollLeft:e,scrollWidth:s,clientWidth:r}=this.scrollContainer,o=n*s,i=e,l=e+r,c=r/2;if(this.isDragging)o+30>l?this.scrollContainer.scrollLeft+=30:o-30<i&&(this.scrollContainer.scrollLeft-=30);else{(o<i||o>l)&&(this.scrollContainer.scrollLeft=o-(this.options.autoCenter?c:0));const d=o-e-c;a&&this.options.autoCenter&&d>0&&(this.scrollContainer.scrollLeft+=Math.min(d,10))}{const d=this.scrollContainer.scrollLeft,u=d/s,m=(d+r)/s;this.emit("scroll",u,m,d,d+r)}}renderProgress(n,a){if(isNaN(n))return;const e=100*n;this.canvasWrapper.style.clipPath=`polygon(${e}% 0, 100% 0, 100% 100%, ${e}% 100%)`,this.progressWrapper.style.width=`${e}%`,this.cursor.style.left=`${e}%`,this.cursor.style.transform=`translateX(-${Math.round(e)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(n,a)}exportImage(n,a,e){return bs(this,void 0,void 0,function*(){const s=this.canvasWrapper.querySelectorAll("canvas");if(!s.length)throw new Error("No waveform data");if(e==="dataURL"){const r=Array.from(s).map(o=>o.toDataURL(n,a));return Promise.resolve(r)}return Promise.all(Array.from(s).map(r=>new Promise((o,i)=>{r.toBlob(l=>{l?o(l):i(new Error("Could not export image"))},n,a)})))})}}_d.MAX_CANVAS_WIDTH=8e3,_d.MAX_NODES=10;class Xze extends mp{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class vO extends mp{constructor(n=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=n,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return bs(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(n){if(this.currentSrc=n,this._duration=void 0,!n)return this.buffer=null,void this.emit("emptied");fetch(n).then(a=>{if(a.status>=400)throw new Error(`Failed to fetch ${n}: ${a.status} (${a.statusText})`);return a.arrayBuffer()}).then(a=>this.currentSrc!==n?null:this.audioContext.decodeAudioData(a)).then(a=>{this.currentSrc===n&&(this.buffer=a,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var n;if(!this.paused)return;this.paused=!1,(n=this.bufferNode)===null||n===void 0||n.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let a=this.playedDuration*this._playbackRate;a>=this.duration&&(a=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,a),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var n;this.paused=!0,(n=this.bufferNode)===null||n===void 0||n.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return bs(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(n){var a,e;const s=n-this.currentTime;(a=this.bufferNode)===null||a===void 0||a.stop(this.audioContext.currentTime+s),(e=this.bufferNode)===null||e===void 0||e.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(n){return bs(this,void 0,void 0,function*(){return this.audioContext.setSinkId(n)})}get playbackRate(){return this._playbackRate}set playbackRate(n){this._playbackRate=n,this.bufferNode&&(this.bufferNode.playbackRate.value=n)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(n){const a=!this.paused;a&&this._pause(),this.playedDuration=n/this._playbackRate,a&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var n,a;return(n=this._duration)!==null&&n!==void 0?n:((a=this.buffer)===null||a===void 0?void 0:a.duration)||0}set duration(n){this._duration=n}get volume(){return this.gainNode.gain.value}set volume(n){this.gainNode.gain.value=n,this.emit("volumechange")}get muted(){return this._muted}set muted(n){this._muted!==n&&(this._muted=n,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(n){return/^(audio|video)\//.test(n)}getGainNode(){return this.gainNode}getChannelData(){const n=[];if(!this.buffer)return n;const a=this.buffer.numberOfChannels;for(let e=0;e<a;e++)n.push(this.buffer.getChannelData(e));return n}}const qze={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class gd extends Kze{static create(n){return new gd(n)}constructor(n){const a=n.media||(n.backend==="WebAudio"?new vO:void 0);super({media:a,mediaControls:n.mediaControls,autoplay:n.autoplay,playbackRate:n.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},qze,n),this.timer=new Xze;const e=a?void 0:this.getMediaElement();this.renderer=new _d(this.options,e),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const s=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:r,duration:o}=this.options;(s||r&&o)&&this.load(s,r,o).catch(()=>null)})}updateProgress(n=this.getCurrentTime()){return this.renderer.renderProgress(n/this.getDuration(),this.isPlaying()),n}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const n=this.updateProgress();this.emit("timeupdate",n),this.emit("audioprocess",n)}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const n=this.updateProgress();this.emit("timeupdate",n)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",n=>{this.emit("error",n.error)}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(n,a)=>{this.options.interact&&(this.seekTo(n),this.emit("interaction",n*this.getDuration()),this.emit("click",n,a))}),this.renderer.on("dblclick",(n,a)=>{this.emit("dblclick",n,a)}),this.renderer.on("scroll",(n,a,e,s)=>{const r=this.getDuration();this.emit("scroll",n*r,a*r,e,s)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",n=>{this.emit("dragstart",n)}),this.renderer.on("dragend",n=>{this.emit("dragend",n)}));{let n;this.subscriptions.push(this.renderer.on("drag",a=>{if(!this.options.interact)return;let e;this.renderer.renderProgress(a),clearTimeout(n),this.isPlaying()?e=0:this.options.dragToSeek===!0?e=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(e=this.options.dragToSeek.debounceTime),n=setTimeout(()=>{this.seekTo(a)},e),this.emit("interaction",a*this.getDuration()),this.emit("drag",a)}))}}initPlugins(){var n;!((n=this.options.plugins)===null||n===void 0)&&n.length&&this.options.plugins.forEach(a=>{this.registerPlugin(a)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(n=>n()),this.mediaSubscriptions=[]}setOptions(n){this.options=Object.assign({},this.options,n),this.renderer.setOptions(this.options),n.audioRate&&this.setPlaybackRate(n.audioRate),n.mediaControls!=null&&(this.getMediaElement().controls=n.mediaControls)}registerPlugin(n){return n._init(this),this.plugins.push(n),this.subscriptions.push(n.once("destroy",()=>{this.plugins=this.plugins.filter(a=>a!==n)})),n}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(n){return this.renderer.setScroll(n)}setScrollTime(n){const a=n/this.getDuration();this.renderer.setScrollPercentage(a)}getActivePlugins(){return this.plugins}loadAudio(n,a,e,s){return bs(this,void 0,void 0,function*(){var r;if(this.emit("load",n),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!a&&!e){const i=this.options.fetchParams||{};window.AbortController&&!i.signal&&(this.abortController=new AbortController,i.signal=(r=this.abortController)===null||r===void 0?void 0:r.signal);const l=c=>this.emit("loading",c);a=yield Yze.fetchBlob(n,l,i)}this.setSrc(n,a);const o=yield new Promise(i=>{const l=s||this.getDuration();l?i(l):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>i(this.getDuration()),{once:!0}))});if(!n&&!a){const i=this.getMediaElement();i instanceof vO&&(i.duration=o)}if(e)this.decodedData=gO.createBuffer(e,o||0);else if(a){const i=yield a.arrayBuffer();this.decodedData=yield gO.decode(i,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(n,a,e){return bs(this,void 0,void 0,function*(){try{return yield this.loadAudio(n,void 0,a,e)}catch(s){throw this.emit("error",s),s}})}loadBlob(n,a,e){return bs(this,void 0,void 0,function*(){try{return yield this.loadAudio("",n,a,e)}catch(s){throw this.emit("error",s),s}})}zoom(n){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(n),this.emit("zoom",n)}getDecodedData(){return this.decodedData}exportPeaks({channels:n=2,maxLength:a=8e3,precision:e=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const s=Math.min(n,this.decodedData.numberOfChannels),r=[];for(let o=0;o<s;o++){const i=this.decodedData.getChannelData(o),l=[],c=i.length/a;for(let d=0;d<a;d++){const u=i.slice(Math.floor(d*c),Math.ceil((d+1)*c));let m=0;for(let h=0;h<u.length;h++){const _=u[h];Math.abs(_)>Math.abs(m)&&(m=_)}l.push(Math.round(m*e)/e)}r.push(l)}return r}getDuration(){let n=super.getDuration()||0;return n!==0&&n!==1/0||!this.decodedData||(n=this.decodedData.duration),n}toggleInteraction(n){this.options.interact=n}setTime(n){super.setTime(n),this.updateProgress(n),this.emit("timeupdate",n)}seekTo(n){const a=this.getDuration()*n;this.setTime(a)}playPause(){return bs(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(n){this.setTime(this.getCurrentTime()+n)}empty(){this.load("",[[0]],.001)}setMediaElement(n){this.unsubscribePlayerEvents(),super.setMediaElement(n),this.initPlayerEvents()}exportImage(){return bs(this,arguments,void 0,function*(n="image/png",a=1,e="dataURL"){return this.renderer.exportImage(n,a,e)})}destroy(){var n;this.emit("destroy"),(n=this.abortController)===null||n===void 0||n.abort(),this.plugins.forEach(a=>a.destroy()),this.subscriptions.forEach(a=>a()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}gd.BasePlugin=class extends mp{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}_init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}},gd.dom=zze;function yb(t,n,a,e){return new(a||(a=Promise))(function(s,r){function o(c){try{l(e.next(c))}catch(d){r(d)}}function i(c){try{l(e.throw(c))}catch(d){r(d)}}function l(c){var d;c.done?s(c.value):(d=c.value,d instanceof a?d:new a(function(u){u(d)})).then(o,i)}l((e=e.apply(t,[])).next())})}class dD{constructor(){this.listeners={}}on(n,a,e){if(this.listeners[n]||(this.listeners[n]=new Set),this.listeners[n].add(a),e==null?void 0:e.once){const s=()=>{this.un(n,s),this.un(n,a)};return this.on(n,s),s}return()=>this.un(n,a)}un(n,a){var e;(e=this.listeners[n])===null||e===void 0||e.delete(a)}once(n,a){return this.on(n,a,{once:!0})}unAll(){this.listeners={}}emit(n,...a){this.listeners[n]&&this.listeners[n].forEach(e=>e(...a))}}class Zze extends dD{constructor(n){super(),this.subscriptions=[],this.options=n}onInit(){}_init(n){this.wavesurfer=n,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(n=>n())}}class Qze extends dD{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}const Jze=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class Qm extends Zze{constructor(n){var a,e,s,r,o,i;super(Object.assign(Object.assign({},n),{audioBitsPerSecond:(a=n.audioBitsPerSecond)!==null&&a!==void 0?a:128e3,scrollingWaveform:(e=n.scrollingWaveform)!==null&&e!==void 0&&e,scrollingWaveformWindow:(s=n.scrollingWaveformWindow)!==null&&s!==void 0?s:5,continuousWaveform:(r=n.continuousWaveform)!==null&&r!==void 0&&r,renderRecordedAudio:(o=n.renderRecordedAudio)===null||o===void 0||o,mediaRecorderTimeslice:(i=n.mediaRecorderTimeslice)!==null&&i!==void 0?i:void 0})),this.stream=null,this.mediaRecorder=null,this.dataWindow=null,this.isWaveformPaused=!1,this.lastStartTime=0,this.lastDuration=0,this.duration=0,this.timer=new Qze,this.subscriptions.push(this.timer.on("tick",()=>{const l=performance.now()-this.lastStartTime;this.duration=this.isPaused()?this.duration:this.lastDuration+l,this.emit("record-progress",this.duration)}))}static create(n){return new Qm(n||{})}renderMicStream(n){var a;const e=new AudioContext,s=e.createMediaStreamSource(n),r=e.createAnalyser();s.connect(r),this.options.continuousWaveform&&(r.fftSize=32);const o=r.frequencyBinCount,i=new Float32Array(o);let l=0;this.wavesurfer&&((a=this.originalOptions)!==null&&a!==void 0||(this.originalOptions=Object.assign({},this.wavesurfer.options)),this.wavesurfer.options.interact=!1,this.options.scrollingWaveform&&(this.wavesurfer.options.cursorWidth=0));const c=setInterval(()=>{var d,u,m,h;if(!this.isWaveformPaused){if(r.getFloatTimeDomainData(i),this.options.scrollingWaveform){const _=Math.floor((this.options.scrollingWaveformWindow||0)*e.sampleRate),E=Math.min(_,this.dataWindow?this.dataWindow.length+o:o),y=new Float32Array(_);if(this.dataWindow){const b=Math.max(0,_-this.dataWindow.length);y.set(this.dataWindow.slice(-E+o),b)}y.set(i,_-o),this.dataWindow=y}else if(this.options.continuousWaveform){if(!this.dataWindow){const E=this.options.continuousWaveformDuration?Math.round(100*this.options.continuousWaveformDuration):((u=(d=this.wavesurfer)===null||d===void 0?void 0:d.getWidth())!==null&&u!==void 0?u:0)*window.devicePixelRatio;this.dataWindow=new Float32Array(E)}let _=0;for(let E=0;E<o;E++){const y=Math.abs(i[E]);y>_&&(_=y)}if(l+1>this.dataWindow.length){const E=new Float32Array(2*this.dataWindow.length);E.set(this.dataWindow,0),this.dataWindow=E}this.dataWindow[l]=_,l++}else this.dataWindow=i;if(this.wavesurfer){const _=((h=(m=this.dataWindow)===null||m===void 0?void 0:m.length)!==null&&h!==void 0?h:0)/100;this.wavesurfer.load("",[this.dataWindow],this.options.scrollingWaveform?this.options.scrollingWaveformWindow:_).then(()=>{this.wavesurfer&&this.options.continuousWaveform&&(this.wavesurfer.setTime(this.getDuration()/1e3),this.wavesurfer.options.minPxPerSec||this.wavesurfer.setOptions({minPxPerSec:this.wavesurfer.getWidth()/this.wavesurfer.getDuration()}))}).catch(E=>{console.error("Error rendering real-time recording data:",E)})}}},10);return{onDestroy:()=>{clearInterval(c),s==null||s.disconnect(),e==null||e.close()},onEnd:()=>{this.isWaveformPaused=!0,clearInterval(c),this.stopMic()}}}startMic(n){return yb(this,void 0,void 0,function*(){let a;try{a=yield navigator.mediaDevices.getUserMedia({audio:!(n!=null&&n.deviceId)||{deviceId:n.deviceId}})}catch(r){throw new Error("Error accessing the microphone: "+r.message)}const{onDestroy:e,onEnd:s}=this.renderMicStream(a);return this.subscriptions.push(this.once("destroy",e)),this.subscriptions.push(this.once("record-end",s)),this.stream=a,a})}stopMic(){this.stream&&(this.stream.getTracks().forEach(n=>n.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(n){return yb(this,void 0,void 0,function*(){const a=this.stream||(yield this.startMic(n));this.dataWindow=null;const e=this.mediaRecorder||new MediaRecorder(a,{mimeType:this.options.mimeType||Jze.find(o=>MediaRecorder.isTypeSupported(o)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=e,this.stopRecording();const s=[];e.ondataavailable=o=>{o.data.size>0&&s.push(o.data),this.emit("record-data-available",o.data)};const r=o=>{var i;const l=new Blob(s,{type:e.mimeType});this.emit(o,l),this.options.renderRecordedAudio&&(this.applyOriginalOptionsIfNeeded(),(i=this.wavesurfer)===null||i===void 0||i.load(URL.createObjectURL(l)))};e.onpause=()=>r("record-pause"),e.onstop=()=>r("record-end"),e.start(this.options.mediaRecorderTimeslice),this.lastStartTime=performance.now(),this.lastDuration=0,this.duration=0,this.isWaveformPaused=!1,this.timer.start(),this.emit("record-start")})}getDuration(){return this.duration}isRecording(){var n;return((n=this.mediaRecorder)===null||n===void 0?void 0:n.state)==="recording"}isPaused(){var n;return((n=this.mediaRecorder)===null||n===void 0?void 0:n.state)==="paused"}isActive(){var n;return((n=this.mediaRecorder)===null||n===void 0?void 0:n.state)!=="inactive"}stopRecording(){var n;this.isActive()&&((n=this.mediaRecorder)===null||n===void 0||n.stop(),this.timer.stop())}pauseRecording(){var n,a;this.isRecording()&&(this.isWaveformPaused=!0,(n=this.mediaRecorder)===null||n===void 0||n.requestData(),(a=this.mediaRecorder)===null||a===void 0||a.pause(),this.timer.stop(),this.lastDuration=this.duration)}resumeRecording(){var n;this.isPaused()&&(this.isWaveformPaused=!1,(n=this.mediaRecorder)===null||n===void 0||n.resume(),this.timer.start(),this.lastStartTime=performance.now(),this.emit("record-resume"))}static getAvailableAudioDevices(){return yb(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(n=>n.filter(a=>a.kind==="audioinput"))})}destroy(){this.applyOriginalOptionsIfNeeded(),super.destroy(),this.stopRecording(),this.stopMic()}applyOriginalOptionsIfNeeded(){this.wavesurfer&&this.originalOptions&&(this.wavesurfer.setOptions(this.originalOptions),delete this.originalOptions)}}var b1={};function eYe(t){return new Int8Array(t)}function tYe(t){return new Int16Array(t)}function uD(t){return new Int32Array(t)}function pD(t){return new Float32Array(t)}function nYe(t){return new Float64Array(t)}function fD(t){if(t.length==1)return pD(t[0]);var n=t[0];t=t.slice(1);for(var a=[],e=0;e<n;e++)a.push(fD(t));return a}function mD(t){if(t.length==1)return uD(t[0]);var n=t[0];t=t.slice(1);for(var a=[],e=0;e<n;e++)a.push(mD(t));return a}function hD(t){if(t.length==1)return tYe(t[0]);var n=t[0];t=t.slice(1);for(var a=[],e=0;e<n;e++)a.push(hD(t));return a}function _D(t){if(t.length==1)return new Array(t[0]);var n=t[0];t=t.slice(1);for(var a=[],e=0;e<n;e++)a.push(_D(t));return a}var gD={};gD.fill=function(t,n,a,e){if(arguments.length==2)for(var s=0;s<t.length;s++)t[s]=arguments[1];else for(var s=n;s<a;s++)t[s]=e};var hp={};hp.arraycopy=function(t,n,a,e,s){for(var r=n+s;n<r;)a[e++]=t[n++]};hp.out={};hp.out.println=function(t){console.log(t)};hp.out.printf=function(){console.log.apply(console,arguments)};var a_={};a_.SQRT2=1.4142135623730951;a_.FAST_LOG10=function(t){return Math.log10(t)};a_.FAST_LOG10_X=function(t,n){return Math.log10(t)*n};function Jr(t){this.ordinal=t}Jr.short_block_allowed=new Jr(0);Jr.short_block_coupled=new Jr(1);Jr.short_block_dispensed=new Jr(2);Jr.short_block_forced=new Jr(3);var bD={};bD.MAX_VALUE=34028235e31;function po(t){this.ordinal=t}po.vbr_off=new po(0);po.vbr_mt=new po(1);po.vbr_rh=new po(2);po.vbr_abr=new po(3);po.vbr_mtrh=new po(4);po.vbr_default=po.vbr_mtrh;var aYe=function(t){},_a={System:hp,VbrMode:po,Float:bD,ShortBlock:Jr,Util:a_,Arrays:gD,new_array_n:_D,new_byte:eYe,new_double:nYe,new_float:pD,new_float_n:fD,new_int:uD,new_int_n:mD,new_short_n:hD,assert:aYe},Ib,EO;function sYe(){if(EO)return Ib;EO=1;var t=_a,n=t.System,a=t.Util,e=t.Arrays,s=t.new_float,r=Ts();function o(){var i=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*a.SQRT2*.5/2384e-9,.017876148*a.SQRT2*.5/2384e-9,.003134727*a.SQRT2*.5/2384e-9,.002457142*a.SQRT2*.5/2384e-9,971317e-9*a.SQRT2*.5/2384e-9,218868e-9*a.SQRT2*.5/2384e-9,101566e-9*a.SQRT2*.5/2384e-9,13828e-9*a.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],l=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],c=l[r.SHORT_TYPE],d=l[r.SHORT_TYPE],u=l[r.SHORT_TYPE],m=l[r.SHORT_TYPE],h=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function _(b,A,T){for(var I=10,N=A+238-14-286,x=-15;x<0;x++){var R,M,w;R=i[I+-10],M=b[N+-224]*R,w=b[A+224]*R,R=i[I+-9],M+=b[N+-160]*R,w+=b[A+160]*R,R=i[I+-8],M+=b[N+-96]*R,w+=b[A+96]*R,R=i[I+-7],M+=b[N+-32]*R,w+=b[A+32]*R,R=i[I+-6],M+=b[N+32]*R,w+=b[A+-32]*R,R=i[I+-5],M+=b[N+96]*R,w+=b[A+-96]*R,R=i[I+-4],M+=b[N+160]*R,w+=b[A+-160]*R,R=i[I+-3],M+=b[N+224]*R,w+=b[A+-224]*R,R=i[I+-2],M+=b[A+-256]*R,w-=b[N+256]*R,R=i[I+-1],M+=b[A+-192]*R,w-=b[N+192]*R,R=i[I+0],M+=b[A+-128]*R,w-=b[N+128]*R,R=i[I+1],M+=b[A+-64]*R,w-=b[N+64]*R,R=i[I+2],M+=b[A+0]*R,w-=b[N+0]*R,R=i[I+3],M+=b[A+64]*R,w-=b[N+-64]*R,R=i[I+4],M+=b[A+128]*R,w-=b[N+-128]*R,R=i[I+5],M+=b[A+192]*R,w-=b[N+-192]*R,M*=i[I+6],R=w-M,T[30+x*2]=w+M,T[31+x*2]=i[I+7]*R,I+=18,A--,N++}{var M,w,D,B;w=b[A+-16]*i[I+-10],M=b[A+-32]*i[I+-2],w+=(b[A+-48]-b[A+16])*i[I+-9],M+=b[A+-96]*i[I+-1],w+=(b[A+-80]+b[A+48])*i[I+-8],M+=b[A+-160]*i[I+0],w+=(b[A+-112]-b[A+80])*i[I+-7],M+=b[A+-224]*i[I+1],w+=(b[A+-144]+b[A+112])*i[I+-6],M-=b[A+32]*i[I+2],w+=(b[A+-176]-b[A+144])*i[I+-5],M-=b[A+96]*i[I+3],w+=(b[A+-208]+b[A+176])*i[I+-4],M-=b[A+160]*i[I+4],w+=(b[A+-240]-b[A+208])*i[I+-3],M-=b[A+224],D=M-w,B=M+w,w=T[14],M=T[15]-w,T[31]=B+w,T[30]=D+M,T[15]=D-M,T[14]=B-w}{var k;k=T[28]-T[0],T[0]+=T[28],T[28]=k*i[I+-2*18+7],k=T[29]-T[1],T[1]+=T[29],T[29]=k*i[I+-2*18+7],k=T[26]-T[2],T[2]+=T[26],T[26]=k*i[I+-4*18+7],k=T[27]-T[3],T[3]+=T[27],T[27]=k*i[I+-4*18+7],k=T[24]-T[4],T[4]+=T[24],T[24]=k*i[I+-6*18+7],k=T[25]-T[5],T[5]+=T[25],T[25]=k*i[I+-6*18+7],k=T[22]-T[6],T[6]+=T[22],T[22]=k*a.SQRT2,k=T[23]-T[7],T[7]+=T[23],T[23]=k*a.SQRT2-T[7],T[7]-=T[6],T[22]-=T[7],T[23]-=T[22],k=T[6],T[6]=T[31]-k,T[31]=T[31]+k,k=T[7],T[7]=T[30]-k,T[30]=T[30]+k,k=T[22],T[22]=T[15]-k,T[15]=T[15]+k,k=T[23],T[23]=T[14]-k,T[14]=T[14]+k,k=T[20]-T[8],T[8]+=T[20],T[20]=k*i[I+-10*18+7],k=T[21]-T[9],T[9]+=T[21],T[21]=k*i[I+-10*18+7],k=T[18]-T[10],T[10]+=T[18],T[18]=k*i[I+-12*18+7],k=T[19]-T[11],T[11]+=T[19],T[19]=k*i[I+-12*18+7],k=T[16]-T[12],T[12]+=T[16],T[16]=k*i[I+-14*18+7],k=T[17]-T[13],T[13]+=T[17],T[17]=k*i[I+-14*18+7],k=-T[20]+T[24],T[20]+=T[24],T[24]=k*i[I+-12*18+7],k=-T[21]+T[25],T[21]+=T[25],T[25]=k*i[I+-12*18+7],k=T[4]-T[8],T[4]+=T[8],T[8]=k*i[I+-12*18+7],k=T[5]-T[9],T[5]+=T[9],T[9]=k*i[I+-12*18+7],k=T[0]-T[12],T[0]+=T[12],T[12]=k*i[I+-4*18+7],k=T[1]-T[13],T[1]+=T[13],T[13]=k*i[I+-4*18+7],k=T[16]-T[28],T[16]+=T[28],T[28]=k*i[I+-4*18+7],k=-T[17]+T[29],T[17]+=T[29],T[29]=k*i[I+-4*18+7],k=a.SQRT2*(T[2]-T[10]),T[2]+=T[10],T[10]=k,k=a.SQRT2*(T[3]-T[11]),T[3]+=T[11],T[11]=k,k=a.SQRT2*(-T[18]+T[26]),T[18]+=T[26],T[26]=k-T[18],k=a.SQRT2*(-T[19]+T[27]),T[19]+=T[27],T[27]=k-T[19],k=T[2],T[19]-=T[3],T[3]-=k,T[2]=T[31]-k,T[31]+=k,k=T[3],T[11]-=T[19],T[18]-=k,T[3]=T[30]-k,T[30]+=k,k=T[18],T[27]-=T[11],T[19]-=k,T[18]=T[15]-k,T[15]+=k,k=T[19],T[10]-=k,T[19]=T[14]-k,T[14]+=k,k=T[10],T[11]-=k,T[10]=T[23]-k,T[23]+=k,k=T[11],T[26]-=k,T[11]=T[22]-k,T[22]+=k,k=T[26],T[27]-=k,T[26]=T[7]-k,T[7]+=k,k=T[27],T[27]=T[6]-k,T[6]+=k,k=a.SQRT2*(T[0]-T[4]),T[0]+=T[4],T[4]=k,k=a.SQRT2*(T[1]-T[5]),T[1]+=T[5],T[5]=k,k=a.SQRT2*(T[16]-T[20]),T[16]+=T[20],T[20]=k,k=a.SQRT2*(T[17]-T[21]),T[17]+=T[21],T[21]=k,k=-a.SQRT2*(T[8]-T[12]),T[8]+=T[12],T[12]=k-T[8],k=-a.SQRT2*(T[9]-T[13]),T[9]+=T[13],T[13]=k-T[9],k=-a.SQRT2*(T[25]-T[29]),T[25]+=T[29],T[29]=k-T[25],k=-a.SQRT2*(T[24]+T[28]),T[24]-=T[28],T[28]=k-T[24],k=T[24]-T[16],T[24]=k,k=T[20]-k,T[20]=k,k=T[28]-k,T[28]=k,k=T[25]-T[17],T[25]=k,k=T[21]-k,T[21]=k,k=T[29]-k,T[29]=k,k=T[17]-T[1],T[17]=k,k=T[9]-k,T[9]=k,k=T[25]-k,T[25]=k,k=T[5]-k,T[5]=k,k=T[21]-k,T[21]=k,k=T[13]-k,T[13]=k,k=T[29]-k,T[29]=k,k=T[1]-T[0],T[1]=k,k=T[16]-k,T[16]=k,k=T[17]-k,T[17]=k,k=T[8]-k,T[8]=k,k=T[9]-k,T[9]=k,k=T[24]-k,T[24]=k,k=T[25]-k,T[25]=k,k=T[4]-k,T[4]=k,k=T[5]-k,T[5]=k,k=T[20]-k,T[20]=k,k=T[21]-k,T[21]=k,k=T[12]-k,T[12]=k,k=T[13]-k,T[13]=k,k=T[28]-k,T[28]=k,k=T[29]-k,T[29]=k,k=T[0],T[0]+=T[31],T[31]-=k,k=T[1],T[1]+=T[30],T[30]-=k,k=T[16],T[16]+=T[15],T[15]-=k,k=T[17],T[17]+=T[14],T[14]-=k,k=T[8],T[8]+=T[23],T[23]-=k,k=T[9],T[9]+=T[22],T[22]-=k,k=T[24],T[24]+=T[7],T[7]-=k,k=T[25],T[25]+=T[6],T[6]-=k,k=T[4],T[4]+=T[27],T[27]-=k,k=T[5],T[5]+=T[26],T[26]-=k,k=T[20],T[20]+=T[11],T[11]-=k,k=T[21],T[21]+=T[10],T[10]-=k,k=T[12],T[12]+=T[19],T[19]-=k,k=T[13],T[13]+=T[18],T[18]-=k,k=T[28],T[28]+=T[3],T[3]-=k,k=T[29],T[29]+=T[2],T[2]-=k}}function E(b,A){for(var T=0;T<3;T++){var I,N,x,R,M,w;R=b[A+2*3]*l[r.SHORT_TYPE][0]-b[A+5*3],I=b[A+0*3]*l[r.SHORT_TYPE][2]-b[A+3*3],N=R+I,x=R-I,R=b[A+5*3]*l[r.SHORT_TYPE][0]+b[A+2*3],I=b[A+3*3]*l[r.SHORT_TYPE][2]+b[A+0*3],M=R+I,w=-R+I,I=(b[A+1*3]*l[r.SHORT_TYPE][1]-b[A+4*3])*2069978111953089e-26,R=(b[A+4*3]*l[r.SHORT_TYPE][1]+b[A+1*3])*2069978111953089e-26,b[A+3*0]=N*190752519173728e-25+I,b[A+3*5]=-M*190752519173728e-25+R,x=x*.8660254037844387*1907525191737281e-26,M=M*.5*1907525191737281e-26+R,b[A+3*1]=x-M,b[A+3*2]=x+M,N=N*.5*1907525191737281e-26-I,w=w*.8660254037844387*1907525191737281e-26,b[A+3*3]=N+w,b[A+3*4]=N-w,A++}}function y(b,A,T){var I,N;{var x,R,M,w,D,B,k,V;x=T[17]-T[9],M=T[15]-T[11],w=T[14]-T[12],D=T[0]+T[8],B=T[1]+T[7],k=T[2]+T[6],V=T[3]+T[5],b[A+17]=D+k-V-(B-T[4]),N=(D+k-V)*d[19]+(B-T[4]),I=(x-M-w)*d[18],b[A+5]=I+N,b[A+6]=I-N,R=(T[16]-T[10])*d[18],B=B*d[19]+T[4],I=x*d[12]+R+M*d[13]+w*d[14],N=-D*d[16]+B-k*d[17]+V*d[15],b[A+1]=I+N,b[A+2]=I-N,I=x*d[13]-R-M*d[14]+w*d[12],N=-D*d[17]+B-k*d[15]+V*d[16],b[A+9]=I+N,b[A+10]=I-N,I=x*d[14]-R+M*d[12]-w*d[13],N=D*d[15]-B+k*d[16]-V*d[17],b[A+13]=I+N,b[A+14]=I-N}{var F,$,Y,j,U,J,te,q;F=T[8]-T[0],Y=T[6]-T[2],j=T[5]-T[3],U=T[17]+T[9],J=T[16]+T[10],te=T[15]+T[11],q=T[14]+T[12],b[A+0]=U+te+q+(J+T[13]),I=(U+te+q)*d[19]-(J+T[13]),N=(F-Y+j)*d[18],b[A+11]=I+N,b[A+12]=I-N,$=(T[7]-T[1])*d[18],J=T[13]-J*d[19],I=U*d[15]-J+te*d[16]+q*d[17],N=F*d[14]+$+Y*d[12]+j*d[13],b[A+3]=I+N,b[A+4]=I-N,I=-U*d[17]+J-te*d[15]-q*d[16],N=F*d[13]+$-Y*d[14]-j*d[12],b[A+7]=I+N,b[A+8]=I-N,I=-U*d[16]+J-te*d[17]-q*d[15],N=F*d[12]-$+Y*d[13]-j*d[14],b[A+15]=I+N,b[A+16]=I-N}}this.mdct_sub48=function(b,A,T){for(var I=A,N=286,x=0;x<b.channels_out;x++){for(var R=0;R<b.mode_gr;R++){for(var M,w=b.l3_side.tt[R][x],D=w.xr,B=0,k=b.sb_sample[x][1-R],V=0,F=0;F<18/2;F++)for(_(I,N,k[V]),_(I,N+32,k[V+1]),V+=2,N+=64,M=1;M<32;M+=2)k[V-1][M]*=-1;for(M=0;M<32;M++,B+=18){var $=w.block_type,Y=b.sb_sample[x][R],j=b.sb_sample[x][1-R];if(w.mixed_block_flag!=0&&M<2&&($=0),b.amp_filter[M]<1e-12)e.fill(D,B+0,B+18,0);else{if(b.amp_filter[M]<1)for(var F=0;F<18;F++)j[F][h[M]]*=b.amp_filter[M];if($==r.SHORT_TYPE){for(var F=-12/4;F<0;F++){var U=l[r.SHORT_TYPE][F+3];D[B+F*3+9]=Y[9+F][h[M]]*U-Y[8-F][h[M]],D[B+F*3+18]=Y[14-F][h[M]]*U+Y[15+F][h[M]],D[B+F*3+10]=Y[15+F][h[M]]*U-Y[14-F][h[M]],D[B+F*3+19]=j[2-F][h[M]]*U+j[3+F][h[M]],D[B+F*3+11]=j[3+F][h[M]]*U-j[2-F][h[M]],D[B+F*3+20]=j[8-F][h[M]]*U+j[9+F][h[M]]}E(D,B)}else{for(var J=s(18),F=-36/4;F<0;F++){var te,q;te=l[$][F+27]*j[F+9][h[M]]+l[$][F+36]*j[8-F][h[M]],q=l[$][F+9]*Y[F+9][h[M]]-l[$][F+18]*Y[8-F][h[M]],J[F+9]=te-q*c[3+F+9],J[F+18]=te*c[3+F+9]+q}y(D,B,J)}}if($!=r.SHORT_TYPE&&M!=0)for(var F=7;F>=0;--F){var K,W;K=D[B+F]*u[20+F]+D[B+-1-F]*m[28+F],W=D[B+F]*m[28+F]-D[B+-1-F]*u[20+F],D[B+-1-F]=K,D[B+F]=W}}}if(I=T,N=286,b.mode_gr==1)for(var ee=0;ee<18;ee++)n.arraycopy(b.sb_sample[x][1][ee],0,b.sb_sample[x][0][ee],0,32)}}}return Ib=o,Ib}var Cb,SO;function vD(){if(SO)return Cb;SO=1;var t=Ts(),n=_a,a=n.System,e=n.new_float,s=n.new_float_n;function r(){this.l=e(t.SBMAX_l),this.s=s([t.SBMAX_s,3]);var o=this;this.assign=function(i){a.arraycopy(i.l,0,o.l,0,t.SBMAX_l);for(var l=0;l<t.SBMAX_s;l++)for(var c=0;c<3;c++)o.s[l][c]=i.s[l][c]}}return Cb=r,Cb}var Ob,TO;function oYe(){if(TO)return Ob;TO=1;var t=vD();function n(){this.thm=new t,this.en=new t}return Ob=n,Ob}function er(t){var n=t;this.ordinal=function(){return n}}er.STEREO=new er(0);er.JOINT_STEREO=new er(1);er.DUAL_CHANNEL=new er(2);er.MONO=new er(3);er.NOT_SET=new er(4);var _p=er,Nb,AO;function Ts(){if(AO)return Nb;AO=1;var t=_a,n=t.System,a=t.VbrMode,e=t.new_array_n,s=t.new_float,r=t.new_float_n,o=t.new_int,i=t.assert;l.ENCDELAY=576,l.POSTDELAY=1152,l.MDCTDELAY=48,l.FFTOFFSET=224+l.MDCTDELAY,l.DECDELAY=528,l.SBLIMIT=32,l.CBANDS=64,l.SBPSY_l=21,l.SBPSY_s=12,l.SBMAX_l=22,l.SBMAX_s=13,l.PSFB21=6,l.PSFB12=6,l.BLKSIZE=1024,l.HBLKSIZE=l.BLKSIZE/2+1,l.BLKSIZE_s=256,l.HBLKSIZE_s=l.BLKSIZE_s/2+1,l.NORM_TYPE=0,l.START_TYPE=1,l.SHORT_TYPE=2,l.STOP_TYPE=3,l.MPG_MD_LR_LR=0,l.MPG_MD_LR_I=1,l.MPG_MD_MS_LR=2,l.MPG_MD_MS_I=3,l.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function l(){var c=sYe(),d=oYe(),u=_p,m=l.FFTOFFSET,h=l.MPG_MD_MS_LR,_=null;this.psy=null;var E=null,y=null,b=null;this.setModules=function(x,R,M,w){_=x,this.psy=R,E=R,y=w,b=M};var A=new c;function T(x){var R,M;if(x.ATH.useAdjust==0){x.ATH.adjust=1;return}if(M=x.loudness_sq[0][0],R=x.loudness_sq[1][0],x.channels_out==2?(M+=x.loudness_sq[0][1],R+=x.loudness_sq[1][1]):(M+=M,R+=R),x.mode_gr==2&&(M=Math.max(M,R)),M*=.5,M*=x.ATH.aaSensitivityP,M>.03125)x.ATH.adjust>=1?x.ATH.adjust=1:x.ATH.adjust<x.ATH.adjustLimit&&(x.ATH.adjust=x.ATH.adjustLimit),x.ATH.adjustLimit=1;else{var w=31.98*M+625e-6;x.ATH.adjust>=w?(x.ATH.adjust*=w*.075+.925,x.ATH.adjust<w&&(x.ATH.adjust=w)):x.ATH.adjustLimit>=w?x.ATH.adjust=w:x.ATH.adjust<x.ATH.adjustLimit&&(x.ATH.adjust=x.ATH.adjustLimit),x.ATH.adjustLimit=w}}function I(x){var R,M;for(i(0<=x.bitrate_index&&x.bitrate_index<16),i(0<=x.mode_ext&&x.mode_ext<4),x.bitrate_stereoMode_Hist[x.bitrate_index][4]++,x.bitrate_stereoMode_Hist[15][4]++,x.channels_out==2&&(x.bitrate_stereoMode_Hist[x.bitrate_index][x.mode_ext]++,x.bitrate_stereoMode_Hist[15][x.mode_ext]++),R=0;R<x.mode_gr;++R)for(M=0;M<x.channels_out;++M){var w=x.l3_side.tt[R][M].block_type|0;x.l3_side.tt[R][M].mixed_block_flag!=0&&(w=4),x.bitrate_blockType_Hist[x.bitrate_index][w]++,x.bitrate_blockType_Hist[x.bitrate_index][5]++,x.bitrate_blockType_Hist[15][w]++,x.bitrate_blockType_Hist[15][5]++}}function N(x,R){var M=x.internal_flags,w,D;if(M.lame_encode_frame_init==0){var B,k,V=s(2014),F=s(2014);for(M.lame_encode_frame_init=1,B=0,k=0;B<286+576*(1+M.mode_gr);++B)B<576*M.mode_gr?(V[B]=0,M.channels_out==2&&(F[B]=0)):(V[B]=R[0][k],M.channels_out==2&&(F[B]=R[1][k]),++k);for(D=0;D<M.mode_gr;D++)for(w=0;w<M.channels_out;w++)M.l3_side.tt[D][w].block_type=l.SHORT_TYPE;A.mdct_sub48(M,V,F),i(576>=l.FFTOFFSET),i(M.mf_size>=l.BLKSIZE+x.framesize-l.FFTOFFSET),i(M.mf_size>=512+x.framesize-32)}}this.lame_encode_mp3_frame=function(x,R,M,w,D,B){var k,V=e([2,2]);V[0][0]=new d,V[0][1]=new d,V[1][0]=new d,V[1][1]=new d;var F=e([2,2]);F[0][0]=new d,F[0][1]=new d,F[1][0]=new d,F[1][1]=new d;var $,Y=[null,null],j=x.internal_flags,U=r([2,4]),J=[.5,.5],te=[[0,0],[0,0]],q=[[0,0],[0,0]],K,W,ee;if(Y[0]=R,Y[1]=M,j.lame_encode_frame_init==0&&N(x,Y),j.padding=0,(j.slot_lag-=j.frac_SpF)<0&&(j.slot_lag+=x.out_samplerate,j.padding=1),j.psymodel!=0){var ae,ve=[null,null],Ce=0,ue=o(2);for(ee=0;ee<j.mode_gr;ee++){for(W=0;W<j.channels_out;W++)ve[W]=Y[W],Ce=576+ee*576-l.FFTOFFSET;if(x.VBR==a.vbr_mtrh||x.VBR==a.vbr_mt?ae=E.L3psycho_anal_vbr(x,ve,Ce,ee,V,F,te[ee],q[ee],U[ee],ue):ae=E.L3psycho_anal_ns(x,ve,Ce,ee,V,F,te[ee],q[ee],U[ee],ue),ae!=0)return-4;for(x.mode==u.JOINT_STEREO&&(J[ee]=U[ee][2]+U[ee][3],J[ee]>0&&(J[ee]=U[ee][3]/J[ee])),W=0;W<j.channels_out;W++){var ge=j.l3_side.tt[ee][W];ge.block_type=ue[W],ge.mixed_block_flag=0}}}else for(ee=0;ee<j.mode_gr;ee++)for(W=0;W<j.channels_out;W++)j.l3_side.tt[ee][W].block_type=l.NORM_TYPE,j.l3_side.tt[ee][W].mixed_block_flag=0,q[ee][W]=te[ee][W]=700;if(T(j),A.mdct_sub48(j,Y[0],Y[1]),j.mode_ext=l.MPG_MD_LR_LR,x.force_ms)j.mode_ext=l.MPG_MD_MS_LR;else if(x.mode==u.JOINT_STEREO){var Me=0,We=0;for(ee=0;ee<j.mode_gr;ee++)for(W=0;W<j.channels_out;W++)Me+=q[ee][W],We+=te[ee][W];if(Me<=1*We){var Ue=j.l3_side.tt[0],Re=j.l3_side.tt[j.mode_gr-1];Ue[0].block_type==Ue[1].block_type&&Re[0].block_type==Re[1].block_type&&(j.mode_ext=l.MPG_MD_MS_LR)}}if(j.mode_ext==h?($=F,K=q):($=V,K=te),x.analysis&&j.pinfo!=null)for(ee=0;ee<j.mode_gr;ee++)for(W=0;W<j.channels_out;W++)j.pinfo.ms_ratio[ee]=j.ms_ratio[ee],j.pinfo.ms_ener_ratio[ee]=J[ee],j.pinfo.blocktype[ee][W]=j.l3_side.tt[ee][W].block_type,j.pinfo.pe[ee][W]=K[ee][W],n.arraycopy(j.l3_side.tt[ee][W].xr,0,j.pinfo.xr[ee][W],0,576),j.mode_ext==h&&(j.pinfo.ers[ee][W]=j.pinfo.ers[ee][W+2],n.arraycopy(j.pinfo.energy[ee][W+2],0,j.pinfo.energy[ee][W],0,j.pinfo.energy[ee][W].length));if(x.VBR==a.vbr_off||x.VBR==a.vbr_abr){var Le,Xe;for(Le=0;Le<18;Le++)j.nsPsy.pefirbuf[Le]=j.nsPsy.pefirbuf[Le+1];for(Xe=0,ee=0;ee<j.mode_gr;ee++)for(W=0;W<j.channels_out;W++)Xe+=K[ee][W];for(j.nsPsy.pefirbuf[18]=Xe,Xe=j.nsPsy.pefirbuf[9],Le=0;Le<9;Le++)Xe+=(j.nsPsy.pefirbuf[Le]+j.nsPsy.pefirbuf[18-Le])*l.fircoef[Le];for(Xe=670*5*j.mode_gr*j.channels_out/Xe,ee=0;ee<j.mode_gr;ee++)for(W=0;W<j.channels_out;W++)K[ee][W]*=Xe}if(j.iteration_loop.iteration_loop(x,K,J,$),_.format_bitstream(x),k=_.copy_buffer(j,w,D,B,1),x.bWriteVbrTag&&y.addVbrFrame(x),x.analysis&&j.pinfo!=null){for(W=0;W<j.channels_out;W++){var et;for(et=0;et<m;et++)j.pinfo.pcmdata[W][et]=j.pinfo.pcmdata[W][et+x.framesize];for(et=m;et<1600;et++)j.pinfo.pcmdata[W][et]=Y[W][et-m]}b.set_frame_pinfo(x,$)}return I(j),k}}return Nb=l,Nb}var ED=_a,yO=ED.Util,IO=ED.new_float,La=Ts();function rYe(){var t=IO(La.BLKSIZE),n=IO(La.BLKSIZE_s/2),a=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function e(r,o,i){var l=0,c,d,u;i<<=1;var m=o+i;c=4;do{var h,_,E,y,b,A,T;T=c>>1,y=c,b=c<<1,A=b+y,c=b<<1,d=o,u=d+T;do{var I,N,x,R;N=r[d+0]-r[d+y],I=r[d+0]+r[d+y],R=r[d+b]-r[d+A],x=r[d+b]+r[d+A],r[d+b]=I-x,r[d+0]=I+x,r[d+A]=N-R,r[d+y]=N+R,N=r[u+0]-r[u+y],I=r[u+0]+r[u+y],R=yO.SQRT2*r[u+A],x=yO.SQRT2*r[u+b],r[u+b]=I-x,r[u+0]=I+x,r[u+A]=N-R,r[u+y]=N+R,u+=c,d+=c}while(d<m);for(_=a[l+0],h=a[l+1],E=1;E<T;E++){var M,w;M=1-2*h*h,w=2*h*_,d=o+E,u=o+y-E;do{var D,B,k,I,N,V,x,F,R,$;B=w*r[d+y]-M*r[u+y],D=M*r[d+y]+w*r[u+y],N=r[d+0]-D,I=r[d+0]+D,V=r[u+0]-B,k=r[u+0]+B,B=w*r[d+A]-M*r[u+A],D=M*r[d+A]+w*r[u+A],R=r[d+b]-D,x=r[d+b]+D,$=r[u+b]-B,F=r[u+b]+B,B=h*x-_*$,D=_*x+h*$,r[d+b]=I-D,r[d+0]=I+D,r[u+A]=V-B,r[u+y]=V+B,B=_*F-h*R,D=h*F+_*R,r[u+b]=k-D,r[u+0]=k+D,r[d+A]=N-B,r[d+y]=N+B,u+=c,d+=c}while(d<m);M=_,_=M*a[l+0]-h*a[l+1],h=M*a[l+1]+h*a[l+0]}l+=2}while(c<i)}var s=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(r,o,i,l,c){for(var d=0;d<3;d++){var u=La.BLKSIZE_s/2,m=65535&576/3*(d+1),h=La.BLKSIZE_s/8-1;do{var _,E,y,b,A,T=s[h<<2]&255;_=n[T]*l[i][c+T+m],A=n[127-T]*l[i][c+T+m+128],E=_-A,_=_+A,y=n[T+64]*l[i][c+T+m+64],A=n[63-T]*l[i][c+T+m+192],b=y-A,y=y+A,u-=4,o[d][u+0]=_+y,o[d][u+2]=_-y,o[d][u+1]=E+b,o[d][u+3]=E-b,_=n[T+1]*l[i][c+T+m+1],A=n[126-T]*l[i][c+T+m+129],E=_-A,_=_+A,y=n[T+65]*l[i][c+T+m+65],A=n[62-T]*l[i][c+T+m+193],b=y-A,y=y+A,o[d][u+La.BLKSIZE_s/2+0]=_+y,o[d][u+La.BLKSIZE_s/2+2]=_-y,o[d][u+La.BLKSIZE_s/2+1]=E+b,o[d][u+La.BLKSIZE_s/2+3]=E-b}while(--h>=0);e(o[d],u,La.BLKSIZE_s/2)}},this.fft_long=function(r,o,i,l,c){var d=La.BLKSIZE/8-1,u=La.BLKSIZE/2;do{var m,h,_,E,y,b=s[d]&255;m=t[b]*l[i][c+b],y=t[b+512]*l[i][c+b+512],h=m-y,m=m+y,_=t[b+256]*l[i][c+b+256],y=t[b+768]*l[i][c+b+768],E=_-y,_=_+y,u-=4,o[u+0]=m+_,o[u+2]=m-_,o[u+1]=h+E,o[u+3]=h-E,m=t[b+1]*l[i][c+b+1],y=t[b+513]*l[i][c+b+513],h=m-y,m=m+y,_=t[b+257]*l[i][c+b+257],y=t[b+769]*l[i][c+b+769],E=_-y,_=_+y,o[u+La.BLKSIZE/2+0]=m+_,o[u+La.BLKSIZE/2+2]=m-_,o[u+La.BLKSIZE/2+1]=h+E,o[u+La.BLKSIZE/2+3]=h-E}while(--d>=0);e(o,u,La.BLKSIZE/2)},this.init_fft=function(r){for(var o=0;o<La.BLKSIZE;o++)t[o]=.42-.5*Math.cos(2*Math.PI*(o+.5)/La.BLKSIZE)+.08*Math.cos(4*Math.PI*(o+.5)/La.BLKSIZE);for(var o=0;o<La.BLKSIZE_s/2;o++)n[o]=.5*(1-Math.cos(2*Math.PI*(o+.5)/La.BLKSIZE_s))}}var iYe=rYe,li=_a,fc=li.VbrMode,CO=li.Float,mc=li.ShortBlock,Vs=li.Util,lYe=li.Arrays,Pa=li.new_float,So=li.new_float_n,pl=li.new_int,en=li.assert,cYe=iYe,Je=Ts();function dYe(){var t=_p,n=new cYe,a=2.302585092994046,e=2,s=16,r=2,o=16,i=.34,l=1/(14752*14752)/(Je.BLKSIZE/2),c=.01,d=.8,u=.6,m=.3,h=3.5,_=21,E=.2302585093;function y(ne,re){for(var he=0,Ee=0;Ee<Je.BLKSIZE/2;++Ee)he+=ne[Ee]*re.ATH.eql_w[Ee];return he*=l,he}function b(ne,re,he,Ee,we,be,Te,Ne,Ie,$e,ke){var Ke=ne.internal_flags;if(Ie<2)n.fft_long(Ke,Ee[we],Ie,$e,ke),n.fft_short(Ke,be[Te],Ie,$e,ke);else if(Ie==2){for(var ct=Je.BLKSIZE-1;ct>=0;--ct){var It=Ee[we+0][ct],at=Ee[we+1][ct];Ee[we+0][ct]=(It+at)*Vs.SQRT2*.5,Ee[we+1][ct]=(It-at)*Vs.SQRT2*.5}for(var Ot=2;Ot>=0;--Ot)for(var ct=Je.BLKSIZE_s-1;ct>=0;--ct){var It=be[Te+0][Ot][ct],at=be[Te+1][Ot][ct];be[Te+0][Ot][ct]=(It+at)*Vs.SQRT2*.5,be[Te+1][Ot][ct]=(It-at)*Vs.SQRT2*.5}}re[0]=Ee[we+0][0],re[0]*=re[0];for(var ct=Je.BLKSIZE/2-1;ct>=0;--ct){var Ze=Ee[we+0][Je.BLKSIZE/2-ct],St=Ee[we+0][Je.BLKSIZE/2+ct];re[Je.BLKSIZE/2-ct]=(Ze*Ze+St*St)*.5}for(var Ot=2;Ot>=0;--Ot){he[Ot][0]=be[Te+0][Ot][0],he[Ot][0]*=he[Ot][0];for(var ct=Je.BLKSIZE_s/2-1;ct>=0;--ct){var Ze=be[Te+0][Ot][Je.BLKSIZE_s/2-ct],St=be[Te+0][Ot][Je.BLKSIZE_s/2+ct];he[Ot][Je.BLKSIZE_s/2-ct]=(Ze*Ze+St*St)*.5}}{for(var zt=0,ct=11;ct<Je.HBLKSIZE;ct++)zt+=re[ct];Ke.tot_ener[Ie]=zt}if(ne.analysis){for(var ct=0;ct<Je.HBLKSIZE;ct++)Ke.pinfo.energy[Ne][Ie][ct]=Ke.pinfo.energy_save[Ie][ct],Ke.pinfo.energy_save[Ie][ct]=re[ct];Ke.pinfo.pe[Ne][Ie]=Ke.pe[Ie]}ne.athaa_loudapprox==2&&Ie<2&&(Ke.loudness_sq[Ne][Ie]=Ke.loudness_sq_save[Ie],Ke.loudness_sq_save[Ie]=y(re,Ke))}var A=8,T=23,I=15,N,x,R,M=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function w(){N=Math.pow(10,(A+1)/16),x=Math.pow(10,(T+1)/16),R=Math.pow(10,I/10)}var D=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],B=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],k=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function V(ne,re,he,Ee,we,be){var Te;if(re>ne)if(re<ne*x)Te=re/ne;else return ne+re;else{if(ne>=re*x)return ne+re;Te=ne/re}if(ne+=re,Ee+3<=6){if(Te>=N)return ne;var Ne=0|Vs.FAST_LOG10_X(Te,16);return ne*B[Ne]}var Ne=0|Vs.FAST_LOG10_X(Te,16);if(re=we.ATH.cb_l[he]*we.ATH.adjust,ne<R*re){if(ne>re){var Ie,$e;return Ie=1,Ne<=13&&(Ie=k[Ne]),$e=Vs.FAST_LOG10_X(ne/re,10/15),ne*((D[Ne]-Ie)*$e+Ie)}return Ne>13?ne:ne*k[Ne]}return ne*D[Ne]}var F=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1];function $(ne,re,he){var Ee;if(ne<0&&(ne=0),re<0&&(re=0),ne<=0)return re;if(re<=0)return ne;if(re>ne?Ee=re/ne:Ee=ne/re,-2<=he&&he<=2){if(Ee>=N)return ne+re;var we=0|Vs.FAST_LOG10_X(Ee,16);return(ne+re)*F[we]}return Ee<x?ne+re:(ne<re&&(ne=re),ne)}function Y(ne,re){var he=ne.internal_flags;if(he.channels_out>1){for(var Ee=0;Ee<Je.SBMAX_l;Ee++){var we=he.thm[0].l[Ee],be=he.thm[1].l[Ee];he.thm[0].l[Ee]+=be*re,he.thm[1].l[Ee]+=we*re}for(var Ee=0;Ee<Je.SBMAX_s;Ee++)for(var Te=0;Te<3;Te++){var we=he.thm[0].s[Ee][Te],be=he.thm[1].s[Ee][Te];he.thm[0].s[Ee][Te]+=be*re,he.thm[1].s[Ee][Te]+=we*re}}}function j(ne){for(var re=0;re<Je.SBMAX_l;re++)if(!(ne.thm[0].l[re]>1.58*ne.thm[1].l[re]||ne.thm[1].l[re]>1.58*ne.thm[0].l[re])){var he=ne.mld_l[re]*ne.en[3].l[re],Ee=Math.max(ne.thm[2].l[re],Math.min(ne.thm[3].l[re],he));he=ne.mld_l[re]*ne.en[2].l[re];var we=Math.max(ne.thm[3].l[re],Math.min(ne.thm[2].l[re],he));ne.thm[2].l[re]=Ee,ne.thm[3].l[re]=we}for(var re=0;re<Je.SBMAX_s;re++)for(var be=0;be<3;be++)if(!(ne.thm[0].s[re][be]>1.58*ne.thm[1].s[re][be]||ne.thm[1].s[re][be]>1.58*ne.thm[0].s[re][be])){var he=ne.mld_s[re]*ne.en[3].s[re][be],Ee=Math.max(ne.thm[2].s[re][be],Math.min(ne.thm[3].s[re][be],he));he=ne.mld_s[re]*ne.en[2].s[re][be];var we=Math.max(ne.thm[3].s[re][be],Math.min(ne.thm[2].s[re][be],he));ne.thm[2].s[re][be]=Ee,ne.thm[3].s[re][be]=we}}function U(ne,re,he){var Ee=re,we=Math.pow(10,he);re*=2,Ee*=2;for(var be=0;be<Je.SBMAX_l;be++){var Te,Ne,Ie,$e;if($e=ne.ATH.cb_l[ne.bm_l[be]]*we,Te=Math.min(Math.max(ne.thm[0].l[be],$e),Math.max(ne.thm[1].l[be],$e)),Ne=Math.max(ne.thm[2].l[be],$e),Ie=Math.max(ne.thm[3].l[be],$e),Te*re<Ne+Ie){var ke=Te*Ee/(Ne+Ie);Ne*=ke,Ie*=ke}ne.thm[2].l[be]=Math.min(Ne,ne.thm[2].l[be]),ne.thm[3].l[be]=Math.min(Ie,ne.thm[3].l[be])}we*=Je.BLKSIZE_s/Je.BLKSIZE;for(var be=0;be<Je.SBMAX_s;be++)for(var Ke=0;Ke<3;Ke++){var Te,Ne,Ie,$e;if($e=ne.ATH.cb_s[ne.bm_s[be]]*we,Te=Math.min(Math.max(ne.thm[0].s[be][Ke],$e),Math.max(ne.thm[1].s[be][Ke],$e)),Ne=Math.max(ne.thm[2].s[be][Ke],$e),Ie=Math.max(ne.thm[3].s[be][Ke],$e),Te*re<Ne+Ie){var ke=Te*re/(Ne+Ie);Ne*=ke,Ie*=ke}ne.thm[2].s[be][Ke]=Math.min(ne.thm[2].s[be][Ke],Ne),ne.thm[3].s[be][Ke]=Math.min(ne.thm[3].s[be][Ke],Ie)}}function J(ne,re,he,Ee,we){var be,Te,Ne=0,Ie=0;for(be=Te=0;be<Je.SBMAX_s;++Te,++be){for(var $e=ne.bo_s[be],ke=ne.npart_s,Ke=$e<ke?$e:ke;Te<Ke;)en(re[Te]>=0),en(he[Te]>=0),Ne+=re[Te],Ie+=he[Te],Te++;if(ne.en[Ee].s[be][we]=Ne,ne.thm[Ee].s[be][we]=Ie,Te>=ke){++be;break}en(re[Te]>=0),en(he[Te]>=0);{var ct=ne.PSY.bo_s_weight[be],It=1-ct;Ne=ct*re[Te],Ie=ct*he[Te],ne.en[Ee].s[be][we]+=Ne,ne.thm[Ee].s[be][we]+=Ie,Ne=It*re[Te],Ie=It*he[Te]}}for(;be<Je.SBMAX_s;++be)ne.en[Ee].s[be][we]=0,ne.thm[Ee].s[be][we]=0}function te(ne,re,he,Ee){var we,be,Te=0,Ne=0;for(we=be=0;we<Je.SBMAX_l;++be,++we){for(var Ie=ne.bo_l[we],$e=ne.npart_l,ke=Ie<$e?Ie:$e;be<ke;)en(re[be]>=0),en(he[be]>=0),Te+=re[be],Ne+=he[be],be++;if(ne.en[Ee].l[we]=Te,ne.thm[Ee].l[we]=Ne,be>=$e){++we;break}en(re[be]>=0),en(he[be]>=0);{var Ke=ne.PSY.bo_l_weight[we],ct=1-Ke;Te=Ke*re[be],Ne=Ke*he[be],ne.en[Ee].l[we]+=Te,ne.thm[Ee].l[we]+=Ne,Te=ct*re[be],Ne=ct*he[be]}}for(;we<Je.SBMAX_l;++we)ne.en[Ee].l[we]=0,ne.thm[Ee].l[we]=0}function q(ne,re,he,Ee,we,be){var Te=ne.internal_flags,Ne,Ie;for(Ie=Ne=0;Ie<Te.npart_s;++Ie){for(var $e=0,ke=Te.numlines_s[Ie],Ke=0;Ke<ke;++Ke,++Ne){var ct=re[be][Ne];$e+=ct}he[Ie]=$e}for(en(Ie==Te.npart_s),Ne=Ie=0;Ie<Te.npart_s;Ie++){var It=Te.s3ind_s[Ie][0],at=Te.s3_ss[Ne++]*he[It];for(++It;It<=Te.s3ind_s[Ie][1];)at+=Te.s3_ss[Ne]*he[It],++Ne,++It;{var Ot=r*Te.nb_s1[we][Ie];Ee[Ie]=Math.min(at,Ot)}if(Te.blocktype_old[we&1]==Je.SHORT_TYPE){var Ot=o*Te.nb_s2[we][Ie],Ze=Ee[Ie];Ee[Ie]=Math.min(Ot,Ze)}Te.nb_s2[we][Ie]=Te.nb_s1[we][Ie],Te.nb_s1[we][Ie]=at,en(Ee[Ie]>=0)}for(;Ie<=Je.CBANDS;++Ie)he[Ie]=0,Ee[Ie]=0}function K(ne,re,he,Ee){var we=ne.internal_flags;ne.short_blocks==mc.short_block_coupled&&!(re[0]!=0&&re[1]!=0)&&(re[0]=re[1]=0);for(var be=0;be<we.channels_out;be++)Ee[be]=Je.NORM_TYPE,ne.short_blocks==mc.short_block_dispensed&&(re[be]=1),ne.short_blocks==mc.short_block_forced&&(re[be]=0),re[be]!=0?(en(we.blocktype_old[be]!=Je.START_TYPE),we.blocktype_old[be]==Je.SHORT_TYPE&&(Ee[be]=Je.STOP_TYPE)):(Ee[be]=Je.SHORT_TYPE,we.blocktype_old[be]==Je.NORM_TYPE&&(we.blocktype_old[be]=Je.START_TYPE),we.blocktype_old[be]==Je.STOP_TYPE&&(we.blocktype_old[be]=Je.SHORT_TYPE)),he[be]=we.blocktype_old[be],we.blocktype_old[be]=Ee[be]}function W(ne,re,he){return he>=1?ne:he<=0?re:re>0?Math.pow(ne/re,he)*re:0}var ee=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function ae(ne,re){for(var he=309.07,Ee=0;Ee<Je.SBMAX_s-1;Ee++)for(var we=0;we<3;we++){var be=ne.thm.s[Ee][we];if(be>0){var Te=be*re,Ne=ne.en.s[Ee][we];Ne>Te&&(Ne>Te*1e10?he+=ee[Ee]*(10*a):he+=ee[Ee]*Vs.FAST_LOG10(Ne/Te))}}return he}var ve=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function Ce(ne,re){for(var he=281.0575,Ee=0;Ee<Je.SBMAX_l-1;Ee++){var we=ne.thm.l[Ee];if(we>0){var be=we*re,Te=ne.en.l[Ee];Te>be&&(Te>be*1e10?he+=ve[Ee]*(10*a):he+=ve[Ee]*Vs.FAST_LOG10(Te/be))}}return he}function ue(ne,re,he,Ee,we){var be,Te;for(be=Te=0;be<ne.npart_l;++be){var Ne=0,Ie=0,$e;for($e=0;$e<ne.numlines_l[be];++$e,++Te){var ke=re[Te];Ne+=ke,Ie<ke&&(Ie=ke)}he[be]=Ne,Ee[be]=Ie,we[be]=Ne*ne.rnumlines_l[be],en(ne.rnumlines_l[be]>=0),en(he[be]>=0),en(Ee[be]>=0),en(we[be]>=0)}}function ge(ne,re,he,Ee){var we=M.length-1,be=0,Te=he[be]+he[be+1];if(Te>0){var Ne=re[be];Ne<re[be+1]&&(Ne=re[be+1]),en(ne.numlines_l[be]+ne.numlines_l[be+1]-1>0),Te=20*(Ne*2-Te)/(Te*(ne.numlines_l[be]+ne.numlines_l[be+1]-1));var Ie=0|Te;Ie>we&&(Ie=we),Ee[be]=Ie}else Ee[be]=0;for(be=1;be<ne.npart_l-1;be++)if(Te=he[be-1]+he[be]+he[be+1],Te>0){var Ne=re[be-1];Ne<re[be]&&(Ne=re[be]),Ne<re[be+1]&&(Ne=re[be+1]),en(ne.numlines_l[be-1]+ne.numlines_l[be]+ne.numlines_l[be+1]-1>0),Te=20*(Ne*3-Te)/(Te*(ne.numlines_l[be-1]+ne.numlines_l[be]+ne.numlines_l[be+1]-1));var Ie=0|Te;Ie>we&&(Ie=we),Ee[be]=Ie}else Ee[be]=0;if(en(be==ne.npart_l-1),Te=he[be-1]+he[be],Te>0){var Ne=re[be-1];Ne<re[be]&&(Ne=re[be]),en(ne.numlines_l[be-1]+ne.numlines_l[be]-1>0),Te=20*(Ne*2-Te)/(Te*(ne.numlines_l[be-1]+ne.numlines_l[be]-1));var Ie=0|Te;Ie>we&&(Ie=we),Ee[be]=Ie}else Ee[be]=0;en(be==ne.npart_l-1)}var Me=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(ne,re,he,Ee,we,be,Te,Ne,Ie,$e){var ke=ne.internal_flags,Ke=So([2,Je.BLKSIZE]),ct=So([2,3,Je.BLKSIZE_s]),It=Pa(Je.CBANDS+1),at=Pa(Je.CBANDS+1),Ot=Pa(Je.CBANDS+2),Ze=pl(2),St=pl(2),zt,ot,Tt,st,wt,Ln,mt,Vt,Ht=So([2,576]),Tn,za=pl(Je.CBANDS+2),na=pl(Je.CBANDS+2);for(lYe.fill(na,0),zt=ke.channels_out,ne.mode==t.JOINT_STEREO&&(zt=4),ne.VBR==fc.vbr_off?Tn=ke.ResvMax==0?0:ke.ResvSize/ke.ResvMax*.5:ne.VBR==fc.vbr_rh||ne.VBR==fc.vbr_mtrh||ne.VBR==fc.vbr_mt?Tn=.6:Tn=1,ot=0;ot<ke.channels_out;ot++){var Wn=re[ot],Ya=he+576-350-_+192;for(st=0;st<576;st++){var Ka,es;for(Ka=Wn[Ya+st+10],es=0,wt=0;wt<(_-1)/2-1;wt+=2)Ka+=Me[wt]*(Wn[Ya+st+wt]+Wn[Ya+st+_-wt]),es+=Me[wt+1]*(Wn[Ya+st+wt+1]+Wn[Ya+st+_-wt-1]);Ht[ot][st]=Ka+es}we[Ee][ot].en.assign(ke.en[ot]),we[Ee][ot].thm.assign(ke.thm[ot]),zt>2&&(be[Ee][ot].en.assign(ke.en[ot+2]),be[Ee][ot].thm.assign(ke.thm[ot+2]))}for(ot=0;ot<zt;ot++){var us,ts,Ma=Pa(12),As=[0,0,0,0],Do=Pa(12),ci=1,Zl,al=Pa(Je.CBANDS),Ql=Pa(Je.CBANDS),Fn=[0,0,0,0],Nr=Pa(Je.HBLKSIZE),Jl=So([3,Je.HBLKSIZE_s]);for(en(ke.npart_s<=Je.CBANDS),en(ke.npart_l<=Je.CBANDS),st=0;st<3;st++)Ma[st]=ke.nsPsy.last_en_subshort[ot][st+6],en(ke.nsPsy.last_en_subshort[ot][st+4]>0),Do[st]=Ma[st]/ke.nsPsy.last_en_subshort[ot][st+4],As[0]+=Ma[st];if(ot==2)for(st=0;st<576;st++){var di,ui;di=Ht[0][st],ui=Ht[1][st],Ht[0][st]=di+ui,Ht[1][st]=di-ui}{var dt=Ht[ot&1],Pt=0;for(st=0;st<9;st++){for(var aa=Pt+64,Dn=1;Pt<aa;Pt++)Dn<Math.abs(dt[Pt])&&(Dn=Math.abs(dt[Pt]));ke.nsPsy.last_en_subshort[ot][st]=Ma[st+3]=Dn,As[1+st/3]+=Dn,Dn>Ma[st+3-2]?(en(Ma[st+3-2]>0),Dn=Dn/Ma[st+3-2]):Ma[st+3-2]>Dn*10?Dn=Ma[st+3-2]/(Dn*10):Dn=0,Do[st+3]=Dn}}if(ne.analysis){var Po=Do[0];for(st=1;st<12;st++)Po<Do[st]&&(Po=Do[st]);ke.pinfo.ers[Ee][ot]=ke.pinfo.ers_save[ot],ke.pinfo.ers_save[ot]=Po}for(Zl=ot==3?ke.nsPsy.attackthre_s:ke.nsPsy.attackthre,st=0;st<12;st++)Fn[st/3]==0&&Do[st]>Zl&&(Fn[st/3]=st%3+1);for(st=1;st<4;st++){var go;As[st-1]>As[st]?(en(As[st]>0),go=As[st-1]/As[st]):(en(As[st-1]>0),go=As[st]/As[st-1]),go<1.7&&(Fn[st]=0,st==1&&(Fn[0]=0))}for(Fn[0]!=0&&ke.nsPsy.lastAttacks[ot]!=0&&(Fn[0]=0),(ke.nsPsy.lastAttacks[ot]==3||Fn[0]+Fn[1]+Fn[2]+Fn[3]!=0)&&(ci=0,Fn[1]!=0&&Fn[0]!=0&&(Fn[1]=0),Fn[2]!=0&&Fn[1]!=0&&(Fn[2]=0),Fn[3]!=0&&Fn[2]!=0&&(Fn[3]=0)),ot<2?St[ot]=ci:ci==0&&(St[0]=St[1]=0),Ie[ot]=ke.tot_ener[ot],ts=ct,us=Ke,b(ne,Nr,Jl,us,ot&1,ts,ot&1,Ee,ot,re,he),ue(ke,Nr,It,al,Ql),ge(ke,al,Ql,za),Vt=0;Vt<3;Vt++){var bo,Xa;for(q(ne,Jl,at,Ot,ot,Vt),J(ke,at,Ot,ot,Vt),mt=0;mt<Je.SBMAX_s;mt++){if(Xa=ke.thm[ot].s[mt][Vt],Xa*=d,Fn[Vt]>=2||Fn[Vt+1]==1){var ec=Vt!=0?Vt-1:2,Dn=W(ke.thm[ot].s[mt][ec],Xa,u*Tn);Xa=Math.min(Xa,Dn)}if(Fn[Vt]==1){var ec=Vt!=0?Vt-1:2,Dn=W(ke.thm[ot].s[mt][ec],Xa,m*Tn);Xa=Math.min(Xa,Dn)}else if(Vt!=0&&Fn[Vt-1]==3||Vt==0&&ke.nsPsy.lastAttacks[ot]==3){var ec=Vt!=2?Vt+1:0,Dn=W(ke.thm[ot].s[mt][ec],Xa,m*Tn);Xa=Math.min(Xa,Dn)}bo=Ma[Vt*3+3]+Ma[Vt*3+4]+Ma[Vt*3+5],Ma[Vt*3+5]*6<bo&&(Xa*=.5,Ma[Vt*3+4]*6<bo&&(Xa*=.5)),ke.thm[ot].s[mt][Vt]=Xa}}for(ke.nsPsy.lastAttacks[ot]=Fn[2],Ln=0,Tt=0;Tt<ke.npart_l;Tt++){for(var xr=ke.s3ind[Tt][0],wd=It[xr]*M[za[xr]],Rr=ke.s3_ll[Ln++]*wd;++xr<=ke.s3ind[Tt][1];)wd=It[xr]*M[za[xr]],Rr=V(Rr,ke.s3_ll[Ln++]*wd,xr,xr-Tt,ke);Rr*=.158489319246111,ke.blocktype_old[ot&1]==Je.SHORT_TYPE?Ot[Tt]=Rr:Ot[Tt]=W(Math.min(Rr,Math.min(e*ke.nb_1[ot][Tt],s*ke.nb_2[ot][Tt])),Rr,Tn),ke.nb_2[ot][Tt]=ke.nb_1[ot][Tt],ke.nb_1[ot][Tt]=Rr}for(;Tt<=Je.CBANDS;++Tt)It[Tt]=0,Ot[Tt]=0;te(ke,It,Ot,ot)}if((ne.mode==t.STEREO||ne.mode==t.JOINT_STEREO)&&ne.interChRatio>0&&Y(ne,ne.interChRatio),ne.mode==t.JOINT_STEREO){var sl;j(ke),sl=ne.msfix,Math.abs(sl)>0&&U(ke,sl,ne.ATHlower*ke.ATH.adjust)}for(K(ne,St,$e,Ze),ot=0;ot<zt;ot++){var ol,rl=0,Md,ar;ot>1?(ol=Ne,rl=-2,Md=Je.NORM_TYPE,($e[0]==Je.SHORT_TYPE||$e[1]==Je.SHORT_TYPE)&&(Md=Je.SHORT_TYPE),ar=be[Ee][ot-2]):(ol=Te,rl=0,Md=$e[ot],ar=we[Ee][ot]),Md==Je.SHORT_TYPE?ol[rl+ot]=ae(ar,ke.masking_lower):ol[rl+ot]=Ce(ar,ke.masking_lower),ne.analysis&&(ke.pinfo.pe[Ee][ot]=ol[rl+ot])}return 0};function We(ne,re,he,Ee,we,be,Te,Ne){var Ie=ne.internal_flags;if(Ee<2)n.fft_long(Ie,Te[Ne],Ee,re,he);else if(Ee==2)for(var $e=Je.BLKSIZE-1;$e>=0;--$e){var ke=Te[Ne+0][$e],Ke=Te[Ne+1][$e];Te[Ne+0][$e]=(ke+Ke)*Vs.SQRT2*.5,Te[Ne+1][$e]=(ke-Ke)*Vs.SQRT2*.5}be[0]=Te[Ne+0][0],be[0]*=be[0];for(var $e=Je.BLKSIZE/2-1;$e>=0;--$e){var ct=Te[Ne+0][Je.BLKSIZE/2-$e],It=Te[Ne+0][Je.BLKSIZE/2+$e];be[Je.BLKSIZE/2-$e]=(ct*ct+It*It)*.5}{for(var at=0,$e=11;$e<Je.HBLKSIZE;$e++)at+=be[$e];Ie.tot_ener[Ee]=at}if(ne.analysis){for(var $e=0;$e<Je.HBLKSIZE;$e++)Ie.pinfo.energy[we][Ee][$e]=Ie.pinfo.energy_save[Ee][$e],Ie.pinfo.energy_save[Ee][$e]=be[$e];Ie.pinfo.pe[we][Ee]=Ie.pe[Ee]}}function Ue(ne,re,he,Ee,we,be,Te,Ne){var Ie=ne.internal_flags;if(we==0&&Ee<2&&n.fft_short(Ie,Te[Ne],Ee,re,he),Ee==2)for(var $e=Je.BLKSIZE_s-1;$e>=0;--$e){var ke=Te[Ne+0][we][$e],Ke=Te[Ne+1][we][$e];Te[Ne+0][we][$e]=(ke+Ke)*Vs.SQRT2*.5,Te[Ne+1][we][$e]=(ke-Ke)*Vs.SQRT2*.5}be[we][0]=Te[Ne+0][we][0],be[we][0]*=be[we][0];for(var $e=Je.BLKSIZE_s/2-1;$e>=0;--$e){var ct=Te[Ne+0][we][Je.BLKSIZE_s/2-$e],It=Te[Ne+0][we][Je.BLKSIZE_s/2+$e];be[we][Je.BLKSIZE_s/2-$e]=(ct*ct+It*It)*.5}}function Re(ne,re,he,Ee){var we=ne.internal_flags;ne.athaa_loudapprox==2&&he<2&&(we.loudness_sq[re][he]=we.loudness_sq_save[he],we.loudness_sq_save[he]=y(Ee,we))}var Le=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];function Xe(ne,re,he,Ee,we,be,Te,Ne,Ie,$e){for(var ke=So([2,576]),Ke=ne.internal_flags,ct=Ke.channels_out,It=ne.mode==t.JOINT_STEREO?4:ct,at=0;at<ct;at++){firbuf=re[at];for(var Ot=he+576-350-_+192,Ze=0;Ze<576;Ze++){var St,zt;St=firbuf[Ot+Ze+10],zt=0;for(var ot=0;ot<(_-1)/2-1;ot+=2)St+=Le[ot]*(firbuf[Ot+Ze+ot]+firbuf[Ot+Ze+_-ot]),zt+=Le[ot+1]*(firbuf[Ot+Ze+ot+1]+firbuf[Ot+Ze+_-ot-1]);ke[at][Ze]=St+zt}we[Ee][at].en.assign(Ke.en[at]),we[Ee][at].thm.assign(Ke.thm[at]),It>2&&(be[Ee][at].en.assign(Ke.en[at+2]),be[Ee][at].thm.assign(Ke.thm[at+2]))}for(var at=0;at<It;at++){var Tt=Pa(12),st=Pa(12),wt=[0,0,0,0],Ln=ke[at&1],mt=0,Vt=at==3?Ke.nsPsy.attackthre_s:Ke.nsPsy.attackthre,Ht=1;if(at==2)for(var Ze=0,ot=576;ot>0;++Ze,--ot){var Tn=ke[0][Ze],za=ke[1][Ze];ke[0][Ze]=Tn+za,ke[1][Ze]=Tn-za}for(var Ze=0;Ze<3;Ze++)st[Ze]=Ke.nsPsy.last_en_subshort[at][Ze+6],en(Ke.nsPsy.last_en_subshort[at][Ze+4]>0),Tt[Ze]=st[Ze]/Ke.nsPsy.last_en_subshort[at][Ze+4],wt[0]+=st[Ze];for(var Ze=0;Ze<9;Ze++){for(var na=mt+64,Wn=1;mt<na;mt++)Wn<Math.abs(Ln[mt])&&(Wn=Math.abs(Ln[mt]));Ke.nsPsy.last_en_subshort[at][Ze]=st[Ze+3]=Wn,wt[1+Ze/3]+=Wn,Wn>st[Ze+3-2]?(en(st[Ze+3-2]>0),Wn=Wn/st[Ze+3-2]):st[Ze+3-2]>Wn*10?Wn=st[Ze+3-2]/(Wn*10):Wn=0,Tt[Ze+3]=Wn}for(var Ze=0;Ze<3;++Ze){var Ya=st[Ze*3+3]+st[Ze*3+4]+st[Ze*3+5],Ka=1;st[Ze*3+5]*6<Ya&&(Ka*=.5,st[Ze*3+4]*6<Ya&&(Ka*=.5)),Ne[at][Ze]=Ka}if(ne.analysis){for(var es=Tt[0],Ze=1;Ze<12;Ze++)es<Tt[Ze]&&(es=Tt[Ze]);Ke.pinfo.ers[Ee][at]=Ke.pinfo.ers_save[at],Ke.pinfo.ers_save[at]=es}for(var Ze=0;Ze<12;Ze++)Ie[at][Ze/3]==0&&Tt[Ze]>Vt&&(Ie[at][Ze/3]=Ze%3+1);for(var Ze=1;Ze<4;Ze++){var us=wt[Ze-1],ts=wt[Ze],Ma=Math.max(us,ts);Ma<4e4&&us<1.7*ts&&ts<1.7*us&&(Ze==1&&Ie[at][0]<=Ie[at][Ze]&&(Ie[at][0]=0),Ie[at][Ze]=0)}Ie[at][0]<=Ke.nsPsy.lastAttacks[at]&&(Ie[at][0]=0),(Ke.nsPsy.lastAttacks[at]==3||Ie[at][0]+Ie[at][1]+Ie[at][2]+Ie[at][3]!=0)&&(Ht=0,Ie[at][1]!=0&&Ie[at][0]!=0&&(Ie[at][1]=0),Ie[at][2]!=0&&Ie[at][1]!=0&&(Ie[at][2]=0),Ie[at][3]!=0&&Ie[at][2]!=0&&(Ie[at][3]=0)),at<2?$e[at]=Ht:Ht==0&&($e[0]=$e[1]=0),Te[at]=Ke.tot_ener[at]}}function et(ne,re,he){if(he==0)for(var Ee=0;Ee<ne.npart_s;Ee++)ne.nb_s2[re][Ee]=ne.nb_s1[re][Ee],ne.nb_s1[re][Ee]=0}function yt(ne,re){for(var he=0;he<ne.npart_l;he++)ne.nb_2[re][he]=ne.nb_1[re][he],ne.nb_1[re][he]=0}function Dt(ne,re,he,Ee){var we=M.length-1,be=0,Te=he[be]+he[be+1];if(Te>0){var Ne=re[be];Ne<re[be+1]&&(Ne=re[be+1]),en(ne.numlines_s[be]+ne.numlines_s[be+1]-1>0),Te=20*(Ne*2-Te)/(Te*(ne.numlines_s[be]+ne.numlines_s[be+1]-1));var Ie=0|Te;Ie>we&&(Ie=we),Ee[be]=Ie}else Ee[be]=0;for(be=1;be<ne.npart_s-1;be++)if(Te=he[be-1]+he[be]+he[be+1],en(be+1<ne.npart_s),Te>0){var Ne=re[be-1];Ne<re[be]&&(Ne=re[be]),Ne<re[be+1]&&(Ne=re[be+1]),en(ne.numlines_s[be-1]+ne.numlines_s[be]+ne.numlines_s[be+1]-1>0),Te=20*(Ne*3-Te)/(Te*(ne.numlines_s[be-1]+ne.numlines_s[be]+ne.numlines_s[be+1]-1));var Ie=0|Te;Ie>we&&(Ie=we),Ee[be]=Ie}else Ee[be]=0;if(en(be==ne.npart_s-1),Te=he[be-1]+he[be],Te>0){var Ne=re[be-1];Ne<re[be]&&(Ne=re[be]),en(ne.numlines_s[be-1]+ne.numlines_s[be]-1>0),Te=20*(Ne*2-Te)/(Te*(ne.numlines_s[be-1]+ne.numlines_s[be]-1));var Ie=0|Te;Ie>we&&(Ie=we),Ee[be]=Ie}else Ee[be]=0;en(be==ne.npart_s-1)}function X(ne,re,he,Ee,we,be){var Te=ne.internal_flags,Ne=new float[Je.CBANDS],Ie=Pa(Je.CBANDS),$e,ke,Ke,ct=new int[Je.CBANDS];for(Ke=ke=0;Ke<Te.npart_s;++Ke){var It=0,at=0,Ot=Te.numlines_s[Ke];for($e=0;$e<Ot;++$e,++ke){var Ze=re[be][ke];It+=Ze,at<Ze&&(at=Ze)}he[Ke]=It,Ne[Ke]=at,Ie[Ke]=It/Ot,en(Ie[Ke]>=0)}for(en(Ke==Te.npart_s);Ke<Je.CBANDS;++Ke)Ne[Ke]=0,Ie[Ke]=0;for(Dt(Te,Ne,Ie,ct),ke=Ke=0;Ke<Te.npart_s;Ke++){var St=Te.s3ind_s[Ke][0],zt=Te.s3ind_s[Ke][1],ot,Tt,st,wt,Ln;for(ot=ct[St],Tt=1,wt=Te.s3_ss[ke]*he[St]*M[ct[St]],++ke,++St;St<=zt;)ot+=ct[St],Tt+=1,st=Te.s3_ss[ke]*he[St]*M[ct[St]],wt=$(wt,st,St-Ke),++ke,++St;ot=(1+2*ot)/(2*Tt),Ln=M[ot]*.5,wt*=Ln,Ee[Ke]=wt,Te.nb_s2[we][Ke]=Te.nb_s1[we][Ke],Te.nb_s1[we][Ke]=wt,st=Ne[Ke],st*=Te.minval_s[Ke],st*=Ln,Ee[Ke]>st&&(Ee[Ke]=st),Te.masking_lower>1&&(Ee[Ke]*=Te.masking_lower),Ee[Ke]>he[Ke]&&(Ee[Ke]=he[Ke]),Te.masking_lower<1&&(Ee[Ke]*=Te.masking_lower),en(Ee[Ke]>=0)}for(;Ke<Je.CBANDS;++Ke)he[Ke]=0,Ee[Ke]=0}function se(ne,re,he,Ee,we){var be=Pa(Je.CBANDS),Te=Pa(Je.CBANDS),Ne=pl(Je.CBANDS+2),Ie;ue(ne,re,he,be,Te),ge(ne,be,Te,Ne);var $e=0;for(Ie=0;Ie<ne.npart_l;Ie++){var ke,Ke,ct,It,at=ne.s3ind[Ie][0],Ot=ne.s3ind[Ie][1],Ze=0,St=0;for(Ze=Ne[at],St+=1,Ke=ne.s3_ll[$e]*he[at]*M[Ne[at]],++$e,++at;at<=Ot;)Ze+=Ne[at],St+=1,ke=ne.s3_ll[$e]*he[at]*M[Ne[at]],It=$(Ke,ke,at-Ie),Ke=It,++$e,++at;if(Ze=(1+2*Ze)/(2*St),ct=M[Ze]*.5,Ke*=ct,ne.blocktype_old[we&1]==Je.SHORT_TYPE){var zt=e*ne.nb_1[we][Ie];zt>0?Ee[Ie]=Math.min(Ke,zt):Ee[Ie]=Math.min(Ke,he[Ie]*m)}else{var ot=s*ne.nb_2[we][Ie],Tt=e*ne.nb_1[we][Ie],zt;ot<=0&&(ot=Ke),Tt<=0&&(Tt=Ke),ne.blocktype_old[we&1]==Je.NORM_TYPE?zt=Math.min(Tt,ot):zt=Tt,Ee[Ie]=Math.min(Ke,zt)}ne.nb_2[we][Ie]=ne.nb_1[we][Ie],ne.nb_1[we][Ie]=Ke,ke=be[Ie],ke*=ne.minval_l[Ie],ke*=ct,Ee[Ie]>ke&&(Ee[Ie]=ke),ne.masking_lower>1&&(Ee[Ie]*=ne.masking_lower),Ee[Ie]>he[Ie]&&(Ee[Ie]=he[Ie]),ne.masking_lower<1&&(Ee[Ie]*=ne.masking_lower),en(Ee[Ie]>=0)}for(;Ie<Je.CBANDS;++Ie)he[Ie]=0,Ee[Ie]=0}function ie(ne,re){var he=ne.internal_flags;ne.short_blocks==mc.short_block_coupled&&!(re[0]!=0&&re[1]!=0)&&(re[0]=re[1]=0);for(var Ee=0;Ee<he.channels_out;Ee++)ne.short_blocks==mc.short_block_dispensed&&(re[Ee]=1),ne.short_blocks==mc.short_block_forced&&(re[Ee]=0)}function fe(ne,re,he){for(var Ee=ne.internal_flags,we=0;we<Ee.channels_out;we++){var be=Je.NORM_TYPE;re[we]!=0?(en(Ee.blocktype_old[we]!=Je.START_TYPE),Ee.blocktype_old[we]==Je.SHORT_TYPE&&(be=Je.STOP_TYPE)):(be=Je.SHORT_TYPE,Ee.blocktype_old[we]==Je.NORM_TYPE&&(Ee.blocktype_old[we]=Je.START_TYPE),Ee.blocktype_old[we]==Je.STOP_TYPE&&(Ee.blocktype_old[we]=Je.SHORT_TYPE)),he[we]=Ee.blocktype_old[we],Ee.blocktype_old[we]=be}}function me(ne,re,he,Ee,we,be,Te){for(var Ne=be*2,Ie=be>0?Math.pow(10,we):1,$e,ke,Ke=0;Ke<Te;++Ke){var ct=ne[2][Ke],It=ne[3][Ke],at=re[0][Ke],Ot=re[1][Ke],Ze=re[2][Ke],St=re[3][Ke];if(at<=1.58*Ot&&Ot<=1.58*at){var zt=he[Ke]*It,ot=he[Ke]*ct;ke=Math.max(Ze,Math.min(St,zt)),$e=Math.max(St,Math.min(Ze,ot))}else ke=Ze,$e=St;if(be>0){var Tt,st,wt=Ee[Ke]*Ie;if(Tt=Math.min(Math.max(at,wt),Math.max(Ot,wt)),Ze=Math.max(ke,wt),St=Math.max($e,wt),st=Ze+St,st>0&&Tt*Ne<st){var Ln=Tt*Ne/st;Ze*=Ln,St*=Ln}ke=Math.min(Ze,ke),$e=Math.min(St,$e)}ke>ct&&(ke=ct),$e>It&&($e=It),re[2][Ke]=ke,re[3][Ke]=$e}}this.L3psycho_anal_vbr=function(ne,re,he,Ee,we,be,Te,Ne,Ie,$e){var ke=ne.internal_flags,Ke,ct,It=Pa(Je.HBLKSIZE),at=So([3,Je.HBLKSIZE_s]),Ot=So([2,Je.BLKSIZE]),Ze=So([2,3,Je.BLKSIZE_s]),St=So([4,Je.CBANDS]),zt=So([4,Je.CBANDS]),ot=So([4,3]),Tt=.6,st=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],wt=pl(2),Ln=ne.mode==t.JOINT_STEREO?4:ke.channels_out;Xe(ne,re,he,Ee,we,be,Ie,ot,st,wt),ie(ne,wt);{for(var mt=0;mt<Ln;mt++){var Vt=mt&1;Ke=Ot,We(ne,re,he,mt,Ee,It,Ke,Vt),Re(ne,Ee,mt,It),wt[Vt]!=0?se(ke,It,St[mt],zt[mt],mt):yt(ke,mt)}wt[0]+wt[1]==2&&ne.mode==t.JOINT_STEREO&&me(St,zt,ke.mld_cb_l,ke.ATH.cb_l,ne.ATHlower*ke.ATH.adjust,ne.msfix,ke.npart_l);for(var mt=0;mt<Ln;mt++){var Vt=mt&1;wt[Vt]!=0&&te(ke,St[mt],zt[mt],mt)}}{for(var Ht=0;Ht<3;Ht++){for(var mt=0;mt<Ln;++mt){var Vt=mt&1;wt[Vt]!=0?et(ke,mt,Ht):(ct=Ze,Ue(ne,re,he,mt,Ht,at,ct,Vt),X(ne,at,St[mt],zt[mt],mt,Ht))}wt[0]+wt[1]==0&&ne.mode==t.JOINT_STEREO&&me(St,zt,ke.mld_cb_s,ke.ATH.cb_s,ne.ATHlower*ke.ATH.adjust,ne.msfix,ke.npart_s);for(var mt=0;mt<Ln;++mt){var Vt=mt&1;wt[Vt]==0&&J(ke,St[mt],zt[mt],mt,Ht)}}for(var mt=0;mt<Ln;mt++){var Vt=mt&1;if(wt[Vt]==0)for(var Tn=0;Tn<Je.SBMAX_s;Tn++){for(var za=Pa(3),Ht=0;Ht<3;Ht++){var na=ke.thm[mt].s[Tn][Ht];if(na*=d,st[mt][Ht]>=2||st[mt][Ht+1]==1){var Wn=Ht!=0?Ht-1:2,Ya=W(ke.thm[mt].s[Tn][Wn],na,u*Tt);na=Math.min(na,Ya)}else if(st[mt][Ht]==1){var Wn=Ht!=0?Ht-1:2,Ya=W(ke.thm[mt].s[Tn][Wn],na,m*Tt);na=Math.min(na,Ya)}else if(Ht!=0&&st[mt][Ht-1]==3||Ht==0&&ke.nsPsy.lastAttacks[mt]==3){var Wn=Ht!=2?Ht+1:0,Ya=W(ke.thm[mt].s[Tn][Wn],na,m*Tt);na=Math.min(na,Ya)}na*=ot[mt][Ht],za[Ht]=na}for(var Ht=0;Ht<3;Ht++)ke.thm[mt].s[Tn][Ht]=za[Ht]}}}for(var mt=0;mt<Ln;mt++)ke.nsPsy.lastAttacks[mt]=st[mt][2];fe(ne,wt,$e);for(var mt=0;mt<Ln;mt++){var Ka,es,us,ts;mt>1?(Ka=Ne,es=-2,us=Je.NORM_TYPE,($e[0]==Je.SHORT_TYPE||$e[1]==Je.SHORT_TYPE)&&(us=Je.SHORT_TYPE),ts=be[Ee][mt-2]):(Ka=Te,es=0,us=$e[mt],ts=we[Ee][mt]),us==Je.SHORT_TYPE?Ka[es+mt]=ae(ts,ke.masking_lower):Ka[es+mt]=Ce(ts,ke.masking_lower),ne.analysis&&(ke.pinfo.pe[Ee][mt]=Ka[es+mt])}return 0};function De(ne,re){var he=ne,Ee;return he>=0?Ee=-he*27:Ee=he*re,Ee<=-72?0:Math.exp(Ee*E)}function Ye(ne){var re=0,he=0;{var Ee=0,we,be;for(Ee=0;De(Ee,ne)>1e-20;Ee-=1);for(we=Ee,be=0;Math.abs(be-we)>1e-12;)Ee=(be+we)/2,De(Ee,ne)>0?be=Ee:we=Ee;re=we}{var Ee=0,we,be;for(Ee=0;De(Ee,ne)>1e-20;Ee+=1);for(we=0,be=Ee;Math.abs(be-we)>1e-12;)Ee=(be+we)/2,De(Ee,ne)>0?we=Ee:be=Ee;he=be}{var Te=0,Ne=1e3,Ie;for(Ie=0;Ie<=Ne;++Ie){var Ee=re+Ie*(he-re)/Ne,$e=De(Ee,ne);Te+=$e}{var ke=(Ne+1)/(Te*(he-re));return ke}}}function ze(ne){var re,he,Ee,we;return re=ne,re>=0?re*=3:re*=1.5,re>=.5&&re<=2.5?(we=re-.5,he=8*(we*we-2*we)):he=0,re+=.474,Ee=15.811389+7.5*re-17.5*Math.sqrt(1+re*re),Ee<=-60?0:(re=Math.exp((he+Ee)*E),re/=.6609193,re)}function He(ne){return ne<0&&(ne=0),ne=ne*.001,13*Math.atan(.76*ne)+3.5*Math.atan(ne*ne/(7.5*7.5))}function xe(ne,re,he,Ee,we,be,Te,Ne,Ie,$e,ke,Ke){var ct=Pa(Je.CBANDS+1),It=Ne/(Ke>15?2*576:2*192),at=pl(Je.HBLKSIZE),Ot;Ne/=Ie;var Ze=0,St=0;for(Ot=0;Ot<Je.CBANDS;Ot++){var zt,ot;for(zt=He(Ne*Ze),ct[Ot]=Ne*Ze,ot=Ze;He(Ne*ot)-zt<i&&ot<=Ie/2;ot++);for(ne[Ot]=ot-Ze,St=Ot+1;Ze<ot;)en(Ze<Je.HBLKSIZE),at[Ze++]=Ot;if(Ze>Ie/2){Ze=Ie/2,++Ot;break}}en(Ot<Je.CBANDS),ct[Ot]=Ne*Ze;for(var Tt=0;Tt<Ke;Tt++){var st,wt,Ln,mt,Vt;Ln=$e[Tt],mt=$e[Tt+1],st=0|Math.floor(.5+ke*(Ln-.5)),st<0&&(st=0),wt=0|Math.floor(.5+ke*(mt-.5)),wt>Ie/2&&(wt=Ie/2),he[Tt]=(at[st]+at[wt])/2,re[Tt]=at[wt];var Ht=It*mt;Te[Tt]=(Ht-ct[re[Tt]])/(ct[re[Tt]+1]-ct[re[Tt]]),Te[Tt]<0?Te[Tt]=0:Te[Tt]>1&&(Te[Tt]=1),Vt=He(Ne*$e[Tt]*ke),Vt=Math.min(Vt,15.5)/15.5,be[Tt]=Math.pow(10,1.25*(1-Math.cos(Math.PI*Vt))-2.5)}Ze=0;for(var Tn=0;Tn<St;Tn++){var za=ne[Tn],zt,na;zt=He(Ne*Ze),na=He(Ne*(Ze+za-1)),Ee[Tn]=.5*(zt+na),zt=He(Ne*(Ze-.5)),na=He(Ne*(Ze+za-.5)),we[Tn]=na-zt,Ze+=za}return St}function pe(ne,re,he,Ee,we,be){var Te=So([Je.CBANDS,Je.CBANDS]),Ne,Ie=0;if(be)for(var $e=0;$e<re;$e++)for(Ne=0;Ne<re;Ne++){var ke=ze(he[$e]-he[Ne])*Ee[Ne];Te[$e][Ne]=ke*we[$e]}else for(Ne=0;Ne<re;Ne++)for(var Ke=15+Math.min(21/he[Ne],12),ct=Ye(Ke),$e=0;$e<re;$e++){var ke=ct*De(he[$e]-he[Ne],Ke)*Ee[Ne];Te[$e][Ne]=ke*we[$e]}for(var $e=0;$e<re;$e++){for(Ne=0;Ne<re&&!(Te[$e][Ne]>0);Ne++);for(ne[$e][0]=Ne,Ne=re-1;Ne>0&&!(Te[$e][Ne]>0);Ne--);ne[$e][1]=Ne,Ie+=ne[$e][1]-ne[$e][0]+1}for(var It=Pa(Ie),at=0,$e=0;$e<re;$e++)for(Ne=ne[$e][0];Ne<=ne[$e][1];Ne++)It[at++]=Te[$e][Ne];return It}function ye(ne){var re=He(ne);return re=Math.min(re,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*re))-2.5)}this.psymodel_init=function(ne){var re=ne.internal_flags,he,Ee=!0,we=13,be=24,Te=0,Ne=0,Ie=-8.25,$e=-4.5,ke=Pa(Je.CBANDS),Ke=Pa(Je.CBANDS),ct=Pa(Je.CBANDS),It=ne.out_samplerate;switch(ne.experimentalZ){default:case 0:Ee=!0;break;case 1:Ee=!(ne.VBR==fc.vbr_mtrh||ne.VBR==fc.vbr_mt);break;case 2:Ee=!1;break;case 3:we=8,Te=-1.75,Ne=-.0125,Ie=-8.25,$e=-2.25;break}for(re.ms_ener_ratio_old=.25,re.blocktype_old[0]=re.blocktype_old[1]=Je.NORM_TYPE,he=0;he<4;++he){for(var Ze=0;Ze<Je.CBANDS;++Ze)re.nb_1[he][Ze]=1e20,re.nb_2[he][Ze]=1e20,re.nb_s1[he][Ze]=re.nb_s2[he][Ze]=1;for(var at=0;at<Je.SBMAX_l;at++)re.en[he].l[at]=1e20,re.thm[he].l[at]=1e20;for(var Ze=0;Ze<3;++Ze){for(var at=0;at<Je.SBMAX_s;at++)re.en[he].s[at][Ze]=1e20,re.thm[he].s[at][Ze]=1e20;re.nsPsy.lastAttacks[he]=0}for(var Ze=0;Ze<9;Ze++)re.nsPsy.last_en_subshort[he][Ze]=10}for(re.loudness_sq_save[0]=re.loudness_sq_save[1]=0,re.npart_l=xe(re.numlines_l,re.bo_l,re.bm_l,ke,Ke,re.mld_l,re.PSY.bo_l_weight,It,Je.BLKSIZE,re.scalefac_band.l,Je.BLKSIZE/(2*576),Je.SBMAX_l),en(re.npart_l<Je.CBANDS),he=0;he<re.npart_l;he++){var Ot=Te;ke[he]>=we&&(Ot=Ne*(ke[he]-we)/(be-we)+Te*(be-ke[he])/(be-we)),ct[he]=Math.pow(10,Ot/10),re.numlines_l[he]>0?re.rnumlines_l[he]=1/re.numlines_l[he]:re.rnumlines_l[he]=0}re.s3_ll=pe(re.s3ind,re.npart_l,ke,Ke,ct,Ee);var Ze=0;for(he=0;he<re.npart_l;he++){var St;St=CO.MAX_VALUE;for(var zt=0;zt<re.numlines_l[he];zt++,Ze++){var ot=It*Ze/(1e3*Je.BLKSIZE),Tt;Tt=this.ATHformula(ot*1e3,ne)-20,Tt=Math.pow(10,.1*Tt),Tt*=re.numlines_l[he],St>Tt&&(St=Tt)}re.ATH.cb_l[he]=St,St=-20+ke[he]*20/10,St>6&&(St=100),St<-15&&(St=-15),St-=8,re.minval_l[he]=Math.pow(10,St/10)*re.numlines_l[he]}for(re.npart_s=xe(re.numlines_s,re.bo_s,re.bm_s,ke,Ke,re.mld_s,re.PSY.bo_s_weight,It,Je.BLKSIZE_s,re.scalefac_band.s,Je.BLKSIZE_s/(2*192),Je.SBMAX_s),en(re.npart_s<Je.CBANDS),Ze=0,he=0;he<re.npart_s;he++){var St,Ot=Ie;ke[he]>=we&&(Ot=$e*(ke[he]-we)/(be-we)+Ie*(be-ke[he])/(be-we)),ct[he]=Math.pow(10,Ot/10),St=CO.MAX_VALUE;for(var zt=0;zt<re.numlines_s[he];zt++,Ze++){var ot=It*Ze/(1e3*Je.BLKSIZE_s),Tt;Tt=this.ATHformula(ot*1e3,ne)-20,Tt=Math.pow(10,.1*Tt),Tt*=re.numlines_s[he],St>Tt&&(St=Tt)}re.ATH.cb_s[he]=St,St=-7+ke[he]*7/12,ke[he]>12&&(St*=1+Math.log(1+St)*3.1),ke[he]<12&&(St*=1+Math.log(1-St)*2.3),St<-15&&(St=-15),St-=8,re.minval_s[he]=Math.pow(10,St/10)*re.numlines_s[he]}re.s3_ss=pe(re.s3ind_s,re.npart_s,ke,Ke,ct,Ee),w(),n.init_fft(re),re.decay=Math.exp(-1*a/(c*It/192));{var st;st=h,ne.exp_nspsytune&2&&(st=1),Math.abs(ne.msfix)>0&&(st=ne.msfix),ne.msfix=st;for(var wt=0;wt<re.npart_l;wt++)re.s3ind[wt][1]>re.npart_l-1&&(re.s3ind[wt][1]=re.npart_l-1)}var Ln=576*re.mode_gr/It;if(re.ATH.decay=Math.pow(10,-12/10*Ln),re.ATH.adjust=.01,re.ATH.adjustLimit=1,en(re.bo_l[Je.SBMAX_l-1]<=re.npart_l),en(re.bo_s[Je.SBMAX_s-1]<=re.npart_s),ne.ATHtype!=-1){var ot,mt=ne.out_samplerate/Je.BLKSIZE,Vt=0;for(ot=0,he=0;he<Je.BLKSIZE/2;++he)ot+=mt,re.ATH.eql_w[he]=1/Math.pow(10,this.ATHformula(ot,ne)/10),Vt+=re.ATH.eql_w[he];for(Vt=1/Vt,he=Je.BLKSIZE/2;--he>=0;)re.ATH.eql_w[he]*=Vt}{for(var wt=Ze=0;wt<re.npart_s;++wt)for(he=0;he<re.numlines_s[wt];++he)++Ze;for(var wt=Ze=0;wt<re.npart_l;++wt)for(he=0;he<re.numlines_l[wt];++he)++Ze}for(Ze=0,he=0;he<re.npart_l;he++){var ot=It*(Ze+re.numlines_l[he]/2)/(1*Je.BLKSIZE);re.mld_cb_l[he]=ye(ot),Ze+=re.numlines_l[he]}for(;he<Je.CBANDS;++he)re.mld_cb_l[he]=1;for(Ze=0,he=0;he<re.npart_s;he++){var ot=It*(Ze+re.numlines_s[he]/2)/(1*Je.BLKSIZE_s);re.mld_cb_s[he]=ye(ot),Ze+=re.numlines_s[he]}for(;he<Je.CBANDS;++he)re.mld_cb_s[he]=1;return 0};function Be(ne,re){ne<-.3&&(ne=3410),ne/=1e3,ne=Math.max(.1,ne);var he=3.64*Math.pow(ne,-.8)-6.8*Math.exp(-.6*Math.pow(ne-3.4,2))+6*Math.exp(-.15*Math.pow(ne-8.7,2))+(.6+.04*re)*.001*Math.pow(ne,4);return he}this.ATHformula=function(ne,re){var he;switch(re.ATHtype){case 0:he=Be(ne,9);break;case 1:he=Be(ne,-1);break;case 2:he=Be(ne,0);break;case 3:he=Be(ne,1)+6;break;case 4:he=Be(ne,re.ATHcurve);break;default:he=Be(ne,0);break}return he}}var uYe=dYe,pYe=_p;function fYe(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=pYe.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}var mYe=fYe,hYe=Ts(),SD={};SD.SFBMAX=hYe.SBMAX_s*3;var s_=SD,TD=_a,_Ye=TD.new_float,fl=TD.new_int,xb=s_;function gYe(){this.xr=_Ye(576),this.l3_enc=fl(576),this.scalefac=fl(xb.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=fl(3),this.subblock_gain=fl(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=fl(xb.SFBMAX),this.window=fl(xb.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=fl(4),this.max_nonzero_coeff=0;var t=this;function n(e){return new Int32Array(e)}function a(e){return new Float32Array(e)}this.assign=function(e){t.xr=a(e.xr),t.l3_enc=n(e.l3_enc),t.scalefac=n(e.scalefac),t.xrpow_max=e.xrpow_max,t.part2_3_length=e.part2_3_length,t.big_values=e.big_values,t.count1=e.count1,t.global_gain=e.global_gain,t.scalefac_compress=e.scalefac_compress,t.block_type=e.block_type,t.mixed_block_flag=e.mixed_block_flag,t.table_select=n(e.table_select),t.subblock_gain=n(e.subblock_gain),t.region0_count=e.region0_count,t.region1_count=e.region1_count,t.preflag=e.preflag,t.scalefac_scale=e.scalefac_scale,t.count1table_select=e.count1table_select,t.part2_length=e.part2_length,t.sfb_lmax=e.sfb_lmax,t.sfb_smin=e.sfb_smin,t.psy_lmax=e.psy_lmax,t.sfbmax=e.sfbmax,t.psymax=e.psymax,t.sfbdivide=e.sfbdivide,t.width=n(e.width),t.window=n(e.window),t.count1bits=e.count1bits,t.sfb_partition_table=e.sfb_partition_table.slice(0),t.slen=n(e.slen),t.max_nonzero_coeff=e.max_nonzero_coeff}}var v1=gYe,bYe=_a,OO=bYe.new_int,vYe=v1;function EYe(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[OO(4),OO(4)];for(var t=0;t<2;t++)for(var n=0;n<2;n++)this.tt[t][n]=new vYe}var SYe=EYe,AD=_a,lf=AD.System,cf=AD.new_int,df=Ts();function TYe(t,n,a,e){this.l=cf(1+df.SBMAX_l),this.s=cf(1+df.SBMAX_s),this.psfb21=cf(1+df.PSFB21),this.psfb12=cf(1+df.PSFB12);var s=this.l,r=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],lf.arraycopy(this.arrL,0,s,0,Math.min(this.arrL.length,this.l.length)),lf.arraycopy(this.arrS,0,r,0,Math.min(this.arrS.length,this.s.length)),lf.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),lf.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}var yD=TYe,E1=_a,Rb=E1.new_float,AYe=E1.new_float_n,yYe=E1.new_int,NO=Ts();function IYe(){this.last_en_subshort=AYe([4,9]),this.lastAttacks=yYe(4),this.pefirbuf=Rb(19),this.longfact=Rb(NO.SBMAX_l),this.shortfact=Rb(NO.SBMAX_s),this.attackthre=0,this.attackthre_s=0}var CYe=IYe;function OYe(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}var NYe=OYe,Od=_a,xYe=Od.new_byte,RYe=Od.new_double,To=Od.new_float,ml=Od.new_float_n,Fo=Od.new_int,uf=Od.new_int_n,wYe=SYe,MYe=yD,LYe=CYe,DYe=NYe,xO=vD(),Oa=Ts(),PYe=s_;Yr.MFSIZE=3*1152+Oa.ENCDELAY-Oa.MDCTDELAY;Yr.MAX_HEADER_BUF=256;Yr.MAX_BITS_PER_CHANNEL=4095;Yr.MAX_BITS_PER_GRANULE=7680;Yr.BPC=320;function Yr(){var t=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=ml([2,Yr.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new wYe,this.ms_ratio=To(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=Fo(2),this.CurrentStep=Fo(2),this.masking_lower=0,this.bv_scf=Fo(576),this.pseudohalf=Fo(PYe.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*Yr.BPC+1),this.itime=RYe(2),this.sideinfo_len=0,this.sb_sample=ml([2,2,18,Oa.SBLIMIT]),this.amp_filter=To(32);function n(){this.write_timing=0,this.ptr=0,this.buf=xYe(t)}this.header=new Array(Yr.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new MYe,this.minval_l=To(Oa.CBANDS),this.minval_s=To(Oa.CBANDS),this.nb_1=ml([4,Oa.CBANDS]),this.nb_2=ml([4,Oa.CBANDS]),this.nb_s1=ml([4,Oa.CBANDS]),this.nb_s2=ml([4,Oa.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=To(4),this.loudness_sq=ml([2,2]),this.loudness_sq_save=To(2),this.mld_l=To(Oa.SBMAX_l),this.mld_s=To(Oa.SBMAX_s),this.bm_l=Fo(Oa.SBMAX_l),this.bo_l=Fo(Oa.SBMAX_l),this.bm_s=Fo(Oa.SBMAX_s),this.bo_s=Fo(Oa.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=uf([Oa.CBANDS,2]),this.s3ind_s=uf([Oa.CBANDS,2]),this.numlines_s=Fo(Oa.CBANDS),this.numlines_l=Fo(Oa.CBANDS),this.rnumlines_l=To(Oa.CBANDS),this.mld_cb_l=To(Oa.CBANDS),this.mld_cb_s=To(Oa.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=To(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=Fo(2),this.nsPsy=new LYe,this.VBR_seek_table=new DYe,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=uf([16,5]),this.bitrate_blockType_Hist=uf([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var a=0;a<this.en.length;a++)this.en[a]=new xO;for(var a=0;a<this.thm.length;a++)this.thm[a]=new xO;for(var a=0;a<this.header.length;a++)this.header[a]=new n}var o_=Yr,kYe=_a,hl=kYe.new_float,_l=Ts();function BYe(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=hl(_l.SBMAX_l),this.s=hl(_l.SBMAX_s),this.psfb21=hl(_l.PSFB21),this.psfb12=hl(_l.PSFB12),this.cb_l=hl(_l.CBANDS),this.cb_s=hl(_l.CBANDS),this.eql_w=hl(_l.BLKSIZE/2)}var FYe=BYe,ID=_a,Hs=ID.System,RO=ID.Arrays;xa.STEPS_per_dB=100;xa.MAX_dB=120;xa.GAIN_NOT_ENOUGH_SAMPLES=-24601;xa.GAIN_ANALYSIS_ERROR=0;xa.GAIN_ANALYSIS_OK=1;xa.INIT_GAIN_ANALYSIS_ERROR=0;xa.INIT_GAIN_ANALYSIS_OK=1;xa.YULE_ORDER=10;xa.MAX_ORDER=xa.YULE_ORDER;xa.MAX_SAMP_FREQ=48e3;xa.RMS_WINDOW_TIME_NUMERATOR=1;xa.RMS_WINDOW_TIME_DENOMINATOR=20;xa.MAX_SAMPLES_PER_WINDOW=xa.MAX_SAMP_FREQ*xa.RMS_WINDOW_TIME_NUMERATOR/xa.RMS_WINDOW_TIME_DENOMINATOR+1;function xa(){var t=64.82,n=.95,a=xa.RMS_WINDOW_TIME_NUMERATOR,e=xa.RMS_WINDOW_TIME_DENOMINATOR,s=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],r=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function o(u,m,h,_,E,y){for(;E--!=0;)h[_]=1e-10+u[m+0]*y[0]-h[_-1]*y[1]+u[m-1]*y[2]-h[_-2]*y[3]+u[m-2]*y[4]-h[_-3]*y[5]+u[m-3]*y[6]-h[_-4]*y[7]+u[m-4]*y[8]-h[_-5]*y[9]+u[m-5]*y[10]-h[_-6]*y[11]+u[m-6]*y[12]-h[_-7]*y[13]+u[m-7]*y[14]-h[_-8]*y[15]+u[m-8]*y[16]-h[_-9]*y[17]+u[m-9]*y[18]-h[_-10]*y[19]+u[m-10]*y[20],++_,++m}function i(u,m,h,_,E,y){for(;E--!=0;)h[_]=u[m+0]*y[0]-h[_-1]*y[1]+u[m-1]*y[2]-h[_-2]*y[3]+u[m-2]*y[4],++_,++m}function l(u,m){for(var h=0;h<MAX_ORDER;h++)u.linprebuf[h]=u.lstepbuf[h]=u.loutbuf[h]=u.rinprebuf[h]=u.rstepbuf[h]=u.routbuf[h]=0;switch(0|m){case 48e3:u.reqindex=0;break;case 44100:u.reqindex=1;break;case 32e3:u.reqindex=2;break;case 24e3:u.reqindex=3;break;case 22050:u.reqindex=4;break;case 16e3:u.reqindex=5;break;case 12e3:u.reqindex=6;break;case 11025:u.reqindex=7;break;case 8e3:u.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return u.sampleWindow=0|(m*a+e-1)/e,u.lsum=0,u.rsum=0,u.totsamp=0,RO.ill(u.A,0),INIT_GAIN_ANALYSIS_OK}this.InitGainAnalysis=function(u,m){return l(u,m)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(u.linpre=MAX_ORDER,u.rinpre=MAX_ORDER,u.lstep=MAX_ORDER,u.rstep=MAX_ORDER,u.lout=MAX_ORDER,u.rout=MAX_ORDER,RO.fill(u.B,0),INIT_GAIN_ANALYSIS_OK)};function c(u){return u*u}this.AnalyzeSamples=function(u,m,h,_,E,y,b){var A,T,I,N,x,R,M;if(y==0)return GAIN_ANALYSIS_OK;switch(M=0,x=y,b){case 1:_=m,E=h;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(y<MAX_ORDER?(Hs.arraycopy(m,h,u.linprebuf,MAX_ORDER,y),Hs.arraycopy(_,E,u.rinprebuf,MAX_ORDER,y)):(Hs.arraycopy(m,h,u.linprebuf,MAX_ORDER,MAX_ORDER),Hs.arraycopy(_,E,u.rinprebuf,MAX_ORDER,MAX_ORDER));x>0;){R=x>u.sampleWindow-u.totsamp?u.sampleWindow-u.totsamp:x,M<MAX_ORDER?(A=u.linpre+M,T=u.linprebuf,I=u.rinpre+M,N=u.rinprebuf,R>MAX_ORDER-M&&(R=MAX_ORDER-M)):(A=h+M,T=m,I=E+M,N=_),o(T,A,u.lstepbuf,u.lstep+u.totsamp,R,s[u.reqindex]),o(N,I,u.rstepbuf,u.rstep+u.totsamp,R,s[u.reqindex]),i(u.lstepbuf,u.lstep+u.totsamp,u.loutbuf,u.lout+u.totsamp,R,r[u.reqindex]),i(u.rstepbuf,u.rstep+u.totsamp,u.routbuf,u.rout+u.totsamp,R,r[u.reqindex]),A=u.lout+u.totsamp,T=u.loutbuf,I=u.rout+u.totsamp,N=u.routbuf;for(var w=R%8;w--!=0;)u.lsum+=c(T[A++]),u.rsum+=c(N[I++]);for(w=R/8;w--!=0;)u.lsum+=c(T[A+0])+c(T[A+1])+c(T[A+2])+c(T[A+3])+c(T[A+4])+c(T[A+5])+c(T[A+6])+c(T[A+7]),A+=8,u.rsum+=c(N[I+0])+c(N[I+1])+c(N[I+2])+c(N[I+3])+c(N[I+4])+c(N[I+5])+c(N[I+6])+c(N[I+7]),I+=8;if(x-=R,M+=R,u.totsamp+=R,u.totsamp==u.sampleWindow){var D=xa.STEPS_per_dB*10*Math.log10((u.lsum+u.rsum)/u.totsamp*.5+1e-37),B=D<=0?0:0|D;B>=u.A.length&&(B=u.A.length-1),u.A[B]++,u.lsum=u.rsum=0,Hs.arraycopy(u.loutbuf,u.totsamp,u.loutbuf,0,MAX_ORDER),Hs.arraycopy(u.routbuf,u.totsamp,u.routbuf,0,MAX_ORDER),Hs.arraycopy(u.lstepbuf,u.totsamp,u.lstepbuf,0,MAX_ORDER),Hs.arraycopy(u.rstepbuf,u.totsamp,u.rstepbuf,0,MAX_ORDER),u.totsamp=0}if(u.totsamp>u.sampleWindow)return GAIN_ANALYSIS_ERROR}return y<MAX_ORDER?(Hs.arraycopy(u.linprebuf,y,u.linprebuf,0,MAX_ORDER-y),Hs.arraycopy(u.rinprebuf,y,u.rinprebuf,0,MAX_ORDER-y),Hs.arraycopy(m,h,u.linprebuf,MAX_ORDER-y,y),Hs.arraycopy(_,E,u.rinprebuf,MAX_ORDER-y,y)):(Hs.arraycopy(m,h+y-MAX_ORDER,u.linprebuf,0,MAX_ORDER),Hs.arraycopy(_,E+y-MAX_ORDER,u.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK};function d(u,m){var h,_=0;for(h=0;h<m;h++)_+=u[h];if(_==0)return GAIN_NOT_ENOUGH_SAMPLES;var E=0|Math.ceil(_*(1-n));for(h=m;h-- >0&&!((E-=u[h])<=0););return t-h/xa.STEPS_per_dB}this.GetTitleGain=function(u){for(var m=d(u.A,u.A.length),h=0;h<u.A.length;h++)u.B[h]+=u.A[h],u.A[h]=0;for(var h=0;h<MAX_ORDER;h++)u.linprebuf[h]=u.lstepbuf[h]=u.loutbuf[h]=u.rinprebuf[h]=u.rstepbuf[h]=u.routbuf[h]=0;return u.totsamp=0,u.lsum=u.rsum=0,m}}var CD=xa,OD=_a,hc=OD.new_float,wO=OD.new_int,js=CD;function UYe(){this.linprebuf=hc(js.MAX_ORDER*2),this.linpre=0,this.lstepbuf=hc(js.MAX_SAMPLES_PER_WINDOW+js.MAX_ORDER),this.lstep=0,this.loutbuf=hc(js.MAX_SAMPLES_PER_WINDOW+js.MAX_ORDER),this.lout=0,this.rinprebuf=hc(js.MAX_ORDER*2),this.rinpre=0,this.rstepbuf=hc(js.MAX_SAMPLES_PER_WINDOW+js.MAX_ORDER),this.rstep=0,this.routbuf=hc(js.MAX_SAMPLES_PER_WINDOW+js.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=wO(0|js.STEPS_per_dB*js.MAX_dB),this.B=wO(0|js.STEPS_per_dB*js.MAX_dB)}var $Ye=UYe;function GYe(t){this.bits=t}var ND=GYe,S1=_a,MO=S1.new_float,VYe=S1.new_int,LO=S1.assert,HYe=ND,DO=Ts(),jYe=s_,WYe=o_;function zYe(t){var n=t;this.quantize=n,this.iteration_loop=function(a,e,s,r){var o=a.internal_flags,i=MO(jYe.SFBMAX),l=MO(576),c=VYe(2),d=0,u,m=o.l3_side,h=new HYe(d);this.quantize.rv.ResvFrameBegin(a,h),d=h.bits;for(var _=0;_<o.mode_gr;_++){u=this.quantize.qupvt.on_pe(a,e,c,d,_,_),o.mode_ext==DO.MPG_MD_MS_LR&&(this.quantize.ms_convert(o.l3_side,_),this.quantize.qupvt.reduce_side(c,s[_],d,u));for(var E=0;E<o.channels_out;E++){var y,b,A=m.tt[_][E];A.block_type!=DO.SHORT_TYPE?(y=0,b=o.PSY.mask_adjust-y):(y=0,b=o.PSY.mask_adjust_short-y),o.masking_lower=Math.pow(10,b*.1),this.quantize.init_outer_loop(o,A),this.quantize.init_xrpow(o,A,l)&&(this.quantize.qupvt.calc_xmin(a,r[_][E],A,i),this.quantize.outer_loop(a,A,i,l,E,c[E])),this.quantize.iteration_finish_one(o,_,E),LO(A.part2_3_length<=WYe.MAX_BITS_PER_CHANNEL),LO(A.part2_3_length<=c[E])}}this.quantize.rv.ResvFrameEnd(o,d)}}var YYe=zYe;function In(t,n,a,e){this.xlen=t,this.linmax=n,this.table=a,this.hlen=e}var it={};it.t1HB=[1,1,1,0];it.t2HB=[1,2,1,3,1,1,3,2,0];it.t3HB=[3,2,1,1,1,1,3,2,0];it.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0];it.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0];it.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0];it.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0];it.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0];it.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0];it.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0];it.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0];it.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1];it.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0];it.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3];it.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3];it.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16];it.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0];it.t1l=[1,4,3,5];it.t2l=[1,4,7,4,5,7,6,7,8];it.t3l=[2,3,7,4,4,7,6,7,8];it.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10];it.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9];it.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12];it.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13];it.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11];it.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13];it.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12];it.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12];it.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18];it.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15];it.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12];it.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10];it.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6];it.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10];it.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8];it.ht=[new In(0,0,null,null),new In(2,0,it.t1HB,it.t1l),new In(3,0,it.t2HB,it.t2l),new In(3,0,it.t3HB,it.t3l),new In(0,0,null,null),new In(4,0,it.t5HB,it.t5l),new In(4,0,it.t6HB,it.t6l),new In(6,0,it.t7HB,it.t7l),new In(6,0,it.t8HB,it.t8l),new In(6,0,it.t9HB,it.t9l),new In(8,0,it.t10HB,it.t10l),new In(8,0,it.t11HB,it.t11l),new In(8,0,it.t12HB,it.t12l),new In(16,0,it.t13HB,it.t13l),new In(0,0,null,it.t16_5l),new In(16,0,it.t15HB,it.t15l),new In(1,1,it.t16HB,it.t16l),new In(2,3,it.t16HB,it.t16l),new In(3,7,it.t16HB,it.t16l),new In(4,15,it.t16HB,it.t16l),new In(6,63,it.t16HB,it.t16l),new In(8,255,it.t16HB,it.t16l),new In(10,1023,it.t16HB,it.t16l),new In(13,8191,it.t16HB,it.t16l),new In(4,15,it.t24HB,it.t24l),new In(5,31,it.t24HB,it.t24l),new In(6,63,it.t24HB,it.t24l),new In(7,127,it.t24HB,it.t24l),new In(8,255,it.t24HB,it.t24l),new In(9,511,it.t24HB,it.t24l),new In(11,2047,it.t24HB,it.t24l),new In(13,8191,it.t24HB,it.t24l),new In(0,0,it.t32HB,it.t32l),new In(0,0,it.t33HB,it.t33l)];it.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366];it.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296];it.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369];it.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]];it.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]];it.scfsi_band=[0,6,11,16,21];var T1=it,wb,PO;function xD(){if(PO)return wb;PO=1;var t=yD,n=_a,a=n.VbrMode,e=n.Float,s=n.Util,r=n.new_float,o=n.new_int,i=n.assert,l=Ts(),c=ND,d=o_;u.Q_MAX=257,u.Q_MAX2=116,u.LARGE_BITS=1e5,u.IXMAX_VAL=8206;function u(){var m=A1(),h=null,_=null,E=null;this.setModules=function($,Y,j){h=$,_=Y,E=j};function y($){return i(0<=$+u.Q_MAX2&&$<u.Q_MAX),M[$+u.Q_MAX2]}this.IPOW20=function($){return i(0<=$&&$<u.Q_MAX),w[$]};var b=2220446049250313e-31,A=u.IXMAX_VAL,T=A+2,I=u.Q_MAX,N=u.Q_MAX2;u.LARGE_BITS;var x=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var R=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=R,this.sfBandIndex=[new t([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new t([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new t([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new t([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new t([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new t([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new t([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new t([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new t([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var M=r(I+N+1),w=r(I),D=r(T),B=r(T);this.adj43=B;function k($,Y){var j=E.ATHformula(Y,$);return j-=x,j=Math.pow(10,j/10+$.ATHlower),j}function V($){for(var Y=$.internal_flags.ATH.l,j=$.internal_flags.ATH.psfb21,U=$.internal_flags.ATH.s,J=$.internal_flags.ATH.psfb12,te=$.internal_flags,q=$.out_samplerate,K=0;K<l.SBMAX_l;K++){var W=te.scalefac_band.l[K],ee=te.scalefac_band.l[K+1];Y[K]=e.MAX_VALUE;for(var ae=W;ae<ee;ae++){var ve=ae*q/1152,Ce=k($,ve);Y[K]=Math.min(Y[K],Ce)}}for(var K=0;K<l.PSFB21;K++){var W=te.scalefac_band.psfb21[K],ee=te.scalefac_band.psfb21[K+1];j[K]=e.MAX_VALUE;for(var ae=W;ae<ee;ae++){var ve=ae*q/1152,Ce=k($,ve);j[K]=Math.min(j[K],Ce)}}for(var K=0;K<l.SBMAX_s;K++){var W=te.scalefac_band.s[K],ee=te.scalefac_band.s[K+1];U[K]=e.MAX_VALUE;for(var ae=W;ae<ee;ae++){var ve=ae*q/384,Ce=k($,ve);U[K]=Math.min(U[K],Ce)}U[K]*=te.scalefac_band.s[K+1]-te.scalefac_band.s[K]}for(var K=0;K<l.PSFB12;K++){var W=te.scalefac_band.psfb12[K],ee=te.scalefac_band.psfb12[K+1];J[K]=e.MAX_VALUE;for(var ae=W;ae<ee;ae++){var ve=ae*q/384,Ce=k($,ve);J[K]=Math.min(J[K],Ce)}J[K]*=te.scalefac_band.s[13]-te.scalefac_band.s[12]}if($.noATH){for(var K=0;K<l.SBMAX_l;K++)Y[K]=1e-20;for(var K=0;K<l.PSFB21;K++)j[K]=1e-20;for(var K=0;K<l.SBMAX_s;K++)U[K]=1e-20;for(var K=0;K<l.PSFB12;K++)J[K]=1e-20}te.ATH.floor=10*Math.log10(k($,-1))}this.iteration_init=function($){var Y=$.internal_flags,j=Y.l3_side,U;if(Y.iteration_init_init==0){for(Y.iteration_init_init=1,j.main_data_begin=0,V($),D[0]=0,U=1;U<T;U++)D[U]=Math.pow(U,4/3);for(U=0;U<T-1;U++)B[U]=U+1-Math.pow(.5*(D[U]+D[U+1]),.75);for(B[U]=.5,U=0;U<I;U++)w[U]=Math.pow(2,(U-210)*-.1875);for(U=0;U<=I+N;U++)M[U]=Math.pow(2,(U-210-N)*.25);h.huffman_init(Y);{var J,te,q,K;for(U=$.exp_nspsytune>>2&63,U>=32&&(U-=64),J=Math.pow(10,U/4/10),U=$.exp_nspsytune>>8&63,U>=32&&(U-=64),te=Math.pow(10,U/4/10),U=$.exp_nspsytune>>14&63,U>=32&&(U-=64),q=Math.pow(10,U/4/10),U=$.exp_nspsytune>>20&63,U>=32&&(U-=64),K=q*Math.pow(10,U/4/10),U=0;U<l.SBMAX_l;U++){var W;U<=6?W=J:U<=13?W=te:U<=20?W=q:W=K,Y.nsPsy.longfact[U]=W}for(U=0;U<l.SBMAX_s;U++){var W;U<=5?W=J:U<=10?W=te:U<=11?W=q:W=K,Y.nsPsy.shortfact[U]=W}}}},this.on_pe=function($,Y,j,U,J,te){var q=$.internal_flags,K=0,W,ee=o(2),ae,ve=new c(K),Ce=_.ResvMaxBits($,U,ve,te);K=ve.bits;var ue=K+Ce;for(ue>d.MAX_BITS_PER_GRANULE&&(ue=d.MAX_BITS_PER_GRANULE),W=0,ae=0;ae<q.channels_out;++ae)j[ae]=Math.min(d.MAX_BITS_PER_CHANNEL,K/q.channels_out),ee[ae]=0|j[ae]*Y[J][ae]/700-j[ae],ee[ae]>U*3/4&&(ee[ae]=U*3/4),ee[ae]<0&&(ee[ae]=0),ee[ae]+j[ae]>d.MAX_BITS_PER_CHANNEL&&(ee[ae]=Math.max(0,d.MAX_BITS_PER_CHANNEL-j[ae])),W+=ee[ae];if(W>Ce)for(ae=0;ae<q.channels_out;++ae)ee[ae]=Ce*ee[ae]/W;for(ae=0;ae<q.channels_out;++ae)j[ae]+=ee[ae],Ce-=ee[ae];for(W=0,ae=0;ae<q.channels_out;++ae)W+=j[ae];if(W>d.MAX_BITS_PER_GRANULE){var ge=0;for(ae=0;ae<q.channels_out;++ae)j[ae]*=d.MAX_BITS_PER_GRANULE,j[ae]/=W,ge+=j[ae]}return ue},this.reduce_side=function($,Y,j,U){i($[0]+$[1]<=d.MAX_BITS_PER_GRANULE);var J=.33*(.5-Y)/.5;J<0&&(J=0),J>.5&&(J=.5);var te=0|J*.5*($[0]+$[1]);te>d.MAX_BITS_PER_CHANNEL-$[0]&&(te=d.MAX_BITS_PER_CHANNEL-$[0]),te<0&&(te=0),$[1]>=125&&($[1]-te>125?($[0]<j&&($[0]+=te),$[1]-=te):($[0]+=$[1]-125,$[1]=125)),te=$[0]+$[1],te>U&&($[0]=U*$[0]/te,$[1]=U*$[1]/te),i($[0]<=d.MAX_BITS_PER_CHANNEL),i($[1]<=d.MAX_BITS_PER_CHANNEL),i($[0]+$[1]<=d.MAX_BITS_PER_GRANULE)},this.athAdjust=function($,Y,j){var U=90.30873362,J=94.82444863,te=s.FAST_LOG10_X(Y,10),q=$*$,K=0;return te-=j,q>1e-20&&(K=1+s.FAST_LOG10_X(q,10/U)),K<0&&(K=0),te*=K,te+=j+U-J,Math.pow(10,.1*te)},this.calc_xmin=function($,Y,j,U){var J=0,te=$.internal_flags,q,K=0,W=0,ee=te.ATH,ae=j.xr,ve=$.VBR==a.vbr_mtrh?1:0,Ce=te.masking_lower;for(($.VBR==a.vbr_mtrh||$.VBR==a.vbr_mt)&&(Ce=1),q=0;q<j.psy_lmax;q++){var ue,ge,Me,We,Ue,Re;$.VBR==a.vbr_rh||$.VBR==a.vbr_mtrh?ge=athAdjust(ee.adjust,ee.l[q],ee.floor):ge=ee.adjust*ee.l[q],Ue=j.width[q],Me=ge/Ue,We=b,Re=Ue>>1,ue=0;do{var Le,Xe;Le=ae[K]*ae[K],ue+=Le,We+=Le<Me?Le:Me,K++,Xe=ae[K]*ae[K],ue+=Xe,We+=Xe<Me?Xe:Me,K++}while(--Re>0);if(ue>ge&&W++,q==l.SBPSY_l){var et=ge*te.nsPsy.longfact[q];We<et&&(We=et)}if(ve!=0&&(ge=We),!$.ATHonly){var yt=Y.en.l[q];if(yt>0){var et;et=ue*Y.thm.l[q]*Ce/yt,ve!=0&&(et*=te.nsPsy.longfact[q]),ge<et&&(ge=et)}}ve!=0?U[J++]=ge:U[J++]=ge*te.nsPsy.longfact[q]}var Dt=575;if(j.block_type!=l.SHORT_TYPE)for(var X=576;X--!=0&&m.EQ(ae[X],0);)Dt=X;j.max_nonzero_coeff=Dt;for(var se=j.sfb_smin;q<j.psymax;se++,q+=3){var Ue,ie,fe;for($.VBR==a.vbr_rh||$.VBR==a.vbr_mtrh?fe=athAdjust(ee.adjust,ee.s[se],ee.floor):fe=ee.adjust*ee.s[se],Ue=j.width[q],ie=0;ie<3;ie++){var ue=0,ge,Me,We,Re=Ue>>1;Me=fe/Ue,We=b;do{var Le,Xe;Le=ae[K]*ae[K],ue+=Le,We+=Le<Me?Le:Me,K++,Xe=ae[K]*ae[K],ue+=Xe,We+=Xe<Me?Xe:Me,K++}while(--Re>0);if(ue>fe&&W++,se==l.SBPSY_s){var et=fe*te.nsPsy.shortfact[se];We<et&&(We=et)}if(ve!=0?ge=We:ge=fe,!$.ATHonly&&!$.ATHshort){var yt=Y.en.s[se][ie];if(yt>0){var et;et=ue*Y.thm.s[se][ie]*Ce/yt,ve!=0&&(et*=te.nsPsy.shortfact[se]),ge<et&&(ge=et)}}ve!=0?U[J++]=ge:U[J++]=ge*te.nsPsy.shortfact[se]}$.useTemporal&&(U[J-3]>U[J-3+1]&&(U[J-3+1]+=(U[J-3]-U[J-3+1])*te.decay),U[J-3+1]>U[J-3+2]&&(U[J-3+2]+=(U[J-3+1]-U[J-3+2])*te.decay))}return W};function F($){this.s=$}this.calc_noise_core=function($,Y,j,U){var J=0,te=Y.s,q=$.l3_enc;if(te>$.count1)for(;j--!=0;){var K;K=$.xr[te],te++,J+=K*K,K=$.xr[te],te++,J+=K*K}else if(te>$.big_values){var W=r(2);for(W[0]=0,W[1]=U;j--!=0;){var K;K=Math.abs($.xr[te])-W[q[te]],te++,J+=K*K,K=Math.abs($.xr[te])-W[q[te]],te++,J+=K*K}}else for(;j--!=0;){var K;K=Math.abs($.xr[te])-D[q[te]]*U,te++,J+=K*K,K=Math.abs($.xr[te])-D[q[te]]*U,te++,J+=K*K}return Y.s=te,J},this.calc_noise=function($,Y,j,U,J){var te=0,q=0,K,W,ee=0,ae=0,ve=0,Ce=-20,ue=0,ge=$.scalefac,Me=0;for(U.over_SSD=0,K=0;K<$.psymax;K++){var We=$.global_gain-(ge[Me++]+($.preflag!=0?R[K]:0)<<$.scalefac_scale+1)-$.subblock_gain[$.window[K]]*8,Ue=0;if(J!=null&&J.step[K]==We)Ue=J.noise[K],ue+=$.width[K],j[te++]=Ue/Y[q++],Ue=J.noise_log[K];else{var Re=y(We);if(W=$.width[K]>>1,ue+$.width[K]>$.max_nonzero_coeff){var Le;Le=$.max_nonzero_coeff-ue+1,Le>0?W=Le>>1:W=0}var Xe=new F(ue);Ue=this.calc_noise_core($,Xe,W,Re),ue=Xe.s,J!=null&&(J.step[K]=We,J.noise[K]=Ue),Ue=j[te++]=Ue/Y[q++],Ue=s.FAST_LOG10(Math.max(Ue,1e-20)),J!=null&&(J.noise_log[K]=Ue)}if(J!=null&&(J.global_gain=$.global_gain),ve+=Ue,Ue>0){var et;et=Math.max(0|Ue*10+.5,1),U.over_SSD+=et*et,ee++,ae+=Ue}Ce=Math.max(Ce,Ue)}return U.over_count=ee,U.tot_noise=ve,U.over_noise=ae,U.max_noise=Ce,ee},this.set_pinfo=function($,Y,j,U,J){var te=$.internal_flags,q,K,W,ee,ae,ve=Y.scalefac_scale==0?.5:1,Ce=Y.scalefac,ue=r(L3Side.SFBMAX),ge=r(L3Side.SFBMAX),Me=new CalcNoiseResult;calc_xmin($,j,Y,ue),calc_noise(Y,ue,ge,Me,null);var We=0;for(K=Y.sfb_lmax,Y.block_type!=l.SHORT_TYPE&&Y.mixed_block_flag==0&&(K=22),q=0;q<K;q++){var Ue=te.scalefac_band.l[q],Re=te.scalefac_band.l[q+1],Le=Re-Ue;for(ee=0;We<Re;We++)ee+=Y.xr[We]*Y.xr[We];ee/=Le,ae=1e15,te.pinfo.en[U][J][q]=ae*ee,te.pinfo.xfsf[U][J][q]=ae*ue[q]*ge[q]/Le,j.en.l[q]>0&&!$.ATHonly?ee=ee/j.en.l[q]:ee=0,te.pinfo.thr[U][J][q]=ae*Math.max(ee*j.thm.l[q],te.ATH.l[q]),te.pinfo.LAMEsfb[U][J][q]=0,Y.preflag!=0&&q>=11&&(te.pinfo.LAMEsfb[U][J][q]=-ve*R[q]),q<l.SBPSY_l&&(i(Ce[q]>=0),te.pinfo.LAMEsfb[U][J][q]-=ve*Ce[q])}if(Y.block_type==l.SHORT_TYPE)for(K=q,q=Y.sfb_smin;q<l.SBMAX_s;q++)for(var Ue=te.scalefac_band.s[q],Re=te.scalefac_band.s[q+1],Le=Re-Ue,Xe=0;Xe<3;Xe++){for(ee=0,W=Ue;W<Re;W++)ee+=Y.xr[We]*Y.xr[We],We++;ee=Math.max(ee/Le,1e-20),ae=1e15,te.pinfo.en_s[U][J][3*q+Xe]=ae*ee,te.pinfo.xfsf_s[U][J][3*q+Xe]=ae*ue[K]*ge[K]/Le,j.en.s[q][Xe]>0?ee=ee/j.en.s[q][Xe]:ee=0,($.ATHonly||$.ATHshort)&&(ee=0),te.pinfo.thr_s[U][J][3*q+Xe]=ae*Math.max(ee*j.thm.s[q][Xe],te.ATH.s[q]),te.pinfo.LAMEsfb_s[U][J][3*q+Xe]=-2*Y.subblock_gain[Xe],q<l.SBPSY_s&&(te.pinfo.LAMEsfb_s[U][J][3*q+Xe]-=ve*Ce[K]),K++}te.pinfo.LAMEqss[U][J]=Y.global_gain,te.pinfo.LAMEmainbits[U][J]=Y.part2_3_length+Y.part2_length,te.pinfo.LAMEsfbits[U][J]=Y.part2_length,te.pinfo.over[U][J]=Me.over_count,te.pinfo.max_noise[U][J]=Me.max_noise*10,te.pinfo.over_noise[U][J]=Me.over_noise*10,te.pinfo.tot_noise[U][J]=Me.tot_noise*10,te.pinfo.over_SSD[U][J]=Me.over_SSD}}return wb=u,wb}var Mb,kO;function RD(){if(kO)return Mb;kO=1;var t=_a,n=t.System,a=t.Arrays,e=t.new_int,s=t.assert,r=Ts(),o=T1,i=v1,l=xD();function c(){var d=null;this.qupvt=null,this.setModules=function(te){this.qupvt=te,d=te};function u(te){this.bits=0|te}var m=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function h(te,q,K,W,ee,ae){var ve=.5946/q;for(te=te>>1;te--!=0;)ee[ae++]=ve>K[W++]?0:1,ee[ae++]=ve>K[W++]?0:1}function _(te,q,K,W,ee,ae){te=te>>1;var ve=te%2;for(te=te>>1;te--!=0;){var Ce,ue,ge,Me,We,Ue,Re,Le;Ce=K[W++]*q,ue=K[W++]*q,We=0|Ce,ge=K[W++]*q,Ue=0|ue,Me=K[W++]*q,Re=0|ge,Ce+=d.adj43[We],Le=0|Me,ue+=d.adj43[Ue],ee[ae++]=0|Ce,ge+=d.adj43[Re],ee[ae++]=0|ue,Me+=d.adj43[Le],ee[ae++]=0|ge,ee[ae++]=0|Me}if(ve!=0){var Ce,ue,We,Ue;Ce=K[W++]*q,ue=K[W++]*q,We=0|Ce,Ue=0|ue,Ce+=d.adj43[We],ue+=d.adj43[Ue],ee[ae++]=0|Ce,ee[ae++]=0|ue}}function E(te,q,K,W,ee){var ae,ve,Ce=0,ue,ge=0,Me=0,We=0,Ue=q,Re=0,Le=Ue,Xe=0,et=te,yt=0;for(ue=ee!=null&&W.global_gain==ee.global_gain,W.block_type==r.SHORT_TYPE?ve=38:ve=21,ae=0;ae<=ve;ae++){var Dt=-1;if((ue||W.block_type==r.NORM_TYPE)&&(Dt=W.global_gain-(W.scalefac[ae]+(W.preflag!=0?d.pretab[ae]:0)<<W.scalefac_scale+1)-W.subblock_gain[W.window[ae]]*8),s(W.width[ae]>=0),ue&&ee.step[ae]==Dt)ge!=0&&(_(ge,K,et,yt,Le,Xe),ge=0),Me!=0&&(h(Me,K,et,yt,Le,Xe),Me=0);else{var X=W.width[ae];if(Ce+W.width[ae]>W.max_nonzero_coeff){var se;se=W.max_nonzero_coeff-Ce+1,a.fill(q,W.max_nonzero_coeff,576,0),X=se,X<0&&(X=0),ae=ve+1}if(ge==0&&Me==0&&(Le=Ue,Xe=Re,et=te,yt=We),ee!=null&&ee.sfb_count1>0&&ae>=ee.sfb_count1&&ee.step[ae]>0&&Dt>=ee.step[ae]?(ge!=0&&(_(ge,K,et,yt,Le,Xe),ge=0,Le=Ue,Xe=Re,et=te,yt=We),Me+=X):(Me!=0&&(h(Me,K,et,yt,Le,Xe),Me=0,Le=Ue,Xe=Re,et=te,yt=We),ge+=X),X<=0){Me!=0&&(h(Me,K,et,yt,Le,Xe),Me=0),ge!=0&&(_(ge,K,et,yt,Le,Xe),ge=0);break}}ae<=ve&&(Re+=W.width[ae],We+=W.width[ae],Ce+=W.width[ae])}ge!=0&&(_(ge,K,et,yt,Le,Xe),ge=0),Me!=0&&(h(Me,K,et,yt,Le,Xe),Me=0)}function y(te,q,K){var W=0,ee=0;do{var ae=te[q++],ve=te[q++];W<ae&&(W=ae),ee<ve&&(ee=ve)}while(q<K);return W<ee&&(W=ee),W}function b(te,q,K,W,ee,ae){var ve=o.ht[W].xlen*65536+o.ht[ee].xlen,Ce=0,ue;do{var ge=te[q++],Me=te[q++];ge!=0&&(ge>14&&(ge=15,Ce+=ve),ge*=16),Me!=0&&(Me>14&&(Me=15,Ce+=ve),ge+=Me),Ce+=o.largetbl[ge]}while(q<K);return ue=Ce&65535,Ce>>=16,Ce>ue&&(Ce=ue,W=ee),ae.bits+=Ce,W}function A(te,q,K,W){var ee=0,ae=o.ht[1].hlen;do{var ve=te[q+0]*2+te[q+1];q+=2,ee+=ae[ve]}while(q<K);return W.bits+=ee,1}function T(te,q,K,W,ee){var ae=0,ve,Ce=o.ht[W].xlen,ue;W==2?ue=o.table23:ue=o.table56;do{var ge=te[q+0]*Ce+te[q+1];q+=2,ae+=ue[ge]}while(q<K);return ve=ae&65535,ae>>=16,ae>ve&&(ae=ve,W++),ee.bits+=ae,W}function I(te,q,K,W,ee){var ae=0,ve=0,Ce=0,ue=o.ht[W].xlen,ge=o.ht[W].hlen,Me=o.ht[W+1].hlen,We=o.ht[W+2].hlen;do{var Ue=te[q+0]*ue+te[q+1];q+=2,ae+=ge[Ue],ve+=Me[Ue],Ce+=We[Ue]}while(q<K);var Re=W;return ae>ve&&(ae=ve,Re++),ae>Ce&&(ae=Ce,Re=W+2),ee.bits+=ae,Re}var N=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function x(te,q,K,W){var ee=y(te,q,K);switch(ee){case 0:return ee;case 1:return A(te,q,K,W);case 2:case 3:return T(te,q,K,N[ee-1],W);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return I(te,q,K,N[ee-1],W);default:if(ee>l.IXMAX_VAL)return W.bits=l.LARGE_BITS,-1;ee-=15;var ae;for(ae=24;ae<32&&!(o.ht[ae].linmax>=ee);ae++);var ve;for(ve=ae-8;ve<24&&!(o.ht[ve].linmax>=ee);ve++);return b(te,q,K,ve,ae,W)}}this.noquant_count_bits=function(te,q,K){var W=q.l3_enc,ee=Math.min(576,q.max_nonzero_coeff+2>>1<<1);for(K!=null&&(K.sfb_count1=0);ee>1&&!(W[ee-1]|W[ee-2]);ee-=2);q.count1=ee;for(var ae=0,ve=0;ee>3;ee-=4){var Ce;if(((W[ee-1]|W[ee-2]|W[ee-3]|W[ee-4])&2147483647)>1)break;Ce=((W[ee-4]*2+W[ee-3])*2+W[ee-2])*2+W[ee-1],ae+=o.t32l[Ce],ve+=o.t33l[Ce]}var ue=ae;if(q.count1table_select=0,ae>ve&&(ue=ve,q.count1table_select=1),q.count1bits=ue,q.big_values=ee,ee==0)return ue;if(q.block_type==r.SHORT_TYPE)ae=3*te.scalefac_band.s[3],ae>q.big_values&&(ae=q.big_values),ve=q.big_values;else if(q.block_type==r.NORM_TYPE){if(ae=q.region0_count=te.bv_scf[ee-2],ve=q.region1_count=te.bv_scf[ee-1],s(ae+ve+2<r.SBPSY_l),ve=te.scalefac_band.l[ae+ve+2],ae=te.scalefac_band.l[ae+1],ve<ee){var ge=new u(ue);q.table_select[2]=x(W,ve,ee,ge),ue=ge.bits}}else q.region0_count=7,q.region1_count=r.SBMAX_l-1-7-1,ae=te.scalefac_band.l[8],ve=ee,ae>ve&&(ae=ve);if(ae=Math.min(ae,ee),ve=Math.min(ve,ee),0<ae){var ge=new u(ue);q.table_select[0]=x(W,0,ae,ge),ue=ge.bits}if(ae<ve){var ge=new u(ue);q.table_select[1]=x(W,ae,ve,ge),ue=ge.bits}if(te.use_best_huffman==2&&(q.part2_3_length=ue,best_huffman_divide(te,q),ue=q.part2_3_length),K!=null&&q.block_type==r.NORM_TYPE){for(var Me=0;te.scalefac_band.l[Me]<q.big_values;)Me++;K.sfb_count1=Me}return ue},this.count_bits=function(te,q,K,W){var ee=K.l3_enc,ae=l.IXMAX_VAL/d.IPOW20(K.global_gain);if(K.xrpow_max>ae)return l.LARGE_BITS;if(E(q,ee,d.IPOW20(K.global_gain),K,W),te.substep_shaping&2)for(var ve=0,Ce=K.global_gain+K.scalefac_scale,ue=.634521682242439/d.IPOW20(Ce),ge=0;ge<K.sfbmax;ge++){var Me=K.width[ge];if(te.pseudohalf[ge]==0)ve+=Me;else{var We;for(We=ve,ve+=Me;We<ve;++We)ee[We]=q[We]>=ue?ee[We]:0}}return this.noquant_count_bits(te,K,W)};function R(te,q,K,W,ee,ae,ve){for(var Ce=q.big_values,ue=0;ue<=22;ue++)W[ue]=l.LARGE_BITS;for(var ue=0;ue<16;ue++){var ge=te.scalefac_band.l[ue+1];if(ge>=Ce)break;var Me=0,We=new u(Me),Ue=x(K,0,ge,We);Me=We.bits;for(var Re=0;Re<8;Re++){var Le=te.scalefac_band.l[ue+Re+2];if(Le>=Ce)break;var Xe=Me;We=new u(Xe);var et=x(K,ge,Le,We);Xe=We.bits,W[ue+Re]>Xe&&(W[ue+Re]=Xe,ee[ue+Re]=ue,ae[ue+Re]=Ue,ve[ue+Re]=et)}}}function M(te,q,K,W,ee,ae,ve,Ce){for(var ue=q.big_values,ge=2;ge<r.SBMAX_l+1;ge++){var Me=te.scalefac_band.l[ge];if(Me>=ue)break;var We=ee[ge-2]+q.count1bits;if(K.part2_3_length<=We)break;var Ue=new u(We),Re=x(W,Me,ue,Ue);We=Ue.bits,!(K.part2_3_length<=We)&&(K.assign(q),K.part2_3_length=We,K.region0_count=ae[ge-2],K.region1_count=ge-2-ae[ge-2],K.table_select[0]=ve[ge-2],K.table_select[1]=Ce[ge-2],K.table_select[2]=Re)}}this.best_huffman_divide=function(te,q){var K=new i,W=q.l3_enc,ee=e(23),ae=e(23),ve=e(23),Ce=e(23);if(!(q.block_type==r.SHORT_TYPE&&te.mode_gr==1)){K.assign(q),q.block_type==r.NORM_TYPE&&(R(te,q,W,ee,ae,ve,Ce),M(te,K,q,W,ee,ae,ve,Ce));var ue=K.big_values;if(!(ue==0||(W[ue-2]|W[ue-1])>1)&&(ue=q.count1+2,!(ue>576))){K.assign(q),K.count1=ue;for(var ge=0,Me=0;ue>K.big_values;ue-=4){var We=((W[ue-4]*2+W[ue-3])*2+W[ue-2])*2+W[ue-1];ge+=o.t32l[We],Me+=o.t33l[We]}if(K.big_values=ue,K.count1table_select=0,ge>Me&&(ge=Me,K.count1table_select=1),K.count1bits=ge,K.block_type==r.NORM_TYPE)M(te,K,q,W,ee,ae,ve,Ce);else{if(K.part2_3_length=ge,ge=te.scalefac_band.l[8],ge>ue&&(ge=ue),ge>0){var Ue=new u(K.part2_3_length);K.table_select[0]=x(W,0,ge,Ue),K.part2_3_length=Ue.bits}if(ue>ge){var Ue=new u(K.part2_3_length);K.table_select[1]=x(W,ge,ue,Ue),K.part2_3_length=Ue.bits}q.part2_3_length>K.part2_3_length&&q.assign(K)}}}};var w=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],D=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],B=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],k=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];c.slen1_tab=B,c.slen2_tab=k;function V(te,q){for(var K,W=q.tt[1][te],ee=q.tt[0][te],ae=0;ae<o.scfsi_band.length-1;ae++){for(K=o.scfsi_band[ae];K<o.scfsi_band[ae+1]&&!(ee.scalefac[K]!=W.scalefac[K]&&W.scalefac[K]>=0);K++);if(K==o.scfsi_band[ae+1]){for(K=o.scfsi_band[ae];K<o.scfsi_band[ae+1];K++)W.scalefac[K]=-1;q.scfsi[te][ae]=1}}var ve=0,Ce=0;for(K=0;K<11;K++)W.scalefac[K]!=-1&&(Ce++,ve<W.scalefac[K]&&(ve=W.scalefac[K]));for(var ue=0,ge=0;K<r.SBPSY_l;K++)W.scalefac[K]!=-1&&(ge++,ue<W.scalefac[K]&&(ue=W.scalefac[K]));for(var ae=0;ae<16;ae++)if(ve<w[ae]&&ue<D[ae]){var Me=B[ae]*Ce+k[ae]*ge;W.part2_length>Me&&(W.part2_length=Me,W.scalefac_compress=ae)}}this.best_scalefac_store=function(te,q,K,W){var ee=W.tt[q][K],ae,ve,Ce,ue,ge=0;for(Ce=0,ae=0;ae<ee.sfbmax;ae++){var Me=ee.width[ae];for(Ce+=Me,ue=-Me;ue<0&&ee.l3_enc[ue+Ce]==0;ue++);ue==0&&(ee.scalefac[ae]=ge=-2)}if(ee.scalefac_scale==0&&ee.preflag==0){var We=0;for(ae=0;ae<ee.sfbmax;ae++)ee.scalefac[ae]>0&&(We|=ee.scalefac[ae]);if(!(We&1)&&We!=0){for(ae=0;ae<ee.sfbmax;ae++)ee.scalefac[ae]>0&&(ee.scalefac[ae]>>=1);ee.scalefac_scale=ge=1}}if(ee.preflag==0&&ee.block_type!=r.SHORT_TYPE&&te.mode_gr==2){for(ae=11;ae<r.SBPSY_l&&!(ee.scalefac[ae]<d.pretab[ae]&&ee.scalefac[ae]!=-2);ae++);if(ae==r.SBPSY_l){for(ae=11;ae<r.SBPSY_l;ae++)ee.scalefac[ae]>0&&(ee.scalefac[ae]-=d.pretab[ae]);ee.preflag=ge=1}}for(ve=0;ve<4;ve++)W.scfsi[K][ve]=0;for(te.mode_gr==2&&q==1&&W.tt[0][K].block_type!=r.SHORT_TYPE&&W.tt[1][K].block_type!=r.SHORT_TYPE&&(V(K,W),ge=0),ae=0;ae<ee.sfbmax;ae++)ee.scalefac[ae]==-2&&(ee.scalefac[ae]=0);ge!=0&&(te.mode_gr==2?this.scale_bitcount(ee):this.scale_bitcount_lsf(te,ee))};function F(te,q){for(var K=0;K<q;++K)if(te[K]<0)return!1;return!0}var $=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],Y=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],j=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(te){var q,K,W=0,ee=0,ae,ve=te.scalefac;if(s(F(ve,te.sfbmax)),te.block_type==r.SHORT_TYPE)ae=$,te.mixed_block_flag!=0&&(ae=Y);else if(ae=j,te.preflag==0){for(K=11;K<r.SBPSY_l&&!(ve[K]<d.pretab[K]);K++);if(K==r.SBPSY_l)for(te.preflag=1,K=11;K<r.SBPSY_l;K++)ve[K]-=d.pretab[K]}for(K=0;K<te.sfbdivide;K++)W<ve[K]&&(W=ve[K]);for(;K<te.sfbmax;K++)ee<ve[K]&&(ee=ve[K]);for(te.part2_length=l.LARGE_BITS,q=0;q<16;q++)W<w[q]&&ee<D[q]&&te.part2_length>ae[q]&&(te.part2_length=ae[q],te.scalefac_compress=q);return te.part2_length==l.LARGE_BITS};var U=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(te,q){var K,W,ee,ae,ve,Ce,ue,ge,Me=e(4),We=q.scalefac;for(q.preflag!=0?K=2:K=0,ue=0;ue<4;ue++)Me[ue]=0;if(q.block_type==r.SHORT_TYPE){W=1;var Ue=d.nr_of_sfb_block[K][W];for(ge=0,ee=0;ee<4;ee++)for(ae=Ue[ee]/3,ue=0;ue<ae;ue++,ge++)for(ve=0;ve<3;ve++)We[ge*3+ve]>Me[ee]&&(Me[ee]=We[ge*3+ve])}else{W=0;var Ue=d.nr_of_sfb_block[K][W];for(ge=0,ee=0;ee<4;ee++)for(ae=Ue[ee],ue=0;ue<ae;ue++,ge++)We[ge]>Me[ee]&&(Me[ee]=We[ge])}for(Ce=!1,ee=0;ee<4;ee++)Me[ee]>U[K][ee]&&(Ce=!0);if(!Ce){var Re,Le,Xe,et;for(q.sfb_partition_table=d.nr_of_sfb_block[K][W],ee=0;ee<4;ee++)q.slen[ee]=J[Me[ee]];switch(Re=q.slen[0],Le=q.slen[1],Xe=q.slen[2],et=q.slen[3],K){case 0:q.scalefac_compress=(Re*5+Le<<4)+(Xe<<2)+et;break;case 1:q.scalefac_compress=400+(Re*5+Le<<2)+Xe;break;case 2:q.scalefac_compress=500+Re*3+Le;break;default:n.err.printf(`intensity stereo not implemented yet
`);break}}if(!Ce)for(s(q.sfb_partition_table!=null),q.part2_length=0,ee=0;ee<4;ee++)q.part2_length+=q.slen[ee]*q.sfb_partition_table[ee];return Ce};var J=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(te){for(var q=2;q<=576;q+=2){for(var K=0,W;te.scalefac_band.l[++K]<q;);for(W=m[K][0];te.scalefac_band.l[W+1]>q;)W--;for(W<0&&(W=m[K][0]),te.bv_scf[q-2]=W,W=m[K][1];te.scalefac_band.l[W+te.bv_scf[q-2]+2]>q;)W--;W<0&&(W=m[K][1]),te.bv_scf[q-1]=W}}}return Mb=c,Mb}var Lb,BO;function A1(){if(BO)return Lb;BO=1;var t=_a,n=t.System,a=t.Arrays,e=t.new_byte,s=t.new_float_n,r=t.new_int,o=t.assert,i=RD(),l=T1,c=Ts(),d=o_;u.EQ=function(m,h){return Math.abs(m)>Math.abs(h)?Math.abs(m-h)<=Math.abs(m)*1e-6:Math.abs(m-h)<=Math.abs(h)*1e-6},u.NEQ=function(m,h){return!u.EQ(m,h)};function u(){var m=y1(),h=this,_=32773,E=null,y=null,b=null,A=null;this.setModules=function(q,K,W,ee){E=q,y=K,b=W,A=ee};var T=null,I=0,N=0,x=0;this.getframebits=function(q){var K=q.internal_flags,W;K.bitrate_index!=0?W=l.bitrate_table[q.version][K.bitrate_index]:W=q.brate;var ee=0|(q.version+1)*72e3*W/q.out_samplerate+K.padding;return 8*ee};function R(q){n.arraycopy(q.header[q.w_ptr].buf,0,T,N,q.sideinfo_len),N+=q.sideinfo_len,I+=q.sideinfo_len*8,q.w_ptr=q.w_ptr+1&d.MAX_HEADER_BUF-1}function M(q,K,W){for(;W>0;){var ee;x==0&&(x=8,N++,o(N<m.LAME_MAXMP3BUFFER),o(q.header[q.w_ptr].write_timing>=I),q.header[q.w_ptr].write_timing==I&&R(q),T[N]=0),ee=Math.min(W,x),W-=ee,x-=ee,T[N]|=K>>W<<x,I+=ee}}function w(q,K,W){for(;W>0;){var ee;x==0&&(x=8,N++,o(N<m.LAME_MAXMP3BUFFER),T[N]=0),ee=Math.min(W,x),W-=ee,x-=ee,T[N]|=K>>W<<x,I+=ee}}function D(q,K){var W=q.internal_flags,ee;if(K>=8&&(M(W,76,8),K-=8),K>=8&&(M(W,65,8),K-=8),K>=8&&(M(W,77,8),K-=8),K>=8&&(M(W,69,8),K-=8),K>=32){var ae=b.getLameShortVersion();if(K>=32)for(ee=0;ee<ae.length&&K>=8;++ee)K-=8,M(W,ae.charAt(ee),8)}for(;K>=1;K-=1)M(W,W.ancillary_flag,1),W.ancillary_flag^=q.disable_reservoir?0:1}function B(q,K,W){for(var ee=q.header[q.h_ptr].ptr;W>0;){var ae=Math.min(W,8-(ee&7));W-=ae,q.header[q.h_ptr].buf[ee>>3]|=K>>W<<8-(ee&7)-ae,ee+=ae}q.header[q.h_ptr].ptr=ee}function k(q,K){q<<=8;for(var W=0;W<8;W++)q<<=1,K<<=1,(K^q)&65536&&(K^=_);return K}this.CRC_writeheader=function(q,K){var W=65535;W=k(K[2]&255,W),W=k(K[3]&255,W);for(var ee=6;ee<q.sideinfo_len;ee++)W=k(K[ee]&255,W);K[4]=byte(W>>8),K[5]=byte(W&255)};function V(q,K){var W=q.internal_flags,ee,ae,ve;if(ee=W.l3_side,W.header[W.h_ptr].ptr=0,a.fill(W.header[W.h_ptr].buf,0,W.sideinfo_len,0),q.out_samplerate<16e3?B(W,4094,12):B(W,4095,12),B(W,q.version,1),B(W,1,2),B(W,q.error_protection?0:1,1),B(W,W.bitrate_index,4),B(W,W.samplerate_index,2),B(W,W.padding,1),B(W,q.extension,1),B(W,q.mode.ordinal(),2),B(W,W.mode_ext,2),B(W,q.copyright,1),B(W,q.original,1),B(W,q.emphasis,2),q.error_protection&&B(W,0,16),q.version==1){for(o(ee.main_data_begin>=0),B(W,ee.main_data_begin,9),W.channels_out==2?B(W,ee.private_bits,3):B(W,ee.private_bits,5),ve=0;ve<W.channels_out;ve++){var Ce;for(Ce=0;Ce<4;Ce++)B(W,ee.scfsi[ve][Ce],1)}for(ae=0;ae<2;ae++)for(ve=0;ve<W.channels_out;ve++){var ue=ee.tt[ae][ve];B(W,ue.part2_3_length+ue.part2_length,12),B(W,ue.big_values/2,9),B(W,ue.global_gain,8),B(W,ue.scalefac_compress,4),ue.block_type!=c.NORM_TYPE?(B(W,1,1),B(W,ue.block_type,2),B(W,ue.mixed_block_flag,1),ue.table_select[0]==14&&(ue.table_select[0]=16),B(W,ue.table_select[0],5),ue.table_select[1]==14&&(ue.table_select[1]=16),B(W,ue.table_select[1],5),B(W,ue.subblock_gain[0],3),B(W,ue.subblock_gain[1],3),B(W,ue.subblock_gain[2],3)):(B(W,0,1),ue.table_select[0]==14&&(ue.table_select[0]=16),B(W,ue.table_select[0],5),ue.table_select[1]==14&&(ue.table_select[1]=16),B(W,ue.table_select[1],5),ue.table_select[2]==14&&(ue.table_select[2]=16),B(W,ue.table_select[2],5),o(0<=ue.region0_count&&ue.region0_count<16),o(0<=ue.region1_count&&ue.region1_count<8),B(W,ue.region0_count,4),B(W,ue.region1_count,3)),B(W,ue.preflag,1),B(W,ue.scalefac_scale,1),B(W,ue.count1table_select,1)}}else for(o(ee.main_data_begin>=0),B(W,ee.main_data_begin,8),B(W,ee.private_bits,W.channels_out),ae=0,ve=0;ve<W.channels_out;ve++){var ue=ee.tt[ae][ve];B(W,ue.part2_3_length+ue.part2_length,12),B(W,ue.big_values/2,9),B(W,ue.global_gain,8),B(W,ue.scalefac_compress,9),ue.block_type!=c.NORM_TYPE?(B(W,1,1),B(W,ue.block_type,2),B(W,ue.mixed_block_flag,1),ue.table_select[0]==14&&(ue.table_select[0]=16),B(W,ue.table_select[0],5),ue.table_select[1]==14&&(ue.table_select[1]=16),B(W,ue.table_select[1],5),B(W,ue.subblock_gain[0],3),B(W,ue.subblock_gain[1],3),B(W,ue.subblock_gain[2],3)):(B(W,0,1),ue.table_select[0]==14&&(ue.table_select[0]=16),B(W,ue.table_select[0],5),ue.table_select[1]==14&&(ue.table_select[1]=16),B(W,ue.table_select[1],5),ue.table_select[2]==14&&(ue.table_select[2]=16),B(W,ue.table_select[2],5),o(0<=ue.region0_count&&ue.region0_count<16),o(0<=ue.region1_count&&ue.region1_count<8),B(W,ue.region0_count,4),B(W,ue.region1_count,3)),B(W,ue.scalefac_scale,1),B(W,ue.count1table_select,1)}q.error_protection&&CRC_writeheader(W,W.header[W.h_ptr].buf);{var ge=W.h_ptr;o(W.header[ge].ptr==W.sideinfo_len*8),W.h_ptr=ge+1&d.MAX_HEADER_BUF-1,W.header[W.h_ptr].write_timing=W.header[ge].write_timing+K,W.h_ptr==W.w_ptr&&n.err.println(`Error: MAX_HEADER_BUF too small in bitstream.c 
`)}}function F(q,K){var W=l.ht[K.count1table_select+32],ee,ae=0,ve=K.big_values,Ce=K.big_values;for(o(K.count1table_select<2),ee=(K.count1-K.big_values)/4;ee>0;--ee){var ue=0,ge=0,Me;Me=K.l3_enc[ve+0],Me!=0&&(ge+=8,K.xr[Ce+0]<0&&ue++),Me=K.l3_enc[ve+1],Me!=0&&(ge+=4,ue*=2,K.xr[Ce+1]<0&&ue++),Me=K.l3_enc[ve+2],Me!=0&&(ge+=2,ue*=2,K.xr[Ce+2]<0&&ue++),Me=K.l3_enc[ve+3],Me!=0&&(ge++,ue*=2,K.xr[Ce+3]<0&&ue++),ve+=4,Ce+=4,M(q,ue+W.table[ge],W.hlen[ge]),ae+=W.hlen[ge]}return ae}function $(q,K,W,ee,ae){var ve=l.ht[K],Ce=0;if(K==0)return Ce;for(var ue=W;ue<ee;ue+=2){var ge=0,Me=0,We=ve.xlen,Ue=ve.xlen,Re=0,Le=ae.l3_enc[ue],Xe=ae.l3_enc[ue+1];if(Le!=0&&(ae.xr[ue]<0&&Re++,ge--),K>15){if(Le>14){var et=Le-15;o(et<=ve.linmax),Re|=et<<1,Me=We,Le=15}if(Xe>14){var yt=Xe-15;o(yt<=ve.linmax),Re<<=We,Re|=yt,Me+=We,Xe=15}Ue=16}Xe!=0&&(Re<<=1,ae.xr[ue+1]<0&&Re++,ge--),Le=Le*Ue+Xe,Me-=ge,ge+=ve.hlen[Le],M(q,ve.table[Le],ge),M(q,Re,Me),Ce+=ge+Me}return Ce}function Y(q,K){var W=3*q.scalefac_band.s[3];W>K.big_values&&(W=K.big_values);var ee=$(q,K.table_select[0],0,W,K);return ee+=$(q,K.table_select[1],W,K.big_values,K),ee}function j(q,K){var W,ee,ae,ve;W=K.big_values;var Ce=K.region0_count+1;return o(Ce<q.scalefac_band.l.length),ae=q.scalefac_band.l[Ce],Ce+=K.region1_count+1,o(Ce<q.scalefac_band.l.length),ve=q.scalefac_band.l[Ce],ae>W&&(ae=W),ve>W&&(ve=W),ee=$(q,K.table_select[0],0,ae,K),ee+=$(q,K.table_select[1],ae,ve,K),ee+=$(q,K.table_select[2],ve,W,K),ee}function U(q){var K,W,ee,ae,ve=0,Ce=q.internal_flags,ue=Ce.l3_side;if(q.version==1)for(K=0;K<2;K++)for(W=0;W<Ce.channels_out;W++){var ge=ue.tt[K][W],Me=i.slen1_tab[ge.scalefac_compress],We=i.slen2_tab[ge.scalefac_compress];for(ae=0,ee=0;ee<ge.sfbdivide;ee++)ge.scalefac[ee]!=-1&&(M(Ce,ge.scalefac[ee],Me),ae+=Me);for(;ee<ge.sfbmax;ee++)ge.scalefac[ee]!=-1&&(M(Ce,ge.scalefac[ee],We),ae+=We);o(ae==ge.part2_length),ge.block_type==c.SHORT_TYPE?ae+=Y(Ce,ge):ae+=j(Ce,ge),ae+=F(Ce,ge),o(ae==ge.part2_3_length+ge.part2_length),ve+=ae}else for(K=0,W=0;W<Ce.channels_out;W++){var ge=ue.tt[K][W],Ue,Re,Le=0;if(o(ge.sfb_partition_table!=null),ae=0,ee=0,Re=0,ge.block_type==c.SHORT_TYPE){for(;Re<4;Re++){var Xe=ge.sfb_partition_table[Re]/3,et=ge.slen[Re];for(Ue=0;Ue<Xe;Ue++,ee++)M(Ce,Math.max(ge.scalefac[ee*3+0],0),et),M(Ce,Math.max(ge.scalefac[ee*3+1],0),et),M(Ce,Math.max(ge.scalefac[ee*3+2],0),et),Le+=3*et}ae+=Y(Ce,ge)}else{for(;Re<4;Re++){var Xe=ge.sfb_partition_table[Re],et=ge.slen[Re];for(Ue=0;Ue<Xe;Ue++,ee++)M(Ce,Math.max(ge.scalefac[ee],0),et),Le+=et}ae+=j(Ce,ge)}ae+=F(Ce,ge),o(ae==ge.part2_3_length),o(Le==ge.part2_length),ve+=Le+ae}return ve}function J(){this.total=0}function te(q,K){var W=q.internal_flags,ee,ae,ve,Ce,ue;return ue=W.w_ptr,Ce=W.h_ptr-1,Ce==-1&&(Ce=d.MAX_HEADER_BUF-1),ee=W.header[Ce].write_timing-I,K.total=ee,ee>=0&&(ae=1+Ce-ue,Ce<ue&&(ae=1+Ce-ue+d.MAX_HEADER_BUF),ee-=ae*8*W.sideinfo_len),ve=h.getframebits(q),ee+=ve,K.total+=ve,K.total%8!=0?K.total=1+K.total/8:K.total=K.total/8,K.total+=N+1,ee<0&&n.err.println(`strange error flushing buffer ... 
`),ee}this.flush_bitstream=function(q){var K=q.internal_flags,W,ee,ae=K.h_ptr-1;if(ae==-1&&(ae=d.MAX_HEADER_BUF-1),W=K.l3_side,!((ee=te(q,new J))<0)){if(D(q,ee),o(K.header[ae].write_timing+this.getframebits(q)==I),K.ResvSize=0,W.main_data_begin=0,K.findReplayGain){var ve=E.GetTitleGain(K.rgdata);o(NEQ(ve,GainAnalysis.GAIN_NOT_ENOUGH_SAMPLES)),K.RadioGain=Math.floor(ve*10+.5)|0}K.findPeakSample&&(K.noclipGainChange=Math.ceil(Math.log10(K.PeakSample/32767)*20*10)|0,K.noclipGainChange>0&&(EQ(q.scale,1)||EQ(q.scale,0))?K.noclipScale=Math.floor(32767/K.PeakSample*100)/100:K.noclipScale=-1)}},this.add_dummy_byte=function(q,K,W){for(var ee=q.internal_flags,ae;W-- >0;)for(w(ee,K,8),ae=0;ae<d.MAX_HEADER_BUF;++ae)ee.header[ae].write_timing+=8},this.format_bitstream=function(q){var K=q.internal_flags,W;W=K.l3_side;var ee=this.getframebits(q);D(q,W.resvDrain_pre),V(q,ee);var ae=8*K.sideinfo_len;if(ae+=U(q),D(q,W.resvDrain_post),ae+=W.resvDrain_post,W.main_data_begin+=(ee-ae)/8,te(q,new J)!=K.ResvSize&&n.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),W.main_data_begin*8!=K.ResvSize&&(n.err.printf(`bit reservoir error: 
l3_side.main_data_begin: %d 
Resvoir size:             %d 
resv drain (post)         %d 
resv drain (pre)          %d 
header and sideinfo:      %d 
data bits:                %d 
total bits:               %d (remainder: %d) 
bitsperframe:             %d 
`,8*W.main_data_begin,K.ResvSize,W.resvDrain_post,W.resvDrain_pre,8*K.sideinfo_len,ae-W.resvDrain_post-8*K.sideinfo_len,ae,ae%8,ee),n.err.println("This is a fatal error.  It has several possible causes:"),n.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),n.err.println(" 9%%  Your system is overclocked"),n.err.println(" 1%%  bug in LAME encoding library"),K.ResvSize=W.main_data_begin*8),I>1e9){var ve;for(ve=0;ve<d.MAX_HEADER_BUF;++ve)K.header[ve].write_timing-=I;I=0}return 0},this.copy_buffer=function(q,K,W,ee,ae){var ve=N+1;if(ve<=0)return 0;if(ee!=0&&ve>ee)return-1;if(n.arraycopy(T,0,K,W,ve),N=-1,x=0,ae!=0){var Ce=r(1);if(Ce[0]=q.nMusicCRC,A.updateMusicCRC(Ce,K,W,ve),q.nMusicCRC=Ce[0],ve>0&&(q.VBR_seek_table.nBytesWritten+=ve),q.decode_on_the_fly){for(var ue=s([2,1152]),ge=ve,Me=-1,We;Me!=0;)if(Me=y.hip_decode1_unclipped(q.hip,K,W,ge,ue[0],ue[1]),ge=0,Me==-1&&(Me=0),Me>0){if(q.findPeakSample){for(We=0;We<Me;We++)ue[0][We]>q.PeakSample?q.PeakSample=ue[0][We]:-ue[0][We]>q.PeakSample&&(q.PeakSample=-ue[0][We]);if(q.channels_out>1)for(We=0;We<Me;We++)ue[1][We]>q.PeakSample?q.PeakSample=ue[1][We]:-ue[1][We]>q.PeakSample&&(q.PeakSample=-ue[1][We])}if(q.findReplayGain&&E.AnalyzeSamples(q.rgdata,ue[0],0,ue[1],0,Me,q.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6}}}return ve},this.init_bit_stream_w=function(q){T=e(m.LAME_MAXMP3BUFFER),q.h_ptr=q.w_ptr=0,q.header[q.h_ptr].write_timing=0,N=-1,x=0,I=0}}return Lb=u,Lb}var Db,FO;function y1(){if(FO)return Db;FO=1;var t=_a,n=t.System,a=t.VbrMode,e=t.ShortBlock,s=t.new_float,r=t.new_int_n,o=t.new_short_n,i=t.assert,l=uYe,c=mYe,d=o_,u=FYe,m=$Ye,h=YYe,_=A1(),E=T1,y=Ts();function b(){var A=_p,T=this,I=128*1024;b.V9=410,b.V8=420,b.V7=430,b.V6=440,b.V5=450,b.V4=460,b.V3=470,b.V2=480,b.V1=490,b.V0=500,b.R3MIX=1e3,b.STANDARD=1001,b.EXTREME=1002,b.INSANE=1003,b.STANDARD_FAST=1004,b.EXTREME_FAST=1005,b.MEDIUM=1006,b.MEDIUM_FAST=1007;var N=16384+I;b.LAME_MAXMP3BUFFER=N;var x,R,M,w,D,B=new l,k,V,F;this.enc=new y,this.setModules=function(X,se,ie,fe,me,De,Ye,ze,He){x=X,R=se,M=ie,w=fe,D=me,k=De,V=ze,F=He,this.enc.setModules(R,B,w,k)};function $(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=s(y.SBMAX_l),this.bo_s_weight=s(y.SBMAX_s)}function Y(){this.lowerlimit=0}function j(X,se){this.lowpass=se}var U=4294479419;function J(X){var se;return X.class_id=U,se=X.internal_flags=new d,X.mode=A.NOT_SET,X.original=1,X.in_samplerate=44100,X.num_channels=2,X.num_samples=-1,X.bWriteVbrTag=!0,X.quality=-1,X.short_blocks=null,se.subblock_gain=-1,X.lowpassfreq=0,X.highpassfreq=0,X.lowpasswidth=-1,X.highpasswidth=-1,X.VBR=a.vbr_off,X.VBR_q=4,X.ATHcurve=-1,X.VBR_mean_bitrate_kbps=128,X.VBR_min_bitrate_kbps=0,X.VBR_max_bitrate_kbps=0,X.VBR_hard_min=0,se.VBR_min_bitrate=1,se.VBR_max_bitrate=13,X.quant_comp=-1,X.quant_comp_short=-1,X.msfix=-1,se.resample_ratio=1,se.OldValue[0]=180,se.OldValue[1]=180,se.CurrentStep[0]=4,se.CurrentStep[1]=4,se.masking_lower=1,se.nsPsy.attackthre=-1,se.nsPsy.attackthre_s=-1,X.scale=-1,X.athaa_type=-1,X.ATHtype=-1,X.athaa_loudapprox=-1,X.athaa_sensitivity=0,X.useTemporal=null,X.interChRatio=-1,se.mf_samples_to_encode=y.ENCDELAY+y.POSTDELAY,X.encoder_padding=0,se.mf_size=y.ENCDELAY-y.MDCTDELAY,X.findReplayGain=!1,X.decode_on_the_fly=!1,se.decode_on_the_fly=!1,se.findReplayGain=!1,se.findPeakSample=!1,se.RadioGain=0,se.AudiophileGain=0,se.noclipGainChange=0,se.noclipScale=-1,X.preset=0,X.write_id3tag_automatic=!0,0}this.lame_init=function(){var X=new c;return J(X),X.lame_allocated_gfp=1,X};function te(X){return X>1?0:X<=0?1:Math.cos(Math.PI/2*X)}this.nearestBitrateFullIndex=function(X){var se=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],ie=0,fe=0,me=0,De=0;De=se[16],me=16,fe=se[16],ie=16;for(var Ye=0;Ye<16;Ye++)if(Math.max(X,se[Ye+1])!=X){De=se[Ye+1],me=Ye+1,fe=se[Ye],ie=Ye;break}return De-X>X-fe?ie:me};function q(X,se){var ie=44100;return se>=48e3?ie=48e3:se>=44100?ie=44100:se>=32e3?ie=32e3:se>=24e3?ie=24e3:se>=22050?ie=22050:se>=16e3?ie=16e3:se>=12e3?ie=12e3:se>=11025?ie=11025:se>=8e3&&(ie=8e3),X==-1?ie:(X<=15960&&(ie=44100),X<=15250&&(ie=32e3),X<=11220&&(ie=24e3),X<=9970&&(ie=22050),X<=7230&&(ie=16e3),X<=5420&&(ie=12e3),X<=4510&&(ie=11025),X<=3970&&(ie=8e3),se<ie?se>44100?48e3:se>32e3?44100:se>24e3?32e3:se>22050?24e3:se>16e3?22050:se>12e3?16e3:se>11025?12e3:se>8e3?11025:8e3:ie)}function K(X,se){switch(X){case 44100:return se.version=1,0;case 48e3:return se.version=1,1;case 32e3:return se.version=1,2;case 22050:return se.version=0,0;case 24e3:return se.version=0,1;case 16e3:return se.version=0,2;case 11025:return se.version=0,0;case 12e3:return se.version=0,1;case 8e3:return se.version=0,2;default:return se.version=0,-1}}function W(X,se,ie){ie<16e3&&(se=2);for(var fe=E.bitrate_table[se][1],me=2;me<=14;me++)E.bitrate_table[se][me]>0&&Math.abs(E.bitrate_table[se][me]-X)<Math.abs(fe-X)&&(fe=E.bitrate_table[se][me]);return fe}function ee(X,se,ie){ie<16e3&&(se=2);for(var fe=0;fe<=14;fe++)if(E.bitrate_table[se][fe]>0&&E.bitrate_table[se][fe]==X)return fe;return-1}function ae(X,se){var ie=[new j(8,2e3),new j(16,3700),new j(24,3900),new j(32,5500),new j(40,7e3),new j(48,7500),new j(56,1e4),new j(64,11e3),new j(80,13500),new j(96,15100),new j(112,15600),new j(128,17e3),new j(160,17500),new j(192,18600),new j(224,19400),new j(256,19700),new j(320,20500)],fe=T.nearestBitrateFullIndex(se);X.lowerlimit=ie[fe].lowpass}function ve(X){var se=X.internal_flags,ie=32,fe=-1;if(se.lowpass1>0){for(var me=999,De=0;De<=31;De++){var Ye=De/31;Ye>=se.lowpass2&&(ie=Math.min(ie,De)),se.lowpass1<Ye&&Ye<se.lowpass2&&(me=Math.min(me,De))}me==999?se.lowpass1=(ie-.75)/31:se.lowpass1=(me-.75)/31,se.lowpass2=ie/31}if(se.highpass2>0&&se.highpass2<.9*(.75/31)&&(se.highpass1=0,se.highpass2=0,n.err.println(`Warning: highpass filter disabled.  highpass frequency too small
`)),se.highpass2>0){for(var ze=-1,De=0;De<=31;De++){var Ye=De/31;Ye<=se.highpass1&&(fe=Math.max(fe,De)),se.highpass1<Ye&&Ye<se.highpass2&&(ze=Math.max(ze,De))}se.highpass1=fe/31,ze==-1?se.highpass2=(fe+.75)/31:se.highpass2=(ze+.75)/31}for(var De=0;De<32;De++){var He,xe,Ye=De/31;se.highpass2>se.highpass1?He=te((se.highpass2-Ye)/(se.highpass2-se.highpass1+1e-20)):He=1,se.lowpass2>se.lowpass1?xe=te((Ye-se.lowpass1)/(se.lowpass2-se.lowpass1+1e-20)):xe=1,se.amp_filter[De]=He*xe}}function Ce(X){var se=X.internal_flags;switch(X.quality){default:case 9:se.psymodel=0,se.noise_shaping=0,se.noise_shaping_amp=0,se.noise_shaping_stop=0,se.use_best_huffman=0,se.full_outer_loop=0;break;case 8:X.quality=7;case 7:se.psymodel=1,se.noise_shaping=0,se.noise_shaping_amp=0,se.noise_shaping_stop=0,se.use_best_huffman=0,se.full_outer_loop=0;break;case 6:se.psymodel=1,se.noise_shaping==0&&(se.noise_shaping=1),se.noise_shaping_amp=0,se.noise_shaping_stop=0,se.subblock_gain==-1&&(se.subblock_gain=1),se.use_best_huffman=0,se.full_outer_loop=0;break;case 5:se.psymodel=1,se.noise_shaping==0&&(se.noise_shaping=1),se.noise_shaping_amp=0,se.noise_shaping_stop=0,se.subblock_gain==-1&&(se.subblock_gain=1),se.use_best_huffman=0,se.full_outer_loop=0;break;case 4:se.psymodel=1,se.noise_shaping==0&&(se.noise_shaping=1),se.noise_shaping_amp=0,se.noise_shaping_stop=0,se.subblock_gain==-1&&(se.subblock_gain=1),se.use_best_huffman=1,se.full_outer_loop=0;break;case 3:se.psymodel=1,se.noise_shaping==0&&(se.noise_shaping=1),se.noise_shaping_amp=1,se.noise_shaping_stop=1,se.subblock_gain==-1&&(se.subblock_gain=1),se.use_best_huffman=1,se.full_outer_loop=0;break;case 2:se.psymodel=1,se.noise_shaping==0&&(se.noise_shaping=1),se.substep_shaping==0&&(se.substep_shaping=2),se.noise_shaping_amp=1,se.noise_shaping_stop=1,se.subblock_gain==-1&&(se.subblock_gain=1),se.use_best_huffman=1,se.full_outer_loop=0;break;case 1:se.psymodel=1,se.noise_shaping==0&&(se.noise_shaping=1),se.substep_shaping==0&&(se.substep_shaping=2),se.noise_shaping_amp=2,se.noise_shaping_stop=1,se.subblock_gain==-1&&(se.subblock_gain=1),se.use_best_huffman=1,se.full_outer_loop=0;break;case 0:se.psymodel=1,se.noise_shaping==0&&(se.noise_shaping=1),se.substep_shaping==0&&(se.substep_shaping=2),se.noise_shaping_amp=2,se.noise_shaping_stop=1,se.subblock_gain==-1&&(se.subblock_gain=1),se.use_best_huffman=1,se.full_outer_loop=0;break}}function ue(X){var se=X.internal_flags;X.frameNum=0,X.write_id3tag_automatic&&V.id3tag_write_v2(X),se.bitrate_stereoMode_Hist=r([16,5]),se.bitrate_blockType_Hist=r([16,6]),se.PeakSample=0,X.bWriteVbrTag&&k.InitVbrTag(X)}this.lame_init_params=function(X){var se=X.internal_flags;if(se.Class_ID=0,se.ATH==null&&(se.ATH=new u),se.PSY==null&&(se.PSY=new $),se.rgdata==null&&(se.rgdata=new m),se.channels_in=X.num_channels,se.channels_in==1&&(X.mode=A.MONO),se.channels_out=X.mode==A.MONO?1:2,se.mode_ext=y.MPG_MD_MS_LR,X.mode==A.MONO&&(X.force_ms=!1),X.VBR==a.vbr_off&&X.VBR_mean_bitrate_kbps!=128&&X.brate==0&&(X.brate=X.VBR_mean_bitrate_kbps),X.VBR==a.vbr_off||X.VBR==a.vbr_mtrh||X.VBR==a.vbr_mt||(X.free_format=!1),X.VBR==a.vbr_off&&X.brate==0&&_.EQ(X.compression_ratio,0)&&(X.compression_ratio=11.025),X.VBR==a.vbr_off&&X.compression_ratio>0&&(X.out_samplerate==0&&(X.out_samplerate=map2MP3Frequency(int(.97*X.in_samplerate))),X.brate=0|X.out_samplerate*16*se.channels_out/(1e3*X.compression_ratio),se.samplerate_index=K(X.out_samplerate,X),X.free_format||(X.brate=W(X.brate,X.version,X.out_samplerate))),X.out_samplerate!=0&&(X.out_samplerate<16e3?(X.VBR_mean_bitrate_kbps=Math.max(X.VBR_mean_bitrate_kbps,8),X.VBR_mean_bitrate_kbps=Math.min(X.VBR_mean_bitrate_kbps,64)):X.out_samplerate<32e3?(X.VBR_mean_bitrate_kbps=Math.max(X.VBR_mean_bitrate_kbps,8),X.VBR_mean_bitrate_kbps=Math.min(X.VBR_mean_bitrate_kbps,160)):(X.VBR_mean_bitrate_kbps=Math.max(X.VBR_mean_bitrate_kbps,32),X.VBR_mean_bitrate_kbps=Math.min(X.VBR_mean_bitrate_kbps,320))),X.lowpassfreq==0){var ie=16e3;switch(X.VBR){case a.vbr_off:{var fe=new Y;ae(fe,X.brate),ie=fe.lowerlimit;break}case a.vbr_abr:{var fe=new Y;ae(fe,X.VBR_mean_bitrate_kbps),ie=fe.lowerlimit;break}case a.vbr_rh:{var me=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=X.VBR_q&&X.VBR_q<=9){var De=me[X.VBR_q],Ye=me[X.VBR_q+1],ze=X.VBR_q_frac;ie=linear_int(De,Ye,ze)}else ie=19500;break}default:{var me=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(0<=X.VBR_q&&X.VBR_q<=9){var De=me[X.VBR_q],Ye=me[X.VBR_q+1],ze=X.VBR_q_frac;ie=linear_int(De,Ye,ze)}else ie=19500}}X.mode==A.MONO&&(X.VBR==a.vbr_off||X.VBR==a.vbr_abr)&&(ie*=1.5),X.lowpassfreq=ie|0}if(X.out_samplerate==0&&(2*X.lowpassfreq>X.in_samplerate&&(X.lowpassfreq=X.in_samplerate/2),X.out_samplerate=q(X.lowpassfreq|0,X.in_samplerate)),X.lowpassfreq=Math.min(20500,X.lowpassfreq),X.lowpassfreq=Math.min(X.out_samplerate/2,X.lowpassfreq),X.VBR==a.vbr_off&&(X.compression_ratio=X.out_samplerate*16*se.channels_out/(1e3*X.brate)),X.VBR==a.vbr_abr&&(X.compression_ratio=X.out_samplerate*16*se.channels_out/(1e3*X.VBR_mean_bitrate_kbps)),X.bWriteVbrTag||(X.findReplayGain=!1,X.decode_on_the_fly=!1,se.findPeakSample=!1),se.findReplayGain=X.findReplayGain,se.decode_on_the_fly=X.decode_on_the_fly,se.decode_on_the_fly&&(se.findPeakSample=!0),se.findReplayGain&&x.InitGainAnalysis(se.rgdata,X.out_samplerate)==GainAnalysis.INIT_GAIN_ANALYSIS_ERROR)return X.internal_flags=null,-6;switch(se.decode_on_the_fly&&!X.decode_only&&(se.hip!=null&&F.hip_decode_exit(se.hip),se.hip=F.hip_decode_init()),se.mode_gr=X.out_samplerate<=24e3?1:2,X.framesize=576*se.mode_gr,X.encoder_delay=y.ENCDELAY,se.resample_ratio=X.in_samplerate/X.out_samplerate,X.VBR){case a.vbr_mt:case a.vbr_rh:case a.vbr_mtrh:{var He=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];X.compression_ratio=He[X.VBR_q]}break;case a.vbr_abr:X.compression_ratio=X.out_samplerate*16*se.channels_out/(1e3*X.VBR_mean_bitrate_kbps);break;default:X.compression_ratio=X.out_samplerate*16*se.channels_out/(1e3*X.brate);break}if(X.mode==A.NOT_SET&&(X.mode=A.JOINT_STEREO),X.highpassfreq>0?(se.highpass1=2*X.highpassfreq,X.highpasswidth>=0?se.highpass2=2*(X.highpassfreq+X.highpasswidth):se.highpass2=1*2*X.highpassfreq,se.highpass1/=X.out_samplerate,se.highpass2/=X.out_samplerate):(se.highpass1=0,se.highpass2=0),X.lowpassfreq>0?(se.lowpass2=2*X.lowpassfreq,X.lowpasswidth>=0?(se.lowpass1=2*(X.lowpassfreq-X.lowpasswidth),se.lowpass1<0&&(se.lowpass1=0)):se.lowpass1=1*2*X.lowpassfreq,se.lowpass1/=X.out_samplerate,se.lowpass2/=X.out_samplerate):(se.lowpass1=0,se.lowpass2=0),ve(X),se.samplerate_index=K(X.out_samplerate,X),se.samplerate_index<0)return X.internal_flags=null,-1;if(X.VBR==a.vbr_off){if(X.free_format)se.bitrate_index=0;else if(X.brate=W(X.brate,X.version,X.out_samplerate),se.bitrate_index=ee(X.brate,X.version,X.out_samplerate),se.bitrate_index<=0)return X.internal_flags=null,-1}else se.bitrate_index=1;X.analysis&&(X.bWriteVbrTag=!1),se.pinfo!=null&&(X.bWriteVbrTag=!1),R.init_bit_stream_w(se);for(var xe=se.samplerate_index+3*X.version+6*(X.out_samplerate<16e3?1:0),pe=0;pe<y.SBMAX_l+1;pe++)se.scalefac_band.l[pe]=w.sfBandIndex[xe].l[pe];for(var pe=0;pe<y.PSFB21+1;pe++){var ye=(se.scalefac_band.l[22]-se.scalefac_band.l[21])/y.PSFB21,Be=se.scalefac_band.l[21]+pe*ye;se.scalefac_band.psfb21[pe]=Be}se.scalefac_band.psfb21[y.PSFB21]=576;for(var pe=0;pe<y.SBMAX_s+1;pe++)se.scalefac_band.s[pe]=w.sfBandIndex[xe].s[pe];for(var pe=0;pe<y.PSFB12+1;pe++){var ye=(se.scalefac_band.s[13]-se.scalefac_band.s[12])/y.PSFB12,Be=se.scalefac_band.s[12]+pe*ye;se.scalefac_band.psfb12[pe]=Be}se.scalefac_band.psfb12[y.PSFB12]=192,X.version==1?se.sideinfo_len=se.channels_out==1?21:36:se.sideinfo_len=se.channels_out==1?13:21,X.error_protection&&(se.sideinfo_len+=2),ue(X),se.Class_ID=U;{var ne;for(ne=0;ne<19;ne++)se.nsPsy.pefirbuf[ne]=700*se.mode_gr*se.channels_out;X.ATHtype==-1&&(X.ATHtype=4)}switch(i(X.VBR_q<=9),i(X.VBR_q>=0),X.VBR){case a.vbr_mt:X.VBR=a.vbr_mtrh;case a.vbr_mtrh:{X.useTemporal==null&&(X.useTemporal=!1),M.apply_preset(X,500-X.VBR_q*10,0),X.quality<0&&(X.quality=LAME_DEFAULT_QUALITY),X.quality<5&&(X.quality=0),X.quality>5&&(X.quality=5),se.PSY.mask_adjust=X.maskingadjust,se.PSY.mask_adjust_short=X.maskingadjust_short,X.experimentalY?se.sfb21_extra=!1:se.sfb21_extra=X.out_samplerate>44e3,se.iteration_loop=new VBRNewIterationLoop(D);break}case a.vbr_rh:{M.apply_preset(X,500-X.VBR_q*10,0),se.PSY.mask_adjust=X.maskingadjust,se.PSY.mask_adjust_short=X.maskingadjust_short,X.experimentalY?se.sfb21_extra=!1:se.sfb21_extra=X.out_samplerate>44e3,X.quality>6&&(X.quality=6),X.quality<0&&(X.quality=LAME_DEFAULT_QUALITY),se.iteration_loop=new VBROldIterationLoop(D);break}default:{var re;se.sfb21_extra=!1,X.quality<0&&(X.quality=LAME_DEFAULT_QUALITY),re=X.VBR,re==a.vbr_off&&(X.VBR_mean_bitrate_kbps=X.brate),M.apply_preset(X,X.VBR_mean_bitrate_kbps,0),X.VBR=re,se.PSY.mask_adjust=X.maskingadjust,se.PSY.mask_adjust_short=X.maskingadjust_short,re==a.vbr_off?se.iteration_loop=new h(D):se.iteration_loop=new ABRIterationLoop(D);break}}if(i(X.scale>=0),X.VBR!=a.vbr_off){if(se.VBR_min_bitrate=1,se.VBR_max_bitrate=14,X.out_samplerate<16e3&&(se.VBR_max_bitrate=8),X.VBR_min_bitrate_kbps!=0&&(X.VBR_min_bitrate_kbps=W(X.VBR_min_bitrate_kbps,X.version,X.out_samplerate),se.VBR_min_bitrate=ee(X.VBR_min_bitrate_kbps,X.version,X.out_samplerate),se.VBR_min_bitrate<0)||X.VBR_max_bitrate_kbps!=0&&(X.VBR_max_bitrate_kbps=W(X.VBR_max_bitrate_kbps,X.version,X.out_samplerate),se.VBR_max_bitrate=ee(X.VBR_max_bitrate_kbps,X.version,X.out_samplerate),se.VBR_max_bitrate<0))return-1;X.VBR_min_bitrate_kbps=E.bitrate_table[X.version][se.VBR_min_bitrate],X.VBR_max_bitrate_kbps=E.bitrate_table[X.version][se.VBR_max_bitrate],X.VBR_mean_bitrate_kbps=Math.min(E.bitrate_table[X.version][se.VBR_max_bitrate],X.VBR_mean_bitrate_kbps),X.VBR_mean_bitrate_kbps=Math.max(E.bitrate_table[X.version][se.VBR_min_bitrate],X.VBR_mean_bitrate_kbps)}return X.tune&&(se.PSY.mask_adjust+=X.tune_value_a,se.PSY.mask_adjust_short+=X.tune_value_a),Ce(X),i(X.scale>=0),X.athaa_type<0?se.ATH.useAdjust=3:se.ATH.useAdjust=X.athaa_type,se.ATH.aaSensitivityP=Math.pow(10,X.athaa_sensitivity/-10),X.short_blocks==null&&(X.short_blocks=e.short_block_allowed),X.short_blocks==e.short_block_allowed&&(X.mode==A.JOINT_STEREO||X.mode==A.STEREO)&&(X.short_blocks=e.short_block_coupled),X.quant_comp<0&&(X.quant_comp=1),X.quant_comp_short<0&&(X.quant_comp_short=0),X.msfix<0&&(X.msfix=0),X.exp_nspsytune=X.exp_nspsytune|1,X.internal_flags.nsPsy.attackthre<0&&(X.internal_flags.nsPsy.attackthre=l.NSATTACKTHRE),X.internal_flags.nsPsy.attackthre_s<0&&(X.internal_flags.nsPsy.attackthre_s=l.NSATTACKTHRE_S),i(X.scale>=0),X.scale<0&&(X.scale=1),X.ATHtype<0&&(X.ATHtype=4),X.ATHcurve<0&&(X.ATHcurve=4),X.athaa_loudapprox<0&&(X.athaa_loudapprox=2),X.interChRatio<0&&(X.interChRatio=0),X.useTemporal==null&&(X.useTemporal=!0),se.slot_lag=se.frac_SpF=0,X.VBR==a.vbr_off&&(se.slot_lag=se.frac_SpF=(X.version+1)*72e3*X.brate%X.out_samplerate|0),w.iteration_init(X),B.psymodel_init(X),i(X.scale>=0),0};function ge(X,se){(X.in_buffer_0==null||X.in_buffer_nsamples<se)&&(X.in_buffer_0=s(se),X.in_buffer_1=s(se),X.in_buffer_nsamples=se)}this.lame_encode_flush=function(X,se,ie,fe){var me=X.internal_flags,De=o([2,1152]),Ye=0,ze,He,xe,pe,ye=me.mf_samples_to_encode-y.POSTDELAY,Be=Me(X);if(me.mf_samples_to_encode<1)return 0;for(ze=0,X.in_samplerate!=X.out_samplerate&&(ye+=16*X.out_samplerate/X.in_samplerate),xe=X.framesize-ye%X.framesize,xe<576&&(xe+=X.framesize),X.encoder_padding=xe,pe=(ye+xe)/X.framesize;pe>0&&Ye>=0;){var ne=Be-me.mf_size,re=X.frameNum;ne*=X.in_samplerate,ne/=X.out_samplerate,ne>1152&&(ne=1152),ne<1&&(ne=1),He=fe-ze,fe==0&&(He=0),Ye=this.lame_encode_buffer(X,De[0],De[1],ne,se,ie,He),ie+=Ye,ze+=Ye,pe-=re!=X.frameNum?1:0}if(me.mf_samples_to_encode=0,Ye<0||(He=fe-ze,fe==0&&(He=0),R.flush_bitstream(X),Ye=R.copy_buffer(me,se,ie,He,1),Ye<0))return Ye;if(ie+=Ye,ze+=Ye,He=fe-ze,fe==0&&(He=0),X.write_id3tag_automatic){if(V.id3tag_write_v1(X),Ye=R.copy_buffer(me,se,ie,He,0),Ye<0)return Ye;ze+=Ye}return ze},this.lame_encode_buffer=function(X,se,ie,fe,me,De,Ye){var ze=X.internal_flags,He=[null,null];if(ze.Class_ID!=U)return-3;if(fe==0)return 0;ge(ze,fe),He[0]=ze.in_buffer_0,He[1]=ze.in_buffer_1;for(var xe=0;xe<fe;xe++)He[0][xe]=se[xe],ze.channels_in>1&&(He[1][xe]=ie[xe]);return We(X,He[0],He[1],fe,me,De,Ye)};function Me(X){var se=y.BLKSIZE+X.framesize-y.FFTOFFSET;return se=Math.max(se,512+X.framesize-32),se}function We(X,se,ie,fe,me,De,Ye){var ze=X.internal_flags,He=0,xe,pe,ye,Be,ne,re=[null,null],he=[null,null];if(ze.Class_ID!=U)return-3;if(fe==0)return 0;if(ne=R.copy_buffer(ze,me,De,Ye,0),ne<0)return ne;if(De+=ne,He+=ne,he[0]=se,he[1]=ie,_.NEQ(X.scale,0)&&_.NEQ(X.scale,1))for(pe=0;pe<fe;++pe)he[0][pe]*=X.scale,ze.channels_out==2&&(he[1][pe]*=X.scale);if(_.NEQ(X.scale_left,0)&&_.NEQ(X.scale_left,1))for(pe=0;pe<fe;++pe)he[0][pe]*=X.scale_left;if(_.NEQ(X.scale_right,0)&&_.NEQ(X.scale_right,1))for(pe=0;pe<fe;++pe)he[1][pe]*=X.scale_right;if(X.num_channels==2&&ze.channels_out==1)for(pe=0;pe<fe;++pe)he[0][pe]=.5*(he[0][pe]+he[1][pe]),he[1][pe]=0;Be=Me(X),re[0]=ze.mfbuf[0],re[1]=ze.mfbuf[1];for(var Ee=0;fe>0;){var we=[null,null],be=0,Te=0;we[0]=he[0],we[1]=he[1];var Ne=new Re;if(Dt(X,re,we,Ee,fe,Ne),be=Ne.n_in,Te=Ne.n_out,ze.findReplayGain&&!ze.decode_on_the_fly&&x.AnalyzeSamples(ze.rgdata,re[0],ze.mf_size,re[1],ze.mf_size,Te,ze.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6;if(fe-=be,Ee+=be,ze.channels_out==2,ze.mf_size+=Te,i(ze.mf_size<=d.MFSIZE),ze.mf_samples_to_encode<1&&(ze.mf_samples_to_encode=y.ENCDELAY+y.POSTDELAY),ze.mf_samples_to_encode+=Te,ze.mf_size>=Be){var Ie=Ye-He;if(Ye==0&&(Ie=0),xe=Ue(X,re[0],re[1],me,De,Ie),xe<0)return xe;for(De+=xe,He+=xe,ze.mf_size-=X.framesize,ze.mf_samples_to_encode-=X.framesize,ye=0;ye<ze.channels_out;ye++)for(pe=0;pe<ze.mf_size;pe++)re[ye][pe]=re[ye][pe+X.framesize]}}return He}function Ue(X,se,ie,fe,me,De){var Ye=T.enc.lame_encode_mp3_frame(X,se,ie,fe,me,De);return X.frameNum++,Ye}function Re(){this.n_in=0,this.n_out=0}function Le(){this.num_used=0}function Xe(X,se){return se!=0?Xe(se,X%se):X}function et(X,se,ie){var fe=Math.PI*se;X/=ie,X<0&&(X=0),X>1&&(X=1);var me=X-.5,De=.42-.5*Math.cos(2*X*Math.PI)+.08*Math.cos(4*X*Math.PI);return Math.abs(me)<1e-9?fe/Math.PI:De*Math.sin(ie*fe*me)/(Math.PI*ie*me)}function yt(X,se,ie,fe,me,De,Ye,ze,He){var xe=X.internal_flags,pe,ye=0,Be,ne=X.out_samplerate/Xe(X.out_samplerate,X.in_samplerate);ne>d.BPC&&(ne=d.BPC);var re=Math.abs(xe.resample_ratio-Math.floor(.5+xe.resample_ratio))<1e-4?1:0,he=1/xe.resample_ratio;he>1&&(he=1);var Ee=31;Ee%2==0&&--Ee,Ee+=re;var we=Ee+1;if(xe.fill_buffer_resample_init==0){for(xe.inbuf_old[0]=s(we),xe.inbuf_old[1]=s(we),pe=0;pe<=2*ne;++pe)xe.blackfilt[pe]=s(we);for(xe.itime[0]=0,xe.itime[1]=0,ye=0;ye<=2*ne;ye++){var be=0,Te=(ye-ne)/(2*ne);for(pe=0;pe<=Ee;pe++)be+=xe.blackfilt[ye][pe]=et(pe-Te,he,Ee);for(pe=0;pe<=Ee;pe++)xe.blackfilt[ye][pe]/=be}xe.fill_buffer_resample_init=1}var Ne=xe.inbuf_old[He];for(Be=0;Be<fe;Be++){var Ie,$e;if(Ie=Be*xe.resample_ratio,ye=0|Math.floor(Ie-xe.itime[He]),Ee+ye-Ee/2>=Ye)break;var Te=Ie-xe.itime[He]-(ye+.5*(Ee%2));$e=0|Math.floor(Te*2*ne+ne+.5);var ke=0;for(pe=0;pe<=Ee;++pe){var Ke=0|pe+ye-Ee/2,ct;ct=Ke<0?Ne[we+Ke]:me[De+Ke],ke+=ct*xe.blackfilt[$e][pe]}se[ie+Be]=ke}if(ze.num_used=Math.min(Ye,Ee+ye-Ee/2),xe.itime[He]+=ze.num_used-Be*xe.resample_ratio,ze.num_used>=we)for(pe=0;pe<we;pe++)Ne[pe]=me[De+ze.num_used+pe-we];else{var It=we-ze.num_used;for(pe=0;pe<It;++pe)Ne[pe]=Ne[pe+ze.num_used];for(ye=0;pe<we;++pe,++ye)Ne[pe]=me[De+ye];i(ye==ze.num_used)}return Be}function Dt(X,se,ie,fe,me,De){var Ye=X.internal_flags;if(Ye.resample_ratio<.9999||Ye.resample_ratio>1.0001)for(var ze=0;ze<Ye.channels_out;ze++){var He=new Le;De.n_out=yt(X,se[ze],Ye.mf_size,X.framesize,ie[ze],fe,me,He,ze),De.n_in=He.num_used}else{De.n_out=Math.min(X.framesize,me),De.n_in=De.n_out;for(var xe=0;xe<De.n_out;++xe)se[0][Ye.mf_size+xe]=ie[0][fe+xe],Ye.channels_out==2&&(se[1][Ye.mf_size+xe]=ie[1][fe+xe])}}}return Db=b,Db}var KYe=_a,or=KYe.VbrMode;function XYe(){var t=y1();function n(d,u,m,h,_,E,y,b,A,T,I,N,x,R,M){this.vbr_q=d,this.quant_comp=u,this.quant_comp_s=m,this.expY=h,this.st_lrm=_,this.st_s=E,this.masking_adj=y,this.masking_adj_short=b,this.ath_lower=A,this.ath_curve=T,this.ath_sensitivity=I,this.interch=N,this.safejoint=x,this.sfb21mod=R,this.msfix=M}function a(d,u,m,h,_,E,y,b,A,T,I,N,x,R){this.quant_comp=u,this.quant_comp_s=m,this.safejoint=h,this.nsmsfix=_,this.st_lrm=E,this.st_s=y,this.nsbass=b,this.scale=A,this.masking_adj=T,this.ath_lower=I,this.ath_curve=N,this.interch=x,this.sfscale=R}var e;this.setModules=function(d){e=d};var s=[new n(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new n(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new n(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new n(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new n(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new n(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new n(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new n(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new n(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new n(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new n(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],r=[new n(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new n(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new n(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new n(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new n(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new n(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new n(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new n(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new n(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new n(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new n(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function o(d,u,m){var h=d.VBR==or.vbr_rh?s:r,_=d.VBR_q_frac,E=h[u],y=h[u+1],b=E;E.st_lrm=E.st_lrm+_*(y.st_lrm-E.st_lrm),E.st_s=E.st_s+_*(y.st_s-E.st_s),E.masking_adj=E.masking_adj+_*(y.masking_adj-E.masking_adj),E.masking_adj_short=E.masking_adj_short+_*(y.masking_adj_short-E.masking_adj_short),E.ath_lower=E.ath_lower+_*(y.ath_lower-E.ath_lower),E.ath_curve=E.ath_curve+_*(y.ath_curve-E.ath_curve),E.ath_sensitivity=E.ath_sensitivity+_*(y.ath_sensitivity-E.ath_sensitivity),E.interch=E.interch+_*(y.interch-E.interch),E.msfix=E.msfix+_*(y.msfix-E.msfix),c(d,b.vbr_q),m!=0?d.quant_comp=b.quant_comp:Math.abs(d.quant_comp- -1)>0||(d.quant_comp=b.quant_comp),m!=0?d.quant_comp_short=b.quant_comp_s:Math.abs(d.quant_comp_short- -1)>0||(d.quant_comp_short=b.quant_comp_s),b.expY!=0&&(d.experimentalY=b.expY!=0),m!=0?d.internal_flags.nsPsy.attackthre=b.st_lrm:Math.abs(d.internal_flags.nsPsy.attackthre- -1)>0||(d.internal_flags.nsPsy.attackthre=b.st_lrm),m!=0?d.internal_flags.nsPsy.attackthre_s=b.st_s:Math.abs(d.internal_flags.nsPsy.attackthre_s- -1)>0||(d.internal_flags.nsPsy.attackthre_s=b.st_s),m!=0?d.maskingadjust=b.masking_adj:Math.abs(d.maskingadjust-0)>0||(d.maskingadjust=b.masking_adj),m!=0?d.maskingadjust_short=b.masking_adj_short:Math.abs(d.maskingadjust_short-0)>0||(d.maskingadjust_short=b.masking_adj_short),m!=0?d.ATHlower=-b.ath_lower/10:Math.abs(-d.ATHlower*10-0)>0||(d.ATHlower=-b.ath_lower/10),m!=0?d.ATHcurve=b.ath_curve:Math.abs(d.ATHcurve- -1)>0||(d.ATHcurve=b.ath_curve),m!=0?d.athaa_sensitivity=b.ath_sensitivity:Math.abs(d.athaa_sensitivity- -1)>0||(d.athaa_sensitivity=b.ath_sensitivity),b.interch>0&&(m!=0?d.interChRatio=b.interch:Math.abs(d.interChRatio- -1)>0||(d.interChRatio=b.interch)),b.safejoint>0&&(d.exp_nspsytune=d.exp_nspsytune|b.safejoint),b.sfb21mod>0&&(d.exp_nspsytune=d.exp_nspsytune|b.sfb21mod<<20),m!=0?d.msfix=b.msfix:Math.abs(d.msfix- -1)>0||(d.msfix=b.msfix),m==0&&(d.VBR_q=u,d.VBR_q_frac=_)}var i=[new a(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new a(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new a(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new a(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new a(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new a(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new a(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new a(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new a(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new a(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new a(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new a(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new a(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new a(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new a(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new a(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new a(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function l(d,u,m){var h=u,_=e.nearestBitrateFullIndex(u);if(d.VBR=or.vbr_abr,d.VBR_mean_bitrate_kbps=h,d.VBR_mean_bitrate_kbps=Math.min(d.VBR_mean_bitrate_kbps,320),d.VBR_mean_bitrate_kbps=Math.max(d.VBR_mean_bitrate_kbps,8),d.brate=d.VBR_mean_bitrate_kbps,d.VBR_mean_bitrate_kbps>320&&(d.disable_reservoir=!0),i[_].safejoint>0&&(d.exp_nspsytune=d.exp_nspsytune|2),i[_].sfscale>0&&(d.internal_flags.noise_shaping=2),Math.abs(i[_].nsbass)>0){var E=int(i[_].nsbass*4);E<0&&(E+=64),d.exp_nspsytune=d.exp_nspsytune|E<<2}return m!=0?d.quant_comp=i[_].quant_comp:Math.abs(d.quant_comp- -1)>0||(d.quant_comp=i[_].quant_comp),m!=0?d.quant_comp_short=i[_].quant_comp_s:Math.abs(d.quant_comp_short- -1)>0||(d.quant_comp_short=i[_].quant_comp_s),m!=0?d.msfix=i[_].nsmsfix:Math.abs(d.msfix- -1)>0||(d.msfix=i[_].nsmsfix),m!=0?d.internal_flags.nsPsy.attackthre=i[_].st_lrm:Math.abs(d.internal_flags.nsPsy.attackthre- -1)>0||(d.internal_flags.nsPsy.attackthre=i[_].st_lrm),m!=0?d.internal_flags.nsPsy.attackthre_s=i[_].st_s:Math.abs(d.internal_flags.nsPsy.attackthre_s- -1)>0||(d.internal_flags.nsPsy.attackthre_s=i[_].st_s),m!=0?d.scale=i[_].scale:Math.abs(d.scale- -1)>0||(d.scale=i[_].scale),m!=0?d.maskingadjust=i[_].masking_adj:Math.abs(d.maskingadjust-0)>0||(d.maskingadjust=i[_].masking_adj),i[_].masking_adj>0?m!=0?d.maskingadjust_short=i[_].masking_adj*.9:Math.abs(d.maskingadjust_short-0)>0||(d.maskingadjust_short=i[_].masking_adj*.9):m!=0?d.maskingadjust_short=i[_].masking_adj*1.1:Math.abs(d.maskingadjust_short-0)>0||(d.maskingadjust_short=i[_].masking_adj*1.1),m!=0?d.ATHlower=-i[_].ath_lower/10:Math.abs(-d.ATHlower*10-0)>0||(d.ATHlower=-i[_].ath_lower/10),m!=0?d.ATHcurve=i[_].ath_curve:Math.abs(d.ATHcurve- -1)>0||(d.ATHcurve=i[_].ath_curve),m!=0?d.interChRatio=i[_].interch:Math.abs(d.interChRatio- -1)>0||(d.interChRatio=i[_].interch),u}this.apply_preset=function(d,u,m){switch(u){case t.R3MIX:{u=t.V3,d.VBR=or.vbr_mtrh;break}case t.MEDIUM:{u=t.V4,d.VBR=or.vbr_rh;break}case t.MEDIUM_FAST:{u=t.V4,d.VBR=or.vbr_mtrh;break}case t.STANDARD:{u=t.V2,d.VBR=or.vbr_rh;break}case t.STANDARD_FAST:{u=t.V2,d.VBR=or.vbr_mtrh;break}case t.EXTREME:{u=t.V0,d.VBR=or.vbr_rh;break}case t.EXTREME_FAST:{u=t.V0,d.VBR=or.vbr_mtrh;break}case t.INSANE:return u=320,d.preset=u,l(d,u,m),d.VBR=or.vbr_off,u}switch(d.preset=u,u){case t.V9:return o(d,9,m),u;case t.V8:return o(d,8,m),u;case t.V7:return o(d,7,m),u;case t.V6:return o(d,6,m),u;case t.V5:return o(d,5,m),u;case t.V4:return o(d,4,m),u;case t.V3:return o(d,3,m),u;case t.V2:return o(d,2,m),u;case t.V1:return o(d,1,m),u;case t.V0:return o(d,0,m),u}return 8<=u&&u<=320?l(d,u,m):(d.preset=0,u)};function c(d,u){var m=0;return 0>u&&(m=-1,u=0),9<u&&(m=-1,u=9),d.VBR_q=u,d.VBR_q_frac=0,m}}var qYe=XYe;function ZYe(){this.setModules=function(t,n){}}var QYe=ZYe;function JYe(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}var eKe=JYe,wD=_a,UO=wD.new_float,tKe=wD.new_int;function nKe(){this.global_gain=0,this.sfb_count1=0,this.step=tKe(39),this.noise=UO(39),this.noise_log=UO(39)}var aKe=nKe,Nd=_a,hi=Nd.System,$O=Nd.VbrMode,Pb=Nd.Util,_c=Nd.Arrays,Kd=Nd.new_float,Xd=Nd.assert,sKe=QYe,kb=eKe,oKe=aKe,Cn=Ts(),GO=v1,VO=s_;function rKe(){var t;this.rv=null;var n;this.qupvt=null;var a,e=new sKe,s;this.setModules=function(b,A,T,I){t=b,n=A,this.rv=A,a=T,this.qupvt=T,s=I,e.setModules(a,s)},this.ms_convert=function(b,A){for(var T=0;T<576;++T){var I=b.tt[A][0].xr[T],N=b.tt[A][1].xr[T];b.tt[A][0].xr[T]=(I+N)*(Pb.SQRT2*.5),b.tt[A][1].xr[T]=(I-N)*(Pb.SQRT2*.5)}};function r(b,A,T,I){I=0;for(var N=0;N<=T;++N){var x=Math.abs(b.xr[N]);I+=x,A[N]=Math.sqrt(x*Math.sqrt(x)),A[N]>b.xrpow_max&&(b.xrpow_max=A[N])}return I}this.init_xrpow=function(b,A,T){var I=0,N=0|A.max_nonzero_coeff;if(A.xrpow_max=0,_c.fill(T,N,576,0),I=r(A,T,N,I),I>1e-20){var x=0;b.substep_shaping&2&&(x=1);for(var R=0;R<A.psymax;R++)b.pseudohalf[R]=x;return!0}return _c.fill(A.l3_enc,0,576,0),!1};function o(b,A){var T=b.ATH,I=A.xr;if(A.block_type!=Cn.SHORT_TYPE)for(var N=!1,x=Cn.PSFB21-1;x>=0&&!N;x--){var R=b.scalefac_band.psfb21[x],M=b.scalefac_band.psfb21[x+1],w=a.athAdjust(T.adjust,T.psfb21[x],T.floor);b.nsPsy.longfact[21]>1e-12&&(w*=b.nsPsy.longfact[21]);for(var D=M-1;D>=R;D--)if(Math.abs(I[D])<w)I[D]=0;else{N=!0;break}}else for(var B=0;B<3;B++)for(var N=!1,x=Cn.PSFB12-1;x>=0&&!N;x--){var R=b.scalefac_band.s[12]*3+(b.scalefac_band.s[13]-b.scalefac_band.s[12])*B+(b.scalefac_band.psfb12[x]-b.scalefac_band.psfb12[0]),M=R+(b.scalefac_band.psfb12[x+1]-b.scalefac_band.psfb12[x]),k=a.athAdjust(T.adjust,T.psfb12[x],T.floor);b.nsPsy.shortfact[12]>1e-12&&(k*=b.nsPsy.shortfact[12]);for(var D=M-1;D>=R;D--)if(Math.abs(I[D])<k)I[D]=0;else{N=!0;break}}}this.init_outer_loop=function(b,A){A.part2_3_length=0,A.big_values=0,A.count1=0,A.global_gain=210,A.scalefac_compress=0,A.table_select[0]=0,A.table_select[1]=0,A.table_select[2]=0,A.subblock_gain[0]=0,A.subblock_gain[1]=0,A.subblock_gain[2]=0,A.subblock_gain[3]=0,A.region0_count=0,A.region1_count=0,A.preflag=0,A.scalefac_scale=0,A.count1table_select=0,A.part2_length=0,A.sfb_lmax=Cn.SBPSY_l,A.sfb_smin=Cn.SBPSY_s,A.psy_lmax=b.sfb21_extra?Cn.SBMAX_l:Cn.SBPSY_l,A.psymax=A.psy_lmax,A.sfbmax=A.sfb_lmax,A.sfbdivide=11;for(var T=0;T<Cn.SBMAX_l;T++)A.width[T]=b.scalefac_band.l[T+1]-b.scalefac_band.l[T],A.window[T]=3;if(A.block_type==Cn.SHORT_TYPE){var I=Kd(576);A.sfb_smin=0,A.sfb_lmax=0,A.mixed_block_flag!=0&&(A.sfb_smin=3,A.sfb_lmax=b.mode_gr*2+4),A.psymax=A.sfb_lmax+3*((b.sfb21_extra?Cn.SBMAX_s:Cn.SBPSY_s)-A.sfb_smin),A.sfbmax=A.sfb_lmax+3*(Cn.SBPSY_s-A.sfb_smin),A.sfbdivide=A.sfbmax-18,A.psy_lmax=A.sfb_lmax;var N=b.scalefac_band.l[A.sfb_lmax];hi.arraycopy(A.xr,0,I,0,576);for(var T=A.sfb_smin;T<Cn.SBMAX_s;T++)for(var x=b.scalefac_band.s[T],R=b.scalefac_band.s[T+1],M=0;M<3;M++)for(var w=x;w<R;w++)A.xr[N++]=I[3*w+M];for(var D=A.sfb_lmax,T=A.sfb_smin;T<Cn.SBMAX_s;T++)A.width[D]=A.width[D+1]=A.width[D+2]=b.scalefac_band.s[T+1]-b.scalefac_band.s[T],A.window[D]=0,A.window[D+1]=1,A.window[D+2]=2,D+=3}A.count1bits=0,A.sfb_partition_table=a.nr_of_sfb_block[0][0],A.slen[0]=0,A.slen[1]=0,A.slen[2]=0,A.slen[3]=0,A.max_nonzero_coeff=575,_c.fill(A.scalefac,0),o(b,A)};function i(b){this.ordinal=b}i.BINSEARCH_NONE=new i(0),i.BINSEARCH_UP=new i(1),i.BINSEARCH_DOWN=new i(2);function l(b,A,T,I,N){var x,R=b.CurrentStep[I],M=!1,w=b.OldValue[I],D=i.BINSEARCH_NONE;for(A.global_gain=w,T-=A.part2_length;;){var B;if(x=s.count_bits(b,N,A,null),R==1||x==T)break;x>T?(D==i.BINSEARCH_DOWN&&(M=!0),M&&(R/=2),D=i.BINSEARCH_UP,B=R):(D==i.BINSEARCH_UP&&(M=!0),M&&(R/=2),D=i.BINSEARCH_DOWN,B=-R),A.global_gain+=B,A.global_gain<0&&(A.global_gain=0,M=!0),A.global_gain>255&&(A.global_gain=255,M=!0)}for(Xd(A.global_gain>=0),Xd(A.global_gain<256);x>T&&A.global_gain<255;)A.global_gain++,x=s.count_bits(b,N,A,null);return b.CurrentStep[I]=w-A.global_gain>=4?4:2,b.OldValue[I]=A.global_gain,A.part2_3_length=x,x}this.trancate_smallspectrums=function(b,A,T,I){var N=Kd(VO.SFBMAX);if(!(!(b.substep_shaping&4)&&A.block_type==Cn.SHORT_TYPE||b.substep_shaping&128)){a.calc_noise(A,T,N,new kb,null);for(var R=0;R<576;R++){var x=0;A.l3_enc[R]!=0&&(x=Math.abs(A.xr[R])),I[R]=x}var R=0,M=8;A.block_type==Cn.SHORT_TYPE&&(M=6);do{var w,D,B,k,V=A.width[M];if(R+=V,!(N[M]>=1)&&(_c.sort(I,R-V,V),!BitStream.EQ(I[R-1],0))){w=(1-N[M])*T[M],D=0,k=0;do{var F;for(B=1;k+B<V&&!BitStream.NEQ(I[k+R-V],I[k+R+B-V]);B++);if(F=I[k+R-V]*I[k+R-V]*B,w<F){k!=0&&(D=I[k+R-V-1]);break}w-=F,k+=B}while(k<V);if(!BitStream.EQ(D,0))do Math.abs(A.xr[R-V])<=D&&(A.l3_enc[R-V]=0);while(--V>0)}}while(++M<A.psymax);A.part2_3_length=s.noquant_count_bits(b,A,null)}};function c(b){for(var A=0;A<b.sfbmax;A++)if(b.scalefac[A]+b.subblock_gain[b.window[A]]==0)return!1;return!0}function d(b){return Pb.FAST_LOG10(.368+.632*b*b*b)}function u(b,A){for(var T=1e-37,I=0;I<A.psymax;I++)T+=d(b[I]);return Math.max(1e-20,T)}function m(b,A,T,I,N){var x;switch(b){default:case 9:{A.over_count>0?(x=T.over_SSD<=A.over_SSD,T.over_SSD==A.over_SSD&&(x=T.bits<A.bits)):x=T.max_noise<0&&T.max_noise*10+T.bits<=A.max_noise*10+A.bits;break}case 0:x=T.over_count<A.over_count||T.over_count==A.over_count&&T.over_noise<A.over_noise||T.over_count==A.over_count&&BitStream.EQ(T.over_noise,A.over_noise)&&T.tot_noise<A.tot_noise;break;case 8:T.max_noise=u(N,I);case 1:x=T.max_noise<A.max_noise;break;case 2:x=T.tot_noise<A.tot_noise;break;case 3:x=T.tot_noise<A.tot_noise&&T.max_noise<A.max_noise;break;case 4:x=T.max_noise<=0&&A.max_noise>.2||T.max_noise<=0&&A.max_noise<0&&A.max_noise>T.max_noise-.2&&T.tot_noise<A.tot_noise||T.max_noise<=0&&A.max_noise>0&&A.max_noise>T.max_noise-.2&&T.tot_noise<A.tot_noise+A.over_noise||T.max_noise>0&&A.max_noise>-.05&&A.max_noise>T.max_noise-.1&&T.tot_noise+T.over_noise<A.tot_noise+A.over_noise||T.max_noise>0&&A.max_noise>-.1&&A.max_noise>T.max_noise-.15&&T.tot_noise+T.over_noise+T.over_noise<A.tot_noise+A.over_noise+A.over_noise;break;case 5:x=T.over_noise<A.over_noise||BitStream.EQ(T.over_noise,A.over_noise)&&T.tot_noise<A.tot_noise;break;case 6:x=T.over_noise<A.over_noise||BitStream.EQ(T.over_noise,A.over_noise)&&(T.max_noise<A.max_noise||BitStream.EQ(T.max_noise,A.max_noise)&&T.tot_noise<=A.tot_noise);break;case 7:x=T.over_count<A.over_count||T.over_noise<A.over_noise;break}return A.over_count==0&&(x=x&&T.bits<A.bits),x}function h(b,A,T,I,N){var x=b.internal_flags,R;A.scalefac_scale==0?R=1.2968395546510096:R=1.6817928305074292;for(var M=0,w=0;w<A.sfbmax;w++)M<T[w]&&(M=T[w]);var D=x.noise_shaping_amp;switch(D==3&&(N?D=2:D=1),D){case 2:break;case 1:M>1?M=Math.pow(M,.5):M*=.95;break;case 0:default:M>1?M=1:M*=.95;break}for(var B=0,w=0;w<A.sfbmax;w++){var k=A.width[w],V;if(B+=k,!(T[w]<M)){if(x.substep_shaping&2&&(x.pseudohalf[w]=x.pseudohalf[w]==0?1:0,x.pseudohalf[w]==0&&x.noise_shaping_amp==2))return;for(A.scalefac[w]++,V=-k;V<0;V++)I[B+V]*=R,I[B+V]>A.xrpow_max&&(A.xrpow_max=I[B+V]);if(x.noise_shaping_amp==2)return}}}function _(b,A){for(var T=1.2968395546510096,I=0,N=0;N<b.sfbmax;N++){var x=b.width[N],R=b.scalefac[N];if(b.preflag!=0&&(R+=a.pretab[N]),I+=x,R&1){R++;for(var M=-x;M<0;M++)A[I+M]*=T,A[I+M]>b.xrpow_max&&(b.xrpow_max=A[I+M])}b.scalefac[N]=R>>1}b.preflag=0,b.scalefac_scale=1}function E(b,A,T){var I,N=A.scalefac;for(I=0;I<A.sfb_lmax;I++)if(N[I]>=16)return!0;for(var x=0;x<3;x++){var R=0,M=0;for(I=A.sfb_lmax+x;I<A.sfbdivide;I+=3)R<N[I]&&(R=N[I]);for(;I<A.sfbmax;I+=3)M<N[I]&&(M=N[I]);if(!(R<16&&M<8)){if(A.subblock_gain[x]>=7)return!0;A.subblock_gain[x]++;var w=b.scalefac_band.l[A.sfb_lmax];for(I=A.sfb_lmax+x;I<A.sfbmax;I+=3){var D,B=A.width[I],k=N[I];if(k=k-(4>>A.scalefac_scale),k>=0){N[I]=k,w+=B*3;continue}N[I]=0;{var V=210+(k<<A.scalefac_scale+1);D=a.IPOW20(V)}w+=B*(x+1);for(var F=-B;F<0;F++)T[w+F]*=D,T[w+F]>A.xrpow_max&&(A.xrpow_max=T[w+F]);w+=B*(3-x-1)}{var D=a.IPOW20(202);w+=A.width[I]*(x+1);for(var F=-A.width[I];F<0;F++)T[w+F]*=D,T[w+F]>A.xrpow_max&&(A.xrpow_max=T[w+F])}}}return!1}function y(b,A,T,I,N){var x=b.internal_flags;h(b,A,T,I,N);var R=c(A);return R?!1:(x.mode_gr==2?R=s.scale_bitcount(A):R=s.scale_bitcount_lsf(x,A),R?(x.noise_shaping>1&&(_c.fill(x.pseudohalf,0),A.scalefac_scale==0?(_(A,I),R=!1):A.block_type==Cn.SHORT_TYPE&&x.subblock_gain>0&&(R=E(x,A,I)||c(A))),R||(x.mode_gr==2?R=s.scale_bitcount(A):R=s.scale_bitcount_lsf(x,A)),!R):!0)}this.outer_loop=function(b,A,T,I,N,x){var R=b.internal_flags,M=new GO,w=Kd(576),D=Kd(VO.SFBMAX),B=new kb,k,V=new oKe,F=9999999,$=!1,Y=!1,j=0;if(l(R,A,x,N,I),R.noise_shaping==0)return 100;a.calc_noise(A,T,D,B,V),B.bits=A.part2_3_length,M.assign(A);var U=0;for(hi.arraycopy(I,0,w,0,576);!$;){do{var J=new kb,te,q=255;if(R.substep_shaping&2?te=20:te=3,R.sfb21_extra&&(D[M.sfbmax]>1||M.block_type==Cn.SHORT_TYPE&&(D[M.sfbmax+1]>1||D[M.sfbmax+2]>1))||!y(b,M,D,I,Y))break;M.scalefac_scale!=0&&(q=254);var K=x-M.part2_length;if(K<=0)break;for(;(M.part2_3_length=s.count_bits(R,I,M,V))>K&&M.global_gain<=q;)M.global_gain++;if(M.global_gain>q)break;if(B.over_count==0){for(;(M.part2_3_length=s.count_bits(R,I,M,V))>F&&M.global_gain<=q;)M.global_gain++;if(M.global_gain>q)break}if(a.calc_noise(M,T,D,J,V),J.bits=M.part2_3_length,A.block_type!=Cn.SHORT_TYPE?k=b.quant_comp:k=b.quant_comp_short,k=m(k,B,J,M,D)?1:0,k!=0)F=A.part2_3_length,B=J,A.assign(M),U=0,hi.arraycopy(I,0,w,0,576);else if(R.full_outer_loop==0&&(++U>te&&B.over_count==0||R.noise_shaping_amp==3&&Y&&U>30||R.noise_shaping_amp==3&&Y&&M.global_gain-j>15))break}while(M.global_gain+M.scalefac_scale<255);R.noise_shaping_amp==3?Y?$=!0:(M.assign(A),hi.arraycopy(w,0,I,0,576),U=0,j=M.global_gain,Y=!0):$=!0}return Xd(A.global_gain+A.scalefac_scale<=255),b.VBR==$O.vbr_rh||b.VBR==$O.vbr_mtrh?hi.arraycopy(w,0,I,0,576):R.substep_shaping&1&&trancate_smallspectrums(R,A,T,I),B.over_count},this.iteration_finish_one=function(b,A,T){var I=b.l3_side,N=I.tt[A][T];s.best_scalefac_store(b,A,T,I),b.use_best_huffman==1&&s.best_huffman_divide(b,N),n.ResvAdjust(b,N)},this.VBR_encode_granule=function(b,A,T,I,N,x,R){var M=b.internal_flags,w=new GO,D=Kd(576),B=R,k=R+1,V=(R+x)/2,F,$,Y=0,j=M.sfb21_extra;Xd(B<=LameInternalFlags.MAX_BITS_PER_CHANNEL),_c.fill(w.l3_enc,0);do V>B-42?M.sfb21_extra=!1:M.sfb21_extra=j,$=outer_loop(b,A,T,I,N,V),$<=0?(Y=1,k=A.part2_3_length,w.assign(A),hi.arraycopy(I,0,D,0,576),R=k-32,F=R-x,V=(R+x)/2):(x=V+32,F=R-x,V=(R+x)/2,Y!=0&&(Y=2,A.assign(w),hi.arraycopy(D,0,I,0,576)));while(F>12);M.sfb21_extra=j,Y==2&&hi.arraycopy(w.l3_enc,0,A.l3_enc,0,576),Xd(A.part2_3_length<=B)},this.get_framebits=function(b,A){var T=b.internal_flags;T.bitrate_index=T.VBR_min_bitrate;var I=t.getframebits(b);T.bitrate_index=1,I=t.getframebits(b);for(var N=1;N<=T.VBR_max_bitrate;N++){T.bitrate_index=N;var x=new MeanBits(I);A[N]=n.ResvFrameBegin(b,x),I=x.bits}},this.VBR_old_prepare=function(b,A,T,I,N,x,R,M,w){var D=b.internal_flags,B,k=0,V=1,F=0;D.bitrate_index=D.VBR_max_bitrate;var $=n.ResvFrameBegin(b,new MeanBits(0))/D.mode_gr;get_framebits(b,x);for(var Y=0;Y<D.mode_gr;Y++){var j=a.on_pe(b,A,M[Y],$,Y,0);D.mode_ext==Cn.MPG_MD_MS_LR&&(ms_convert(D.l3_side,Y),a.reduce_side(M[Y],T[Y],$,j));for(var U=0;U<D.channels_out;++U){var J=D.l3_side.tt[Y][U];J.block_type!=Cn.SHORT_TYPE?(k=1.28/(1+Math.exp(3.5-A[Y][U]/300))-.05,B=D.PSY.mask_adjust-k):(k=2.56/(1+Math.exp(3.5-A[Y][U]/300))-.14,B=D.PSY.mask_adjust_short-k),D.masking_lower=Math.pow(10,B*.1),init_outer_loop(D,J),w[Y][U]=a.calc_xmin(b,I[Y][U],J,N[Y][U]),w[Y][U]!=0&&(V=0),R[Y][U]=126,F+=M[Y][U]}}for(var Y=0;Y<D.mode_gr;Y++)for(var U=0;U<D.channels_out;U++)F>x[D.VBR_max_bitrate]&&(M[Y][U]*=x[D.VBR_max_bitrate],M[Y][U]/=F),R[Y][U]>M[Y][U]&&(R[Y][U]=M[Y][U]);return V},this.bitpressure_strategy=function(b,A,T,I){for(var N=0;N<b.mode_gr;N++)for(var x=0;x<b.channels_out;x++){for(var R=b.l3_side.tt[N][x],M=A[N][x],w=0,D=0;D<R.psy_lmax;D++)M[w++]*=1+.029*D*D/Cn.SBMAX_l/Cn.SBMAX_l;if(R.block_type==Cn.SHORT_TYPE)for(var D=R.sfb_smin;D<Cn.SBMAX_s;D++)M[w++]*=1+.029*D*D/Cn.SBMAX_s/Cn.SBMAX_s,M[w++]*=1+.029*D*D/Cn.SBMAX_s/Cn.SBMAX_s,M[w++]*=1+.029*D*D/Cn.SBMAX_s/Cn.SBMAX_s;I[N][x]=0|Math.max(T[N][x],.9*I[N][x])}},this.VBR_new_prepare=function(b,A,T,I,N,x){var R=b.internal_flags,M=1,w=0,D=0,B;if(b.free_format){R.bitrate_index=0;var k=new MeanBits(w);B=n.ResvFrameBegin(b,k),w=k.bits,N[0]=B}else{R.bitrate_index=R.VBR_max_bitrate;var k=new MeanBits(w);n.ResvFrameBegin(b,k),w=k.bits,get_framebits(b,N),B=N[R.VBR_max_bitrate]}for(var V=0;V<R.mode_gr;V++){a.on_pe(b,A,x[V],w,V,0),R.mode_ext==Cn.MPG_MD_MS_LR&&ms_convert(R.l3_side,V);for(var F=0;F<R.channels_out;++F){var $=R.l3_side.tt[V][F];R.masking_lower=Math.pow(10,R.PSY.mask_adjust*.1),init_outer_loop(R,$),a.calc_xmin(b,T[V][F],$,I[V][F])!=0&&(M=0),D+=x[V][F]}}for(var V=0;V<R.mode_gr;V++)for(var F=0;F<R.channels_out;F++)D>B&&(x[V][F]*=B,x[V][F]/=D);return M},this.calc_target_bits=function(b,A,T,I,N,x){var R=b.internal_flags,M=R.l3_side,w,D,B,k,V=0;R.bitrate_index=R.VBR_max_bitrate;var F=new MeanBits(V);for(x[0]=n.ResvFrameBegin(b,F),V=F.bits,R.bitrate_index=1,V=t.getframebits(b)-R.sideinfo_len*8,N[0]=V/(R.mode_gr*R.channels_out),V=b.VBR_mean_bitrate_kbps*b.framesize*1e3,R.substep_shaping&1&&(V*=1.09),V/=b.out_samplerate,V-=R.sideinfo_len*8,V/=R.mode_gr*R.channels_out,w=.93+.07*(11-b.compression_ratio)/(11-5.5),w<.9&&(w=.9),w>1&&(w=1),D=0;D<R.mode_gr;D++){var $=0;for(B=0;B<R.channels_out;B++){if(I[D][B]=int(w*V),A[D][B]>700){var Y=int((A[D][B]-700)/1.4),j=M.tt[D][B];I[D][B]=int(w*V),j.block_type==Cn.SHORT_TYPE&&Y<V/2&&(Y=V/2),Y>V*3/2?Y=V*3/2:Y<0&&(Y=0),I[D][B]+=Y}I[D][B]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(I[D][B]=LameInternalFlags.MAX_BITS_PER_CHANNEL),$+=I[D][B]}if($>LameInternalFlags.MAX_BITS_PER_GRANULE)for(B=0;B<R.channels_out;++B)I[D][B]*=LameInternalFlags.MAX_BITS_PER_GRANULE,I[D][B]/=$}if(R.mode_ext==Cn.MPG_MD_MS_LR)for(D=0;D<R.mode_gr;D++)a.reduce_side(I[D],T[D],V*R.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(k=0,D=0;D<R.mode_gr;D++)for(B=0;B<R.channels_out;B++)I[D][B]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(I[D][B]=LameInternalFlags.MAX_BITS_PER_CHANNEL),k+=I[D][B];if(k>x[0])for(D=0;D<R.mode_gr;D++)for(B=0;B<R.channels_out;B++)I[D][B]*=x[0],I[D][B]/=k}}var iKe=rKe,lKe=_a,HO=lKe.assert;function cKe(){var t;this.setModules=function(n){t=n},this.ResvFrameBegin=function(n,a){var e=n.internal_flags,s,r=e.l3_side,o=t.getframebits(n);a.bits=(o-e.sideinfo_len*8)/e.mode_gr;var i=8*256*e.mode_gr-8;n.brate>320?s=8*int(n.brate*1e3/(n.out_samplerate/1152)/8+.5):(s=8*1440,n.strict_ISO&&(s=8*int(32e4/(n.out_samplerate/1152)/8+.5))),e.ResvMax=s-o,e.ResvMax>i&&(e.ResvMax=i),(e.ResvMax<0||n.disable_reservoir)&&(e.ResvMax=0);var l=a.bits*e.mode_gr+Math.min(e.ResvSize,e.ResvMax);return l>s&&(l=s),HO(e.ResvMax%8==0),HO(e.ResvMax>=0),r.resvDrain_pre=0,e.pinfo!=null&&(e.pinfo.mean_bits=a.bits/2,e.pinfo.resvsize=e.ResvSize),l},this.ResvMaxBits=function(n,a,e,s){var r=n.internal_flags,o,i=r.ResvSize,l=r.ResvMax;s!=0&&(i+=a),r.substep_shaping&1&&(l*=.9),e.bits=a,i*10>l*9?(o=i-l*9/10,e.bits+=o,r.substep_shaping|=128):(o=0,r.substep_shaping&=127,!n.disable_reservoir&&!(r.substep_shaping&1)&&(e.bits-=.1*a));var c=i<r.ResvMax*6/10?i:r.ResvMax*6/10;return c-=o,c<0&&(c=0),c},this.ResvAdjust=function(n,a){n.ResvSize-=a.part2_3_length+a.part2_length},this.ResvFrameEnd=function(n,a){var e,s=n.l3_side;n.ResvSize+=a*n.mode_gr;var r=0;s.resvDrain_post=0,s.resvDrain_pre=0,(e=n.ResvSize%8)!=0&&(r+=e),e=n.ResvSize-r-n.ResvMax,e>0&&(r+=e);{var o=Math.min(s.main_data_begin*8,r)/8;s.resvDrain_pre+=8*o,r-=8*o,n.ResvSize-=8*o,s.main_data_begin-=o}s.resvDrain_post+=r,n.ResvSize-=r}}var dKe=cKe;function uKe(){var t="http://www.mp3dev.org/",n=3,a=98,e=4,s=0,r=93;this.getLameVersion=function(){return n+"."+a+"."+e},this.getLameShortVersion=function(){return n+"."+a+"."+e},this.getLameVeryShortVersion=function(){return"LAME"+n+"."+a+"r"},this.getPsyVersion=function(){return s+"."+r},this.getLameUrl=function(){return t},this.getLameOsBitness=function(){return"32bits"}}var pKe=uKe,xd=_a,fKe=xd.System,Bb=xd.VbrMode,jO=xd.ShortBlock,mKe=xd.Arrays,pf=xd.new_byte,hKe=xd.assert;Xu.NUMTOCENTRIES=100;Xu.MAXFRAMESIZE=2880;function Xu(){var t,n,a;this.setModules=function(V,F,$){t=V,n=F,a=$};var e=1,s=2,r=4,o=8,i=Xu.NUMTOCENTRIES,l=Xu.MAXFRAMESIZE,c=i+4+4+4+4+4,d=c+9+1+1+8+1+1+3+1+1+2+4+2+2,u=128,m=64,h=32,_=null,E="Xing",y="Info",b=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function A(V,F){if(V.nVbrNumFrames++,V.sum+=F,V.seen++,!(V.seen<V.want)&&(V.pos<V.size&&(V.bag[V.pos]=V.sum,V.pos++,V.seen=0),V.pos==V.size)){for(var $=1;$<V.size;$+=2)V.bag[$/2]=V.bag[$];V.want*=2,V.pos/=2}}function T(V,F){if(!(V.pos<=0))for(var $=1;$<i;++$){var Y=$/i,j,U,J=0|Math.floor(Y*V.pos);J>V.pos-1&&(J=V.pos-1),j=V.bag[J],U=V.sum;var te=0|256*j/U;te>255&&(te=255),F[$]=255&te}}this.addVbrFrame=function(V){var F=V.internal_flags,$=Tables.bitrate_table[V.version][F.bitrate_index];hKe(F.VBR_seek_table.bag!=null),A(F.VBR_seek_table,$)};function I(V,F){var $=V[F+0]&255;return $<<=8,$|=V[F+1]&255,$<<=8,$|=V[F+2]&255,$<<=8,$|=V[F+3]&255,$}function N(V,F,$){V[F+0]=255&($>>24&255),V[F+1]=255&($>>16&255),V[F+2]=255&($>>8&255),V[F+3]=255&($&255)}function x(V,F,$){V[F+0]=255&($>>8&255),V[F+1]=255&($&255)}function R(V,F){return new String(V,F,E.length(),_).equals(E)||new String(V,F,y.length(),_).equals(y)}function M(V,F,$){return 255&(V<<F|$&~(-1<<F))}function w(V,F){var $=V.internal_flags;F[0]=M(F[0],8,255),F[1]=M(F[1],3,7),F[1]=M(F[1],1,V.out_samplerate<16e3?0:1),F[1]=M(F[1],1,V.version),F[1]=M(F[1],2,1),F[1]=M(F[1],1,V.error_protection?0:1),F[2]=M(F[2],4,$.bitrate_index),F[2]=M(F[2],2,$.samplerate_index),F[2]=M(F[2],1,0),F[2]=M(F[2],1,V.extension),F[3]=M(F[3],2,V.mode.ordinal()),F[3]=M(F[3],2,$.mode_ext),F[3]=M(F[3],1,V.copyright),F[3]=M(F[3],1,V.original),F[3]=M(F[3],2,V.emphasis),F[0]=255;var Y=255&(F[1]&241),j;V.version==1?j=u:V.out_samplerate<16e3?j=h:j=m,V.VBR==Bb.vbr_off&&(j=V.brate);var U;V.free_format?U=0:U=255&16*t.BitrateIndex(j,V.version,V.out_samplerate),V.version==1?(F[1]=255&(Y|10),Y=255&(F[2]&13),F[2]=255&(U|Y)):(F[1]=255&(Y|2),Y=255&(F[2]&13),F[2]=255&(U|Y))}this.getVbrTag=function(V){var F=new VBRTagData,$=0;F.flags=0;var Y=V[$+1]>>3&1,j=V[$+2]>>2&3,U=V[$+3]>>6&3,J=V[$+2]>>4&15;if(J=Tables.bitrate_table[Y][J],V[$+1]>>4==14?F.samprate=Tables.samplerate_table[2][j]:F.samprate=Tables.samplerate_table[Y][j],Y!=0?U!=3?$+=36:$+=21:U!=3?$+=21:$+=13,!R(V,$))return null;$+=4,F.hId=Y;var te=F.flags=I(V,$);if($+=4,te&e&&(F.frames=I(V,$),$+=4),te&s&&(F.bytes=I(V,$),$+=4),te&r){if(F.toc!=null)for(var q=0;q<i;q++)F.toc[q]=V[$+q];$+=i}F.vbrScale=-1,te&o&&(F.vbrScale=I(V,$),$+=4),F.headersize=(Y+1)*72e3*J/F.samprate,$+=21;var K=V[$+0]<<4;K+=V[$+1]>>4;var W=(V[$+1]&15)<<8;return W+=V[$+2]&255,(K<0||K>3e3)&&(K=-1),(W<0||W>3e3)&&(W=-1),F.encDelay=K,F.encPadding=W,F},this.InitVbrTag=function(V){var F=V.internal_flags,$;V.version==1?$=u:V.out_samplerate<16e3?$=h:$=m,V.VBR==Bb.vbr_off&&($=V.brate);var Y=(V.version+1)*72e3*$/V.out_samplerate,j=F.sideinfo_len+d;if(F.VBR_seek_table.TotalFrameSize=Y,Y<j||Y>l){V.bWriteVbrTag=!1;return}F.VBR_seek_table.nVbrNumFrames=0,F.VBR_seek_table.nBytesWritten=0,F.VBR_seek_table.sum=0,F.VBR_seek_table.seen=0,F.VBR_seek_table.want=1,F.VBR_seek_table.pos=0,F.VBR_seek_table.bag==null&&(F.VBR_seek_table.bag=new int[400],F.VBR_seek_table.size=400);var U=pf(l);w(V,U);for(var J=F.VBR_seek_table.TotalFrameSize,te=0;te<J;++te)n.add_dummy_byte(V,U[te]&255,1)};function D(V,F){var $=F^V;return F=F>>8^b[$&255],F}this.updateMusicCRC=function(V,F,$,Y){for(var j=0;j<Y;++j)V[0]=D(F[$+j],V[0])};function B(V,F,$,Y,j){var U=V.internal_flags,J=0,te=V.encoder_delay,q=V.encoder_padding,K=100-10*V.VBR_q-V.quality,W=a.getLameVeryShortVersion(),ee,ae=0,ve,Ce=[1,5,3,2,4,0,3],ue=0|(V.lowpassfreq/100+.5>255?255:V.lowpassfreq/100+.5),ge=0,Me=0,We=0,Ue=V.internal_flags.noise_shaping,Re=0,Le=0,Xe=0,et=0,yt=0,Dt=(V.exp_nspsytune&1)!=0,X=(V.exp_nspsytune&2)!=0,se=!1,ie=!1,fe=V.internal_flags.nogap_total,me=V.internal_flags.nogap_current,De=V.ATHtype,Ye=0,ze;switch(V.VBR){case vbr_abr:ze=V.VBR_mean_bitrate_kbps;break;case vbr_off:ze=V.brate;break;default:ze=V.VBR_min_bitrate_kbps}switch(V.VBR.ordinal()<Ce.length?ee=Ce[V.VBR.ordinal()]:ee=0,ve=16*ae+ee,U.findReplayGain&&(U.RadioGain>510&&(U.RadioGain=510),U.RadioGain<-510&&(U.RadioGain=-510),Me=8192,Me|=3072,U.RadioGain>=0?Me|=U.RadioGain:(Me|=512,Me|=-U.RadioGain)),U.findPeakSample&&(ge=Math.abs(0|U.PeakSample/32767*Math.pow(2,23)+.5)),fe!=-1&&(me>0&&(ie=!0),me<fe-1&&(se=!0)),Ye=De+((Dt?1:0)<<4)+((X?1:0)<<5)+((se?1:0)<<6)+((ie?1:0)<<7),K<0&&(K=0),V.mode){case MONO:Re=0;break;case STEREO:Re=1;break;case DUAL_CHANNEL:Re=2;break;case JOINT_STEREO:V.force_ms?Re=4:Re=3;break;case NOT_SET:default:Re=7;break}V.in_samplerate<=32e3?Xe=0:V.in_samplerate==48e3?Xe=2:V.in_samplerate>48e3?Xe=3:Xe=1,(V.short_blocks==jO.short_block_forced||V.short_blocks==jO.short_block_dispensed||V.lowpassfreq==-1&&V.highpassfreq==-1||V.scale_left<V.scale_right||V.scale_left>V.scale_right||V.disable_reservoir&&V.brate<320||V.noATH||V.ATHonly||De==0||V.in_samplerate<=32e3)&&(Le=1),et=Ue+(Re<<2)+(Le<<5)+(Xe<<6),yt=U.nMusicCRC,N($,Y+J,K),J+=4;for(var He=0;He<9;He++)$[Y+J+He]=255&W.charAt(He);J+=9,$[Y+J]=255&ve,J++,$[Y+J]=255&ue,J++,N($,Y+J,ge),J+=4,x($,Y+J,Me),J+=2,x($,Y+J,We),J+=2,$[Y+J]=255&Ye,J++,ze>=255?$[Y+J]=255:$[Y+J]=255&ze,J++,$[Y+J]=255&te>>4,$[Y+J+1]=255&(te<<4)+(q>>8),$[Y+J+2]=255&q,J+=3,$[Y+J]=255&et,J++,$[Y+J++]=0,x($,Y+J,V.preset),J+=2,N($,Y+J,F),J+=4,x($,Y+J,yt),J+=2;for(var xe=0;xe<J;xe++)j=D($[Y+xe],j);return x($,Y+J,j),J+=2,J}function k(V){V.seek(0);var F=pf(10);V.readFully(F);var $;return new String(F,"ISO-8859-1").startsWith("ID3")?$=0:$=((F[6]&127)<<21|(F[7]&127)<<14|(F[8]&127)<<7|F[9]&127)+F.length,$}this.getLameTagFrame=function(V,F){var $=V.internal_flags;if(!V.bWriteVbrTag||$.Class_ID!=Lame.LAME_ID||$.VBR_seek_table.pos<=0)return 0;if(F.length<$.VBR_seek_table.TotalFrameSize)return $.VBR_seek_table.TotalFrameSize;mKe.fill(F,0,$.VBR_seek_table.TotalFrameSize,0),w(V,F);var Y=pf(i);if(V.free_format)for(var j=1;j<i;++j)Y[j]=255&255*j/100;else T($.VBR_seek_table,Y);var U=$.sideinfo_len;V.error_protection&&(U-=2),V.VBR==Bb.vbr_off?(F[U++]=255&y.charAt(0),F[U++]=255&y.charAt(1),F[U++]=255&y.charAt(2),F[U++]=255&y.charAt(3)):(F[U++]=255&E.charAt(0),F[U++]=255&E.charAt(1),F[U++]=255&E.charAt(2),F[U++]=255&E.charAt(3)),N(F,U,e+s+r+o),U+=4,N(F,U,$.VBR_seek_table.nVbrNumFrames),U+=4;var J=$.VBR_seek_table.nBytesWritten+$.VBR_seek_table.TotalFrameSize;N(F,U,0|J),U+=4,fKe.arraycopy(Y,0,F,U,Y.length),U+=Y.length,V.error_protection&&n.CRC_writeheader($,F);for(var te=0,j=0;j<U;j++)te=D(F[j],te);return U+=B(V,J,F,U,te),$.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(V,F){var $=V.internal_flags;if($.VBR_seek_table.pos<=0||(F.seek(F.length()),F.length()==0))return-1;var Y=k(F);F.seek(Y);var j=pf(l),U=getLameTagFrame(V,j);return U>j.length?-1:(U<1||F.write(j,0,U),0)}}var _Ke=Xu,MD=_a,WO=MD.new_byte,gKe=MD.assert,bKe=y1(),vKe=qYe,EKe=CD,SKe=xD(),TKe=iKe,AKe=RD(),yKe=dKe,IKe=_p,CKe=A1();Ts();var OKe=pKe,NKe=_Ke;function xKe(){this.setModules=function(t,n){}}function RKe(){this.setModules=function(t,n,a){}}function wKe(){}function MKe(){this.setModules=function(t,n){}}function LKe(t,n,a){arguments.length!=3&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),t=1,n=44100,a=128);var e=new bKe,s=new xKe,r=new EKe,o=new CKe,i=new vKe,l=new SKe,c=new TKe,d=new NKe,u=new OKe,m=new MKe,h=new yKe,_=new AKe,E=new RKe,y=new wKe;e.setModules(r,o,i,l,c,d,u,m,y),o.setModules(r,y,u,d),m.setModules(o,u),i.setModules(e),c.setModules(o,h,l,_),l.setModules(_,h,e.enc.psy),h.setModules(o),_.setModules(l),d.setModules(e,o,u),s.setModules(E,y),E.setModules(u,m,i);var b=e.lame_init();b.num_channels=t,b.in_samplerate=n,b.brate=a,b.mode=IKe.STEREO,b.quality=3,b.bWriteVbrTag=!1,b.disable_reservoir=!0,b.write_id3tag_automatic=!1,e.lame_init_params(b);var A=1152,T=0|1.25*A+7200,I=WO(T);this.encodeBuffer=function(N,x){t==1&&(x=N),gKe(N.length==x.length),N.length>A&&(A=N.length,T=0|1.25*A+7200,I=WO(T));var R=e.lame_encode_buffer(b,N,x,N.length,I,0,T);return new Int8Array(I.subarray(0,R))},this.flush=function(){var N=e.lame_encode_flush(b,I,0,T);return new Int8Array(I.subarray(0,N))}}function Ho(){this.dataOffset=0,this.dataLen=0,this.channels=0,this.sampleRate=0}function r_(t){return t.charCodeAt(0)<<24|t.charCodeAt(1)<<16|t.charCodeAt(2)<<8|t.charCodeAt(3)}Ho.RIFF=r_("RIFF");Ho.WAVE=r_("WAVE");Ho.fmt_=r_("fmt ");Ho.data=r_("data");Ho.readHeader=function(t){var n=new Ho,a=t.getUint32(0,!1);if(Ho.RIFF==a&&(t.getUint32(4,!0),Ho.WAVE==t.getUint32(8,!1)&&Ho.fmt_==t.getUint32(12,!1))){var e=t.getUint32(16,!0),s=20;switch(e){case 16:case 18:n.channels=t.getUint16(s+2,!0),n.sampleRate=t.getUint32(s+4,!0);break;default:throw"extended fmt chunk not implemented"}s+=e;for(var r=Ho.data,o=0;r!=a&&(a=t.getUint32(s,!1),o=t.getUint32(s+4,!0),r!=a);)s+=o+8;return n.dataLen=o,n.dataOffset=s+8,n}};b1.Mp3Encoder=LKe;b1.WavHeader=Ho;const ff=(t,n,a)=>{for(let e=0;e<a.length;e++)t.setUint8(n+e,a.charCodeAt(e))},DKe=async(t,n,a)=>{const e=t.length*n*2,s=new ArrayBuffer(44+e),r=new DataView(s);ff(r,0,"RIFF"),r.setUint32(4,36+e,!0),ff(r,8,"WAVE"),ff(r,12,"fmt "),r.setUint32(16,16,!0),r.setUint16(20,1,!0),r.setUint16(22,n,!0),r.setUint32(24,a,!0),r.setUint32(28,a*n*2,!0),r.setUint16(32,n*2,!0),r.setUint16(34,16,!0),ff(r,36,"data"),r.setUint32(40,e,!0);const o=44;for(let i=0;i<t.length;i++)for(let l=0;l<n;l++){const c=Math.max(-1,Math.min(1,t.getChannelData(l)[i]));r.setInt16(o+(i*n+l)*2,c*32767,!0)}return new Blob([s],{type:"audio/wav"})},LD=async t=>{const n=new(window.AudioContext||window.webkitAudioContext),a=await t.arrayBuffer();return await n.decodeAudioData(a)},PKe=async t=>{const n=await LD(t);return DKe(n,n.numberOfChannels,n.sampleRate)},kKe=(t,n,a,e=128)=>{const s=[],r=new b1.Mp3Encoder(t,n,e),o=1152;for(let l=0;l<a.length;l+=o){const c=Math.min(l+o,a.length),d=a.subarray(l,c),u=r.encodeBuffer(d);u.length>0&&s.push(new Int8Array(u))}const i=r.flush();return i.length>0&&s.push(new Int8Array(i)),new Blob(s,{type:"audio/mp3"})},BKe=async(t,n=128)=>{try{const a=await LD(t),e=new Int16Array(a.length*a.numberOfChannels);let s=0;for(let r=0;r<a.length;r+=1)for(let o=0;o<a.numberOfChannels;o+=1){const i=Math.max(-1,Math.min(1,a.getChannelData(o)[r]));e[s]=i<0?i*32768:i*32767,s+=1}return kKe(a.numberOfChannels,a.sampleRate,e,n)}catch{throw new Error("Conversion to MP3 failed.")}},zO=async(t,n,a=128)=>{let e;if(n==="audio/wav")e=await PKe(t);else if(n==="audio/mp3")e=await BKe(t,a);else throw new Error("Unsupported output format");return e},FKe={__name:"AudioRecorder",props:{audioRecordFormat:{type:String,required:!0}},emits:["recorderProgressChanged","finishRecord","pause","play"],setup(t,{expose:n,emit:a}){const e=t,s=a,r=P(null),o=P(null),i=P(null),l=P(!1),c=P(!1),d=P(!1),u=b=>{const A=jy({start:0,end:b});return Mn(new Date(0,0,0,0,A.minutes,A.seconds),"mm:ss")},m=()=>{o.value=gd.create({container:r.value,waveColor:"#1F93FF",progressColor:"#6E6F73",height:100,barWidth:2,barGap:1,barRadius:2,plugins:[Qm.create({scrollingWaveform:!0,renderRecordedAudio:!1})]}),o.value.on("pause",()=>s("pause")),o.value.on("play",()=>s("play")),i.value=o.value.plugins[0],o.value.on("finish",()=>{c.value=!1}),i.value.on("record-end",async b=>{const A=URL.createObjectURL(b),T=await zO(b,e.audioRecordFormat),I=`${aT()}.mp3`,N=new File([T],I,{type:e.audioRecordFormat});o.value.load(A),s("finishRecord",{name:N.name,type:N.type,size:N.size,file:N}),d.value=!0,l.value=!1}),i.value.on("record-progress",b=>{s("recorderProgressChanged",u(b))})},h=()=>{l.value&&(i.value.stopRecording(),l.value=!1)},_=()=>{i.value.startRecording(),l.value=!0},E=()=>{d.value&&(o.value.playPause(),c.value=!c.value)};Pe(()=>{m(),_()}),is(()=>{o.value&&o.value.destroy()}),n({playPause:E,stopRecording:h,record:i});const y={props:e,emit:s,waveformContainer:r,wavesurfer:o,record:i,isRecording:l,isPlaying:c,hasRecording:d,formatTimeProgress:u,initWaveSurfer:m,stopRecording:h,startRecording:_,playPause:E,get getUuid(){return aT},ref:P,onMounted:Pe,onUnmounted:is,get WaveSurfer(){return gd},get RecordPlugin(){return Qm},get format(){return Mn},get intervalToDuration(){return jy},get convertAudio(){return zO}};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}},UKe={ref:"waveformContainer",class:"w-full p-1"};function $Ke(t,n,a,e,s,r){return p(),g("div",UKe,null,512)}const GKe=G(FKe,[["render",$Ke],["__file","/app/app/javascript/dashboard/components/widgets/WootWriter/AudioRecorder.vue"]]),YO="en",KO="UTILITY",Wo={HEADER:"HEADER",BODY:"BODY",BUTTONS:"BUTTONS"},Jm=["IMAGE","VIDEO","DOCUMENT"],lr=(t,n)=>{var a;return(a=t.components)==null?void 0:a.find(e=>e.type===n)},dE=t=>t.replace(/{{|}}/g,""),XO=t=>Object.keys(t).every(a=>t[a]),qO=(t,n)=>t.replace(/{{([^}]+)}}/g,(a,e)=>{var r;const s=dE(e);return((r=n.body)==null?void 0:r[s])||`{{${e}}}`}),ZO=(t,n)=>{const a={},e=lr(t,Wo.BODY),s=lr(t,Wo.HEADER);if(!e)return a;const o=e.text.match(/{{([^}]+)}}/g);return o&&(a.body={},o.forEach(l=>{const c=dE(l);a.body[c]=""})),n&&(a.header||(a.header={}),a.header.media_url="",a.header.media_type=s.format.toLowerCase(),s.format.toLowerCase()==="document"&&(a.header.media_name="")),t.components.filter(l=>l.type===Wo.BUTTONS).forEach(l=>{l.buttons&&l.buttons.forEach((c,d)=>{if(c.type==="URL"&&c.url&&c.url.includes("{{")){const u=c.url.match(/{{([^}]+)}}/g)||[];u.length>0&&(a.buttons||(a.buttons=[]),a.buttons[d]={type:"url",parameter:"",url:c.url,variables:u.map(m=>dE(m))})}c.type==="COPY_CODE"&&(a.buttons||(a.buttons=[]),a.buttons[d]={type:"copy_code",parameter:""})})}),a},VKe={__name:"TemplatesPicker",props:{inboxId:{type:Number,default:void 0}},emits:["onSelect"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=Fe(),i=P(""),l=P(!1),c=Jn("inboxes/getFilteredWhatsAppTemplates",Pc(e,"inboxId")),d=S(()=>c.value.filter(A=>A.name.toLowerCase().includes(i.value.toLowerCase()))),u=A=>{var T;return((T=lr(A,Wo.BODY))==null?void 0:T.text)||""},m=A=>lr(A,Wo.HEADER),b={props:e,emit:s,t:r,store:o,query:i,isRefreshing:l,whatsAppTemplateMessages:c,filteredTemplateMessages:d,getTemplateBody:u,getTemplateHeader:m,getTemplateFooter:A=>lr(A,Wo.FOOTER),getTemplateButtons:A=>lr(A,Wo.BUTTONS),hasMediaContent:A=>{const T=m(A);return T&&Jm.includes(T.format)},refreshTemplates:async()=>{l.value=!0;try{await o.dispatch("inboxes/syncTemplates",e.inboxId),Z(r("WHATSAPP_TEMPLATES.PICKER.REFRESH_SUCCESS"))}catch{Z(r("WHATSAPP_TEMPLATES.PICKER.REFRESH_ERROR"))}finally{l.value=!1}},ref:P,computed:S,toRef:Pc,get useAlert(){return Z},get useFunctionGetter(){return Jn},get useStore(){return Fe},get COMPONENT_TYPES(){return Wo},get MEDIA_FORMATS(){return Jm},get findComponentByType(){return lr},Icon:Bt,get useI18n(){return Q}};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}},HKe={class:"w-full"},jKe={class:"flex gap-2 mb-2.5"},WKe={class:"flex flex-1 gap-1 items-center px-2.5 py-0 rounded-lg bg-n-alpha-black2 outline outline-1 outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6 focus-within:outline-n-brand dark:focus-within:outline-n-brand"},zKe=["placeholder"],YKe=["disabled","title"],KKe={class:"bg-n-background outline-n-container outline outline-1 rounded-lg max-h-[18.75rem] overflow-y-auto p-2.5"},XKe=["onClick"],qKe={class:"flex justify-between items-center mb-2.5"},ZKe={class:"text-sm"},QKe={class:"inline-block px-2 py-1 text-xs leading-none rounded-lg cursor-default bg-n-slate-3 text-n-slate-12"},JKe={key:0,class:"mb-3"},eXe={class:"text-xs font-medium text-n-slate-11"},tXe={key:0,class:"text-sm label-body"},nXe={key:1,class:"text-sm italic text-n-slate-11"},aXe={class:"text-xs font-medium text-n-slate-11"},sXe={class:"text-sm label-body"},oXe={key:1,class:"mt-3"},rXe={class:"text-xs font-medium text-n-slate-11"},iXe={class:"text-sm label-body"},lXe={key:2,class:"mt-3"},cXe={class:"text-xs font-medium text-n-slate-11"},dXe={class:"flex flex-wrap gap-1 mt-1"},uXe={class:"mt-3"},pXe={class:"text-xs font-medium text-n-slate-11"},fXe={class:"text-sm"},mXe={key:0,class:"py-8 text-center"},hXe={key:0},_Xe={key:1,class:"space-y-4"},gXe={class:"text-n-slate-11"};function bXe(t,n,a,e,s,r){const o=H("fluent-icon");return p(),g("div",HKe,[f("div",jKe,[f("div",WKe,[v(o,{icon:"search",class:"text-n-slate-12",size:"16"}),ce(f("input",{"onUpdate:modelValue":n[0]||(n[0]=i=>e.query=i),type:"search",placeholder:e.t("WHATSAPP_TEMPLATES.PICKER.SEARCH_PLACEHOLDER"),class:"reset-base w-full h-9 bg-transparent text-n-slate-12 !text-sm !outline-0"},null,8,zKe),[[Et,e.query]])]),f("button",{disabled:e.isRefreshing,class:"flex justify-center items-center w-9 h-9 rounded-lg bg-n-alpha-black2 outline outline-1 outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6 hover:bg-n-alpha-2 dark:hover:bg-n-solid-2 disabled:opacity-50 disabled:cursor-not-allowed",title:e.t("WHATSAPP_TEMPLATES.PICKER.REFRESH_BUTTON"),onClick:e.refreshTemplates},[v(e.Icon,{icon:"i-lucide-refresh-ccw",class:oe(["text-n-slate-12 size-4",{"animate-spin":e.isRefreshing}])},null,8,["class"])],8,YKe)]),f("div",KKe,[(p(!0),g(de,null,Ae(e.filteredTemplateMessages,(i,l)=>(p(),g("div",{key:i.id},[f("button",{class:"block p-2.5 w-full text-left rounded-lg cursor-pointer hover:bg-n-alpha-2 dark:hover:bg-n-solid-2",onClick:c=>e.emit("onSelect",i)},[f("div",null,[f("div",qKe,[f("p",ZKe,C(i.name),1),f("span",QKe,C(e.t("WHATSAPP_TEMPLATES.PICKER.LABELS.LANGUAGE"))+": "+C(i.language),1)]),O(" Header "),e.getTemplateHeader(i)?(p(),g("div",JKe,[f("p",eXe,C(e.t("WHATSAPP_TEMPLATES.PICKER.HEADER")||"HEADER"),1),e.getTemplateHeader(i).format==="TEXT"?(p(),g("div",tXe,C(e.getTemplateHeader(i).text),1)):e.hasMediaContent(i)?(p(),g("div",nXe,C(e.t("WHATSAPP_TEMPLATES.PICKER.MEDIA_CONTENT",{format:e.getTemplateHeader(i).format})||`${e.getTemplateHeader(i).format} ${e.t("WHATSAPP_TEMPLATES.PICKER.MEDIA_CONTENT_FALLBACK")}`),1)):O("v-if",!0)])):O("v-if",!0),O(" Body "),f("div",null,[f("p",aXe,C(e.t("WHATSAPP_TEMPLATES.PICKER.BODY")||"BODY"),1),f("p",sXe,C(e.getTemplateBody(i)),1)]),O(" Footer "),e.getTemplateFooter(i)?(p(),g("div",oXe,[f("p",rXe,C(e.t("WHATSAPP_TEMPLATES.PICKER.FOOTER")||"FOOTER"),1),f("p",iXe,C(e.getTemplateFooter(i).text),1)])):O("v-if",!0),O(" Buttons "),e.getTemplateButtons(i)?(p(),g("div",lXe,[f("p",cXe,C(e.t("WHATSAPP_TEMPLATES.PICKER.BUTTONS")||"BUTTONS"),1),f("div",dXe,[(p(!0),g(de,null,Ae(e.getTemplateButtons(i).buttons,c=>(p(),g("span",{key:c.text,class:"px-2 py-1 text-xs rounded bg-n-slate-3 text-n-slate-12"},C(c.text),1))),128))])])):O("v-if",!0),f("div",uXe,[f("p",pXe,C(e.t("WHATSAPP_TEMPLATES.PICKER.CATEGORY")||"CATEGORY"),1),f("p",fXe,C(i.category),1)])])],8,XKe),l!=e.filteredTemplateMessages.length-1?(p(),g("hr",{key:`hr-${l}`,class:"border-b border-solid border-n-weak my-2.5 mx-auto max-w-[95%]"})):O("v-if",!0)]))),128)),e.filteredTemplateMessages.length?O("v-if",!0):(p(),g("div",mXe,[e.query&&e.whatsAppTemplateMessages.length?(p(),g("div",hXe,[f("p",null,[Oe(C(e.t("WHATSAPP_TEMPLATES.PICKER.NO_TEMPLATES_FOUND"))+" ",1),f("strong",null,C(e.query),1)])])):e.whatsAppTemplateMessages.length?O("v-if",!0):(p(),g("div",_Xe,[f("p",gXe,C(e.t("WHATSAPP_TEMPLATES.PICKER.NO_TEMPLATES_AVAILABLE")),1)]))]))])])}const vXe=G(VKe,[["render",bXe],["__scopeId","data-v-7d24c491"],["__file","/app/app/javascript/dashboard/components/widgets/conversation/WhatsappTemplates/TemplatesPicker.vue"]]),EXe={__name:"WhatsAppTemplateParser",props:{template:{type:Object,default:()=>({}),validator:t=>!(!t||typeof t!="object"||!t.components||!Array.isArray(t.components))}},emits:["sendMessage","resetTemplate","back"],setup(t,{expose:n,emit:a}){const e=t,s=a,{t:r}=Q(),o=P({}),i=S(()=>`${r("WHATSAPP_TEMPLATES.PARSER.LANGUAGE")}: ${e.template.language||YO}`),l=S(()=>`${r("WHATSAPP_TEMPLATES.PARSER.CATEGORY")}: ${e.template.category||KO}`),c=S(()=>lr(e.template,Wo.HEADER)),d=S(()=>lr(e.template,Wo.BODY)),u=S(()=>{var D;return((D=d.value)==null?void 0:D.text)||""}),m=S(()=>{var D;return Jm.includes((D=c.value)==null?void 0:D.format)}),h=S(()=>{var B;const D=(B=c.value)==null?void 0:B.format;return D?D.charAt(0)+D.slice(1).toLowerCase():""}),_=S(()=>{var D,B;return((B=(D=c.value)==null?void 0:D.format)==null?void 0:B.toLowerCase())==="document"}),E=S(()=>{var D;return((D=u.value)==null?void 0:D.match(/{{([^}]+)}}/g))!==null}),y=S(()=>qO(u.value,o.value)),b=S(()=>{var D;return!E.value&&!m.value?!1:!!(m.value&&!((D=o.value.header)!=null&&D.media_url)||E.value&&o.value.body&&Object.values(o.value.body).some(k=>!k)||o.value.buttons&&o.value.buttons.some(k=>!k.parameter))}),A=rt({processedParams:{requiredIfKeysPresent:Io(E),allKeysRequired:XO}},{processedParams:o}),T=()=>{o.value=ZO(e.template,m.value)},I=D=>{var B;(B=o.value).header??(B.header={}),o.value.header.media_url=D},N=D=>{var B;(B=o.value).header??(B.header={}),o.value.header.media_name=D},x=()=>{if(A.value.$touch(),A.value.$invalid)return;const{name:D,category:B,language:k,namespace:V}=e.template,F={message:y.value,templateParams:{name:D,category:B,language:k,namespace:V,processed_params:o.value}};s("sendMessage",F)},R=()=>{s("resetTemplate")},M=()=>{s("back")};Pe(T),je(()=>e.template,()=>{T(),A.value.$reset()},{deep:!0}),n({processedParams:o,hasVariables:E,hasMediaHeader:m,isDocumentTemplate:_,headerComponent:c,renderedTemplate:y,v$:A,updateMediaUrl:I,updateMediaName:N,sendMessage:x,resetTemplate:R,goBack:M});const w={props:e,emit:s,t:r,processedParams:o,languageLabel:i,categoryLabel:l,headerComponent:c,bodyComponent:d,bodyText:u,hasMediaHeader:m,formatType:h,isDocumentTemplate:_,hasVariables:E,renderedTemplate:y,isFormInvalid:b,v$:A,initializeTemplateParameters:T,updateMediaUrl:I,updateMediaName:N,sendMessage:x,resetTemplate:R,goBack:M,ref:P,computed:S,onMounted:Pe,watch:je,get useVuelidate(){return rt},get requiredIf(){return Io},get useI18n(){return Q},Input:sn,get buildTemplateParameters(){return ZO},get allKeysRequired(){return XO},get replaceTemplateVariables(){return qO},get DEFAULT_LANGUAGE(){return YO},get DEFAULT_CATEGORY(){return KO},get COMPONENT_TYPES(){return Wo},get MEDIA_FORMATS(){return Jm},get findComponentByType(){return lr}};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}},SXe={class:"flex flex-col gap-4 p-4 mb-4 rounded-lg bg-n-alpha-black2"},TXe={class:"flex justify-between items-center"},AXe={class:"text-sm font-medium text-n-slate-12"},yXe={class:"text-xs text-n-slate-11"},IXe={class:"flex flex-col gap-2"},CXe={class:"rounded-md"},OXe={class:"text-sm whitespace-pre-wrap text-n-slate-12"},NXe={class:"text-xs text-n-slate-11"},xXe={key:0},RXe={key:0,class:"mb-4"},wXe={class:"mb-2.5 text-sm font-semibold"},MXe={class:"flex items-center mb-2.5"},LXe={key:0,class:"flex items-center mb-2.5"},DXe={key:1},PXe={class:"mb-2.5 text-sm font-semibold"},kXe={key:2},BXe={class:"mb-2.5 text-sm font-semibold"},FXe={key:3,class:"p-2.5 text-center rounded-md bg-n-ruby-9/20 text-n-ruby-9"};function UXe(t,n,a,e,s,r){var o,i;return p(),g("div",null,[f("div",SXe,[f("div",TXe,[f("h3",AXe,C(a.template.name),1),f("span",yXe,C(e.languageLabel),1)]),f("div",IXe,[f("div",CXe,[f("div",OXe,C(e.renderedTemplate),1)])]),f("div",NXe,C(e.categoryLabel),1)]),e.hasVariables||e.hasMediaHeader?(p(),g("div",xXe,[e.hasMediaHeader?(p(),g("div",RXe,[f("p",wXe,C(t.$t("WHATSAPP_TEMPLATES.PARSER.MEDIA_HEADER_LABEL",{type:e.formatType})||`${e.formatType} Header`),1),f("div",MXe,[v(e.Input,{"model-value":((o=e.processedParams.header)==null?void 0:o.media_url)||"",type:"url",class:"flex-1",placeholder:e.t("WHATSAPP_TEMPLATES.PARSER.MEDIA_URL_LABEL",{type:e.formatType}),"onUpdate:modelValue":e.updateMediaUrl},null,8,["model-value","placeholder"])]),e.isDocumentTemplate?(p(),g("div",LXe,[v(e.Input,{"model-value":((i=e.processedParams.header)==null?void 0:i.media_name)||"",type:"text",class:"flex-1",placeholder:e.t("WHATSAPP_TEMPLATES.PARSER.DOCUMENT_NAME_PLACEHOLDER"),"onUpdate:modelValue":e.updateMediaName},null,8,["model-value","placeholder"])])):O("v-if",!0)])):O("v-if",!0),O(" Body Variables Section "),e.processedParams.body?(p(),g("div",DXe,[f("p",PXe,C(t.$t("WHATSAPP_TEMPLATES.PARSER.VARIABLES_LABEL")),1),(p(!0),g(de,null,Ae(e.processedParams.body,(l,c)=>(p(),g("div",{key:`body-${c}`,class:"flex items-center mb-2.5"},[v(e.Input,{modelValue:e.processedParams.body[c],"onUpdate:modelValue":d=>e.processedParams.body[c]=d,type:"text",class:"flex-1",placeholder:e.t("WHATSAPP_TEMPLATES.PARSER.VARIABLE_PLACEHOLDER",{variable:c})},null,8,["modelValue","onUpdate:modelValue","placeholder"])]))),128))])):O("v-if",!0),O(" Button Variables Section "),e.processedParams.buttons?(p(),g("div",kXe,[f("p",BXe,C(e.t("WHATSAPP_TEMPLATES.PARSER.BUTTON_PARAMETERS")),1),(p(!0),g(de,null,Ae(e.processedParams.buttons,(l,c)=>(p(),g("div",{key:`button-${c}`,class:"flex items-center mb-2.5"},[v(e.Input,{modelValue:e.processedParams.buttons[c].parameter,"onUpdate:modelValue":d=>e.processedParams.buttons[c].parameter=d,type:"text",class:"flex-1",placeholder:e.t("WHATSAPP_TEMPLATES.PARSER.BUTTON_PARAMETER")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]))),128))])):O("v-if",!0),e.v$.$dirty&&e.v$.$invalid?(p(),g("p",FXe,C(t.$t("WHATSAPP_TEMPLATES.PARSER.FORM_ERROR_MESSAGE")),1)):O("v-if",!0)])):O("v-if",!0),qe(t.$slots,"actions",{sendMessage:e.sendMessage,resetTemplate:e.resetTemplate,goBack:e.goBack,isValid:!e.v$.$invalid,disabled:e.isFormInvalid})])}const I1=G(EXe,[["render",UXe],["__file","/app/app/javascript/dashboard/components-next/whatsapp/WhatsAppTemplateParser.vue"]]),$Xe={__name:"WhatsAppTemplateReply",props:{template:{type:Object,default:()=>({})}},emits:["sendMessage","resetTemplate"],setup(t,{expose:n,emit:a}){n();const e=a,o={emit:e,handleSendMessage:i=>{e("sendMessage",i)},handleResetTemplate:()=>{e("resetTemplate")},WhatsAppTemplateParser:I1,NextButton:Se};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},GXe={class:"w-full"},VXe={class:"flex gap-2 justify-end"};function HXe(t,n,a,e,s,r){return p(),g("div",GXe,[v(e.WhatsAppTemplateParser,{template:a.template,onSendMessage:e.handleSendMessage,onResetTemplate:e.handleResetTemplate},{actions:z(({sendMessage:o,resetTemplate:i,disabled:l})=>[f("footer",VXe,[v(e.NextButton,{faded:"",slate:"",type:"reset",label:t.$t("WHATSAPP_TEMPLATES.PARSER.GO_BACK_LABEL"),onClick:i},null,8,["label","onClick"]),v(e.NextButton,{type:"button",label:t.$t("WHATSAPP_TEMPLATES.PARSER.SEND_MESSAGE_LABEL"),disabled:l,onClick:o},null,8,["label","disabled","onClick"])])]),_:1},8,["template"])])}const jXe=G($Xe,[["render",HXe],["__file","/app/app/javascript/dashboard/components/widgets/conversation/WhatsappTemplates/WhatsAppTemplateReply.vue"]]),WXe={components:{TemplatesPicker:vXe,WhatsAppTemplateReply:jXe},props:{show:{type:Boolean,default:!1},inboxId:{type:Number,default:void 0}},emits:["onSend","cancel","update:show"],data(){return{selectedWaTemplate:null}},computed:{localShow:{get(){return this.show},set(t){this.$emit("update:show",t)}},modalHeaderContent(){return this.selectedWaTemplate?this.$t("WHATSAPP_TEMPLATES.MODAL.TEMPLATE_SELECTED_SUBTITLE",{templateName:this.selectedWaTemplate.name}):this.$t("WHATSAPP_TEMPLATES.MODAL.SUBTITLE")}},methods:{pickTemplate(t){this.selectedWaTemplate=t},onResetTemplate(){this.selectedWaTemplate=null},onSendMessage(t){this.$emit("onSend",t)},onClose(){this.$emit("cancel")}}},zXe={class:"row modal-content"};function YXe(t,n,a,e,s,r){const o=H("woot-modal-header"),i=H("TemplatesPicker"),l=H("WhatsAppTemplateReply"),c=H("woot-modal");return p(),L(c,{show:r.localShow,"onUpdate:show":n[0]||(n[0]=d=>r.localShow=d),"on-close":r.onClose,size:"modal-big"},{default:z(()=>[v(o,{"header-title":t.$t("WHATSAPP_TEMPLATES.MODAL.TITLE"),"header-content":r.modalHeaderContent},null,8,["header-title","header-content"]),f("div",zXe,[s.selectedWaTemplate?(p(),L(l,{key:1,template:s.selectedWaTemplate,onResetTemplate:r.onResetTemplate,onSendMessage:r.onSendMessage},null,8,["template","onResetTemplate","onSendMessage"])):(p(),L(i,{key:0,"inbox-id":a.inboxId,onOnSelect:r.pickTemplate},null,8,["inbox-id","onOnSelect"]))])]),_:1},8,["show","on-close"])}const KXe=G(WXe,[["render",YXe],["__scopeId","data-v-0e4f10f2"],["__file","/app/app/javascript/dashboard/components/widgets/conversation/WhatsappTemplates/Modal.vue"]]),XXe={__name:"ContentTemplatesPicker",props:{inboxId:{type:Number,default:void 0}},emits:["onSelect"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=Fe(),i=P(""),l=P(!1),c=S(()=>{var E;const _=o.getters["inboxes/getInbox"](e.inboxId);return((E=_==null?void 0:_.content_templates)==null?void 0:E.templates)||[]}),d=S(()=>c.value.filter(_=>_.friendly_name.toLowerCase().includes(i.value.toLowerCase())&&_.status==="approved")),h={props:e,emit:s,t:r,store:o,query:i,isRefreshing:l,twilioTemplates:c,filteredTemplateMessages:d,getTemplateType:_=>_.template_type===ru.MEDIA?r("CONTENT_TEMPLATES.PICKER.TYPES.MEDIA"):_.template_type===ru.QUICK_REPLY?r("CONTENT_TEMPLATES.PICKER.TYPES.QUICK_REPLY"):r("CONTENT_TEMPLATES.PICKER.TYPES.TEXT"),refreshTemplates:async()=>{l.value=!0;try{await o.dispatch("inboxes/syncTemplates",e.inboxId),Z(r("CONTENT_TEMPLATES.PICKER.REFRESH_SUCCESS"))}catch{Z(r("CONTENT_TEMPLATES.PICKER.REFRESH_ERROR"))}finally{l.value=!1}},ref:P,computed:S,get useAlert(){return Z},get useStore(){return Fe},Icon:Bt,get useI18n(){return Q},get TWILIO_CONTENT_TEMPLATE_TYPES(){return ru}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}},qXe={class:"w-full"},ZXe={class:"flex gap-2 mb-2.5"},QXe={class:"flex flex-1 gap-1 items-center px-2.5 py-0 rounded-lg bg-n-alpha-black2 outline outline-1 outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6 focus-within:outline-n-brand dark:focus-within:outline-n-brand"},JXe=["placeholder"],eqe=["disabled","title"],tqe={class:"bg-n-background outline-n-container outline outline-1 rounded-lg max-h-[18.75rem] overflow-y-auto p-2.5"},nqe=["onClick"],aqe={class:"flex justify-between items-center mb-2.5"},sqe={class:"text-sm"},oqe={class:"flex gap-2"},rqe={class:"inline-block px-2 py-1 text-xs leading-none rounded-lg cursor-default bg-n-slate-3 text-n-slate-12"},iqe={class:"inline-block px-2 py-1 text-xs leading-none rounded-lg cursor-default bg-n-slate-3 text-n-slate-12"},lqe={class:"text-xs font-medium text-n-slate-11"},cqe={class:"text-sm label-body"},dqe={class:"flex justify-between items-center mt-3"},uqe={class:"text-xs font-medium text-n-slate-11"},pqe={class:"text-sm"},fqe={class:"text-xs text-n-slate-11"},mqe={key:0,class:"py-8 text-center"},hqe={key:0},_qe={key:1,class:"space-y-4"},gqe={class:"text-n-slate-11"};function bqe(t,n,a,e,s,r){const o=H("fluent-icon");return p(),g("div",qXe,[f("div",ZXe,[f("div",QXe,[v(o,{icon:"search",class:"text-n-slate-12",size:"16"}),ce(f("input",{"onUpdate:modelValue":n[0]||(n[0]=i=>e.query=i),type:"search",placeholder:e.t("CONTENT_TEMPLATES.PICKER.SEARCH_PLACEHOLDER"),class:"reset-base w-full h-9 bg-transparent text-n-slate-12 !text-sm !outline-0"},null,8,JXe),[[Et,e.query]])]),f("button",{disabled:e.isRefreshing,class:"flex justify-center items-center w-9 h-9 rounded-lg bg-n-alpha-black2 outline outline-1 outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6 hover:bg-n-alpha-2 dark:hover:bg-n-solid-2 disabled:opacity-50 disabled:cursor-not-allowed",title:e.t("CONTENT_TEMPLATES.PICKER.REFRESH_BUTTON"),onClick:e.refreshTemplates},[v(e.Icon,{icon:"i-lucide-refresh-ccw",class:oe(["text-n-slate-12 size-4",{"animate-spin":e.isRefreshing}])},null,8,["class"])],8,eqe)]),f("div",tqe,[(p(!0),g(de,null,Ae(e.filteredTemplateMessages,(i,l)=>(p(),g("div",{key:i.content_sid},[f("button",{class:"block p-2.5 w-full text-left rounded-lg cursor-pointer hover:bg-n-alpha-2 dark:hover:bg-n-solid-2",onClick:c=>e.emit("onSelect",i)},[f("div",null,[f("div",aqe,[f("p",sqe,C(i.friendly_name),1),f("div",oqe,[f("span",rqe,C(e.getTemplateType(i)),1),f("span",iqe,C(`${e.t("CONTENT_TEMPLATES.PICKER.LABELS.LANGUAGE")}: ${i.language}`),1)])]),O(" Body "),f("div",null,[f("p",lqe,C(e.t("CONTENT_TEMPLATES.PICKER.BODY")),1),f("p",cqe,C(i.body||e.t("CONTENT_TEMPLATES.PICKER.NO_CONTENT")),1)]),f("div",dqe,[f("div",null,[f("p",uqe,C(e.t("CONTENT_TEMPLATES.PICKER.LABELS.CATEGORY")),1),f("p",pqe,C(i.category||"utility"),1)]),f("div",fqe,C(new Date(i.created_at).toLocaleDateString()),1)])])],8,nqe),l!=e.filteredTemplateMessages.length-1?(p(),g("hr",{key:`hr-${l}`,class:"border-b border-solid border-n-weak my-2.5 mx-auto max-w-[95%]"})):O("v-if",!0)]))),128)),e.filteredTemplateMessages.length?O("v-if",!0):(p(),g("div",mqe,[e.query&&e.twilioTemplates.length?(p(),g("div",hqe,[f("p",null,[Oe(C(e.t("CONTENT_TEMPLATES.PICKER.NO_TEMPLATES_FOUND"))+" ",1),f("strong",null,C(e.query),1)])])):e.twilioTemplates.length?O("v-if",!0):(p(),g("div",_qe,[f("p",gqe,C(e.t("CONTENT_TEMPLATES.PICKER.NO_TEMPLATES_AVAILABLE")),1)]))]))])])}const vqe=G(XXe,[["render",bqe],["__scopeId","data-v-293f45fe"],["__file","/app/app/javascript/dashboard/components/widgets/conversation/ContentTemplates/ContentTemplatesPicker.vue"]]),Eqe={__name:"ContentTemplateParser",props:{template:{type:Object,default:()=>({}),validator:t=>!(!t||typeof t!="object"||!t.friendly_name)}},emits:["sendMessage","resetTemplate","back"],setup(t,{expose:n,emit:a}){const e=t,s=a,r=/{{([^}]+)}}/g,{t:o}=Q(),i=P({}),l=S(()=>`${o("CONTENT_TEMPLATES.PARSER.LANGUAGE")}: ${e.template.language||"en"}`),c=S(()=>`${o("CONTENT_TEMPLATES.PARSER.CATEGORY")}: ${e.template.category||"utility"}`),d=S(()=>e.template.body||""),u=S(()=>e.template.template_type===ru.MEDIA),m=S(()=>{var w;return((w=d.value)==null?void 0:w.match(r))!==null}),h=S(()=>{var D,B,k,V,F;if(!u.value)return null;const w=(V=(k=(B=(D=e.template)==null?void 0:D.types)==null?void 0:B["twilio/media"])==null?void 0:k.media)==null?void 0:V[0];return w?((F=w.match(/{{(\d+)}}/))==null?void 0:F[1])??null:null}),_=S(()=>u.value&&h.value!==null),E=S(()=>{var w,D,B,k;return u.value&&((k=(B=(D=(w=e.template)==null?void 0:w.types)==null?void 0:D["twilio/media"])==null?void 0:B.media)==null?void 0:k[0])||""}),y=S(()=>m.value?(d.value.match(r)||[]).map(D=>D.replace(/[{}]/g,"")):[]),b=S(()=>{let w=d.value;return i.value&&Object.keys(i.value).length>0&&(w=w.replace(r,(D,B)=>{const k=B.trim();return i.value[k]||D})),w}),A=S(()=>!m.value&&!_.value?!1:!!(m.value&&y.value.some(D=>!i.value[D])||_.value&&h.value&&!i.value[h.value])),T=rt({processedParams:{requiredIfKeysPresent:Io(()=>m.value||_.value)}},{processedParams:i}),I=()=>{i.value={},m.value&&y.value.forEach(w=>{i.value[w]=""}),_.value&&h.value&&(i.value[h.value]="")},N=()=>{if(T.value.$touch(),T.value.$invalid||A.value)return;const{friendly_name:w,language:D}=e.template,B={...i.value};_.value&&h.value&&B[h.value]&&(B[h.value]=xT(B[h.value]));const k={message:b.value,templateParams:{name:w,language:D,processed_params:B}};s("sendMessage",k)},x=()=>{s("resetTemplate")},R=()=>{s("back")};Pe(I),je(()=>e.template,()=>{I(),T.value.$reset()},{deep:!0}),n({processedParams:i,hasVariables:m,hasMediaTemplate:u,renderedTemplate:b,v$:T,sendMessage:N,resetTemplate:x,goBack:R});const M={props:e,emit:s,VARIABLE_PATTERN:r,t:o,processedParams:i,languageLabel:l,categoryLabel:c,templateBody:d,hasMediaTemplate:u,hasVariables:m,mediaVariableKey:h,hasMediaVariable:_,templateMediaUrl:E,variablePattern:y,renderedTemplate:b,isFormInvalid:A,v$:T,initializeTemplateParameters:I,sendMessage:N,resetTemplate:x,goBack:R,ref:P,computed:S,onMounted:Pe,watch:je,get useVuelidate(){return rt},get requiredIf(){return Io},get useI18n(){return Q},get extractFilenameFromUrl(){return xT},get TWILIO_CONTENT_TEMPLATE_TYPES(){return ru},Input:sn};return Object.defineProperty(M,"__isScriptSetup",{enumerable:!1,value:!0}),M}},Sqe={class:"flex flex-col gap-4 p-4 mb-4 rounded-lg bg-n-alpha-black2"},Tqe={class:"flex justify-between items-center"},Aqe={class:"text-sm font-medium text-n-slate-12"},yqe={class:"text-xs text-n-slate-11"},Iqe={class:"flex flex-col gap-2"},Cqe={class:"rounded-md"},Oqe={class:"text-sm whitespace-pre-wrap text-n-slate-12"},Nqe={class:"text-xs text-n-slate-11"},xqe={key:0},Rqe={key:0,class:"mb-4"},wqe={class:"mb-2.5 text-sm font-semibold"},Mqe={class:"flex items-center mb-2.5"},Lqe={key:1},Dqe={class:"mb-2.5 text-sm font-semibold"},Pqe={key:2,class:"p-2.5 text-center rounded-md bg-n-ruby-9/20 text-n-ruby-9"};function kqe(t,n,a,e,s,r){return p(),g("div",null,[f("div",Sqe,[f("div",Tqe,[f("h3",Aqe,C(a.template.friendly_name),1),f("span",yqe,C(e.languageLabel),1)]),f("div",Iqe,[f("div",Cqe,[f("div",Oqe,C(e.renderedTemplate),1)])]),f("div",Nqe,C(e.categoryLabel),1)]),e.hasVariables||e.hasMediaVariable?(p(),g("div",xqe,[O(" Media URL for media templates "),e.hasMediaVariable?(p(),g("div",Rqe,[f("p",wqe,C(t.$t("CONTENT_TEMPLATES.PARSER.MEDIA_URL_LABEL")),1),f("div",Mqe,[v(e.Input,{modelValue:e.processedParams[e.mediaVariableKey],"onUpdate:modelValue":n[0]||(n[0]=o=>e.processedParams[e.mediaVariableKey]=o),type:"url",class:"flex-1",placeholder:e.templateMediaUrl||e.t("CONTENT_TEMPLATES.PARSER.MEDIA_URL_PLACEHOLDER")},null,8,["modelValue","placeholder"])])])):O("v-if",!0),O(" Body Variables Section "),e.hasVariables?(p(),g("div",Lqe,[f("p",Dqe,C(t.$t("CONTENT_TEMPLATES.PARSER.VARIABLES_LABEL")),1),(p(!0),g(de,null,Ae(e.variablePattern,o=>(p(),g("div",{key:`variable-${o}`,class:"flex items-center mb-2.5"},[v(e.Input,{modelValue:e.processedParams[o],"onUpdate:modelValue":i=>e.processedParams[o]=i,type:"text",class:"flex-1",placeholder:e.t("CONTENT_TEMPLATES.PARSER.VARIABLE_PLACEHOLDER",{variable:o})},null,8,["modelValue","onUpdate:modelValue","placeholder"])]))),128))])):O("v-if",!0),e.v$.$dirty&&(e.v$.$invalid||e.isFormInvalid)?(p(),g("p",Pqe,C(t.$t("CONTENT_TEMPLATES.PARSER.FORM_ERROR_MESSAGE")),1)):O("v-if",!0)])):O("v-if",!0),qe(t.$slots,"actions",{sendMessage:e.sendMessage,resetTemplate:e.resetTemplate,goBack:e.goBack,isValid:!e.v$.$invalid&&!e.isFormInvalid,disabled:e.isFormInvalid})])}const DD=G(Eqe,[["render",kqe],["__file","/app/app/javascript/dashboard/components-next/content-templates/ContentTemplateParser.vue"]]),Bqe={__name:"ContentTemplatesModal",props:{show:{type:Boolean,default:!1},inboxId:{type:Number,default:void 0}},emits:["onSend","cancel","update:show"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=P(null),i=S({get(){return e.show},set(_){s("update:show",_)}}),l=S(()=>o.value?r("CONTENT_TEMPLATES.MODAL.TEMPLATE_SELECTED_SUBTITLE",{templateName:o.value.friendly_name}):r("CONTENT_TEMPLATES.MODAL.SUBTITLE")),h={props:e,emit:s,t:r,selectedContentTemplate:o,localShow:i,modalHeaderContent:l,pickTemplate:_=>{o.value=_},onResetTemplate:()=>{o.value=null},onSendMessage:_=>{s("onSend",_)},onClose:()=>{s("cancel")},ref:P,computed:S,get useI18n(){return Q},TemplatesPicker:vqe,TemplateParser:DD,Button:Se};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}},Fqe={class:"px-8 py-6 row"},Uqe={class:"flex gap-2 mt-6"};function $qe(t,n,a,e,s,r){const o=H("woot-modal-header"),i=H("woot-modal");return p(),L(i,{show:e.localShow,"onUpdate:show":n[0]||(n[0]=l=>e.localShow=l),"on-close":e.onClose,size:"modal-big"},{default:z(()=>[v(o,{"header-title":t.$t("CONTENT_TEMPLATES.MODAL.TITLE"),"header-content":e.modalHeaderContent},null,8,["header-title","header-content"]),f("div",Fqe,[e.selectedContentTemplate?(p(),L(e.TemplateParser,{key:1,template:e.selectedContentTemplate,onResetTemplate:e.onResetTemplate,onSendMessage:e.onSendMessage},{actions:z(({sendMessage:l,resetTemplate:c,disabled:d})=>[f("div",Uqe,[v(e.Button,{label:e.t("CONTENT_TEMPLATES.PARSER.GO_BACK_LABEL"),color:"slate",variant:"faded",class:"flex-1",onClick:c},null,8,["label","onClick"]),v(e.Button,{label:e.t("CONTENT_TEMPLATES.PARSER.SEND_MESSAGE_LABEL"),class:"flex-1",disabled:d,onClick:l},null,8,["label","disabled","onClick"])])]),_:1},8,["template"])):(p(),L(e.TemplatesPicker,{key:0,"inbox-id":a.inboxId,onOnSelect:e.pickTemplate},null,8,["inbox-id"]))])]),_:1},8,["show"])}const Gqe=G(Bqe,[["render",$qe],["__file","/app/app/javascript/dashboard/components/widgets/conversation/ContentTemplates/ContentTemplatesModal.vue"]]),QO=t=>{if(!t)return"";if(typeof document>"u")return t.replace(/<[^>]*>/g," ");const n=document.createElement("div");return n.innerHTML=t,n.textContent||n.innerText||""},Vqe=(t,n)=>{var s;const a=(s=t==null?void 0:t.sender)==null?void 0:s.name;if(a&&a.trim())return a.trim();const e=n==null?void 0:n.name;return e&&e.trim()?e.trim():""},Hqe=(t,n)=>{var o;const a=(o=t==null?void 0:t.sender)==null?void 0:o.email;if(a&&a.trim())return a.trim();const s=((t==null?void 0:t.contentAttributes)||(t==null?void 0:t.content_attributes)||{}).email||{};if(Array.isArray(s.from)&&s.from.length>0){const i=s.from[0];if(i&&i.trim())return i.trim()}const r=n==null?void 0:n.email;return r&&r.trim()?r.trim():""},PD=t=>{const a=((t==null?void 0:t.contentAttributes)||(t==null?void 0:t.content_attributes)||{}).email||{};if(a.date){const s=um(a.date);if(Ws(s))return s}const e=t==null?void 0:t.created_at;if(e){const s=Number(e);if(!Number.isNaN(s)){const r=s>1e12?s:s*1e3,o=new Date(r);if(!Number.isNaN(o.getTime()))return o}}return null},kD=t=>{try{return Mn(t,"EEE, MMM d, yyyy 'at' p")}catch{const a=new Date(t);if(!Number.isNaN(a.getTime()))return Mn(a,"EEE, MMM d, yyyy 'at' p")}return""},jqe=(t,n)=>{const e=((t==null?void 0:t.contentAttributes)||(t==null?void 0:t.content_attributes)||{}).email||{};if(Array.isArray(e.to)&&e.to.length>0){const r=e.to[0];if(r&&r.trim())return r.trim()}const s=n==null?void 0:n.email;return s&&s.trim()?s.trim():""},Wqe=(t,n)=>{if(!t)return"";const a=PD(t),e=Hqe(t,n);if(!a||!e)return"";const s=kD(a);if(!s)return"";const r=Vqe(t,n),i=!!r?`${r} <${e}>`:`<${e}>`;return`On ${s} ${i} wrote:`},zqe=(t,n)=>{if(!t)return"";const a=PD(t),e=jqe(t,n);if(!a||!e)return"";const s=kD(a);if(!s)return"";const r=n==null?void 0:n.name,i=!!r?`${r} <${e}>`:`<${e}>`;return`On ${s} ${i} wrote:`},Yqe=(t,n,a)=>t?t.message_type===1?zqe(t,a):Wqe(t,n):"",Kqe=(t,n="")=>{const a=t?String(t).replace(/\r\n/g,`
`).split(`
`):[];if(!n&&!a.length)return"";const e=[];return n&&(e.push(`> ${n}`),e.push(">")),a.forEach(s=>{const r=s.trimEnd();e.push(r?`> ${r}`:">")}),e.join(`
`)},Xqe=t=>{if(!t)return"";const a=(t.contentAttributes||t.content_attributes||{}).email||{},e=a.textContent||a.text_content;if(e!=null&&e.reply)return e.reply;if(e!=null&&e.full)return e.full;const s=a.htmlContent||a.html_content;return s!=null&&s.reply?QO(s.reply):s!=null&&s.full?QO(s.full):t.content||t.processed_message_content||""},qqe=(t,n=80)=>{const a=t.trim().replace(/\s+/g," ");return a?a.length<=n?a:`${a.slice(0,n-3)}...`:""},Zqe=(t,n,a)=>{const e=t?String(t):"",s=Kqe(n,a);if(!s)return e;if(!e)return s;let r=`

`;return e.endsWith(`

`)?r="":e.endsWith(`
`)&&(r=`
`),`${e}${r}${s}`},Qqe={computed:{..._t({accountId:"getCurrentAccountId"})},methods:{maxSizeFor(t){var n,a;return this.isOnPrivateNote?p2:m2({channelType:(n=this.inbox)==null?void 0:n.channel_type,medium:(a=this.inbox)==null?void 0:a.medium,mime:t})},alertOverLimit(t){Z(this.$t("CONVERSATION.FILE_SIZE_LIMIT",{MAXIMUM_SUPPORTED_FILE_UPLOAD_SIZE:t}))},onFileUpload(t){this.globalConfig.directUploadsEnabled?this.onDirectFileUpload(t):this.onIndirectFileUpload(t)},onDirectFileUpload(t){var s;if(!t)return;const n=((s=t.file)==null?void 0:s.type)||t.type,a=this.maxSizeFor(n);if(!Jc(t,a)){this.alertOverLimit(a);return}new CE.DirectUpload(t.file,`/api/v1/accounts/${this.accountId}/conversations/${this.currentChat.id}/direct_uploads`,{directUploadWillCreateBlobWithXHR:r=>{r.setRequestHeader("api_access_token",this.currentUser.access_token)}}).create((r,o)=>{r?Z(r):this.attachFile({file:t,blob:o})})},onIndirectFileUpload(t){var e;if(!t)return;const n=((e=t.file)==null?void 0:e.type)||t.type,a=this.maxSizeFor(n);if(!Jc(t,a)){this.alertOverLimit(a);return}this.attachFile({file:t})}}},Jqe=Uf(()=>ti(()=>import("./EmojiInput-8IkZz3o1.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]))),eZe={components:{ArticleSearchPopover:Rze,AttachmentPreview:Mje,AudioRecorder:GKe,CannedResponse:CS,ReplyBoxBanner:Fze,EmojiInput:Jqe,MessageSignatureMissingAlert:Pze,ReplyBottomPanel:HWe,ReplyEmailHead:nWe,ReplyToMessage:Eje,ReplyTopPanel:Vje,ResizableTextArea:IE,ContentTemplates:Gqe,WhatsappTemplates:KXe,WootMessageEditor:ai,QuotedEmailPreview:Wze},mixins:[Ad,Qqe,hje],props:{popOutReplyBox:{type:Boolean,default:!1}},emits:["update:popOutReplyBox"],setup(){const{uiSettings:t,updateUISettings:n,isEditorHotKeyEnabled:a,fetchSignatureFlagFromUISettings:e,setQuotedReplyFlagForInbox:s,fetchQuotedReplyFlagFromUISettings:r}=Ct(),o=xn("replyEditor");return{uiSettings:t,updateUISettings:n,isEditorHotKeyEnabled:a,fetchSignatureFlagFromUISettings:e,setQuotedReplyFlagForInbox:s,fetchQuotedReplyFlagFromUISettings:r,replyEditor:o}},data(){return{message:"",inReplyTo:{},isFocused:!1,showEmojiPicker:!1,attachedFiles:[],isRecordingAudio:!1,recordingAudioState:"",recordingAudioDurationText:"",isUploading:!1,replyType:ss.REPLY,mentionSearchKey:"",hasSlashCommand:!1,bccEmails:"",ccEmails:"",toEmails:"",doAutoSaveDraft:()=>{},showWhatsAppTemplatesModal:!1,showContentTemplatesModal:!1,updateEditorSelectionWith:"",undefinedVariableMessage:"",showMentions:!1,showUserMentions:!1,showCannedMenu:!1,showVariablesMenu:!1,newConversationModalActive:!1,showArticleSearchPopover:!1,hasRecordedAudio:!1}},computed:{..._t({currentChat:"getSelectedChat",messageSignature:"getMessageSignature",currentUser:"getCurrentUser",lastEmail:"getLastEmailInSelectedChat",globalConfig:"globalConfig/get",accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"}),currentContact(){return this.$store.getters["contacts/getContact"](this.currentChat.meta.sender.id)},shouldShowReplyToMessage(){var t;return((t=this.inReplyTo)==null?void 0:t.id)&&!this.isPrivate&&this.inboxHasFeature(ju.REPLY_TO)&&!this.is360DialogWhatsAppChannel},showRichContentEditor(){if(this.isOnPrivateNote||this.isRichEditorEnabled)return!0;if(this.isAPIInbox){const{display_rich_content_editor:t=!1}=this.uiSettings;return t}return!1},showWhatsappTemplates(){return this.isAWhatsAppCloudChannel&&!this.isPrivate},showContentTemplates(){return this.isATwilioWhatsAppChannel&&!this.isPrivate},isPrivate(){return this.currentChat.can_reply||this.isAWhatsAppChannel?this.isOnPrivateNote:!0},isReplyRestricted(){var t;return!((t=this.currentChat)!=null&&t.can_reply)&&!this.isAWhatsAppChannel},inboxId(){return this.currentChat.inbox_id},inbox(){return this.$store.getters["inboxes/getInbox"](this.inboxId)},messagePlaceHolder(){return this.isPrivate?this.$t("CONVERSATION.FOOTER.PRIVATE_MSG_INPUT"):this.$t("CONVERSATION.FOOTER.MSG_INPUT")},isMessageLengthReachingThreshold(){return this.message.length>this.maxLength-50},charactersRemaining(){return this.maxLength-this.message.length},isReplyButtonDisabled(){return this.isATwitterInbox?!0:this.hasAttachments||this.hasRecordedAudio?!1:this.isMessageEmpty||this.message.length===0||this.message.length>this.maxLength},sender(){return{name:this.currentUser.name,thumbnail:this.currentUser.avatar_url}},conversationType(){const{additional_attributes:t}=this.currentChat;return(t?t.type:"")||""},maxLength(){return this.isPrivate?sr.GENERAL:this.isAFacebookInbox?sr.FACEBOOK:this.isAnInstagramChannel?sr.INSTAGRAM:this.isATwilioWhatsAppChannel?sr.TWILIO_WHATSAPP:this.isAWhatsAppCloudChannel?sr.WHATSAPP_CLOUD:this.isASmsInbox?sr.TWILIO_SMS:this.isAnEmailChannel?sr.EMAIL:this.isATwilioSMSChannel?sr.TWILIO_SMS:this.isAWhatsAppChannel?sr.WHATSAPP_CLOUD:sr.GENERAL},showFileUpload(){return this.isAWebWidgetInbox||this.isAFacebookInbox||this.isAWhatsAppChannel||this.isAPIInbox||this.isAnEmailChannel||this.isASmsInbox||this.isATelegramChannel||this.isALineChannel||this.isAnInstagramChannel},replyButtonLabel(){let t=this.$t("CONVERSATION.REPLYBOX.SEND");this.isPrivate&&(t=this.$t("CONVERSATION.REPLYBOX.CREATE"));const n=this.isEditorHotKeyEnabled("cmd_enter")?"( + )":"()";return`${t} ${n}`},replyBoxClass(){return{"is-private":this.isPrivate,"is-focused":this.isFocused||this.hasAttachments}},hasAttachments(){return this.attachedFiles.length},isRichEditorEnabled(){return this.isAWebWidgetInbox||this.isAnEmailChannel},showAudioRecorder(){return!this.isOnPrivateNote&&this.showFileUpload},showAudioRecorderEditor(){return this.showAudioRecorder&&this.isRecordingAudio},isOnPrivateNote(){return this.replyType===ss.NOTE},isOnExpandedLayout(){const{LAYOUT_TYPES:{CONDENSED:t}}=gt,{conversation_display_type:n=t}=this.uiSettings;return n!==t},isMessageEmpty(){return this.message?!this.message.trim().replace(/\n/g,"").length:!0},showReplyHead(){return!this.isOnPrivateNote&&this.isAnEmailChannel},enableMultipleFileUpload(){return this.isAnEmailChannel||this.isAWebWidgetInbox||this.isAPIInbox||this.isAWhatsAppChannel||this.isATelegramChannel},isSignatureEnabledForInbox(){return!this.isPrivate&&this.sendWithSignature},isSignatureAvailable(){return!!this.signatureToApply},sendWithSignature(){return this.fetchSignatureFlagFromUISettings(this.channelType)},editorMessageKey(){const{editor_message_key:t}=this.uiSettings;return t},commandPlusEnterToSendEnabled(){return this.editorMessageKey==="cmd_enter"},enterToSendEnabled(){return this.editorMessageKey==="enter"},conversationId(){return this.currentChat.id},conversationIdByRoute(){return this.conversationId},editorStateId(){return`draft-${this.conversationIdByRoute}-${this.replyType}`},audioRecordFormat(){return this.isAWhatsAppChannel||this.isATelegramChannel?v_.MP3:this.isAPIInbox?v_.MP3:v_.WAV},messageVariables(){return nk({conversation:this.currentChat,contact:this.currentContact,inbox:this.inbox})},signatureToApply(){return this.showRichContentEditor?this.messageSignature:Xo(this.messageSignature)},connectedPortalSlug(){const{help_center:t={}}=this.inbox,{slug:n=""}=t;return n},isQuotedEmailReplyEnabled(){return this.isFeatureEnabledonAccount(this.accountId,pt.QUOTED_EMAIL_REPLY)},quotedReplyPreference(){return!this.isAnEmailChannel||!this.isQuotedEmailReplyEnabled?!1:!!this.fetchQuotedReplyFlagFromUISettings(this.channelType)},lastEmailWithQuotedContent(){if(!this.isAnEmailChannel)return null;const t=this.lastEmail;return!t||t.private?null:t},quotedEmailText(){return Xqe(this.lastEmailWithQuotedContent)},quotedEmailPreviewText(){return qqe(this.quotedEmailText,80)},shouldShowQuotedReplyToggle(){return this.isAnEmailChannel&&!this.isOnPrivateNote&&this.isQuotedEmailReplyEnabled},shouldShowQuotedPreview(){return this.shouldShowQuotedReplyToggle&&this.quotedReplyPreference&&!!this.quotedEmailText}},watch:{currentChat(t,n){const{can_reply:a}=t;n&&n.id!==t.id&&this.setCCAndToEmailsFromLastChat(),!this.isOnPrivateNote&&(a||this.isAWhatsAppChannel?this.replyType=ss.REPLY:this.replyType=ss.NOTE,this.fetchAndSetReplyTo())},lastEmail:{handler(t){t&&this.setCCAndToEmailsFromLastChat()},deep:!0},conversationIdByRoute(t,n){t!==n&&(this.setToDraft(n,this.replyType),this.getFromDraft(),this.resetRecorderAndClearAttachments())},message(t){const n=Ks(t,this.signatureToApply),a=n.startsWith("/");this.hasSlashCommand=a&&!this.showRichContentEditor,this.showMentions=this.hasSlashCommand,this.mentionSearchKey=this.hasSlashCommand?n.substring(1):"",this.doAutoSaveDraft()},replyType(t,n){this.setToDraft(this.conversationIdByRoute,n),this.getFromDraft()}},mounted(){this.getFromDraft(),document.addEventListener("paste",this.onPaste),document.addEventListener("keydown",this.handleKeyEvents),this.setCCAndToEmailsFromLastChat(),this.doAutoSaveDraft=Ja(()=>{this.saveDraft(this.conversationIdByRoute,this.replyType)},500,!0),this.fetchAndSetReplyTo(),Mt.on(cn.TOGGLE_REPLY_TO_MESSAGE,this.fetchAndSetReplyTo),Mt.on(cn.NEW_CONVERSATION_MODAL,this.onNewConversationModalActive),Mt.on(cn.INSERT_INTO_NORMAL_EDITOR,this.addIntoEditor)},unmounted(){document.removeEventListener("paste",this.onPaste),document.removeEventListener("keydown",this.handleKeyEvents),Mt.off(cn.TOGGLE_REPLY_TO_MESSAGE,this.fetchAndSetReplyTo),Mt.off(cn.INSERT_INTO_NORMAL_EDITOR,this.addIntoEditor),Mt.off(cn.NEW_CONVERSATION_MODAL,this.onNewConversationModalActive)},methods:{handleInsert(t){const{url:n,title:a}=t;if(this.isRichEditorEnabled){const r=a.split(`
`).filter(o=>o.trim()!=="").join(" ");Mt.emit(cn.INSERT_INTO_RICH_EDITOR,`[${r}](${n})`)}else this.addIntoEditor(`${this.$t("CONVERSATION.REPLYBOX.INSERT_READ_MORE")} ${n}`);Nt($a.INSERT_ARTICLE_LINK)},toggleRichContentEditor(){this.updateUISettings({display_rich_content_editor:!this.showRichContentEditor});const t=Xo(this.messageSignature);if(!this.showRichContentEditor&&this.messageSignature){let n=Ks(this.message,this.messageSignature);n=Xo(n),n=Oo(n,t),this.message=n}else this.message=$4(this.message,t,this.messageSignature)},toggleQuotedReply(){if(!this.isAnEmailChannel)return;const t=!this.quotedReplyPreference;this.setQuotedReplyFlagForInbox(this.channelType,t)},shouldIncludeQuotedEmail(){return this.isQuotedEmailReplyEnabled&&this.quotedReplyPreference&&this.shouldShowQuotedReplyToggle&&!!this.quotedEmailText},getMessageWithQuotedEmailText(t){if(!this.shouldIncludeQuotedEmail())return t;const n=this.quotedEmailText||"",a=Yqe(this.lastEmailWithQuotedContent,this.currentContact,this.inbox);return Zqe(t,n,a)},resetRecorderAndClearAttachments(){this.resetAudioRecorderInput(),this.attachedFiles=[]},saveDraft(t,n){if(this.message||this.message===""){const a=`draft-${t}-${n}`,e=tk(this.message||"");this.$store.dispatch("draftMessages/set",{key:a,message:e})}},setToDraft(t,n){this.saveDraft(t,n),this.message=""},getFromDraft(){if(this.conversationIdByRoute){const t=`draft-${this.conversationIdByRoute}-${this.replyType}`,n=this.$store.getters["draftMessages/get"](t)||"";this.message=this.toggleSignatureForDraft(n)}},toggleSignatureForDraft(t){return this.isPrivate?t:this.sendWithSignature?Oo(t,this.signatureToApply):Ks(t,this.signatureToApply)},removeFromDraft(){if(this.conversationIdByRoute){const t=`draft-${this.conversationIdByRoute}-${this.replyType}`;this.$store.dispatch("draftMessages/delete",{key:t})}},getElementToBind(){return this.replyEditor},getKeyboardEvents(){return{Escape:{action:()=>{this.hideEmojiPicker(),this.hideMentions()},allowOnFocusedInput:!0},"$mod+KeyK":{action:t=>{t.preventDefault(),document.querySelector("ninja-keys").open()},allowOnFocusedInput:!0},Enter:{action:t=>{this.isAValidEvent("enter")&&(this.onSendReply(),t.preventDefault())},allowOnFocusedInput:!0},"$mod+Enter":{action:()=>{this.isAValidEvent("cmd_enter")&&this.onSendReply()},allowOnFocusedInput:!0}}},isAValidEvent(t){return!this.showUserMentions&&!this.showMentions&&!this.showCannedMenu&&!this.showVariablesMenu&&this.isFocused&&this.isEditorHotKeyEnabled(t)},onPaste(t){const n=t.clipboardData.files;!this.showRichContentEditor&&n.length!==0&&this.$refs.messageInput.$el.blur(),!(!n.length||!n[0])&&n.forEach(a=>{const{name:e,type:s,size:r}=a;this.onFileUpload({name:e,type:s,size:r,file:a})})},toggleUserMention(t){this.showUserMentions=t},toggleCannedMenu(t){this.showCannedMenu=t},toggleVariablesMenu(t){this.showVariablesMenu=t},openWhatsappTemplateModal(){this.showWhatsAppTemplatesModal=!0},hideWhatsappTemplatesModal(){this.showWhatsAppTemplatesModal=!1},openContentTemplateModal(){this.showContentTemplatesModal=!0},hideContentTemplatesModal(){this.showContentTemplatesModal=!1},confirmOnSendReply(){if(!this.isReplyButtonDisabled&&!this.showMentions){const t=this.isATwilioWhatsAppChannel||this.isAWhatsAppCloudChannel||this.is360DialogWhatsAppChannel,n=this.isAnInstagramChannel;if((t||n)&&!this.isPrivate)this.sendMessageAsMultipleMessages(this.message);else{const a=this.getMessagePayload(this.message);this.sendMessage(a)}this.isPrivate||this.clearEmailField(),this.clearMessage(),this.hideEmojiPicker(),this.$emit("update:popOutReplyBox",!1)}},sendMessageAsMultipleMessages(t){this.getMultipleMessagesPayload(t).forEach(a=>{this.sendMessage(a)})},sendMessageAnalyticsData(t){var n;return t?Nt($a.SENT_PRIVATE_NOTE):Nt($a.SENT_MESSAGE,{channelType:this.channelType,signatureEnabled:this.sendWithSignature,hasReplyTo:!!((n=this.inReplyTo)!=null&&n.id)})},async onSendReply(){const t=ek({message:this.message,variables:this.messageVariables});if(t.length>0){const n=t.length>1?t.length:1;this.undefinedVariableMessage=this.$t("CONVERSATION.REPLYBOX.UNDEFINED_VARIABLES.MESSAGE",{undefinedVariablesCount:n,undefinedVariables:t.join(", ")}),await this.$refs.confirmDialog.showConfirmation()&&this.confirmOnSendReply()}else this.confirmOnSendReply()},async sendMessage(t){var n,a;try{await this.$store.dispatch("createPendingMessageAndSend",t),Mt.emit(cn.SCROLL_TO_MESSAGE),Mt.emit(cn.MESSAGE_SENT),this.removeFromDraft(),this.sendMessageAnalyticsData(t.private)}catch(e){const s=((a=(n=e==null?void 0:e.response)==null?void 0:n.data)==null?void 0:a.error)||this.$t("CONVERSATION.MESSAGE_ERROR");Z(s)}},async onSendWhatsAppReply(t){this.sendMessage({conversationId:this.currentChat.id,...t}),this.hideWhatsappTemplatesModal()},async onSendContentTemplateReply(t){this.sendMessage({conversationId:this.currentChat.id,...t}),this.hideContentTemplatesModal()},replaceText(t){this.sendWithSignature&&!this.private&&(t=Oo(t,this.signatureToApply));const n=J3({message:t,variables:this.messageVariables});setTimeout(()=>{Nt($a.INSERTED_A_CANNED_RESPONSE),this.message=n},100)},setReplyMode(t=ss.REPLY){this.attachedFiles.length>0&&(this.attachedFiles=[]);const{can_reply:n}=this.currentChat;if(this.$store.dispatch("draftMessages/setReplyEditorMode",{mode:t}),(n||this.isAWhatsAppChannel)&&(this.replyType=t),this.showRichContentEditor){this.isRecordingAudio&&this.toggleAudioRecorder();return}this.$nextTick(()=>this.$refs.messageInput.focus())},clearEditorSelection(){this.updateEditorSelectionWith=""},insertIntoTextEditor(t,n,a){const{message:e}=this,s=e.slice(0,n)+t+e.slice(a,e.length);this.message=s},addIntoEditor(t){if(this.showRichContentEditor&&(this.updateEditorSelectionWith=t,this.onFocus()),!this.showRichContentEditor){const{selectionStart:n,selectionEnd:a}=this.$refs.messageInput.$el;this.insertIntoTextEditor(t,n,a)}},clearMessage(){this.message="",this.sendWithSignature&&!this.isPrivate&&(this.message=Oo(this.message,this.signatureToApply)),this.attachedFiles=[],this.isRecordingAudio=!1,this.resetReplyToMessage(),this.resetAudioRecorderInput()},clearEmailField(){this.ccEmails="",this.bccEmails="",this.toEmails=""},toggleEmojiPicker(){this.showEmojiPicker=!this.showEmojiPicker},toggleAudioRecorder(){this.isRecordingAudio=!this.isRecordingAudio,this.isRecorderAudioStopped=!this.isRecordingAudio,this.isRecordingAudio||this.resetAudioRecorderInput()},toggleAudioRecorderPlayPause(){this.isRecordingAudio&&(this.isRecorderAudioStopped?this.isRecorderAudioStopped&&this.$refs.audioRecorderInput.playPause():(this.isRecorderAudioStopped=!0,this.$refs.audioRecorderInput.stopRecording()))},hideEmojiPicker(){this.showEmojiPicker&&this.toggleEmojiPicker()},hideMentions(){this.showMentions=!1},onTypingOn(){this.toggleTyping("on")},onTypingOff(){this.toggleTyping("off")},onBlur(){this.isFocused=!1,this.saveDraft(this.conversationIdByRoute,this.replyType)},onFocus(){this.isFocused=!0},onRecordProgressChanged(t){this.recordingAudioDurationText=t},onFinishRecorder(t){this.recordingAudioState="stopped",this.hasRecordedAudio=!0;const n={...t,isRecordedAudio:!0};return t&&this.onFileUpload(n)},toggleTyping(t){const n=this.currentChat.id,a=this.isPrivate;n&&this.$store.dispatch("conversationTypingStatus/toggleTyping",{status:t,conversationId:n,isPrivate:a})},attachFile({blob:t,file:n}){const a=new FileReader;a.readAsDataURL(n.file),a.onloadend=()=>{this.attachedFiles.push({currentChatId:this.currentChat.id,resource:t||n,isPrivate:this.isPrivate,thumb:a.result,blobSignedId:t?t.signed_id:void 0,isRecordedAudio:(n==null?void 0:n.isRecordedAudio)||!1})}},removeAttachment(t){this.attachedFiles=t},setReplyToInPayload(t){var n;return(n=this.inReplyTo)!=null&&n.id?{...t,contentAttributes:{...t.contentAttributes,in_reply_to:this.inReplyTo.id}}:t},getMultipleMessagesPayload(t){const n=[];if(this.attachedFiles&&this.attachedFiles.length){let e=this.isAnInstagramChannel?"":t;this.attachedFiles.forEach(s=>{const r=this.globalConfig.directUploadsEnabled?s.blobSignedId:s.resource.file;let o={conversationId:this.currentChat.id,files:[r],private:!1,message:e,sender:this.sender};o=this.setReplyToInPayload(o),n.push(o),this.isAnInstagramChannel||(e="")})}const a=!this.attachedFiles||!this.attachedFiles.length;if(this.isAnInstagramChannel&&this.message||!this.isAnInstagramChannel&&a){let e={conversationId:this.currentChat.id,message:t,private:!1,sender:this.sender};e=this.setReplyToInPayload(e),n.push(e)}return n},getMessagePayload(t){const n=this.getMessageWithQuotedEmailText(t);let a={conversationId:this.currentChat.id,message:n,private:this.isPrivate,sender:this.sender};return a=this.setReplyToInPayload(a),this.attachedFiles&&this.attachedFiles.length&&(a.files=[],this.attachedFiles.forEach(e=>{this.globalConfig.directUploadsEnabled?a.files.push(e.blobSignedId):a.files.push(e.resource.file)})),this.ccEmails&&!this.isOnPrivateNote&&(a.ccEmails=this.ccEmails),this.bccEmails&&!this.isOnPrivateNote&&(a.bccEmails=this.bccEmails),this.toEmails&&!this.isOnPrivateNote&&(a.toEmails=this.toEmails),a},setCcEmails(t){this.bccEmails=t.bccEmails,this.ccEmails=t.ccEmails},setCCAndToEmailsFromLastChat(){var o,i,l;const t=((l=(i=(o=this.currentChat)==null?void 0:o.meta)==null?void 0:i.sender)==null?void 0:l.email)||"",{email:n,forward_to_email:a}=this.inbox,{cc:e,bcc:s,to:r}=Q3(this.lastEmail,t,n,a);this.toEmails=r.join(", "),this.ccEmails=e.join(", "),this.bccEmails=s.join(", ")},fetchAndSetReplyTo(){var a,e;const t=xo.MESSAGE_REPLY_TO,n=ro.getFromJsonStore(t,this.conversationId);this.inReplyTo=(e=(a=this.currentChat)==null?void 0:a.messages)==null?void 0:e.find(s=>s.id===n)},resetReplyToMessage(){const t=xo.MESSAGE_REPLY_TO;ro.deleteFromJsonStore(t,this.conversationId),Mt.emit(cn.TOGGLE_REPLY_TO_MESSAGE)},onNewConversationModalActive(t){this.newConversationModalActive=t},onSearchPopoverClose(){this.showArticleSearchPopover=!1},toggleInsertArticle(){this.showArticleSearchPopover=!this.showArticleSearchPopover},resetAudioRecorderInput(){this.recordingAudioDurationText="00:00",this.isRecordingAudio=!1,this.recordingAudioState="",this.hasRecordedAudio=!1,this.attachedFiles=this.attachedFiles.filter(t=>!(t!=null&&t.isRecordedAudio))},togglePopout(){this.$emit("update:popOutReplyBox",!this.popOutReplyBox)}}},tZe={class:"reply-box__top"};function nZe(t,n,a,e,s,r){const o=H("ReplyBoxBanner"),i=H("ReplyTopPanel"),l=H("ArticleSearchPopover"),c=H("ReplyToMessage"),d=H("CannedResponse"),u=H("EmojiInput"),m=H("ReplyEmailHead"),h=H("AudioRecorder"),_=H("ResizableTextArea"),E=H("WootMessageEditor"),y=H("QuotedEmailPreview"),b=H("AttachmentPreview"),A=H("MessageSignatureMissingAlert"),T=H("ReplyBottomPanel"),I=H("WhatsappTemplates"),N=H("ContentTemplates"),x=H("woot-confirm-modal"),R=nt("on-clickaway");return p(),g(de,null,[v(o,{message:s.message,"is-on-private-note":r.isOnPrivateNote},null,8,["message","is-on-private-note"]),f("div",{ref:"replyEditor",class:oe(["reply-box",r.replyBoxClass])},[v(i,{mode:s.replyType,"is-reply-restricted":r.isReplyRestricted,"is-message-length-reaching-threshold":r.isMessageLengthReachingThreshold,"characters-remaining":r.charactersRemaining,"popout-reply-box":a.popOutReplyBox,onSetReplyMode:r.setReplyMode,onTogglePopout:r.togglePopout},null,8,["mode","is-reply-restricted","is-message-length-reaching-threshold","characters-remaining","popout-reply-box","onSetReplyMode","onTogglePopout"]),s.showArticleSearchPopover&&r.connectedPortalSlug?(p(),L(l,{key:0,"selected-portal-slug":r.connectedPortalSlug,onInsert:r.handleInsert,onClose:r.onSearchPopoverClose},null,8,["selected-portal-slug","onInsert","onClose"])):O("v-if",!0),f("div",tZe,[r.shouldShowReplyToMessage?(p(),L(c,{key:0,message:s.inReplyTo,onDismiss:r.resetReplyToMessage},null,8,["message","onDismiss"])):O("v-if",!0),s.showMentions&&s.hasSlashCommand?ce((p(),L(d,{key:1,class:"normal-editor__canned-box","search-key":s.mentionSearchKey,onReplace:r.replaceText},null,8,["search-key","onReplace"])),[[R,r.hideMentions]]):O("v-if",!0),s.showEmojiPicker?ce((p(),L(u,{key:2,class:oe({"emoji-dialog--expanded":r.isOnExpandedLayout||a.popOutReplyBox}),"on-click":r.addIntoEditor},null,8,["class","on-click"])),[[R,r.hideEmojiPicker]]):O("v-if",!0),r.showReplyHead?(p(),L(m,{key:3,"cc-emails":s.ccEmails,"onUpdate:ccEmails":n[0]||(n[0]=M=>s.ccEmails=M),"bcc-emails":s.bccEmails,"onUpdate:bccEmails":n[1]||(n[1]=M=>s.bccEmails=M),"to-emails":s.toEmails,"onUpdate:toEmails":n[2]||(n[2]=M=>s.toEmails=M)},null,8,["cc-emails","bcc-emails","to-emails"])):O("v-if",!0),r.showAudioRecorderEditor?(p(),L(h,{key:4,ref:"audioRecorderInput","audio-record-format":r.audioRecordFormat,onRecorderProgressChanged:r.onRecordProgressChanged,onFinishRecord:r.onFinishRecorder,onPlay:n[3]||(n[3]=M=>s.recordingAudioState="playing"),onPause:n[4]||(n[4]=M=>s.recordingAudioState="paused")},null,8,["audio-record-format","onRecorderProgressChanged","onFinishRecord"])):r.showRichContentEditor?(p(),L(E,{key:6,modelValue:s.message,"onUpdate:modelValue":n[6]||(n[6]=M=>s.message=M),"editor-id":r.editorStateId,class:"input","is-private":r.isOnPrivateNote,placeholder:r.messagePlaceHolder,"update-selection-with":s.updateEditorSelectionWith,"min-height":4,"enable-variables":"",variables:r.messageVariables,signature:r.signatureToApply,"allow-signature":"","channel-type":t.channelType,onTypingOff:r.onTypingOff,onTypingOn:r.onTypingOn,onFocus:r.onFocus,onBlur:r.onBlur,onToggleUserMention:r.toggleUserMention,onToggleCannedMenu:r.toggleCannedMenu,onToggleVariablesMenu:r.toggleVariablesMenu,onClearSelection:r.clearEditorSelection},null,8,["modelValue","editor-id","is-private","placeholder","update-selection-with","variables","signature","channel-type","onTypingOff","onTypingOn","onFocus","onBlur","onToggleUserMention","onToggleCannedMenu","onToggleVariablesMenu","onClearSelection"])):(p(),L(_,{key:5,ref:"messageInput",modelValue:s.message,"onUpdate:modelValue":n[5]||(n[5]=M=>s.message=M),class:"rounded-none input",placeholder:r.messagePlaceHolder,"min-height":4,signature:r.signatureToApply,"allow-signature":"","send-with-signature":r.sendWithSignature,onTypingOff:r.onTypingOff,onTypingOn:r.onTypingOn,onFocus:r.onFocus,onBlur:r.onBlur},null,8,["modelValue","placeholder","signature","send-with-signature","onTypingOff","onTypingOn","onFocus","onBlur"])),r.shouldShowQuotedPreview?(p(),L(y,{key:7,"quoted-email-text":r.quotedEmailText,"preview-text":r.quotedEmailPreviewText,onToggle:r.toggleQuotedReply},null,8,["quoted-email-text","preview-text","onToggle"])):O("v-if",!0)]),r.hasAttachments&&!r.showAudioRecorderEditor?(p(),g("div",{key:1,class:"attachment-preview-box",onPaste:n[7]||(n[7]=(...M)=>r.onPaste&&r.onPaste(...M))},[v(b,{class:"flex-col mt-4",attachments:s.attachedFiles,onRemoveAttachment:r.removeAttachment},null,8,["attachments","onRemoveAttachment"])],32)):O("v-if",!0),r.isSignatureEnabledForInbox&&!r.isSignatureAvailable?(p(),L(A,{key:2})):O("v-if",!0),v(T,{"conversation-id":r.conversationId,"enable-multiple-file-upload":r.enableMultipleFileUpload,"enable-whats-app-templates":r.showWhatsappTemplates,"enable-content-templates":r.showContentTemplates,inbox:r.inbox,"is-on-private-note":r.isOnPrivateNote,"is-recording-audio":s.isRecordingAudio,"is-send-disabled":r.isReplyButtonDisabled,"is-note":r.isPrivate,"on-file-upload":t.onFileUpload,"on-send":r.onSendReply,"conversation-type":r.conversationType,"recording-audio-duration-text":s.recordingAudioDurationText,"recording-audio-state":s.recordingAudioState,"send-button-text":r.replyButtonLabel,"show-audio-recorder":r.showAudioRecorder,"show-editor-toggle":t.isAPIInbox&&!r.isOnPrivateNote,"show-emoji-picker":s.showEmojiPicker,"show-file-upload":r.showFileUpload,"show-quoted-reply-toggle":r.shouldShowQuotedReplyToggle,"quoted-reply-enabled":r.quotedReplyPreference,"toggle-audio-recorder-play-pause":r.toggleAudioRecorderPlayPause,"toggle-audio-recorder":r.toggleAudioRecorder,"toggle-emoji-picker":r.toggleEmojiPicker,message:s.message,"portal-slug":r.connectedPortalSlug,"new-conversation-modal-active":s.newConversationModalActive,onSelectWhatsappTemplate:r.openWhatsappTemplateModal,onSelectContentTemplate:r.openContentTemplateModal,onToggleEditor:r.toggleRichContentEditor,onReplaceText:r.replaceText,onToggleInsertArticle:r.toggleInsertArticle,onToggleQuotedReply:r.toggleQuotedReply},null,8,["conversation-id","enable-multiple-file-upload","enable-whats-app-templates","enable-content-templates","inbox","is-on-private-note","is-recording-audio","is-send-disabled","is-note","on-file-upload","on-send","conversation-type","recording-audio-duration-text","recording-audio-state","send-button-text","show-audio-recorder","show-editor-toggle","show-emoji-picker","show-file-upload","show-quoted-reply-toggle","quoted-reply-enabled","toggle-audio-recorder-play-pause","toggle-audio-recorder","toggle-emoji-picker","message","portal-slug","new-conversation-modal-active","onSelectWhatsappTemplate","onSelectContentTemplate","onToggleEditor","onReplaceText","onToggleInsertArticle","onToggleQuotedReply"]),v(I,{"inbox-id":r.inbox.id,show:s.showWhatsAppTemplatesModal,onClose:r.hideWhatsappTemplatesModal,onOnSend:r.onSendWhatsAppReply,onCancel:r.hideWhatsappTemplatesModal},null,8,["inbox-id","show","onClose","onOnSend","onCancel"]),v(N,{"inbox-id":r.inbox.id,show:s.showContentTemplatesModal,onClose:r.hideContentTemplatesModal,onOnSend:r.onSendContentTemplateReply,onCancel:r.hideContentTemplatesModal},null,8,["inbox-id","show","onClose","onOnSend","onCancel"]),v(x,{ref:"confirmDialog",title:t.$t("CONVERSATION.REPLYBOX.UNDEFINED_VARIABLES.TITLE"),description:s.undefinedVariableMessage},null,8,["title","description"])],2)],64)}const aZe=G(eZe,[["render",nZe],["__scopeId","data-v-f9627348"],["__file","/app/app/javascript/dashboard/components/widgets/conversation/ReplyBox.vue"]]),Xn={INCOMING:0,OUTGOING:1,ACTIVITY:2,TEMPLATE:3},zn={USER:"user",AGENT:"agent",ACTIVITY:"activity",PRIVATE:"private",BOT:"bot",ERROR:"error",TEMPLATE:"template",EMAIL:"email",UNSUPPORTED:"unsupported"},gl={CONTACT:"Contact",USER:"User",AGENT_BOT:"agent_bot",CAPTAIN_ASSISTANT:"captain_assistant"},Fa={LEFT:"left",RIGHT:"right",CENTER:"center"},An={SENT:"sent",DELIVERED:"delivered",READ:"read",FAILED:"failed",PROGRESS:"progress"},Ea={IMAGE:"image",AUDIO:"audio",VIDEO:"video",FILE:"file",LOCATION:"location",FALLBACK:"fallback",SHARE:"share",STORY_MENTION:"story_mention",CONTACT:"contact",IG_REEL:"ig_reel"},eo={TEXT:"text",INPUT_TEXT:"input_text",INPUT_TEXTAREA:"input_textarea",INPUT_EMAIL:"input_email",INPUT_SELECT:"input_select",CARDS:"cards",FORM:"form",ARTICLE:"article",INCOMING_EMAIL:"incoming_email",INPUT_CSAT:"input_csat",INTEGRATIONS:"integrations",STICKER:"sticker",VOICE_CALL:"voice_call"};Ea.IMAGE,Ea.VIDEO,Ea.AUDIO,Ea.IG_REEL;const BD=Symbol("MessageControl");function Jt(){const t=so(BD,null);if(t===null)throw new Error("Component is missing a parent <Message /> component.");const n=le("getSelectedChatAttachments"),a=S(()=>{const e=n.value.filter(s=>[Ea.IMAGE,Ea.VIDEO,Ea.IG_REEL,Ea.AUDIO].includes(s.file_type));return ha(e)});return{...t,filteredCurrentChatAttachments:a}}function JO(t){qn(BD,t)}const sZe={__name:"MessageStatus",props:{status:{type:String,required:!0,validator:t=>Object.values(An).includes(t)}},setup(t,{expose:n}){n();const{t:a}=Q(),e=["i-lucide-clock-1","i-lucide-clock-2","i-lucide-clock-3","i-lucide-clock-4","i-lucide-clock-5","i-lucide-clock-6","i-lucide-clock-7","i-lucide-clock-8","i-lucide-clock-9","i-lucide-clock-10","i-lucide-clock-11","i-lucide-clock-12"],s=P(e[0]),r=()=>{const u=(e.indexOf(s.value)+1)%e.length;s.value=e[u]};RT(r,500,{immediate:t.status===An.PROGRESS,immediateCallback:!1});const o=S(()=>({[An.SENT]:"i-lucide-check",[An.DELIVERED]:"i-lucide-check-check",[An.READ]:"i-lucide-check-check"})[t.status]),i=S(()=>({[An.SENT]:"text-n-slate-10",[An.DELIVERED]:"text-n-slate-10",[An.READ]:"text-[#7EB6FF]"})[t.status]),l=S(()=>({[An.SENT]:a("CHAT_LIST.SENT"),[An.DELIVERED]:a("CHAT_LIST.DELIVERED"),[An.READ]:a("CHAT_LIST.MESSAGE_READ"),[An.PROGRESS]:a("CHAT_LIST.SENDING")})[t.status]),c={t:a,progresIconSequence:e,progessIcon:s,rotateIcon:r,statusIcon:o,statusColor:i,tooltipText:l,computed:S,ref:P,get useIntervalFn(){return RT},get useI18n(){return Q},get MESSAGE_STATUS(){return An},Icon:Bt};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}};function oZe(t,n,a,e,s,r){const o=nt("tooltip");return a.status===e.MESSAGE_STATUS.PROGRESS?ce((p(),L(e.Icon,{key:0,icon:e.progessIcon,class:"text-n-slate-10"},null,8,["icon"])),[[o,e.tooltipText,void 0,{"top-start":!0}]]):ce((p(),L(e.Icon,{key:1,icon:e.statusIcon,class:oe([e.statusColor,"size-[14px]"])},null,8,["icon","class"])),[[o,e.tooltipText,void 0,{"top-start":!0}]])}const rZe=G(sZe,[["render",oZe],["__file","/app/app/javascript/dashboard/components-next/message/MessageStatus.vue"]]),iZe={__name:"MessageMeta",setup(t,{expose:n}){n();const{isAFacebookInbox:a,isALineChannel:e,isAPIInbox:s,isASmsInbox:r,isATelegramChannel:o,isATwilioChannel:i,isAWebWidgetInbox:l,isAWhatsAppChannel:c,isAnEmailChannel:d,isAnInstagramChannel:u}=Gi(),{status:m,isPrivate:h,createdAt:_,sourceId:E,messageType:y,contentAttributes:b}=Jt(),A=S(()=>Fl(_.value,"LLL d, h:mm a")),T=S(()=>{var w;return h.value||m.value===An.FAILED||(w=b.value)!=null&&w.deleted?!1:y.value===Xn.OUTGOING||y.value===Xn.TEMPLATE}),I=S(()=>T.value?d.value?!!E.value:c.value||i.value||a.value||r.value||o.value||u.value?E.value&&m.value===An.SENT:!!e.value:!1),N=S(()=>T.value?c.value||i.value||r.value||a.value?E.value&&m.value===An.DELIVERED:l.value||s.value?m.value===An.SENT:e.value?m.value===An.DELIVERED:!1:!1),x=S(()=>T.value?c.value||i.value||a.value||u.value?E.value&&m.value===An.READ:l.value||s.value?m.value===An.READ:!1:!1),R=S(()=>x.value?An.READ:N.value?An.DELIVERED:I.value?An.SENT:An.PROGRESS),M={isAFacebookInbox:a,isALineChannel:e,isAPIInbox:s,isASmsInbox:r,isATelegramChannel:o,isATwilioChannel:i,isAWebWidgetInbox:l,isAWhatsAppChannel:c,isAnEmailChannel:d,isAnInstagramChannel:u,status:m,isPrivate:h,createdAt:_,sourceId:E,messageType:y,contentAttributes:b,readableTime:A,showStatusIndicator:T,isSent:I,isDelivered:N,isRead:x,statusToShow:R,computed:S,get messageTimestamp(){return Fl},MessageStatus:rZe,Icon:Bt,get useInbox(){return Gi},get useMessageContext(){return Jt},get MESSAGE_STATUS(){return An},get MESSAGE_TYPES(){return Xn}};return Object.defineProperty(M,"__isScriptSetup",{enumerable:!1,value:!0}),M}},lZe={class:"text-xs flex items-center gap-1.5"},cZe={class:"inline"},dZe={class:"inline"};function uZe(t,n,a,e,s,r){return p(),g("div",lZe,[f("div",cZe,[f("time",dZe,C(e.readableTime),1)]),e.isPrivate?(p(),L(e.Icon,{key:0,icon:"i-lucide-lock-keyhole",class:"size-3"})):O("v-if",!0),e.showStatusIndicator?(p(),L(e.MessageStatus,{key:1,status:e.statusToShow},null,8,["status"])):O("v-if",!0)])}const pZe=G(iZe,[["render",uZe],["__file","/app/app/javascript/dashboard/components-next/message/MessageMeta.vue"]]),fZe={__name:"Base",props:{hideMeta:{type:Boolean,default:!1}},setup(t,{expose:n}){n();const a=t,{variant:e,orientation:s,inReplyTo:r,shouldGroupWithNext:o}=Jt(),{t:i}=Q(),l={[zn.AGENT]:"bg-n-solid-blue text-n-slate-12",[zn.PRIVATE]:"bg-n-solid-amber text-n-amber-12 [&_.prosemirror-mention-node]:font-semibold",[zn.USER]:"bg-n-slate-4 text-n-slate-12",[zn.ACTIVITY]:"bg-n-alpha-1 text-n-slate-11 text-sm",[zn.BOT]:"bg-n-solid-iris text-n-slate-12",[zn.TEMPLATE]:"bg-n-solid-iris text-n-slate-12",[zn.ERROR]:"bg-n-ruby-4 text-n-ruby-12",[zn.EMAIL]:"w-full",[zn.UNSUPPORTED]:"bg-n-solid-amber/70 border border-dashed border-n-amber-12 text-n-amber-12"},c={[Fa.LEFT]:"left-bubble rounded-xl ltr:rounded-bl-sm rtl:rounded-br-sm",[Fa.RIGHT]:"right-bubble rounded-xl ltr:rounded-br-sm rtl:rounded-bl-sm",[Fa.CENTER]:"rounded-md"},d=S(()=>({[Fa.LEFT]:"justify-start",[Fa.RIGHT]:"justify-end",[Fa.CENTER]:"justify-center"})[s.value]),u=S(()=>{const y=[l[e.value]];return e.value!==zn.ACTIVITY?y.push(c[s.value]):y.push("rounded-lg"),y}),m=()=>{Mt.emit(cn.SCROLL_TO_MESSAGE,{messageId:r.value.id})},h=S(()=>!a.hideMeta&&!o.value&&e.value!==zn.ACTIVITY),_=S(()=>{if(!r)return"";const{content:y,attachments:b}=r.value;if(y)return y;if(b!=null&&b.length){const A=b[0],T=A.fileType??A.file_type;return i(`CHAT_LIST.ATTACHMENTS.${T}.CONTENT`)}return i("CONVERSATION.REPLY_MESSAGE_NOT_FOUND")}),E={props:a,variant:e,orientation:s,inReplyTo:r,shouldGroupWithNext:o,t:i,varaintBaseMap:l,orientationMap:c,flexOrientationClass:d,messageClass:u,scrollToMessage:m,shouldShowMeta:h,replyToPreview:_,computed:S,MessageMeta:pZe,get emitter(){return Mt},get useMessageContext(){return Jt},get useI18n(){return Q},get BUS_EVENTS(){return cn},get MESSAGE_VARIANTS(){return zn},get ORIENTATION(){return Fa}};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}},mZe={class:"break-all line-clamp-2"};function hZe(t,n,a,e,s,r){return p(),g("div",{class:oe(["text-sm",[e.messageClass,{"max-w-lg":e.variant!==e.MESSAGE_VARIANTS.EMAIL}]])},[e.inReplyTo?(p(),g("div",{key:0,class:"p-2 -mx-1 mb-2 rounded-lg cursor-pointer bg-n-alpha-black1",onClick:e.scrollToMessage},[f("span",mZe,C(e.replyToPreview),1)])):O("v-if",!0),qe(t.$slots,"default"),e.shouldShowMeta?(p(),L(e.MessageMeta,{key:1,class:oe([[e.flexOrientationClass,e.variant===e.MESSAGE_VARIANTS.EMAIL?"px-3 pb-3":"",e.variant===e.MESSAGE_VARIANTS.PRIVATE?"text-n-amber-12/50":"text-n-slate-11"],"mt-2"])},null,8,["class"])):O("v-if",!0)],2)}const Lo=G(fZe,[["render",hZe],["__file","/app/app/javascript/dashboard/components-next/message/bubbles/Base.vue"]]),_Ze={__name:"FormattedContent",props:{content:{type:String,required:!0}},setup(t,{expose:n}){n();const a=t,{variant:e}=Jt(),s=S(()=>e.value===zn.ACTIVITY?a.content:new ki(a.content).formattedMessage),r={props:a,variant:e,formattedContent:s,computed:S,get useMessageContext(){return Jt},get MessageFormatter(){return ki},get MESSAGE_VARIANTS(){return zn}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},gZe={class:"prose prose-bubble"};function bZe(t,n,a,e,s,r){const o=nt("dompurify-html");return ce((p(),g("span",gZe,null,512)),[[o,e.formattedContent]])}const FD=G(_Ze,[["render",bZe],["__file","/app/app/javascript/dashboard/components-next/message/bubbles/Text/FormattedContent.vue"]]),eN=t=>{const o="center center",i=P(1),l=P(o),c=P(0),d=S(()=>({transform:`rotate(${c.value}deg)`})),u=S(()=>({transform:`scale(${i.value})`,cursor:i.value<3?"zoom-in":"zoom-out",transformOrigin:`${l.value}`})),m=()=>{t.value&&(l.value=o)},h=N=>{if(!t.value)return;m();const x=N==="clockwise"?90:-90;c.value=(c.value+x)%360,i.value=1,m()},_=(N,x)=>{if(!t.value)return{x:50,y:50};const R=t.value.getBoundingClientRect(),{relativeX:M,relativeY:w}=ak(N,x,R),{rotatedX:D,rotatedY:B}=sk(M,w,c.value);return ok(D,B,R.width,R.height)},E=(N,x,R)=>{if(!t.value)return;const M=Math.max(1,Math.min(3,i.value+N));if(M!==i.value){if(x!=null&&R!=null&&i.value===1){const{x:w,y:D}=_(x,R);l.value=`${w}% ${D}%`}i.value=M}},y=N=>{if(!t.value)return;N.preventDefault();const x=i.value>=3?1:3,{x:R,y:M}=_(N.clientX,N.clientY);l.value=`${R}% ${M}%`,i.value=x},b=N=>{if(!t.value)return;N.preventDefault();const x=N.deltaY>0?-.2:.2;E(x,N.clientX,N.clientY)},A=Ja(N=>{if(!t.value||i.value!==1)return;const{x,y:R}=_(N.clientX,N.clientY);l.value=`${x}% ${R}%`},100,!1),T=Ja(()=>{t.value&&i.value===1&&(l.value=o)},110,!1);return{zoomScale:i,imgTransformOriginPoint:l,activeImageRotation:c,imageWrapperStyle:d,imageStyle:u,getZoomOrigin:_,resetTransformOrigin:m,onRotate:h,onZoom:E,onDoubleClickZoomImage:y,onWheelImageZoom:b,onMouseMove:A,onMouseLeave:T,resetZoomAndRotation:()=>{c.value=0,i.value=1,m()}}},vZe={__name:"GalleryView",props:an({attachment:{type:Object,required:!0},allAttachments:{type:Array,required:!0}},{show:{type:Boolean,default:!1},showModifiers:{}}),emits:an(["close"],["update:show"]),setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=dn(t,"show"),{t:o}=Q(),i=xt(),l={IMAGE:"image",VIDEO:"video",IG_REEL:"ig_reel",AUDIO:"audio"},c=P(!1),d=P({}),u=P(""),m=P(e.allAttachments.findIndex(K=>K.message_id===e.attachment.message_id)||0),h=xn("imageRef"),{imageWrapperStyle:_,imageStyle:E,onRotate:y,activeImageRotation:b,onZoom:A,onDoubleClickZoomImage:T,onWheelImageZoom:I,onMouseMove:N,onMouseLeave:x,resetZoomAndRotation:R}=eN(h),M=S(()=>i.getCurrentUser.value),w=S(()=>e.allAttachments.length>1),D=S(()=>{const{created_at:K}=d.value;return K&&Fl(K,"LLL d yyyy, h:mm a")||""}),B=S(()=>u.value===l.IMAGE),k=S(()=>[l.VIDEO,l.IG_REEL].includes(u.value)),V=S(()=>u.value===l.AUDIO),F=S(()=>{var Ce,ue,ge;const{name:K,available_name:W,avatar_url:ee,thumbnail:ae,id:ve}=((Ce=d.value)==null?void 0:Ce.sender)||((ue=e.attachment)==null?void 0:ue.sender)||{};return{name:((ge=M.value)==null?void 0:ge.id)===ve?"You":K||W||"",avatar:ae||ee||""}}),$=S(()=>{const{data_url:K}=d.value;if(!K)return"";const W=K.split("/").pop();return W?decodeURIComponent(W):""}),Y=()=>s("close"),j=K=>{const{file_type:W}=K;Object.values(l).includes(W)&&(d.value=K,u.value=W)},U=(K,W)=>{K&&(m.value=W,j(K),R())},J=async()=>{const{file_type:K,data_url:W,extension:ee}=d.value;if(Object.values(l).includes(K))try{c.value=!0,await zc({url:W,type:K,extension:ee})}catch{Z(o("GALLERY_VIEW.ERROR_DOWNLOADING"))}finally{c.value=!1}},te={Escape:{action:Y},ArrowLeft:{action:()=>{U(e.allAttachments[m.value-1],m.value-1)}},ArrowRight:{action:()=>{U(e.allAttachments[m.value+1],m.value+1)}}};jn(te),Pe(()=>{j(e.attachment)});const q={props:e,emit:s,show:r,t:o,getters:i,ALLOWED_FILE_TYPES:l,isDownloading:c,activeAttachment:d,activeFileType:u,activeImageIndex:m,imageRef:h,imageWrapperStyle:_,imageStyle:E,onRotate:y,activeImageRotation:b,onZoom:A,onDoubleClickZoomImage:T,onWheelImageZoom:I,onMouseMove:N,onMouseLeave:x,resetZoomAndRotation:R,currentUser:M,hasMoreThanOneAttachment:w,readableTime:D,isImage:B,isVideo:k,isAudio:V,senderDetails:F,fileNameFromDataUrl:$,onClose:Y,setImageAndVideoSrc:j,onClickChangeAttachment:U,onClickDownload:J,keyboardEvents:te,ref:P,computed:S,onMounted:Pe,useTemplateRef:xn,get useI18n(){return Q},get useAlert(){return Z},get useStoreGetters(){return xt},get useKeyboardEvents(){return jn},get useImageZoom(){return eN},get messageTimestamp(){return Fl},get downloadFile(){return zc},NextButton:Se,Avatar:qt,TeleportWithDirection:yE};return Object.defineProperty(q,"__isScriptSetup",{enumerable:!1,value:!0}),q}},EZe={key:0,class:"flex items-center min-w-[15rem] shrink-0"},SZe={class:"flex flex-col ml-2 rtl:ml-0 rtl:mr-2 overflow-hidden"},TZe={class:"text-base leading-5 m-0 font-medium"},AZe={class:"overflow-hidden text-n-slate-12 whitespace-nowrap text-ellipsis"},yZe={class:"text-xs text-n-slate-11 whitespace-nowrap text-ellipsis"},IZe={class:"flex-1 mx-2 px-2 truncate text-sm font-medium text-center text-n-slate-12"},CZe={class:"truncate"},OZe={class:"flex items-center gap-2 ml-2 shrink-0"},NZe={class:"flex items-stretch flex-1 h-full overflow-hidden"},xZe={class:"flex items-center justify-center w-16 shrink-0"},RZe={class:"flex-1 flex items-center justify-center overflow-hidden"},wZe=["src"],MZe=["src"],LZe=["src"],DZe={class:"flex items-center justify-center w-16 shrink-0"},PZe={class:"z-10 flex items-center justify-center h-12 border-t border-n-weak"},kZe={class:"rounded-md flex items-center justify-center px-3 py-1 bg-n-slate-3 text-n-slate-12 text-sm font-medium"};function BZe(t,n,a,e,s,r){const o=H("woot-modal"),i=nt("dompurify-html");return p(),L(e.TeleportWithDirection,{to:"body"},{default:z(()=>[v(o,{show:e.show,"onUpdate:show":n[14]||(n[14]=l=>e.show=l),"full-width":"","show-close-button":!1,"on-close":e.onClose},{default:z(()=>[f("div",{class:"bg-n-background flex flex-col h-[inherit] w-[inherit] overflow-hidden select-none",onClick:e.onClose},[f("header",{class:"z-10 flex items-center justify-between w-full h-16 px-6 py-2 bg-n-background border-b border-n-weak",onClick:n[4]||(n[4]=Ve(()=>{},["stop"]))},[e.senderDetails?(p(),g("div",EZe,[e.senderDetails.avatar?(p(),L(e.Avatar,{key:0,name:e.senderDetails.name,src:e.senderDetails.avatar,size:40,"rounded-full":"",class:"flex-shrink-0"},null,8,["name","src"])):O("v-if",!0),f("div",SZe,[f("h3",TZe,[f("span",AZe,C(e.senderDetails.name),1)]),f("span",yZe,C(e.readableTime),1)])])):O("v-if",!0),f("div",IZe,[ce(f("span",CZe,null,512),[[i,e.fileNameFromDataUrl]])]),f("div",OZe,[e.isImage?(p(),L(e.NextButton,{key:0,icon:"i-lucide-zoom-in",slate:"",ghost:"",onClick:n[0]||(n[0]=l=>e.onZoom(.1))})):O("v-if",!0),e.isImage?(p(),L(e.NextButton,{key:1,icon:"i-lucide-zoom-out",slate:"",ghost:"",onClick:n[1]||(n[1]=l=>e.onZoom(-.1))})):O("v-if",!0),e.isImage?(p(),L(e.NextButton,{key:2,icon:"i-lucide-rotate-ccw",slate:"",ghost:"",onClick:n[2]||(n[2]=l=>e.onRotate("counter-clockwise"))})):O("v-if",!0),e.isImage?(p(),L(e.NextButton,{key:3,icon:"i-lucide-rotate-cw",slate:"",ghost:"",onClick:n[3]||(n[3]=l=>e.onRotate("clockwise"))})):O("v-if",!0),v(e.NextButton,{icon:"i-lucide-download",slate:"",ghost:"","is-loading":e.isDownloading,disabled:e.isDownloading,onClick:e.onClickDownload},null,8,["is-loading","disabled"]),v(e.NextButton,{icon:"i-lucide-x",slate:"",ghost:"",onClick:e.onClose})])]),f("main",NZe,[f("div",xZe,[e.hasMoreThanOneAttachment?(p(),L(e.NextButton,{key:0,icon:"ltr:i-lucide-chevron-left rtl:i-lucide-chevron-right",class:"z-10",blue:"",faded:"",lg:"",disabled:e.activeImageIndex===0,onClick:n[5]||(n[5]=Ve(l=>e.onClickChangeAttachment(a.allAttachments[e.activeImageIndex-1],e.activeImageIndex-1),["stop"]))},null,8,["disabled"])):O("v-if",!0)]),f("div",RZe,[e.isImage?(p(),g("div",{key:0,style:nn(e.imageWrapperStyle),class:oe(["flex items-center justify-center origin-center",{"w-[calc(100dvh-8rem)] h-[calc(100dvw-7rem)]":e.activeImageRotation%180!==0,"size-full":e.activeImageRotation%180===0}])},[(p(),g("img",{ref:"imageRef",key:e.activeAttachment.message_id,src:e.activeAttachment.data_url,style:nn(e.imageStyle),class:"max-h-full max-w-full object-contain duration-100 ease-in-out transform select-none",onClick:n[6]||(n[6]=Ve(()=>{},["stop"])),onDblclick:n[7]||(n[7]=Ve((...l)=>e.onDoubleClickZoomImage&&e.onDoubleClickZoomImage(...l),["stop"])),onWheel:n[8]||(n[8]=Ve((...l)=>e.onWheelImageZoom&&e.onWheelImageZoom(...l),["prevent","stop"])),onMousemove:n[9]||(n[9]=(...l)=>e.onMouseMove&&e.onMouseMove(...l)),onMouseleave:n[10]||(n[10]=(...l)=>e.onMouseLeave&&e.onMouseLeave(...l))},null,44,wZe))],6)):O("v-if",!0),e.isVideo?(p(),g("video",{key:e.activeAttachment.message_id,src:e.activeAttachment.data_url,controls:"",playsInline:"",class:"max-h-full max-w-full object-contain",onClick:n[11]||(n[11]=Ve(()=>{},["stop"]))},null,8,MZe)):O("v-if",!0),e.isAudio?(p(),g("audio",{key:e.activeAttachment.message_id,controls:"",class:"w-full max-w-md",onClick:n[12]||(n[12]=Ve(()=>{},["stop"]))},[f("source",{src:`${e.activeAttachment.data_url}?t=${Date.now()}`},null,8,LZe)])):O("v-if",!0)]),f("div",DZe,[e.hasMoreThanOneAttachment?(p(),L(e.NextButton,{key:0,icon:"ltr:i-lucide-chevron-right rtl:i-lucide-chevron-left",class:"z-10",blue:"",faded:"",lg:"",disabled:e.activeImageIndex===a.allAttachments.length-1,onClick:n[13]||(n[13]=Ve(l=>e.onClickChangeAttachment(a.allAttachments[e.activeImageIndex+1],e.activeImageIndex+1),["stop"]))},null,8,["disabled"])):O("v-if",!0)])]),f("footer",PZe,[f("div",kZe,C(`${e.activeImageIndex+1} / ${a.allAttachments.length}`),1)])])]),_:1},8,["show"])]),_:1})}const i_=G(vZe,[["render",BZe],["__file","/app/app/javascript/dashboard/components/widgets/conversation/components/GalleryView.vue"]]),FZe={__name:"Image",props:{attachment:{type:Object,required:!0}},setup(t,{expose:n}){n();const a=P(!1),e=P(!1),{filteredCurrentChatAttachments:s}=Jt(),o={hasError:a,showGallery:e,filteredCurrentChatAttachments:s,handleError:()=>{a.value=!0},ref:P,Icon:Bt,get useSnakeCase(){return ha},get useMessageContext(){return Jt},GalleryView:i_};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},UZe={key:0,class:"flex flex-col items-center justify-center gap-1 text-xs text-center rounded-lg size-full bg-n-alpha-1 text-n-slate-11"},$Ze=["src"];function GZe(t,n,a,e,s,r){return p(),g(de,null,[f("div",{class:"size-[72px] overflow-hidden contain-content rounded-xl cursor-pointer",onClick:n[0]||(n[0]=o=>e.showGallery=!0)},[e.hasError?(p(),g("div",UZe,[v(e.Icon,{icon:"i-lucide-circle-off",class:"text-n-slate-11"}),Oe(" "+C(t.$t("COMPONENTS.MEDIA.LOADING_FAILED")),1)])):(p(),g("img",{key:1,class:"object-cover w-full h-full skip-context-menu",src:a.attachment.dataUrl,onError:e.handleError},null,40,$Ze))]),e.showGallery?(p(),L(e.GalleryView,{key:0,show:e.showGallery,"onUpdate:show":n[1]||(n[1]=o=>e.showGallery=o),attachment:e.useSnakeCase(a.attachment),"all-attachments":e.filteredCurrentChatAttachments,onError:e.handleError,onClose:n[2]||(n[2]=()=>e.showGallery=!1)},null,8,["show","attachment","all-attachments"])):O("v-if",!0)],64)}const VZe=G(FZe,[["render",GZe],["__file","/app/app/javascript/dashboard/components-next/message/chips/Image.vue"]]),HZe={__name:"Video",props:{attachment:{type:Object,required:!0}},setup(t,{expose:n}){n();const a=P(!1),{filteredCurrentChatAttachments:e}=Jt(),s={showGallery:a,filteredCurrentChatAttachments:e,ref:P,Icon:Bt,get useSnakeCase(){return ha},get useMessageContext(){return Jt},GalleryView:i_};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}},jZe=["src"],WZe={class:"absolute w-full h-full inset-0 p-1 flex items-center justify-center"},zZe={class:"size-7 bg-n-slate-1/60 backdrop-blur-sm rounded-full overflow-hidden shadow-[0_5px_15px_rgba(0,0,0,0.4)]"};function YZe(t,n,a,e,s,r){return p(),g(de,null,[f("div",{class:"size-[72px] overflow-hidden contain-content rounded-xl cursor-pointer relative group",onClick:n[0]||(n[0]=o=>e.showGallery=!0)},[f("video",{src:a.attachment.dataUrl,class:"w-full h-full object-cover",muted:"",playsInline:""},null,8,jZe),f("div",WZe,[f("div",zZe,[v(e.Icon,{icon:"i-teenyicons-play-small-solid",class:"size-7 text-n-slate-12/80 backdrop-blur"})])])]),e.showGallery?(p(),L(e.GalleryView,{key:0,show:e.showGallery,"onUpdate:show":n[1]||(n[1]=o=>e.showGallery=o),attachment:e.useSnakeCase(a.attachment),"all-attachments":e.filteredCurrentChatAttachments,onError:t.onError,onClose:n[2]||(n[2]=()=>e.showGallery=!1)},null,8,["show","attachment","all-attachments","onError"])):O("v-if",!0)],64)}const KZe=G(HZe,[["render",YZe],["__file","/app/app/javascript/dashboard/components-next/message/chips/Video.vue"]]),XZe=Object.assign({inheritAttrs:!1},{__name:"Audio",props:{attachment:{type:Object,required:!0}},setup(t,{expose:n}){n();const a=S(()=>wT(t.attachment.dataUrl)),e=xn("audioPlayer"),s=P(!1),r=P(!1),o=P(0),i=P(0),l=P(1),{uid:c}=Bf(),d=()=>{var N;i.value=(N=e.value)==null?void 0:N.duration},u=S(()=>`${l.value}x`);Pe(()=>{var N;i.value=(N=e.value)==null?void 0:N.duration,e.value.playbackRate=l.value}),Ns("pause_playing_audio",N=>{if(N!==c&&s.value){try{e.value.pause()}catch{}s.value=!1}});const I={timeStampURL:a,audioPlayer:e,isPlaying:s,isMuted:r,currentTime:o,duration:i,playbackSpeed:l,uid:c,onLoadedMetadata:d,playbackSpeedLabel:u,formatTime:N=>{if(!N||Number.isNaN(N))return"00:00";const x=Math.floor(N/60),R=Math.floor(N%60);return`${x.toString().padStart(2,"0")}:${R.toString().padStart(2,"0")}`},toggleMute:()=>{e.value.muted=!e.value.muted,r.value=e.value.muted},onTimeUpdate:()=>{var N;o.value=(N=e.value)==null?void 0:N.currentTime},seek:N=>{const x=Number(N.target.value);e.value.currentTime=x,o.value=x},playOrPause:()=>{s.value?(e.value.pause(),s.value=!1):(Mt.emit("pause_playing_audio",c),e.value.play(),s.value=!0)},onEnd:()=>{s.value=!1,o.value=0,l.value=1,e.value.playbackRate=1},changePlaybackSpeed:()=>{const N=[1,1.5,2],R=(N.indexOf(l.value)+1)%N.length;l.value=N[R],e.value.playbackRate=l.value},downloadAudio:async()=>{const{fileType:N,dataUrl:x,extension:R}=t.attachment;zc({url:x,type:N,extension:R})},computed:S,onMounted:Pe,useTemplateRef:xn,ref:P,getCurrentInstance:Bf,Icon:Bt,get timeStampAppendedURL(){return wT},get downloadFile(){return zc},get useEmitter(){return Ns},get emitter(){return Mt}};return Object.defineProperty(I,"__isScriptSetup",{enumerable:!1,value:!0}),I}}),qZe=["src"],ZZe={class:"flex gap-1 w-full flex-1 items-center justify-start"},QZe={class:"tabular-nums text-xs"},JZe={class:"flex-1 items-center flex px-2"},eQe=["max","value"],tQe={class:"text-xs text-n-slate-11 font-medium"},nQe={key:0,class:"text-n-slate-12 p-3 text-sm bg-n-alpha-1 rounded-lg w-full break-words"};function aQe(t,n,a,e,s,r){return p(),g(de,null,[f("audio",{ref:"audioPlayer",controls:"",class:"hidden",playsinline:"",onLoadedmetadata:e.onLoadedMetadata,onTimeupdate:e.onTimeUpdate,onEnded:e.onEnd},[f("source",{src:e.timeStampURL},null,8,qZe)],544),f("div",Ta(t.$attrs,{class:"rounded-xl w-full gap-2 p-1.5 bg-n-alpha-white flex flex-col items-center border border-n-container shadow-[0px_2px_8px_0px_rgba(94,94,94,0.06)]"}),[f("div",ZZe,[f("button",{class:"p-0 border-0 size-8",onClick:e.playOrPause},[e.isPlaying?(p(),L(e.Icon,{key:0,class:"size-8",icon:"i-teenyicons-pause-small-solid"})):(p(),L(e.Icon,{key:1,class:"size-8",icon:"i-teenyicons-play-small-solid"}))]),f("div",QZe,C(e.formatTime(e.currentTime))+" / "+C(e.formatTime(e.duration)),1),f("div",JZe,[f("input",{type:"range",min:"0",max:e.duration,value:e.currentTime,class:"w-full h-1 bg-n-slate-12/40 rounded-lg appearance-none cursor-pointer accent-current",onInput:e.seek},null,40,eQe)]),f("button",{class:"border-0 w-10 h-6 grid place-content-center bg-n-alpha-2 hover:bg-alpha-3 rounded-2xl",onClick:e.changePlaybackSpeed},[f("span",tQe,C(e.playbackSpeedLabel),1)]),f("button",{class:"p-0 border-0 size-8 grid place-content-center",onClick:e.toggleMute},[e.isMuted?(p(),L(e.Icon,{key:0,class:"size-4",icon:"i-lucide-volume-off"})):(p(),L(e.Icon,{key:1,class:"size-4",icon:"i-lucide-volume-2"}))]),f("button",{class:"p-0 border-0 size-8 grid place-content-center",onClick:e.downloadAudio},[v(e.Icon,{class:"size-4",icon:"i-lucide-download"})])]),a.attachment.transcribedText?(p(),g("div",nQe,C(a.attachment.transcribedText),1)):O("v-if",!0)],16)],64)}const UD=G(XZe,[["render",aQe],["__file","/app/app/javascript/dashboard/components-next/message/chips/Audio.vue"]]),sQe={__name:"FileIcon",props:{fileType:{type:String,required:!0}},setup(t,{expose:n}){n();const e={fileTypeIcon:S(()=>({"7z":"i-woot-file-zip",csv:"i-woot-file-csv",doc:"i-woot-file-doc",docx:"i-woot-file-doc",json:"i-woot-file-txt",odt:"i-woot-file-doc",pdf:"i-woot-file-pdf",ppt:"i-woot-file-ppt",pptx:"i-woot-file-ppt",rar:"i-woot-file-zip",rtf:"i-woot-file-doc",tar:"i-woot-file-zip",txt:"i-woot-file-txt",xls:"i-woot-file-xls",xlsx:"i-woot-file-xls",zip:"i-woot-file-zip"})[t.fileType]||"i-teenyicons-text-document-solid"),computed:S,Icon:Bt};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}};function oQe(t,n,a,e,s,r){return p(),L(e.Icon,{icon:e.fileTypeIcon},null,8,["icon"])}const $D=G(sQe,[["render",oQe],["__file","/app/app/javascript/dashboard/components-next/icon/FileIcon.vue"]]),rQe={__name:"File",props:{attachment:{type:Object,required:!0}},setup(t,{expose:n}){n();const{t:a}=Q(),e=S(()=>{var i;return Y1(((i=t.attachment)==null?void 0:i.dataUrl)||"")}),s=S(()=>{const{base:i,type:l}=e.value,c=(d,u,m)=>d.length>u?`${d.substring(0,u).trimEnd()}${m?"..":"..."}`:d;return l?`${c(i,12,!0)}.${l}`:c(i,14,!1)}),r=S(()=>({"7z":"dark:text-[#EDEEF0] text-[#2F265F]",csv:"text-n-amber-12",doc:"dark:text-[#D6E1FF] text-[#1F2D5C]",docx:"dark:text-[#D6E1FF] text-[#1F2D5C]",json:"text-n-slate-12",odt:"dark:text-[#D6E1FF] text-[#1F2D5C]",pdf:"text-n-slate-12",ppt:"dark:text-[#FFE0C2] text-[#582D1D]",pptx:"dark:text-[#FFE0C2] text-[#582D1D]",rar:"dark:text-[#EDEEF0] text-[#2F265F]",rtf:"dark:text-[#D6E1FF] text-[#1F2D5C]",tar:"dark:text-[#EDEEF0] text-[#2F265F]",txt:"text-n-slate-12",xls:"text-n-teal-12",xlsx:"text-n-teal-12",zip:"dark:text-[#EDEEF0] text-[#2F265F]"})[e.value.type]||"text-n-slate-12"),o={t:a,fileDetails:e,displayFileName:s,textColorClass:r,computed:S,get useI18n(){return Q},get getFileInfo(){return Y1},FileIcon:$D,Icon:Bt};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},iQe={class:"h-9 bg-n-alpha-white gap-2 overflow-hidden items-center flex px-2 rounded-lg border border-n-container"},lQe=["title"],cQe=["href"];function dQe(t,n,a,e,s,r){const o=nt("tooltip");return p(),g("div",iQe,[v(e.FileIcon,{class:"flex-shrink-0","file-type":e.fileDetails.type},null,8,["file-type"]),f("span",{class:oe(["flex-1 min-w-0 text-sm max-w-36",e.textColorClass]),title:e.fileDetails.name},C(e.displayFileName),11,lQe),ce((p(),g("a",{class:"flex-shrink-0 size-9 grid place-content-center cursor-pointer text-n-slate-11 hover:text-n-slate-12 transition-colors",href:a.attachment.dataUrl,rel:"noreferrer noopener nofollow",target:"_blank"},[v(e.Icon,{icon:"i-lucide-download"})],8,cQe)),[[o,e.t("CONVERSATION.DOWNLOAD")]])])}const uQe=G(rQe,[["render",dQe],["__file","/app/app/javascript/dashboard/components-next/message/chips/File.vue"]]),pQe=Object.assign({inheritAttrs:!1},{__name:"AttachmentChips",props:{attachments:{type:Array,default:()=>[]}},setup(t,{expose:n}){n();const a=t,e=Wc(),{orientation:s}=Jt(),r=S(()=>{const u=[e.class,"flex","flex-wrap"];return s.value==="right"&&u.push("justify-end"),u}),o=S(()=>Array.isArray(a.attachments)?a.attachments:[]),i=S(()=>{const u=[Ea.IMAGE,Ea.VIDEO];return o.value.filter(h=>u.includes(h.fileType)).sort((h,_)=>u.indexOf(h.fileType)-u.indexOf(_.fileType))}),l=S(()=>o.value.filter(u=>u.fileType===Ea.AUDIO)),c=S(()=>o.value.filter(u=>u.fileType===Ea.FILE)),d={props:a,attrs:e,orientation:s,classToApply:r,allAttachments:o,mediaAttachments:i,recordings:l,files:c,computed:S,useAttrs:Wc,ImageChip:VZe,VideoChip:KZe,AudioChip:UD,FileChip:uQe,get useMessageContext(){return Jt},get ATTACHMENT_TYPES(){return Ea}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}});function fQe(t,n,a,e,s,r){return p(),g(de,null,[e.mediaAttachments.length?(p(),g("div",{key:0,class:oe(e.classToApply)},[(p(!0),g(de,null,Ae(e.mediaAttachments,o=>(p(),g(de,{key:o.id},[o.fileType===e.ATTACHMENT_TYPES.IMAGE?(p(),L(e.ImageChip,{key:0,attachment:o},null,8,["attachment"])):o.fileType===e.ATTACHMENT_TYPES.VIDEO?(p(),L(e.VideoChip,{key:1,attachment:o},null,8,["attachment"])):O("v-if",!0)],64))),128))],2)):O("v-if",!0),e.recordings.length?(p(),g("div",{key:1,class:oe(e.classToApply)},[(p(!0),g(de,null,Ae(e.recordings,o=>(p(),g("div",{key:o.id},[v(e.AudioChip,{class:"bg-n-alpha-3 dark:bg-n-alpha-2 text-n-slate-12",attachment:o},null,8,["attachment"])]))),128))],2)):O("v-if",!0),e.files.length?(p(),g("div",{key:2,class:oe(e.classToApply)},[(p(!0),g(de,null,Ae(e.files,o=>(p(),L(e.FileChip,{key:o.id,attachment:o},null,8,["attachment"]))),128))],2)):O("v-if",!0)],64)}const GD=G(pQe,[["render",fQe],["__file","/app/app/javascript/dashboard/components-next/message/chips/AttachmentChips.vue"]]),mQe={__name:"TranslationToggle",props:{showingOriginal:Boolean},emits:["toggle"],setup(t,{expose:n}){n();const a={};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}};function hQe(t,n,a,e,s,r){return p(),g("span",null,[f("span",{class:"text-xs text-n-slate-11 cursor-pointer hover:underline select-none",onClick:n[0]||(n[0]=o=>t.$emit("toggle"))},C(a.showingOriginal?t.$t("CONVERSATION.VIEW_TRANSLATED"):t.$t("CONVERSATION.VIEW_ORIGINAL")),1)])}const VD=G(mQe,[["render",hQe],["__file","/app/app/javascript/dashboard/components-next/message/TranslationToggle.vue"]]);function eh(t){const n=S(()=>{if(!t.value)return!1;const{translations:e={}}=t.value;return Object.keys(e||{}).length>0}),a=S(()=>{if(!n.value)return null;const e=t.value.translations;return e[Object.keys(e)[0]]});return{hasTranslations:n,translationContent:a}}const _Qe={__name:"Index",setup(t,{expose:n}){n();const{content:a,attachments:e,contentAttributes:s,messageType:r}=Jt(),{hasTranslations:o,translationContent:i}=eh(s),l=P(!1),c=S(()=>l.value?a.value:o.value?i.value:a.value),d=S(()=>r.value===Xn.TEMPLATE),u=S(()=>{var _;return!a.value&&!((_=e.value)!=null&&_.length)}),h={content:a,attachments:e,contentAttributes:s,messageType:r,hasTranslations:o,translationContent:i,renderOriginal:l,renderContent:c,isTemplate:d,isEmpty:u,handleSeeOriginal:()=>{l.value=!l.value},computed:S,ref:P,BaseBubble:Lo,FormattedContent:FD,AttachmentChips:GD,TranslationToggle:VD,get MESSAGE_TYPES(){return Xn},get useMessageContext(){return Jt},get useTranslations(){return eh}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}},gQe={class:"gap-3 flex flex-col"},bQe={key:0,class:"text-n-slate-11"},vQe={key:0,class:"px-2 py-1 rounded-lg bg-n-alpha-3"};function EQe(t,n,a,e,s,r){return p(),L(e.BaseBubble,{class:"px-4 py-3","data-bubble-name":"text"},{default:z(()=>[f("div",gQe,[e.isEmpty?(p(),g("span",bQe,C(t.$t("CONVERSATION.NO_CONTENT")),1)):O("v-if",!0),e.renderContent?(p(),L(e.FormattedContent,{key:1,content:e.renderContent},null,8,["content"])):O("v-if",!0),e.hasTranslations?(p(),L(e.TranslationToggle,{key:2,class:"-mt-3","showing-original":e.renderOriginal,onToggle:e.handleSeeOriginal},null,8,["showing-original"])):O("v-if",!0),v(e.AttachmentChips,{attachments:e.attachments,class:"gap-2"},null,8,["attachments"]),e.isTemplate?(p(),g(de,{key:3},[e.contentAttributes.submittedEmail?(p(),g("div",vQe,C(e.contentAttributes.submittedEmail),1)):O("v-if",!0)],64)):O("v-if",!0)])]),_:1})}const tN=G(_Qe,[["render",EQe],["__file","/app/app/javascript/dashboard/components-next/message/bubbles/Text/Index.vue"]]),SQe={__name:"Activity",setup(t,{expose:n}){n();const{content:a,createdAt:e}=Jt(),s=S(()=>Fl(e.value,"LLL d, h:mm a")),r={content:a,createdAt:e,readableTime:s,computed:S,get messageTimestamp(){return Fl},BaseBubble:Lo,get useMessageContext(){return Jt}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},TQe=["title"];function AQe(t,n,a,e,s,r){const o=nt("dompurify-html"),i=nt("tooltip");return ce((p(),L(e.BaseBubble,{class:"px-3 py-1 !rounded-xl flex min-w-0 items-center gap-2","data-bubble-name":"activity"},{default:z(()=>[ce(f("span",{title:e.content},null,8,TQe),[[o,e.content]])]),_:1})),[[i,e.readableTime,void 0,{top:!0}]])}const yQe=G(SQe,[["render",AQe],["__file","/app/app/javascript/dashboard/components-next/message/bubbles/Activity.vue"]]),IQe={__name:"Image",emits:["error"],setup(t,{expose:n,emit:a}){n();const e=a,{t:s}=Q(),{filteredCurrentChatAttachments:r,attachments:o}=Jt(),i=S(()=>o.value[0]),l=P(!1),c=P(!1),d=P(!1),h={emit:e,t:s,filteredCurrentChatAttachments:r,attachments:o,attachment:i,hasError:l,showGallery:c,isDownloading:d,handleError:()=>{l.value=!0,e("error")},downloadAttachment:async()=>{const{fileType:_,dataUrl:E,extension:y}=i.value;try{d.value=!0,await zc({url:E,type:_,extension:y})}catch{Z(s("GALLERY_VIEW.ERROR_DOWNLOADING"))}finally{d.value=!1}},ref:P,computed:S,get useI18n(){return Q},get useAlert(){return Z},BaseBubble:Lo,Button:Se,Icon:Bt,get useSnakeCase(){return ha},get useMessageContext(){return Jt},get downloadFile(){return zc},GalleryView:i_};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}},CQe={key:0,class:"flex items-center gap-1 text-center rounded-lg"},OQe={class:"mb-0 text-n-slate-11"},NQe={key:1,class:"relative group rounded-lg overflow-hidden"},xQe=["src","width","height"],RQe={class:"absolute right-2 bottom-2 hidden group-hover:flex gap-2"};function wQe(t,n,a,e,s,r){return p(),g(de,null,[v(e.BaseBubble,{class:"overflow-hidden p-3","data-bubble-name":"image",onClick:n[1]||(n[1]=o=>e.showGallery=!0)},{default:z(()=>[e.hasError?(p(),g("div",CQe,[v(e.Icon,{icon:"i-lucide-circle-off",class:"text-n-slate-11"}),f("p",OQe,C(t.$t("COMPONENTS.MEDIA.IMAGE_UNAVAILABLE")),1)])):(p(),g("div",NQe,[f("img",{class:"skip-context-menu",src:e.attachment.dataUrl,width:e.attachment.width,height:e.attachment.height,onClick:n[0]||(n[0]=(...o)=>t.onClick&&t.onClick(...o)),onError:e.handleError},null,40,xQe),n[4]||(n[4]=f("div",{class:"inset-0 p-2 pointer-events-none absolute bg-gradient-to-tl from-n-slate-12/30 dark:from-n-slate-1/50 via-transparent to-transparent hidden group-hover:flex"},null,-1)),f("div",RQe,[v(e.Button,{xs:"",solid:"",slate:"",icon:"i-lucide-expand",class:"opacity-60"}),v(e.Button,{xs:"",solid:"",slate:"",icon:"i-lucide-download",class:"opacity-60","is-loading":e.isDownloading,disabled:e.isDownloading,onClick:Ve(e.downloadAttachment,["stop"])},null,8,["is-loading","disabled"])])]))]),_:1}),e.showGallery?(p(),L(e.GalleryView,{key:0,show:e.showGallery,"onUpdate:show":n[2]||(n[2]=o=>e.showGallery=o),attachment:e.useSnakeCase(e.attachment),"all-attachments":e.filteredCurrentChatAttachments,onError:e.handleError,onClose:n[3]||(n[3]=()=>e.showGallery=!1)},null,8,["show","attachment","all-attachments"])):O("v-if",!0)],64)}const nN=G(IQe,[["render",wQe],["__file","/app/app/javascript/dashboard/components-next/message/bubbles/Image.vue"]]),MQe={__name:"BaseAttachment",props:{icon:{type:[String,Object],required:!0},iconBgColor:{type:String,default:"bg-n-alpha-3"},senderTranslationKey:{type:String,required:!0},content:{type:String,required:!0},title:{type:String,default:""},action:{type:Object,required:!0,validator:t=>t.label&&(t.href||t.onClick)}},setup(t,{expose:n}){n();const{sender:a}=Jt(),{t:e}=Q(),s=S(()=>{var o;return((o=a==null?void 0:a.value)==null?void 0:o.name)||""}),r={sender:a,t:e,senderName:s,computed:S,get useI18n(){return Q},BaseBubble:Lo,Icon:Bt,get useMessageContext(){return Jt}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},LQe={class:"grid gap-4 min-w-64"},DQe={class:"grid gap-3"},PQe={class:"space-y-1 overflow-hidden"},kQe={key:0,class:"text-n-slate-12 text-sm truncate"},BQe={key:0,class:"truncate text-sm text-n-slate-12"},FQe={key:1,class:"truncate text-sm text-n-slate-11"},UQe={key:0,class:"mb-2"},$Qe=["href"];function GQe(t,n,a,e,s,r){return p(),L(e.BaseBubble,{class:"overflow-hidden p-3","data-bubble-name":"attachment"},{default:z(()=>[f("div",LQe,[f("div",DQe,[f("div",{class:oe(["size-8 rounded-lg grid place-content-center",a.iconBgColor])},[qe(t.$slots,"icon",{},()=>[v(e.Icon,{icon:a.icon,class:"text-white size-4"},null,8,["icon"])])],2),f("div",PQe,[e.senderName?(p(),g("div",kQe,C(e.t(a.senderTranslationKey,{sender:e.senderName})),1)):O("v-if",!0),qe(t.$slots,"default",{},()=>[a.title?(p(),g("div",BQe,C(a.title),1)):O("v-if",!0),a.content?(p(),g("div",FQe,C(a.content),1)):O("v-if",!0)])])]),a.action?(p(),g("div",UQe,[a.action.href?(p(),g("a",{key:0,href:a.action.href,rel:"noreferrer noopener nofollow",target:"_blank",class:"w-full block bg-n-solid-3 px-4 py-2 rounded-lg text-sm text-center border border-n-container"},C(a.action.label),9,$Qe)):(p(),g("button",{key:1,class:"w-full bg-n-solid-3 px-4 py-2 rounded-lg text-sm text-center border border-n-container",onClick:n[0]||(n[0]=(...o)=>a.action.onClick&&a.action.onClick(...o))},C(a.action.label),1))])):O("v-if",!0)])]),_:3})}const l_=G(MQe,[["render",GQe],["__file","/app/app/javascript/dashboard/components-next/message/bubbles/BaseAttachment.vue"]]),VQe={__name:"File",setup(t,{expose:n}){n();const{attachments:a}=Jt(),{t:e}=Q(),s=S(()=>a.value[0].dataUrl),r=S(()=>s.value&&s.value.substring(s.value.lastIndexOf("/")+1)||e("CONVERSATION.UNKNOWN_FILE_TYPE")),o=S(()=>r.value.split(".").pop()),i={attachments:a,t:e,url:s,fileName:r,fileType:o,computed:S,get useI18n(){return Q},get useMessageContext(){return Jt},BaseAttachmentBubble:l_,FileIcon:$D};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}};function HQe(t,n,a,e,s,r){return p(),L(e.BaseAttachmentBubble,{icon:"i-teenyicons-user-circle-solid","icon-bg-color":"bg-n-alpha-3 dark:bg-n-alpha-white","sender-translation-key":"CONVERSATION.SHARED_ATTACHMENT.FILE",content:decodeURI(e.fileName),action:{href:e.url,label:t.$t("CONVERSATION.DOWNLOAD")}},{icon:z(()=>[v(e.FileIcon,{"file-type":e.fileType,class:"size-4"},null,8,["file-type"])]),_:1},8,["content","action"])}const aN=G(VQe,[["render",HQe],["__file","/app/app/javascript/dashboard/components-next/message/bubbles/File.vue"]]),jQe={__name:"Audio",setup(t,{expose:n}){n();const{attachments:a}=Jt(),e=S(()=>a.value[0]),s={attachments:a,attachment:e,computed:S,BaseBubble:Lo,AudioChip:UD,get useMessageContext(){return Jt}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}};function WQe(t,n,a,e,s,r){return p(),L(e.BaseBubble,{class:"bg-transparent","data-bubble-name":"audio"},{default:z(()=>[v(e.AudioChip,{attachment:e.attachment,class:"p-2 text-n-slate-12 skip-context-menu"},null,8,["attachment"])]),_:1})}const sN=G(jQe,[["render",WQe],["__file","/app/app/javascript/dashboard/components-next/message/bubbles/Audio.vue"]]),zQe={__name:"Video",emits:["error"],setup(t,{expose:n,emit:a}){n();const e=a,s=P(!1),r=P(!1),{filteredCurrentChatAttachments:o,attachments:i}=Jt(),l=()=>{s.value=!0,e("error")},c=S(()=>i.value[0]),d=S(()=>c.value.fileType===Ea.IG_REEL),u={emit:e,hasError:s,showGallery:r,filteredCurrentChatAttachments:o,attachments:i,handleError:l,attachment:c,isReel:d,ref:P,computed:S,BaseBubble:Lo,Icon:Bt,get useSnakeCase(){return ha},get useMessageContext(){return Jt},GalleryView:i_,get ATTACHMENT_TYPES(){return Ea}};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}},YQe={class:"relative group rounded-lg overflow-hidden"},KQe={key:0,class:"absolute p-2 flex items-start justify-end right-0 pointer-events-none"},XQe=["src"];function qQe(t,n,a,e,s,r){return p(),g(de,null,[v(e.BaseBubble,{class:"overflow-hidden p-3","data-bubble-name":"video",onClick:n[0]||(n[0]=o=>e.showGallery=!0)},{default:z(()=>[f("div",YQe,[e.isReel?(p(),g("div",KQe,[v(e.Icon,{icon:"i-lucide-instagram",class:"text-white shadow-lg"})])):O("v-if",!0),f("video",{controls:"",class:oe(["rounded-lg skip-context-menu",{"max-w-48":e.isReel,"max-w-full":!e.isReel}]),src:e.attachment.dataUrl,onError:e.handleError},null,42,XQe)])]),_:1}),e.showGallery?(p(),L(e.GalleryView,{key:0,show:e.showGallery,"onUpdate:show":n[1]||(n[1]=o=>e.showGallery=o),attachment:e.useSnakeCase(e.attachment),"all-attachments":e.filteredCurrentChatAttachments,onError:t.onError,onClose:n[2]||(n[2]=()=>e.showGallery=!1)},null,8,["show","attachment","all-attachments","onError"])):O("v-if",!0)],64)}const Fb=G(zQe,[["render",qQe],["__file","/app/app/javascript/dashboard/components-next/message/bubbles/Video.vue"]]),ZQe={__name:"InstagramStory",emits:["error"],setup(t,{expose:n,emit:a}){n();const e=a,{variant:s,content:r,attachments:o}=Jt(),i=S(()=>o.value[0]),l=P(!1),c=P(!1),d=S(()=>s.value===zn.ACTIVITY?r.value:new ki(r.value).formattedMessage),h={emit:e,variant:s,content:r,attachments:o,attachment:i,hasImgStoryError:l,hasVideoStoryError:c,formattedContent:d,onImageLoadError:()=>{l.value=!0,e("error")},onVideoLoadError:()=>{c.value=!0,e("error")},ref:P,computed:S,get useMessageContext(){return Jt},Icon:Bt,BaseBubble:Lo,get MessageFormatter(){return ki},get MESSAGE_VARIANTS(){return zn}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}},QQe={key:0,class:"mb-2"},JQe=["src"],eJe=["src"],tJe={key:3,class:"flex items-center gap-1 px-5 py-4 text-center rounded-lg bg-n-alpha-1"},nJe={class:"mb-0 text-n-slate-11"};function aJe(t,n,a,e,s,r){const o=nt("dompurify-html");return p(),L(e.BaseBubble,{class:"p-3 overflow-hidden","data-bubble-name":"ig-story"},{default:z(()=>[e.content?ce((p(),g("div",QQe,null,512)),[[o,e.formattedContent]]):O("v-if",!0),e.hasImgStoryError?e.hasVideoStoryError?(p(),g("div",tJe,[v(e.Icon,{icon:"i-lucide-circle-off",class:"text-n-slate-11"}),f("p",nJe,C(t.$t("COMPONENTS.FILE_BUBBLE.INSTAGRAM_STORY_UNAVAILABLE")),1)])):(p(),g("video",{key:2,class:"rounded-lg max-w-80 skip-context-menu",controls:"",src:e.attachment.dataUrl,onError:e.onVideoLoadError},null,40,eJe)):(p(),g("img",{key:1,class:"rounded-lg max-w-80 skip-context-menu",src:e.attachment.dataUrl,onError:e.onImageLoadError},null,40,JQe))]),_:1})}const oN=G(ZQe,[["render",aJe],["__file","/app/app/javascript/dashboard/components-next/message/bubbles/InstagramStory.vue"]]),rN={a:["class","href","id","style","target"],address:["class","id","style"],b:["class","id","style"],blockquote:["class","id","style"],br:["class","id","style"],caption:["class","id","style"],cite:["class","id","style"],code:["class","id","style"],col:["align","bgcolor","char","charoff","class","id","style","valign","width"],colgroup:["align","bgcolor","char","charoff","class","id","style","valign","width"],center:["class","id","style"],dd:["class","id","style"],div:["align","class","dir","id","style"],dt:["class","id","style"],em:["class","id","style"],font:["class","color","face","id","size","style"],h1:["align","class","dir","id","style"],h2:["align","class","dir","id","style"],h3:["align","class","dir","id","style"],h4:["align","class","dir","id","style"],h5:["align","class","dir","id","style"],h6:["align","class","dir","id","style"],hr:["align","size","width"],i:["class","id","style"],img:["align","alt","border","class","height","hspace","id","src","style","title","usemap","vspace","width"],label:["class","id","style"],legend:["class","id","style"],li:["class","dir","id","style","type"],ol:["class","dir","id","style","type","start","reversed"],p:["align","class","dir","id","style"],pre:["class","id","style"],span:["class","id","style"],strong:["class","id","style"],style:[],sub:["class","id","style"],sup:["class","id","style"],table:["align","bgcolor","border","cellpadding","cellspacing","class","dir","frame","id","rules","style","width"],tbody:["class","id","style"],td:["abbr","align","bgcolor","class","colspan","dir","height","id","lang","rowspan","scope","style","valign","width"],tfoot:["align","bgcolor","char","charoff","class","id","style","valign"],th:["abbr","align","bgcolor","class","colspan","dir","height","id","lang","rowspan","scope","style","valign","width"],thead:["align","bgcolol","char","charoff","class","id","style","valign"],tr:["align","bgcolor","char","charoff","class","dir","id","style","valign"],u:["class","id","style"],ul:["class","dir","id","style"]},sJe=["script","iframe","textarea","title","noscript","noembed","svg"],oJe=["azimuth","background","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-repeat-x","background-repeat-y","background-size","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","box-sizing","break-after","break-before","break-inside","caption-side","clear","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","direction","display","elevation","empty-cells","float","font","font-family","font-feature-settings","font-kerning","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-weight","height","image-orientation","image-resolution","ime-mode","isolation","layout-flow","layout-grid","layout-grid-char","layout-grid-char-spacing","layout-grid-line","layout-grid-mode","layout-grid-type","letter-spacing","line-break","line-height","list-style","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","max-height","max-width","min-height","min-width","mix-blend-mode","object-fit","object-position","opacity","outline","outline-color","outline-style","outline-width","overflow","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","pitch","pitch-range","quotes","richness","speak","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","table-layout","text-align","text-align-last","text-autospace","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-style","text-indent","text-justify","text-kashida-space","text-orientation","text-overflow","text-transform","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","unicode-bidi","vertical-align","voice-family","white-space","white-space-collapse","width","word-break","word-spacing","word-wrap","writing-mode","zoom"];function rJe(t,n){return n?t.split(",").map(a=>a.trim()).map(a=>{const e=a.replace(/\./g,"."+n+"_").replace(/#/g,"#"+n+"_");return e.toLowerCase().startsWith("body")?"#"+n+" "+e.substring(4):"#"+n+" "+e}).join(","):t}function iJe(t,n,a){return t.trim().replace(/expression\((.*?)\)/g,"").replace(/url\(["']?(.*?)["']?\)/g,(e,s)=>a?`url("${encodeURI(a(decodeURI(s)))}")`:n.includes(s.toLowerCase().split(":")[0])?e:"")}function HD(t,n,a,e,s){if(!t)return;const r=[];for(let o=0;o<t.length;o++){const i=t[o];r.push(i)}for(const o of r)if(a.includes(o)){const i=t.getPropertyValue(o);t.setProperty(o,iJe(i,n,s),e?t.getPropertyPriority(o):void 0)}else t.removeProperty(o)}function iN(t,n,a,e,s,r){t.selectorText=rJe(t.selectorText,n),HD(t.style,a,e,s,r)}const lN=["http","https","mailto"];function lJe(t,{dropAllHtmlTags:n=!1,rewriteExternalLinks:a,rewriteExternalResources:e,id:s="msg_"+String.fromCharCode(...new Array(24).fill(void 0).map(()=>Math.random()*25%25+65)),allowedSchemas:r=lN,allowedCssProperties:o=oJe,preserveCssPriority:i=!0,noWrapper:l=!1}){var c,d,u,m,h;l&&(s="");const _=new DOMParser().parseFromString(t,"text/html");r=Array.isArray(r)?r.map(I=>I.toLowerCase()):lN;const E=_.createNodeIterator(_.documentElement,NodeFilter.SHOW_COMMENT);let y;for(;y=E.nextNode();)(c=y.parentNode)==null||c.removeChild(y);const b=[...sJe];n&&b.push("style"),_.querySelectorAll(b.join(", ")).forEach(I=>I.remove()),_.querySelectorAll("head > style").forEach(I=>{_.body.appendChild(I)});const A=[],T=_.createNodeIterator(_.body,NodeFilter.SHOW_ELEMENT,{acceptNode:()=>NodeFilter.FILTER_ACCEPT});for(;y=T.nextNode();){const I=y,N=I.tagName.toLowerCase();if(!(N==="body"||N==="html")){if(n){if(y.textContent){const x=_.createTextNode(y.textContent);(d=y.parentNode)==null||d.replaceChild(x,y)}else(u=y.parentNode)==null||u.removeChild(y);continue}if(N in rN){const x=rN[N];for(const R of I.getAttributeNames())if(!x.includes(R))I.removeAttribute(R);else if(R==="class"&&!l)I.setAttribute(R,((m=I.getAttribute(R))==null?void 0:m.split(" ").map(M=>s+"_"+M).join(" "))??"");else if(R==="id"&&!l)I.setAttribute(R,s+"_"+(I.getAttribute(R)??""));else if(R==="href"||R==="src"){const M=I.getAttribute(R)??"";R==="href"&&a?I.setAttribute(R,a(M)):R==="src"&&e?I.setAttribute(R,e(M)):r.includes(M.toLowerCase().split(":")[0])||I.removeAttribute(R)}HD(I.style,r,o,i,e),N==="a"&&(I.setAttribute("rel","noopener noreferrer"),I.setAttribute("target","_blank"))}else I.insertAdjacentHTML("afterend",I.innerHTML),A.push(I)}}for(const I of A)try{try{(h=I.parentNode)==null||h.removeChild(I)}catch{I.outerHTML=""}}catch{try{I.remove()}catch{}}if(_.querySelectorAll("body style").forEach(I=>{const N=I,x=N.sheet,R=[];if(!x.cssRules){N.textContent="";return}for(let M=0;M<x.cssRules.length;M++){const w=x.cssRules[M];if("selectorText"in w)iN(w,s,r,o,i,e),R.push(w);else if("cssRules"in w&&"media"in w){const D=w,B=[];for(let k=0;k<D.cssRules.length;k++){const V=D.cssRules[k];V.type===V.STYLE_RULE&&(iN(V,s,r,o,i,e),B.push(V))}for(;D.cssRules.length>0;)D.deleteRule(0);for(const k of B)D.insertRule(k.cssText,D.cssRules.length);R.push(D)}}N.textContent=R.map(M=>M.cssText).join(`
`)}),l)return _.body.innerHTML;{const I=_.createElement("div");return I.id=s,I.innerHTML=_.body.innerHTML,I.outerHTML}}function cJe(t){const n=document.createElement("div");return n.textContent=t,n.innerHTML}function dJe(t,n,a){let e=t??"";return(e==null?void 0:e.length)===0&&n&&(e=cJe(n).split(`
`).map(s=>"<p>"+s+"</p>").join(`
`)),lJe(e,a??{})}const uJe=["innerHTML"],pJe=["title"],fJe=ei({__name:"Letter",props:{className:{},html:{},text:{},useIframe:{type:Boolean},iframeTitle:{},rewriteExternalLinks:{},rewriteExternalResources:{},allowedCssProperties:{},allowedSchemas:{},preserveCssPriority:{type:Boolean}},setup(t){const n=t,{className:a,html:e,text:s,useIframe:r,iframeTitle:o,rewriteExternalLinks:i,rewriteExternalResources:l,allowedSchemas:c,allowedCssProperties:d,preserveCssPriority:u}=Lt(n),m=dJe(e,s,{rewriteExternalResources:l,rewriteExternalLinks:i,allowedSchemas:c,preserveCssPriority:u,allowedCssProperties:d}),h="data:text/html;charset=utf-8,"+encodeURIComponent(m);return(_,E)=>Sa(r)?Sa(r)?(p(),g("div",{key:1,class:oe([Sa(a)])},[f("iframe",{src:h,title:Sa(o)},null,8,pJe)],2)):O("",!0):(p(),g("div",{key:0,class:oe([Sa(a)]),innerHTML:Sa(m)},null,10,uJe))}}),mJe=["azimuth","background","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-repeat-x","background-repeat-y","background-size","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","box-sizing","break-after","break-before","break-inside","caption-side","clear","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","direction","display","elevation","empty-cells","float","font","font-family","font-feature-settings","font-kerning","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-weight","height","image-orientation","image-resolution","ime-mode","isolation","layout-flow","layout-grid","layout-grid-char","layout-grid-char-spacing","layout-grid-line","layout-grid-mode","layout-grid-type","letter-spacing","line-break","line-height","list-style","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","max-height","max-width","min-height","min-width","mix-blend-mode","object-fit","object-position","opacity","outline","outline-color","outline-style","outline-width","overflow","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","pitch","pitch-range","quotes","richness","speak","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","table-layout","text-align","text-align-last","text-autospace","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-style","text-indent","text-justify","text-kashida-space","text-orientation","text-overflow","text-transform","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","unicode-bidi","vertical-align","voice-family","white-space","white-space-collapse","width","word-break","word-spacing","word-wrap","writing-mode","zoom"],hJe=mJe,cN=[".gmail_quote_container",".gmail_quote",".OutlookQuote",".email-quote",".quoted-text",".quote",'[class*="quote"]','[class*="Quote"]'],_Je="blockquote",gJe=[/On .* wrote:/i,/-----Original Message-----/i,/Sent: /i,/From: /i];class Ub{static extractQuotes(n){const a=document.createElement("div");return a.innerHTML=n,cN.forEach(s=>{a.querySelectorAll(s).forEach(r=>{r.remove()})}),this.removeTrailingBlockquote(a),this.findTextNodeQuotes(a).forEach(s=>{s.remove()}),a.innerHTML}static hasQuotes(n){const a=document.createElement("div");a.innerHTML=n;for(const s of cN)if(a.querySelector(s))return!0;return this.findTrailingBlockquote(a)?!0:this.findTextNodeQuotes(a).length>0}static findTextNodeQuotes(n){const a=[],e=document.createTreeWalker(n,NodeFilter.SHOW_TEXT,null,!1);for(let s=e.nextNode();s!==null;s=e.nextNode())if(gJe.some(o=>o.test(s.textContent))){const o=this.findParentBlock(s);o&&!a.includes(o)&&a.push(o)}return a}static findParentBlock(n){const a=["DIV","P","BLOCKQUOTE","SECTION"];let e=n.parentElement;for(;e;){if(a.includes(e.tagName))return e;e=e.parentElement}return null}static removeTrailingBlockquote(n){const a=this.findTrailingBlockquote(n);a==null||a.remove()}static findTrailingBlockquote(n){var e;const a=n.lastElementChild;return(e=a==null?void 0:a.matches)!=null&&e.call(a,_Je)?a:null}}const bJe={__name:"EmailMeta",setup(t,{expose:n}){n();const{contentAttributes:a,status:e,sender:s}=Jt(),r=S(()=>e.value===An.FAILED),o=S(()=>{var _,E;return((E=(_=a.value)==null?void 0:_.email)==null?void 0:E.from)??[]}),i=S(()=>{const{toEmails:_,email:E}=a.value;return(E==null?void 0:E.to)??_??[]}),l=S(()=>{var _,E,y;return((_=a.value)==null?void 0:_.ccEmails)??((y=(E=a.value)==null?void 0:E.email)==null?void 0:y.cc)??[]}),c=S(()=>{const _=o.value[0]??"",E=s.value.email??"";return!_&&!E?null:_===E?s.value.name:null}),d=S(()=>{var _,E,y;return((_=a.value)==null?void 0:_.bccEmails)??((y=(E=a.value)==null?void 0:E.email)==null?void 0:y.bcc)??[]}),u=S(()=>{var _,E;return((E=(_=a.value)==null?void 0:_.email)==null?void 0:E.subject)??""}),m=S(()=>o.value[0]||i.value.length||l.value.length||d.value.length||u.value),h={contentAttributes:a,status:e,sender:s,hasError:r,fromEmail:o,toEmail:i,ccEmail:l,senderName:c,bccEmail:d,subject:u,showMeta:m,computed:S,get MESSAGE_STATUS(){return An},get useMessageContext(){return Jt}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}},vJe={key:1},EJe={key:2},SJe={key:3},TJe={key:4};function AJe(t,n,a,e,s,r){return ce((p(),g("section",{class:oe(["space-y-1 rtl:pl-9 ltr:pr-9 text-sm break-words",e.hasError?"text-n-ruby-11":"text-n-slate-11"])},[e.showMeta?(p(),g(de,{key:0},[e.fromEmail[0]?(p(),g("div",{key:0,class:oe(e.hasError?"text-n-ruby-11":"text-n-slate-12")},[e.senderName?(p(),g(de,{key:0},[f("span",null,C(e.senderName),1),Oe(" <"+C(e.fromEmail[0])+"> ",1)],64)):(p(),g(de,{key:1},[Oe(C(e.fromEmail[0]),1)],64))],2)):O("v-if",!0),e.toEmail.length?(p(),g("div",vJe,C(t.$t("EMAIL_HEADER.TO"))+": "+C(e.toEmail.join(", ")),1)):O("v-if",!0),e.ccEmail.length?(p(),g("div",EJe,C(t.$t("EMAIL_HEADER.CC"))+": "+C(e.ccEmail.join(", ")),1)):O("v-if",!0),e.bccEmail.length?(p(),g("div",SJe,C(t.$t("EMAIL_HEADER.BCC"))+": "+C(e.bccEmail.join(", ")),1)):O("v-if",!0),e.subject?(p(),g("div",TJe,C(t.$t("EMAIL_HEADER.SUBJECT"))+": "+C(e.subject),1)):O("v-if",!0)],64)):O("v-if",!0)],2)),[[En,e.showMeta]])}const yJe=G(bJe,[["render",AJe],["__file","/app/app/javascript/dashboard/components-next/message/bubbles/Email/EmailMeta.vue"]]),IJe={__name:"Index",setup(t,{expose:n}){n();const{content:a,contentAttributes:e,attachments:s,messageType:r}=Jt(),o=P(!1),i=P(!1),l=P(!1),c=P(!1),d=xn("contentContainer");Pe(()=>{var D;o.value=((D=d.value)==null?void 0:D.scrollHeight)>400});const u=S(()=>r.value===Xn.OUTGOING),m=S(()=>!u.value),{hasTranslations:h,translationContent:_}=eh(e),E=S(()=>{var B,k,V;const D=((V=(k=(B=e==null?void 0:e.value)==null?void 0:B.email)==null?void 0:k.textContent)==null?void 0:V.full)??a.value;return K1(D)}),y=S(()=>{var D,B,k;return((k=(B=(D=e==null?void 0:e.value)==null?void 0:D.email)==null?void 0:B.htmlContent)==null?void 0:k.full)||E.value}),b=S(()=>{var D,B,k,V,F,$;return((k=(B=(D=e==null?void 0:e.value)==null?void 0:D.email)==null?void 0:B.textContent)==null?void 0:k.full)||(($=(F=(V=e==null?void 0:e.value)==null?void 0:V.email)==null?void 0:F.htmlContent)==null?void 0:$.full)}),A=S(()=>h.value&&!c.value?_.value:a.value),T=S(()=>h.value&&!c.value?_.value:E.value),I=S(()=>h.value&&!c.value?_.value:y.value),N=S(()=>Ub.extractQuotes(I.value)),x=S(()=>Ub.hasQuotes(I.value)),R=S(()=>c.value?"original":h.value?"translated":"original"),w={content:a,contentAttributes:e,attachments:s,messageType:r,isExpandable:o,isExpanded:i,showQuotedMessage:l,renderOriginal:c,contentContainer:d,isOutgoing:u,isIncoming:m,hasTranslations:h,translationContent:_,originalEmailText:E,originalEmailHtml:y,hasEmailContent:b,messageContent:A,textToShow:T,fullHTML:I,unquotedHTML:N,hasQuotedMessage:x,translationKeySuffix:R,handleSeeOriginal:()=>{c.value=!c.value},computed:S,useTemplateRef:xn,ref:P,onMounted:Pe,get Letter(){return fJe},get sanitizeTextForRender(){return K1},get allowedCssProperties(){return hJe},Icon:Bt,get EmailQuoteExtractor(){return Ub},FormattedContent:FD,BaseBubble:Lo,AttachmentChips:GD,EmailMeta:yJe,TranslationToggle:VD,get useMessageContext(){return Jt},get MESSAGE_TYPES(){return Xn},get useTranslations(){return eh}};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}},CJe={ref:"contentContainer",class:"p-3"},OJe={key:1,class:"px-4 pb-4 space-y-2"};function NJe(t,n,a,e,s,r){return p(),L(e.BaseBubble,{class:oe(["w-full",{"bg-n-slate-4":e.isIncoming,"bg-n-solid-blue":e.isOutgoing}]),"data-bubble-name":"email"},{default:z(()=>[v(e.EmailMeta,{class:oe(["p-3",{"border-b border-n-strong":e.isIncoming,"border-b border-n-slate-8/20":e.isOutgoing}])},null,8,["class"]),f("section",CJe,[f("div",{class:oe({"max-h-[400px] overflow-hidden relative":!e.isExpanded&&e.isExpandable,"overflow-y-scroll relative":e.isExpanded})},[e.isExpandable&&!e.isExpanded?(p(),g("div",{key:0,class:oe(["absolute left-0 right-0 bottom-0 h-40 px-8 flex items-end",{"bg-gradient-to-t from-n-slate-4 via-n-slate-4 via-20% to-transparent":e.isIncoming,"bg-gradient-to-t from-n-solid-blue via-n-solid-blue via-20% to-transparent":e.isOutgoing}])},[f("button",{class:"text-n-slate-12 py-2 px-8 mx-auto text-center flex items-center gap-2",onClick:n[0]||(n[0]=o=>e.isExpanded=!0)},[v(e.Icon,{icon:"i-lucide-maximize-2"}),Oe(" "+C(t.$t("EMAIL_HEADER.EXPAND")),1)])],2)):O("v-if",!0),e.isOutgoing&&e.content&&!e.hasEmailContent?(p(),L(e.FormattedContent,{key:1,class:"text-n-slate-12",content:e.messageContent},null,8,["content"])):(p(),g(de,{key:2},[e.showQuotedMessage?(p(),L(e.Letter,{key:`letter-quoted-${e.translationKeySuffix}`,"class-name":"prose prose-bubble !max-w-none letter-render","allowed-css-properties":[...e.allowedCssProperties,"transform","transform-origin"],html:e.fullHTML,text:e.textToShow},null,8,["allowed-css-properties","html","text"])):(p(),L(e.Letter,{key:`letter-unquoted-${e.translationKeySuffix}`,"class-name":"prose prose-bubble !max-w-none letter-render",html:e.unquotedHTML,"allowed-css-properties":[...e.allowedCssProperties,"transform","transform-origin"],text:e.textToShow},null,8,["html","allowed-css-properties","text"]))],64)),e.hasQuotedMessage?(p(),g("button",{key:3,class:"text-n-slate-11 px-1 leading-none text-sm bg-n-alpha-black2 text-center flex items-center gap-1 mt-2",onClick:n[1]||(n[1]=o=>e.showQuotedMessage=!e.showQuotedMessage)},[e.showQuotedMessage?(p(),g(de,{key:0},[Oe(C(t.$t("CHAT_LIST.HIDE_QUOTED_TEXT")),1)],64)):(p(),g(de,{key:1},[Oe(C(t.$t("CHAT_LIST.SHOW_QUOTED_TEXT")),1)],64)),v(e.Icon,{icon:e.showQuotedMessage?"i-lucide-chevron-up":"i-lucide-chevron-down"},null,8,["icon"])])):O("v-if",!0)],2)],512),e.hasTranslations?(p(),L(e.TranslationToggle,{key:0,class:"py-2 px-3","showing-original":e.renderOriginal,onToggle:e.handleSeeOriginal},null,8,["showing-original"])):O("v-if",!0),Array.isArray(e.attachments)&&e.attachments.length?(p(),g("section",OJe,[v(e.AttachmentChips,{attachments:e.attachments,class:"gap-1"},null,8,["attachments"])])):O("v-if",!0)]),_:1},8,["class"])}const $b=G(IJe,[["render",NJe],["__file","/app/app/javascript/dashboard/components-next/message/bubbles/Email/Index.vue"]]),xJe={__name:"Unsupported",setup(t,{expose:n}){n();const a={BaseBubble:Lo};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}};function RJe(t,n,a,e,s,r){return p(),L(e.BaseBubble,{class:"px-4 py-3 text-sm","data-bubble-name":"unsupported"},{default:z(()=>[Oe(C(t.$t("CONVERSATION.UNSUPPORTED_MESSAGE")),1)]),_:1})}const dN=G(xJe,[["render",RJe],["__file","/app/app/javascript/dashboard/components-next/message/bubbles/Unsupported.vue"]]),wJe={__name:"Contact",setup(t,{expose:n}){n();const{attachments:a}=Jt(),e=Fe(),{t:s}=Q(),r=S(()=>a.value[0]),o=S(()=>r.value.fallbackTitle),i=S(()=>{const{meta:y}=r.value??{},{firstName:b,lastName:A}=y??{};return`${b??""} ${A??""}`.trim()}),l=S(()=>o.value.replace(/\s|-|[A-Za-z]/g,"")),c=S(()=>o.value.replace(/\D/g,""));function d(){return{name:i.value,phone_number:`+${c.value}`}}async function u(y){const A={payload:[{attribute_key:"phone_number",filter_operator:"equal_to",values:[y],attribute_model:"standard",custom_attribute_type:""}]};return(await e.dispatch("contacts/filter",{queryPayload:A,resetState:!1})).shift()}function m(y){const A=`/app/accounts/${window.location.pathname.split("/")[3]}/contacts/${y}`;window.open(A,"_blank")}async function h(){try{let y=await u(c);y||(y=await e.dispatch("contacts/create",d()),Z(s("CONTACT_FORM.SUCCESS_MESSAGE"))),m(y.id)}catch(y){y instanceof Bl?y.data.includes("phone_number")&&Z(s("CONTACT_FORM.FORM.PHONE_NUMBER.DUPLICATE")):y instanceof Xr?Z(y.data):Z(s("CONTACT_FORM.ERROR_MESSAGE"))}}const _=S(()=>({label:s("CONVERSATION.SAVE_CONTACT"),onClick:h})),E={attachments:a,$store:e,t:s,attachment:r,phoneNumber:o,contactName:i,formattedPhoneNumber:l,rawPhoneNumber:c,getContactObject:d,filterContactByNumber:u,openContactNewTab:m,addContact:h,action:_,computed:S,get useAlert(){return Z},get useStore(){return Fe},get useI18n(){return Q},get useMessageContext(){return Jt},BaseAttachmentBubble:l_,get DuplicateContactException(){return Bl},get ExceptionWithMessage(){return Xr}};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}};function MJe(t,n,a,e,s,r){return p(),L(e.BaseAttachmentBubble,{icon:"i-teenyicons-user-circle-solid","icon-bg-color":"bg-[#D6409F]","sender-translation-key":"CONVERSATION.SHARED_ATTACHMENT.CONTACT",title:e.contactName,content:e.phoneNumber,action:e.formattedPhoneNumber?e.action:null},null,8,["title","content","action"])}const uN=G(wJe,[["render",MJe],["__file","/app/app/javascript/dashboard/components-next/message/bubbles/Contact.vue"]]),LJe={__name:"Dyte",setup(t,{expose:n}){n();const{content:a,sender:e,id:s}=Jt(),{t:r}=Q(),o=P(!1),i=P(""),l=S(()=>ZT(i.value)),c=async()=>{o.value=!0;try{const{data:{token:h}={}}=await cE.addParticipantToMeeting(s.value);i.value=h}catch{Z(r("INTEGRATION_SETTINGS.DYTE.JOIN_ERROR"))}finally{o.value=!1}},d=()=>{i.value=""},u=S(()=>({label:r("INTEGRATION_SETTINGS.DYTE.CLICK_HERE_TO_JOIN"),onClick:c})),m={content:a,sender:e,id:s,t:r,isLoading:o,dyteAuthToken:i,meetingLink:l,joinTheCall:c,leaveTheRoom:d,action:u,computed:S,ref:P,get DyteAPI(){return cE},get buildDyteURL(){return ZT},get useAlert(){return Z},get useI18n(){return Q},get useMessageContext(){return Jt},BaseAttachmentBubble:l_};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}},DJe={key:0,class:"text-sm truncate text-n-slate-12"},PJe={key:1,class:"video-call--container"},kJe=["src"],BJe={key:2};function FJe(t,n,a,e,s,r){return p(),L(e.BaseAttachmentBubble,{icon:"i-ph-video-camera-fill","icon-bg-color":"bg-[#2781F6]","sender-translation-key":"CONVERSATION.SHARED_ATTACHMENT.MEETING",action:e.action},{default:z(()=>[e.sender?O("v-if",!0):(p(),g("div",DJe,[O(" Added as a fallback, where the sender is not available (Deleted) "),O(" Will show the content, if senderName in BaseAttachment.vue is empty "),Oe(" "+C(e.content),1)])),e.dyteAuthToken?(p(),g("div",PJe,[f("iframe",{src:e.meetingLink,allow:"camera;microphone;fullscreen;display-capture;picture-in-picture;clipboard-write;"},null,8,kJe),f("button",{class:"px-4 py-2 text-sm rounded-lg bg-n-solid-3 mt-3",onClick:e.leaveTheRoom},C(t.$t("INTEGRATION_SETTINGS.DYTE.LEAVE_THE_ROOM")),1)])):(p(),g("div",BJe,C("")))]),_:1},8,["action"])}const pN=G(LJe,[["render",FJe],["__file","/app/app/javascript/dashboard/components-next/message/bubbles/Dyte.vue"]]),UJe={__name:"Location",setup(t,{expose:n}){n();const{attachments:a}=Jt(),{t:e}=Q(),s=S(()=>a.value[0]),r=S(()=>s.value.coordinatesLat),o=S(()=>s.value.coordinatesLong),i=S(()=>s.value.fallbackTitle??s.value.fallback_title),l=S(()=>`https://maps.google.com/?q=${r.value},${o.value}`),c={attachments:a,t:e,attachment:s,lat:r,long:o,title:i,mapUrl:l,computed:S,BaseAttachmentBubble:l_,get useI18n(){return Q},get useMessageContext(){return Jt}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}};function $Je(t,n,a,e,s,r){return p(),L(e.BaseAttachmentBubble,{icon:"i-ph-navigation-arrow-fill","icon-bg-color":"bg-[#0D9B8A]","sender-translation-key":"CONVERSATION.SHARED_ATTACHMENT.LOCATION",content:e.title,action:{label:e.t("COMPONENTS.LOCATION_BUBBLE.SEE_ON_MAP"),href:e.mapUrl}},null,8,["content","action"])}const fN=G(UJe,[["render",$Je],["__file","/app/app/javascript/dashboard/components-next/message/bubbles/Location.vue"]]),GJe={__name:"CSAT",setup(t,{expose:n}){n();const{contentAttributes:a,content:e}=Jt(),{t:s}=Q(),r=S(()=>{var m,h;return((h=(m=a.value)==null?void 0:m.submittedValues)==null?void 0:h.csatSurveyResponse)??{}}),o=S(()=>!!r.value.rating),i=S(()=>{var m;return((m=a.value)==null?void 0:m.displayType)||Hr.EMOJI}),l=S(()=>i.value===Hr.STAR),c=S(()=>o.value?ur.find(m=>m.value===r.value.rating):null),d=S(()=>r.value.rating||0),u={contentAttributes:a,content:e,t:s,response:r,isRatingSubmitted:o,displayType:i,isStarRating:l,rating:c,starRatingValue:d,computed:S,BaseBubble:Lo,get useI18n(){return Q},get CSAT_RATINGS(){return ur},get CSAT_DISPLAY_TYPES(){return Hr},get useMessageContext(){return Jt}};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}},VJe={key:0,class:"mt-4"},HJe={class:"text-n-slate-11 italic"},jJe={key:0},WJe={key:1,class:"flex mt-1"},zJe={key:2,class:"text-n-slate-11 italic mt-2"};function YJe(t,n,a,e,s,r){return p(),L(e.BaseBubble,{class:"px-4 py-3","data-bubble-name":"csat"},{default:z(()=>[f("h4",null,C(e.content||e.t("CONVERSATION.CSAT_REPLY_MESSAGE")),1),e.isRatingSubmitted?(p(),g("dl",VJe,[f("dt",HJe,C(e.t("CONVERSATION.RATING_TITLE")),1),e.isStarRating?(p(),g("dd",WJe,[(p(),g(de,null,Ae(5,o=>f("span",{key:o,class:"text-2xl mr-1"},[f("i",{class:oe([o<=e.starRatingValue?"i-ri-star-fill text-n-amber-9":"i-ri-star-line text-n-slate-10"])},null,2)])),64))])):(p(),g("dd",jJe,C(e.t(e.rating.translationKey)),1)),e.response.feedbackMessage?(p(),g("dt",zJe,C(e.t("CONVERSATION.FEEDBACK_TITLE")),1)):O("v-if",!0),f("dd",null,C(e.response.feedbackMessage),1)])):O("v-if",!0)]),_:1})}const mN=G(GJe,[["render",YJe],["__file","/app/app/javascript/dashboard/components-next/message/bubbles/CSAT.vue"]]),KJe={__name:"Form",setup(t,{expose:n}){n();const{content:a,contentAttributes:e,contentType:s}=Jt(),{t:r}=Q(),{isAWebWidgetInbox:o}=Gi(),i=S(()=>{var c;if(s.value===eo.FORM){const{items:d,submittedValues:u=[]}=e.value;return u.length?u.map(m=>{const h=d.find(_=>_.name===m.name);return{title:m.value,value:m.value,label:h==null?void 0:h.label}}):[]}if(s.value===eo.INPUT_SELECT){const[d]=((c=e.value)==null?void 0:c.submittedValues)??[];return d?[{title:d.title,value:d.value,label:""}]:[]}return[]}),l={content:a,contentAttributes:e,contentType:s,t:r,isAWebWidgetInbox:o,formValues:i,computed:S,BaseBubble:Lo,get useI18n(){return Q},get CONTENT_TYPES(){return eo},get useMessageContext(){return Jt},get useInbox(){return Gi}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}},XJe=["title"],qJe={key:0,class:"mt-4"},ZJe={class:"text-n-slate-11 italic mt-2"},QJe={key:1,class:"my-2 font-medium"};function JJe(t,n,a,e,s,r){const o=nt("dompurify-html");return p(),L(e.BaseBubble,{class:"px-4 py-3","data-bubble-name":"csat"},{default:z(()=>[ce(f("span",{title:e.content},null,8,XJe),[[o,e.content]]),e.formValues.length?(p(),g("dl",qJe,[(p(!0),g(de,null,Ae(e.formValues,i=>(p(),g(de,{key:i.title},[f("dt",ZJe,C(i.label||e.t("CONVERSATION.RESPONSE")),1),f("dd",null,C(i.title),1)],64))),128))])):e.isAWebWidgetInbox?(p(),g("div",QJe,C(e.t("CONVERSATION.NO_RESPONSE")),1)):O("v-if",!0)]),_:1})}const hN=G(KJe,[["render",JJe],["__file","/app/app/javascript/dashboard/components-next/message/bubbles/Form.vue"]]),eet={__name:"VoiceCall",setup(t,{expose:n}){n();const{contentAttributes:a}=Jt(),e=S(()=>{var m;return(m=a.value)==null?void 0:m.data}),s=S(()=>{var m;return(m=e.value)==null?void 0:m.status}),r=S(()=>{var m;return(m=e.value)==null?void 0:m.call_direction}),{labelKey:o,subtextKey:i,bubbleIconBg:l,bubbleIconName:c}=Xm(s,r),d=S(()=>s.value==="ringing"?"ring-1 ring-emerald-300":""),u={contentAttributes:a,data:e,status:s,direction:r,labelKey:o,subtextKey:i,bubbleIconBg:l,bubbleIconName:c,containerRingClass:d,computed:S,BaseBubble:Lo,get useMessageContext(){return Jt},get useVoiceCallStatus(){return Xm}};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}},tet={class:"flex gap-3 items-center p-3 w-full"},net={class:"flex overflow-hidden flex-col flex-grow"},aet={class:"text-base font-medium truncate"},set={class:"text-xs text-slate-500"};function oet(t,n,a,e,s,r){return p(),L(e.BaseBubble,{class:"p-0 border-none","hide-meta":""},{default:z(()=>[f("div",{class:oe(["flex overflow-hidden flex-col w-full max-w-xs bg-white rounded-lg border border-slate-100 text-slate-900 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",e.containerRingClass])},[f("div",tet,[f("div",{class:oe(["flex justify-center items-center rounded-full size-10 shrink-0",e.bubbleIconBg])},[f("span",{class:oe(["text-xl",e.bubbleIconName])},null,2)],2),f("div",net,[f("span",aet,C(t.$t(e.labelKey)),1),f("span",set,C(t.$t(e.subtextKey)),1)])])],2)]),_:1})}const _N=G(eet,[["render",oet],["__file","/app/app/javascript/dashboard/components-next/message/bubbles/VoiceCall.vue"]]),ret={__name:"MessageError",props:{error:{type:String,required:!0}},emits:["retry"],setup(t,{expose:n,emit:a}){n();const e=a,{orientation:s,status:r,createdAt:o}=Jt(),{t:i}=Q(),l=S(()=>!QT(o.value)),c={emit:e,orientation:s,status:r,createdAt:o,t:i,canRetry:l,computed:S,Icon:Bt,get useI18n(){return Q},get useMessageContext(){return Jt},get hasOneDayPassed(){return QT},get ORIENTATION(){return Fa},get MESSAGE_STATUS(){return An}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}},iet={class:"text-xs text-n-ruby-11 flex items-center gap-1.5"},cet={class:"relative group"},det={class:"bg-n-alpha-2 rounded-md size-5 grid place-content-center cursor-pointer"},uet=["disabled"];function pet(t,n,a,e,s,r){return p(),g("div",iet,[f("span",null,C(e.t("CHAT_LIST.FAILED_TO_SEND")),1),f("div",cet,[f("div",det,[v(e.Icon,{icon:"i-lucide-alert-triangle",class:"text-n-ruby-11 size-[14px]"})]),f("div",{class:oe(["absolute bg-n-alpha-3 px-4 py-3 border rounded-xl border-n-strong text-n-slate-12 bottom-6 w-52 text-xs backdrop-blur-[100px] shadow-[0px_0px_24px_0px_rgba(0,0,0,0.12)] opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all break-all",{"ltr:left-0 rtl:right-0":e.orientation===e.ORIENTATION.LEFT,"ltr:right-0 rtl:left-0":e.orientation===e.ORIENTATION.RIGHT}])},C(a.error),3)]),e.canRetry?(p(),g("button",{key:0,type:"button",disabled:e.status!==e.MESSAGE_STATUS.FAILED,class:"bg-n-alpha-2 rounded-md size-5 grid place-content-center cursor-pointer",onClick:n[0]||(n[0]=o=>e.emit("retry"))},[v(e.Icon,{icon:"i-lucide-refresh-ccw",class:"text-n-ruby-11 size-[14px]"})],8,uet)):O("v-if",!0)])}const fet=G(ret,[["render",pet],["__file","/app/app/javascript/dashboard/components-next/message/MessageError.vue"]]),met={components:{AddCannedModal:lM,MenuItem:m1,ContextMenu:h1,NextButton:Se},props:{message:{type:Object,required:!0},isOpen:{type:Boolean,default:!1},enabledOptions:{type:Object,default:()=>({})},contextMenuPosition:{type:Object,default:()=>({})},hideButton:{type:Boolean,default:!1}},emits:["open","close","replyTo"],setup(){const{getPlainText:t}=ta();return{getPlainText:t}},data(){return{isCannedResponseModalOpen:!1,showDeleteModal:!1}},computed:{..._t({getAccount:"accounts/getAccount",currentAccountId:"getCurrentAccountId"}),plainTextContent(){return this.getPlainText(this.messageContent)},conversationId(){return this.message.conversation_id??this.message.conversationId},messageId(){return this.message.id},messageContent(){return this.message.content},contentAttributes(){return ha(this.message.content_attributes??this.message.contentAttributes)}},methods:{async copyLinkToMessage(){const t=window.chatwootConfig.hostURL+vt(Cu({id:this.conversationId,accountId:this.currentAccountId}));await Ra(`${t}?messageId=${this.messageId}`),Z(this.$t("CONVERSATION.CONTEXT_MENU.LINK_COPIED")),this.handleClose()},async handleCopy(){await Ra(this.plainTextContent),Z(this.$t("CONTACT_PANEL.COPY_SUCCESSFUL")),this.handleClose()},showCannedResponseModal(){Nt(Ou.ADDED_TO_CANNED_RESPONSE),this.isCannedResponseModalOpen=!0},hideCannedResponseModal(){this.isCannedResponseModalOpen=!1,this.handleClose()},handleOpen(t){this.$emit("open",t)},handleClose(t){this.$emit("close",t)},handleTranslate(){const{locale:t}=this.getAccount(this.currentAccountId);this.$store.dispatch("translateMessage",{conversationId:this.conversationId,messageId:this.messageId,targetLanguage:t||"en"}),Nt($a.TRANSLATE_A_MESSAGE),this.handleClose()},handleReplyTo(){this.$emit("replyTo",this.message),this.handleClose()},openDeleteModal(){this.handleClose(),this.showDeleteModal=!0},async confirmDeletion(){try{await this.$store.dispatch("deleteMessage",{conversationId:this.conversationId,messageId:this.messageId}),Z(this.$t("CONVERSATION.SUCCESS_DELETE_MESSAGE")),this.handleClose()}catch{Z(this.$t("CONVERSATION.FAIL_DELETE_MESSSAGE"))}},closeDeleteModal(){this.showDeleteModal=!1}}},het={class:"context-menu"},_et={class:"menu-container"},get={key:5};function bet(t,n,a,e,s,r){const o=H("AddCannedModal"),i=H("woot-modal"),l=H("woot-delete-modal"),c=H("NextButton"),d=H("MenuItem"),u=H("ContextMenu");return p(),g("div",het,[O(" Add To Canned Responses "),s.isCannedResponseModalOpen&&a.enabledOptions.cannedResponse?(p(),L(i,{key:0,show:s.isCannedResponseModalOpen,"onUpdate:show":n[0]||(n[0]=m=>s.isCannedResponseModalOpen=m),"on-close":r.hideCannedResponseModal},{default:z(()=>[v(o,{"response-content":r.plainTextContent,"on-close":r.hideCannedResponseModal},null,8,["response-content","on-close"])]),_:1},8,["show","on-close"])):O("v-if",!0),O(" Confirm Deletion "),s.showDeleteModal&&a.enabledOptions.delete?(p(),L(l,{key:1,show:s.showDeleteModal,"onUpdate:show":n[1]||(n[1]=m=>s.showDeleteModal=m),class:"context-menu--delete-modal","on-close":r.closeDeleteModal,"on-confirm":r.confirmDeletion,title:t.$t("CONVERSATION.CONTEXT_MENU.DELETE_CONFIRMATION.TITLE"),message:t.$t("CONVERSATION.CONTEXT_MENU.DELETE_CONFIRMATION.MESSAGE"),"confirm-text":t.$t("CONVERSATION.CONTEXT_MENU.DELETE_CONFIRMATION.DELETE"),"reject-text":t.$t("CONVERSATION.CONTEXT_MENU.DELETE_CONFIRMATION.CANCEL")},null,8,["show","on-close","on-confirm","title","message","confirm-text","reject-text"])):O("v-if",!0),a.hideButton?O("v-if",!0):(p(),L(c,{key:2,ghost:"",slate:"",sm:"",icon:"i-lucide-ellipsis-vertical",class:"invisible group-hover/context-menu:visible",onClick:r.handleOpen},null,8,["onClick"])),a.isOpen&&!s.isCannedResponseModalOpen?(p(),L(u,{key:3,x:a.contextMenuPosition.x,y:a.contextMenuPosition.y,onClose:r.handleClose},{default:z(()=>[f("div",_et,[a.enabledOptions.replyTo?(p(),L(d,{key:0,option:{icon:"arrow-reply",label:t.$t("CONVERSATION.CONTEXT_MENU.REPLY_TO")},variant:"icon",onClick:Ve(r.handleReplyTo,["stop"])},null,8,["option","onClick"])):O("v-if",!0),a.enabledOptions.copy?(p(),L(d,{key:1,option:{icon:"clipboard",label:t.$t("CONVERSATION.CONTEXT_MENU.COPY")},variant:"icon",onClick:Ve(r.handleCopy,["stop"])},null,8,["option","onClick"])):O("v-if",!0),a.enabledOptions.translate?(p(),L(d,{key:2,option:{icon:"translate",label:t.$t("CONVERSATION.CONTEXT_MENU.TRANSLATE")},variant:"icon",onClick:Ve(r.handleTranslate,["stop"])},null,8,["option","onClick"])):O("v-if",!0),n[2]||(n[2]=f("hr",null,null,-1)),a.enabledOptions.copyLink?(p(),L(d,{key:3,option:{icon:"link",label:t.$t("CONVERSATION.CONTEXT_MENU.COPY_PERMALINK")},variant:"icon",onClick:Ve(r.copyLinkToMessage,["stop"])},null,8,["option","onClick"])):O("v-if",!0),a.enabledOptions.cannedResponse?(p(),L(d,{key:4,option:{icon:"comment-add",label:t.$t("CONVERSATION.CONTEXT_MENU.CREATE_A_CANNED_RESPONSE")},variant:"icon",onClick:Ve(r.showCannedResponseModal,["stop"])},null,8,["option","onClick"])):O("v-if",!0),a.enabledOptions.delete?(p(),g("hr",get)):O("v-if",!0),a.enabledOptions.delete?(p(),L(d,{key:6,option:{icon:"delete",label:t.$t("CONVERSATION.CONTEXT_MENU.DELETE")},variant:"icon",onClick:Ve(r.openDeleteModal,["stop"])},null,8,["option","onClick"])):O("v-if",!0)])]),_:1},8,["x","y","onClose"])):O("v-if",!0)])}const vet=G(met,[["render",bet],["__scopeId","data-v-961f158d"],["__file","/app/app/javascript/dashboard/modules/conversations/components/MessageContextMenu.vue"]]),Eet={__name:"Message",props:{id:{type:Number,required:!0},messageType:{type:Number,required:!0,validator:t=>Object.values(Xn).includes(t)},status:{type:String,required:!0,validator:t=>Object.values(An).includes(t)},attachments:{type:Array,default:()=>[]},content:{type:String,default:null},contentAttributes:{type:Object,default:()=>({})},contentType:{type:String,default:"text",validator:t=>Object.values(eo).includes(t)},conversationId:{type:Number,required:!0},createdAt:{type:Number,required:!0},currentUserId:{type:Number,required:!0},groupWithNext:{type:Boolean,default:!1},inboxId:{type:Number,default:null},inboxSupportsReplyTo:{type:Object,default:()=>({})},inReplyTo:{type:Object,default:null},isEmailInbox:{type:Boolean,default:!1},private:{type:Boolean,default:!1},sender:{type:Object,default:null},senderId:{type:Number,default:null},senderType:{type:String,default:null},sourceId:{type:String,default:""}},emits:["retry"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=P({}),o=P(!1),i=P(!1),{t:l}=Q(),c=lt(),d=S(()=>{var U;return e.private?zn.PRIVATE:e.isEmailInbox&&[Xn.INCOMING,Xn.OUTGOING].includes(e.messageType)||e.contentType===eo.INCOMING_EMAIL?zn.EMAIL:e.status===An.FAILED?zn.ERROR:(U=e.contentAttributes)!=null&&U.isUnsupported?zn.UNSUPPORTED:(!e.sender||e.sender.type===gl.AGENT_BOT)&&e.messageType===Xn.OUTGOING?zn.BOT:{[Xn.INCOMING]:zn.USER,[Xn.ACTIVITY]:zn.ACTIVITY,[Xn.OUTGOING]:zn.AGENT,[Xn.TEMPLATE]:zn.TEMPLATE}[e.messageType]||zn.USER}),u=S(()=>{var U,J;if(e.messageType===Xn.ACTIVITY)return!1;if(e.status===An.PROGRESS&&e.messageType===Xn.OUTGOING)return!0;const Y=e.senderId??((U=e.sender)==null?void 0:U.id),j=((J=e.sender)==null?void 0:J.type)??e.senderType;return!j||!Y||[gl.AGENT_BOT,gl.CAPTAIN_ASSISTANT].includes(j)?!0:j.toLowerCase()===gl.USER.toLowerCase()}),m=S(()=>u.value?Fa.RIGHT:e.messageType===Xn.ACTIVITY?Fa.CENTER:Fa.LEFT),h=S(()=>({[Fa.LEFT]:"justify-start",[Fa.RIGHT]:"justify-end",[Fa.CENTER]:"justify-center"})[m.value]),_=S(()=>({[Fa.LEFT]:"grid grid-cols-1fr",[Fa.RIGHT]:"grid grid-cols-[1fr_24px]"})[m.value]),E=S(()=>({[Fa.LEFT]:`
      "bubble"
      "meta"
    `,[Fa.RIGHT]:`
      "bubble avatar"
      "meta spacer"
    `})[m.value]),y=S(()=>e.status===An.FAILED?!1:e.groupWithNext),b=S(()=>!(e.messageType===Xn.ACTIVITY||m.value===Fa.LEFT)),A=S(()=>{var Y;if(e.isEmailInbox&&!e.private&&[Xn.INCOMING,Xn.OUTGOING].includes(e.messageType))return $b;if(e.contentType===eo.INPUT_CSAT)return mN;if([eo.INPUT_SELECT,eo.FORM].includes(e.contentType))return hN;if(e.contentType===eo.VOICE_CALL)return _N;if(e.contentType===eo.INCOMING_EMAIL)return $b;if((Y=e.contentAttributes)!=null&&Y.isUnsupported)return dN;if(e.contentAttributes.type==="dyte")return pN;if(e.contentAttributes.imageType==="story_mention")return oN;if(Array.isArray(e.attachments)&&e.attachments.length===1){const j=e.attachments[0].fileType;if(!e.content){if(j===Ea.IMAGE)return nN;if(j===Ea.FILE)return aN;if(j===Ea.AUDIO)return sN;if(j===Ea.VIDEO||j===Ea.IG_REEL)return Fb;if(j===Ea.LOCATION)return fN}if(j===Ea.CONTACT)return uN}return tN}),T=S(()=>{var Y;return!((Y=e.contentAttributes)!=null&&Y.isUnsupported)}),I=S(()=>e.messageType!==Xn.ACTIVITY),N=S(()=>{var Y;return(Y=e.contentAttributes)==null?void 0:Y.deleted}),x=S(()=>({id:e.id,content_attributes:e.contentAttributes,content:e.content,conversation_id:e.conversationId})),R=S(()=>{const Y=!!e.content,j=!!(e.attachments&&e.attachments.length>0),U=e.messageType===Xn.OUTGOING,J=e.status===An.FAILED||e.status===An.PROGRESS;return{copy:Y,delete:(Y||j)&&!J&&!N.value,cannedResponse:U&&Y&&!N.value,copyLink:!J,translate:!J&&!N.value&&Y,replyTo:!e.private&&e.inboxSupportsReplyTo.outgoing&&!J}}),M=S(()=>{var te;const Y=!!(e.attachments&&e.attachments.length>0),j=e.contentType===eo.INCOMING_EMAIL,U=(te=e.contentAttributes)==null?void 0:te.isUnsupported,J=e.contentType===eo.INTEGRATIONS;return Y||e.content||j||U||J});function w(Y){var U,J;(U=Y.target)!=null&&U.classList.contains("skip-context-menu")||["a","img"].includes((J=Y.target)==null?void 0:J.tagName.toLowerCase())||getSelection().toString()||(Y.preventDefault(),Y.type==="contextmenu"&&Nt(Ou.OPEN_MESSAGE_CONTEXT_MENU),r.value={x:Y.pageX||Y.clientX,y:Y.pageY||Y.clientY},i.value=!0)}function D(){i.value=!1,r.value={x:null,y:null}}function B(){const Y=xo.MESSAGE_REPLY_TO,{conversationId:j,id:U}=e;ro.updateJsonStore(Y,j,U),Mt.emit(cn.TOGGLE_REPLY_TO_MESSAGE,e)}const k=S(()=>{if(!e.sender)return{name:l("CONVERSATION.BOT"),src:""};const{sender:Y}=e,{name:j,type:U,avatarUrl:J,thumbnail:te}=Y||{};return[gl.AGENT_BOT,gl.CAPTAIN_ASSISTANT].includes(U)?{name:j??"",src:J??""}:{name:j??"",src:te??""}}),V=S(()=>k.value.name===""?"":`${l("CONVERSATION.SENT_BY")} ${k.value.name}`),F=()=>{if(Number(c.query.messageId)!==Number(e.id))return;o.value=!0,MT(()=>{o.value=!1},1e3)};Pe(F),JO({...H1(e),isPrivate:S(()=>e.private),variant:d,orientation:m,isBotOrAgentMessage:u,shouldGroupWithNext:y});const $={props:e,emit:s,contextMenuPosition:r,showBackgroundHighlight:o,showContextMenu:i,t:l,route:c,variant:d,isBotOrAgentMessage:u,orientation:m,flexOrientationClass:h,gridClass:_,gridTemplate:E,shouldGroupWithNext:y,shouldShowAvatar:b,componentToRender:A,shouldShowContextMenu:T,isBubble:I,isMessageDeleted:N,payloadForContextMenu:x,contextMenuEnabledOptions:R,shouldRenderMessage:M,openContextMenu:w,closeContextMenu:D,handleReplyTo:B,avatarInfo:k,avatarTooltip:V,setupHighlightTimer:F,onMounted:Pe,computed:S,ref:P,toRefs:H1,get useTimeoutFn(){return MT},get provideMessageContext(){return JO},get useTrack(){return Nt},get emitter(){return Mt},get useI18n(){return Q},get useRoute(){return lt},get LocalStorage(){return ro},get ACCOUNT_EVENTS(){return Ou},get LOCAL_STORAGE_KEYS(){return xo},get BUS_EVENTS(){return cn},get MESSAGE_TYPES(){return Xn},get ATTACHMENT_TYPES(){return Ea},get MESSAGE_VARIANTS(){return zn},get SENDER_TYPES(){return gl},get ORIENTATION(){return Fa},get MESSAGE_STATUS(){return An},get CONTENT_TYPES(){return eo},Avatar:qt,TextBubble:tN,ActivityBubble:yQe,ImageBubble:nN,FileBubble:aN,AudioBubble:sN,VideoBubble:Fb,InstagramStoryBubble:oN,EmailBubble:$b,UnsupportedBubble:dN,ContactBubble:uN,DyteBubble:pN,LocationBubble:fN,CSATBubble:mN,FormBubble:hN,VoiceCallBubble:_N,MessageError:fet,ContextMenu:vet};return Object.defineProperty($,"__isScriptSetup",{enumerable:!1,value:!0}),$}},Tet=["id","data-message-id"],Aet={key:0},yet={key:0,class:"[grid-area:avatar] flex items-end"},Iet={key:2,class:"context-menu-wrap"};function Cet(t,n,a,e,s,r){const o=nt("tooltip");return e.shouldRenderMessage?(p(),g("div",{key:0,id:`message${e.props.id}`,class:oe(["flex w-full message-bubble-container mb-2",[e.flexOrientationClass,{"group-with-next":e.shouldGroupWithNext,"bg-n-alpha-1":e.showBackgroundHighlight}]]),"data-message-id":e.props.id},[e.variant===e.MESSAGE_VARIANTS.ACTIVITY?(p(),g("div",Aet,[v(e.ActivityBubble,{content:a.content},null,8,["content"])])):(p(),g("div",{key:1,class:oe([[e.gridClass,{"gap-y-2":a.contentAttributes.externalError,"w-full":e.variant===e.MESSAGE_VARIANTS.EMAIL}],"gap-x-2"]),style:nn({gridTemplateAreas:e.gridTemplate})},[!e.shouldGroupWithNext&&e.shouldShowAvatar?ce((p(),g("div",yet,[v(e.Avatar,Ta(e.avatarInfo,{size:24}),null,16)])),[[o,e.avatarTooltip,void 0,{"left-end":!0}]]):O("v-if",!0),f("div",{class:oe(["[grid-area:bubble] flex",{"ltr:ml-8 rtl:mr-8 justify-end":e.orientation===e.ORIENTATION.RIGHT,"ltr:mr-8 rtl:ml-8":e.orientation===e.ORIENTATION.LEFT,"min-w-0":e.variant===e.MESSAGE_VARIANTS.EMAIL}]),onContextmenu:n[0]||(n[0]=i=>e.openContextMenu(i))},[(p(),L(Da(e.componentToRender)))],34),a.contentAttributes.externalError?(p(),L(e.MessageError,{key:1,class:oe(["[grid-area:meta]",e.flexOrientationClass]),error:a.contentAttributes.externalError,onRetry:n[1]||(n[1]=i=>e.emit("retry"))},null,8,["class","error"])):O("v-if",!0)],6)),e.shouldShowContextMenu?(p(),g("div",Iet,[e.isBubble?(p(),L(e.ContextMenu,{key:0,"context-menu-position":e.contextMenuPosition,"is-open":e.showContextMenu,"enabled-options":e.contextMenuEnabledOptions,message:e.payloadForContextMenu,"hide-button":"",onOpen:e.openContextMenu,onClose:e.closeContextMenu,onReplyTo:e.handleReplyTo},null,8,["context-menu-position","is-open","enabled-options","message"])):O("v-if",!0)])):O("v-if",!0)],10,Tet)):O("v-if",!0)}const Oet=G(Eet,[["render",Cet],["__file","/app/app/javascript/dashboard/components-next/message/Message.vue"]]),Net={__name:"MessageList",props:{currentUserId:{type:Number,required:!0},firstUnreadId:{type:Number,default:null},isAnEmailChannel:{type:Boolean,default:!1},inboxSupportsReplyTo:{type:Object,default:()=>({incoming:!1,outgoing:!1})},messages:{type:Array,default:()=>[]}},emits:["retry"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=S(()=>Os(e.messages,{deep:!0})),o=le("getSelectedChat"),i=Lt(new Map),l=async(m,h)=>{var _;if(i.has(m))return i.get(m);try{const b=(((_=(await LT.getPreviousMessages({conversationId:h,before:m+100,after:m-100})).data)==null?void 0:_.payload)||[]).find(A=>A.id===m);if(b){const A=Os(b);return i.set(m,A),A}return i.set(m,null),null}catch{return i.set(m,null),null}},u={props:e,emit:s,allMessages:r,currentChat:o,fetchedReplyMessages:i,fetchReplyMessage:l,shouldGroupWithNext:(m,h)=>{var x,R;if(m===h.length-1)return!1;const _=h[m],E=h[m+1];if(E.status==="failed")return!1;const y=E.senderId??((x=E.sender)==null?void 0:x.id),b=_.senderId??((R=_.sender)==null?void 0:R.id),A=y===b,T=E.messageType,I=_.messageType,N=T===Xn.TEMPLATE&&I===Xn.TEMPLATE;return!A||N||I!==T?!1:Math.floor(E.createdAt/60)===Math.floor(_.createdAt/60)},getInReplyToMessage:m=>{var E,y,b,A,T;if(!m)return null;const h=((E=m.contentAttributes)==null?void 0:E.inReplyTo)??((y=m.content_attributes)==null?void 0:y.in_reply_to);if(!h)return null;let _=(b=e.messages)==null?void 0:b.find(I=>I.id===h);return!_&&((A=o.value)!=null&&A.messages)&&(_=o.value.messages.find(I=>I.id===h)),!_&&i.has(h)&&(_=i.get(h)),!_&&((T=o.value)!=null&&T.id)?(l(h,o.value.id),null):_?Os(_):null},computed:S,reactive:Lt,Message:Oet,get MESSAGE_TYPES(){return Xn},get useCamelCase(){return Os},get useMapGetter(){return le},get MessageApi(){return LT}};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}},xet={class:"px-4 bg-n-background"};function Ret(t,n,a,e,s,r){return p(),g("ul",xet,[qe(t.$slots,"beforeAll"),(p(!0),g(de,null,Ae(e.allMessages,(o,i)=>(p(),g(de,{key:o.id},[a.firstUnreadId&&o.id===a.firstUnreadId?qe(t.$slots,"unreadBadge",{key:0}):O("v-if",!0),v(e.Message,Ta({ref_for:!0},o,{"is-email-inbox":a.isAnEmailChannel,"in-reply-to":e.getInReplyToMessage(o),"group-with-next":e.shouldGroupWithNext(i,e.allMessages),"inbox-supports-reply-to":a.inboxSupportsReplyTo,"current-user-id":a.currentUserId,"data-clarity-mask":"True",onRetry:l=>e.emit("retry",o)}),null,16,["is-email-inbox","in-reply-to","group-with-next","inbox-supports-reply-to","current-user-id","onRetry"])],64))),128)),qe(t.$slots,"after")])}const wet=G(Net,[["render",Ret],["__file","/app/app/javascript/dashboard/components-next/message/MessageList.vue"]]),Met={name:"LabelSuggestion",components:{Avatar:qt,NextButton:Se},props:{suggestedLabels:{type:Array,required:!0},chatLabels:{type:Array,required:!1,default:()=>[]}},setup(){const{isAIIntegrationEnabled:t}=fp();return{isAIIntegrationEnabled:t}},data(){return{isDismissed:!1,isHovered:!1,selectedLabels:[]}},computed:{..._t({allLabels:"labels/getLabels",currentAccountId:"getCurrentAccountId",currentChat:"getSelectedChat"}),conversationId(){var t;return(t=this.currentChat)==null?void 0:t.id},labelTooltip(){return this.preparedLabels.length>1?this.$t("LABEL_MGMT.SUGGESTIONS.TOOLTIP.MULTIPLE_SUGGESTION"):this.$t("LABEL_MGMT.SUGGESTIONS.TOOLTIP.SINGLE_SUGGESTION")},addButtonText(){return this.selectedLabels.length===1?this.$t("LABEL_MGMT.SUGGESTIONS.ADD_SELECTED_LABEL"):this.selectedLabels.length>1?this.$t("LABEL_MGMT.SUGGESTIONS.ADD_SELECTED_LABELS"):this.$t("LABEL_MGMT.SUGGESTIONS.ADD_ALL_LABELS")},preparedLabels(){return this.allLabels.filter(t=>this.suggestedLabels.includes(t.title))},shouldShowSuggestions(){return this.isDismissed||!this.isAIIntegrationEnabled?!1:this.preparedLabels.length&&this.chatLabels.length===0}},watch:{conversationId:{immediate:!0,handler(){this.selectedLabels=[],this.isDismissed=this.isConversationDismissed()}}},methods:{pushOrAddLabel(t){if(this.preparedLabels.length===1){this.addAllLabels();return}this.selectedLabels.includes(t)?this.selectedLabels=this.selectedLabels.filter(n=>n!==t):this.selectedLabels.push(t)},dismissSuggestions(){ro.setFlag(xo.DISMISSED_LABEL_SUGGESTIONS,this.currentAccountId,this.conversationId),this.isDismissed=!0,this.trackLabelEvent(Xf.DISMISS_LABEL_SUGGESTION)},isConversationDismissed(){return ro.getFlag(xo.DISMISSED_LABEL_SUGGESTIONS,this.currentAccountId,this.conversationId)},addAllLabels(){let t=this.selectedLabels;t.length||(t=this.preparedLabels.map(n=>n.title)),this.$store.dispatch("conversationLabels/update",{conversationId:this.conversationId,labels:t}),this.trackLabelEvent(Xf.APPLY_LABEL_SUGGESTION)},trackLabelEvent(t){const n={conversationId:this.conversationId,account:this.currentAccountId,suggestions:this.suggestedLabels,labelsApplied:this.selectedLabels.length?this.selectedLabels:this.suggestedLabels};Nt(t,n)}}},Let={class:"wrap"},Det={class:"label-suggestion--container"},Pet={class:"label-suggestion--title"},ket={class:"label-suggestion--options"},Bet=["onClick"],Fet={key:0,class:"inline-flex items-center gap-1"},Uet={class:"sender--info has-tooltip","data-original-title":"null"};function $et(t,n,a,e,s,r){const o=H("woot-label"),i=H("NextButton"),l=H("Avatar"),c=nt("tooltip");return r.shouldShowSuggestions?(p(),g("li",{key:0,class:"label-suggestion right list-none",onMouseover:n[0]||(n[0]=d=>s.isHovered=!0),onMouseleave:n[1]||(n[1]=d=>s.isHovered=!1)},[f("div",Let,[f("div",Det,[f("h6",Pet,C(t.$t("LABEL_MGMT.SUGGESTIONS.SUGGESTED_LABELS")),1),f("div",ket,[(p(!0),g(de,null,Ae(r.preparedLabels,d=>ce((p(),g("button",{key:d.title,class:"label-suggestion--option !px-0",onClick:u=>r.pushOrAddLabel(d.title)},[v(o,Ta({variant:"dashed",ref_for:!0},d,{"bg-color":s.selectedLabels.includes(d.title)?"#2781F6":""}),null,16,["bg-color"])],8,Bet)),[[c,{content:s.selectedLabels.includes(d.title)?t.$t("LABEL_MGMT.SUGGESTIONS.TOOLTIP.DESELECT"):r.labelTooltip,delay:{show:600,hide:0},hideOnClick:!0},void 0,{top:!0}]])),128)),r.preparedLabels.length===1?ce((p(),L(i,{key:0,faded:"",xs:"",icon:"i-lucide-x",class:"flex-shrink-0",color:s.isHovered?"ruby":"blue",onClick:r.dismissSuggestions},null,8,["color","onClick"])),[[c,{content:t.$t("LABEL_MGMT.SUGGESTIONS.TOOLTIP.DISMISS"),delay:{show:600,hide:0},hideOnClick:!0},void 0,{top:!0}]]):O("v-if",!0)]),r.preparedLabels.length>1?(p(),g("div",Fet,[v(i,{xs:"",icon:"i-lucide-plus",class:"flex-shrink-0",variant:s.selectedLabels.length===0?"faded":"solid",label:r.addButtonText,onClick:r.addAllLabels},null,8,["variant","label","onClick"]),ce(v(i,{faded:"",xs:"",icon:"i-lucide-x",class:"flex-shrink-0",color:s.isHovered?"ruby":"blue",onClick:r.dismissSuggestions},null,8,["color","onClick"]),[[c,{content:t.$t("LABEL_MGMT.SUGGESTIONS.TOOLTIP.DISMISS"),delay:{show:600,hide:0},hideOnClick:!0},void 0,{top:!0}]])])):O("v-if",!0)]),f("div",Uet,[ce(v(l,{size:16,name:"chatwoot-ai","icon-name":"i-lucide-sparkles"},null,512),[[c,{content:t.$t("LABEL_MGMT.SUGGESTIONS.POWERED_BY"),delay:{show:600,hide:0},hideOnClick:!0},void 0,{top:!0}]])])])],32)):O("v-if",!0)}const Get=G(Met,[["render",$et],["__scopeId","data-v-dc778cf1"],["__file","/app/app/javascript/dashboard/components/widgets/conversation/conversation/LabelSuggestion.vue"]]),Vet=(t,n)=>t+n.scrollHeight,Het=(t,n,a)=>{let e=[...a].reduce(Vet,0);return t-e-n/2},Gb={FACEBOOK:"https://developers.facebook.com/docs/messenger-platform/policy/policy-overview/",TWILIO_WHATSAPP:"https://www.twilio.com/docs/whatsapp/tutorial/send-whatsapp-notification-messages-templates#sending-non-template-messages-within-a-24-hour-session",WHATSAPP_CLOUD:"https://business.whatsapp.com/policy#:~:text=You%20may%20reply%20to%20a,messages%20via%20approved%20Message%20Templates."},jet="https://hub.2.chatwoot.com/changelogs",Wet={components:{MessageList:wet,ReplyBox:aZe,Banner:qu,ConversationLabelSuggestion:Get,Spinner:$n},mixins:[Ad],setup(){const t=P(!1),n=P(null),{isEnterprise:a}=io();jn({Escape:{action:()=>{t.value=!1}}});const{isAIIntegrationEnabled:s,isLabelSuggestionFeatureEnabled:r,fetchIntegrationsIfRequired:o,fetchLabelSuggestions:i}=fp();return qn("contextMenuElementTarget",n),{isEnterprise:a,isPopOutReplyBox:t,isAIIntegrationEnabled:s,isLabelSuggestionFeatureEnabled:r,fetchIntegrationsIfRequired:o,fetchLabelSuggestions:i,conversationPanelRef:n}},data(){return{isLoadingPrevious:!0,heightBeforeLoad:null,conversationPanel:null,hasUserScrolled:!1,isProgrammaticScroll:!1,messageSentSinceOpened:!1,labelSuggestions:[]}},computed:{..._t({currentChat:"getSelectedChat",currentUserId:"getCurrentUserID",listLoadingStatus:"getAllMessagesLoaded",currentAccountId:"getCurrentAccountId"}),isOpen(){var t;return((t=this.currentChat)==null?void 0:t.status)===gt.STATUS_TYPE.OPEN},shouldShowLabelSuggestions(){return this.isOpen&&this.isEnterprise&&this.isAIIntegrationEnabled&&!this.messageSentSinceOpened},inboxId(){return this.currentChat.inbox_id},inbox(){return this.$store.getters["inboxes/getInbox"](this.inboxId)},typingUsersList(){return this.$store.getters["conversationTypingStatus/getUserList"](this.currentChat.id)},isAnyoneTyping(){return this.typingUsersList.length!==0},typingUserNames(){const t=this.typingUsersList;if(this.isAnyoneTyping){const[n,a]=I4(t);return this.$t(n,a)}return""},getMessages(){const t=this.currentChat.messages||[];return this.isAWhatsAppChannel?Q$e(t):t},readMessages(){return J$e(this.getMessages,this.currentChat.agent_last_seen_at)},unReadMessages(){return e7e(this.getMessages,this.currentChat.agent_last_seen_at)},shouldShowSpinner(){return this.currentChat&&this.currentChat.dataFetched===void 0||!this.listLoadingStatus&&this.isLoadingPrevious},hasDuplicateInstagramInbox(){const t=this.inbox.instagram_id,{additional_attributes:n={}}=this.inbox,a=this.$store.getters["inboxes/getInstagramInboxByInstagramId"](t);return this.inbox.channel_type===ht.FB&&n.type==="instagram_direct_message"&&a},replyWindowBannerMessage(){if(this.isAWhatsAppChannel)return this.$t("CONVERSATION.TWILIO_WHATSAPP_CAN_REPLY");if(this.isAPIInbox){const{additional_attributes:t={}}=this.inbox;if(t){const{agent_reply_time_window_message:n,agent_reply_time_window:a}=t;return n||this.$t("CONVERSATION.API_HOURS_WINDOW",{hours:a})}return""}return this.$t("CONVERSATION.CANNOT_REPLY")},replyWindowLink(){return this.isAFacebookInbox||this.isAnInstagramChannel?Gb.FACEBOOK:this.isAWhatsAppCloudChannel?Gb.WHATSAPP_CLOUD:this.isAPIInbox?"":Gb.TWILIO_WHATSAPP},replyWindowLinkText(){return this.isAWhatsAppChannel||this.isAFacebookInbox||this.isAnInstagramChannel?this.$t("CONVERSATION.24_HOURS_WINDOW"):this.isAPIInbox?"":this.$t("CONVERSATION.TWILIO_WHATSAPP_24_HOURS_WINDOW")},unreadMessageCount(){return this.currentChat.unread_count||0},unreadMessageLabel(){const t=this.unreadMessageCount>9?"9+":this.unreadMessageCount,n=this.unreadMessageCount>1?"CONVERSATION.UNREAD_MESSAGES":"CONVERSATION.UNREAD_MESSAGE";return`${t} ${this.$t(n)}`},inboxSupportsReplyTo(){const t=this.inboxHasFeature(ju.REPLY_TO),n=this.inboxHasFeature(ju.REPLY_TO_OUTGOING)&&!this.is360DialogWhatsAppChannel;return{incoming:t,outgoing:n}}},watch:{currentChat(t,n){t.id!==n.id&&(this.fetchAllAttachmentsFromCurrentChat(),this.fetchSuggestions(),this.messageSentSinceOpened=!1)}},created(){Mt.on(cn.SCROLL_TO_MESSAGE,this.onScrollToMessage),Mt.on(cn.FETCH_LABEL_SUGGESTIONS,this.fetchSuggestions),Mt.on(cn.MESSAGE_SENT,()=>{this.messageSentSinceOpened=!0})},mounted(){this.addScrollListener(),this.fetchAllAttachmentsFromCurrentChat(),this.fetchSuggestions()},unmounted(){this.removeBusListeners(),this.removeScrollListener()},methods:{async fetchSuggestions(){this.labelSuggestions=[],!this.isLabelSuggestionDismissed()&&this.isEnterprise&&(await this.fetchIntegrationsIfRequired(),this.isLabelSuggestionFeatureEnabled&&(this.labelSuggestions=await this.fetchLabelSuggestions({conversationId:this.currentChat.id}),this.$nextTick(()=>{const{messageId:t}=this.$route.query;!t&&!this.hasUserScrolled&&this.scrollToBottom()})))},isLabelSuggestionDismissed(){return ro.getFlag(xo.DISMISSED_LABEL_SUGGESTIONS,this.currentAccountId,this.currentChat.id)},fetchAllAttachmentsFromCurrentChat(){this.$store.dispatch("fetchAllAttachments",this.currentChat.id)},removeBusListeners(){Mt.off(cn.SCROLL_TO_MESSAGE,this.onScrollToMessage)},onScrollToMessage({messageId:t=""}={}){this.$nextTick(()=>{const n=document.getElementById("message"+t);n?(this.isProgrammaticScroll=!0,n.scrollIntoView({behavior:"smooth"}),this.fetchPreviousMessages()):this.scrollToBottom()}),this.makeMessagesRead()},addScrollListener(){this.conversationPanel=this.$el.querySelector(".conversation-panel"),this.setScrollParams(),this.conversationPanel.addEventListener("scroll",this.handleScroll),this.$nextTick(()=>this.scrollToBottom()),this.isLoadingPrevious=!1},removeScrollListener(){this.conversationPanel.removeEventListener("scroll",this.handleScroll)},scrollToBottom(){this.isProgrammaticScroll=!0;let t=[],n=this.conversationPanel.querySelector(".label-suggestion");this.unreadMessageCount>0?t=this.conversationPanel.querySelectorAll(".message--unread"):n?t=[n]:t=Array.from(this.conversationPanel.querySelectorAll(".message--read")).slice(-1),this.conversationPanel.scrollTop=Het(this.conversationPanel.scrollHeight,this.$el.scrollHeight,t)},setScrollParams(){this.heightBeforeLoad=this.conversationPanel.scrollHeight,this.scrollTopBeforeLoad=this.conversationPanel.scrollTop},async fetchPreviousMessages(t=0){this.setScrollParams();const n=this.currentChat.dataFetched===!0&&!this.listLoadingStatus&&!this.isLoadingPrevious;if(t<100&&!this.isLoadingPrevious&&n){this.isLoadingPrevious=!0;try{await this.$store.dispatch("fetchPreviousMessages",{conversationId:this.currentChat.id,before:this.currentChat.messages[0].id});const a=this.conversationPanel.scrollHeight-this.heightBeforeLoad;this.conversationPanel.scrollTop=this.scrollTopBeforeLoad+a,this.setScrollParams()}catch{}finally{this.isLoadingPrevious=!1}}},handleScroll(t){this.isProgrammaticScroll?(this.isProgrammaticScroll=!1,this.hasUserScrolled=!1):this.hasUserScrolled=!0,Mt.emit(cn.ON_MESSAGE_LIST_SCROLL),this.fetchPreviousMessages(t.target.scrollTop)},makeMessagesRead(){this.$store.dispatch("markMessagesRead",{id:this.currentChat.id})},async handleMessageRetry(t){if(!t)return;const n=ha(t);await this.$store.dispatch("sendMessageWithData",n)}}},zet={class:"flex flex-col justify-between flex-grow h-full min-w-0 m-0"},Yet={class:"min-h-[4rem] flex flex-shrink-0 flex-grow-0 items-center flex-auto justify-center max-w-full mt-0 mr-0 mb-1 ml-0 relative first:mt-auto last:mb-0"},Ket={class:"list-none flex justify-center items-center"},Xet={class:"shadow-lg rounded-full bg-n-brand text-white text-xs font-medium my-2.5 mx-auto px-2.5 py-1.5"},qet={key:0,class:"absolute flex items-center w-full h-0 -top-7"},Zet={class:"flex py-2 pr-4 pl-5 shadow-md rounded-full bg-white dark:bg-n-solid-3 text-n-slate-11 text-xs font-semibold my-2.5 mx-auto"};function Qet(t,n,a,e,s,r){var u;const o=H("Banner"),i=H("Spinner"),l=H("ConversationLabelSuggestion"),c=H("MessageList"),d=H("ReplyBox");return p(),g("div",zet,[t.currentChat.can_reply?r.hasDuplicateInstagramInbox?(p(),L(o,{key:1,"color-scheme":"alert",class:"mx-2 mt-2 overflow-hidden rounded-lg","banner-message":t.$t("CONVERSATION.OLD_INSTAGRAM_INBOX_REPLY_BANNER")},null,8,["banner-message"])):O("v-if",!0):(p(),L(o,{key:0,"color-scheme":"alert",class:"mx-2 mt-2 overflow-hidden rounded-lg","banner-message":r.replyWindowBannerMessage,"href-link":r.replyWindowLink,"href-link-text":r.replyWindowLinkText},null,8,["banner-message","href-link","href-link-text"])),v(c,{ref:"conversationPanelRef",class:"conversation-panel flex-shrink flex-grow basis-px flex flex-col overflow-y-auto relative h-full m-0 pb-4","current-user-id":t.currentUserId,"first-unread-id":(u=r.unReadMessages[0])==null?void 0:u.id,"is-an-email-channel":t.isAnEmailChannel,"inbox-supports-reply-to":r.inboxSupportsReplyTo,messages:r.getMessages,onRetry:r.handleMessageRetry},{beforeAll:z(()=>[v(Qa,{name:"slide-up"},{default:z(()=>[f("li",Yet,[r.shouldShowSpinner?(p(),L(i,{key:0,class:"text-n-brand"})):O("v-if",!0)])]),_:1})]),unreadBadge:z(()=>[ce(f("li",Ket,[f("span",Xet,C(r.unreadMessageLabel),1)],512),[[En,r.unreadMessageCount!=0]])]),after:z(()=>[r.shouldShowLabelSuggestions?(p(),L(l,{key:0,"suggested-labels":s.labelSuggestions,"chat-labels":t.currentChat.labels,"conversation-id":t.currentChat.id},null,8,["suggested-labels","chat-labels","conversation-id"])):O("v-if",!0)]),_:1},8,["current-user-id","first-unread-id","is-an-email-channel","inbox-supports-reply-to","messages","onRetry"]),f("div",{class:oe(["flex relative flex-col",{"modal-mask":e.isPopOutReplyBox,"bg-n-background":!e.isPopOutReplyBox}])},[r.isAnyoneTyping?(p(),g("div",qet,[f("div",Zet,[Oe(C(r.typingUserNames)+" ",1),n[1]||(n[1]=f("img",{class:"w-6 ltr:ml-2 rtl:mr-2",src:G4,alt:"Someone is typing"},null,-1))])])):O("v-if",!0),v(d,{"pop-out-reply-box":e.isPopOutReplyBox,"onUpdate:popOutReplyBox":n[0]||(n[0]=m=>e.isPopOutReplyBox=m)},null,8,["pop-out-reply-box"])],2)])}const Jet=G(Wet,[["render",Qet],["__scopeId","data-v-b851ce02"],["__file","/app/app/javascript/dashboard/components/widgets/conversation/MessagesView.vue"]]),ett={components:{ConversationHeader:IHe,DashboardAppFrame:RHe,EmptyState:pje,MessagesView:Jet},props:{inboxId:{type:[Number,String],default:"",required:!1},isInboxView:{type:Boolean,default:!1},isContactPanelOpen:{type:Boolean,default:!0},isOnExpandedLayout:{type:Boolean,default:!0}},data(){return{activeIndex:0}},computed:{..._t({currentChat:"getSelectedChat",dashboardApps:"dashboardApps/getRecords"}),dashboardAppTabs(){return[{key:"messages",index:0,name:this.$t("CONVERSATION.DASHBOARD_APP_TAB_MESSAGES")},...this.dashboardApps.map((t,n)=>({key:`dashboard-${t.id}`,index:n+1,name:t.title}))]},showContactPanel(){return this.isContactPanelOpen&&this.currentChat.id}},watch:{"currentChat.inbox_id":{immediate:!0,handler(t){t&&this.$store.dispatch("inboxAssignableAgents/fetch",[t])}},"currentChat.id"(){this.fetchLabels(),this.activeIndex=0}},mounted(){this.fetchLabels(),this.$store.dispatch("dashboardApps/get")},methods:{fetchLabels(){this.currentChat.id&&this.$store.dispatch("conversationLabels/get",this.currentChat.id)},onDashboardAppTabChange(t){this.activeIndex=t}}},ttt={class:"flex h-full min-h-0 m-0"};function ntt(t,n,a,e,s,r){const o=H("ConversationHeader"),i=H("woot-tabs-item"),l=H("woot-tabs"),c=H("MessagesView"),d=H("EmptyState"),u=H("DashboardAppFrame");return p(),g("div",{class:oe(["conversation-details-wrap flex flex-col min-w-0 w-full bg-n-background relative",{"border-l rtl:border-l-0 rtl:border-r border-n-weak":!a.isOnExpandedLayout}])},[t.currentChat.id?(p(),L(o,{key:0,chat:t.currentChat,"show-back-button":a.isOnExpandedLayout&&!a.isInboxView},null,8,["chat","show-back-button"])):O("v-if",!0),t.dashboardApps.length&&t.currentChat.id?(p(),L(l,{key:1,index:s.activeIndex,class:"-mt-px border-t border-t-n-background",onChange:r.onDashboardAppTabChange},{default:z(()=>[(p(!0),g(de,null,Ae(r.dashboardAppTabs,m=>(p(),L(i,{key:m.key,index:m.index,name:m.name,"show-badge":!1,"is-compact":"",class:"[&_a]:pt-1"},null,8,["index","name"]))),128))]),_:1},8,["index","onChange"])):O("v-if",!0),ce(f("div",ttt,[t.currentChat.id?(p(),L(c,{key:0,"inbox-id":a.inboxId,"is-inbox-view":a.isInboxView},null,8,["inbox-id","is-inbox-view"])):O("v-if",!0),!t.currentChat.id&&!a.isInboxView?(p(),L(d,{key:1,"is-on-expanded-layout":a.isOnExpandedLayout},null,8,["is-on-expanded-layout"])):O("v-if",!0),qe(t.$slots,"default")],512),[[En,!s.activeIndex]]),(p(!0),g(de,null,Ae(t.dashboardApps,(m,h)=>ce((p(),L(u,{key:t.currentChat.id+"-"+m.id,"is-visible":s.activeIndex-1===h,config:t.dashboardApps[h].content,position:h,"current-chat":t.currentChat},null,8,["is-visible","config","position","current-chat"])),[[En,s.activeIndex-1===h]])),128))],2)}const jD=G(ett,[["render",ntt],["__file","/app/app/javascript/dashboard/components/widgets/conversation/ConversationBox.vue"]]),att={__name:"CmdBarConversationSnooze",setup(t,{expose:n}){n();const a=Fe(),e=xt(),{t:s}=Q(),r=P(!1),o=S(()=>e.getSelectedChat.value),i=S(()=>e.getContextMenuChatId.value),l=async(h,_)=>{var E;await a.dispatch("toggleStatus",{conversationId:((E=o.value)==null?void 0:E.id)||i.value,status:h,snoozedUntil:_}),a.dispatch("setContextMenuChatId",null),Z(s("CONVERSATION.CHANGE_STATUS"))},c=h=>{h===gt.SNOOZE_OPTIONS.UNTIL_CUSTOM_TIME?r.value=!0:l(gt.STATUS_TYPE.SNOOZED,qm(h)||null)},d=h=>{r.value=!1,h&&l(gt.STATUS_TYPE.SNOOZED,Co(h))},u=()=>{a.dispatch("setContextMenuChatId",null),r.value=!1};Ns(sO,c);const m={store:a,getters:e,t:s,showCustomSnoozeModal:r,selectedChat:o,contextMenuChatId:i,toggleStatus:l,onCmdSnoozeConversation:c,chooseSnoozeTime:d,hideCustomSnoozeModal:u,ref:P,computed:S,get useStore(){return Fe},get useStoreGetters(){return xt},get useAlert(){return Z},get useI18n(){return Q},get useEmitter(){return Ns},get getUnixTime(){return Co},get findSnoozeTime(){return qm},get CMD_SNOOZE_CONVERSATION(){return sO},get wootConstants(){return gt},CustomSnoozeModal:_1};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}};function stt(t,n,a,e,s,r){const o=H("woot-modal");return p(),L(o,{show:e.showCustomSnoozeModal,"onUpdate:show":n[0]||(n[0]=i=>e.showCustomSnoozeModal=i),"on-close":e.hideCustomSnoozeModal},{default:z(()=>[v(e.CustomSnoozeModal,{onClose:e.hideCustomSnoozeModal,onChooseTime:e.chooseSnoozeTime})]),_:1},8,["show"])}const WD=G(att,[["render",stt],["__file","/app/app/javascript/dashboard/routes/dashboard/commands/CmdBarConversationSnooze.vue"]]),ott={__name:"SidepanelSwitch",setup(t,{expose:n}){n();const{updateUISettings:a}=Ct(),e=le("getCurrentAccountId"),s=le("accounts/isFeatureEnabledonAccount"),r=S(()=>s.value(e.value,pt.CAPTAIN)),{uiSettings:o}=Ct(),i=S(()=>o.value.is_contact_sidebar_open),l=S(()=>o.value.is_copilot_panel_open),c=()=>{a({is_contact_sidebar_open:!i.value,is_copilot_panel_open:!1})},d=()=>{a({is_contact_sidebar_open:!0,is_copilot_panel_open:!1})},u=()=>{a({is_contact_sidebar_open:!1,is_copilot_panel_open:!0})},m={"Alt+KeyO":{action:c}};jn(m);const h={updateUISettings:a,currentAccountId:e,isFeatureEnabledonAccount:s,showCopilotTab:r,uiSettings:o,isContactSidebarOpen:i,isCopilotPanelOpen:l,toggleConversationSidebarToggle:c,handleConversationSidebarToggle:d,handleCopilotSidebarToggle:u,keyboardEvents:m,Button:Se,get useUISettings(){return Ct},computed:S,get FEATURE_FLAGS(){return pt},get useMapGetter(){return le},get useKeyboardEvents(){return jn}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}},rtt={class:"flex flex-col justify-center items-center absolute top-36 xl:top-24 ltr:right-2 rtl:left-2 bg-n-solid-2 border border-n-weak rounded-full gap-2 p-1"};function itt(t,n,a,e,s,r){const o=nt("tooltip");return p(),g("div",rtt,[ce(v(e.Button,{ghost:"",slate:"",sm:"",class:oe(["!rounded-full",{"bg-n-alpha-2":e.isContactSidebarOpen}]),icon:"i-ph-user-bold",onClick:e.handleConversationSidebarToggle},null,8,["class"]),[[o,t.$t("CONVERSATION.SIDEBAR.CONTACT"),void 0,{top:!0}]]),e.showCopilotTab?ce((p(),L(e.Button,{key:0,ghost:"",slate:"",class:oe(["!rounded-full",{"bg-n-alpha-2 !text-n-iris-9":e.isCopilotPanelOpen}]),sm:"",icon:"i-woot-captain",onClick:e.handleCopilotSidebarToggle},null,8,["class"])),[[o,t.$t("CONVERSATION.SIDEBAR.COPILOT"),void 0,{bottom:!0}]]):O("v-if",!0)])}const zD=G(ott,[["render",itt],["__file","/app/app/javascript/dashboard/components-next/Conversation/SidepanelSwitch.vue"]]),ltt={props:{icon:{type:String,default:""},iconSize:{type:[Number,String],default:20},emoji:{type:String,default:""}},computed:{..._t({uiSettings:"getUISettings"}),isIconTypeEmoji(){const{icon_type:t}=this.uiSettings||{};return t==="emoji"},showEmoji(){return this.isIconTypeEmoji&&this.emoji&&bk(this.emoji)},showIcon(){return!this.showEmoji&&this.icon},iconContent(){return this.showEmoji?this.emoji:""},className(){return{"icon--emoji":this.showEmoji,"icon--font":this.showIcon,[this.icon]:this.showIcon}}}};function ctt(t,n,a,e,s,r){const o=H("fluent-icon");return r.showEmoji?(p(),g("i",{key:0,class:oe(r.className)},C(r.iconContent),3)):r.showIcon?(p(),L(o,{key:1,size:a.iconSize,icon:a.icon,class:oe(["flex-shrink-0",r.className])},null,8,["size","icon","class"])):O("v-if",!0)}const YD=G(ltt,[["render",ctt],["__scopeId","data-v-16ef2bda"],["__file","/app/app/javascript/shared/components/EmojiOrIcon.vue"]]),dtt={__name:"AccordionItem",props:{title:{type:String,required:!0},compact:{type:Boolean,default:!1},icon:{type:String,default:""},emoji:{type:String,default:""},isOpen:{type:Boolean,default:!0}},emits:["toggle"],setup(t,{expose:n,emit:a}){n();const e=a,r={emit:e,onToggle:()=>{e("toggle")},EmojiOrIcon:YD};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},utt={class:"text-sm"},ptt={class:"flex justify-between"},ftt={class:"text-n-slate-12 text-sm mb-0 py-0 pr-2 pl-0"},mtt={class:"flex flex-row"},htt={class:"flex justify-end w-3 text-n-blue-text cursor-pointer"};function _tt(t,n,a,e,s,r){const o=H("fluent-icon");return p(),g("div",utt,[f("button",{class:oe(["flex items-center select-none w-full rounded-lg bg-n-slate-2 outline outline-1 outline-n-weak m-0 cursor-grab justify-between py-2 px-4 drag-handle",{"rounded-bl-none rounded-br-none":a.isOpen}]),onClick:Ve(e.onToggle,["stop"])},[f("div",ptt,[v(e.EmojiOrIcon,{class:"inline-block w-5",icon:a.icon,emoji:a.emoji},null,8,["icon","emoji"]),f("h5",ftt,C(a.title),1)]),f("div",mtt,[qe(t.$slots,"button"),f("div",htt,[a.isOpen?(p(),L(o,{key:0,size:"24",icon:"subtract",type:"solid"})):(p(),L(o,{key:1,size:"24",icon:"add",type:"solid"}))])])],2),a.isOpen?(p(),g("div",{key:0,class:oe(["bg-n-background outline outline-1 outline-n-weak -mt-[-1px] border-t-0 rounded-br-lg rounded-bl-lg",a.compact?"p-0":"px-2 py-4"])},[qe(t.$slots,"default")],2)):O("v-if",!0)])}const gtt=G(dtt,[["render",_tt],["__file","/app/app/javascript/dashboard/components/Accordion/AccordionItem.vue"]]),btt={components:{ConversationCard:oD,Spinner:$n},props:{contactId:{type:[String,Number],required:!0},conversationId:{type:[String,Number],required:!0}},computed:{conversations(){return this.$store.getters["contactConversations/getContactConversation"](this.contactId)},previousConversations(){return this.conversations.filter(t=>t.id!==Number(this.conversationId))},..._t({uiFlags:"contactConversations/getUIFlags"})},watch:{contactId(t,n){t&&t!==n&&this.$store.dispatch("contactConversations/get",t)}},mounted(){this.$store.dispatch("contactConversations/get",this.contactId)}},vtt={key:0,class:""},Ett={key:0,class:"no-label-message px-4 p-3"},Stt={key:1,class:"contact-conversation--list"},Ttt={key:1,class:"flex items-center justify-center py-5"};function Att(t,n,a,e,s,r){const o=H("ConversationCard"),i=H("Spinner");return t.uiFlags.isFetching?(p(),g("div",Ttt,[v(i)])):(p(),g("div",vtt,[r.previousConversations.length?(p(),g("div",Stt,[(p(!0),g(de,null,Ae(r.previousConversations,l=>(p(),L(o,{key:l.id,chat:l,"hide-inbox-name":!1,"hide-thumbnail":"","enable-context-menu":"",compact:"","allowed-context-menu-options":["open-new-tab","copy-link"]},null,8,["chat"]))),128))])):(p(),g("div",Ett,[f("span",null,C(t.$t("CONTACT_PANEL.CONVERSATIONS.NO_RECORDS_FOUND")),1)]))]))}const ytt=G(btt,[["render",Att],["__scopeId","data-v-d33010c6"],["__file","/app/app/javascript/dashboard/routes/dashboard/conversation/ContactConversations.vue"]]);function KD(t=!0){const{t:n}=Q(),a=le("getCurrentUser"),e=le("getSelectedChat"),s=le("getCurrentAccountId"),r=le("inboxAssignableAgents/getAssignableAgents"),o=S(()=>{var u;return(u=e.value)==null?void 0:u.inbox_id}),i=S(()=>{var u,m;return(m=(u=e.value)==null?void 0:u.meta)==null?void 0:m.assignee}),l=()=>({confirmed:!0,name:n("AGENT_MGMT.MULTI_SELECTOR.LIST.NONE")||"None",id:0,role:"agent",account_id:0,email:"None"}),c=S(()=>o.value?r.value(o.value):[]);return{agentsList:S(()=>{const u=c.value||[],m=nD(u,a.value,s.value),h=tD(m);return[...t&&i.value?[l()]:[],...h]}),assignableAgents:c}}const Itt={props:{title:{type:String,required:!0},value:{type:[String,Number],default:""},compact:{type:Boolean,default:!1}}},Ctt={class:"items-center flex justify-between mb-1.5"},Ott={class:"text-sm font-medium text-n-slate-12"},Ntt={key:0,class:"break-words"};function xtt(t,n,a,e,s,r){return p(),g("div",{class:oe(["overflow-auto",a.compact?"py-0 px-0":"py-3 px-4"])},[f("div",Ctt,[f("span",Ott,C(a.title),1),qe(t.$slots,"button")]),a.value?(p(),g("div",Ntt,[qe(t.$slots,"default",{},()=>[Oe(C(a.value),1)])])):O("v-if",!0)],2)}const XD=G(Itt,[["render",xtt],["__file","/app/app/javascript/dashboard/routes/dashboard/conversation/ContactDetailsItem.vue"]]),Rtt={components:{WootDropdownItem:hh,WootDropdownMenu:_h,Avatar:qt,NextButton:Se},props:{options:{type:Array,default:()=>[]},selectedItems:{type:Array,default:()=>[]},hasThumbnail:{type:Boolean,default:!0},inputPlaceholder:{type:String,default:"Search"},noSearchResult:{type:String,default:"No results found"}},emits:["select"],data(){return{search:""}},computed:{filteredOptions(){return this.options.filter(t=>t.name.toLowerCase().includes(this.search.toLowerCase()))},noResult(){return this.filteredOptions.length===0&&this.search!==""}},mounted(){this.focusInput()},methods:{onclick(t){this.$emit("select",t)},focusInput(){this.$refs.searchbar.focus()},isActive(t){return this.selectedItems.some(n=>n&&t.id===n.id)}}},wtt={class:"dropdown-wrap"},Mtt={class:"flex-auto flex-grow-0 flex-shrink-0 mb-2 max-h-8"},Ltt=["placeholder"],Dtt={class:"flex items-start justify-start flex-auto overflow-auto mt-2"},Ptt={class:"w-full max-h-[10rem]"},ktt={class:"flex items-center justify-between w-full min-w-0 gap-2"},Btt=["title"],Ftt={key:0,class:"w-full justify-center items-center flex text-n-slate-10 py-2 px-2.5 overflow-hidden whitespace-nowrap text-ellipsis text-sm"};function Utt(t,n,a,e,s,r){const o=H("Avatar"),i=H("NextButton"),l=H("WootDropdownItem"),c=H("WootDropdownMenu");return p(),g("div",wtt,[f("div",Mtt,[ce(f("input",{ref:"searchbar","onUpdate:modelValue":n[0]||(n[0]=d=>s.search=d),type:"text",class:"search-input",autofocus:"true",placeholder:a.inputPlaceholder},null,8,Ltt),[[Et,s.search]])]),f("div",Dtt,[f("div",Ptt,[v(c,null,{default:z(()=>[(p(!0),g(de,null,Ae(r.filteredOptions,d=>(p(),L(l,{key:d.id},{default:z(()=>[v(i,{slate:"",variant:r.isActive(d)?"faded":"ghost","trailing-icon":"",icon:r.isActive(d)?"i-lucide-check":"",class:"w-full !px-2.5",onClick:()=>r.onclick(d)},{default:z(()=>[f("div",ktt,[f("span",{class:"my-0 overflow-hidden text-sm leading-4 whitespace-nowrap text-ellipsis",title:d.name},C(d.name),9,Btt)]),a.hasThumbnail?(p(),L(o,{key:0,src:d.thumbnail,name:d.name,status:d.availability_status,size:24,"hide-offline-status":"","rounded-full":""},null,8,["src","name","status"])):O("v-if",!0)]),_:2},1032,["variant","icon","onClick"])]),_:2},1024))),128))]),_:1}),r.noResult?(p(),g("h4",Ftt,C(a.noSearchResult),1)):O("v-if",!0)])])])}const qD=G(Rtt,[["render",Utt],["__scopeId","data-v-cff96152"],["__file","/app/app/javascript/shared/components/ui/MultiselectDropdownItems.vue"]]),$tt={__name:"MultiselectDropdown",props:{options:{type:Array,default:()=>[]},selectedItem:{type:Object,default:()=>({})},hasThumbnail:{type:Boolean,default:!0},multiselectorTitle:{type:String,default:""},multiselectorPlaceholder:{type:String,default:"None"},noSearchResult:{type:String,default:"No results found"},inputPlaceholder:{type:String,default:"Search"}},emits:["select"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,[r,o]=$t(!1),i=()=>o(!1),l=u=>{s("select",u),i()},c=S(()=>!!(e.selectedItem&&e.selectedItem.id)),d={props:e,emit:s,showSearchDropdown:r,toggleDropdown:o,onCloseDropdown:i,onClickSelectItem:l,hasValue:c,computed:S,get OnClickOutside(){return lh},get useToggle(){return $t},Button:Se,Avatar:qt,MultiselectDropdownItems:qD};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}},Gtt={class:"flex items-center justify-between w-full min-w-0"},Vtt={key:0,class:"text-sm text-ellipsis text-n-slate-12"},Htt=["title"],jtt={class:"flex items-center justify-between mb-1"},Wtt={class:"m-0 overflow-hidden text-sm text-n-slate-11 whitespace-nowrap text-ellipsis"};function ztt(t,n,a,e,s,r){return p(),L(e.OnClickOutside,{onTrigger:e.onCloseDropdown},{default:z(()=>[f("div",{class:"relative w-full mb-2",onKeyup:Vn(e.onCloseDropdown,["esc"])},[v(e.Button,{slate:"",outline:"","trailing-icon":"",icon:e.showSearchDropdown?"i-lucide-chevron-up":"i-lucide-chevron-down",class:"w-full !px-2",onClick:n[0]||(n[0]=()=>e.toggleDropdown())},{default:z(()=>[f("div",Gtt,[e.hasValue?(p(),g("h4",{key:1,class:"items-center overflow-hidden text-sm leading-tight whitespace-nowrap text-ellipsis text-n-slate-12",title:a.selectedItem.name},C(a.selectedItem.name),9,Htt)):(p(),g("h4",Vtt,C(a.multiselectorPlaceholder),1))]),e.hasValue&&a.hasThumbnail?(p(),L(e.Avatar,{key:0,src:a.selectedItem.thumbnail,status:a.selectedItem.availability_status,name:a.selectedItem.name,size:24,"hide-offline-status":"","rounded-full":""},null,8,["src","status","name"])):O("v-if",!0)]),_:1},8,["icon"]),f("div",{class:oe([{"block visible":e.showSearchDropdown,"hidden invisible":!e.showSearchDropdown},"box-border top-[2.625rem] w-full border rounded-lg bg-n-alpha-3 backdrop-blur-[100px] absolute shadow-lg border-n-strong dark:border-n-strong p-2 z-[9999]"])},[f("div",jtt,[f("h4",Wtt,C(a.multiselectorTitle),1),v(e.Button,{ghost:"",slate:"",xs:"",icon:"i-lucide-x",onClick:e.onCloseDropdown})]),e.showSearchDropdown?(p(),L(e.MultiselectDropdownItems,{key:0,options:a.options,"selected-items":[a.selectedItem],"has-thumbnail":a.hasThumbnail,"input-placeholder":a.inputPlaceholder,"no-search-result":a.noSearchResult,onSelect:e.onClickSelectItem},null,8,["options","selected-items","has-thumbnail","input-placeholder","no-search-result"])):O("v-if",!0)],2)],32)]),_:1})}const ZD=G($tt,[["render",ztt],["__file","/app/app/javascript/shared/components/ui/MultiselectDropdown.vue"]]);function Ytt(){const t=Fe(),n=xt(),a=S(()=>n.getSelectedChat.value),e=S(()=>{var u;return(u=a.value)==null?void 0:u.id}),s=S(()=>n["labels/getLabels"].value),r=S(()=>t.getters["conversationLabels/getConversationLabels"](e.value)),o=S(()=>s.value.filter(({title:u})=>r.value.includes(u))),i=S(()=>s.value.filter(({title:u})=>!r.value.includes(u))),l=async u=>{await t.dispatch("conversationLabels/update",{conversationId:e.value,labels:u})};return{accountLabels:s,savedLabels:r,activeLabels:o,inactiveLabels:i,addLabelToConversation:u=>{const m=o.value.map(h=>h.title);m.push(u.title),l(m)},removeLabelFromConversation:u=>{const m=o.value.map(h=>h.title).filter(h=>h!==u);l(m)},onUpdateLabels:l}}const Ktt={components:{NextButton:Se},props:{title:{type:String,default:""},color:{type:String,default:""},selected:{type:Boolean,default:!1}},emits:["selectLabel"],methods:{onClick(){this.$emit("selectLabel",this.title)}}},Xtt={class:"flex items-center min-w-0 gap-2"},qtt=["title"];function Ztt(t,n,a,e,s,r){const o=H("NextButton"),i=H("woot-dropdown-item");return p(),L(i,null,{default:z(()=>[v(o,{slate:"",ghost:"",blue:"","trailing-icon":"",icon:a.selected?"i-lucide-circle-check":"",class:oe(["w-full !px-2.5 justify-between",{"!flex-row":!a.selected}]),onClick:r.onClick},{default:z(()=>[f("div",Xtt,[a.color?(p(),g("div",{key:0,class:"size-3 flex-shrink-0 rounded-full outline outline-1 outline-n-weak",style:nn({backgroundColor:a.color})},null,4)):O("v-if",!0),f("span",{class:"overflow-hidden text-ellipsis whitespace-nowrap leading-[1.1]",title:a.title},C(a.title),9,qtt)])]),_:1},8,["icon","class","onClick"])]),_:1})}const Qtt=G(Ktt,[["render",Ztt],["__file","/app/app/javascript/shared/components/ui/label/LabelDropdownItem.vue"]]),Jtt=/[^a-zA-Z0-9_-]/g,ent=/\s+/g,tnt=(t="")=>t?t.trim().toLowerCase().replace(ent,"-").replace(Jtt,""):"",nnt={components:{LabelDropdownItem:Qtt,AddLabelModal:WM,Hotkey:g1,NextButton:Se},props:{accountLabels:{type:Array,default:()=>[]},selectedLabels:{type:Array,default:()=>[]},allowCreation:{type:Boolean,default:!1}},emits:["update","add","remove"],data(){return{search:"",createModalVisible:!1}},computed:{createLabelPlaceholder(){const t=this.$t("CONTACT_PANEL.LABELS.LABEL_SELECT.CREATE_LABEL");return this.search?`${t}:`:t},filteredActiveLabels(){return this.search?lo(this.accountLabels,this.search,["title"],{threshold:.9}):this.accountLabels},noResult(){return this.filteredActiveLabels.length===0},hasExactMatchInResults(){return this.filteredActiveLabels.some(t=>t.title===this.search)},shouldShowCreate(){return this.allowCreation&&this.filteredActiveLabels.length<3},parsedSearch(){return tnt(this.search)}},mounted(){this.focusInput()},methods:{focusInput(){this.$refs.searchbar.focus()},updateLabels(t){this.$emit("update",t)},onAdd(t){this.$emit("add",t)},onRemove(t){this.$emit("remove",t)},onAddRemove(t){this.selectedLabels.includes(t.title)?this.onRemove(t.title):this.onAdd(t)},showCreateModal(){this.createModalVisible=!0},hideCreateModal(){this.createModalVisible=!1}}},ant={class:"flex flex-col w-full max-h-[12.5rem]"},snt={class:"flex items-center justify-center mb-1"},ont={class:"flex-grow m-0 overflow-hidden text-sm text-n-slate-12 whitespace-nowrap text-ellipsis"},rnt={class:"flex-auto flex-grow-0 flex-shrink-0 mb-2 max-h-8"},lnt=["placeholder"],cnt={class:"flex items-start justify-start flex-auto flex-grow flex-shrink overflow-auto"},dnt={class:"w-full my-1"},unt={key:0,class:"flex justify-center py-4 px-2.5 font-medium text-xs text-n-slate-11"},pnt={key:1,class:"flex pt-1 border-t border-solid border-n-weak"};function fnt(t,n,a,e,s,r){const o=H("Hotkey"),i=H("LabelDropdownItem"),l=H("woot-dropdown-menu"),c=H("NextButton"),d=H("AddLabelModal"),u=H("woot-modal");return p(),g("div",ant,[f("div",snt,[f("h4",ont,C(t.$t("CONTACT_PANEL.LABELS.LABEL_SELECT.TITLE")),1),v(o,{"custom-class":"border border-solid text-n-slate-12 bg-n-slate-2 text-xxs border-n-strong flex-shrink-0"},{default:z(()=>n[2]||(n[2]=[Oe(C("L"))])),_:1})]),f("div",rnt,[ce(f("input",{ref:"searchbar","onUpdate:modelValue":n[0]||(n[0]=m=>s.search=m),type:"text",class:"search-input",autofocus:"true",placeholder:t.$t("CONTACT_PANEL.LABELS.LABEL_SELECT.PLACEHOLDER")},null,8,lnt),[[Et,s.search]])]),f("div",cnt,[f("div",dnt,[v(l,null,{default:z(()=>[(p(!0),g(de,null,Ae(r.filteredActiveLabels,m=>(p(),L(i,{key:m.title,title:m.title,color:m.color,selected:a.selectedLabels.includes(m.title),onSelectLabel:h=>r.onAddRemove(m)},null,8,["title","color","selected","onSelectLabel"]))),128))]),_:1}),r.noResult?(p(),g("div",unt,C(t.$t("CONTACT_PANEL.LABELS.LABEL_SELECT.NO_RESULT")),1)):O("v-if",!0),a.allowCreation&&r.shouldShowCreate?(p(),g("div",pnt,[v(c,{icon:"i-lucide-plus",slate:"",sm:"",ghost:"",label:`${r.createLabelPlaceholder} ${r.parsedSearch}`,disabled:r.hasExactMatchInResults,onClick:r.showCreateModal},null,8,["label","disabled","onClick"]),v(u,{show:s.createModalVisible,"onUpdate:show":n[1]||(n[1]=m=>s.createModalVisible=m),"on-close":r.hideCreateModal},{default:z(()=>[v(d,{"prefill-title":r.parsedSearch,onClose:r.hideCreateModal},null,8,["prefill-title","onClose"])]),_:1},8,["show","on-close"])])):O("v-if",!0)])])])}const mnt=G(nnt,[["render",fnt],["__file","/app/app/javascript/shared/components/ui/label/LabelDropdown.vue"]]),hnt={__name:"AddLabel",emits:["add"],setup(t,{expose:n,emit:a}){n();const e=a,r={emit:e,addLabel:()=>{e("add")},Button:Se};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}};function _nt(t,n,a,e,s,r){return p(),L(e.Button,{faded:"",xs:"",icon:"i-lucide-plus",class:"mb-0.5 ltr:mr-0.5 rtl:ml-0.5 !rounded-[4px]",label:t.$t("CONTACT_PANEL.LABELS.CONVERSATION.ADD_BUTTON"),onClick:e.addLabel},null,8,["label"])}const gnt=G(hnt,[["render",_nt],["__file","/app/app/javascript/shared/components/ui/dropdown/AddLabel.vue"]]),bnt={components:{Spinner:ls,LabelDropdown:mnt,AddLabel:gnt},setup(){const{isAdmin:t}=Es(),{savedLabels:n,activeLabels:a,accountLabels:e,addLabelToConversation:s,removeLabelFromConversation:r}=Ytt(),o=P(!1),i=()=>{o.value=!o.value},l=()=>{o.value=!1};return jn({KeyL:{action:d=>{d.preventDefault(),i()}},Escape:{action:()=>{o.value&&i()},allowOnFocusedInput:!0}}),{isAdmin:t,savedLabels:n,activeLabels:a,accountLabels:e,addLabelToConversation:s,removeLabelFromConversation:r,showSearchDropdownLabel:o,closeDropdownLabel:l,toggleLabels:i}},data(){return{selectedLabels:[]}},computed:{..._t({conversationUiFlags:"conversationLabels/getUIFlags"})}},vnt={class:"sidebar-labels-wrap"},Ent={key:0,class:"contact-conversation--list"};function Snt(t,n,a,e,s,r){const o=H("AddLabel"),i=H("woot-label"),l=H("LabelDropdown"),c=H("Spinner"),d=nt("on-clickaway");return p(),g("div",vnt,[t.conversationUiFlags.isFetching?(p(),L(c,{key:1})):(p(),g("div",Ent,[ce((p(),g("div",{class:"label-wrap flex flex-wrap",onKeyup:n[0]||(n[0]=Vn((...u)=>e.closeDropdownLabel&&e.closeDropdownLabel(...u),["esc"]))},[v(o,{onAdd:e.toggleLabels},null,8,["onAdd"]),(p(!0),g(de,null,Ae(e.activeLabels,u=>(p(),L(i,{key:u.id,title:u.title,description:u.description,"show-close":"",color:u.color,variant:"smooth",class:"max-w-[calc(100%-0.5rem)]",onRemove:e.removeLabelFromConversation},null,8,["title","description","color","onRemove"]))),128)),f("div",{class:oe([{"block visible":e.showSearchDropdownLabel,"hidden invisible":!e.showSearchDropdownLabel},"border rounded-lg bg-n-alpha-3 top-6 backdrop-blur-[100px] absolute w-full shadow-lg border-n-strong dark:border-n-strong p-2 box-border z-[9999]"])},[e.showSearchDropdownLabel?(p(),L(l,{key:0,"account-labels":e.accountLabels,"selected-labels":e.savedLabels,"allow-creation":e.isAdmin,onAdd:e.addLabelToConversation,onRemove:e.removeLabelFromConversation},null,8,["account-labels","selected-labels","allow-creation","onAdd","onRemove"])):O("v-if",!0)],2)],32)),[[d,e.closeDropdownLabel]])]))])}const Tnt=G(bnt,[["render",Snt],["__scopeId","data-v-c921e646"],["__file","/app/app/javascript/dashboard/routes/dashboard/conversation/labels/LabelBox.vue"]]),Ant={components:{ContactDetailsItem:XD,MultiselectDropdown:ZD,ConversationLabels:Tnt,NextButton:Se},props:{conversationId:{type:[Number,String],required:!0}},setup(){const{agentsList:t}=KD();return{agentsList:t}},data(){return{priorityOptions:[{id:null,name:this.$t("CONVERSATION.PRIORITY.OPTIONS.NONE"),thumbnail:"/assets/images/dashboard/priority/none.svg"},{id:Ao.URGENT,name:this.$t("CONVERSATION.PRIORITY.OPTIONS.URGENT"),thumbnail:`/assets/images/dashboard/priority/${Ao.URGENT}.svg`},{id:Ao.HIGH,name:this.$t("CONVERSATION.PRIORITY.OPTIONS.HIGH"),thumbnail:`/assets/images/dashboard/priority/${Ao.HIGH}.svg`},{id:Ao.MEDIUM,name:this.$t("CONVERSATION.PRIORITY.OPTIONS.MEDIUM"),thumbnail:`/assets/images/dashboard/priority/${Ao.MEDIUM}.svg`},{id:Ao.LOW,name:this.$t("CONVERSATION.PRIORITY.OPTIONS.LOW"),thumbnail:`/assets/images/dashboard/priority/${Ao.LOW}.svg`}]}},computed:{..._t({currentChat:"getSelectedChat",currentUser:"getCurrentUser",teams:"teams/getTeams"}),hasAnAssignedTeam(){var t,n;return!!((n=(t=this.currentChat)==null?void 0:t.meta)!=null&&n.team)},teamsList(){return this.hasAnAssignedTeam?[{id:0,name:this.$t("TEAMS_SETTINGS.LIST.NONE")},...this.teams]:this.teams},assignedAgent:{get(){return this.currentChat.meta.assignee},set(t){const n=t?t.id:0;this.$store.dispatch("setCurrentChatAssignee",t),this.$store.dispatch("assignAgent",{conversationId:this.currentChat.id,agentId:n}).then(()=>{Z(this.$t("CONVERSATION.CHANGE_AGENT"))})}},assignedTeam:{get(){return this.currentChat.meta.team},set(t){const n=this.currentChat.id,a=t?t.id:0;this.$store.dispatch("setCurrentChatTeam",{team:t,conversationId:n}),this.$store.dispatch("assignTeam",{conversationId:n,teamId:a}).then(()=>{Z(this.$t("CONVERSATION.CHANGE_TEAM"))})}},assignedPriority:{get(){return this.priorityOptions.find(n=>n.id===this.currentChat.priority)||this.priorityOptions[0]},set(t){var s;const n=this.currentChat.id,a=(s=this.currentChat)==null?void 0:s.priority,e=t?t.id:null;this.$store.dispatch("setCurrentChatPriority",{priority:e,conversationId:n}),this.$store.dispatch("assignPriority",{conversationId:n,priority:e}).then(()=>{Nt($a.CHANGE_PRIORITY,{oldValue:a,newValue:e,from:"Conversation Sidebar"}),Z(this.$t("CONVERSATION.PRIORITY.CHANGE_PRIORITY.SUCCESSFUL",{priority:t.name,conversationId:n}))})}},showSelfAssign(){return!this.assignedAgent||this.assignedAgent.id!==this.currentUser.id}},methods:{onSelfAssign(){const{account_id:t,availability_status:n,available_name:a,email:e,id:s,name:r,role:o,avatar_url:i}=this.currentUser,l={account_id:t,availability_status:n,available_name:a,email:e,id:s,name:r,role:o,thumbnail:i};this.assignedAgent=l},onClickAssignAgent(t){this.assignedAgent&&this.assignedAgent.id===t.id?this.assignedAgent=null:this.assignedAgent=t},onClickAssignTeam(t){this.assignedTeam&&this.assignedTeam.id===t.id?this.assignedTeam=null:this.assignedTeam=t},onClickAssignPriority(t){const n=this.assignedPriority&&this.assignedPriority.id===t.id;this.assignedPriority=n?null:t}}},ynt={class:"bg-n-background"},Int={class:"multiselect-wrap--small"},Cnt={class:"multiselect-wrap--small"},Ont={class:"multiselect-wrap--small"};function Nnt(t,n,a,e,s,r){const o=H("NextButton"),i=H("ContactDetailsItem"),l=H("MultiselectDropdown"),c=H("ConversationLabels");return p(),g("div",ynt,[f("div",Int,[v(i,{compact:"",title:t.$t("CONVERSATION_SIDEBAR.ASSIGNEE_LABEL")},{button:z(()=>[r.showSelfAssign?(p(),L(o,{key:0,link:"",xs:"",icon:"i-lucide-arrow-right",class:"!gap-1",label:t.$t("CONVERSATION_SIDEBAR.SELF_ASSIGN"),onClick:r.onSelfAssign},null,8,["label","onClick"])):O("v-if",!0)]),_:1},8,["title"]),v(l,{options:e.agentsList,"selected-item":r.assignedAgent,"multiselector-title":t.$t("AGENT_MGMT.MULTI_SELECTOR.TITLE.AGENT"),"multiselector-placeholder":t.$t("AGENT_MGMT.MULTI_SELECTOR.PLACEHOLDER"),"no-search-result":t.$t("AGENT_MGMT.MULTI_SELECTOR.SEARCH.NO_RESULTS.AGENT"),"input-placeholder":t.$t("AGENT_MGMT.MULTI_SELECTOR.SEARCH.PLACEHOLDER.AGENT"),onSelect:r.onClickAssignAgent},null,8,["options","selected-item","multiselector-title","multiselector-placeholder","no-search-result","input-placeholder","onSelect"])]),f("div",Cnt,[v(i,{compact:"",title:t.$t("CONVERSATION_SIDEBAR.TEAM_LABEL")},null,8,["title"]),v(l,{options:r.teamsList,"selected-item":r.assignedTeam,"multiselector-title":t.$t("AGENT_MGMT.MULTI_SELECTOR.TITLE.TEAM"),"multiselector-placeholder":t.$t("AGENT_MGMT.MULTI_SELECTOR.PLACEHOLDER"),"no-search-result":t.$t("AGENT_MGMT.MULTI_SELECTOR.SEARCH.NO_RESULTS.TEAM"),"input-placeholder":t.$t("AGENT_MGMT.MULTI_SELECTOR.SEARCH.PLACEHOLDER.TEAM"),onSelect:r.onClickAssignTeam},null,8,["options","selected-item","multiselector-title","multiselector-placeholder","no-search-result","input-placeholder","onSelect"])]),f("div",Ont,[v(i,{compact:"",title:t.$t("CONVERSATION.PRIORITY.TITLE")},null,8,["title"]),v(l,{options:s.priorityOptions,"selected-item":r.assignedPriority,"multiselector-title":t.$t("CONVERSATION.PRIORITY.TITLE"),"multiselector-placeholder":t.$t("CONVERSATION.PRIORITY.CHANGE_PRIORITY.SELECT_PLACEHOLDER"),"no-search-result":t.$t("CONVERSATION.PRIORITY.CHANGE_PRIORITY.NO_RESULTS"),"input-placeholder":t.$t("CONVERSATION.PRIORITY.CHANGE_PRIORITY.INPUT_PLACEHOLDER"),onSelect:r.onClickAssignPriority},null,8,["options","selected-item","multiselector-title","multiselector-placeholder","no-search-result","input-placeholder","onSelect"])]),v(i,{compact:"",title:t.$t("CONVERSATION_SIDEBAR.ACCORDION.CONVERSATION_LABELS")},null,8,["title"]),v(c,{"conversation-id":a.conversationId},null,8,["conversation-id"])])}const xnt=G(Ant,[["render",Nnt],["__file","/app/app/javascript/dashboard/routes/dashboard/conversation/ConversationAction.vue"]]),Rnt={__name:"ThumbnailGroup",props:{usersList:{type:Array,default:()=>[]},size:{type:Number,default:24},showMoreThumbnailsCount:{type:Boolean,default:!1},moreThumbnailsText:{type:String,default:""},gap:{type:String,default:"normal",validator(t){return["normal","tight"].includes(t)}}},setup(t,{expose:n}){n();const a=t,e=S(()=>a.gap==="tight"?"ltr:[&:not(:first-child)]:-ml-2 rtl:[&:not(:first-child)]:-mr-2":"ltr:[&:not(:first-child)]:-ml-1 rtl:[&:not(:first-child)]:-mr-1"),s=S(()=>a.gap==="tight"?"ltr:-ml-2 rtl:-mr-2":"ltr:-ml-1 rtl:-mr-1"),r={props:a,gapClass:e,moreThumbnailsClass:s,computed:S,Avatar:qt};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},wnt={class:"flex"};function Mnt(t,n,a,e,s,r){const o=nt("tooltip");return p(),g("div",wnt,[(p(!0),g(de,null,Ae(a.usersList,i=>ce((p(),L(e.Avatar,{key:i.id,title:i.name,src:i.thumbnail,name:i.name,size:a.size,class:oe(["[&>span]:outline [&>span]:outline-1 [&>span]:outline-n-background [&>span]:shadow",e.gapClass]),"rounded-full":""},null,8,["title","src","name","size","class"])),[[o,i.name]])),128)),a.showMoreThumbnailsCount?(p(),g("span",{key:0,class:oe(["text-n-slate-11 bg-n-slate-4 outline outline-1 outline-n-background text-xs font-medium rounded-full px-2 inline-flex items-center shadow relative",e.moreThumbnailsClass])},C(a.moreThumbnailsText),3)):O("v-if",!0)])}const Lnt=G(Rnt,[["render",Mnt],["__file","/app/app/javascript/dashboard/components/widgets/ThumbnailGroup.vue"]]),Dnt={components:{Spinner:ls,ThumbnailGroup:Lnt,MultiselectDropdownItems:qD,NextButton:Se},props:{conversationId:{type:[Number,String],required:!0}},setup(){const{agentsList:t}=KD(!1);return{agentsList:t}},data(){return{selectedWatchers:[],showDropDown:!1}},computed:{..._t({watchersUiFlas:"conversationWatchers/getUIFlags",currentUser:"getCurrentUser"}),watchersFromStore(){return this.$store.getters["conversationWatchers/getByConversationId"](this.conversationId)},watchersList:{get(){return this.selectedWatchers},set(t){this.selectedWatchers=[...t];const n=t.map(a=>a.id);this.updateParticipant(n)}},isUserWatching(){return this.selectedWatchers.some(t=>t.id===this.currentUser.id)},thumbnailList(){return this.selectedWatchers.slice(0,4)},moreAgentCount(){return this.watchersList.length-4},moreThumbnailsText(){return this.moreAgentCount>1?this.$t("CONVERSATION_PARTICIPANTS.REMANING_PARTICIPANTS_TEXT",{count:this.moreAgentCount}):this.$t("CONVERSATION_PARTICIPANTS.REMANING_PARTICIPANT_TEXT",{count:1})},showMoreThumbs(){return this.moreAgentCount>0},totalWatchersText(){return this.selectedWatchers.length>1?this.$t("CONVERSATION_PARTICIPANTS.TOTAL_PARTICIPANTS_TEXT",{count:this.selectedWatchers.length}):this.$t("CONVERSATION_PARTICIPANTS.TOTAL_PARTICIPANT_TEXT",{count:1})}},watch:{conversationId(){this.fetchParticipants()},watchersFromStore(t=[]){this.selectedWatchers=[...t]}},mounted(){this.fetchParticipants(),this.$store.dispatch("agents/get")},methods:{fetchParticipants(){const t=this.conversationId;this.$store.dispatch("conversationWatchers/show",{conversationId:t})},async updateParticipant(t){const n=this.conversationId;let a=this.$t("CONVERSATION_PARTICIPANTS.API.SUCCESS_MESSAGE");try{await this.$store.dispatch("conversationWatchers/update",{conversationId:n,userIds:t})}catch(e){a=(e==null?void 0:e.message)||this.$t("CONVERSATION_PARTICIPANTS.API.ERROR_MESSAGE")}finally{Z(a)}this.fetchParticipants()},onOpenDropdown(){this.showDropDown=!0},onCloseDropdown(){this.showDropDown=!1},onClickItem(t){if(this.watchersList.some(a=>a.id===t.id)){const a=this.watchersList.filter(e=>e.id!==t.id);this.watchersList=[...a]}else this.watchersList=[...this.watchersList,t]},onSelfAssign(){this.watchersList=[...this.selectedWatchers,this.currentUser]}}},Pnt={class:"relative bg-n-background"},knt={class:"flex justify-between"},Bnt={class:"flex justify-between w-full mb-1"},Fnt={key:0,class:"m-0 text-sm total-watchers"},Unt={key:1,class:"m-0 text-sm text-n-slate-10"},$nt={class:"flex items-center justify-between"},Gnt={key:0,class:"m-0 text-sm text-n-slate-10"},Vnt={class:"flex items-center justify-between mb-1"},Hnt={class:"m-0 overflow-hidden text-sm whitespace-nowrap text-ellipsis text-n-slate-12"};function jnt(t,n,a,e,s,r){const o=H("Spinner"),i=H("NextButton"),l=H("ThumbnailGroup"),c=H("MultiselectDropdownItems"),d=nt("tooltip"),u=nt("on-clickaway");return p(),g("div",Pnt,[f("div",knt,[f("div",Bnt,[f("div",null,[r.watchersList.length?(p(),g("p",Fnt,[t.watchersUiFlas.isFetching?(p(),L(o,{key:0,size:"tiny"})):O("v-if",!0),Oe(" "+C(r.totalWatchersText),1)])):(p(),g("p",Unt,C(t.$t("CONVERSATION_PARTICIPANTS.NO_PARTICIPANTS_TEXT")),1))]),ce(v(i,{slate:"",ghost:"",sm:"",icon:"i-lucide-settings",class:"relative -top-1",title:t.$t("CONVERSATION_PARTICIPANTS.ADD_PARTICIPANTS"),onClick:r.onOpenDropdown},null,8,["title","onClick"]),[[d,t.$t("CONVERSATION_PARTICIPANTS.ADD_PARTICIPANTS"),void 0,{left:!0}]])])]),f("div",$nt,[v(l,{"more-thumbnails-text":r.moreThumbnailsText,"show-more-thumbnails-count":r.showMoreThumbs,"users-list":r.thumbnailList},null,8,["more-thumbnails-text","show-more-thumbnails-count","users-list"]),r.isUserWatching?(p(),g("p",Gnt,C(t.$t("CONVERSATION_PARTICIPANTS.YOU_ARE_WATCHING")),1)):(p(),L(i,{key:1,link:"",xs:"",icon:"i-lucide-arrow-right",class:"!gap-1",label:t.$t("CONVERSATION_PARTICIPANTS.WATCH_CONVERSATION"),onClick:r.onSelfAssign},null,8,["label","onClick"]))]),ce((p(),g("div",{class:oe([{"block visible":s.showDropDown,"hidden invisible":!s.showDropDown},"border rounded-lg shadow-lg bg-n-alpha-3 absolute backdrop-blur-[100px] border-n-strong dark:border-n-strong p-2 z-[9999] box-border top-8 w-full"])},[f("div",Vnt,[f("h4",Hnt,C(t.$t("CONVERSATION_PARTICIPANTS.ADD_PARTICIPANTS")),1),v(i,{ghost:"",slate:"",xs:"",icon:"i-lucide-x",onClick:r.onCloseDropdown},null,8,["onClick"])]),v(c,{options:e.agentsList,"selected-items":s.selectedWatchers,"has-thumbnail":"",onSelect:r.onClickItem},null,8,["options","selected-items","onSelect"])],2)),[[u,()=>{r.onCloseDropdown()}]])])}const Wnt=G(Dnt,[["render",jnt],["__file","/app/app/javascript/dashboard/routes/dashboard/conversation/ConversationParticipant.vue"]]),znt={components:{EmojiOrIcon:YD,NextButton:Se},props:{href:{type:String,default:""},icon:{type:String,required:!0},emoji:{type:String,required:!0},value:{type:String,default:""},showCopy:{type:Boolean,default:!1}},methods:{async onCopy(t){t.preventDefault(),await Ra(this.value),Z(this.$t("CONTACT_PANEL.COPY_SUCCESSFUL"))}}},Ynt={class:"w-full h-5 ltr:-ml-1 rtl:-mr-1"},Knt=["href"],Xnt=["title"],qnt={key:1,class:"text-sm text-n-slate-11"},Znt={key:1,class:"flex items-center gap-2 text-n-slate-11"},Qnt={key:0,class:"overflow-hidden text-sm whitespace-nowrap text-ellipsis"},Jnt={key:1,class:"text-sm text-n-slate-11"};function eat(t,n,a,e,s,r){const o=H("EmojiOrIcon"),i=H("NextButton"),l=nt("dompurify-html");return p(),g("div",Ynt,[a.href?(p(),g("a",{key:0,href:a.href,class:"flex items-center gap-2 text-n-slate-11 hover:underline"},[v(o,{icon:a.icon,emoji:a.emoji,"icon-size":"14",class:"flex-shrink-0 ltr:ml-1 rtl:mr-1"},null,8,["icon","emoji"]),a.value?(p(),g("span",{key:0,class:"overflow-hidden text-sm whitespace-nowrap text-ellipsis",title:a.value},C(a.value),9,Xnt)):(p(),g("span",qnt,C(t.$t("CONTACT_PANEL.NOT_AVAILABLE")),1)),a.showCopy?(p(),L(i,{key:2,ghost:"",xs:"",slate:"",class:"ltr:-ml-1 rtl:-mr-1",icon:"i-lucide-clipboard",onClick:r.onCopy},null,8,["onClick"])):O("v-if",!0)],8,Knt)):(p(),g("div",Znt,[v(o,{icon:a.icon,emoji:a.emoji,"icon-size":"14",class:"flex-shrink-0 ltr:ml-1 rtl:mr-1"},null,8,["icon","emoji"]),a.value?ce((p(),g("span",Qnt,null,512)),[[l,a.value]]):(p(),g("span",Jnt,C(t.$t("CONTACT_PANEL.NOT_AVAILABLE")),1))]))])}const tat=G(znt,[["render",eat],["__file","/app/app/javascript/dashboard/routes/dashboard/conversation/contact/ContactInfoRow.vue"]]),nat={props:{socialProfiles:{type:Object,default:()=>({})}},data(){return{socialMediaLinks:[{key:"facebook",icon:"facebook",link:"https://facebook.com/"},{key:"twitter",icon:"twitter",link:"https://twitter.com/"},{key:"linkedin",icon:"linkedin",link:"https://linkedin.com/"},{key:"github",icon:"github",link:"https://github.com/"},{key:"instagram",icon:"instagram",link:"https://instagram.com/"},{key:"telegram",icon:"telegram",link:"https://t.me/"}]}},computed:{availableProfiles(){return this.socialMediaLinks.filter(t=>!!this.socialProfiles[t.key])}}},aat={key:0,class:"flex items-end gap-3 mx-0 my-2"},sat=["href"];function oat(t,n,a,e,s,r){const o=H("fluent-icon");return r.availableProfiles.length?(p(),g("div",aat,[(p(!0),g(de,null,Ae(r.availableProfiles,i=>(p(),g("a",{key:i.key,href:`${i.link}${a.socialProfiles[i.key]}`,target:"_blank",rel:"noopener noreferrer nofollow"},[v(o,{icon:`brand-${i.key}`,size:"16",class:"text-n-slate-11 hover:text-n-slate-10"},null,8,["icon"])],8,sat))),128))])):O("v-if",!0)}const rat=G(nat,[["render",oat],["__file","/app/app/javascript/dashboard/routes/dashboard/conversation/contact/SocialIcons.vue"]]),iat={components:{NextButton:Se,Avatar:qt},props:{contact:{type:Object,default:()=>({})},inProgress:{type:Boolean,default:!1},onSubmit:{type:Function,default:()=>{}}},emits:["cancel","success"],setup(){return{v$:rt()}},data(){return{countries:rs,companyName:"",description:"",email:"",name:"",phoneNumber:"",activeDialCode:"",avatarFile:null,avatarUrl:"",country:{id:"",name:""},city:"",socialProfileUserNames:{facebook:"",twitter:"",linkedin:"",github:""},socialProfileKeys:[{key:"facebook",prefixURL:"https://facebook.com/"},{key:"twitter",prefixURL:"https://twitter.com/"},{key:"linkedin",prefixURL:"https://linkedin.com/"},{key:"github",prefixURL:"https://github.com/"}]}},validations:{name:{required:Ge},description:{},email:{email:br},companyName:{},phoneNumber:{},bio:{}},computed:{parsePhoneNumber(){return ku(this.phoneNumber)},isPhoneNumberNotValid(){return this.phoneNumber!==""?!sT(this.phoneNumber,this.activeDialCode)||(this.phoneNumber!==""?this.activeDialCode==="":!1):!1},phoneNumberError(){return this.activeDialCode===""?this.$t("CONTACT_FORM.FORM.PHONE_NUMBER.DIAL_CODE_ERROR"):sT(this.phoneNumber,this.activeDialCode)?"":this.$t("CONTACT_FORM.FORM.PHONE_NUMBER.ERROR")},setPhoneNumber(){return this.parsePhoneNumber&&this.parsePhoneNumber.countryCallingCode?this.phoneNumber:this.phoneNumber===""&&this.activeDialCode!==""?"":this.activeDialCode?`${this.activeDialCode}${this.phoneNumber}`:""}},watch:{contact(){this.setContactObject()}},mounted(){this.setContactObject(),this.setDialCode()},methods:{onCancel(){this.$emit("cancel")},onSuccess(){this.$emit("success")},countryNameWithCode({name:t,id:n}){return n?!t&&!n?"":`${t} (${n})`:t},setDialCode(){if(this.phoneNumber!==""&&this.parsePhoneNumber&&this.parsePhoneNumber.countryCallingCode){const t=this.parsePhoneNumber.countryCallingCode;this.activeDialCode=`+${t}`}},setContactObject(){const{email:t,phone_number:n,name:a}=this.contact,e=this.contact.additional_attributes||{};this.name=a||"",this.email=t||"",this.phoneNumber=n||"",this.companyName=e.company_name||"",this.country={id:e.country_code||"",name:e.country||this.$t("CONTACT_FORM.FORM.COUNTRY.SELECT_COUNTRY")},this.city=e.city||"",this.description=e.description||"",this.avatarUrl=this.contact.thumbnail||"";const{social_profiles:s={},screen_name:r}=e;this.socialProfileUserNames={twitter:s.twitter||r||"",facebook:s.facebook||"",linkedin:s.linkedin||"",github:s.github||"",instagram:s.instagram||""}},getContactObject(){this.country===null&&(this.country={id:"",name:""});const t={id:this.contact.id,name:this.name,email:this.email,phone_number:this.setPhoneNumber,additional_attributes:{...this.contact.additional_attributes,description:this.description,company_name:this.companyName,country_code:this.country.id,country:this.country.name===this.$t("CONTACT_FORM.FORM.COUNTRY.SELECT_COUNTRY")?"":this.country.name,city:this.city,social_profiles:this.socialProfileUserNames}};return this.avatarFile&&(t.avatar=this.avatarFile,t.isFormData=!0),t},setPhoneCode(t){if(this.phoneNumber!==""&&this.parsePhoneNumber){const n=this.parsePhoneNumber.countryCallingCode;if(n===t)return;this.activeDialCode=`+${n}`;const a=this.phoneNumber.replace(`+${n}`,`${t}`);this.phoneNumber=a}else this.activeDialCode=t},async handleSubmit(){if(this.v$.$touch(),!(this.v$.$invalid||this.isPhoneNumberNotValid))try{await this.onSubmit(this.getContactObject()),this.onSuccess(),Z(this.$t("CONTACT_FORM.SUCCESS_MESSAGE"))}catch(t){t instanceof Bl?t.data.includes("email")?Z(this.$t("CONTACT_FORM.FORM.EMAIL_ADDRESS.DUPLICATE")):t.data.includes("phone_number")&&Z(this.$t("CONTACT_FORM.FORM.PHONE_NUMBER.DUPLICATE")):t instanceof Xr?Z(t.data):Z(this.$t("CONTACT_FORM.ERROR_MESSAGE"))}},handleImageUpload({file:t,url:n}){this.avatarFile=t,this.avatarUrl=n},async handleAvatarDelete(){try{this.contact&&this.contact.id&&(await this.$store.dispatch("contacts/deleteAvatar",this.contact.id),Z(this.$t("CONTACT_FORM.DELETE_AVATAR.API.SUCCESS_MESSAGE"))),this.avatarFile=null,this.avatarUrl="",this.activeDialCode=""}catch(t){Z(t.message?t.message:this.$t("CONTACT_FORM.DELETE_AVATAR.API.ERROR_MESSAGE"))}}}},lat={class:"flex flex-col mb-4 items-start gap-1 w-full"},cat={class:"mb-0.5 text-sm font-medium text-n-slate-12"},dat={class:"w-full"},uat=["placeholder"],pat=["placeholder"],fat={key:0,class:"message"},mat={class:"w-full"},hat=["placeholder"],_at={class:"w-full"},gat={key:0,class:"message"},bat={key:0,class:"relative mx-0 mt-0 mb-2.5 p-2 rounded-md text-sm border border-solid border-n-amber-5 text-n-amber-12 bg-n-amber-3"},vat={class:"w-full"},Eat={class:"w-full"},Sat={class:"flex items-center h-10 px-2 text-sm border-solid border-y ltr:border-l rtl:border-r ltr:rounded-l-md rtl:rounded-r-md bg-n-solid-3 text-n-slate-11 border-n-weak"},Tat=["onUpdate:modelValue"],Aat={class:"flex flex-row justify-start w-full gap-2 px-0 py-2"};function yat(t,n,a,e,s,r){const o=H("Avatar"),i=H("woot-phone-input"),l=H("woot-input"),c=H("multiselect"),d=H("NextButton");return p(),g("form",{class:"w-full px-8 pt-6 pb-8 contact--form",onSubmit:n[10]||(n[10]=Ve((...u)=>r.handleSubmit&&r.handleSubmit(...u),["prevent"]))},[f("div",lat,[f("label",cat,C(t.$t("CONTACT_FORM.FORM.AVATAR.LABEL")),1),v(o,{src:s.avatarUrl,size:72,name:a.contact.name,"allow-upload":"","rounded-full":"",onUpload:r.handleImageUpload,onDelete:r.handleAvatarDelete},null,8,["src","name","onUpload","onDelete"])]),f("div",null,[f("div",dat,[f("label",{class:oe({error:e.v$.name.$error})},[Oe(C(t.$t("CONTACT_FORM.FORM.NAME.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[0]||(n[0]=u=>s.name=u),type:"text",placeholder:t.$t("CONTACT_FORM.FORM.NAME.PLACEHOLDER"),onInput:n[1]||(n[1]=(...u)=>e.v$.name.$touch&&e.v$.name.$touch(...u))},null,40,uat),[[Et,s.name]])],2),f("label",{class:oe({error:e.v$.email.$error})},[Oe(C(t.$t("CONTACT_FORM.FORM.EMAIL_ADDRESS.LABEL"))+" ",1),ce(f("input",{"onUpdate:modelValue":n[2]||(n[2]=u=>s.email=u),type:"text",placeholder:t.$t("CONTACT_FORM.FORM.EMAIL_ADDRESS.PLACEHOLDER"),onInput:n[3]||(n[3]=(...u)=>e.v$.email.$touch&&e.v$.email.$touch(...u))},null,40,pat),[[Et,s.email]]),e.v$.email.$error?(p(),g("span",fat,C(t.$t("CONTACT_FORM.FORM.EMAIL_ADDRESS.ERROR")),1)):O("v-if",!0)],2)])]),f("div",mat,[f("label",{class:oe({error:e.v$.description.$error})},[Oe(C(t.$t("CONTACT_FORM.FORM.BIO.LABEL"))+" ",1),ce(f("textarea",{"onUpdate:modelValue":n[4]||(n[4]=u=>s.description=u),type:"text",placeholder:t.$t("CONTACT_FORM.FORM.BIO.PLACEHOLDER"),onInput:n[5]||(n[5]=(...u)=>e.v$.description.$touch&&e.v$.description.$touch(...u))},null,40,hat),[[Et,s.description]])],2)]),f("div",null,[f("div",_at,[f("label",{class:oe({error:r.isPhoneNumberNotValid})},[Oe(C(t.$t("CONTACT_FORM.FORM.PHONE_NUMBER.LABEL"))+" ",1),v(i,{modelValue:s.phoneNumber,"onUpdate:modelValue":n[6]||(n[6]=u=>s.phoneNumber=u),value:s.phoneNumber,error:r.isPhoneNumberNotValid,placeholder:t.$t("CONTACT_FORM.FORM.PHONE_NUMBER.PLACEHOLDER"),onBlur:e.v$.phoneNumber.$touch,onSetCode:r.setPhoneCode},null,8,["modelValue","value","error","placeholder","onBlur","onSetCode"]),r.isPhoneNumberNotValid?(p(),g("span",gat,C(r.phoneNumberError),1)):O("v-if",!0)],2),r.isPhoneNumberNotValid||!s.phoneNumber?(p(),g("div",bat,C(t.$t("CONTACT_FORM.FORM.PHONE_NUMBER.HELP")),1)):O("v-if",!0)])]),v(l,{modelValue:s.companyName,"onUpdate:modelValue":n[7]||(n[7]=u=>s.companyName=u),class:"w-full",label:t.$t("CONTACT_FORM.FORM.COMPANY_NAME.LABEL"),placeholder:t.$t("CONTACT_FORM.FORM.COMPANY_NAME.PLACEHOLDER")},null,8,["modelValue","label","placeholder"]),f("div",null,[f("div",vat,[f("label",null,C(t.$t("CONTACT_FORM.FORM.COUNTRY.LABEL")),1),v(c,{modelValue:s.country,"onUpdate:modelValue":n[8]||(n[8]=u=>s.country=u),"track-by":"id",label:"name",placeholder:t.$t("CONTACT_FORM.FORM.COUNTRY.PLACEHOLDER"),"selected-label":"","select-label":t.$t("CONTACT_FORM.FORM.COUNTRY.SELECT_PLACEHOLDER"),"deselect-label":t.$t("CONTACT_FORM.FORM.COUNTRY.REMOVE"),"custom-label":r.countryNameWithCode,"max-height":160,options:s.countries,"allow-empty":"","option-height":104},null,8,["modelValue","placeholder","select-label","deselect-label","custom-label","options"])])]),v(l,{modelValue:s.city,"onUpdate:modelValue":n[9]||(n[9]=u=>s.city=u),class:"w-full",label:t.$t("CONTACT_FORM.FORM.CITY.LABEL"),placeholder:t.$t("CONTACT_FORM.FORM.CITY.PLACEHOLDER")},null,8,["modelValue","label","placeholder"]),f("div",Eat,[f("label",null,C(t.$t("CONTACTS_PAGE.LIST.TABLE_HEADER.SOCIAL_PROFILES")),1),(p(!0),g(de,null,Ae(s.socialProfileKeys,u=>(p(),g("div",{key:u.key,class:"flex items-stretch w-full mb-4"},[f("span",Sat,C(u.prefixURL),1),ce(f("input",{"onUpdate:modelValue":m=>s.socialProfileUserNames[u.key]=m,class:"input-group-field ltr:!rounded-l-none rtl:!rounded-r-none !mb-0",type:"text"},null,8,Tat),[[Et,s.socialProfileUserNames[u.key]]])]))),128))]),f("div",Aat,[v(d,{type:"submit",label:t.$t("CONTACT_FORM.FORM.SUBMIT"),"is-loading":a.inProgress},null,8,["label","is-loading"]),v(d,{faded:"",slate:"",type:"reset",label:t.$t("CONTACT_FORM.FORM.CANCEL"),onClick:Ve(r.onCancel,["prevent"])},null,8,["label","onClick"])])],32)}const Iat=G(iat,[["render",yat],["__scopeId","data-v-4ee9f635"],["__file","/app/app/javascript/dashboard/routes/dashboard/conversation/contact/ContactForm.vue"]]),Cat={components:{ContactForm:Iat},props:{show:{type:Boolean,default:!1},contact:{type:Object,default:()=>({})}},emits:["cancel","update:show"],computed:{..._t({uiFlags:"contacts/getUIFlags"}),localShow:{get(){return this.show},set(t){this.$emit("update:show",t)}}},methods:{onCancel(){this.$emit("cancel")},onSuccess(){this.$emit("cancel")},async onSubmit(t){await this.$store.dispatch("contacts/update",t),await this.$store.dispatch("contacts/fetchContactableInbox",this.contact.id)}}},Oat={class:"flex flex-col h-auto overflow-auto"};function Nat(t,n,a,e,s,r){const o=H("woot-modal-header"),i=H("ContactForm"),l=H("woot-modal");return p(),L(l,{show:r.localShow,"onUpdate:show":n[0]||(n[0]=c=>r.localShow=c),"on-close":r.onCancel,"modal-type":"right-aligned"},{default:z(()=>[f("div",Oat,[v(o,{"header-title":`${t.$t("EDIT_CONTACT.TITLE")} - ${a.contact.name||a.contact.email}`,"header-content":t.$t("EDIT_CONTACT.DESC")},null,8,["header-title","header-content"]),v(i,{contact:a.contact,"in-progress":t.uiFlags.isUpdating,"on-submit":r.onSubmit,onSuccess:r.onSuccess,onCancel:r.onCancel},null,8,["contact","in-progress","on-submit","onSuccess","onCancel"])])]),_:1},8,["show","on-close"])}const xat=G(Cat,[["render",Nat],["__file","/app/app/javascript/dashboard/routes/dashboard/conversation/contact/EditContact.vue"]]),Rat={props:{primaryContactName:{type:String,default:""},parentContactName:{type:String,default:""}}},wat={key:0,class:"my-4 relative p-2.5 border rounded-[4px] text-n-slate-12 border-n-weak bg-n-background"},Mat={class:"text-base font-medium text-n-slate-12"},Lat={class:"ml-0 list-none"};function Dat(t,n,a,e,s,r){const o=nt("dompurify-html");return a.parentContactName?(p(),g("div",wat,[f("h5",Mat,C(t.$t("MERGE_CONTACTS.SUMMARY.TITLE")),1),f("ul",Lat,[f("li",null,[n[0]||(n[0]=f("span",{class:"inline-block mr-1"},"",-1)),ce(f("span",null,null,512),[[o,t.$t("MERGE_CONTACTS.SUMMARY.DELETE_WARNING",{primaryContactName:a.primaryContactName})]])]),f("li",null,[n[1]||(n[1]=f("span",{class:"inline-block mr-1"},"",-1)),ce(f("span",null,null,512),[[o,t.$t("MERGE_CONTACTS.SUMMARY.ATTRIBUTE_WARNING",{primaryContactName:a.primaryContactName,parentContactName:a.parentContactName})]])])])])):O("v-if",!0)}const Pat=G(Rat,[["render",Dat],["__file","/app/app/javascript/dashboard/modules/contact/components/MergeContactSummary.vue"]]),kat={__name:"ContactDropdownItem",props:{name:{type:String,default:""},thumbnail:{type:String,default:""},email:{type:String,default:""},phoneNumber:{type:String,default:""},identifier:{type:[String,Number],required:!0}},setup(t,{expose:n}){n();const a={Avatar:qt};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},Bat={class:"option-item--user"},Fat={class:"option__user-data"},Uat={class:"option__title"},$at={key:0,class:"user-identifier"},Gat={class:"option__body"},Vat={key:0,class:"email-icon-wrap"},Hat={key:1,class:"phone-icon-wrap"},jat={key:2};function Wat(t,n,a,e,s,r){const o=H("fluent-icon");return p(),g("div",Bat,[v(e.Avatar,{src:a.thumbnail,size:28,name:a.name,"rounded-full":""},null,8,["src","name"]),f("div",Fat,[f("h5",Uat,[Oe(C(a.name)+" ",1),a.identifier?(p(),g("span",$at,C(t.$t("MERGE_CONTACTS.DROPDOWN_ITEM.ID",{identifier:a.identifier})),1)):O("v-if",!0)]),f("p",Gat,[a.email?(p(),g("span",Vat,[v(o,{class:"merge-contact--icon",icon:"mail",size:"12"}),Oe(" "+C(a.email),1)])):O("v-if",!0),a.phoneNumber?(p(),g("span",Hat,[v(o,{class:"merge-contact--icon",icon:"call",size:"12"}),Oe(" "+C(a.phoneNumber),1)])):O("v-if",!0),!a.phoneNumber&&!a.email?(p(),g("span",jat,C("---"))):O("v-if",!0)])])])}const zat=G(kat,[["render",Wat],["__scopeId","data-v-cdbead35"],["__file","/app/app/javascript/dashboard/modules/contact/components/ContactDropdownItem.vue"]]),Yat={components:{MergeContactSummary:Pat,ContactDropdownItem:zat,NextButton:Se},props:{primaryContact:{type:Object,required:!0},isSearching:{type:Boolean,default:!1},isMerging:{type:Boolean,default:!1},searchResults:{type:Array,default:()=>[]}},emits:["search","submit","cancel"],setup(){return{v$:rt()}},validations:{primaryContact:{required:Ge},parentContact:{required:Ge}},data(){return{parentContact:void 0}},computed:{parentContactName(){return this.parentContact?this.parentContact.name:""}},methods:{searchChange(t){this.$emit("search",t)},onSubmit(){this.v$.$touch(),!this.v$.$invalid&&this.$emit("submit",this.parentContact.id)},onCancel(){this.$emit("cancel")}}},Kat={class:"multiselect__label"},Xat={key:0,class:"message"},qat={class:"flex multiselect-wrap--medium"},Zat={class:"w-8 relative text-base text-n-strong after:content-[''] after:h-12 after:w-0 ltr:after:left-4 rtl:after:right-4 after:absolute after:border-l after:border-solid after:border-n-strong before:content-[''] before:h-0 before:w-4 ltr:before:left-4 rtl:before:right-4 before:top-12 before:absolute before:border-b before:border-solid before:border-n-strong"},Qat={class:"flex flex-col w-full ltr:pl-8 rtl:pr-8"},Jat={class:"multiselect__label"},est={class:"flex justify-end gap-2 mt-6"};function tst(t,n,a,e,s,r){const o=H("woot-label"),i=H("ContactDropdownItem"),l=H("multiselect"),c=H("fluent-icon"),d=H("MergeContactSummary"),u=H("NextButton");return p(),g("form",{onSubmit:n[1]||(n[1]=Ve((...m)=>r.onSubmit&&r.onSubmit(...m),["prevent"]))},[f("div",null,[f("div",null,[f("div",{class:oe(["mt-1 multiselect-wrap--medium",{error:e.v$.parentContact.$error}])},[f("label",Kat,[Oe(C(t.$t("MERGE_CONTACTS.PARENT.TITLE"))+" ",1),v(o,{title:t.$t("MERGE_CONTACTS.PARENT.HELP_LABEL"),"color-scheme":"success",small:"",class:"ml-2"},null,8,["title"])]),v(l,{modelValue:s.parentContact,"onUpdate:modelValue":n[0]||(n[0]=m=>s.parentContact=m),options:a.searchResults,label:"name","track-by":"id","internal-search":!1,"clear-on-select":!1,"show-labels":!1,placeholder:t.$t("MERGE_CONTACTS.PARENT.PLACEHOLDER"),"allow-empty":"",loading:a.isSearching,"max-height":150,"open-direction":"top",onSearchChange:r.searchChange},{singleLabel:z(m=>[v(i,{thumbnail:m.option.thumbnail,identifier:m.option.id,name:m.option.name,email:m.option.email,"phone-number":m.option.phone_number},null,8,["thumbnail","identifier","name","email","phone-number"])]),option:z(m=>[v(i,{thumbnail:m.option.thumbnail,identifier:m.option.id,name:m.option.name,email:m.option.email,"phone-number":m.option.phone_number},null,8,["thumbnail","identifier","name","email","phone-number"])]),noResult:z(()=>[f("span",null,C(t.$t("AGENT_MGMT.SEARCH.NO_RESULTS")),1)]),_:1},8,["modelValue","options","placeholder","loading","onSearchChange"]),e.v$.parentContact.$error?(p(),g("span",Xat,C(t.$t("MERGE_CONTACTS.FORM.CHILD_CONTACT.ERROR")),1)):O("v-if",!0)],2)]),f("div",qat,[f("div",Zat,[v(c,{icon:"arrow-up",class:"absolute -top-1 ltr:left-2 rtl:right-2",size:"17"})]),f("div",Qat,[f("label",Jat,[Oe(C(t.$t("MERGE_CONTACTS.PRIMARY.TITLE"))+" ",1),v(o,{title:t.$t("MERGE_CONTACTS.PRIMARY.HELP_LABEL"),"color-scheme":"alert",small:"",class:"ml-2"},null,8,["title"])]),v(l,{"model-value":a.primaryContact,disabled:"",options:[],"show-labels":!1,label:"name","track-by":"id"},{singleLabel:z(m=>[v(i,{thumbnail:m.option.thumbnail,name:m.option.name,identifier:m.option.id,email:m.option.email,"phone-number":m.option.phoneNumber},null,8,["thumbnail","name","identifier","email","phone-number"])]),_:1},8,["model-value"])])])]),v(d,{"primary-contact-name":a.primaryContact.name,"parent-contact-name":r.parentContactName},null,8,["primary-contact-name","parent-contact-name"]),f("div",est,[v(u,{faded:"",slate:"",type:"reset",label:t.$t("MERGE_CONTACTS.FORM.CANCEL"),onClick:Ve(r.onCancel,["prevent"])},null,8,["label","onClick"]),v(u,{type:"submit","is-loading":a.isMerging,label:t.$t("MERGE_CONTACTS.FORM.SUBMIT")},null,8,["is-loading","label"])])],32)}const nst=G(Yat,[["render",tst],["__scopeId","data-v-6422ebc4"],["__file","/app/app/javascript/dashboard/modules/contact/components/MergeContact.vue"]]),ast={components:{MergeContact:nst},props:{show:{type:Boolean,default:!1},primaryContact:{type:Object,required:!0}},emits:["close","update:show"],data(){return{isSearching:!1,searchResults:[]}},computed:{..._t({uiFlags:"contacts/getUIFlags"}),localShow:{get(){return this.show},set(t){this.$emit("update:show",t)}}},methods:{onClose(){this.$emit("close")},async onContactSearch(t){this.isSearching=!0,this.searchResults=[];try{const{data:{payload:n}}=await Xc.search(t);this.searchResults=n.filter(a=>a.id!==this.primaryContact.id)}catch{Z(this.$t("MERGE_CONTACTS.SEARCH.ERROR_MESSAGE"))}finally{this.isSearching=!1}},async onMergeContacts(t){Nt(hr.MERGED_CONTACTS);try{await this.$store.dispatch("contacts/merge",{childId:this.primaryContact.id,parentId:t}),Z(this.$t("MERGE_CONTACTS.FORM.SUCCESS_MESSAGE")),this.onClose()}catch{Z(this.$t("MERGE_CONTACTS.FORM.ERROR_MESSAGE"))}}}};function sst(t,n,a,e,s,r){const o=H("woot-modal-header"),i=H("MergeContact"),l=H("woot-modal");return p(),L(l,{show:r.localShow,"onUpdate:show":n[0]||(n[0]=c=>r.localShow=c),"on-close":r.onClose},{default:z(()=>[v(o,{"header-title":t.$t("MERGE_CONTACTS.TITLE"),"header-content":t.$t("MERGE_CONTACTS.DESCRIPTION")},null,8,["header-title","header-content"]),v(i,{"primary-contact":a.primaryContact,"is-searching":s.isSearching,"is-merging":t.uiFlags.isMerging,"search-results":s.searchResults,onSearch:r.onContactSearch,onCancel:r.onClose,onSubmit:r.onMergeContacts},null,8,["primary-contact","is-searching","is-merging","search-results","onSearch","onCancel","onSubmit"])]),_:1},8,["show","on-close"])}const ost=G(ast,[["render",sst],["__file","/app/app/javascript/dashboard/modules/contact/ContactMergeModal.vue"]]),gN={"Channel::Email":1,"Channel::Whatsapp":2,"Channel::Sms":3,"Channel::TwilioSms":4,"Channel::WebWidget":5,"Channel::Api":6},uE=({name:t,email:n,channelType:a,phoneNumber:e})=>a===ht.EMAIL?`${t} (${n})`:(a===ht.TWILIO||a===ht.WHATSAPP)&&e?`${t} (${e})`:t,rst=({name:t,id:n,email:a,channelType:e,phoneNumber:s,medium:r,...o})=>({id:n,icon:vs(e,r,"line"),label:uE({name:t,email:a,channelType:e,phoneNumber:s}),action:"inbox",value:n,name:t,email:a,phoneNumber:s,channelType:e,medium:r,...o}),ist=(t,n)=>{const a=gN[t.channelType]||999,e=gN[n.channelType]||999;if(a!==e)return a-e;const s=t.name||"",r=n.name||"";return s.localeCompare(r)},bN=t=>t?t.map(rst).sort(ist):[],lst=t=>{var a;const n=((a=t.match(/^([^@]*)@/))==null?void 0:a[1])||t.split("@")[0];return n.charAt(0).toUpperCase()+n.slice(1)},pE=t=>t.map(n=>({...n.inbox,sourceId:n.sourceId})),Vb=(t,n=[])=>!t||!t.length?[]:t.map(a=>{const e=n.find(s=>s.id===a.id)||{};return{...Di(e,{deep:!0}),...a}}),cst=(t,n)=>{const a=[];return t.forEach(e=>{n?a.push(e.blobSignedId):a.push(e.resource.file)}),a},vN=({targetInbox:t,selectedContact:n,message:a,subject:e,ccEmails:s,bccEmails:r,currentUser:o,attachedFiles:i=[],directUploadsEnabled:l=!1})=>{const c={inboxId:t.id,sourceId:t.sourceId,contactId:Number(n.id),message:{content:a},assigneeId:o.id};return i!=null&&i.length&&(c.files=cst(i,l)),e&&(c.mailSubject=e),s&&(c.message.cc_emails=s),r&&(c.message.bcc_emails=r),c},Hb=({targetInbox:t,selectedContact:n,message:a,templateParams:e,currentUser:s})=>({inboxId:t.id,sourceId:t.sourceId,contactId:n.id,message:{content:a,template_params:e},assigneeId:s.id}),dst=({keys:t=["email"],query:n})=>({payload:t.map(a=>{const e={attribute_key:a,filter_operator:"contains",values:[n],attribute_model:"standard"};return t.findIndex(s=>s===a)!==t.length-1&&(e.query_operator="or"),e})}),EN=async({keys:t,query:n})=>{const{data:{payload:a}}=await Xc.filter(void 0,"name",dst({keys:t,query:n})),e=Di(a,{deep:!0});return(e==null?void 0:e.filter(r=>r.phoneNumber||r.email))||[]},SN=async t=>{const n={name:t.startsWith("+")?t.slice(1):lst(t),...t.startsWith("+")?{phone_number:t}:{email:t}},{data:{payload:{contact:a}}}=await Xc.create(n);return Di(a,{deep:!0})},TN=async t=>{const{data:{payload:n=[]}}=await Xc.getContactableInboxes(t),a=Di(n,{deep:!0});return pE(a)},Pr={SINGLE:"single",MULTIPLE:"multiple"},xs={EMAIL:"email",TEL:"tel",TEXT:"text"},QD=t=>{if(!t)return!0;try{return q9(t)}catch{return!1}},ust=t=>{try{const n=X9(t);return{isValid:(n==null?void 0:n.isValid())||!1,formattedValue:(n==null?void 0:n.formatInternational())||t}}catch{return{isValid:!1,formattedValue:t}}},AN=t=>({newTag:{...t===xs.EMAIL?{email:br}:{},...t===xs.TEL?{isValidPhone:QD}:{}}}),yN=(t,n,a)=>t===xs.TEL?!QD(n):a.$invalid,pst=(t,n,a)=>{let e=!0,s=t;if(n===xs.EMAIL)e=!a;else if(n===xs.TEL){const{isValid:r,formattedValue:o}=ust(t);e=r,s=o}return{isValid:e,formattedValue:s}},fst=(t,n,a)=>({label:t,value:n,...a===xs.EMAIL?{email:n}:{},...a===xs.TEL?{phoneNumber:n}:{},thumbnail:{name:t,src:""},action:"create"}),IN=({mode:t,tags:n,menuItems:a,newTag:e,isLoading:s,type:r,isNewTagInValidType:o})=>{if(t===Pr.SINGLE&&n.length>=1)return[];const i=a.filter(d=>!n.includes(d.label)),l=e==null?void 0:e.trim();if(l&&!n.includes(l)&&!s&&!i.length){const{isValid:d,formattedValue:u}=pst(l,r,o);if(d)return[fst(u,l,r)]}return i},CN=(t,n)=>!(t===Pr.SINGLE&&n>=1),ON=(t,n)=>t.find(a=>a.email===n),mst={__name:"InlineInput",props:an({type:{type:String,default:"text"},customInputClass:{type:[String,Object,Array],default:""},customLabelClass:{type:[String,Object,Array],default:""},placeholder:{type:String,default:""},label:{type:String,default:""},id:{type:String,default:""},disabled:{type:Boolean,default:!1},focusOnMount:{type:Boolean,default:!1}},{modelValue:{type:[String,Number],default:""},modelModifiers:{}}),emits:an(["enterPress","input","blur","focus"],["update:modelValue"]),setup(t,{expose:n,emit:a}){const e=t,s=a,r=dn(t,"modelValue"),o=P(null),i=()=>{s("enterPress")},l=m=>{s("input",m.target.value),r.value=m.target.value},c=m=>{s("blur",m.target.value)},d=m=>{s("focus",m.target.value)};Pe(()=>{At(()=>{var m;e.focusOnMount&&((m=o.value)==null||m.focus())})}),n({focus:()=>{var m;return(m=o.value)==null?void 0:m.focus()}});const u={props:e,emit:s,modelValue:r,inlineInputRef:o,onEnterPress:i,handleInput:l,handleBlur:c,handleFocus:d,ref:P,onMounted:Pe,nextTick:At};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}},hst={class:"relative flex items-center justify-between w-full gap-3 whitespace-nowrap"},_st=["for"],gst=["id","type","placeholder","disabled","onKeydown"];function bst(t,n,a,e,s,r){return p(),g("div",hst,[a.label?(p(),g("label",{key:0,for:a.id,class:oe([a.customLabelClass,"mb-0.5 text-sm font-medium text-n-slate-12"])},C(a.label),11,_st)):O("v-if",!0),O(" Added prefix slot to allow adding custom labels to the input "),qe(t.$slots,"prefix"),ce(f("input",{id:a.id,ref:"inlineInputRef","onUpdate:modelValue":n[0]||(n[0]=o=>e.modelValue=o),type:a.type,placeholder:a.placeholder,disabled:a.disabled,class:oe([a.customInputClass,"flex w-full reset-base text-sm h-6 !mb-0 border-0 rounded-none outline-none outline-0 bg-transparent dark:bg-transparent placeholder:text-n-slate-10 dark:placeholder:text-n-slate-10 disabled:cursor-not-allowed disabled:opacity-50 text-n-slate-12 dark:text-n-slate-12 transition-all duration-500 ease-in-out"]),onInput:e.handleInput,onFocus:e.handleFocus,onBlur:e.handleBlur,onKeydown:Vn(Ve(e.onEnterPress,["prevent"]),["enter"])},null,42,gst),[[c2,e.modelValue]])])}const gp=G(mst,[["render",bst],["__file","/app/app/javascript/dashboard/components-next/inline-input/InlineInput.vue"]]),vst={__name:"TagInput",props:an({placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},type:{type:String,default:xs.TEXT},isLoading:{type:Boolean,default:!1},menuItems:{type:Array,default:()=>[],validator:t=>t.every(({action:n,value:a,label:e})=>n&&a&&e)},showDropdown:{type:Boolean,default:!1},mode:{type:String,default:Pr.MULTIPLE,validator:t=>[Pr.SINGLE,Pr.MULTIPLE].includes(t)},focusOnMount:{type:Boolean,default:!1},allowCreate:{type:Boolean,default:!1}},{modelValue:{type:Array,default:()=>[]},modelModifiers:{}}),emits:an(["update:modelValue","input","blur","focus","onClickOutside","add","remove"],["update:modelValue"]),setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=dn(t,"modelValue"),o=P(null),i=P(e.modelValue),l=P(""),c=P(!0),d=S(()=>AN(e.type)),u=rt(d,{newTag:l}),m=S(()=>yN(e.type,l.value,u.value)),h=S(()=>e.mode===Pr.SINGLE?c.value&&!i.value.length:c.value||!i.value.length),_=S(()=>e.mode===Pr.SINGLE&&i.value.length>=1?!1:e.showDropdown),E=S(()=>IN({mode:e.mode,tags:i.value,menuItems:e.menuItems,newTag:l.value,isLoading:e.isLoading,type:e.type,isNewTagInValidType:m.value})),y=B=>{const k=ON(e.menuItems,B);return k?s("add",{value:B,...k}):s("add",{value:B,action:"create"})},b=B=>{var k;i.value.push(B),l.value="",r.value=i.value,(k=o.value)==null||k.focus()},A=async()=>{var k;const B=(k=l.value)==null?void 0:k.trim();if(B){if(!CN(e.mode,i.value.length)){l.value="";return}if([xs.EMAIL,xs.TEL].includes(e.type)||e.allowCreate){if(!await u.value.$validate())return;y(B)}b(B)}},T=B=>{i.value.splice(B,1),r.value=i.value,s("remove")},I=async({email:B,phoneNumber:k,...V})=>{if(e.mode===Pr.SINGLE&&i.value.length>=1||!e.showDropdown)return;const F=e.type==="email";if(l.value=F?B:k,!await u.value.$validate())return;const $=F?{email:B,...V}:{phoneNumber:k,...V};s("add",$),b(B)},N=()=>{var B;s("focus"),(B=o.value)==null||B.focus(),c.value=!0},x=B=>{B.key===","&&(B.preventDefault(),A())},R=()=>{i.value.length&&(c.value=!1),s("onClickOutside")};je(()=>e.modelValue,B=>{i.value=B}),je(()=>l.value,async B=>{var k;e.type==="email"&&((k=B==null?void 0:B.trim())==null?void 0:k.length)>2&&await u.value.$validate()});const D={props:e,emit:s,modelValue:r,tagInputRef:o,tags:i,newTag:l,isFocused:c,rules:d,v$:u,isNewTagInValidType:m,showInput:h,showDropdownMenu:_,filteredMenuItems:E,emitDataOnAdd:y,updateValueAndFocus:b,addTag:A,removeTag:T,handleDropdownAction:I,handleFocus:N,handleKeydown:x,handleClickOutside:R,handleInput:B=>s("input",B),handleBlur:B=>s("blur",B),ref:P,computed:S,watch:je,get vOnClickOutside(){return Ga},get useVuelidate(){return rt},InlineInput:gp,DropdownMenu:ds,get MODE(){return Pr},get INPUT_TYPES(){return xs},get getValidationRules(){return AN},get checkTagTypeValidity(){return yN},get buildTagMenuItems(){return IN},get canAddTag(){return CN},get findMatchingMenuItem(){return ON}};return Object.defineProperty(D,"__isScriptSetup",{enumerable:!1,value:!0}),D}},Est={class:"flex-grow min-w-0 text-sm truncate text-n-slate-12"},Sst=["onClick"],Tst={key:0,class:"relative flex items-center gap-2 flex-1 min-w-[200px] w-full"};function Ast(t,n,a,e,s,r){return ce((p(),g("div",{class:"flex flex-wrap w-full gap-2 border border-transparent focus:outline-none",tabindex:"0",onFocus:e.handleFocus,onClick:e.handleFocus},[(p(!0),g(de,null,Ae(e.tags,(o,i)=>(p(),g("div",{key:i,class:"flex items-center justify-center max-w-full gap-1 px-3 py-1 rounded-lg h-7 bg-n-alpha-2"},[f("span",Est,C(o),1),f("span",{class:"flex-shrink-0 cursor-pointer i-lucide-x size-3.5 text-n-slate-11",onClick:Ve(l=>e.removeTag(i),["stop"])},null,8,Sst)]))),128)),e.showInput||e.showDropdownMenu?(p(),g("div",Tst,[v(e.InlineInput,{ref:"tagInputRef",modelValue:e.newTag,"onUpdate:modelValue":n[0]||(n[0]=o=>e.newTag=o),placeholder:a.placeholder,disabled:a.disabled,class:"w-full","focus-on-mount":a.focusOnMount,"custom-input-class":`w-full ${e.isNewTagInValidType?"!text-n-ruby-9 dark:!text-n-ruby-9":""}`,onEnterPress:e.addTag,onFocus:e.handleFocus,onInput:e.handleInput,onBlur:e.handleBlur,onKeydown:e.handleKeydown},null,8,["modelValue","placeholder","disabled","focus-on-mount","custom-input-class"]),e.showDropdownMenu?(p(),L(e.DropdownMenu,{key:0,"menu-items":e.filteredMenuItems,"is-searching":a.isLoading,class:"ltr:left-0 rtl:right-0 z-[100] top-8 overflow-y-auto max-h-60 w-[inherit] max-w-md dark:!outline-n-slate-5",onAction:e.handleDropdownAction},null,8,["menu-items","is-searching"])):O("v-if",!0)])):O("v-if",!0)],32)),[[e.vOnClickOutside,()=>e.handleClickOutside()]])}const JD=G(vst,[["render",Ast],["__file","/app/app/javascript/dashboard/components-next/taginput/TagInput.vue"]]),yst="COMPOSE_NEW_CONVERSATION.FORM.CONTACT_SELECTOR",Ist={__name:"ContactSelector",props:{contacts:{type:Array,required:!0},selectedContact:{type:Object,default:null},showContactsDropdown:{type:Boolean,required:!0},isLoading:{type:Boolean,required:!0},isCreatingContact:{type:Boolean,required:!0},contactId:{type:String,default:null},contactableInboxesList:{type:Array,default:()=>[]},showInboxesDropdown:{type:Boolean,required:!0},hasErrors:{type:Boolean,default:!1}},emits:["searchContacts","setSelectedContact","clearSelectedContact","updateDropdown"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=P(xs.EMAIL),i=S(()=>{var m;return(m=e.contacts)==null?void 0:m.map(({name:h,id:_,thumbnail:E,email:y,...b})=>({id:_,label:y?`${h} (${y})`:h,value:_,thumbnail:{name:h,src:E},...b,name:h,email:y,action:"contact"}))}),l=S(()=>{const{name:m,email:h="",phoneNumber:_=""}=e.selectedContact||{};return h?`${m} (${h})`:_?`${m} (${_})`:m||""}),c=S(()=>e.hasErrors?"[&_input]:placeholder:!text-n-ruby-9 [&_input]:dark:placeholder:!text-n-ruby-9":""),u={props:e,emit:s,i18nPrefix:yst,t:r,inputType:o,contactsList:i,selectedContactLabel:l,errorClass:c,handleInput:m=>{o.value=m.startsWith("+")?xs.TEL:xs.EMAIL,s("searchContacts",m)},computed:S,ref:P,get useI18n(){return Q},get INPUT_TYPES(){return xs},TagInput:JD,Button:Se};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}},Cst={class:"relative flex-1 px-4 py-3 overflow-y-visible"},Ost={class:"flex items-baseline w-full gap-3 min-h-7"},Nst={class:"text-sm font-medium text-n-slate-11 whitespace-nowrap"},xst={key:0,class:"flex items-center gap-1.5 rounded-md bg-n-alpha-2 px-3 min-h-7 min-w-0"},Rst={class:"text-sm truncate text-n-slate-12"},wst={class:"text-sm truncate text-n-slate-12"};function Mst(t,n,a,e,s,r){var o;return p(),g("div",Cst,[f("div",Ost,[f("label",Nst,C(e.t(`${e.i18nPrefix}.LABEL`)),1),a.isCreatingContact?(p(),g("div",xst,[f("span",Rst,C(e.t(`${e.i18nPrefix}.CONTACT_CREATING`)),1)])):a.selectedContact?(p(),g("div",{key:1,class:oe(["flex items-center gap-1.5 rounded-md bg-n-alpha-2 min-h-7 min-w-0",a.contactId?"px-3":"ltr:pl-3 rtl:pr-3 ltr:pr-1 rtl:pl-1"])},[f("span",wst,C(a.isCreatingContact?e.t(`${e.i18nPrefix}.CONTACT_CREATING`):e.selectedContactLabel),1),a.contactId?O("v-if",!0):(p(),L(e.Button,{key:0,variant:"ghost",icon:"i-lucide-x",color:"slate",disabled:a.contactId,size:"xs",onClick:n[0]||(n[0]=i=>e.emit("clearSelectedContact"))},null,8,["disabled"]))],2)):(p(),L(e.TagInput,{key:2,placeholder:e.t(`${e.i18nPrefix}.TAG_INPUT_PLACEHOLDER`),mode:"single","menu-items":e.contactsList,"show-dropdown":a.showContactsDropdown,"is-loading":a.isLoading,disabled:((o=a.contactableInboxesList)==null?void 0:o.length)>0&&a.showInboxesDropdown,"allow-create":"",type:e.inputType,class:oe(["flex-1 min-h-7",e.errorClass]),"focus-on-mount":"",onInput:e.handleInput,onOnClickOutside:n[1]||(n[1]=i=>e.emit("updateDropdown","contacts",!1)),onAdd:n[2]||(n[2]=i=>e.emit("setSelectedContact",i)),onRemove:n[3]||(n[3]=i=>e.emit("clearSelectedContact"))},null,8,["placeholder","menu-items","show-dropdown","is-loading","disabled","type","class"]))])])}const Lst=G(Ist,[["render",Mst],["__file","/app/app/javascript/dashboard/components-next/NewConversation/components/ContactSelector.vue"]]),Dst={__name:"InboxSelector",props:{targetInbox:{type:Object,default:null},selectedContact:{type:Object,default:null},showInboxesDropdown:{type:Boolean,required:!0},contactableInboxesList:{type:Array,default:()=>[]},hasErrors:{type:Boolean,default:!1}},emits:["updateInbox","toggleDropdown","handleInboxAction"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=S(()=>uE(e.targetInbox)),i={props:e,emit:s,t:r,targetInboxLabel:o,computed:S,get useI18n(){return Q},get vOnClickOutside(){return Ga},get generateLabelForContactableInboxesList(){return uE},Button:Se,DropdownMenu:ds};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}},Pst={class:"flex items-center flex-1 w-full gap-3 px-4 py-3 overflow-y-visible"},kst={class:"mb-0.5 text-sm font-medium text-n-slate-11 whitespace-nowrap"},Bst={key:0,class:"flex items-center gap-1.5 rounded-md bg-n-alpha-2 truncate ltr:pl-3 rtl:pr-3 ltr:pr-1 rtl:pl-1 h-7 min-w-0"},Fst={class:"text-sm truncate text-n-slate-12"},Ust={key:1,class:"relative flex items-center h-7"};function $st(t,n,a,e,s,r){var o;return p(),g("div",Pst,[f("label",kst,C(e.t("COMPOSE_NEW_CONVERSATION.FORM.INBOX_SELECTOR.LABEL")),1),a.targetInbox?(p(),g("div",Bst,[f("span",Fst,C(e.targetInboxLabel),1),v(e.Button,{variant:"ghost",icon:"i-lucide-x",color:"slate",size:"xs",class:"flex-shrink-0",onClick:n[0]||(n[0]=i=>e.emit("updateInbox",null))})])):ce((p(),g("div",Ust,[v(e.Button,{label:e.t("COMPOSE_NEW_CONVERSATION.FORM.INBOX_SELECTOR.BUTTON"),variant:"link",size:"sm",color:a.hasErrors?"ruby":"slate",disabled:!a.selectedContact,class:"hover:!no-underline",onClick:n[1]||(n[1]=i=>e.emit("toggleDropdown",!a.showInboxesDropdown))},null,8,["label","color","disabled"]),((o=a.contactableInboxesList)==null?void 0:o.length)>0&&a.showInboxesDropdown?(p(),L(e.DropdownMenu,{key:0,"menu-items":a.contactableInboxesList,class:"ltr:left-0 rtl:right-0 z-[100] top-8 overflow-y-auto max-h-60 w-fit max-w-sm dark:!outline-n-slate-5",onAction:n[2]||(n[2]=i=>e.emit("handleInboxAction",i))},null,8,["menu-items"])):O("v-if",!0)])),[[e.vOnClickOutside,()=>e.emit("toggleDropdown",!1)]])])}const Gst=G(Dst,[["render",$st],["__file","/app/app/javascript/dashboard/components-next/NewConversation/components/InboxSelector.vue"]]),Vst="COMPOSE_NEW_CONVERSATION.FORM.EMAIL_OPTIONS",Hst={__name:"EmailOptions",props:an({contacts:{type:Array,required:!0},showCcEmailsDropdown:{type:Boolean,required:!1},showBccEmailsDropdown:{type:Boolean,required:!1},isLoading:{type:Boolean,default:!1},hasErrors:{type:Boolean,default:!1}},{subject:{type:String,default:""},subjectModifiers:{},ccEmails:{type:String,default:""},ccEmailsModifiers:{},bccEmails:{type:String,default:""},bccEmailsModifiers:{}}),emits:an(["searchCcEmails","searchBccEmails","updateDropdown"],["update:subject","update:ccEmails","update:bccEmails"]),setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=P(!1),o=()=>{r.value=!r.value},i=dn(t,"subject"),l=dn(t,"ccEmails"),c=dn(t,"bccEmails"),{t:d}=Q(),u=S(()=>e.ccEmails?e.ccEmails.split(",").map(A=>A.trim()):[]),m=S(()=>e.bccEmails?e.bccEmails.split(",").map(A=>A.trim()):[]),h=S(()=>{var A;return(A=e.contacts)==null?void 0:A.map(({name:T,id:I,email:N})=>({id:I,label:N,email:N,thumbnail:{name:T,src:""},value:I,action:"email"}))}),_=A=>{l.value=A.join(",")},E=A=>{c.value=A.join(",")},y=S(()=>e.hasErrors?"placeholder:!text-n-ruby-9 dark:placeholder:!text-n-ruby-9":""),b={props:e,emit:s,i18nPrefix:Vst,showBccInput:r,toggleBccInput:o,subject:i,ccEmails:l,bccEmails:c,t:d,ccEmailsArray:u,bccEmailsArray:m,contactEmailsList:h,handleCcUpdate:_,handleBccUpdate:E,inputClass:y,computed:S,ref:P,get useI18n(){return Q},TagInput:JD,Button:Se,InlineInput:gp};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}},jst={class:"flex flex-col divide-y divide-n-strong"},Wst={class:"flex items-baseline flex-1 w-full h-8 gap-3 px-4 py-3"},zst={class:"flex items-baseline flex-1 w-full gap-3 px-4 py-3 min-h-8"},Yst={class:"mb-0.5 text-sm font-medium whitespace-nowrap text-n-slate-11"},Kst={class:"flex items-center w-full gap-3 min-h-7"},Xst={key:0,class:"flex items-baseline flex-1 w-full gap-3 px-4 py-3 min-h-8"},qst={class:"mb-0.5 text-sm font-medium whitespace-nowrap text-n-slate-11"};function Zst(t,n,a,e,s,r){return p(),g("div",jst,[f("div",Wst,[v(e.InlineInput,{modelValue:e.subject,"onUpdate:modelValue":n[0]||(n[0]=o=>e.subject=o),placeholder:e.t(`${e.i18nPrefix}.SUBJECT_PLACEHOLDER`),label:e.t(`${e.i18nPrefix}.SUBJECT_LABEL`),"focus-on-mount":"","custom-input-class":e.inputClass},null,8,["modelValue","placeholder","label","custom-input-class"])]),f("div",zst,[f("label",Yst,C(e.t(`${e.i18nPrefix}.CC_LABEL`)),1),f("div",Kst,[v(e.TagInput,{"model-value":e.ccEmailsArray,placeholder:e.t(`${e.i18nPrefix}.CC_PLACEHOLDER`),"menu-items":e.contactEmailsList,"show-dropdown":a.showCcEmailsDropdown,"is-loading":a.isLoading,type:"email",class:"flex-1 min-h-7",onFocus:n[1]||(n[1]=o=>e.emit("updateDropdown","cc",!0)),onInput:n[2]||(n[2]=o=>e.emit("searchCcEmails",o)),onOnClickOutside:n[3]||(n[3]=o=>e.emit("updateDropdown","cc",!1)),"onUpdate:modelValue":e.handleCcUpdate},null,8,["model-value","placeholder","menu-items","show-dropdown","is-loading"]),v(e.Button,{label:e.t(`${e.i18nPrefix}.BCC_BUTTON`),variant:"ghost",size:"sm",color:"slate",class:"flex-shrink-0",onClick:e.toggleBccInput},null,8,["label"])])]),e.showBccInput?(p(),g("div",Xst,[f("label",qst,C(e.t(`${e.i18nPrefix}.BCC_LABEL`)),1),v(e.TagInput,{"model-value":e.bccEmailsArray,placeholder:e.t(`${e.i18nPrefix}.BCC_PLACEHOLDER`),"menu-items":e.contactEmailsList,"show-dropdown":a.showBccEmailsDropdown,"is-loading":a.isLoading,type:"email",class:"flex-1 min-h-7","focus-on-mount":"",onFocus:n[4]||(n[4]=o=>e.emit("updateDropdown","bcc",!0)),onInput:n[5]||(n[5]=o=>e.emit("searchBccEmails",o)),onOnClickOutside:n[6]||(n[6]=o=>e.emit("updateDropdown","bcc",!1)),"onUpdate:modelValue":e.handleBccUpdate},null,8,["model-value","placeholder","menu-items","show-dropdown","is-loading"])])):O("v-if",!0)])}const Qst=G(Hst,[["render",Zst],["__file","/app/app/javascript/dashboard/components-next/NewConversation/components/EmailOptions.vue"]]),Jst={__name:"MessageEditor",props:an({isEmailOrWebWidgetInbox:{type:Boolean,required:!0},hasErrors:{type:Boolean,default:!1},hasAttachments:{type:Boolean,default:!1},sendWithSignature:{type:Boolean,default:!1},messageSignature:{type:String,default:""}},{modelValue:{type:String,default:""},modelModifiers:{}}),emits:["update:modelValue"],setup(t,{expose:n}){n();const a=t,{t:e}=Q(),s=dn(t,"modelValue"),r=P({hasSlashCommand:!1,showMentions:!1,mentionSearchKey:""}),o=S(()=>Xo(a.messageSignature));je(s,d=>{if(a.isEmailOrWebWidgetInbox)return;const u=d?Ks(d,o.value):"",m=u.startsWith("/");r.value={...r.value,hasSlashCommand:m,showMentions:m,mentionSearchKey:m?u.slice(1):""}},{immediate:!0});const c={props:a,t:e,modelValue:s,state:r,plainTextSignature:o,hideMention:()=>{r.value.showMentions=!1},replaceText:async d=>{const u=a.sendWithSignature?Oo(d,o.value):d;await At(),s.value=u},ref:P,watch:je,computed:S,nextTick:At,get useI18n(){return Q},get appendSignature(){return Oo},get extractTextFromMarkdown(){return Xo},get removeSignature(){return Ks},Editor:Ds,TextArea:ni,CannedResponse:CS};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}};function eot(t,n,a,e,s,r){const o=nt("on-clickaway");return p(),g("div",{class:oe(["flex-1 h-full",[!a.hasAttachments&&"min-h-[200px]"]])},[a.isEmailOrWebWidgetInbox?(p(),L(e.Editor,{key:0,modelValue:e.modelValue,"onUpdate:modelValue":n[0]||(n[0]=i=>e.modelValue=i),placeholder:e.t("COMPOSE_NEW_CONVERSATION.FORM.MESSAGE_EDITOR.PLACEHOLDER"),class:oe(["[&>div]:!border-transparent [&>div]:px-4 [&>div]:py-4 [&>div]:!bg-transparent h-full [&_.ProseMirror-woot-style]:!max-h-[200px]",a.hasErrors?"[&_.empty-node]:before:!text-n-ruby-9 [&_.empty-node]:dark:before:!text-n-ruby-9":""]),"enable-variables":"","show-character-count":!1},null,8,["modelValue","placeholder","class"])):(p(),L(e.TextArea,{key:1,modelValue:e.modelValue,"onUpdate:modelValue":n[1]||(n[1]=i=>e.modelValue=i),placeholder:e.t("COMPOSE_NEW_CONVERSATION.FORM.MESSAGE_EDITOR.PLACEHOLDER"),class:"!px-0 [&>div]:!px-4 [&>div]:!border-transparent [&>div]:!bg-transparent","custom-text-area-class":a.hasErrors?"placeholder:!text-n-ruby-9 dark:placeholder:!text-n-ruby-9":"","auto-height":"","allow-signature":"",signature:a.messageSignature,"send-with-signature":a.sendWithSignature},{default:z(()=>[e.state.showMentions&&e.state.hasSlashCommand?ce((p(),L(e.CannedResponse,{key:0,class:"normal-editor__canned-box","search-key":e.state.mentionSearchKey,onReplace:e.replaceText},null,8,["search-key"])),[[o,e.hideMention]]):O("v-if",!0)]),_:1},8,["modelValue","placeholder","custom-text-area-class","signature","send-with-signature"]))],2)}const tot=G(Jst,[["render",eot],["__file","/app/app/javascript/dashboard/components-next/NewConversation/components/MessageEditor.vue"]]),NN=({inbox:t,attachFile:n,isPrivateNote:a=!1})=>{const{t:e}=Q(),s=le("getCurrentAccountId"),r=le("getCurrentUser"),o=le("getSelectedChat"),i=le("globalConfig/get"),l=h=>a?p2:m2({channelType:t==null?void 0:t.channel_type,medium:t==null?void 0:t.medium,mime:h}),c=h=>Z(e("CONVERSATION.FILE_SIZE_LIMIT",{MAXIMUM_SUPPORTED_FILE_UPLOAD_SIZE:h})),d=h=>{var b;if(!h)return;const _=((b=h.file)==null?void 0:b.type)||h.type,E=l(_);if(!Jc(h,E)){c(E);return}new CE.DirectUpload(h.file,`/api/v1/accounts/${s.value}/conversations/${o.value.id}/direct_uploads`,{directUploadWillCreateBlobWithXHR:A=>{A.setRequestHeader("api_access_token",r.value.access_token)}}).create((A,T)=>{A?Z(A):n({file:h,blob:T})})},u=h=>{var y;if(!h)return;const _=((y=h.file)==null?void 0:y.type)||h.type,E=l(_);if(!Jc(h,E)){c(E);return}n({file:h})};return{onFileUpload:h=>{i.value.directUploadsEnabled?d(h):u(h)}}},not={__name:"WhatsappTemplate",props:{template:{type:Object,default:()=>({})}},emits:["sendMessage","back"],setup(t,{expose:n,emit:a}){n();const e=a,{t:s}=Q(),i={emit:e,t:s,handleSendMessage:l=>{e("sendMessage",l)},handleBack:()=>{e("back")},WhatsAppTemplateParser:I1,Button:Se,get useI18n(){return Q}};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}},aot={class:"absolute top-full mt-1.5 max-h-[30rem] overflow-y-auto ltr:left-0 rtl:right-0 flex flex-col gap-4 px-4 pt-6 pb-5 items-start w-[28.75rem] h-auto bg-n-solid-2 border border-n-strong shadow-sm rounded-lg"},sot={class:"w-full"},oot={class:"flex gap-3 justify-between items-end w-full h-14"};function rot(t,n,a,e,s,r){return p(),g("div",aot,[f("div",sot,[v(e.WhatsAppTemplateParser,{template:a.template,onSendMessage:e.handleSendMessage,onBack:e.handleBack},{actions:z(({sendMessage:o,goBack:i,disabled:l})=>[f("div",oot,[v(e.Button,{label:e.t("COMPOSE_NEW_CONVERSATION.FORM.WHATSAPP_OPTIONS.TEMPLATE_PARSER.BACK"),color:"slate",variant:"faded",class:"w-full font-medium",onClick:i},null,8,["label","onClick"]),v(e.Button,{label:e.t("COMPOSE_NEW_CONVERSATION.FORM.WHATSAPP_OPTIONS.TEMPLATE_PARSER.SEND_MESSAGE"),class:"w-full font-medium",disabled:l,onClick:o},null,8,["label","disabled","onClick"])])]),_:1},8,["template"])])])}const iot=G(not,[["render",rot],["__file","/app/app/javascript/dashboard/components-next/NewConversation/components/WhatsappTemplate.vue"]]),lot={__name:"WhatsAppOptions",props:{inboxId:{type:Number,required:!0}},emits:["sendMessage"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=le("inboxes/getFilteredWhatsAppTemplates"),i=P(""),l=P(null),c=P(!1),d=S(()=>o.value(e.inboxId)),u=S(()=>d.value.filter(A=>A.name.toLowerCase().includes(i.value.toLowerCase()))),b={props:e,emit:s,t:r,getFilteredWhatsAppTemplates:o,searchQuery:i,selectedTemplate:l,showTemplatesMenu:c,whatsAppTemplateMessages:d,filteredTemplates:u,getTemplateBody:A=>A.components.find(T=>T.type==="BODY").text,handleTriggerClick:()=>{i.value="",c.value=!c.value},handleTemplateClick:A=>{l.value=A,c.value=!1},handleBack:()=>{l.value=null,c.value=!0},handleSendMessage:A=>{s("sendMessage",A),l.value=null},computed:S,ref:P,get useI18n(){return Q},get useMapGetter(){return le},Icon:Bt,Button:Se,WhatsappTemplate:iot};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}},cot={class:"relative"},dot={key:0,class:"absolute top-full mt-1.5 max-h-96 overflow-y-auto ltr:left-0 rtl:right-0 flex flex-col gap-2 p-4 items-center w-[21.875rem] h-auto bg-n-solid-2 border border-n-strong shadow-sm rounded-lg"},uot={class:"relative w-full"},pot=["placeholder"],fot=["onClick"],mot={class:"text-sm text-n-slate-12"},hot={class:"mb-0 text-xs leading-5 text-n-slate-11 line-clamp-2"},_ot={key:0,class:"pt-2 w-full text-sm text-n-slate-11"};function got(t,n,a,e,s,r){return p(),g("div",cot,[v(e.Button,{icon:"i-ri-whatsapp-line",label:e.t("COMPOSE_NEW_CONVERSATION.FORM.WHATSAPP_OPTIONS.LABEL"),color:"slate",size:"sm",disabled:e.selectedTemplate,class:"!text-xs font-medium",onClick:e.handleTriggerClick},null,8,["label","disabled"]),e.showTemplatesMenu?(p(),g("div",dot,[f("div",uot,[v(e.Icon,{icon:"i-lucide-search",class:"absolute size-3.5 top-2 ltr:left-3 rtl:right-3"}),ce(f("input",{"onUpdate:modelValue":n[0]||(n[0]=o=>e.searchQuery=o),type:"search",placeholder:e.t("COMPOSE_NEW_CONVERSATION.FORM.WHATSAPP_OPTIONS.SEARCH_PLACEHOLDER"),class:"w-full h-8 py-2 ltr:pl-10 rtl:pr-10 ltr:pr-2 rtl:pl-2 text-sm reset-base outline-none border-none rounded-lg bg-n-alpha-black2 dark:bg-n-solid-1 text-n-slate-12"},null,8,pot),[[Et,e.searchQuery]])]),(p(!0),g(de,null,Ae(e.filteredTemplates,o=>(p(),g("div",{key:o.id,class:"flex flex-col gap-2 p-2 w-full rounded-lg cursor-pointer dark:hover:bg-n-alpha-3 hover:bg-n-alpha-1",onClick:i=>e.handleTemplateClick(o)},[f("span",mot,C(o.name),1),f("p",hot,C(e.getTemplateBody(o)),1)],8,fot))),128)),e.filteredTemplates.length===0?(p(),g("p",_ot,C(e.t("COMPOSE_NEW_CONVERSATION.FORM.WHATSAPP_OPTIONS.EMPTY_STATE")),1)):O("v-if",!0)])):O("v-if",!0),e.selectedTemplate?(p(),L(e.WhatsappTemplate,{key:1,template:e.selectedTemplate,onSendMessage:e.handleSendMessage,onBack:e.handleBack},null,8,["template"])):O("v-if",!0)])}const bot=G(lot,[["render",got],["__file","/app/app/javascript/dashboard/components-next/NewConversation/components/WhatsAppOptions.vue"]]),vot={__name:"ContentTemplateForm",props:{template:{type:Object,default:()=>({})}},emits:["sendMessage","back"],setup(t,{expose:n,emit:a}){n();const e=a,{t:s}=Q(),i={emit:e,t:s,handleSendMessage:l=>{e("sendMessage",l)},handleBack:()=>{e("back")},ContentTemplateParser:DD,Button:Se,get useI18n(){return Q}};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}},Eot={class:"absolute top-full mt-1.5 max-h-[30rem] overflow-y-auto ltr:left-0 rtl:right-0 flex flex-col gap-4 px-4 pt-6 pb-5 items-start w-[28.75rem] h-auto bg-n-solid-2 border border-n-strong shadow-sm rounded-lg"},Sot={class:"w-full"},Tot={class:"flex gap-3 justify-between items-end w-full h-14"};function Aot(t,n,a,e,s,r){return p(),g("div",Eot,[f("div",Sot,[v(e.ContentTemplateParser,{template:a.template,onSendMessage:e.handleSendMessage,onBack:e.handleBack},{actions:z(({sendMessage:o,goBack:i,disabled:l})=>[f("div",Tot,[v(e.Button,{label:e.t("CONTENT_TEMPLATES.FORM.BACK_BUTTON"),color:"slate",variant:"faded",class:"w-full font-medium",onClick:i},null,8,["label","onClick"]),v(e.Button,{label:e.t("CONTENT_TEMPLATES.FORM.SEND_MESSAGE_BUTTON"),class:"w-full font-medium",disabled:l,onClick:o},null,8,["label","disabled","onClick"])])]),_:1},8,["template"])])])}const yot=G(vot,[["render",Aot],["__file","/app/app/javascript/dashboard/components-next/NewConversation/components/ContentTemplateForm.vue"]]),Iot={__name:"ContentTemplateSelector",props:{inboxId:{type:Number,required:!0}},emits:["sendMessage"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=le("inboxes/getInbox"),i=P(""),l=P(null),c=P(!1),d=S(()=>{var A;const b=o.value(e.inboxId);return((A=b==null?void 0:b.content_templates)==null?void 0:A.templates)||[]}),u=S(()=>d.value.filter(b=>b.friendly_name.toLowerCase().includes(i.value.toLowerCase())&&b.status==="approved")),y={props:e,emit:s,t:r,inbox:o,searchQuery:i,selectedTemplate:l,showTemplatesMenu:c,contentTemplates:d,filteredTemplates:u,handleTriggerClick:()=>{i.value="",c.value=!c.value},handleTemplateClick:b=>{l.value=b,c.value=!1},handleBack:()=>{l.value=null,c.value=!0},handleSendMessage:b=>{s("sendMessage",b),l.value=null},computed:S,ref:P,get useI18n(){return Q},get useMapGetter(){return le},Icon:Bt,Button:Se,Input:sn,ContentTemplateForm:yot};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}},Cot={class:"relative"},Oot={key:0,class:"absolute top-full mt-1.5 max-h-96 overflow-y-auto ltr:left-0 rtl:right-0 flex flex-col gap-2 p-4 items-center w-[21.875rem] h-auto bg-n-solid-2 border border-n-strong shadow-sm rounded-lg"},Not={class:"w-full"},xot=["onClick"],Rot={class:"flex justify-between items-center"},wot={class:"text-sm text-n-slate-12"},Mot={class:"mb-0 text-xs leading-5 text-n-slate-11 line-clamp-2"},Lot={key:0,class:"pt-2 w-full text-sm text-n-slate-11"};function Dot(t,n,a,e,s,r){return p(),g("div",Cot,[v(e.Button,{icon:"i-ph-whatsapp-logo",label:e.t("COMPOSE_NEW_CONVERSATION.FORM.TWILIO_OPTIONS.LABEL"),color:"slate",size:"sm",disabled:e.selectedTemplate,class:"!text-xs font-medium",onClick:e.handleTriggerClick},null,8,["label","disabled"]),e.showTemplatesMenu?(p(),g("div",Oot,[f("div",Not,[v(e.Input,{modelValue:e.searchQuery,"onUpdate:modelValue":n[0]||(n[0]=o=>e.searchQuery=o),type:"search",placeholder:e.t("COMPOSE_NEW_CONVERSATION.FORM.TWILIO_OPTIONS.SEARCH_PLACEHOLDER"),"custom-input-class":"ltr:pl-10 rtl:pr-10"},{prefix:z(()=>[v(e.Icon,{icon:"i-lucide-search",class:"absolute top-2 size-3.5 ltr:left-3 rtl:right-3"})]),_:1},8,["modelValue","placeholder"])]),(p(!0),g(de,null,Ae(e.filteredTemplates,o=>(p(),g("div",{key:o.content_sid,tabindex:"0",class:"flex flex-col gap-2 p-2 w-full rounded-lg cursor-pointer dark:hover:bg-n-alpha-3 hover:bg-n-alpha-1",onClick:i=>e.handleTemplateClick(o)},[f("div",Rot,[f("span",wot,C(o.friendly_name),1)]),f("p",Mot,C(o.body||e.t("CONTENT_TEMPLATES.PICKER.NO_CONTENT")),1)],8,xot))),128)),e.filteredTemplates.length===0?(p(),g("p",Lot,C(e.t("COMPOSE_NEW_CONVERSATION.FORM.TWILIO_OPTIONS.EMPTY_STATE")),1)):O("v-if",!0)])):O("v-if",!0),e.selectedTemplate?(p(),L(e.ContentTemplateForm,{key:1,template:e.selectedTemplate,onSendMessage:e.handleSendMessage,onBack:e.handleBack},null,8,["template"])):O("v-if",!0)])}const Pot=G(Iot,[["render",Dot],["__file","/app/app/javascript/dashboard/components-next/NewConversation/components/ContentTemplateSelector.vue"]]),kot={__name:"ActionButtons",props:{attachedFiles:{type:Array,default:()=>[]},isWhatsappInbox:{type:Boolean,default:!1},isEmailOrWebWidgetInbox:{type:Boolean,default:!1},isTwilioSmsInbox:{type:Boolean,default:!1},isTwilioWhatsAppInbox:{type:Boolean,default:!1},messageTemplates:{type:Array,default:()=>[]},channelType:{type:String,default:""},isLoading:{type:Boolean,default:!1},disableSendButton:{type:Boolean,default:!1},hasSelectedInbox:{type:Boolean,default:!1},hasNoInbox:{type:Boolean,default:!1},isDropdownActive:{type:Boolean,default:!1},messageSignature:{type:String,default:""},inboxId:{type:Number,default:null}},emits:["discard","sendMessage","sendWhatsappMessage","sendTwilioMessage","insertEmoji","addSignature","removeSignature","attachFile"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=P(null),i=P(!1),l=Uf(()=>ti(()=>import("./EmojiInput-8IkZz3o1.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]))),c=S(()=>e.isEmailOrWebWidgetInbox?e.messageSignature:Xo(e.messageSignature)),{fetchSignatureFlagFromUISettings:d,setSignatureFlagForInbox:u,isEditorHotKeyEnabled:m}=Ct(),h=S(()=>d(e.channelType)),_=S(()=>e.isTwilioWhatsAppInbox&&e.inboxId),E=S(()=>!e.isWhatsappInbox&&!e.isTwilioWhatsAppInbox&&!e.hasNoInbox),y=S(()=>!e.isWhatsappInbox&&!e.isTwilioWhatsAppInbox),b=()=>{c.value&&(h.value?s("addSignature",c.value):s("removeSignature",c.value))},A=()=>{u(e.channelType,!h.value),b()};je(()=>e.hasSelectedInbox,M=>{At(()=>{M&&e.isEmailOrWebWidgetInbox&&b()})},{immediate:!0});const T=M=>{s("insertEmoji",M)},{onFileUpload:I}=NN({isATwilioSMSChannel:e.isTwilioSmsInbox,attachFile:({blob:M,file:w})=>{if(!w)return;const D=new FileReader;D.readAsDataURL(w.file),D.onloadend=()=>{const B={resource:M||w,isPrivate:!1,thumb:D.result,blobSignedId:M==null?void 0:M.signed_id};s("attachFile",[...e.attachedFiles,B])}}}),N=S(()=>{const M=m("cmd_enter")?" + ":"";return r("COMPOSE_NEW_CONVERSATION.FORM.ACTION_BUTTONS.SEND",{keyCode:M})}),x={Enter:{action:()=>{m("enter")&&y.value&&!e.isDropdownActive&&s("sendMessage")}},"$mod+Enter":{action:()=>{m("cmd_enter")&&y.value&&!e.isDropdownActive&&s("sendMessage")}}};jn(x);const R={props:e,emit:s,t:r,uploadAttachment:o,isEmojiPickerOpen:i,EmojiInput:l,signatureToApply:c,fetchSignatureFlagFromUISettings:d,setSignatureFlagForInbox:u,isEditorHotKeyEnabled:m,sendWithSignature:h,showTwilioContentTemplates:_,shouldShowEmojiButton:E,isRegularMessageMode:y,setSignature:b,toggleMessageSignature:A,onClickInsertEmoji:T,onFileUpload:I,sendButtonLabel:N,keyboardEvents:x,defineAsyncComponent:Uf,ref:P,computed:S,watch:je,nextTick:At,get useI18n(){return Q},get useUISettings(){return Ct},get useFileUpload(){return NN},get vOnClickOutside(){return Ga},get ALLOWED_FILE_TYPES(){return u2},get useKeyboardEvents(){return jn},get FileUpload(){return V2},get extractTextFromMarkdown(){return Xo},Button:Se,WhatsAppOptions:bot,ContentTemplateSelector:Pot};return Object.defineProperty(R,"__isScriptSetup",{enumerable:!1,value:!0}),R}},Bot={class:"flex items-center justify-between w-full h-[3.25rem] gap-2 px-4 py-3"},Fot={class:"flex gap-2 items-center"},Uot={key:2,class:"relative"},$ot={class:"flex gap-2 items-center"};function Got(t,n,a,e,s,r){return p(),g("div",Bot,[f("div",Fot,[a.isWhatsappInbox?(p(),L(e.WhatsAppOptions,{key:0,"inbox-id":a.inboxId,"message-templates":a.messageTemplates,onSendMessage:n[0]||(n[0]=o=>e.emit("sendWhatsappMessage",o))},null,8,["inbox-id","message-templates"])):O("v-if",!0),e.showTwilioContentTemplates?(p(),L(e.ContentTemplateSelector,{key:1,"inbox-id":a.inboxId,onSendMessage:n[1]||(n[1]=o=>e.emit("sendTwilioMessage",o))},null,8,["inbox-id"])):O("v-if",!0),e.shouldShowEmojiButton?ce((p(),g("div",Uot,[v(e.Button,{icon:"i-lucide-smile-plus",color:"slate",size:"sm",class:"!w-10",onClick:n[2]||(n[2]=o=>e.isEmojiPickerOpen=!e.isEmojiPickerOpen)}),e.isEmojiPickerOpen?(p(),L(e.EmojiInput,{key:0,class:"top-full mt-1.5 ltr:left-0 rtl:right-0","on-click":e.onClickInsertEmoji})):O("v-if",!0)])),[[e.vOnClickOutside,()=>e.isEmojiPickerOpen=!1]]):O("v-if",!0),a.isEmailOrWebWidgetInbox?(p(),L(e.FileUpload,{key:3,ref:"uploadAttachment","input-id":"composeNewConversationAttachment",size:4096*4096,accept:e.ALLOWED_FILE_TYPES,multiple:"","drop-directory":!1,data:{direct_upload_url:"/rails/active_storage/direct_uploads",direct_upload:!0},class:"p-px",onInputFile:e.onFileUpload},{default:z(()=>[v(e.Button,{icon:"i-lucide-plus",color:"slate",size:"sm",class:"!w-10 relative"})]),_:1},8,["accept","onInputFile"])):O("v-if",!0),a.hasSelectedInbox&&e.isRegularMessageMode?(p(),L(e.Button,{key:4,icon:"i-lucide-signature",color:"slate",size:"sm",class:"!w-10",onClick:e.toggleMessageSignature})):O("v-if",!0)]),f("div",$ot,[v(e.Button,{label:e.t("COMPOSE_NEW_CONVERSATION.FORM.ACTION_BUTTONS.DISCARD"),variant:"faded",color:"slate",size:"sm",class:"!text-xs font-medium",onClick:n[3]||(n[3]=o=>e.emit("discard"))},null,8,["label"]),e.isRegularMessageMode?(p(),L(e.Button,{key:0,label:e.sendButtonLabel,size:"sm",class:"!text-xs font-medium",disabled:a.isLoading||a.disableSendButton,"is-loading":a.isLoading,onClick:n[4]||(n[4]=o=>e.emit("sendMessage"))},null,8,["label","disabled","is-loading"])):O("v-if",!0)])])}const Vot=G(kot,[["render",Got],["__scopeId","data-v-eef51109"],["__file","/app/app/javascript/dashboard/components-next/NewConversation/components/ActionButtons.vue"]]),Hot={},jot={class:"flex items-center w-full px-4 py-3 dark:bg-n-amber-11/15 bg-n-amber-3"},Wot={class:"text-sm dark:text-n-amber-11 text-n-amber-11"};function zot(t,n){return p(),g("div",jot,[f("span",Wot,C(t.$t("COMPOSE_NEW_CONVERSATION.FORM.NO_INBOX_ALERT")),1)])}const Yot=G(Hot,[["render",zot],["__file","/app/app/javascript/dashboard/components-next/NewConversation/components/InboxEmptyState.vue"]]),Kot={__name:"AttachmentPreviews",props:{attachments:{type:Array,required:!0}},emits:["update:attachments"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=d=>(d.content_type||d.type).includes("image"),o=S(()=>e.attachments.filter(d=>r(d.resource))),i=S(()=>e.attachments.filter(d=>!r(d.resource))),c={props:e,emit:s,isTypeImage:r,filteredImageAttachments:o,filteredNonImageAttachments:i,removeAttachment:d=>{const u=e.attachments.filter(m=>m.resource.id!==d);s("update:attachments",u)},computed:S,get fileNameWithEllipsis(){return rk},Button:Se};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}},Xot={class:"flex flex-col gap-4 p-4"},qot={key:0,class:"flex flex-wrap gap-3"},Zot=["src"],Qot={key:1,class:"flex flex-wrap gap-3"},Jot={class:"text-sm font-medium text-n-slate-11"};function ert(t,n,a,e,s,r){return p(),g("div",Xot,[e.filteredImageAttachments.length>0?(p(),g("div",qot,[(p(!0),g(de,null,Ae(e.filteredImageAttachments,o=>(p(),g("div",{key:o.id,class:"relative group/image w-[4.5rem] h-[4.5rem]"},[f("img",{class:"object-cover w-[4.5rem] h-[4.5rem] rounded-lg",src:o.thumb},null,8,Zot),v(e.Button,{variant:"ghost",icon:"i-lucide-trash",color:"slate",class:"absolute top-1 ltr:right-1 rtl:left-1 !w-5 !h-5 transition-opacity duration-150 ease-in-out opacity-0 group-hover/image:opacity-100",onClick:i=>e.removeAttachment(o.resource.id)},null,8,["onClick"])]))),128))])):O("v-if",!0),e.filteredNonImageAttachments.length>0?(p(),g("div",Qot,[(p(!0),g(de,null,Ae(e.filteredNonImageAttachments,o=>(p(),g("div",{key:o.id,class:"max-w-[18.75rem] inline-flex items-center h-8 min-w-0 bg-n-alpha-2 dark:bg-n-solid-3 rounded-lg gap-3 ltr:pl-3 rtl:pr-3 ltr:pr-2 rtl:pl-2"},[f("span",Jot,C(e.fileNameWithEllipsis(o.resource)),1),v(e.Button,{variant:"ghost",icon:"i-lucide-x",color:"slate",size:"xs",class:"shrink-0 !h-5 !w-5",onClick:i=>e.removeAttachment(o.resource.id)},null,8,["onClick"])]))),128))])):O("v-if",!0)])}const trt=G(Kot,[["render",ert],["__file","/app/app/javascript/dashboard/components-next/NewConversation/components/AttachmentPreviews.vue"]]),nrt={__name:"ComposeNewConversationForm",props:{contacts:{type:Array,default:()=>[]},contactId:{type:String,default:null},selectedContact:{type:Object,default:null},targetInbox:{type:Object,default:null},currentUser:{type:Object,default:null},isCreatingContact:{type:Boolean,default:!1},isFetchingInboxes:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isDirectUploadsEnabled:{type:Boolean,default:!1},contactConversationsUiFlags:{type:Object,default:null},contactsUiFlags:{type:Object,default:null},messageSignature:{type:String,default:""},sendWithSignature:{type:Boolean,default:!1}},emits:["searchContacts","discard","updateSelectedContact","updateTargetInbox","clearSelectedContact","createConversation"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=P(!1),o=P(!1),i=P(!1),l=P(!1),c=S(()=>e.contactConversationsUiFlags.isCreating),d=Lt({message:"",subject:"",ccEmails:"",bccEmails:"",attachedFiles:[]}),u=S(()=>{var W,ee,ae,ve,Ce,ue,ge,Me,We,Ue,Re;return{isEmail:((W=e.targetInbox)==null?void 0:W.channelType)===ht.EMAIL,isTwilio:((ee=e.targetInbox)==null?void 0:ee.channelType)===ht.TWILIO,isWhatsapp:((ae=e.targetInbox)==null?void 0:ae.channelType)===ht.WHATSAPP,isWebWidget:((ve=e.targetInbox)==null?void 0:ve.channelType)===ht.WEB,isApi:((Ce=e.targetInbox)==null?void 0:Ce.channelType)===ht.API,isEmailOrWebWidget:((ue=e.targetInbox)==null?void 0:ue.channelType)===ht.EMAIL||((ge=e.targetInbox)==null?void 0:ge.channelType)===ht.WEB,isTwilioSMS:((Me=e.targetInbox)==null?void 0:Me.channelType)===ht.TWILIO&&((We=e.targetInbox)==null?void 0:We.medium)==="sms",isTwilioWhatsapp:((Ue=e.targetInbox)==null?void 0:Ue.channelType)===ht.TWILIO&&((Re=e.targetInbox)==null?void 0:Re.medium)==="whatsapp"}}),m=S(()=>{var W;return Object.keys(((W=e.targetInbox)==null?void 0:W.messageTemplates)||{}).length?e.targetInbox.messageTemplates:[]}),h=S(()=>{var W;return((W=e.targetInbox)==null?void 0:W.channelType)||""}),_=S(()=>({selectedContact:{required:Ge},targetInbox:{required:Ge},message:{required:Io(!u.value.isWhatsapp)},subject:{required:Io(u.value.isEmail)}})),E=rt(_,{selectedContact:S(()=>e.selectedContact),targetInbox:S(()=>e.targetInbox),message:S(()=>d.message),subject:S(()=>d.subject)}),y=S(()=>({isContactInvalid:E.value.selectedContact.$dirty&&E.value.selectedContact.$invalid,isInboxInvalid:E.value.targetInbox.$dirty&&E.value.targetInbox.$invalid,isSubjectInvalid:E.value.subject.$dirty&&E.value.subject.$invalid,isMessageInvalid:E.value.message.$dirty&&E.value.message.$invalid})),b=()=>{const{message:W,subject:ee,ccEmails:ae,bccEmails:ve,attachedFiles:Ce}=d;return vN({targetInbox:e.targetInbox,selectedContact:e.selectedContact,message:W,subject:ee,ccEmails:ae,bccEmails:ve,currentUser:e.currentUser,attachedFiles:Ce,directUploadsEnabled:e.isDirectUploadsEnabled})},A=S(()=>{var W;return bN((W=e.selectedContact)==null?void 0:W.contactInboxes)}),T=S(()=>e.selectedContact&&A.value.length===0&&!e.contactsUiFlags.isFetchingInboxes&&!e.isFetchingInboxes),I=S(()=>r.value||o.value||i.value||l.value),N=W=>{r.value=!0;const ee=typeof W=="string"?W.trim():"",ae=Array.from(ee).some(ue=>{const ge=ue.toLowerCase(),Me=ue.toUpperCase();return ge!==Me}),ve=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ee),Ce=["email","phone_number","name"].filter(ue=>!(ue==="phone_number"&&ae||ue==="name"&&ve));s("searchContacts",{keys:Ce,query:W})},x=(W,ee)=>{W==="cc"?i.value=ee:W==="bcc"?l.value=ee:r.value=ee},R=W=>{i.value=!0,s("searchContacts",{keys:["email"],query:W})},M=W=>{l.value=!0,s("searchContacts",{keys:["email"],query:W})},w=async({value:W,action:ee,...ae})=>{E.value.$reset(),s("updateSelectedContact",{value:W,action:ee,...ae}),r.value=!1,o.value=!0},D=({value:W,action:ee,...ae})=>{E.value.$reset(),s("updateTargetInbox",{...ae}),o.value=!1,d.attachedFiles=[]},B=W=>{if(E.value.$reset(),e.sendWithSignature){const ee=u.value.isEmailOrWebWidget?e.messageSignature:Xo(e.messageSignature);d.message=Ks(d.message,ee)}s("updateTargetInbox",W),d.attachedFiles=[]},k=()=>{s("clearSelectedContact"),d.attachedFiles=[]},V=W=>{d.message+=W},F=W=>{d.message=Oo(d.message,W)},$=W=>{d.message=Ks(d.message,W)},Y=W=>{d.attachedFiles=W},j=()=>{Object.assign(d,{message:"",subject:"",ccEmails:"",bccEmails:"",attachedFiles:[]}),E.value.$reset()},U=async()=>{if(await E.value.$validate())try{await s("createConversation",{payload:b(),isFromWhatsApp:!1})&&j()}catch{}},J=async({message:W,templateParams:ee})=>{const ae=Hb({targetInbox:e.targetInbox,selectedContact:e.selectedContact,message:W,templateParams:ee,currentUser:e.currentUser});await s("createConversation",{payload:ae,isFromWhatsApp:!0})},te=async({message:W,templateParams:ee})=>{const ae=Hb({targetInbox:e.targetInbox,selectedContact:e.selectedContact,message:W,templateParams:ee,currentUser:e.currentUser});await s("createConversation",{payload:ae,isFromWhatsApp:!0})},q=S(()=>!u.value.isWhatsapp&&!T.value&&!u.value.isTwilioWhatsapp),K={props:e,emit:s,showContactsDropdown:r,showInboxesDropdown:o,showCcEmailsDropdown:i,showBccEmailsDropdown:l,isCreating:c,state:d,inboxTypes:u,whatsappMessageTemplates:m,inboxChannelType:h,validationRules:_,v$:E,validationStates:y,newMessagePayload:b,contactableInboxesList:A,showNoInboxAlert:T,isAnyDropdownActive:I,handleContactSearch:N,handleDropdownUpdate:x,searchCcEmails:R,searchBccEmails:M,setSelectedContact:w,handleInboxAction:D,removeTargetInbox:B,clearSelectedContact:k,onClickInsertEmoji:V,handleAddSignature:F,handleRemoveSignature:$,handleAttachFile:Y,clearForm:j,handleSendMessage:U,handleSendWhatsappMessage:J,handleSendTwilioMessage:te,shouldShowMessageEditor:q,reactive:Lt,ref:P,computed:S,get useVuelidate(){return rt},get required(){return Ge},get requiredIf(){return Io},get INBOX_TYPES(){return ht},get appendSignature(){return Oo},get removeSignature(){return Ks},get extractTextFromMarkdown(){return Xo},get buildContactableInboxesList(){return bN},get prepareNewMessagePayload(){return vN},get prepareWhatsAppMessagePayload(){return Hb},ContactSelector:Lst,InboxSelector:Gst,EmailOptions:Qst,MessageEditor:tot,ActionButtons:Vot,InboxEmptyState:Yot,AttachmentPreviews:trt};return Object.defineProperty(K,"__isScriptSetup",{enumerable:!1,value:!0}),K}},art={class:"w-[42rem] divide-y divide-n-strong overflow-visible transition-all duration-300 ease-in-out top-full justify-between flex flex-col bg-n-alpha-3 border border-n-strong shadow-sm backdrop-blur-[100px] rounded-xl min-w-0"};function srt(t,n,a,e,s,r){var o;return p(),g("div",art,[v(e.ContactSelector,{contacts:a.contacts,"selected-contact":a.selectedContact,"show-contacts-dropdown":e.showContactsDropdown,"is-loading":a.isLoading,"is-creating-contact":a.isCreatingContact,"contact-id":a.contactId,"contactable-inboxes-list":e.contactableInboxesList,"show-inboxes-dropdown":e.showInboxesDropdown,"has-errors":e.validationStates.isContactInvalid,onSearchContacts:e.handleContactSearch,onSetSelectedContact:e.setSelectedContact,onClearSelectedContact:e.clearSelectedContact,onUpdateDropdown:e.handleDropdownUpdate},null,8,["contacts","selected-contact","show-contacts-dropdown","is-loading","is-creating-contact","contact-id","contactable-inboxes-list","show-inboxes-dropdown","has-errors"]),e.showNoInboxAlert?(p(),L(e.InboxEmptyState,{key:0})):(p(),L(e.InboxSelector,{key:1,"target-inbox":a.targetInbox,"selected-contact":a.selectedContact,"show-inboxes-dropdown":e.showInboxesDropdown,"contactable-inboxes-list":e.contactableInboxesList,"has-errors":e.validationStates.isInboxInvalid,onUpdateInbox:e.removeTargetInbox,onToggleDropdown:n[0]||(n[0]=i=>e.showInboxesDropdown=i),onHandleInboxAction:e.handleInboxAction},null,8,["target-inbox","selected-contact","show-inboxes-dropdown","contactable-inboxes-list","has-errors"])),e.inboxTypes.isEmail?(p(),L(e.EmailOptions,{key:2,"cc-emails":e.state.ccEmails,"onUpdate:ccEmails":n[1]||(n[1]=i=>e.state.ccEmails=i),"bcc-emails":e.state.bccEmails,"onUpdate:bccEmails":n[2]||(n[2]=i=>e.state.bccEmails=i),subject:e.state.subject,"onUpdate:subject":n[3]||(n[3]=i=>e.state.subject=i),contacts:a.contacts,"show-cc-emails-dropdown":e.showCcEmailsDropdown,"show-bcc-emails-dropdown":e.showBccEmailsDropdown,"is-loading":a.isLoading,"has-errors":e.validationStates.isSubjectInvalid,onSearchCcEmails:e.searchCcEmails,onSearchBccEmails:e.searchBccEmails,onUpdateDropdown:e.handleDropdownUpdate},null,8,["cc-emails","bcc-emails","subject","contacts","show-cc-emails-dropdown","show-bcc-emails-dropdown","is-loading","has-errors"])):O("v-if",!0),e.shouldShowMessageEditor?(p(),L(e.MessageEditor,{key:3,modelValue:e.state.message,"onUpdate:modelValue":n[4]||(n[4]=i=>e.state.message=i),"message-signature":a.messageSignature,"send-with-signature":a.sendWithSignature,"is-email-or-web-widget-inbox":e.inboxTypes.isEmailOrWebWidget,"has-errors":e.validationStates.isMessageInvalid,"has-attachments":e.state.attachedFiles.length>0},null,8,["modelValue","message-signature","send-with-signature","is-email-or-web-widget-inbox","has-errors","has-attachments"])):O("v-if",!0),e.state.attachedFiles.length>0?(p(),L(e.AttachmentPreviews,{key:4,attachments:e.state.attachedFiles,"onUpdate:attachments":n[5]||(n[5]=i=>e.state.attachedFiles=i)},null,8,["attachments"])):O("v-if",!0),v(e.ActionButtons,{"attached-files":e.state.attachedFiles,"is-whatsapp-inbox":e.inboxTypes.isWhatsapp,"is-email-or-web-widget-inbox":e.inboxTypes.isEmailOrWebWidget,"is-twilio-sms-inbox":e.inboxTypes.isTwilioSMS,"is-twilio-whats-app-inbox":e.inboxTypes.isTwilioWhatsapp,"message-templates":e.whatsappMessageTemplates,"channel-type":e.inboxChannelType,"is-loading":e.isCreating,"disable-send-button":e.isCreating,"has-selected-inbox":!!a.targetInbox,"inbox-id":(o=a.targetInbox)==null?void 0:o.id,"has-no-inbox":e.showNoInboxAlert,"is-dropdown-active":e.isAnyDropdownActive,"message-signature":a.messageSignature,onInsertEmoji:e.onClickInsertEmoji,onAddSignature:e.handleAddSignature,onRemoveSignature:e.handleRemoveSignature,onAttachFile:e.handleAttachFile,onDiscard:n[6]||(n[6]=i=>t.$emit("discard")),onSendMessage:e.handleSendMessage,onSendWhatsappMessage:e.handleSendWhatsappMessage,onSendTwilioMessage:e.handleSendTwilioMessage},null,8,["attached-files","is-whatsapp-inbox","is-email-or-web-widget-inbox","is-twilio-sms-inbox","is-twilio-whats-app-inbox","message-templates","channel-type","is-loading","disable-send-button","has-selected-inbox","inbox-id","has-no-inbox","is-dropdown-active","message-signature"])])}const ort=G(nrt,[["render",srt],["__file","/app/app/javascript/dashboard/components-next/NewConversation/components/ComposeNewConversationForm.vue"]]),rrt={__name:"ComposeConversation",props:{alignPosition:{type:String,default:"left"},contactId:{type:String,default:null},isModal:{type:Boolean,default:!1}},emits:["close"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=Fe(),{t:o}=Q(),{width:i}=ws(),{fetchSignatureFlagFromUISettings:l}=Ct(),c=S(()=>i.value<gt.SMALL_SCREEN_BREAKPOINT),d=S(()=>e.isModal||c.value),u=P([]),m=P(null),h=P(null),_=P(!1),E=P(!1),y=P(!1),b=P(!1),A=le("contacts/getContactById"),T=le("contacts/getUIFlags"),I=le("getCurrentUser"),N=le("globalConfig/get"),x=le("contactConversations/getUIFlags"),R=le("getMessageSignature"),M=le("inboxes/getInboxes"),w=S(()=>{var ae;return l((ae=h.value)==null?void 0:ae.channelType)}),D=S(()=>N.value.directUploadsEnabled),B=S(()=>A.value(e.contactId)),k=S(()=>d.value?"":e.alignPosition==="right"?"absolute ltr:left-0 ltr:right-[unset] rtl:right-0 rtl:left-[unset]":"absolute rtl:left-0 rtl:right-[unset] ltr:right-0 ltr:left-[unset]"),V=Ja(async ae=>{y.value=!0,u.value=[];try{u.value=await EN(ae),y.value=!1}catch{Z(o("COMPOSE_NEW_CONVERSATION.CONTACT_SEARCH.ERROR_MESSAGE"))}finally{y.value=!1}},300,!1),F=()=>{u.value=[]},$=async({value:ae,action:ve,...Ce})=>{let ue;if(ve==="create"){_.value=!0;try{ue=await SN(ae),_.value=!1}catch{_.value=!1;return}}else ue=Ce;if(m.value=ue,ue!=null&&ue.id){E.value=!0;try{const ge=await TN(ue.id);m.value.contactInboxes=Vb(ge,M.value),E.value=!1}catch{E.value=!1}}},Y=ae=>{h.value=ae,F()},j=()=>{m.value=null,h.value=null},U=()=>{b.value=!1,e.contactId||(m.value=null),h.value=null,F(),s("close")},J=async({payload:ae,isFromWhatsApp:ve})=>{try{const Ce=await r.dispatch("contactConversations/create",{params:ae,isFromWhatsApp:ve}),ue={type:"link",to:`/app/accounts/${Ce.account_id}/conversations/${Ce.id}`,message:o("COMPOSE_NEW_CONVERSATION.FORM.GO_TO_CONVERSATION")};return U(),Z(o("COMPOSE_NEW_CONVERSATION.FORM.SUCCESS_MESSAGE"),ue),!0}catch(Ce){return Z(Ce instanceof Xr?Ce.data:o("COMPOSE_NEW_CONVERSATION.FORM.ERROR_MESSAGE")),!1}},te=()=>{b.value=!b.value};je(B,(ae,ve)=>{if(ae&&e.contactId){(ae==null?void 0:ae.id)!==(ve==null?void 0:ve.id)&&j();const Ce=pE(ae.contactInboxes||[]);m.value={...ae,contactInboxes:Vb(Ce,M.value)}}},{immediate:!0,deep:!0});const q=()=>{b.value&&(b.value=!1,s("close"))},K=()=>{d.value&&q()};Pe(()=>F());const W={Escape:{action:()=>{b.value&&(b.value=!1)}}};jn(W);const ee={props:e,emit:s,store:r,t:o,windowWidth:i,fetchSignatureFlagFromUISettings:l,isSmallScreen:c,viewInModal:d,contacts:u,selectedContact:m,targetInbox:h,isCreatingContact:_,isFetchingInboxes:E,isSearching:y,showComposeNewConversation:b,contactById:A,contactsUiFlags:T,currentUser:I,globalConfig:N,uiFlags:x,messageSignature:R,inboxesList:M,sendWithSignature:w,directUploadsEnabled:D,activeContact:B,composePopoverClass:k,onContactSearch:V,resetContacts:F,handleSelectedContact:$,handleTargetInbox:Y,clearSelectedContact:j,closeCompose:U,createConversation:J,toggle:te,handleClickOutside:q,onModalBackdropClick:K,keyboardEvents:W,ref:P,computed:S,onMounted:Pe,watch:je,get useStore(){return Fe},get useMapGetter(){return le},get useI18n(){return Q},get useWindowSize(){return ws},get useUISettings(){return Ct},get vOnClickOutside(){return Ga},get useAlert(){return Z},get ExceptionWithMessage(){return Xr},get debounce(){return Ja},get useKeyboardEvents(){return jn},get searchContacts(){return EN},get createNewContact(){return SN},get fetchContactableInboxes(){return TN},get processContactableInboxes(){return pE},get mergeInboxDetails(){return Vb},get wootConstants(){return gt},ComposeNewConversationForm:ort};return Object.defineProperty(ee,"__isScriptSetup",{enumerable:!1,value:!0}),ee}};function irt(t,n,a,e,s,r){return ce((p(),g("div",{class:oe(["relative",{"z-50":e.showComposeNewConversation&&!e.viewInModal}])},[qe(t.$slots,"trigger",{isOpen:e.showComposeNewConversation,toggle:e.toggle}),e.showComposeNewConversation?(p(),g("div",{key:0,class:oe({"fixed z-50 bg-n-alpha-black1 backdrop-blur-[4px] flex items-start pt-[clamp(3rem,15vh,12rem)] justify-center inset-0":e.viewInModal}),onClick:Ve(e.onModalBackdropClick,["self"])},[v(e.ComposeNewConversationForm,{class:oe([{"mt-2":!e.viewInModal},e.composePopoverClass]),contacts:e.contacts,"contact-id":a.contactId,"is-loading":e.isSearching,"current-user":e.currentUser,"selected-contact":e.selectedContact,"target-inbox":e.targetInbox,"is-creating-contact":e.isCreatingContact,"is-fetching-inboxes":e.isFetchingInboxes,"is-direct-uploads-enabled":e.directUploadsEnabled,"contact-conversations-ui-flags":e.uiFlags,"contacts-ui-flags":e.contactsUiFlags,"message-signature":e.messageSignature,"send-with-signature":e.sendWithSignature,onSearchContacts:e.onContactSearch,onResetContactSearch:e.resetContacts,onUpdateSelectedContact:e.handleSelectedContact,onUpdateTargetInbox:e.handleTargetInbox,onClearSelectedContact:e.clearSelectedContact,onCreateConversation:e.createConversation,onDiscard:e.closeCompose},null,8,["class","contacts","contact-id","is-loading","current-user","selected-contact","target-inbox","is-creating-contact","is-fetching-inboxes","is-direct-uploads-enabled","contact-conversations-ui-flags","contacts-ui-flags","message-signature","send-with-signature","onSearchContacts"])],2)):O("v-if",!0)],2)),[[e.vOnClickOutside,[e.handleClickOutside,{ignore:["div.ProseMirror-prompt"]}]]])}const c_=G(rrt,[["render",irt],["__file","/app/app/javascript/dashboard/components-next/NewConversation/ComposeConversation.vue"]]),lrt=Object.assign({inheritAttrs:!1},{__name:"VoiceCallButton",props:{phone:{type:String,default:""},label:{type:String,default:""},icon:{type:[String,Object,Function],default:""},size:{type:String,default:"sm"},tooltipLabel:{type:String,default:""}},setup(t,{expose:n}){n();const a=t,e=Wc(),{t:s}=Q(),r=le("inboxes/getInboxes"),o=S(()=>(r.value||[]).filter(h=>h.channel_type===ht.VOICE)),i=S(()=>o.value.length>0),l=S(()=>i.value&&!!a.phone),c=P(null),m={props:a,attrs:e,t:s,inboxesList:r,voiceInboxes:o,hasVoiceInboxes:i,shouldRender:l,dialogRef:c,onClick:()=>{var h;if(o.value.length>1){(h=c.value)==null||h.open();return}Z(s("CONTACT_PANEL.CALL_UNDER_DEVELOPMENT"))},onPickInbox:()=>{var h;Z(s("CONTACT_PANEL.CALL_UNDER_DEVELOPMENT")),(h=c.value)==null||h.close()},computed:S,ref:P,useAttrs:Wc,get useI18n(){return Q},get useMapGetter(){return le},get INBOX_TYPES(){return ht},get useAlert(){return Z},Button:Se,Dialog:la};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}}),crt={class:"contents"},drt={class:"flex flex-col gap-2"},urt=["onClick"],prt={class:"flex items-center gap-2"},frt={class:"text-sm text-n-slate-12"},mrt={key:0,class:"text-xs text-n-slate-10"};function hrt(t,n,a,e,s,r){const o=nt("tooltip");return p(),g("span",crt,[e.shouldRender?ce((p(),L(e.Button,Ta({key:0},e.attrs,{label:a.label,icon:a.icon,size:a.size,onClick:e.onClick}),null,16,["label","icon","size"])),[[o,a.tooltipLabel||null,void 0,{"top-end":!0}]]):O("v-if",!0),e.shouldRender&&e.voiceInboxes.length>1?(p(),L(e.Dialog,{key:1,ref:"dialogRef",title:t.$t("CONTACT_PANEL.VOICE_INBOX_PICKER.TITLE"),"show-cancel-button":"","show-confirm-button":!1,width:"md"},{default:z(()=>[f("div",drt,[(p(!0),g(de,null,Ae(e.voiceInboxes,i=>(p(),g("button",{key:i.id,type:"button",class:"flex items-center justify-between w-full px-4 py-2 text-left rounded-lg hover:bg-n-alpha-2",onClick:l=>e.onPickInbox(i)},[f("div",prt,[n[0]||(n[0]=f("span",{class:"i-ri-phone-fill text-n-slate-10"},null,-1)),f("span",frt,C(i.name),1)]),i.phone_number?(p(),g("span",mrt,C(i.phone_number),1)):O("v-if",!0)],8,urt))),128))])]),_:1},8,["title"])):O("v-if",!0)])}const eP=G(lrt,[["render",hrt],["__file","/app/app/javascript/dashboard/components-next/Contacts/VoiceCallButton.vue"]]),_rt={components:{NextButton:Se,ContactInfoRow:tat,EditContact:xat,Avatar:qt,ComposeConversation:c_,SocialIcons:rat,ContactMergeModal:ost,VoiceCallButton:eP},props:{contact:{type:Object,default:()=>({})},showAvatar:{type:Boolean,default:!0}},emits:["panelClose"],setup(){const{isAdmin:t}=Es();return{isAdmin:t}},data(){return{showEditModal:!1,showMergeModal:!1,showDeleteModal:!1}},computed:{..._t({uiFlags:"contacts/getUIFlags"}),contactProfileLink(){return`/app/accounts/${this.$route.params.accountId}/contacts/${this.contact.id}`},additionalAttributes(){return this.contact.additional_attributes||{}},location(){const{country:t="",city:n="",country_code:a}=this.additionalAttributes,e=[n,t].filter(s=>!!s).join(", ");return e?this.findCountryFlag(a,e):""},socialProfiles(){const{social_profiles:t,screen_name:n,social_telegram_user_name:a}=this.additionalAttributes;return{twitter:n,telegram:a,...t||{}}},confirmDeleteMessage(){return` ${this.contact.name}?`}},watch:{"contact.id":{handler(t){this.$store.dispatch("contacts/fetchContactableInbox",t)},immediate:!0}},methods:{dynamicTime:kn,toggleEditModal(){this.showEditModal=!this.showEditModal},openComposeConversationModal(t){t(),Mt.emit(cn.NEW_CONVERSATION_MODAL,!0)},closeComposeConversationModal(){Mt.emit(cn.NEW_CONVERSATION_MODAL,!1)},toggleDeleteModal(){this.showDeleteModal=!this.showDeleteModal},confirmDeletion(){this.deleteContact(this.contact),this.closeDelete()},closeDelete(){this.showDeleteModal=!1,this.showEditModal=!1},findCountryFlag(t,n){try{if(!t)return`${n} `;const a=t==null?void 0:t.toLowerCase();return`${n} <span class="fi fi-${a} size-3.5"></span>`}catch{return""}},async deleteContact({id:t}){try{await this.$store.dispatch("contacts/delete",t),this.$emit("panelClose"),Z(this.$t("DELETE_CONTACT.API.SUCCESS_MESSAGE")),fm(this.$route.name)?this.$router.push({name:wG(this.$route.name)}):mm(this.$route.name)?this.$router.push({name:"inbox_view"}):this.$route.name!=="contacts_dashboard"&&this.$router.push({name:"contacts_dashboard"})}catch(n){Z(n.message?n.message:this.$t("DELETE_CONTACT.API.ERROR_MESSAGE"))}},closeMergeModal(){this.showMergeModal=!1},openMergeModal(){this.showMergeModal=!0}}},grt={class:"relative items-center w-full p-4"},brt={class:"flex flex-col w-full gap-2 text-left rtl:text-right"},vrt={class:"flex flex-row justify-between"},Ert={class:"flex flex-col items-start gap-1.5 min-w-0 w-full"},Srt={key:0,class:"flex items-center w-full min-w-0 gap-3"},Trt={class:"flex-shrink max-w-full min-w-0 my-0 text-base capitalize break-words text-n-slate-12"},Art={class:"flex flex-row items-center gap-2"},yrt={key:0,class:"i-lucide-info text-sm text-n-slate-10"},Irt=["href"],Crt={key:1,class:"break-words mb-0.5"},Ort={class:"flex flex-col items-start w-full gap-2"},Nrt={class:"flex items-center w-full mt-0.5 gap-2"};function xrt(t,n,a,e,s,r){const o=H("Avatar"),i=H("ContactInfoRow"),l=H("SocialIcons"),c=H("NextButton"),d=H("ComposeConversation"),u=H("VoiceCallButton"),m=H("EditContact"),h=H("ContactMergeModal"),_=H("woot-delete-modal"),E=nt("tooltip");return p(),g("div",grt,[f("div",brt,[f("div",vrt,[a.showAvatar?(p(),L(o,{key:0,src:a.contact.thumbnail,name:a.contact.name,status:a.contact.availability_status,size:48,"hide-offline-status":"","rounded-full":""},null,8,["src","name","status"])):O("v-if",!0)]),f("div",Ert,[a.showAvatar?(p(),g("div",Srt,[f("h3",Trt,C(a.contact.name),1),f("div",Art,[a.contact.created_at?ce((p(),g("span",yrt,null,512)),[[E,`${t.$t("CONTACT_PANEL.CREATED_AT_LABEL")} ${r.dynamicTime(a.contact.created_at)}`,void 0,{left:!0}]]):O("v-if",!0),f("a",{href:r.contactProfileLink,target:"_blank",rel:"noopener nofollow noreferrer",class:"leading-3"},n[1]||(n[1]=[f("span",{class:"i-lucide-external-link text-sm text-n-slate-10"},null,-1)]),8,Irt)])])):O("v-if",!0),r.additionalAttributes.description?(p(),g("p",Crt,C(r.additionalAttributes.description),1)):O("v-if",!0),f("div",Ort,[v(i,{href:a.contact.email?`mailto:${a.contact.email}`:"",value:a.contact.email,icon:"mail",emoji:"",title:t.$t("CONTACT_PANEL.EMAIL_ADDRESS"),"show-copy":""},null,8,["href","value","title"]),v(i,{href:a.contact.phone_number?`tel:${a.contact.phone_number}`:"",value:a.contact.phone_number,icon:"call",emoji:"",title:t.$t("CONTACT_PANEL.PHONE_NUMBER"),"show-copy":""},null,8,["href","value","title"]),a.contact.identifier?(p(),L(i,{key:0,value:a.contact.identifier,icon:"contact-identify",emoji:"",title:t.$t("CONTACT_PANEL.IDENTIFIER")},null,8,["value","title"])):O("v-if",!0),v(i,{value:r.additionalAttributes.company_name,icon:"building-bank",emoji:"",title:t.$t("CONTACT_PANEL.COMPANY")},null,8,["value","title"]),r.location||r.additionalAttributes.location?(p(),L(i,{key:1,value:r.location||r.additionalAttributes.location,icon:"map",emoji:"",title:t.$t("CONTACT_PANEL.LOCATION")},null,8,["value","title"])):O("v-if",!0),v(l,{"social-profiles":r.socialProfiles},null,8,["social-profiles"])])]),f("div",Nrt,[v(d,{"contact-id":String(a.contact.id),"is-modal":"",onClose:r.closeComposeConversationModal},{trigger:z(({toggle:y})=>[ce(v(c,{icon:"i-ph-chat-circle-dots",slate:"",faded:"",sm:"",onClick:b=>r.openComposeConversationModal(y)},null,8,["onClick"]),[[E,t.$t("CONTACT_PANEL.NEW_MESSAGE"),void 0,{"top-end":!0}]])]),_:1},8,["contact-id","onClose"]),v(u,{phone:a.contact.phone_number,icon:"i-ri-phone-fill",size:"sm","tooltip-label":t.$t("CONTACT_PANEL.CALL"),slate:"",faded:""},null,8,["phone","tooltip-label"]),ce(v(c,{icon:"i-ph-pencil-simple",slate:"",faded:"",sm:"",onClick:r.toggleEditModal},null,8,["onClick"]),[[E,t.$t("EDIT_CONTACT.BUTTON_LABEL"),void 0,{"top-end":!0}]]),ce(v(c,{icon:"i-ph-arrows-merge",slate:"",faded:"",sm:"",disabled:t.uiFlags.isMerging,onClick:r.openMergeModal},null,8,["disabled","onClick"]),[[E,t.$t("CONTACT_PANEL.MERGE_CONTACT"),void 0,{"top-end":!0}]]),e.isAdmin?ce((p(),L(c,{key:0,icon:"i-ph-trash",slate:"",faded:"",sm:"",ruby:"",disabled:t.uiFlags.isDeleting,onClick:r.toggleDeleteModal},null,8,["disabled","onClick"])),[[E,t.$t("DELETE_CONTACT.BUTTON_LABEL"),void 0,{"top-end":!0}]]):O("v-if",!0)]),s.showEditModal?(p(),L(m,{key:0,show:s.showEditModal,contact:a.contact,onCancel:r.toggleEditModal},null,8,["show","contact","onCancel"])):O("v-if",!0),s.showMergeModal?(p(),L(h,{key:1,"primary-contact":a.contact,show:s.showMergeModal,onClose:r.closeMergeModal},null,8,["primary-contact","show","onClose"])):O("v-if",!0)]),s.showDeleteModal?(p(),L(_,{key:0,show:s.showDeleteModal,"onUpdate:show":n[0]||(n[0]=y=>s.showDeleteModal=y),"on-close":r.closeDelete,"on-confirm":r.confirmDeletion,title:t.$t("DELETE_CONTACT.CONFIRM.TITLE"),message:t.$t("DELETE_CONTACT.CONFIRM.MESSAGE"),"message-value":r.confirmDeleteMessage,"confirm-text":t.$t("DELETE_CONTACT.CONFIRM.YES"),"reject-text":t.$t("DELETE_CONTACT.CONFIRM.NO")},null,8,["show","on-close","on-confirm","title","message","message-value","confirm-text","reject-text"])):O("v-if",!0)])}const Rrt=G(_rt,[["render",xrt],["__file","/app/app/javascript/dashboard/routes/dashboard/conversation/contact/ContactInfo.vue"]]),wrt={__name:"ContactNoteItem",props:{note:{type:Object,required:!0},writtenBy:{type:String,required:!0},allowDelete:{type:Boolean,default:!1},collapsible:{type:Boolean,default:!1}},emits:["delete"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=xn("noteContentRef"),o=P(!1),[i,l]=$t(),{t:c}=Q(),{formatMessage:d}=ta(),u=()=>{s("delete",e.note.id)};Pe(()=>{var h;e.collapsible&&(o.value=((h=r.value)==null?void 0:h.clientHeight)>91)});const m={props:e,emit:s,noteContentRef:r,needsCollapse:o,isExpanded:i,toggleExpanded:l,t:c,formatMessage:d,handleDelete:u,useTemplateRef:xn,onMounted:Pe,ref:P,get useI18n(){return Q},get dynamicTime(){return kn},get useToggle(){return $t},get useMessageFormatter(){return ta},Avatar:qt,Button:Se};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}},Mrt={class:"flex flex-col gap-2 border-b border-n-strong group/note"},Lrt={class:"flex items-center justify-between gap-2"},Drt={class:"flex items-center gap-1.5 min-w-0"},Prt={class:"min-w-0 truncate"},krt={class:"inline-flex items-center gap-1 text-sm text-n-slate-11"},Brt={class:"font-medium text-n-slate-12"},Frt={class:"font-medium text-n-slate-12"},Urt={key:0};function $rt(t,n,a,e,s,r){var i,l,c,d,u,m;const o=nt("dompurify-html");return p(),g("div",Mrt,[f("div",Lrt,[f("div",Drt,[v(e.Avatar,{name:((l=(i=a.note)==null?void 0:i.user)==null?void 0:l.name)||"Bot",src:(d=(c=a.note)==null?void 0:c.user)!=null&&d.name?(m=(u=a.note)==null?void 0:u.user)==null?void 0:m.thumbnail:"/assets/images/chatwoot_bot.png",size:16,"rounded-full":""},null,8,["name","src"]),f("div",Prt,[f("span",krt,[f("span",Brt,C(a.writtenBy),1),Oe(" "+C(e.t("CONTACTS_LAYOUT.SIDEBAR.NOTES.WROTE"))+" ",1),f("span",Frt,C(e.dynamicTime(a.note.createdAt)),1)])])]),a.allowDelete?(p(),L(e.Button,{key:0,variant:"faded",color:"ruby",size:"xs",icon:"i-lucide-trash",class:"opacity-0 group-hover/note:opacity-100",onClick:e.handleDelete})):O("v-if",!0)]),ce(f("p",{ref:"noteContentRef",class:oe(["mb-0 prose-sm prose-p:text-sm prose-p:leading-relaxed prose-p:mb-1 prose-p:mt-0 prose-ul:mb-1 prose-ul:mt-0 text-n-slate-12",{"line-clamp-4":a.collapsible&&!e.isExpanded&&e.needsCollapse}])},null,2),[[o,e.formatMessage(a.note.content||"")]]),a.collapsible&&e.needsCollapse?(p(),g("p",Urt,[v(e.Button,{variant:"faded",color:"blue",size:"xs",icon:e.isExpanded?"i-lucide-chevron-up":"i-lucide-chevron-down",onClick:n[0]||(n[0]=()=>e.toggleExpanded())},{default:z(()=>[e.isExpanded?(p(),g(de,{key:0},[Oe(C(e.t("CONTACTS_LAYOUT.SIDEBAR.NOTES.COLLAPSE")),1)],64)):(p(),g(de,{key:1},[Oe(C(e.t("CONTACTS_LAYOUT.SIDEBAR.NOTES.EXPAND")),1)],64))]),_:1},8,["icon"])])):O("v-if",!0)])}const tP=G(wrt,[["render",$rt],["__file","/app/app/javascript/dashboard/components-next/Contacts/ContactsSidebar/components/ContactNoteItem.vue"]]),Grt={__name:"ContactNotes",props:{contactId:{type:[String,Number],required:!0}},setup(t,{expose:n}){n();const a=t,{t:e}=Q(),s=Fe(),r=le("getCurrentUser"),o=le("contactNotes/getUIFlags"),i=le("contactNotes/getAllNotesByContactId"),l=S(()=>o.value.isFetching),c=S(()=>o.value.isCreating),d=S(()=>a.contactId),u=P(""),m=P(!1),h=S(()=>d.value?i.value(d.value)||[]:[]),_=({user:N}={})=>{var R;const x=(R=r.value)==null?void 0:R.id;return(N==null?void 0:N.id)===x?e("CONTACTS_LAYOUT.SIDEBAR.NOTES.YOU"):(N==null?void 0:N.name)||e("CONVERSATION.BOT")},E=()=>{d.value&&(u.value="",m.value=!0)},y=()=>{m.value=!1,u.value=""},b=async()=>{!d.value||!u.value||c.value||(await s.dispatch("contactNotes/create",{content:u.value,contactId:d.value}),u.value="",y())},A=N=>{!d.value||!N||s.dispatch("contactNotes/delete",{noteId:N,contactId:d.value})},T={"$mod+Enter":{action:b,allowOnFocusedInput:!0}};jn(T),je(d,N=>{y(),N&&s.dispatch("contactNotes/get",{contactId:N})},{immediate:!0});const I={props:a,t:e,store:s,currentUser:r,uiFlags:o,notesByContact:i,isFetchingNotes:l,isCreatingNote:c,contactId:d,noteContent:u,shouldShowCreateModal:m,notes:h,getWrittenBy:_,openCreateModal:E,closeCreateModal:y,onAdd:b,onDelete:A,keyboardEvents:T,watch:je,computed:S,ref:P,get useI18n(){return Q},get useKeyboardEvents(){return jn},get useStore(){return Fe},get useMapGetter(){return le},Editor:Ds,NextButton:Se,ContactNoteItem:tP,Spinner:$n};return Object.defineProperty(I,"__isScriptSetup",{enumerable:!1,value:!0}),I}},Vrt={class:"px-4 pt-3 pb-2"},Hrt={key:0,class:"flex items-center justify-center py-8 text-n-slate-11"},jrt={key:1,class:"flex flex-col max-h-[300px] overflow-y-auto"},Wrt={key:2,class:"px-6 py-6 text-sm leading-6 text-center text-n-slate-11"},zrt={class:"flex w-full flex-col gap-6 px-6 py-6"},Yrt={class:"text-lg font-semibold text-n-slate-12"},Krt={class:"flex items-center justify-end gap-3"};function Xrt(t,n,a,e,s,r){const o=H("woot-modal");return p(),g("div",null,[f("div",Vrt,[v(e.NextButton,{ghost:"",xs:"",icon:"i-lucide-plus",label:t.$t("CONTACTS_LAYOUT.SIDEBAR.NOTES.ADD_NOTE"),disabled:!e.contactId||e.isFetchingNotes,onClick:e.openCreateModal},null,8,["label","disabled"])]),e.isFetchingNotes?(p(),g("div",Hrt,[v(e.Spinner)])):e.notes.length?(p(),g("div",jrt,[(p(!0),g(de,null,Ae(e.notes,i=>(p(),L(e.ContactNoteItem,{key:i.id,class:"py-4 last-of-type:border-b-0 px-4",note:i,"written-by":e.getWrittenBy(i),"allow-delete":"",collapsible:"",onDelete:e.onDelete},null,8,["note","written-by"]))),128))])):(p(),g("p",Wrt,C(e.t("CONTACTS_LAYOUT.SIDEBAR.NOTES.CONVERSATION_EMPTY_STATE")),1)),v(o,{show:e.shouldShowCreateModal,"onUpdate:show":n[1]||(n[1]=i=>e.shouldShowCreateModal=i),"on-close":e.closeCreateModal,"close-on-backdrop-click":!1,class:"!items-start [&>div]:!top-12 [&>div]:sticky"},{default:z(()=>[f("div",zrt,[f("h3",Yrt,C(e.t("CONTACTS_LAYOUT.SIDEBAR.NOTES.ADD_NOTE")),1),v(e.Editor,{modelValue:e.noteContent,"onUpdate:modelValue":n[0]||(n[0]=i=>e.noteContent=i),"focus-on-mount":"",placeholder:e.t("CONTACTS_LAYOUT.SIDEBAR.NOTES.PLACEHOLDER"),class:"[&>div]:!border-transparent [&>div]:px-4 [&>div]:py-4"},null,8,["modelValue","placeholder"]),f("div",Krt,[v(e.NextButton,{solid:"",blue:"",label:e.t("CONTACTS_LAYOUT.SIDEBAR.NOTES.SAVE"),"is-loading":e.isCreatingNote,disabled:!e.noteContent||e.isCreatingNote,onClick:e.onAdd},null,8,["label","is-loading","disabled"])])])]),_:1},8,["show"])])}const qrt=G(Grt,[["render",Xrt],["__file","/app/app/javascript/dashboard/routes/dashboard/conversation/contact/ContactNotes.vue"]]),Zrt={__name:"HelperTextPopup",props:{message:{type:String,default:""}},setup(t,{expose:n}){n();const a={};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},Qrt={class:"relative group w-[inherit] whitespace-normal z-20"},Jrt={class:"bg-n-background w-fit ltr:left-4 rtl:right-4 top-0 border p-2.5 group-hover:flex items-center hidden absolute border-n-weak rounded-lg shadow-md"},eit={class:"text-n-slate-12 mb-0 text-xs"};function tit(t,n,a,e,s,r){const o=H("fluent-icon");return p(),g("div",Qrt,[v(o,{icon:"info",size:"14",class:"mt-0.5 text-n-slate-11 absolute"}),f("div",Jrt,[f("p",eit,C(a.message),1)])])}const nit=G(Zrt,[["render",tit],["__file","/app/app/javascript/dashboard/components/ui/HelperTextPopup.vue"]]),ait="yyyy-MM-dd",sit={components:{MultiselectDropdown:ZD,HelperTextPopup:nit,NextButton:Se},props:{label:{type:String,required:!0},description:{type:String,default:""},values:{type:Array,default:()=>[]},value:{type:[String,Number,Boolean],default:""},showActions:{type:Boolean,default:!1},attributeType:{type:String,default:"text"},attributeRegex:{type:String,default:null},regexCue:{type:String,default:null},attributeKey:{type:String,required:!0},contactId:{type:Number,default:null}},emits:["update","delete","copy"],setup(){return{v$:rt()}},data(){return{isEditing:!1,editedValue:null}},computed:{displayValue(){return this.isAttributeTypeDate?this.value?new Date(this.value||new Date).toLocaleDateString():"---":this.isAttributeTypeCheckbox?this.value==="false"?!1:this.value:this.hasValue?this.value:"---"},formattedValue(){return this.isAttributeTypeDate?Mn(this.value?new Date(this.value):new Date,ait):this.value},listOptions(){return this.values.map((t,n)=>({id:n+1,name:t}))},selectedItem(){return{id:this.values.indexOf(this.editedValue)+1,name:this.editedValue}},isAttributeTypeCheckbox(){return this.attributeType==="checkbox"},isAttributeTypeList(){return this.attributeType==="list"},isAttributeTypeLink(){return this.attributeType==="link"},isAttributeTypeDate(){return this.attributeType==="date"},hasValue(){return this.value!==null&&this.value!==""},urlValue(){return qf(this.value)?this.value:"---"},hrefURL(){return qf(this.value)?this.value:""},notAttributeTypeCheckboxAndList(){return!this.isAttributeTypeCheckbox&&!this.isAttributeTypeList},inputType(){return this.isAttributeTypeLink?"url":this.attributeType},shouldShowErrorMessage(){return this.v$.editedValue.$error},errorMessage(){return this.v$.editedValue.url?this.$t("CUSTOM_ATTRIBUTES.VALIDATIONS.INVALID_URL"):this.v$.editedValue.regexValidation?this.$t("CUSTOM_ATTRIBUTES.VALIDATIONS.REQUIRED"):this.regexCue?this.regexCue:this.$t("CUSTOM_ATTRIBUTES.VALIDATIONS.INVALID_INPUT")}},watch:{value(){this.isEditing=!1,this.editedValue=this.formattedValue},contactId(){this.v$.$reset()}},validations(){return this.isAttributeTypeLink?{editedValue:{required:Ge,url:Pl}}:{editedValue:{required:Ge,regexValidation:t=>!(this.attributeRegex&&!zf(this.attributeRegex).test(t))}}},mounted(){this.editedValue=this.formattedValue,Mt.on(cn.FOCUS_CUSTOM_ATTRIBUTE,this.onFocusAttribute)},unmounted(){Mt.off(cn.FOCUS_CUSTOM_ATTRIBUTE,this.onFocusAttribute)},methods:{onFocusAttribute(t){this.attributeKey===t&&this.onEdit()},focusInput(){this.$refs.inputfield&&this.$refs.inputfield.focus()},onClickAway(){this.v$.$reset(),this.isEditing=!1},onEdit(){this.isEditing=!0,this.$nextTick(()=>{this.focusInput()})},onUpdateListValue(t){t&&(this.editedValue=t.name,this.onUpdate())},onUpdate(){const t=this.attributeType==="date"?um(this.editedValue):this.editedValue;this.v$.$touch(),!this.v$.$invalid&&(this.isEditing=!1,this.$emit("update",this.attributeKey,t))},onDelete(){this.isEditing=!1,this.v$.$reset(),this.$emit("delete",this.attributeKey)},onCopy(){this.$emit("copy",this.value)}}},oit={class:"px-4 py-3"},rit={class:"flex items-center mb-1"},iit={class:"flex items-center w-full m-0 text-sm error"},lit={key:0,class:"flex items-center"},cit={class:"flex items-center justify-between w-full"},dit={key:0},uit={key:0},pit={class:"flex items-center w-full mb-2"},fit=["type"],mit={key:0,class:"block w-full -mt-px text-sm font-normal text-n-ruby-11"},hit=["href"],_it={key:1,class:"group-hover:bg-n-slate-3 group-hover:dark:bg-n-solid-3 inline-block rounded-sm mb-0 break-all py-0.5 px-1"},git={class:"flex items-center max-w-[2rem] gap-1 ml-1 rtl:mr-1 rtl:ml-0"},bit={key:1};function vit(t,n,a,e,s,r){const o=H("HelperTextPopup"),i=H("NextButton"),l=H("MultiselectDropdown"),c=nt("tooltip"),d=nt("on-clickaway");return p(),g("div",oit,[f("div",rit,[f("h4",iit,[r.isAttributeTypeCheckbox?(p(),g("div",lit,[ce(f("input",{"onUpdate:modelValue":n[0]||(n[0]=u=>s.editedValue=u),class:"!my-0 ltr:mr-2 ltr:ml-0 rtl:mr-0 rtl:ml-2",type:"checkbox",onChange:n[1]||(n[1]=(...u)=>r.onUpdate&&r.onUpdate(...u))},null,544),[[bn,s.editedValue]])])):O("v-if",!0),f("div",cit,[f("span",{class:oe(["w-full inline-flex gap-1.5 items-start font-medium whitespace-nowrap text-sm mb-0",e.v$.editedValue.$error?"text-n-ruby-11":"text-n-slate-12"])},[Oe(C(a.label)+" ",1),a.description?(p(),L(o,{key:0,message:a.description,class:"mt-0.5"},null,8,["message"])):O("v-if",!0)],2),a.showActions&&r.hasValue?ce((p(),L(i,{key:0,slate:"",sm:"",link:"",icon:"i-lucide-trash-2",onClick:r.onDelete},null,8,["onClick"])),[[c,t.$t("CUSTOM_ATTRIBUTES.ACTIONS.DELETE"),void 0,{left:!0}]]):O("v-if",!0)])])]),r.notAttributeTypeCheckboxAndList?(p(),g("div",dit,[s.isEditing?ce((p(),g("div",uit,[f("div",pit,[ce(f("input",{ref:"inputfield","onUpdate:modelValue":n[2]||(n[2]=u=>s.editedValue=u),type:r.inputType,class:oe(["!h-8 ltr:!rounded-r-none rtl:!rounded-l-none !mb-0 !text-sm",{error:e.v$.editedValue.$error}]),autofocus:"true",onBlur:n[3]||(n[3]=(...u)=>e.v$.editedValue.$touch&&e.v$.editedValue.$touch(...u)),onKeyup:n[4]||(n[4]=Vn((...u)=>r.onUpdate&&r.onUpdate(...u),["enter"]))},null,42,fit),[[c2,s.editedValue]]),f("div",null,[v(i,{sm:"",icon:"i-lucide-check",class:"ltr:rounded-l-none rtl:rounded-r-none h-[34px]",onClick:r.onUpdate},null,8,["onClick"])])]),r.shouldShowErrorMessage?(p(),g("span",mit,C(r.errorMessage),1)):O("v-if",!0)])),[[d,r.onClickAway]]):O("v-if",!0),ce(f("div",{class:oe(["flex group",{"is-editable":a.showActions}])},[r.isAttributeTypeLink?(p(),g("a",{key:0,href:r.hrefURL,target:"_blank",rel:"noopener noreferrer",class:"group-hover:bg-n-slate-3 group-hover:dark:bg-n-solid-3 inline-block rounded-sm mb-0 break-all py-0.5 px-1"},C(r.urlValue),9,hit)):(p(),g("p",_it,C(r.displayValue),1)),f("div",git,[a.showActions&&r.hasValue?ce((p(),L(i,{key:0,xs:"",slate:"",ghost:"",icon:"i-lucide-clipboard",class:"hidden group-hover:flex flex-shrink-0",onClick:r.onCopy},null,8,["onClick"])),[[c,t.$t("CUSTOM_ATTRIBUTES.ACTIONS.COPY")]]):O("v-if",!0),a.showActions?ce((p(),L(i,{key:1,xs:"",slate:"",ghost:"",icon:"i-lucide-pen",class:"hidden group-hover:flex flex-shrink-0",onClick:r.onEdit},null,8,["onClick"])),[[c,t.$t("CUSTOM_ATTRIBUTES.ACTIONS.EDIT"),void 0,{right:!0}]]):O("v-if",!0)])],2),[[En,!s.isEditing]])])):O("v-if",!0),r.isAttributeTypeList?(p(),g("div",bit,[v(l,{options:r.listOptions,"selected-item":r.selectedItem,"has-thumbnail":!1,"multiselector-placeholder":t.$t("CUSTOM_ATTRIBUTES.FORM.ATTRIBUTE_TYPE.LIST.PLACEHOLDER"),"no-search-result":t.$t("CUSTOM_ATTRIBUTES.FORM.ATTRIBUTE_TYPE.LIST.NO_RESULT"),"input-placeholder":t.$t("CUSTOM_ATTRIBUTES.FORM.ATTRIBUTE_TYPE.LIST.SEARCH_INPUT_PLACEHOLDER"),onSelect:r.onUpdateListValue},null,8,["options","selected-item","multiselector-placeholder","no-search-result","input-placeholder","onSelect"])])):O("v-if",!0)])}const Eit=G(sit,[["render",vit],["__scopeId","data-v-42d99354"],["__file","/app/app/javascript/dashboard/components/CustomAttribute.vue"]]),Sit={__name:"CustomAttributes",props:{attributeType:{type:String,default:"conversation_attribute"},contactId:{type:Number,default:null},attributeFrom:{type:String,required:!0},emptyStateMessage:{type:String,default:""},staticElements:{type:Array,default:()=>[]}},setup(t,{expose:n}){n();const a=t,e=Fe(),s=xt(),r=lt(),{t:o}=Q(),{uiSettings:i,updateUISettings:l}=Ct(),c=P(!1),[d,u]=$t(!1),m=S(()=>s.getSelectedChat.value),h=S(()=>s["attributes/getAttributesByModel"].value(a.attributeType)),_=S(()=>{var Y,j;return((j=(Y=m.value.meta)==null?void 0:Y.sender)==null?void 0:j.id)||r.params.contactId||a.contactId}),E=S(()=>s["contacts/getContact"].value(_.value)),y=S(()=>a.attributeType==="conversation_attribute"?m.value.custom_attributes||{}:E.value.custom_attributes||{}),b=S(()=>m.value.id),A=S(()=>d.value?o("CUSTOM_ATTRIBUTES.SHOW_LESS"):o("CUSTOM_ATTRIBUTES.SHOW_MORE")),T=S(()=>h.value.map(Y=>{const j=Object.hasOwnProperty.call(y.value,Y.attribute_key);return{...Y,type:"custom_attribute",key:Y.attribute_key,value:j?y.value[Y.attribute_key]:""}})),I=S(()=>`conversation_elements_order_${a.attributeFrom}`),N=S(()=>{const Y=i.value[I.value]??[],j=[...a.staticElements,...T.value];return Y.length?j.sort((U,J)=>{const te=Y.indexOf(U.key),q=Y.indexOf(J.key);return te===-1&&q===-1?0:te===-1?1:q===-1?-1:te-q}):j}),x=S(()=>d.value||N.value.length<=5?N.value:N.value.slice(0,5)),R=(Y=[],j=[])=>{const U=[...j],J=new Set(j);return Y.filter(te=>te.startsWith("static-")&&!J.has(te)).forEach(te=>{const q=Y.slice(Y.indexOf(te)).find(K=>J.has(K));q?U.splice(U.indexOf(q),0,te):U.push(te)}),U},M=()=>{c.value=!1;const Y=i.value[I.value]??[],j=N.value.map(({key:J})=>J),U=R(Y,j);l({[I.value]:U})},w=()=>{if(!i.value[I.value]){const j=N.value.map(U=>U.key);l({[I.value]:j})}d.value=i.value[`show_all_attributes_${a.attributeFrom}`]||!1},D=()=>{u(),l({[`show_all_attributes_${a.attributeFrom}`]:d.value})},B=async(Y,j)=>{var J;const U={...y.value,[Y]:j};try{a.attributeType==="conversation_attribute"?await e.dispatch("updateCustomAttributes",{conversationId:b.value,customAttributes:U}):e.dispatch("contacts/update",{id:a.contactId,customAttributes:U}),Z(o("CUSTOM_ATTRIBUTES.FORM.UPDATE.SUCCESS"))}catch(te){const q=((J=te==null?void 0:te.response)==null?void 0:J.message)||o("CUSTOM_ATTRIBUTES.FORM.UPDATE.ERROR");Z(q)}},k=async Y=>{var j;try{const{[Y]:U,...J}=y.value;a.attributeType==="conversation_attribute"?await e.dispatch("updateCustomAttributes",{conversationId:b.value,customAttributes:J}):e.dispatch("contacts/deleteCustomAttributes",{id:a.contactId,customAttributes:[Y]}),Z(o("CUSTOM_ATTRIBUTES.FORM.DELETE.SUCCESS"))}catch(U){const J=((j=U==null?void 0:U.response)==null?void 0:j.message)||o("CUSTOM_ATTRIBUTES.FORM.DELETE.ERROR");Z(J)}},V=async Y=>{await Ra(Y),Z(o("CUSTOM_ATTRIBUTES.COPY_SUCCESSFUL"))};Pe(()=>{w()});const $={props:a,store:e,getters:s,route:r,t:o,uiSettings:i,updateUISettings:l,dragging:c,showAllAttributes:d,toggleShowAllAttributes:u,currentChat:m,attributes:h,contactIdentifier:_,contact:E,customAttributes:y,conversationId:b,toggleButtonText:A,filteredCustomAttributes:T,orderKey:I,combinedElements:N,displayedElements:x,reorderElementsWithStaticPreservation:R,onDragEnd:M,initializeSettings:w,onClickToggle:D,onUpdate:B,onDelete:k,onCopy:V,evenClass:["[&>*:nth-child(odd)]:!bg-n-background [&>*:nth-child(even)]:!bg-n-slate-2","dark:[&>*:nth-child(odd)]:!bg-n-background dark:[&>*:nth-child(even)]:!bg-n-solid-1"],computed:S,onMounted:Pe,ref:P,get Draggable(){return yd},get useToggle(){return $t},get useRoute(){return lt},get useStore(){return Fe},get useStoreGetters(){return xt},get useAlert(){return Z},get useI18n(){return Q},get useUISettings(){return Ct},get copyTextToClipboard(){return Ra},CustomAttribute:Eit,NextButton:Se};return Object.defineProperty($,"__isScriptSetup",{enumerable:!1,value:!0}),$}},Tit={class:"conversation--details"},Ait={key:0,class:"p-3 text-center"},yit={key:1,class:"flex items-center px-2 py-2"};function Iit(t,n,a,e,s,r){return p(),g("div",Tit,[v(e.Draggable,{list:e.displayedElements,disabled:!e.showAllAttributes,animation:"200","ghost-class":"ghost",handle:".drag-handle","item-key":"key",class:oe(["last:rounded-b-lg",e.evenClass]),onStart:n[0]||(n[0]=o=>e.dragging=!0),onEnd:e.onDragEnd},{item:z(({element:o})=>[f("div",{class:oe(["drag-handle relative border-b border-n-weak/50 dark:border-n-weak/90",{"cursor-grab":e.showAllAttributes,"last:border-transparent dark:last:border-transparent":e.combinedElements.length<=5}])},[o.type==="static_attribute"?qe(t.$slots,"staticItem",{key:0,element:o},void 0,!0):(p(),L(e.CustomAttribute,{key:o.id,"attribute-key":o.attribute_key,"attribute-type":o.attribute_display_type,values:o.attribute_values,label:o.attribute_display_name,description:o.attribute_description,value:o.value,"show-actions":"","attribute-regex":o.regex_pattern,"regex-cue":o.regex_cue,"contact-id":a.contactId,onUpdate:e.onUpdate,onDelete:e.onDelete,onCopy:e.onCopy},null,8,["attribute-key","attribute-type","values","label","description","value","attribute-regex","regex-cue","contact-id"]))],2)]),_:3},8,["list","disabled"]),!e.displayedElements.length&&a.emptyStateMessage?(p(),g("p",Ait,C(a.emptyStateMessage),1)):O("v-if",!0),O(" Show more and show less buttons show it if the combinedElements length is greater than 5 "),e.combinedElements.length>5?(p(),g("div",yit,[v(e.NextButton,{ghost:"",xs:"",icon:e.showAllAttributes?"i-lucide-chevron-up":"i-lucide-chevron-down",label:e.toggleButtonText,onClick:e.onClickToggle},null,8,["icon","label"])])):O("v-if",!0)])}const nP=G(Sit,[["render",Iit],["__scopeId","data-v-62b69b50"],["__file","/app/app/javascript/dashboard/routes/dashboard/conversation/customAttributes/CustomAttributes.vue"]]),Cit={__name:"ConversationInfo",props:{conversationAttributes:{type:Object,default:()=>({})},contactAttributes:{type:Object,default:()=>({})}},setup(t,{expose:n}){n();const a=t,e=S(()=>a.conversationAttributes.referer),s=S(()=>{var m;return(m=a.conversationAttributes.initiated_at)==null?void 0:m.timestamp}),r=S(()=>a.conversationAttributes.browser),o=S(()=>{if(!r.value)return"";const{browser_name:m="",browser_version:h=""}=r.value;return`${m} ${h}`}),i=S(()=>sA(a.conversationAttributes.browser_language)),l=S(()=>{if(!r.value)return"";const{platform_name:m="",platform_version:h=""}=r.value;return`${m} ${h}`}),c=S(()=>a.contactAttributes.created_at_ip),d=S(()=>[{content:s,title:"CONTACT_PANEL.INITIATED_AT",key:"static-initiated-at",type:"static_attribute"},{content:i,title:"CONTACT_PANEL.BROWSER_LANGUAGE",key:"static-browser-language",type:"static_attribute"},{content:e,title:"CONTACT_PANEL.INITIATED_FROM",key:"static-referer",type:"static_attribute"},{content:o,title:"CONTACT_PANEL.BROWSER",key:"static-browser",type:"static_attribute"},{content:l,title:"CONTACT_PANEL.OS",key:"static-platform",type:"static_attribute"},{content:c,title:"CONTACT_PANEL.IP_ADDRESS",key:"static-ip-address",type:"static_attribute"}].filter(m=>!!m.content.value)),u={props:a,referer:e,initiatedAt:s,browserInfo:r,browserName:o,browserLanguage:i,platformName:l,createdAtIp:c,staticElements:d,computed:S,get getLanguageName(){return sA},ContactDetailsItem:XD,CustomAttributes:nP};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}},Oit={class:"conversation--details"},Nit=["href"];function xit(t,n,a,e,s,r){return p(),g("div",Oit,[v(e.CustomAttributes,{"static-elements":e.staticElements,"attribute-class":"conversation--attribute","attribute-from":"conversation_panel","attribute-type":"conversation_attribute"},{staticItem:z(({element:o})=>[(p(),L(e.ContactDetailsItem,{key:o.title,title:t.$t(o.title),value:o.content.value},{default:z(()=>[o.key==="static-referer"?(p(),g("a",{key:0,href:o.content.value,rel:"noopener noreferrer nofollow",target:"_blank",class:"text-n-brand"},C(o.content.value),9,Nit)):O("v-if",!0)]),_:2},1032,["title","value"]))]),_:1},8,["static-elements"])])}const Rit=G(Cit,[["render",xit],["__file","/app/app/javascript/dashboard/routes/dashboard/conversation/ConversationInfo.vue"]]),wit={__name:"MacroPreview",props:{macro:{type:Object,required:!0}},setup(t,{expose:n}){n();const a=t,e=le("labels/getLabels"),s=le("teams/getTeams"),r=le("agents/getAgents"),o=(c,d)=>({assign_team:vC(s.value,d),add_label:Jg(e.value,d),remove_label:Jg(e.value,d),assign_agent:EC(r.value,d),mute_conversation:null,snooze_conversation:null,resolve_conversation:null,remove_assigned_team:null,send_webhook_event:d[0],send_message:d[0],send_email_transcript:d[0],add_private_note:d[0]})[c]||"",i=S(()=>a.macro.actions.map(c=>({actionName:bC(c.action_name),actionValue:o(c.action_name,c.action_params)}))),l={props:a,labels:e,teams:s,agents:r,getActionValue:o,resolvedMacro:i,computed:S,get useMapGetter(){return le},get resolveActionName(){return bC},get resolveTeamIds(){return vC},get resolveLabels(){return Jg},get resolveAgents(){return EC}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}},Mit={class:"macro-preview absolute border border-n-weak max-h-[22.5rem] z-50 w-64 rounded-md bg-n-alpha-3 backdrop-blur-[100px] shadow-lg bottom-8 right-8 overflow-y-auto p-4 text-left rtl:text-right"},Lit={class:"mb-4 text-sm text-n-slate-12"},Dit={key:0,class:"top-[0.390625rem] absolute -bottom-1 left-0 w-px bg-n-slate-6"},Pit={class:"mb-1 text-xs text-n-slate-11"},kit={class:"text-n-slate-12 text-sm"};function Bit(t,n,a,e,s,r){return p(),g("div",Mit,[f("h6",Lit,C(a.macro.name),1),(p(!0),g(de,null,Ae(e.resolvedMacro,(o,i)=>(p(),g("div",{key:i,class:"relative pl-4 macro-block"},[i!==a.macro.actions.length-1?(p(),g("div",Dit)):O("v-if",!0),n[0]||(n[0]=f("div",{class:"absolute -left-[0.21875rem] top-[0.2734375rem] w-2 h-2 rounded-full bg-n-solid-1 border-2 border-solid border-n-weak dark:border-n-slate-6"},null,-1)),f("p",Pit,C(t.$t(`MACROS.ACTIONS.${o.actionName}`)),1),f("p",kit,C(o.actionValue),1)]))),128))])}const Fit=G(wit,[["render",Bit],["__scopeId","data-v-319136b9"],["__file","/app/app/javascript/dashboard/routes/dashboard/conversation/Macros/MacroPreview.vue"]]),Uit={__name:"MacroItem",props:{macro:{type:Object,required:!0},conversationId:{type:[Number,String],required:!0}},setup(t,{expose:n}){n();const a=t,e=Fe(),{t:s}=Q(),r=P(!1),o=P(!1),d={props:a,store:e,t:s,isExecuting:r,showPreview:o,executeMacro:async u=>{try{r.value=!0,await e.dispatch("macros/execute",{macroId:u.id,conversationIds:[a.conversationId]}),Nt($a.EXECUTED_A_MACRO),Z(s("MACROS.EXECUTE.EXECUTED_SUCCESSFULLY"))}catch{Z(s("MACROS.ERROR"))}finally{r.value=!1}},toggleMacroPreview:()=>{o.value=!o.value},closeMacroPreview:()=>{o.value=!1},ref:P,get useI18n(){return Q},get useAlert(){return Z},get useStore(){return Fe},get CONVERSATION_EVENTS(){return $a},get useTrack(){return Nt},NextButton:Se,MacroPreview:Fit};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}},$it={class:"overflow-hidden whitespace-nowrap text-ellipsis font-medium text-n-slate-12"},Git={class:"flex items-center gap-1 justify-end"};function Vit(t,n,a,e,s,r){const o=nt("tooltip"),i=nt("on-clickaway");return p(),g("div",{class:oe(["relative flex items-center justify-between leading-4 rounded-md h-10 pl-3 pr-2",e.showPreview?"cursor-default":"drag-handle cursor-grab"])},[f("span",$it,C(a.macro.name),1),f("div",Git,[ce(v(e.NextButton,{icon:"i-lucide-info",slate:"",faded:"",xs:"",onClick:e.toggleMacroPreview},null,512),[[o,t.$t("MACROS.EXECUTE.PREVIEW"),void 0,{"left-start":!0}]]),ce(v(e.NextButton,{icon:"i-lucide-play",slate:"",faded:"",xs:"","is-loading":e.isExecuting,onClick:n[0]||(n[0]=l=>e.executeMacro(a.macro))},null,8,["is-loading"]),[[o,t.$t("MACROS.EXECUTE.BUTTON_TOOLTIP"),void 0,{"left-start":!0}]])]),v(Qa,{name:"menu-slide"},{default:z(()=>[e.showPreview?ce((p(),L(e.MacroPreview,{key:0,macro:a.macro},null,8,["macro"])),[[i,e.closeMacroPreview]]):O("v-if",!0)]),_:1})],2)}const Hit=G(Uit,[["render",Vit],["__file","/app/app/javascript/dashboard/routes/dashboard/conversation/Macros/MacroItem.vue"]]),jb="macros_display_order",jit={__name:"List",props:{conversationId:{type:[Number,String],required:!0}},setup(t,{expose:n}){n();const a=Fe(),{accountScopedUrl:e}=Ut(),{uiSettings:s,updateUISettings:r}=Ct(),o=P(!1),i=le("macros/getMacros"),l=le("macros/getUIFlags"),c=S({get:()=>{var E;const m=((E=s.value)==null?void 0:E[jb])??[],h=i.value??[];if(!m.length||!h.length)return h;const _=new Map(m.map((y,b)=>[y,b]));return[...h].sort((y,b)=>{const A=_.get(y.id)??1/0,T=_.get(b.id)??1/0;return A-T})},set:m=>{r({[jb]:m.map(({id:h})=>h)})}}),d=()=>{o.value=!1};Pe(()=>{a.dispatch("macros/get")});const u={store:a,accountScopedUrl:e,uiSettings:s,updateUISettings:r,dragging:o,macros:i,uiFlags:l,MACROS_ORDER_KEY:jb,orderedMacros:c,onDragEnd:d,computed:S,onMounted:Pe,ref:P,get useStore(){return Fe},get useMapGetter(){return le},get useAccount(){return Ut},get useUISettings(){return Ct},get Draggable(){return yd},Spinner:$n,MacroItem:Hit,NextButton:Se};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}},Wit={key:0,class:"p-3"},zit={class:"flex flex-col items-center justify-center h-full"},Yit={key:1,class:"flex items-center gap-2 justify-center p-6 text-n-slate-12"},Kit={class:"text-sm"};function Xit(t,n,a,e,s,r){const o=H("router-link");return p(),g("div",null,[!e.uiFlags.isFetching&&!e.macros.length?(p(),g("div",Wit,[f("p",zit,C(t.$t("MACROS.LIST.404")),1),v(o,{to:e.accountScopedUrl("settings/macros")},{default:z(()=>[v(e.NextButton,{faded:"",xs:"",icon:"i-lucide-plus",class:"mt-1",label:t.$t("MACROS.HEADER_BTN_TXT")},null,8,["label"])]),_:1},8,["to"])])):O("v-if",!0),e.uiFlags.isFetching?(p(),g("div",Yit,[f("span",Kit,C(t.$t("MACROS.LOADING")),1),v(e.Spinner,{class:"size-5"})])):O("v-if",!0),!e.uiFlags.isFetching&&e.macros.length?(p(),L(e.Draggable,{key:2,modelValue:e.orderedMacros,"onUpdate:modelValue":n[0]||(n[0]=i=>e.orderedMacros=i),class:"p-1",animation:"200","ghost-class":"ghost",handle:".drag-handle","item-key":"id",onStart:n[1]||(n[1]=i=>e.dragging=!0),onEnd:e.onDragEnd},{item:z(({element:i})=>[(p(),L(e.MacroItem,{key:i.id,macro:i,"conversation-id":a.conversationId},null,8,["macro","conversation-id"]))]),_:1},8,["modelValue"])):O("v-if",!0)])}const qit=G(jit,[["render",Xit],["__scopeId","data-v-17d9ecec"],["__file","/app/app/javascript/dashboard/routes/dashboard/conversation/Macros/List.vue"]]);class Zit extends Xs{constructor(){super("integrations/shopify",{accountScoped:!0})}getOrders(n){return axios.get(`${this.url}/orders`,{params:{contact_id:n}})}}const xN=new Zit,Qit={__name:"ShopifyOrderItem",props:{order:{type:Object,required:!0}},setup(t,{expose:n}){n();const a=t,{t:e}=Q(),s=m=>Mn(new Date(m),"MMM d, yyyy"),r=(m,h)=>new Intl.NumberFormat("en",{style:"currency",currency:h||"USD"}).format(m),o=m=>({paid:"bg-n-teal-5 text-n-teal-12"})[m]||"bg-n-solid-3 text-n-slate-12",i=(m,h="")=>`CONVERSATION_SIDEBAR.SHOPIFY.${m.toUpperCase()}_STATUS.${h.toUpperCase()}`,l=S(()=>{const{fulfillment_status:m}=a.order;return m?e(i("FULFILLMENT",m)):""}),c=S(()=>{const{financial_status:m}=a.order;return m?e(i("FINANCIAL",m)):""}),u={props:a,t:e,formatDate:s,formatCurrency:r,getStatusClass:o,getStatusI18nKey:i,fulfillmentStatus:l,financialStatus:c,getFulfillmentClass:m=>({fulfilled:"text-n-teal-9",partial:"text-n-amber-9",unfulfilled:"text-n-ruby-9"})[m]||"text-n-slate-11",computed:S,get format(){return Mn},get useI18n(){return Q}};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}},Jit={class:"py-3 border-b border-n-weak last:border-b-0 flex flex-col gap-1.5"},elt={class:"flex justify-between items-center"},tlt={class:"font-medium flex"},nlt=["href"],alt=["title"],slt={class:"text-sm text-n-slate-12"},olt={class:"text-n-slate-11 border-r border-n-weak pr-2"},rlt={class:"text-n-slate-11 pl-2"},ilt={key:0},llt=["title"];function clt(t,n,a,e,s,r){return p(),g("div",Jit,[f("div",elt,[f("div",tlt,[f("a",{href:a.order.admin_url,target:"_blank",rel:"noopener noreferrer",class:"hover:underline text-n-slate-12 cursor-pointer truncate"},[Oe(C(t.$t("CONVERSATION_SIDEBAR.SHOPIFY.ORDER_ID",{id:a.order.id}))+" ",1),n[0]||(n[0]=f("i",{class:"i-lucide-external-link pl-5"},null,-1))],8,nlt)]),f("div",{class:oe([e.getStatusClass(a.order.financial_status),"text-xs px-2 py-1 rounded capitalize truncate"]),title:e.financialStatus},C(e.financialStatus),11,alt)]),f("div",slt,[f("span",olt,C(e.formatDate(a.order.created_at)),1),f("span",rlt,C(e.formatCurrency(a.order.total_price,a.order.currency)),1)]),e.fulfillmentStatus?(p(),g("div",ilt,[f("span",{class:oe([e.getFulfillmentClass(a.order.fulfillment_status),"capitalize font-medium"]),title:e.fulfillmentStatus},C(e.fulfillmentStatus),11,llt)])):O("v-if",!0)])}const dlt=G(Qit,[["render",clt],["__file","/app/app/javascript/dashboard/components/widgets/conversation/ShopifyOrderItem.vue"]]),ult={__name:"ShopifyOrdersList",props:{contactId:{type:[Number,String],required:!0}},setup(t,{expose:n}){n();const a=t,e=Jn("contacts/getContact",a.contactId),s=S(()=>{var d,u;return!!((d=e.value)!=null&&d.email)||!!((u=e.value)!=null&&u.phone_number)}),r=P([]),o=P(!0),i=P(""),l=async()=>{var d,u;try{o.value=!0;const m=await xN.getOrders(a.contactId);r.value=m.data.orders}catch(m){i.value=((u=(d=m.response)==null?void 0:d.data)==null?void 0:u.error)||"CONVERSATION_SIDEBAR.SHOPIFY.ERROR"}finally{o.value=!1}};je(()=>a.contactId,()=>{s.value&&l()},{immediate:!0});const c={props:a,contact:e,hasSearchableInfo:s,orders:r,loading:o,error:i,fetchOrders:l,ref:P,watch:je,computed:S,get useFunctionGetter(){return Jn},Spinner:$n,get ShopifyAPI(){return xN},ShopifyOrderItem:dlt};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}},plt={class:"px-4 py-2 text-n-slate-12"},flt={key:0,class:"text-center text-n-slate-12"},mlt={key:1,class:"flex justify-center items-center p-4"},hlt={key:2,class:"text-center text-n-ruby-12"},_lt={key:3,class:"text-center text-n-slate-12"},glt={key:4};function blt(t,n,a,e,s,r){return p(),g("div",plt,[e.hasSearchableInfo?e.loading?(p(),g("div",mlt,[v(e.Spinner,{size:"32",class:"text-n-brand"})])):e.error?(p(),g("div",hlt,C(e.error),1)):e.orders.length?(p(),g("div",glt,[(p(!0),g(de,null,Ae(e.orders,o=>(p(),L(e.ShopifyOrderItem,{key:o.id,order:o},null,8,["order"]))),128))])):(p(),g("div",_lt,C(t.$t("CONVERSATION_SIDEBAR.SHOPIFY.NO_SHOPIFY_ORDERS")),1)):(p(),g("div",flt,C(t.$t("CONVERSATION_SIDEBAR.SHOPIFY.NO_SHOPIFY_ORDERS")),1))])}const vlt=G(ult,[["render",blt],["__file","/app/app/javascript/dashboard/components/widgets/conversation/ShopifyOrdersList.vue"]]),Elt={__name:"SidebarActionsHeader",props:{title:{type:String,required:!0},buttons:{type:Array,default:()=>[]}},emits:["click","close"],setup(t,{expose:n,emit:a}){n();const e=a,r={emit:e,handleButtonClick:o=>{e("click",o.key)},Button:Se};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},Slt={class:"flex items-center justify-between px-4 py-2 border-b border-n-weak h-12"},Tlt={class:"flex items-center justify-between gap-2 flex-1"},Alt={class:"font-medium text-sm text-n-slate-12"},ylt={class:"flex items-center"};function Ilt(t,n,a,e,s,r){const o=nt("tooltip");return p(),g("div",Slt,[f("div",Tlt,[f("span",Alt,C(a.title),1),f("div",ylt,[(p(!0),g(de,null,Ae(a.buttons,i=>ce((p(),L(e.Button,{key:i.key,icon:i.icon,ghost:"",sm:"",onClick:l=>e.handleButtonClick(i)},null,8,["icon","onClick"])),[[o,i.tooltip]])),128)),ce(v(e.Button,{icon:"i-lucide-x",ghost:"",sm:"",onClick:n[0]||(n[0]=i=>t.$emit("close"))},null,512),[[o,t.$t("GENERAL.CLOSE")]])])])])}const aP=G(Elt,[["render",Ilt],["__file","/app/app/javascript/dashboard/components-next/SidebarActionsHeader.vue"]]);class Clt extends Xs{constructor(){super("integrations/linear",{accountScoped:!0})}getTeams(){return axios.get(`${this.url}/teams`)}getTeamEntities(n){return axios.get(`${this.url}/team_entities?team_id=${n}`)}createIssue(n){return axios.post(`${this.url}/create_issue`,n)}link_issue(n,a,e){return axios.post(`${this.url}/link_issue`,{issue_id:a,conversation_id:n,title:e})}getLinkedIssue(n){return axios.get(`${this.url}/linked_issues?conversation_id=${n}`)}unlinkIssue(n,a,e){return axios.post(`${this.url}/unlink_issue`,{link_id:n,issue_id:a,conversation_id:e})}searchIssues(n){return axios.get(`${this.url}/search_issue?q=${n}`)}}const zo=new Clt,Olt={__name:"LinkIssue",props:{conversationId:{type:[Number,String],required:!0},title:{type:String,default:null}},emits:["close"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=P([]),i=P(!1),l=P({id:null,name:""}),c=P(!1),d=P(!1),u=P(""),m=()=>{o.value=[],i.value=!i.value},h=S(()=>l.value.id?l.value.name:r("INTEGRATION_SETTINGS.LINEAR.LINK.SELECT")),_=S(()=>!l.value.id||d.value),E=I=>{l.value=I,m()},y=()=>{s("close")},T={props:e,emit:s,t:r,issues:o,shouldShowDropdown:i,selectedOption:l,isFetching:c,isLinking:d,searchQuery:u,toggleDropdown:m,linkIssueTitle:h,isSubmitDisabled:_,onSelectIssue:E,onClose:y,onSearch:async I=>{if(o.value=[],!!I){u.value=I;try{c.value=!0;const N=await zo.searchIssues(I);o.value=N.data.map(x=>({id:x.identifier,name:`${x.identifier} ${x.title}`,icon:"status",iconColor:x.state.color}))}catch(N){const x=Vr(N,r("INTEGRATION_SETTINGS.LINEAR.LINK.ERROR"));Z(x)}finally{c.value=!1}}},linkIssue:async()=>{const{id:I}=l.value;try{d.value=!0,await zo.link_issue(e.conversationId,I,e.title),Z(r("INTEGRATION_SETTINGS.LINEAR.LINK.LINK_SUCCESS")),u.value="",o.value=[],y(),Nt(qc.LINK_ISSUE)}catch(N){const x=Vr(N,r("INTEGRATION_SETTINGS.LINEAR.LINK.LINK_ERROR"));Z(x)}finally{d.value=!1}},ref:P,computed:S,get useI18n(){return Q},get useTrack(){return Nt},get useAlert(){return Z},get LinearAPI(){return zo},FilterButton:pp,FilterListDropdown:e_,get parseLinearAPIErrorResponse(){return Vr},get LINEAR_EVENTS(){return qc},Button:Se};return Object.defineProperty(T,"__isScriptSetup",{enumerable:!1,value:!0}),T}},Nlt={class:"flex items-center justify-end w-full gap-2 mt-2"};function xlt(t,n,a,e,s,r){const o=nt("on-clickaway");return p(),g("div",{class:oe(["flex flex-col justify-between",e.shouldShowDropdown?"h-[256px]":"gap-2"])},[v(e.FilterButton,{"trailing-icon":"",icon:"i-lucide-chevron-down","button-text":e.linkIssueTitle,class:"justify-between w-full h-[2.5rem] py-1.5 px-3 rounded-xl bg-n-alpha-black2 outline outline-1 outline-n-weak dark:outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6",onClick:e.toggleDropdown},Ro({_:2},[e.shouldShowDropdown?{name:"dropdown",fn:z(()=>[e.issues?ce((p(),L(e.FilterListDropdown,{key:0,"show-clear-filter":!1,"list-items":e.issues,"active-filter-id":e.selectedOption.id,"is-loading":e.isFetching,"input-placeholder":t.$t("INTEGRATION_SETTINGS.LINEAR.LINK.SEARCH"),"loading-placeholder":t.$t("INTEGRATION_SETTINGS.LINEAR.LINK.LOADING"),"enable-search":"",class:"left-0 flex flex-col w-full overflow-y-auto h-fit !max-h-[160px] md:left-auto md:right-0 top-10",onOnSearch:e.onSearch,onSelect:e.onSelectIssue},null,8,["list-items","active-filter-id","is-loading","input-placeholder","loading-placeholder"])),[[o,e.toggleDropdown]]):O("v-if",!0)]),key:"0"}:void 0]),1032,["button-text"]),f("div",Nlt,[v(e.Button,{faded:"",slate:"",type:"reset",label:t.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.CANCEL"),onClick:Ve(e.onClose,["prevent"])},null,8,["label"]),v(e.Button,{type:"submit",label:t.$t("INTEGRATION_SETTINGS.LINEAR.LINK.TITLE"),disabled:e.isSubmitDisabled,"is-loading":e.isLinking,onClick:Ve(e.linkIssue,["prevent"])},null,8,["label","disabled","is-loading"])])],2)}const Rlt=G(Olt,[["render",xlt],["__file","/app/app/javascript/dashboard/components/widgets/conversation/linear/LinkIssue.vue"]]),RN={title:{required:Ge},teamId:{required:Ge}},wlt=Object.assign({name:"SearchableDropdown"},{__name:"SearchableDropdown",props:{type:{type:String,required:!0},label:{type:String,default:null},items:{type:Array,required:!0},value:{type:[Number,String],default:null},placeholder:{type:String,default:null},error:{type:String,default:null}},emits:["change"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=P(!1),o=()=>{r.value=!r.value},i=h=>{s("change",h,e.type),o()},l=S(()=>!!e.error),c=S(()=>e.value?e.items.find(h=>h.id===e.value):null),d=S(()=>{var h;return((h=c.value)==null?void 0:h.name)||e.placeholder}),u=S(()=>{var h;return((h=c.value)==null?void 0:h.id)||null}),m={props:e,emit:s,shouldShowDropdown:r,toggleDropdown:o,onSelect:i,hasError:l,selectedItem:c,selectedItemName:d,selectedItemId:u,ref:P,computed:S,FilterButton:pp,FilterListDropdown:e_};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}}),Mlt={key:0,class:"mt-1 message"};function Llt(t,n,a,e,s,r){const o=nt("on-clickaway");return p(),g("div",{class:oe(["flex w-full",a.type==="stateId"&&e.shouldShowDropdown?"h-[150px]":"gap-2"])},[f("label",{class:oe(["w-full",{error:e.hasError}])},[Oe(C(a.label)+" ",1),v(e.FilterButton,{"trailing-icon":"",icon:"i-lucide-chevron-down","button-text":e.selectedItemName,class:"justify-between w-full h-[2.5rem] py-1.5 px-3 rounded-xl bg-n-alpha-black2 outline outline-1 outline-n-weak dark:outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6",onClick:e.toggleDropdown},Ro({_:2},[e.shouldShowDropdown?{name:"dropdown",fn:z(()=>[ce(v(e.FilterListDropdown,{"show-clear-filter":!1,"list-items":a.items,"active-filter-id":e.selectedItemId,"input-placeholder":a.placeholder,"enable-search":"",class:"left-0 flex flex-col w-full overflow-y-auto h-fit !max-h-[160px] md:left-auto md:right-0 top-10",onSelect:e.onSelect},null,8,["list-items","active-filter-id","input-placeholder"]),[[o,e.toggleDropdown]])]),key:"0"}:void 0]),1032,["button-text"]),e.hasError?(p(),g("span",Mlt,C(a.error),1)):O("v-if",!0)],2)],2)}const Dlt=G(wlt,[["render",Llt],["__file","/app/app/javascript/dashboard/components/widgets/conversation/linear/SearchableDropdown.vue"]]),Plt={__name:"CreateIssue",props:{conversationId:{type:[Number,String],required:!0},title:{type:String,default:null}},emits:["close"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=P([]),i=P([]),l=P([]),c=P([]),d=P([]),u=[{id:0,name:"No priority"},{id:1,name:"Urgent"},{id:2,name:"High"},{id:3,name:"Normal"},{id:4,name:"Low"}],m=["Backlog","Todo","In Progress","Done","Canceled"],h=P(!1),_={borderRadius:"0.75rem",fontSize:"0.875rem"},E=Lt({title:"",description:"",teamId:"",assigneeId:"",labelId:"",stateId:"",priority:"",projectId:""}),y=rt(RN,E),b=S(()=>y.value.title.$invalid||h.value),A=S(()=>y.value.title.$error?r("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.TITLE.REQUIRED_ERROR"):""),T=S(()=>y.value.teamId.$error?r("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.TEAM.REQUIRED_ERROR"):""),I=S(()=>[{type:"teamId",label:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.TEAM.LABEL",items:o.value,placeholder:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.TEAM.SEARCH",error:T.value},{type:"assigneeId",label:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.ASSIGNEE.LABEL",items:i.value,placeholder:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.ASSIGNEE.SEARCH",error:""},{type:"labelId",label:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.LABEL.LABEL",items:c.value,placeholder:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.LABEL.SEARCH",error:""},{type:"priority",label:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.PRIORITY.LABEL",items:u,placeholder:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.PRIORITY.SEARCH",error:""},{type:"projectId",label:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.PROJECT.LABEL",items:l.value,placeholder:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.PROJECT.SEARCH",error:""},{type:"stateId",label:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.STATUS.LABEL",items:d.value,placeholder:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.STATUS.SEARCH",error:""}]),N=()=>s("close"),x=async()=>{try{const B=await zo.getTeams();o.value=B.data}catch(B){const k=Vr(B,r("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.LOADING_TEAM_ERROR"));Z(k)}},R=async()=>{try{const B=await zo.getTeamEntities(E.teamId);i.value=B.data.users,c.value=B.data.labels,l.value=B.data.projects,d.value=m.map(k=>B.data.states.find(V=>V.name===k)).filter(Boolean)}catch(B){const k=Vr(B,r("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.LOADING_TEAM_ENTITIES_ERROR"));Z(k)}},M=(B,k)=>{E[k]=B.id,k==="teamId"&&(E.assigneeId="",E.stateId="",E.labelId="",E.projectId="",R())},w=async()=>{if(y.value.$touch(),y.value.$invalid)return;const B={team_id:E.teamId,title:E.title,description:E.description||void 0,assignee_id:E.assigneeId||void 0,project_id:E.projectId||void 0,state_id:E.stateId||void 0,priority:E.priority||void 0,label_ids:E.labelId?[E.labelId]:void 0,conversation_id:e.conversationId};try{h.value=!0;const k=await zo.createIssue(B),{identifier:V}=k.data;await zo.link_issue(e.conversationId,V,e.title),Z(r("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.CREATE_SUCCESS")),Nt(qc.CREATE_ISSUE),N()}catch(k){const V=Vr(k,r("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.CREATE_ERROR"));Z(V)}finally{h.value=!1}};Pe(x);const D={props:e,emit:s,t:r,teams:o,assignees:i,projects:l,labels:c,statuses:d,priorities:u,statusDesiredOrder:m,isCreating:h,inputStyles:_,formState:E,v$:y,isSubmitDisabled:b,nameError:A,teamError:T,dropdowns:I,onClose:N,getTeams:x,getTeamEntities:R,onChange:M,createIssue:w,reactive:Lt,computed:S,onMounted:Pe,ref:P,get useVuelidate(){return rt},get useI18n(){return Q},get useTrack(){return Nt},get useAlert(){return Z},get LinearAPI(){return zo},get validations(){return RN},get parseLinearAPIErrorResponse(){return Vr},SearchableDropdown:Dlt,get LINEAR_EVENTS(){return qc},Button:Se};return Object.defineProperty(D,"__isScriptSetup",{enumerable:!1,value:!0}),D}},klt=["placeholder"],Blt={class:"flex flex-col gap-4"},Flt={class:"flex items-center justify-end w-full gap-2 mt-8"};function Ult(t,n,a,e,s,r){const o=H("woot-input");return p(),g("div",null,[v(o,{modelValue:e.formState.title,"onUpdate:modelValue":n[0]||(n[0]=i=>e.formState.title=i),class:oe([{error:e.v$.title.$error},"w-full"]),styles:{...e.inputStyles,padding:"0.375rem 0.75rem"},label:t.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.TITLE.LABEL"),placeholder:t.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.TITLE.PLACEHOLDER"),error:e.nameError,onInput:e.v$.title.$touch},null,8,["modelValue","class","styles","label","placeholder","error","onInput"]),f("label",null,[Oe(C(t.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.DESCRIPTION.LABEL"))+" ",1),ce(f("textarea",{"onUpdate:modelValue":n[1]||(n[1]=i=>e.formState.description=i),style:nn({...e.inputStyles,padding:"0.5rem 0.75rem"}),rows:"3",class:"text-sm",placeholder:t.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.DESCRIPTION.PLACEHOLDER")},null,12,klt),[[Et,e.formState.description]])]),f("div",Blt,[(p(!0),g(de,null,Ae(e.dropdowns,i=>(p(),L(e.SearchableDropdown,{key:i.type,type:i.type,value:e.formState[i.type],label:t.$t(i.label),items:i.items,placeholder:t.$t(i.placeholder),error:i.error,onChange:e.onChange},null,8,["type","value","label","items","placeholder","error"]))),128))]),f("div",Flt,[v(e.Button,{faded:"",slate:"",type:"reset",label:t.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.CANCEL"),onClick:Ve(e.onClose,["prevent"])},null,8,["label"]),v(e.Button,{type:"submit",label:t.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.CREATE"),disabled:e.isSubmitDisabled,"is-loading":e.isCreating,onClick:Ve(e.createIssue,["prevent"])},null,8,["label","disabled","is-loading"])])])}const $lt=G(Plt,[["render",Ult],["__file","/app/app/javascript/dashboard/components/widgets/conversation/linear/CreateIssue.vue"]]),Glt={__name:"CreateOrLinkIssue",props:{accountId:{type:[Number,String],required:!0},conversation:{type:Object,required:!0}},emits:["close"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=P(0),i=S(()=>{const{meta:{sender:{name:m=null}={}}={}}=e.conversation;return r("INTEGRATION_SETTINGS.LINEAR.LINK.LINK_TITLE",{conversationId:e.conversation.id,name:m})}),l=P([{key:0,name:r("INTEGRATION_SETTINGS.LINEAR.CREATE")},{key:1,name:r("INTEGRATION_SETTINGS.LINEAR.LINK.TITLE")}]),u={props:e,emit:s,t:r,selectedTabIndex:o,title:i,tabs:l,onClose:()=>{s("close")},onClickTabChange:m=>{o.value=m},get useI18n(){return Q},computed:S,ref:P,LinkIssue:Rlt,CreateIssue:$lt};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}},Vlt={class:"flex flex-col h-auto overflow-auto"},Hlt={class:"flex flex-col h-auto overflow-auto"},jlt={class:"flex flex-col px-8 pb-4 mt-1"},Wlt={key:0,class:"flex flex-col px-8 pb-4"},zlt={key:1,class:"flex flex-col px-8 pb-4"};function Ylt(t,n,a,e,s,r){const o=H("woot-modal-header"),i=H("woot-tabs-item"),l=H("woot-tabs");return p(),g("div",Vlt,[v(o,{"header-title":t.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.TITLE"),"header-content":t.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.DESCRIPTION")},null,8,["header-title","header-content"]),f("div",Hlt,[f("div",jlt,[v(l,{class:"ltr:[&>ul]:pl-0 rtl:[&>ul]:pr-0",index:e.selectedTabIndex,onChange:e.onClickTabChange},{default:z(()=>[(p(!0),g(de,null,Ae(e.tabs,(c,d)=>(p(),L(i,{key:c.key,index:d,name:c.name,"show-badge":!1,"is-compact":""},null,8,["index","name"]))),128))]),_:1},8,["index"])]),e.selectedTabIndex===0?(p(),g("div",Wlt,[v(e.CreateIssue,{"account-id":a.accountId,"conversation-id":a.conversation.id,title:e.title,onClose:e.onClose},null,8,["account-id","conversation-id","title"])])):(p(),g("div",zlt,[v(e.LinkIssue,{"conversation-id":a.conversation.id,title:e.title,onClose:e.onClose},null,8,["conversation-id","title"])]))])])}const Klt=G(Glt,[["render",Ylt],["__file","/app/app/javascript/dashboard/components/widgets/conversation/linear/CreateOrLinkIssue.vue"]]),Xlt={__name:"CardPriorityIcon",props:{priority:{type:String,default:""}},setup(t,{expose:n}){n();const a={get CONVERSATION_PRIORITY(){return Ao}};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},qlt={class:"inline-flex items-center justify-center rounded-md"},Zlt={key:0,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Qlt={key:1,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Jlt={key:2,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ect={key:3,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function tct(t,n,a,e,s,r){return p(),g("div",qlt,[O(" Low Priority "),a.priority===e.CONVERSATION_PRIORITY.LOW?(p(),g("svg",Zlt,n[0]||(n[0]=[Ac('<mask id="mask0_2030_12879" style="mask-type:alpha;" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="20"><rect width="20" height="20" fill="#D9D9D9"></rect></mask><g mask="url(#mask0_2030_12879)"><rect x="3.33301" y="10" width="3.33333" height="6.66667" rx="1.66667" class="fill-n-amber-9"></rect><rect x="8.33301" y="6.6665" width="3.33333" height="10" rx="1.66667" class="fill-n-slate-6"></rect><rect x="13.333" y="3.3335" width="3.33333" height="13.3333" rx="1.66667" class="fill-n-slate-6"></rect></g>',2)]))):O("v-if",!0),O(" Medium Priority  "),a.priority===e.CONVERSATION_PRIORITY.MEDIUM?(p(),g("svg",Qlt,n[1]||(n[1]=[Ac('<mask id="mask0_2030_12879" style="mask-type:alpha;" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="20"><rect width="20" height="20" fill="#D9D9D9"></rect></mask><g mask="url(#mask0_2030_12879)"><rect x="3.33301" y="10" width="3.33333" height="6.66667" rx="1.66667" class="fill-n-amber-9"></rect><rect x="8.33301" y="6.6665" width="3.33333" height="10" rx="1.66667" class="fill-n-amber-9"></rect><rect x="13.333" y="3.3335" width="3.33333" height="13.3333" rx="1.66667" class="fill-n-slate-6"></rect></g>',2)]))):O("v-if",!0),O(" High Priority "),a.priority===e.CONVERSATION_PRIORITY.HIGH?(p(),g("svg",Jlt,n[2]||(n[2]=[Ac('<mask id="mask0_2030_12879" style="mask-type:alpha;" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="20"><rect width="20" height="20" fill="#D9D9D9"></rect></mask><g mask="url(#mask0_2030_12879)"><rect x="3.33301" y="10" width="3.33333" height="6.66667" rx="1.66667" class="fill-n-amber-9"></rect><rect x="8.33301" y="6.6665" width="3.33333" height="10" rx="1.66667" class="fill-n-amber-9"></rect><rect x="13.333" y="3.3335" width="3.33333" height="13.3333" rx="1.66667" class="fill-n-amber-9"></rect></g>',2)]))):O("v-if",!0),O(" Urgent Priority "),a.priority===e.CONVERSATION_PRIORITY.URGENT?(p(),g("svg",ect,n[3]||(n[3]=[Ac('<mask id="mask0_2030_12879" style="mask-type:alpha;" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="20"><rect width="20" height="20" fill="#D9D9D9"></rect></mask><g mask="url(#mask0_2030_12879)"><rect x="3.33301" y="10" width="3.33333" height="6.66667" rx="1.66667" class="fill-n-ruby-9"></rect><rect x="8.33301" y="6.6665" width="3.33333" height="10" rx="1.66667" class="fill-n-ruby-9"></rect><rect x="13.333" y="3.3335" width="3.33333" height="13.3333" rx="1.66667" class="fill-n-ruby-9"></rect></g>',2)]))):O("v-if",!0)])}const C1=G(Xlt,[["render",tct],["__file","/app/app/javascript/dashboard/components-next/Conversation/ConversationCard/CardPriorityIcon.vue"]]),nct={__name:"IssueHeader",props:{identifier:{type:String,required:!0},issueUrl:{type:String,required:!0}},emits:["unlinkIssue"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,i={props:e,emit:s,unlinkIssue:()=>{s("unlinkIssue")},openIssue:()=>{window.open(e.issueUrl,"_blank")},Button:Se};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}},act={class:"flex items-center justify-between"},sct={class:"flex items-center gap-2 px-2 py-1.5 border rounded-lg border-n-strong"},oct={class:"flex items-center gap-1"},rct={class:"text-xs font-medium text-n-slate-12"};function ict(t,n,a,e,s,r){const o=H("fluent-icon");return p(),g("div",act,[f("div",sct,[f("div",oct,[v(o,{icon:"linear",size:"16",class:"text-[#5E6AD2]","view-box":"0 0 19 19"}),f("span",rct,C(a.identifier),1)]),n[0]||(n[0]=f("span",{class:"w-px h-3 text-n-weak bg-n-weak"},null,-1)),v(e.Button,{link:"",xs:"",slate:"",icon:"i-lucide-arrow-up-right",class:"!size-4",onClick:e.openIssue})]),v(e.Button,{ghost:"",xs:"",slate:"",icon:"i-lucide-unlink",onClick:e.unlinkIssue})])}const lct=G(nct,[["render",ict],["__file","/app/app/javascript/dashboard/components/widgets/conversation/linear/IssueHeader.vue"]]),cct={__name:"LinearIssueItem",props:{linkedIssue:{type:Object,required:!0}},emits:["unlinkIssue"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{linkedIssue:r}=e,o={1:"Urgent",2:"High",3:"Medium",4:"Low"},i=S(()=>r.issue),l=S(()=>{const h=i.value.assignee;return h?{name:h.name,thumbnail:h.avatarUrl}:null}),c=S(()=>{var h;return((h=i.value.labels)==null?void 0:h.nodes)||[]}),d=S(()=>o[i.value.priority]),m={props:e,emit:s,linkedIssue:r,priorityMap:o,issue:i,assignee:l,labels:c,priorityLabel:d,unlinkIssue:()=>{s("unlinkIssue",r.id,r.issue.identifier)},computed:S,Icon:Bt,Avatar:qt,CardPriorityIcon:C1,IssueHeader:lct};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}},dct={class:"flex flex-col gap-4"},uct={class:"flex flex-col w-full"},pct={class:"mt-2 text-sm font-medium text-n-slate-12"},fct={key:0,class:"mt-1 text-sm text-n-slate-11 line-clamp-3"},mct={class:"flex flex-col gap-2"},hct={class:"flex items-center gap-2"},_ct={key:0,class:"flex items-center gap-1.5"},gct={class:"text-xs capitalize truncate text-n-slate-12"},bct={key:1,class:"w-px h-3 bg-n-slate-4"},vct={class:"flex items-center gap-1"},Ect={class:"text-xs text-n-slate-12"},Sct={key:2,class:"w-px h-3 bg-n-slate-4"},Tct={key:3,class:"flex items-center gap-1.5"},Act={class:"text-xs text-n-slate-12"},yct={key:0,class:"flex flex-wrap"};function Ict(t,n,a,e,s,r){var i,l;const o=H("woot-label");return p(),g("div",dct,[f("div",uct,[v(e.IssueHeader,{identifier:e.issue.identifier,"link-id":e.linkedIssue.id,"issue-url":e.issue.url,onUnlinkIssue:e.unlinkIssue},null,8,["identifier","link-id","issue-url"]),f("h3",pct,C(e.issue.title),1),e.issue.description?(p(),g("p",fct,C(e.issue.description),1)):O("v-if",!0)]),f("div",mct,[f("div",hct,[e.assignee?(p(),g("div",_ct,[v(e.Avatar,{src:e.assignee.thumbnail,name:e.assignee.name,size:16},null,8,["src","name"]),f("span",gct,C(e.assignee.name),1)])):O("v-if",!0),e.assignee?(p(),g("div",bct)):O("v-if",!0),f("div",vct,[v(e.Icon,{icon:"i-lucide-activity",class:"size-4",style:nn({color:(i=e.issue.state)==null?void 0:i.color})},null,8,["style"]),f("span",Ect,C((l=e.issue.state)==null?void 0:l.name),1)]),e.priorityLabel?(p(),g("div",Sct)):O("v-if",!0),e.priorityLabel?(p(),g("div",Tct,[v(e.CardPriorityIcon,{priority:e.priorityLabel.toLowerCase()},null,8,["priority"]),f("span",Act,C(e.priorityLabel),1)])):O("v-if",!0)]),e.labels.length?(p(),g("div",yct,[(p(!0),g(de,null,Ae(e.labels,c=>(p(),L(o,{key:c.id,title:c.name,description:c.description,color:c.color,variant:"smooth",small:""},null,8,["title","description","color"]))),128))])):O("v-if",!0)])])}const Cct=G(cct,[["render",Ict],["__file","/app/app/javascript/dashboard/components/widgets/conversation/linear/LinearIssueItem.vue"]]),Oct={__name:"IssuesList",props:{conversationId:{type:[Number,String],required:!0}},setup(t,{expose:n}){n();const a=t,{t:e}=Q(),s=xt(),r=P([]),o=P(!1),i=P(!1),l=s.getCurrentAccountId,c=S(()=>s.getConversationById.value(a.conversationId)||{}),d=S(()=>r.value.length>0),u=async()=>{o.value=!0,r.value=[];try{const y=await zo.getLinkedIssue(a.conversationId);r.value=y.data||[]}catch{}finally{o.value=!1}},m=async(y,b)=>{try{await zo.unlinkIssue(y,b,a.conversationId),Nt(qc.UNLINK_ISSUE),r.value=r.value.filter(A=>A.id!==y),Z(e("INTEGRATION_SETTINGS.LINEAR.UNLINK.SUCCESS"))}catch(A){const T=Vr(A,e("INTEGRATION_SETTINGS.LINEAR.UNLINK.ERROR"));Z(T)}},h=()=>{i.value=!0},_=()=>{i.value=!1,u()};je(()=>a.conversationId,()=>{u()}),Pe(()=>{u()});const E={props:a,t:e,getters:s,linkedIssues:r,isLoading:o,shouldShowCreateModal:i,currentAccountId:l,conversation:c,hasIssues:d,loadLinkedIssues:u,unlinkIssue:m,openCreateModal:h,closeCreateModal:_,computed:S,ref:P,onMounted:Pe,watch:je,get useAlert(){return Z},get useTrack(){return Nt},get useStoreGetters(){return xt},get useI18n(){return Q},get LinearAPI(){return zo},CreateOrLinkIssue:Klt,LinearIssueItem:Cct,NextButton:Se,Spinner:$n,get LINEAR_EVENTS(){return qc},get parseLinearAPIErrorResponse(){return Vr}};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}},Nct={class:"px-4 pt-3 pb-2"},xct={key:0,class:"flex justify-center p-8"},Rct={key:1,class:"flex justify-center p-4"},wct={class:"text-sm text-n-slate-11"},Mct={key:2,class:"max-h-[300px] overflow-y-auto"};function Lct(t,n,a,e,s,r){const o=H("woot-modal");return p(),g("div",null,[f("div",Nct,[v(e.NextButton,{ghost:"",xs:"",icon:"i-lucide-plus",label:t.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK_BUTTON"),onClick:e.openCreateModal},null,8,["label"])]),e.isLoading?(p(),g("div",xct,[v(e.Spinner)])):e.hasIssues?(p(),g("div",Mct,[(p(!0),g(de,null,Ae(e.linkedIssues,i=>(p(),L(e.LinearIssueItem,{key:i.id,class:"px-4 pt-3 pb-4 border-b border-n-weak last:border-b-0","linked-issue":i,onUnlinkIssue:e.unlinkIssue},null,8,["linked-issue"]))),128))])):(p(),g("div",Rct,[f("p",wct,C(t.$t("INTEGRATION_SETTINGS.LINEAR.NO_LINKED_ISSUES")),1)])),v(o,{show:e.shouldShowCreateModal,"onUpdate:show":n[0]||(n[0]=i=>e.shouldShowCreateModal=i),"on-close":e.closeCreateModal,"close-on-backdrop-click":!1,class:"!items-start [&>div]:!top-12 [&>div]:sticky"},{default:z(()=>[v(e.CreateOrLinkIssue,{conversation:e.conversation,"account-id":e.currentAccountId,onClose:e.closeCreateModal},null,8,["conversation","account-id"])]),_:1},8,["show"])])}const Dct=G(Oct,[["render",Lct],["__file","/app/app/javascript/dashboard/components/widgets/conversation/linear/IssuesList.vue"]]),wN="linear",Pct={__name:"LinearSetupCTA",setup(t,{expose:n}){n();const{isAdmin:a}=Es(),e=xt(),s=e.getCurrentAccountId,r=S(()=>vt(`accounts/${s.value}/settings/integrations/${wN}`)),i={isAdmin:a,getters:e,accountId:s,integrationId:wN,actionURL:r,openLinearAccount:()=>{window.open(r.value,"_blank")},computed:S,get useStoreGetters(){return xt},NextButton:Se,get frontendURL(){return vt},get useAdmin(){return Es}};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}},kct={class:"flex flex-col p-3"},Bct={class:"w-12 h-12 mb-3"},Fct=["src"],Uct=["src"],$ct={class:"flex-1 mb-4"},Gct={class:"mb-1.5 text-sm font-medium text-n-slate-12"},Vct={key:0,class:"text-sm text-n-slate-11"},Hct={key:1,class:"text-sm text-n-slate-11"};function jct(t,n,a,e,s,r){return p(),g("div",kct,[f("div",Bct,[f("img",{src:`/dashboard/images/integrations/${e.integrationId}.png`,class:"object-contain w-full h-full border rounded-md shadow-sm border-n-weak dark:hidden dark:bg-n-alpha-2"},null,8,Fct),f("img",{src:`/dashboard/images/integrations/${e.integrationId}-dark.png`,class:"hidden object-contain w-full h-full border rounded-md shadow-sm border-n-weak dark:block"},null,8,Uct)]),f("div",$ct,[f("h3",Gct,C(t.$t("INTEGRATION_SETTINGS.LINEAR.CTA.TITLE")),1),e.isAdmin?(p(),g("p",Vct,C(t.$t("INTEGRATION_SETTINGS.LINEAR.CTA.DESCRIPTION")),1)):(p(),g("p",Hct,C(t.$t("INTEGRATION_SETTINGS.LINEAR.CTA.AGENT_DESCRIPTION")),1))]),e.isAdmin?(p(),L(e.NextButton,{key:0,faded:"",slate:"",onClick:e.openLinearAccount},{default:z(()=>[Oe(C(t.$t("INTEGRATION_SETTINGS.LINEAR.CTA.BUTTON_TEXT")),1)]),_:1})):O("v-if",!0)])}const Wct=G(Pct,[["render",jct],["__file","/app/app/javascript/dashboard/components/widgets/conversation/linear/LinearSetupCTA.vue"]]),zct={__name:"ContactPanel",props:{conversationId:{type:[Number,String],required:!0},inboxId:{type:Number,default:void 0}},setup(t,{expose:n}){n();const a=t,{updateUISettings:e,isContactSidebarItemOpen:s,conversationSidebarItemsOrder:r,toggleSidebarUIState:o}=Ct(),i=P(!1),l=P([]),c=Jn("integrations/getIntegration","shopify"),d=S(()=>c.value.enabled),u=Jn("integrations/getIntegration","linear"),m=S(()=>{var k;return((k=u.value)==null?void 0:k.enabled)||!1}),h=Fe(),_=le("getSelectedChat"),E=S(()=>a.conversationId),y=le("conversationMetadata/getConversationMetadata"),b=S(()=>y.value(E.value)),A=S(()=>b.value.additional_attributes||{}),T=S(()=>{var k;return(k=_.value.meta)==null?void 0:k.channel}),I=le("contacts/getContact"),N=S(()=>{var k,V;return(V=(k=_.value.meta)==null?void 0:k.sender)==null?void 0:V.id}),x=S(()=>I.value(N.value)),R=S(()=>x.value.additional_attributes||{}),M=()=>{N.value&&h.dispatch("contacts/show",{id:N.value})};je(N,(k,V)=>{k&&k!==V&&M()});const w=()=>{i.value=!1,e({conversation_sidebar_items_order:l.value})},D=()=>{e({is_contact_sidebar_open:!1,is_copilot_panel_open:!1})};Pe(()=>{l.value=r.value,M(),h.dispatch("attributes/get",0),h.dispatch("integrations/get","linear")});const B={props:a,updateUISettings:e,isContactSidebarItemOpen:s,conversationSidebarItemsOrder:r,toggleSidebarUIState:o,dragging:i,conversationSidebarItems:l,shopifyIntegration:c,isShopifyFeatureEnabled:d,linearIntegration:u,isLinearIntegrationEnabled:m,store:h,currentChat:_,conversationId:E,conversationMetadataGetter:y,currentConversationMetaData:b,conversationAdditionalAttributes:A,channelType:T,contactGetter:I,contactId:N,contact:x,contactAdditionalAttributes:R,getContactDetails:M,onDragEnd:w,closeContactPanel:D,computed:S,watch:je,onMounted:Pe,ref:P,get useMapGetter(){return le},get useFunctionGetter(){return Jn},get useStore(){return Fe},get useUISettings(){return Ct},AccordionItem:gtt,ContactConversations:ytt,ConversationAction:xnt,ConversationParticipant:Wnt,ContactInfo:Rrt,ContactNotes:qrt,ConversationInfo:Rit,CustomAttributes:nP,get Draggable(){return yd},MacrosList:qit,ShopifyOrdersList:vlt,SidebarActionsHeader:aP,LinearIssuesList:Dct,LinearSetupCTA:Wct};return Object.defineProperty(B,"__isScriptSetup",{enumerable:!1,value:!0}),B}},Yct={class:"w-full"},Kct={class:"px-2 pb-8 list-group"},Xct={key:0,class:"conversation--actions"},qct={key:1,class:"conversation--actions"},Zct={key:2},Qct={key:3},Jct={key:4},edt={key:6},tdt={key:7},ndt={key:8};function adt(t,n,a,e,s,r){const o=H("woot-feature-toggle");return p(),g("div",Yct,[v(e.SidebarActionsHeader,{title:t.$t("CONVERSATION.SIDEBAR.CONTACT"),onClose:e.closeContactPanel},null,8,["title"]),v(e.ContactInfo,{contact:e.contact,"channel-type":e.channelType},null,8,["contact","channel-type"]),f("div",Kct,[v(e.Draggable,{list:e.conversationSidebarItems,animation:"200","ghost-class":"ghost",handle:".drag-handle","item-key":"name",class:"flex flex-col gap-3",onStart:n[9]||(n[9]=i=>e.dragging=!0),onEnd:e.onDragEnd},{item:z(({element:i})=>[i.name==="conversation_actions"?(p(),g("div",Xct,[v(e.AccordionItem,{title:t.$t("CONVERSATION_SIDEBAR.ACCORDION.CONVERSATION_ACTIONS"),"is-open":e.isContactSidebarItemOpen("is_conv_actions_open"),onToggle:n[0]||(n[0]=l=>e.toggleSidebarUIState("is_conv_actions_open",l))},{default:z(()=>[v(e.ConversationAction,{"conversation-id":e.conversationId,"inbox-id":a.inboxId},null,8,["conversation-id","inbox-id"])]),_:1},8,["title","is-open"])])):i.name==="conversation_participants"?(p(),g("div",qct,[v(e.AccordionItem,{title:t.$t("CONVERSATION_PARTICIPANTS.SIDEBAR_TITLE"),"is-open":e.isContactSidebarItemOpen("is_conv_participants_open"),onToggle:n[1]||(n[1]=l=>e.toggleSidebarUIState("is_conv_participants_open",l))},{default:z(()=>[v(e.ConversationParticipant,{"conversation-id":e.conversationId,"inbox-id":a.inboxId},null,8,["conversation-id","inbox-id"])]),_:1},8,["title","is-open"])])):i.name==="conversation_info"?(p(),g("div",Zct,[v(e.AccordionItem,{title:t.$t("CONVERSATION_SIDEBAR.ACCORDION.CONVERSATION_INFO"),"is-open":e.isContactSidebarItemOpen("is_conv_details_open"),compact:"",onToggle:n[2]||(n[2]=l=>e.toggleSidebarUIState("is_conv_details_open",l))},{default:z(()=>[v(e.ConversationInfo,{"conversation-attributes":e.conversationAdditionalAttributes,"contact-attributes":e.contactAdditionalAttributes},null,8,["conversation-attributes","contact-attributes"])]),_:1},8,["title","is-open"])])):i.name==="contact_attributes"?(p(),g("div",Qct,[v(e.AccordionItem,{title:t.$t("CONVERSATION_SIDEBAR.ACCORDION.CONTACT_ATTRIBUTES"),"is-open":e.isContactSidebarItemOpen("is_contact_attributes_open"),compact:"",onToggle:n[3]||(n[3]=l=>e.toggleSidebarUIState("is_contact_attributes_open",l))},{default:z(()=>[v(e.CustomAttributes,{"attribute-type":"contact_attribute","attribute-from":"conversation_contact_panel","contact-id":e.contact.id,"empty-state-message":t.$t("CONVERSATION_CUSTOM_ATTRIBUTES.NO_RECORDS_FOUND")},null,8,["contact-id","empty-state-message"])]),_:1},8,["title","is-open"])])):i.name==="previous_conversation"?(p(),g("div",Jct,[e.contact.id?(p(),L(e.AccordionItem,{key:0,title:t.$t("CONVERSATION_SIDEBAR.ACCORDION.PREVIOUS_CONVERSATION"),"is-open":e.isContactSidebarItemOpen("is_previous_conv_open"),compact:"",onToggle:n[4]||(n[4]=l=>e.toggleSidebarUIState("is_previous_conv_open",l))},{default:z(()=>[v(e.ContactConversations,{"contact-id":e.contact.id,"conversation-id":e.conversationId},null,8,["contact-id","conversation-id"])]),_:1},8,["title","is-open"])):O("v-if",!0)])):i.name==="macros"?(p(),L(o,{key:5,"feature-key":"macros"},{default:z(()=>[v(e.AccordionItem,{title:t.$t("CONVERSATION_SIDEBAR.ACCORDION.MACROS"),"is-open":e.isContactSidebarItemOpen("is_macro_open"),compact:"",onToggle:n[5]||(n[5]=l=>e.toggleSidebarUIState("is_macro_open",l))},{default:z(()=>[v(e.MacrosList,{"conversation-id":e.conversationId},null,8,["conversation-id"])]),_:1},8,["title","is-open"])]),_:1})):i.name==="linear_issues"?(p(),g("div",edt,[v(e.AccordionItem,{title:t.$t("CONVERSATION_SIDEBAR.ACCORDION.LINEAR_ISSUES"),"is-open":e.isContactSidebarItemOpen("is_linear_issues_open"),compact:"",onToggle:n[6]||(n[6]=l=>e.toggleSidebarUIState("is_linear_issues_open",l))},{default:z(()=>[e.isLinearIntegrationEnabled?(p(),L(e.LinearIssuesList,{key:1,"conversation-id":e.conversationId},null,8,["conversation-id"])):(p(),L(e.LinearSetupCTA,{key:0}))]),_:1},8,["title","is-open"])])):i.name==="shopify_orders"&&e.isShopifyFeatureEnabled?(p(),g("div",tdt,[v(e.AccordionItem,{title:t.$t("CONVERSATION_SIDEBAR.ACCORDION.SHOPIFY_ORDERS"),"is-open":e.isContactSidebarItemOpen("is_shopify_orders_open"),compact:"",onToggle:n[7]||(n[7]=l=>e.toggleSidebarUIState("is_shopify_orders_open",l))},{default:z(()=>[v(e.ShopifyOrdersList,{"contact-id":e.contactId},null,8,["contact-id"])]),_:1},8,["title","is-open"])])):i.name==="contact_notes"?(p(),g("div",ndt,[v(e.AccordionItem,{title:t.$t("CONVERSATION_SIDEBAR.ACCORDION.CONTACT_NOTES"),"is-open":e.isContactSidebarItemOpen("is_contact_notes_open"),compact:"",onToggle:n[8]||(n[8]=l=>e.toggleSidebarUIState("is_contact_notes_open",l))},{default:z(()=>[v(e.ContactNotes,{"contact-id":e.contactId},null,8,["contact-id"])]),_:1},8,["title","is-open"])])):O("v-if",!0)]),_:1},8,["list"])])])}const sdt=G(zct,[["render",adt],["__scopeId","data-v-b9ba2a57"],["__file","/app/app/javascript/dashboard/routes/dashboard/conversation/ContactPanel.vue"]]),odt={__name:"ConversationSidebar",props:{currentChat:{required:!0,type:Object}},setup(t,{expose:n}){n();const{uiSettings:a,updateUISettings:e}=Ct(),{width:s}=ws(),r=S(()=>{const{is_contact_sidebar_open:c}=a.value;return c?0:null}),o=S(()=>s.value<gt.SMALL_SCREEN_BREAKPOINT),l={uiSettings:a,updateUISettings:e,windowWidth:s,activeTab:r,isSmallScreen:o,closeContactPanel:()=>{var c;o.value&&((c=a.value)!=null&&c.is_contact_sidebar_open)&&e({is_contact_sidebar_open:!1,is_copilot_panel_open:!1})},computed:S,ContactPanel:sdt,get useUISettings(){return Ct},get useWindowSize(){return ws},get vOnClickOutside(){return Ga},get wootConstants(){return gt}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}},rdt={class:"flex flex-1 overflow-auto"};function idt(t,n,a,e,s,r){return ce((p(),g("div",{class:oe(["bg-n-background h-full overflow-hidden flex flex-col fixed top-0 z-40 w-full max-w-sm transition-transform duration-300 ease-in-out ltr:right-0 rtl:left-0 md:static md:w-[320px] md:min-w-[320px] ltr:border-l rtl:border-r border-n-weak 2xl:min-w-[360px] 2xl:w-[360px] shadow-lg md:shadow-none",[{"md:flex":e.activeTab===0,"md:hidden":e.activeTab!==0}]])},[f("div",rdt,[ce(v(e.ContactPanel,{"conversation-id":a.currentChat.id,"inbox-id":a.currentChat.inbox_id},null,8,["conversation-id","inbox-id"]),[[En,e.activeTab===0]])])],2)),[[e.vOnClickOutside,()=>e.closeContactPanel()]])}const sP=G(odt,[["render",idt],["__file","/app/app/javascript/dashboard/components/widgets/conversation/ConversationSidebar.vue"]]),ldt={components:{ChatList:HVe,ConversationBox:jD,CmdBarConversationSnooze:WD,SidepanelSwitch:zD,ConversationSidebar:sP},beforeRouteLeave(t,n,a){this.conversationId&&this.$store.dispatch("clearSelectedState"),a()},props:{inboxId:{type:[String,Number],default:0},conversationId:{type:[String,Number],default:0},label:{type:String,default:""},teamId:{type:String,default:""},conversationType:{type:String,default:""},foldersId:{type:[String,Number],default:0}},setup(){const{uiSettings:t,updateUISettings:n}=Ct(),{accountId:a}=Ut();return{uiSettings:t,updateUISettings:n,accountId:a}},data(){return{showSearchModal:!1}},computed:{..._t({chatList:"getAllConversations",currentChat:"getSelectedChat"}),showConversationList(){return this.isOnExpandedLayout?!this.conversationId:!0},showMessageView(){return this.conversationId?!0:!this.isOnExpandedLayout},isOnExpandedLayout(){const{LAYOUT_TYPES:{CONDENSED:t}}=gt,{conversation_display_type:n=t}=this.uiSettings;return n!==t},shouldShowSidebar(){if(!this.currentChat.id)return!1;const{is_contact_sidebar_open:t}=this.uiSettings;return t}},watch:{conversationId(){this.fetchConversationIfUnavailable()}},created(){this.conversationId||this.$store.dispatch("clearSelectedState")},mounted(){this.$store.dispatch("agents/get"),this.$store.dispatch("portals/index"),this.initialize(),this.$watch("$store.state.route",()=>this.initialize()),this.$watch("chatList.length",()=>{this.setActiveChat()})},methods:{onConversationLoad(){this.fetchConversationIfUnavailable()},initialize(){this.$store.dispatch("setActiveInbox",this.inboxId),this.setActiveChat()},toggleConversationLayout(){const{LAYOUT_TYPES:t}=gt,{conversation_display_type:n=t.CONDENSED}=this.uiSettings,a=n===t.CONDENSED?t.EXPANDED:t.CONDENSED;this.updateUISettings({conversation_display_type:a,previously_used_conversation_display_type:a})},fetchConversationIfUnavailable(){if(!this.conversationId)return;this.findConversation()||this.$store.dispatch("getConversation",this.conversationId)},findConversation(){const t=parseInt(this.conversationId,10),[n]=this.chatList.filter(a=>a.id===t);return n},setActiveChat(){if(this.conversationId){const t=this.findConversation();if(!t||t.id===this.currentChat.id)return;const{messageId:n}=this.$route.query;this.$store.dispatch("setActiveChat",{data:t,after:n}).then(()=>{Mt.emit(cn.SCROLL_TO_MESSAGE,{messageId:n})})}else this.$store.dispatch("clearSelectedState")},onSearch(){this.showSearchModal=!0},closeSearch(){this.showSearchModal=!1}}},cdt={class:"flex w-full h-full min-w-0"};function ddt(t,n,a,e,s,r){const o=H("ChatList"),i=H("SidepanelSwitch"),l=H("ConversationBox"),c=H("ConversationSidebar"),d=H("CmdBarConversationSnooze");return p(),g("section",cdt,[v(o,{"show-conversation-list":r.showConversationList,"conversation-inbox":a.inboxId,label:a.label,"team-id":a.teamId,"conversation-type":a.conversationType,"folders-id":a.foldersId,"is-on-expanded-layout":r.isOnExpandedLayout,onConversationLoad:r.onConversationLoad},null,8,["show-conversation-list","conversation-inbox","label","team-id","conversation-type","folders-id","is-on-expanded-layout","onConversationLoad"]),r.showMessageView?(p(),L(l,{key:0,"inbox-id":a.inboxId,"is-on-expanded-layout":r.isOnExpandedLayout},{default:z(()=>[t.currentChat.id?(p(),L(i,{key:0})):O("v-if",!0)]),_:1},8,["inbox-id","is-on-expanded-layout"])):O("v-if",!0),r.shouldShowSidebar?(p(),L(c,{key:1,"current-chat":t.currentChat},null,8,["current-chat"])):O("v-if",!0),v(d)])}const ms=G(ldt,[["render",ddt],["__file","/app/app/javascript/dashboard/routes/dashboard/conversation/ConversationView.vue"]]),udt={__name:"KanbanColumn",props:{column:{type:Object,required:!0},cards:{type:Array,default:()=>[]},boardType:{type:String,required:!0},isDragging:{type:Boolean,default:!1}},emits:["edit","delete","cardClick","cardMoved"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=S({get:()=>e.cards,set:h=>{}}),i=S(()=>({borderTopColor:e.column.color||"#4CAF50"})),m={props:e,emit:s,t:r,localCards:o,columnStyle:i,handleCardChange:h=>{if(h.added){const{element:_,newIndex:E}=h.added;s("cardMoved",{card:_,toColumnId:e.column.id,position:E})}},handleEditColumn:()=>{s("edit",e.column)},handleDeleteColumn:()=>{s("delete",e.column)},handleCardClick:h=>{s("cardClick",h)},ref:P,computed:S,get useI18n(){return Q},get Draggable(){return yd},Button:Se,DropdownMenu:ds,DropdownItem:Xi};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}},pdt={class:"flex items-center justify-between p-4 border-b border-n-slate-6 dark:border-n-slate-6"},fdt={class:"flex items-center gap-2 flex-1 min-w-0"},mdt={class:"text-sm font-semibold text-n-slate-12 dark:text-n-slate-12 truncate"},hdt={class:"text-xs text-n-slate-11 dark:text-n-slate-11 flex-shrink-0"},_dt={class:"flex-1 p-3 overflow-y-auto min-h-[200px]"},gdt=["onClick"],bdt={key:0,class:"flex flex-col gap-2"},vdt={class:"flex items-start gap-2"},Edt={class:"flex-1 min-w-0"},Sdt={class:"text-sm font-medium text-n-slate-12 dark:text-n-slate-12 truncate"},Tdt={key:0,class:"text-xs text-n-slate-11 dark:text-n-slate-11 truncate"},Adt={class:"flex flex-col gap-2"},ydt={class:"flex items-start gap-2"},Idt={class:"flex-1 min-w-0"},Cdt={class:"text-sm font-medium text-n-slate-12 dark:text-n-slate-12 line-clamp-2"},Odt={key:0,class:"text-xs text-n-slate-11 dark:text-n-slate-11 line-clamp-1 mt-1"},Ndt={class:"flex items-center gap-2 mt-2"},xdt={key:0,class:"flex items-center justify-center h-full text-n-slate-11 dark:text-n-slate-11 text-sm"};function Rdt(t,n,a,e,s,r){return p(),g("div",{class:"kanban-column flex flex-col w-80 flex-shrink-0 bg-n-slate-2 dark:bg-n-slate-2 rounded-lg border-t-4",style:nn(e.columnStyle)},[O(" Column Header "),f("div",pdt,[f("div",fdt,[f("h3",mdt,C(a.column.name),1),f("span",hdt,C(a.cards.length),1)]),O(" Column Actions "),v(e.DropdownMenu,null,{trigger:z(()=>[v(e.Button,{variant:"clear",size:"small",icon:"i-lucide-more-vertical",class:"ml-2"})]),content:z(()=>[v(e.DropdownItem,{icon:"i-lucide-edit",onClick:e.handleEditColumn},{default:z(()=>[Oe(C(e.t("KANBAN.COLUMN.EDIT")),1)]),_:1}),v(e.DropdownItem,{icon:"i-lucide-trash",variant:"danger",onClick:e.handleDeleteColumn},{default:z(()=>[Oe(C(e.t("KANBAN.COLUMN.DELETE")),1)]),_:1})]),_:1})]),O(" Cards Container "),f("div",_dt,[v(e.Draggable,{modelValue:e.localCards,"onUpdate:modelValue":n[0]||(n[0]=o=>e.localCards=o),group:{name:`kanban-${a.boardType}`,pull:!0,put:!0},"item-key":"id",animation:"200","ghost-class":"kanban-card-ghost","drag-class":"kanban-card-drag",class:"flex flex-col gap-3 min-h-full",onChange:e.handleCardChange},{item:z(({element:o})=>{var i,l,c;return[f("div",{class:"kanban-card bg-white dark:bg-n-slate-1 rounded-lg p-3 shadow-sm border border-n-slate-6 dark:border-n-slate-6 cursor-pointer hover:shadow-md transition-shadow",onClick:d=>e.handleCardClick(o)},[O(" Card Content for Contacts "),a.boardType==="contact"?(p(),g("div",bdt,[f("div",vdt,[n[1]||(n[1]=f("div",{class:"w-8 h-8 rounded-full bg-n-slate-5 dark:bg-n-slate-5 flex items-center justify-center flex-shrink-0"},[f("i",{class:"i-lucide-user text-sm text-n-slate-11 dark:text-n-slate-11"})],-1)),f("div",Edt,[f("p",Sdt,C(o.name||"Unnamed Contact"),1),o.email?(p(),g("p",Tdt,C(o.email),1)):O("v-if",!0)])])])):(p(),g(de,{key:1},[O(" Card Content for Conversations "),f("div",Adt,[f("div",ydt,[f("div",Idt,[f("p",Cdt,C(((l=(i=o.meta)==null?void 0:i.sender)==null?void 0:l.name)||"Unnamed Contact"),1),(c=o.messages)!=null&&c[0]?(p(),g("p",Odt,C(o.messages[0].content),1)):O("v-if",!0),f("div",Ndt,[f("span",{class:oe(["text-xs px-2 py-0.5 rounded",o.status==="open"&&"bg-green-100 text-green-700",o.status==="pending"&&"bg-yellow-100 text-yellow-700",o.status==="resolved"&&"bg-blue-100 text-blue-700"])},C(o.status),3)])])])])],2112))],8,gdt)]}),_:1},8,["modelValue","group"]),O(" Empty State "),a.cards.length===0?(p(),g("div",xdt,C(e.t("KANBAN.COLUMN.EMPTY")),1)):O("v-if",!0)])],4)}const wdt=G(udt,[["render",Rdt],["__scopeId","data-v-8f02e942"],["__file","/app/app/javascript/dashboard/components-next/kanban/KanbanColumn.vue"]]),Mdt={__name:"ColumnManager",props:{show:{type:Boolean,default:!1},column:{type:Object,default:null},mode:{type:String,default:"create"}},emits:["close","save"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=P({name:"",color:"#4CAF50",filter_criteria:{}}),i=["#4CAF50","#2196F3","#FF9800","#9C27B0","#F44336","#00BCD4","#FFEB3B","#795548"],l=S(()=>o.value.name.trim().length>0),c=S(()=>l.value);je(()=>e.show,h=>{h&&(e.mode==="edit"&&e.column?o.value={name:e.column.name,color:e.column.color||"#4CAF50",filter_criteria:e.column.filter_criteria||{}}:o.value={name:"",color:"#4CAF50",filter_criteria:{}})});const m={props:e,emit:s,t:r,formData:o,colors:i,isNameValid:l,isFormValid:c,handleSave:()=>{c.value&&s("save",o.value)},handleClose:()=>{s("close")},ref:P,computed:S,watch:je,get useI18n(){return Q},Modal:Hl,Input:sn,Button:Se};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}},Ldt={class:"text-lg font-semibold text-n-slate-12 dark:text-n-slate-12"},Ddt={class:"flex flex-col gap-4 p-6"},Pdt={class:"block text-sm font-medium mb-2 text-n-slate-12 dark:text-n-slate-12"},kdt={class:"block text-sm font-medium mb-2 text-n-slate-12 dark:text-n-slate-12"},Bdt={class:"flex gap-2 flex-wrap"},Fdt=["onClick"],Udt={class:"text-sm text-n-slate-11 dark:text-n-slate-11"},$dt={class:"flex gap-2 justify-end p-4"};function Gdt(t,n,a,e,s,r){return p(),L(e.Modal,{show:a.show,"on-close":e.handleClose,class:"kanban-column-manager"},{header:z(()=>[f("h3",Ldt,C(a.mode==="edit"?e.t("KANBAN.COLUMN.EDIT"):e.t("KANBAN.COLUMN.ADD")),1)]),body:z(()=>[f("div",Ddt,[O(" Column Name "),f("div",null,[f("label",Pdt,C(e.t("KANBAN.COLUMN.NAME")),1),v(e.Input,{modelValue:e.formData.name,"onUpdate:modelValue":n[0]||(n[0]=o=>e.formData.name=o),placeholder:e.t("KANBAN.COLUMN.NAME_PLACEHOLDER"),class:"w-full"},null,8,["modelValue","placeholder"])]),O(" Color Picker "),f("div",null,[f("label",kdt,C(e.t("KANBAN.COLUMN.COLOR")),1),f("div",Bdt,[(p(),g(de,null,Ae(e.colors,o=>f("button",{key:o,type:"button",class:oe(["w-10 h-10 rounded-lg border-2 transition-all",e.formData.color===o?"border-n-slate-12 scale-110":"border-transparent hover:scale-105"]),style:nn({backgroundColor:o}),onClick:i=>e.formData.color=o},null,14,Fdt)),64))])]),O(" Filter Criteria Placeholder "),f("div",Udt,[n[1]||(n[1]=f("i",{class:"i-lucide-info mr-1"},null,-1)),Oe(" "+C(e.t("KANBAN.COLUMN.FILTER"))+" (Coming soon) ",1)])])]),footer:z(()=>[f("div",$dt,[v(e.Button,{variant:"clear",onClick:e.handleClose},{default:z(()=>[Oe(C(e.t("GENERAL_SETTINGS.CANCEL")),1)]),_:1}),v(e.Button,{disabled:!e.isFormValid,onClick:e.handleSave},{default:z(()=>[Oe(C(a.mode==="edit"?e.t("GENERAL_SETTINGS.UPDATE"):e.t("GENERAL_SETTINGS.CREATE")),1)]),_:1},8,["disabled"])])]),_:1},8,["show"])}const Vdt=G(Mdt,[["render",Gdt],["__file","/app/app/javascript/dashboard/components-next/kanban/ColumnManager.vue"]]),Hdt={__name:"KanbanBoard",props:{boardType:{type:String,required:!0},items:{type:Array,default:()=>[]}},emits:["itemClick"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=Bn(),{t:o}=Q(),i=Z(),l=P(!1),c=P("create"),d=P(null),u=P(!1),m=S(()=>r.getters["kanban/getColumnsByBoardType"](e.boardType)),h=S(()=>r.getters["kanban/getUIFlags"]),_=R=>e.items.filter(M=>{var w;return((w=M.custom_attributes)==null?void 0:w.kanban_column_id)===R.toString()}),E=async()=>{try{await r.dispatch("kanban/getColumns",e.boardType)}catch{i.error(o("KANBAN.ERRORS.FETCH_FAILED"))}},y=()=>{c.value="create",d.value=null,l.value=!0},b=R=>{c.value="edit",d.value=R,l.value=!0},A=async R=>{if(confirm(o("KANBAN.COLUMN.DELETE_CONFIRMATION")))try{await r.dispatch("kanban/deleteColumn",{boardType:e.boardType,columnId:R.id}),i.success(o("KANBAN.SUCCESS.COLUMN_DELETED"))}catch{i.error(o("KANBAN.ERRORS.DELETE_FAILED"))}},T=async R=>{try{c.value==="edit"?(await r.dispatch("kanban/updateColumn",{boardType:e.boardType,columnId:d.value.id,columnData:{...R,board_type:e.boardType}}),i.success(o("KANBAN.SUCCESS.COLUMN_UPDATED"))):(await r.dispatch("kanban/createColumn",{boardType:e.boardType,columnData:{...R,board_type:e.boardType}}),i.success(o("KANBAN.SUCCESS.COLUMN_CREATED"))),l.value=!1}catch{i.error(c.value==="edit"?o("KANBAN.ERRORS.UPDATE_FAILED"):o("KANBAN.ERRORS.CREATE_FAILED"))}},I=async({card:R,toColumnId:M,position:w})=>{try{await r.dispatch("kanban/moveCard",{boardType:e.boardType,cardId:R.id,columnId:M,position:w}),i.success(o("KANBAN.SUCCESS.CARD_MOVED"))}catch{i.error(o("KANBAN.ERRORS.MOVE_FAILED"))}},N=R=>{s("itemClick",R)};Pe(()=>{E()});const x={props:e,emit:s,store:r,t:o,alert:i,showColumnManager:l,columnManagerMode:c,editingColumn:d,isDragging:u,columns:m,uiFlags:h,getCardsByColumn:_,loadColumns:E,handleAddColumn:y,handleEditColumn:b,handleDeleteColumn:A,handleSaveColumn:T,handleCardMoved:I,handleCardClick:N,ref:P,computed:S,onMounted:Pe,get useStore(){return Bn},get useI18n(){return Q},get useAlert(){return Z},KanbanColumn:wdt,ColumnManager:Vdt,Button:Se};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}},jdt={class:"kanban-board-container flex flex-col h-full"},Wdt={class:"flex items-center justify-between p-4 border-b border-n-slate-6 dark:border-n-slate-6"},zdt={class:"text-lg font-semibold text-n-slate-12 dark:text-n-slate-12"},Ydt={key:0,class:"flex items-center justify-center flex-1 p-8"},Kdt={class:"flex flex-col items-center justify-center flex-1 p-8"},Xdt={class:"text-lg font-semibold text-n-slate-12 dark:text-n-slate-12 mb-2"},qdt={class:"text-sm text-n-slate-11 dark:text-n-slate-11 mb-4"},Zdt={class:"flex-1 overflow-x-auto overflow-y-hidden"},Qdt={class:"flex gap-4 p-6 h-full"};function Jdt(t,n,a,e,s,r){return p(),g("div",jdt,[O(" Board Header "),f("div",Wdt,[f("h2",zdt,C(a.boardType==="contact"?e.t("KANBAN.CONTACTS_TITLE"):e.t("KANBAN.CONVERSATIONS_TITLE")),1),v(e.Button,{disabled:e.uiFlags.isCreating,onClick:e.handleAddColumn},{default:z(()=>[n[1]||(n[1]=f("i",{class:"i-lucide-plus mr-2"},null,-1)),Oe(" "+C(e.t("KANBAN.HEADER.ADD_COLUMN")),1)]),_:1},8,["disabled"])]),O(" Loading State "),e.uiFlags.isFetching?(p(),g("div",Ydt,n[2]||(n[2]=[f("div",{class:"text-n-slate-11 dark:text-n-slate-11"},[f("i",{class:"i-lucide-loader-2 animate-spin mr-2"}),Oe(" Loading... ")],-1)]))):e.columns.length===0?(p(),g(de,{key:1},[O(" Empty State "),f("div",Kdt,[n[4]||(n[4]=f("i",{class:"i-lucide-kanban text-6xl text-n-slate-11 dark:text-n-slate-11 mb-4"},null,-1)),f("h3",Xdt,C(e.t("KANBAN.EMPTY_STATE.TITLE")),1),f("p",qdt,C(e.t("KANBAN.EMPTY_STATE.SUBTITLE")),1),v(e.Button,{onClick:e.handleAddColumn},{default:z(()=>[n[3]||(n[3]=f("i",{class:"i-lucide-plus mr-2"},null,-1)),Oe(" "+C(e.t("KANBAN.EMPTY_STATE.CREATE_BUTTON")),1)]),_:1})])],2112)):(p(),g(de,{key:2},[O(" Kanban Board "),f("div",Zdt,[f("div",Qdt,[(p(!0),g(de,null,Ae(e.columns,o=>(p(),L(e.KanbanColumn,{key:o.id,column:o,cards:e.getCardsByColumn(o.id),"board-type":a.boardType,"is-dragging":e.isDragging,onEdit:e.handleEditColumn,onDelete:e.handleDeleteColumn,onCardClick:e.handleCardClick,onCardMoved:e.handleCardMoved},null,8,["column","cards","board-type","is-dragging"]))),128))])])],2112)),O(" Column Manager Modal "),v(e.ColumnManager,{show:e.showColumnManager,mode:e.columnManagerMode,column:e.editingColumn,onClose:n[0]||(n[0]=o=>e.showColumnManager=!1),onSave:e.handleSaveColumn},null,8,["show","mode","column"])])}const oP=G(Hdt,[["render",Jdt],["__scopeId","data-v-9fa3c7a9"],["__file","/app/app/javascript/dashboard/components-next/kanban/KanbanBoard.vue"]]),eut={__name:"ConversationsKanbanView",setup(t,{expose:n}){n();const a=Bn(),e=ft(),s=S(()=>a.getters.getAllConversations),r=S(()=>a.getters.getUIFlags),o=c=>{e.push({name:"inbox_conversation",params:{conversation_id:c.id}})},i=async()=>{try{await a.dispatch("fetchAllConversations")}catch(c){console.error("Error loading conversations:",c)}};Pe(()=>{i()});const l={store:a,router:e,conversations:s,uiFlags:r,handleConversationClick:o,loadConversations:i,computed:S,onMounted:Pe,get useStore(){return Bn},get useRouter(){return ft},KanbanBoard:oP};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}},tut={class:"conversations-kanban-view h-full"};function nut(t,n,a,e,s,r){return p(),g("div",tut,[v(e.KanbanBoard,{"board-type":"conversation",items:e.conversations,onItemClick:e.handleConversationClick},null,8,["items"])])}const aut=G(eut,[["render",nut],["__scopeId","data-v-33498713"],["__file","/app/app/javascript/dashboard/routes/dashboard/conversation/ConversationsKanbanView.vue"]]),ns=["administrator","agent","conversation_manage","conversation_unassigned_manage","conversation_participating_manage"],sut={routes:[{path:vt("accounts/:accountId/conversations/kanban"),name:"conversations_kanban",meta:{permissions:ns},component:aut},{path:vt("accounts/:accountId/dashboard"),name:"home",meta:{permissions:ns},component:ms,props:()=>({inboxId:0})},{path:vt("accounts/:accountId/conversations/:conversation_id"),name:"inbox_conversation",meta:{permissions:ns},component:ms,props:t=>({inboxId:0,conversationId:t.params.conversation_id})},{path:vt("accounts/:accountId/inbox/:inbox_id"),name:"inbox_dashboard",meta:{permissions:ns},component:ms,props:t=>({inboxId:t.params.inbox_id})},{path:vt("accounts/:accountId/inbox/:inbox_id/conversations/:conversation_id"),name:"conversation_through_inbox",meta:{permissions:ns},component:ms,props:t=>({conversationId:t.params.conversation_id,inboxId:t.params.inbox_id})},{path:vt("accounts/:accountId/label/:label"),name:"label_conversations",meta:{permissions:ns},component:ms,props:t=>({label:t.params.label})},{path:vt("accounts/:accountId/label/:label/conversations/:conversation_id"),name:"conversations_through_label",meta:{permissions:ns},component:ms,props:t=>({conversationId:t.params.conversation_id,label:t.params.label})},{path:vt("accounts/:accountId/team/:teamId"),name:"team_conversations",meta:{permissions:ns},component:ms,props:t=>({teamId:t.params.teamId})},{path:vt("accounts/:accountId/team/:teamId/conversations/:conversationId"),name:"conversations_through_team",meta:{permissions:ns},component:ms,props:t=>({conversationId:t.params.conversationId,teamId:t.params.teamId})},{path:vt("accounts/:accountId/custom_view/:id"),name:"folder_conversations",meta:{permissions:ns},component:ms,props:t=>({foldersId:t.params.id})},{path:vt("accounts/:accountId/custom_view/:id/conversations/:conversation_id"),name:"conversations_through_folders",meta:{permissions:ns},component:ms,props:t=>({conversationId:t.params.conversation_id,foldersId:t.params.id})},{path:vt("accounts/:accountId/mentions/conversations"),name:"conversation_mentions",meta:{permissions:ns},component:ms,props:()=>({conversationType:"mention"})},{path:vt("accounts/:accountId/mentions/conversations/:conversationId"),name:"conversation_through_mentions",meta:{permissions:ns},component:ms,props:t=>({conversationId:t.params.conversationId,conversationType:"mention"})},{path:vt("accounts/:accountId/unattended/conversations"),name:"conversation_unattended",meta:{permissions:ns},component:ms,props:()=>({conversationType:"unattended"})},{path:vt("accounts/:accountId/unattended/conversations/:conversationId"),name:"conversation_through_unattended",meta:{permissions:ns},component:ms,props:t=>({conversationId:t.params.conversationId,conversationType:"unattended"})},{path:vt("accounts/:accountId/participating/conversations"),name:"conversation_participating",meta:{permissions:ns},component:ms,props:()=>({conversationType:"participating"})},{path:vt("accounts/:accountId/participating/conversations/:conversationId"),name:"conversation_through_participating",meta:{permissions:ns},component:ms,props:t=>({conversationId:t.params.conversationId,conversationType:"participating"})}]},out={__name:"SearchHeader",props:{initialQuery:{type:String,default:""}},emits:["search"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=P(e.initialQuery),o=P(!1),i=xn("searchInput"),l=_=>{_.key==="/"&&document.activeElement.tagName!=="INPUT"?(_.preventDefault(),i.value.focus()):_.key==="Escape"&&document.activeElement.tagName==="INPUT"&&(_.preventDefault(),i.value.blur())},c=Ja(_=>s("search",_.length>1||_.match(/^[0-9]+$/)?_:""),500),d=_=>{r.value=_.target.value,c(r.value)},u=()=>{o.value=!0},m=()=>{o.value=!1};je(()=>e.initialQuery,_=>{r.value!==_&&(r.value=_)},{immediate:!0}),Pe(()=>{i.value.focus(),document.addEventListener("keydown",l)}),is(()=>{document.removeEventListener("keydown",l)});const h={props:e,emit:s,searchQuery:r,isInputFocused:o,searchInput:i,handler:l,debouncedEmit:c,onInput:d,onFocus:u,onBlur:m,ref:P,useTemplateRef:xn,onMounted:Pe,onUnmounted:is,watch:je,get debounce(){return Ja}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}},rut={class:"flex items-center"},iut=["placeholder","value"];function lut(t,n,a,e,s,r){const o=H("fluent-icon"),i=H("woot-label");return p(),g("div",{class:oe(["input-container rounded-xl transition-[border-bottom] duration-[0.2s] ease-[ease-in-out] relative flex items-center py-2 px-4 h-14 gap-2 border border-solid bg-n-alpha-black2",{"border-n-brand":e.isInputFocused,"border-n-weak":!e.isInputFocused}])},[f("div",rut,[v(o,{icon:"search",class:oe(["icon",{"text-n-blue-text":e.isInputFocused,"text-n-slate-10":!e.isInputFocused}]),"aria-hidden":"true"},null,8,["class"])]),f("input",{ref:"searchInput",type:"search",class:"reset-base outline-none w-full m-0 bg-transparent border-transparent shadow-none text-n-slate-12 dark:text-n-slate-12 active:border-transparent active:shadow-none hover:border-transparent hover:shadow-none focus:border-transparent focus:shadow-none",placeholder:t.$t("SEARCH.INPUT_PLACEHOLDER"),value:e.searchQuery,onFocus:e.onFocus,onBlur:e.onBlur,onInput:e.onInput},null,40,iut),v(i,{title:t.$t("SEARCH.PLACEHOLDER_KEYBINDING"),"show-close":!1,small:"",class:"!m-0 whitespace-nowrap !bg-n-slate-3 dark:!bg-n-solid-3 !border-n-weak dark:!border-n-strong"},null,8,["title"])],2)}const cut=G(out,[["render",lut],["__file","/app/app/javascript/dashboard/modules/search/components/SearchHeader.vue"]]),dut={__name:"SearchTabs",props:{tabs:{type:Array,default:()=>[]},selectedTab:{type:Number,default:0}},emits:["tabChange"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=P(e.selectedTab);je(()=>e.selectedTab,(l,c)=>{l!==c&&(r.value=e.selectedTab)});const i={props:e,emit:s,activeTab:r,onTabChange:l=>{r.value=l,s("tabChange",e.tabs[l].key)},ref:P,watch:je};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}},uut={class:"mt-1 border-b border-n-weak"};function put(t,n,a,e,s,r){const o=H("woot-tabs-item"),i=H("woot-tabs");return p(),g("div",uut,[v(i,{index:e.activeTab,border:!1,onChange:e.onTabChange},{default:z(()=>[(p(!0),g(de,null,Ae(a.tabs,(l,c)=>(p(),L(o,{key:l.key,index:c,name:l.name,count:l.count,"show-badge":l.showBadge,"is-compact":""},null,8,["index","name","count","show-badge"]))),128))]),_:1},8,["index"])])}const fut=G(dut,[["render",put],["__file","/app/app/javascript/dashboard/modules/search/components/SearchTabs.vue"]]),mut={__name:"SearchResultSection",props:{title:{type:String,default:""},empty:{type:Boolean,default:!1},query:{type:String,default:""},showTitle:{type:Boolean,default:!0},isFetching:{type:Boolean,default:!0}},setup(t,{expose:n}){n();const a=t,e=S(()=>a.title.toLowerCase()),s={props:a,titleCase:e,computed:S};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}},hut={class:"mx-0 my-2"},_ut={key:0,class:"sticky top-0 p-2 z-50 mb-0.5 bg-n-background"},gut={class:"text-sm text-n-slate-12"},but={key:2,class:"flex items-center justify-center px-4 py-6 m-2 rounded-xl bg-n-slate-2 dark:bg-n-solid-1"},vut={class:"mx-2 my-0 text-center text-n-slate-11"};function Eut(t,n,a,e,s,r){const o=H("woot-loading-state"),i=H("fluent-icon");return p(),g("section",hut,[a.showTitle?(p(),g("div",_ut,[f("h3",gut,C(a.title),1)])):O("v-if",!0),qe(t.$slots,"default"),a.isFetching?(p(),L(o,{key:1,message:a.empty?t.$t("SEARCH.SEARCHING_DATA"):t.$t("SEARCH.LOADING_DATA")},null,8,["message"])):O("v-if",!0),a.empty&&!a.isFetching?(p(),g("div",but,[v(i,{icon:"info",size:"16px",class:"text-n-slate-11"}),f("p",vut,C(t.$t("SEARCH.EMPTY_STATE",{item:e.titleCase,query:a.query})),1)])):O("v-if",!0)])}const d_=G(mut,[["render",Eut],["__file","/app/app/javascript/dashboard/modules/search/components/SearchResultSection.vue"]]),Sut={__name:"SearchResultConversationItem",props:{id:{type:Number,default:0},inbox:{type:Object,default:()=>({})},name:{type:String,default:""},email:{type:String,default:""},accountId:{type:[String,Number],default:""},createdAt:{type:[String,Date,Number],default:""},messageId:{type:Number,default:0},emailSubject:{type:String,default:""}},setup(t,{expose:n}){n();const a=t,e=S(()=>{const l={};return a.messageId&&(l.messageId=a.messageId),vt(`accounts/${a.accountId}/conversations/${a.id}`,l)}),s=kn(a.createdAt),r=S(()=>[{label:"SEARCH.FROM",value:a.name,show:!!a.name},{label:"SEARCH.EMAIL",value:a.email,show:!!a.email},{label:"SEARCH.EMAIL_SUBJECT",value:a.emailSubject,show:!!a.emailSubject}]),o=S(()=>r.value.filter(l=>l.show)),i={props:a,navigateTo:e,createdAtTime:s,infoItems:r,visibleInfoItems:o,computed:S,get frontendURL(){return vt},get dynamicTime(){return kn},InboxName:f1,Avatar:qt};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}},Tut={class:"flex-grow min-w-0 ml-2"},Aut={class:"flex items-center min-w-0 justify-between gap-1 mb-1"},yut={class:"flex"},Iut={class:"flex items-center justify-center h-5 ml-1 rounded bg-n-slate-3 dark:bg-n-solid-3 w-fit rtl:ml-0 rtl:mr-1"},Cut={class:"text-xs font-normal min-w-0 truncate text-n-slate-11 dark:text-n-slate-11"},Out={class:"flex flex-wrap gap-x-2 gap-y-1.5"},Nut={class:"text-xs font-normal text-n-slate-11 dark:text-n-slate-11"};function xut(t,n,a,e,s,r){const o=H("woot-label"),i=H("router-link");return p(),L(i,{to:e.navigateTo,class:"flex p-2 rounded-xl cursor-pointer hover:bg-n-slate-2"},{default:z(()=>[v(e.Avatar,{name:"chats",size:24,"icon-name":"i-lucide-messages-square",class:"[&>span]:rounded"}),f("div",Tut,[f("div",Aut,[f("div",yut,[v(o,{class:"!bg-n-slate-3 dark:!bg-n-solid-3 !border-n-weak dark:!border-n-strong m-0",title:`#${a.id}`,"show-close":!1,small:""},null,8,["title"]),f("div",Iut,[v(e.InboxName,{inbox:a.inbox,class:"mx-2 bg-n-slate-3 dark:bg-n-solid-3 text-n-slate-11 dark:text-n-slate-11"},null,8,["inbox"])])]),f("span",Cut,C(e.createdAtTime),1)]),f("div",Out,[(p(!0),g(de,null,Ae(e.visibleInfoItems,l=>(p(),g("h5",{key:l.label,class:"m-0 text-sm min-w-0 text-n-slate-12 dark:text-n-slate-12 truncate"},[f("span",Nut,C(t.$t(l.label))+": ",1),Oe(" "+C(l.value),1)]))),128))]),qe(t.$slots,"default")])]),_:3},8,["to"])}const rP=G(Sut,[["render",xut],["__file","/app/app/javascript/dashboard/modules/search/components/SearchResultConversationItem.vue"]]),Rut={__name:"SearchResultConversationsList",props:{conversations:{type:Array,default:()=>[]},query:{type:String,default:""},isFetching:{type:Boolean,default:!1},showTitle:{type:Boolean,default:!0}},setup(t,{expose:n}){n();const a=t,e=le("getCurrentAccountId"),s=S(()=>a.conversations.map(o=>{var i;return{...o,mail_subject:((i=o.additional_attributes)==null?void 0:i.mail_subject)||""}})),r={props:a,accountId:e,conversationsWithSubject:s,computed:S,get useMapGetter(){return le},SearchResultSection:d_,SearchResultConversationItem:rP};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},wut={key:0,class:"space-y-1.5 list-none"};function Mut(t,n,a,e,s,r){return p(),L(e.SearchResultSection,{title:t.$t("SEARCH.SECTION.CONVERSATIONS"),empty:!a.conversations.length,query:a.query,"show-title":a.showTitle,"is-fetching":a.isFetching},{default:z(()=>[a.conversations.length?(p(),g("ul",wut,[(p(!0),g(de,null,Ae(e.conversationsWithSubject,o=>(p(),g("li",{key:o.id},[v(e.SearchResultConversationItem,{id:o.id,name:o.contact.name,email:o.contact.email,"account-id":e.accountId,inbox:o.inbox,"created-at":o.created_at,"email-subject":o.mail_subject},null,8,["id","name","email","account-id","inbox","created-at","email-subject"])]))),128))])):O("v-if",!0)]),_:1},8,["title","empty","query","show-title","is-fetching"])}const Lut=G(Rut,[["render",Mut],["__file","/app/app/javascript/dashboard/modules/search/components/SearchResultConversationsList.vue"]]),Dut={__name:"ReadMore",props:{shrink:{type:Boolean,default:!1}},emits:["expand"],setup(t,{expose:n}){n();const a={NextButton:Se};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},Put={key:0,class:"absolute inset-x-0 bottom-0 h-16 bg-gradient-to-t to-transparent from-n-background flex items-end justify-center pb-2"};function kut(t,n,a,e,s,r){return p(),g("div",null,[f("div",{class:oe({"max-h-[100px] overflow-hidden relative":a.shrink})},[qe(t.$slots,"default"),a.shrink?(p(),g("div",Put,[v(e.NextButton,{label:t.$t("SEARCH.READ_MORE"),icon:"i-lucide-chevrons-down",blue:"",xs:"",faded:"",class:"backdrop-filter backdrop-blur-[2px]",onClick:n[0]||(n[0]=Ve(o=>t.$emit("expand"),["prevent"]))},null,8,["label"])])):O("v-if",!0)],2)])}const But=G(Dut,[["render",kut],["__file","/app/app/javascript/dashboard/modules/search/components/ReadMore.vue"]]),Fut={__name:"MessageContent",props:{author:{type:String,default:""},message:{type:Object,default:()=>({})},searchTerm:{type:String,default:""}},setup(t,{expose:n}){n();const a=t,e=S(()=>{if(a.message.content)return a.message.content;const{content_attributes:u={}}=a.message,{email:m={}}=u||{};if(m.subject)return m.subject;const h=a.message.attachments.find(_=>_.file_type==="audio");return(h==null?void 0:h.transcribed_text)||""}),{highlightContent:s}=ta(),r=xn("messageContainer"),o=P(!1),i=()=>{const u=r.value;if(u){const m=u.querySelector(".message-content");o.value=m.offsetHeight>150}},l=u=>{var m=document.createTextNode(u),h=document.createElement("p");return h.appendChild(m),h.innerText},c=()=>{const u=e.value||"",m=l(u);return s(m,a.searchTerm,"searchkey--highlight")};Pe(()=>{je(()=>r.value,i),At(i)});const d={props:a,messageContent:e,highlightContent:s,messageContainer:r,isOverflowing:o,setOverflow:i,escapeHtml:l,prepareContent:c,ref:P,useTemplateRef:xn,onMounted:Pe,watch:je,nextTick:At,computed:S,get useMessageFormatter(){return ta},ReadMore:But};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}},Uut={ref:"messageContainer",class:"message border-l-2 border-n-weak"},$ut={class:"header"},Gut={class:"text-n-slate-11"},Vut={class:"message-content"};function Hut(t,n,a,e,s,r){const o=nt("dompurify-html");return p(),g("blockquote",Uut,[f("p",$ut,[f("strong",Gut,C(a.author),1),Oe(" "+C(t.$t("SEARCH.WROTE")),1)]),v(e.ReadMore,{shrink:e.isOverflowing,onExpand:n[0]||(n[0]=i=>e.isOverflowing=!1)},{default:z(()=>[ce(f("div",Vut,null,512),[[o,e.prepareContent()]])]),_:1},8,["shrink"])],512)}const jut=G(Fut,[["render",Hut],["__scopeId","data-v-26d6c388"],["__file","/app/app/javascript/dashboard/modules/search/components/MessageContent.vue"]]),Wut={__name:"SearchResultMessagesList",props:{messages:{type:Array,default:()=>[]},query:{type:String,default:""},isFetching:{type:Boolean,default:!1},showTitle:{type:Boolean,default:!0}},setup(t,{expose:n}){n();const{t:a}=Q(),e=le("getCurrentAccountId"),r={t:a,accountId:e,getName:o=>o&&o.sender&&o.sender.name?o.sender.name:a("SEARCH.BOT_LABEL"),get useI18n(){return Q},get useMapGetter(){return le},SearchResultConversationItem:rP,SearchResultSection:d_,MessageContent:jut};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},zut={key:0,class:"space-y-1.5 list-none"};function Yut(t,n,a,e,s,r){return p(),L(e.SearchResultSection,{title:t.$t("SEARCH.SECTION.MESSAGES"),empty:!a.messages.length,query:a.query,"show-title":a.showTitle,"is-fetching":a.isFetching},{default:z(()=>[a.messages.length?(p(),g("ul",zut,[(p(!0),g(de,null,Ae(a.messages,o=>(p(),g("li",{key:o.id},[v(e.SearchResultConversationItem,{id:o.conversation_id,"account-id":e.accountId,inbox:o.inbox,"created-at":o.created_at,"message-id":o.id},{default:z(()=>[v(e.MessageContent,{author:e.getName(o),message:o,"search-term":a.query},null,8,["author","message","search-term"])]),_:2},1032,["id","account-id","inbox","created-at","message-id"])]))),128))])):O("v-if",!0)]),_:1},8,["title","empty","query","show-title","is-fetching"])}const Kut=G(Wut,[["render",Yut],["__file","/app/app/javascript/dashboard/modules/search/components/SearchResultMessagesList.vue"]]),Xut={__name:"SearchResultContactItem",props:{id:{type:[String,Number],default:0},email:{type:String,default:""},phone:{type:String,default:""},name:{type:String,default:""},thumbnail:{type:String,default:""},accountId:{type:[String,Number],default:0}},setup(t,{expose:n}){n();const a=t,e=S(()=>vt(`accounts/${a.accountId}/contacts/${a.id}`)),s={props:a,navigateTo:e,computed:S,get frontendURL(){return vt},Avatar:qt};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}},qut={class:"ml-2 rtl:mr-2 min-w-0 rtl:ml-0"},Zut={class:"text-sm name truncate min-w-0 text-n-slate-12"},Qut={class:"grid items-center m-0 gap-1 text-sm grid-cols-[minmax(0,1fr)_auto_auto]"},Jut=["title"],ept={key:1,class:"text-n-slate-10"},tpt={key:2,class:"text-n-slate-12"};function npt(t,n,a,e,s,r){const o=H("router-link");return p(),L(o,{to:e.navigateTo,class:"flex items-start p-2 rounded-xl cursor-pointer hover:bg-n-slate-2"},{default:z(()=>[v(e.Avatar,{name:a.name,src:a.thumbnail,size:24,"rounded-full":"",class:"mt-0.5"},null,8,["name","src"]),f("div",qut,[f("h5",Zut,C(a.name),1),f("p",Qut,[a.email?(p(),g("span",{key:0,class:"truncate text-n-slate-12",title:a.email},C(a.email),9,Jut)):O("v-if",!0),a.phone?(p(),g("span",ept,"")):O("v-if",!0),a.phone?(p(),g("span",tpt,C(a.phone),1)):O("v-if",!0)])])]),_:1},8,["to"])}const apt=G(Xut,[["render",npt],["__file","/app/app/javascript/dashboard/modules/search/components/SearchResultContactItem.vue"]]),spt={__name:"SearchResultContactsList",props:{contacts:{type:Array,default:()=>[]},query:{type:String,default:""},isFetching:{type:Boolean,default:!1},showTitle:{type:Boolean,default:!0}},setup(t,{expose:n}){n();const e={accountId:le("getCurrentAccountId"),get useMapGetter(){return le},SearchResultSection:d_,SearchResultContactItem:apt};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}},opt={key:0,class:"space-y-1.5 list-none"};function rpt(t,n,a,e,s,r){return p(),L(e.SearchResultSection,{title:t.$t("SEARCH.SECTION.CONTACTS"),empty:!a.contacts.length,query:a.query,"show-title":a.showTitle,"is-fetching":a.isFetching},{default:z(()=>[a.contacts.length?(p(),g("ul",opt,[(p(!0),g(de,null,Ae(a.contacts,o=>(p(),g("li",{key:o.id},[v(e.SearchResultContactItem,{id:o.id,name:o.name,email:o.email,phone:o.phone_number,"account-id":e.accountId,thumbnail:o.thumbnail},null,8,["id","name","email","phone","account-id","thumbnail"])]))),128))])):O("v-if",!0)]),_:1},8,["title","empty","query","show-title","is-fetching"])}const ipt=G(spt,[["render",rpt],["__file","/app/app/javascript/dashboard/modules/search/components/SearchResultContactsList.vue"]]),Wb=300,lpt={__name:"SearchResultArticleItem",props:{id:{type:[String,Number],default:0},title:{type:String,default:""},description:{type:String,default:""},category:{type:String,default:""},locale:{type:String,default:""},content:{type:String,default:""},portalSlug:{type:String,required:!0},accountId:{type:[String,Number],default:0}},setup(t,{expose:n}){n();const a=t,e=S(()=>vt(`accounts/${a.accountId}/portals/${a.portalSlug}/${a.locale}/articles/edit/${a.id}`)),s=S(()=>{if(!a.content)return a.description||"";const i=new ki(a.content).plainText.trim();return i.length>Wb?`${i.substring(0,Wb)}...`:i}),r={props:a,MAX_LENGTH:Wb,navigateTo:e,truncatedContent:s,computed:S,Icon:Bt,get frontendURL(){return vt},get MessageFormatter(){return ki}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},cpt={class:"flex items-center justify-center w-6 h-6 mt-0.5 rounded bg-n-slate-3"},dpt={class:"ltr:ml-2 rtl:mr-2 min-w-0 flex-1"},upt={class:"flex items-center gap-2"},ppt={class:"text-sm font-medium truncate min-w-0 text-n-slate-12"},fpt={key:0,class:"text-xs font-medium whitespace-nowrap capitalize bg-n-slate-3 px-1 py-0.5 rounded text-n-slate-10"},mpt={key:0,class:"mt-1 text-sm text-n-slate-11 line-clamp-2"};function hpt(t,n,a,e,s,r){const o=H("router-link");return p(),L(o,{to:e.navigateTo,class:"flex items-start p-2 rounded-xl cursor-pointer hover:bg-n-slate-2"},{default:z(()=>[f("div",cpt,[v(e.Icon,{icon:"i-lucide-library-big",class:"text-n-slate-10"})]),f("div",dpt,[f("div",upt,[f("h5",ppt,C(a.title),1),a.category?(p(),g("span",fpt,C(a.category),1)):O("v-if",!0)]),e.truncatedContent?(p(),g("p",mpt,C(e.truncatedContent),1)):O("v-if",!0)])]),_:1},8,["to"])}const _pt=G(lpt,[["render",hpt],["__file","/app/app/javascript/dashboard/modules/search/components/SearchResultArticleItem.vue"]]),gpt={__name:"SearchResultArticlesList",props:{articles:{type:Array,default:()=>[]},query:{type:String,default:""},isFetching:{type:Boolean,default:!1},showTitle:{type:Boolean,default:!0}},setup(t,{expose:n}){n();const e={accountId:le("getCurrentAccountId"),get useMapGetter(){return le},SearchResultSection:d_,SearchResultArticleItem:_pt};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}},bpt={key:0,class:"space-y-1.5 list-none"};function vpt(t,n,a,e,s,r){return p(),L(e.SearchResultSection,{title:t.$t("SEARCH.SECTION.ARTICLES"),empty:!a.articles.length,query:a.query,"show-title":a.showTitle,"is-fetching":a.isFetching},{default:z(()=>[a.articles.length?(p(),g("ul",bpt,[(p(!0),g(de,null,Ae(a.articles,o=>(p(),g("li",{key:o.id},[v(e.SearchResultArticleItem,{id:o.id,title:o.title,description:o.description,content:o.content,"portal-slug":o.portal_slug,locale:o.locale,"account-id":e.accountId,category:o.category_name,status:o.status},null,8,["id","title","description","content","portal-slug","locale","account-id","category","status"])]))),128))])):O("v-if",!0)]),_:1},8,["title","empty","query","show-title","is-fetching"])}const Ept=G(gpt,[["render",vpt],["__file","/app/app/javascript/dashboard/modules/search/components/SearchResultArticlesList.vue"]]),MN=15,Spt={__name:"SearchView",setup(t,{expose:n}){n();const a=ft(),e=lt(),s=Fe(),{t:r}=Q(),o=P(e.params.tab||"all"),i=P(e.query.q||""),l=P({contacts:1,conversations:1,messages:1,articles:1}),c=le("conversationSearch/getContactRecords"),d=le("conversationSearch/getConversationRecords"),u=le("conversationSearch/getMessageRecords"),m=le("conversationSearch/getArticleRecords"),h=le("conversationSearch/getUIFlags"),_=(Ue,Re)=>Ue.value.map(Le=>({...Le,type:Re})),E=S(()=>_(c,"contact")),y=S(()=>_(d,"conversation")),b=S(()=>_(u,"message")),A=S(()=>_(m,"article")),T=S(()=>o.value==="all"),I=Ue=>T.value?Ue.value.slice(0,5):Ue.value,N=S(()=>I(E)),x=S(()=>I(y)),R=S(()=>I(b)),M=S(()=>I(A)),w=Ue=>S(()=>o.value===Ue||T.value),D=w("contacts"),B=w("conversations"),k=w("messages"),V=w("articles"),{shouldShow:F,isFeatureFlagEnabled:$}=uo(),Y={all:{permissions:[Cc,...Ua,..._s,Oc],count:()=>null},contacts:{permissions:[...Ua,Cc],count:()=>E.value.length},conversations:{permissions:[...Ua,..._s],count:()=>y.value.length},messages:{permissions:[...Ua,..._s],count:()=>b.value.length},articles:{permissions:[...Ua,Oc],featureFlag:pt.HELP_CENTER,count:()=>A.value.length}},j=S(()=>Object.entries(Y).map(([Ue,Re])=>({key:Ue,name:r(`SEARCH.TABS.${Ue.toUpperCase()}`),count:Re.count(),showBadge:Ue!=="all",permissions:Re.permissions,featureFlag:Re.featureFlag})).filter(Ue=>F(Ue.featureFlag,Ue.permissions,null)&&$(Ue.featureFlag))),U=S(()=>[{permissions:[...Ua,Cc],count:()=>N.value.length},{permissions:[...Ua,..._s],count:()=>x.value.length+R.value.length},{permissions:[...Ua,Oc],featureFlag:pt.HELP_CENTER,count:()=>M.value.length}].filter(Re=>F(Re.featureFlag,Re.permissions,null)&&$(Re.featureFlag)).map(Re=>Re.count()).reduce((Re,Le)=>Re+Le,0)),J=S(()=>{const Ue=j.value.findIndex(Re=>Re.key===o.value);return Ue>=0?Ue:0}),te=S(()=>{const{contact:Ue,message:Re,conversation:Le,article:Xe,isFetching:et}=h.value;return et||Ue.isFetching||Re.isFetching||Le.isFetching||Xe.isFetching}),q=S(()=>U.value===0&&h.value.isSearchCompleted&&T.value&&!te.value&&i.value),K=S(()=>h.value.isSearchCompleted&&U.value!==0||te.value||!T.value&&i.value&&!te.value),W=S(()=>{if(!i.value||te.value||o.value==="all")return!1;const Ue={contacts:E.value,conversations:y.value,messages:b.value,articles:A.value}[o.value];return(Ue==null?void 0:Ue.length)>0&&Ue.length===l.value[o.value]*MN}),ee=S(()=>{var Ue,Re,Le,Xe;return{contacts:((Ue=E.value)==null?void 0:Ue.length)>5&&T.value,conversations:((Re=y.value)==null?void 0:Re.length)>5&&T.value,messages:((Le=b.value)==null?void 0:Le.length)>5&&T.value,articles:((Xe=A.value)==null?void 0:Xe.length)>5&&T.value}}),ae=()=>{l.value={contacts:1,conversations:1,messages:1,articles:1},s.dispatch("conversationSearch/clearSearchResults")},ve=()=>{var Le;const Ue={accountId:e.params.accountId},Re={};o.value!=="all"&&(Ue.tab=o.value),(Le=i.value)!=null&&Le.trim()&&(Re.q=i.value.trim()),a.replace({name:"search",params:Ue,query:Re})},Ce=Ue=>{i.value=Ue,ae(),ve(),Ue&&(Nt($a.SEARCH_CONVERSATION),s.dispatch("conversationSearch/fullSearch",{q:Ue,page:1}))},ue=()=>{window.history.length>2?a.go(-1):a.push({name:"home"}),ae()},ge=()=>{const Ue={contacts:"conversationSearch/contactSearch",conversations:"conversationSearch/conversationSearch",messages:"conversationSearch/messageSearch",articles:"conversationSearch/articleSearch"};if(h.value.isFetching||o.value==="all")return;const Re=o.value;l.value[Re]+=1,s.dispatch(Ue[Re],{q:i.value,page:l.value[Re]})},Me=Ue=>{o.value=Ue,ve()};Pe(()=>{s.dispatch("conversationSearch/clearSearchResults"),e.query.q&&Ce(e.query.q)}),is(()=>{i.value="",s.dispatch("conversationSearch/clearSearchResults")});const We={router:a,route:e,store:s,t:r,PER_PAGE:MN,selectedTab:o,query:i,pages:l,contactRecords:c,conversationRecords:d,messageRecords:u,articleRecords:m,uiFlags:h,addTypeToRecords:_,mappedContacts:E,mappedConversations:y,mappedMessages:b,mappedArticles:A,isSelectedTabAll:T,sliceRecordsIfAllTab:I,contacts:N,conversations:x,messages:R,articles:M,filterByTab:w,filterContacts:D,filterConversations:B,filterMessages:k,filterArticles:V,shouldShow:F,isFeatureFlagEnabled:$,TABS_CONFIG:Y,tabs:j,totalSearchResultsCount:U,activeTabIndex:J,isFetchingAny:te,showEmptySearchResults:q,showResultsSection:K,showLoadMore:W,showViewMore:ee,clearSearchResult:ae,updateURL:ve,onSearch:Ce,onBack:ue,loadMore:ge,onTabChange:Me,ref:P,computed:S,onMounted:Pe,onUnmounted:is,get useMapGetter(){return le},get useStore(){return Fe},get useRouter(){return ft},get useRoute(){return lt},get useTrack(){return Nt},get useI18n(){return Q},get ROLES(){return Ua},get CONVERSATION_PERMISSIONS(){return _s},get CONTACT_PERMISSIONS(){return Cc},get PORTAL_PERMISSIONS(){return Oc},get usePolicy(){return uo},get FEATURE_FLAGS(){return pt},get CONVERSATION_EVENTS(){return $a},Policy:ii,NextButton:Se,SearchHeader:cut,SearchTabs:fut,SearchResultConversationsList:Lut,SearchResultMessagesList:Kut,SearchResultContactsList:ipt,SearchResultArticlesList:Ept};return Object.defineProperty(We,"__isScriptSetup",{enumerable:!1,value:!0}),We}},Tpt={class:"flex flex-col w-full h-full bg-n-background"},Apt={class:"flex w-full p-4"},ypt={class:"flex flex-col flex-grow w-full h-full overflow-hidden"},Ipt={class:"w-full max-w-4xl mx-auto"},Cpt={class:"flex flex-col w-full px-4"},Opt={class:"flex-grow w-full h-full overflow-y-auto"},Npt={class:"w-full max-w-4xl mx-auto px-4 pb-6"},xpt={key:0},Rpt={key:1,class:"flex justify-center mt-4 mb-6"},wpt={key:1,class:"flex flex-col items-center justify-center px-4 py-6 mt-8 rounded-md"},Mpt={class:"m-2 text-center text-n-slate-11"},Lpt={key:2,class:"flex flex-col items-center justify-center px-4 py-6 mt-8 text-center rounded-md"},Dpt={class:"text-center margin-bottom-0"},Ppt={class:"m-2 text-center text-n-slate-11"};function kpt(t,n,a,e,s,r){const o=H("fluent-icon");return p(),g("div",Tpt,[f("div",Apt,[v(e.NextButton,{label:e.t("GENERAL_SETTINGS.BACK"),icon:"i-lucide-chevron-left",faded:"",primary:"",sm:"",onClick:e.onBack},null,8,["label"])]),f("section",ypt,[f("div",Ipt,[f("div",Cpt,[v(e.SearchHeader,{"initial-query":e.query,onSearch:e.onSearch},null,8,["initial-query"]),e.query?(p(),L(e.SearchTabs,{key:0,tabs:e.tabs,"selected-tab":e.activeTabIndex,onTabChange:e.onTabChange},null,8,["tabs","selected-tab"])):O("v-if",!0)])]),f("div",Opt,[f("div",Npt,[e.showResultsSection?(p(),g("div",xpt,[v(e.Policy,{permissions:[...e.ROLES,e.CONTACT_PERMISSIONS],class:"flex flex-col justify-center"},{default:z(()=>[e.filterContacts?(p(),L(e.SearchResultContactsList,{key:0,"is-fetching":e.uiFlags.contact.isFetching,contacts:e.contacts,query:e.query,"show-title":e.isSelectedTabAll},null,8,["is-fetching","contacts","query","show-title"])):O("v-if",!0),e.showViewMore.contacts?(p(),L(e.NextButton,{key:1,label:e.t("SEARCH.VIEW_MORE"),icon:"i-lucide-eye",slate:"",sm:"",outline:"",onClick:n[0]||(n[0]=i=>e.selectedTab="contacts")},null,8,["label"])):O("v-if",!0)]),_:1},8,["permissions"]),v(e.Policy,{permissions:[...e.ROLES,...e.CONVERSATION_PERMISSIONS],class:"flex flex-col justify-center"},{default:z(()=>[e.filterMessages?(p(),L(e.SearchResultMessagesList,{key:0,"is-fetching":e.uiFlags.message.isFetching,messages:e.messages,query:e.query,"show-title":e.isSelectedTabAll},null,8,["is-fetching","messages","query","show-title"])):O("v-if",!0),e.showViewMore.messages?(p(),L(e.NextButton,{key:1,label:e.t("SEARCH.VIEW_MORE"),icon:"i-lucide-eye",slate:"",sm:"",outline:"",onClick:n[1]||(n[1]=i=>e.selectedTab="messages")},null,8,["label"])):O("v-if",!0)]),_:1},8,["permissions"]),v(e.Policy,{permissions:[...e.ROLES,...e.CONVERSATION_PERMISSIONS],class:"flex flex-col justify-center"},{default:z(()=>[e.filterConversations?(p(),L(e.SearchResultConversationsList,{key:0,"is-fetching":e.uiFlags.conversation.isFetching,conversations:e.conversations,query:e.query,"show-title":e.isSelectedTabAll},null,8,["is-fetching","conversations","query","show-title"])):O("v-if",!0),e.showViewMore.conversations?(p(),L(e.NextButton,{key:1,label:e.t("SEARCH.VIEW_MORE"),icon:"i-lucide-eye",slate:"",sm:"",outline:"",onClick:n[2]||(n[2]=i=>e.selectedTab="conversations")},null,8,["label"])):O("v-if",!0)]),_:1},8,["permissions"]),e.isFeatureFlagEnabled(e.FEATURE_FLAGS.HELP_CENTER)?(p(),L(e.Policy,{key:0,permissions:[...e.ROLES,e.PORTAL_PERMISSIONS],"feature-flag":e.FEATURE_FLAGS.HELP_CENTER,class:"flex flex-col justify-center"},{default:z(()=>[e.filterArticles?(p(),L(e.SearchResultArticlesList,{key:0,"is-fetching":e.uiFlags.article.isFetching,articles:e.articles,query:e.query,"show-title":e.isSelectedTabAll},null,8,["is-fetching","articles","query","show-title"])):O("v-if",!0),e.showViewMore.articles?(p(),L(e.NextButton,{key:1,label:e.t("SEARCH.VIEW_MORE"),icon:"i-lucide-eye",slate:"",sm:"",outline:"",onClick:n[3]||(n[3]=i=>e.selectedTab="articles")},null,8,["label"])):O("v-if",!0)]),_:1},8,["permissions","feature-flag"])):O("v-if",!0),e.showLoadMore?(p(),g("div",Rpt,[e.isSelectedTabAll?O("v-if",!0):(p(),L(e.NextButton,{key:0,label:e.t("SEARCH.LOAD_MORE"),icon:"i-lucide-cloud-download",slate:"",sm:"",faded:"",onClick:e.loadMore},null,8,["label"]))])):O("v-if",!0)])):e.showEmptySearchResults?(p(),g("div",wpt,[v(o,{icon:"info",size:"16px",class:"text-n-slate-11"}),f("p",Mpt,C(e.t("SEARCH.EMPTY_STATE_FULL",{query:e.query})),1)])):e.query?O("v-if",!0):(p(),g("div",Lpt,[f("p",Dpt,[v(o,{icon:"search",size:"24px",class:"text-n-slate-11"})]),f("p",Ppt,C(e.t("SEARCH.EMPTY_STATE_DEFAULT")),1)]))])])])])}const Bpt=G(Spt,[["render",kpt],["__file","/app/app/javascript/dashboard/modules/search/components/SearchView.vue"]]),Fpt=[{path:vt("accounts/:accountId/search/:tab?"),name:"search",meta:{permissions:[...Ua,..._s,Cc,Oc]},component:Bpt}],Upt={__name:"ContactSortMenu",props:{activeSort:{type:String,default:"last_activity_at"},activeOrdering:{type:String,default:""}},emits:["update:sort"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=P(!1),i=[{label:r("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.NAME"),value:"name"},{label:r("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.EMAIL"),value:"email"},{label:r("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.COMPANY"),value:"company_name"},{label:r("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.COUNTRY"),value:"country"},{label:r("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.CITY"),value:"city"},{label:r("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.LAST_ACTIVITY"),value:"last_activity_at"},{label:r("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.CREATED_AT"),value:"created_at"}],l=[{label:r("CONTACTS_LAYOUT.HEADER.ACTIONS.ORDER.OPTIONS.ASCENDING"),value:""},{label:r("CONTACTS_LAYOUT.HEADER.ACTIONS.ORDER.OPTIONS.DESCENDING"),value:"-"}],c=Pc(e,"activeSort"),d=Pc(e,"activeOrdering"),u=S(()=>{const y=i.find(b=>b.value===c.value);return(y==null?void 0:y.label)||r("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.LABEL")}),m=S(()=>{const y=l.find(b=>b.value===d.value);return(y==null?void 0:y.label)||r("CONTACTS_LAYOUT.HEADER.ACTIONS.ORDER.LABEL")}),E={props:e,emit:s,t:r,isMenuOpen:o,sortMenus:i,orderingMenus:l,activeSort:c,activeOrdering:d,activeSortLabel:u,activeOrderingLabel:m,handleSortChange:y=>{s("update:sort",{sort:y,order:e.activeOrdering})},handleOrderChange:y=>{s("update:sort",{sort:e.activeSort,order:y})},ref:P,computed:S,toRef:Pc,get useI18n(){return Q},Button:Se,SelectMenu:qL};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}},$pt={class:"relative"},Gpt={key:0,class:"absolute top-full mt-1 ltr:-right-32 rtl:-left-32 sm:ltr:right-0 sm:rtl:left-0 flex flex-col gap-4 bg-n-alpha-3 backdrop-blur-[100px] border border-n-weak w-72 rounded-xl p-4"},Vpt={class:"flex items-center justify-between gap-2"},Hpt={class:"text-sm text-n-slate-12"},jpt={class:"flex items-center justify-between gap-2"},Wpt={class:"text-sm text-n-slate-12"};function zpt(t,n,a,e,s,r){const o=nt("on-clickaway");return p(),g("div",$pt,[v(e.Button,{icon:"i-lucide-arrow-down-up",color:"slate",size:"sm",variant:"ghost",class:oe(e.isMenuOpen?"bg-n-alpha-2":""),onClick:n[0]||(n[0]=i=>e.isMenuOpen=!e.isMenuOpen)},null,8,["class"]),e.isMenuOpen?ce((p(),g("div",Gpt,[f("div",Vpt,[f("span",Hpt,C(e.t("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.LABEL")),1),v(e.SelectMenu,{"model-value":e.activeSort,options:e.sortMenus,label:e.activeSortLabel,"onUpdate:modelValue":e.handleSortChange},null,8,["model-value","label"])]),f("div",jpt,[f("span",Wpt,C(e.t("CONTACTS_LAYOUT.HEADER.ACTIONS.ORDER.LABEL")),1),v(e.SelectMenu,{"model-value":e.activeOrdering,options:e.orderingMenus,label:e.activeOrderingLabel,"onUpdate:modelValue":e.handleOrderChange},null,8,["model-value","label"])])])),[[o,()=>e.isMenuOpen=!1]]):O("v-if",!0)])}const Ypt=G(Upt,[["render",zpt],["__file","/app/app/javascript/dashboard/components-next/Contacts/ContactsHeader/components/ContactSortMenu.vue"]]),Kpt={__name:"ContactMoreActions",emits:["add","import","export"],setup(t,{expose:n,emit:a}){n();const e=a,{t:s}=Q(),r=[{label:s("CONTACTS_LAYOUT.HEADER.ACTIONS.CONTACT_CREATION.ADD_CONTACT"),action:"add",value:"add",icon:"i-lucide-plus"},{label:s("CONTACTS_LAYOUT.HEADER.ACTIONS.CONTACT_CREATION.EXPORT_CONTACT"),action:"export",value:"export",icon:"i-lucide-upload"},{label:s("CONTACTS_LAYOUT.HEADER.ACTIONS.CONTACT_CREATION.IMPORT_CONTACT"),action:"import",value:"import",icon:"i-lucide-download"}],o=P(!1),l={emit:e,t:s,contactMenuItems:r,showActionsDropdown:o,handleContactAction:({action:c})=>{c==="add"?e("add"):c==="import"?e("import"):c==="export"&&e("export")},ref:P,get useI18n(){return Q},Button:Se,DropdownMenu:ds};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}},Xpt={class:"relative"};function qpt(t,n,a,e,s,r){const o=nt("on-clickaway");return ce((p(),g("div",Xpt,[v(e.Button,{icon:"i-lucide-ellipsis-vertical",color:"slate",variant:"ghost",size:"sm",class:oe(e.showActionsDropdown?"bg-n-alpha-2":""),onClick:n[0]||(n[0]=i=>e.showActionsDropdown=!e.showActionsDropdown)},null,8,["class"]),e.showActionsDropdown?(p(),L(e.DropdownMenu,{key:0,"menu-items":e.contactMenuItems,class:"ltr:right-0 rtl:left-0 mt-1 w-52 top-full",onAction:n[1]||(n[1]=i=>e.handleContactAction(i))})):O("v-if",!0)])),[[o,()=>e.showActionsDropdown=!1]])}const Zpt=G(Kpt,[["render",qpt],["__file","/app/app/javascript/dashboard/components-next/Contacts/ContactsHeader/components/ContactMoreActions.vue"]]),Qpt={__name:"ContactHeader",props:{showSearch:{type:Boolean,default:!0},searchValue:{type:String,default:""},headerTitle:{type:String,required:!0},buttonLabel:{type:String,default:""},activeSort:{type:String,default:"last_activity_at"},activeOrdering:{type:String,default:""},isSegmentsView:{type:Boolean,default:!1},hasActiveFilters:{type:Boolean,default:!1},isLabelView:{type:Boolean,default:!1},isActiveView:{type:Boolean,default:!1}},emits:["search","filter","update:sort","add","import","export","createSegment","deleteSegment"],setup(t,{expose:n,emit:a}){n();const s={emit:a,Button:Se,Input:sn,Icon:Bt,ContactSortMenu:Ypt,ContactMoreActions:Zpt,ComposeConversation:c_};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}},Jpt={class:"sticky top-0 z-10"},eft={class:"flex items-start sm:items-center justify-between w-full py-6 px-6 gap-2 mx-auto max-w-[60rem]"},tft={class:"text-xl font-medium truncate text-n-slate-12"},nft={class:"flex items-center flex-col sm:flex-row flex-shrink-0 gap-4"},aft={key:0,class:"flex items-center gap-2 w-full"},sft={class:"flex items-center flex-shrink-0 gap-4"},oft={class:"flex items-center gap-2"},rft={key:0,class:"relative"},ift={key:0,class:"absolute top-0 right-0 w-2 h-2 rounded-full bg-n-brand"};function lft(t,n,a,e,s,r){return p(),g("header",Jpt,[f("div",eft,[f("span",tft,C(a.headerTitle),1),f("div",nft,[a.showSearch?(p(),g("div",aft,[v(e.Input,{"model-value":a.searchValue,type:"search",placeholder:t.$t("CONTACTS_LAYOUT.HEADER.SEARCH_PLACEHOLDER"),"custom-input-class":["h-8 [&:not(.focus)]:!border-transparent bg-n-alpha-2 dark:bg-n-solid-1 ltr:!pl-8 !py-1 rtl:!pr-8"],class:"w-full",onInput:n[0]||(n[0]=o=>e.emit("search",o.target.value))},{prefix:z(()=>[v(e.Icon,{icon:"i-lucide-search",class:"absolute -translate-y-1/2 text-n-slate-11 size-4 top-1/2 ltr:left-2 rtl:right-2"})]),_:1},8,["model-value","placeholder"])])):O("v-if",!0),f("div",sft,[f("div",oft,[!a.isLabelView&&!a.isActiveView?(p(),g("div",rft,[v(e.Button,{id:"toggleContactsFilterButton",icon:a.isSegmentsView?"i-lucide-pen-line":"i-lucide-list-filter",color:"slate",size:"sm",class:"relative w-8",variant:"ghost",onClick:n[1]||(n[1]=o=>e.emit("filter"))},{default:z(()=>[a.hasActiveFilters&&!a.isSegmentsView?(p(),g("div",ift)):O("v-if",!0)]),_:1},8,["icon"]),qe(t.$slots,"filter")])):O("v-if",!0),a.hasActiveFilters&&!a.isSegmentsView&&!a.isLabelView&&!a.isActiveView?(p(),L(e.Button,{key:1,icon:"i-lucide-save",color:"slate",size:"sm",variant:"ghost",onClick:n[2]||(n[2]=o=>e.emit("createSegment"))})):O("v-if",!0),a.isSegmentsView&&!a.isLabelView&&!a.isActiveView?(p(),L(e.Button,{key:2,icon:"i-lucide-trash",color:"slate",size:"sm",variant:"ghost",onClick:n[3]||(n[3]=o=>e.emit("deleteSegment"))})):O("v-if",!0),v(e.ContactSortMenu,{"active-sort":a.activeSort,"active-ordering":a.activeOrdering,"onUpdate:sort":n[4]||(n[4]=o=>e.emit("update:sort",o))},null,8,["active-sort","active-ordering"]),v(e.ContactMoreActions,{onAdd:n[5]||(n[5]=o=>e.emit("add")),onImport:n[6]||(n[6]=o=>e.emit("import")),onExport:n[7]||(n[7]=o=>e.emit("export"))})]),n[8]||(n[8]=f("div",{class:"w-px h-4 bg-n-strong"},null,-1)),v(e.ComposeConversation,null,{trigger:z(({toggle:o})=>[v(e.Button,{label:a.buttonLabel,size:"sm",onClick:o},null,8,["label","onClick"])]),_:1})])])])])}const cft=G(Qpt,[["render",lft],["__file","/app/app/javascript/dashboard/components-next/Contacts/ContactsHeader/ContactHeader.vue"]]),dft={__name:"ComboBoxDropdown",props:an({open:{type:Boolean,required:!0},options:{type:Array,required:!0},searchPlaceholder:{type:String,default:""},emptyState:{type:String,default:""},multiple:{type:Boolean,default:!1},selectedValues:{type:[String,Number,Array],default:()=>[]}},{searchValue:{type:String,default:""},searchValueModifiers:{}}),emits:an(["select","search"],["update:searchValue"]),setup(t,{expose:n,emit:a}){const e=t,s=a,{t:r}=Q(),o=dn(t,"searchValue"),i=P(null),l=u=>Array.isArray(e.selectedValues)?e.selectedValues.includes(u.value):u.value===e.selectedValues,c=u=>{o.value=u.target.value,s("search",u.target.value)};n({focus:()=>{var u;return(u=i.value)==null?void 0:u.focus()}});const d={props:e,emit:s,t:r,searchValue:o,searchInput:i,isSelected:l,onInputSearch:c,ref:P,get useI18n(){return Q}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}},uft={class:"absolute z-50 w-full mt-1 transition-opacity duration-200 border rounded-md shadow-lg bg-n-solid-1 border-n-strong"},pft={class:"relative border-b border-n-strong"},fft=["value","placeholder"],mft=["aria-multiselectable"],hft=["aria-selected","onClick"],_ft={key:0,class:"flex-shrink-0 i-lucide-check size-4 text-n-slate-11"},gft={key:0,class:"px-3 py-2 text-sm text-n-slate-11"};function bft(t,n,a,e,s,r){return ce((p(),g("div",uft,[f("div",pft,[n[0]||(n[0]=f("span",{class:"absolute i-lucide-search top-2.5 size-4 left-3"},null,-1)),f("input",{ref:"searchInput",value:e.searchValue,type:"search",placeholder:a.searchPlaceholder||e.t("COMBOBOX.SEARCH_PLACEHOLDER"),class:"reset-base w-full py-2 pl-10 pr-2 text-sm focus:outline-none border-none rounded-t-md bg-n-solid-1 text-n-slate-12",onInput:e.onInputSearch},null,40,fft)]),f("ul",{class:"py-1 mb-0 overflow-auto max-h-60",role:"listbox","aria-multiselectable":a.multiple},[(p(!0),g(de,null,Ae(a.options,o=>(p(),g("li",{key:o.value,class:oe(["flex items-center justify-between w-full gap-2 px-3 py-2 text-sm transition-colors duration-150 cursor-pointer hover:bg-n-alpha-2",{"bg-n-alpha-2":e.isSelected(o)}]),role:"option","aria-selected":e.isSelected(o),onClick:i=>e.emit("select",o)},[f("span",{class:oe([{"font-medium":e.isSelected(o)},"text-n-slate-12"])},C(o.label),3),e.isSelected(o)?(p(),g("span",_ft)):O("v-if",!0)],10,hft))),128)),a.options.length===0?(p(),g("li",gft,C(a.emptyState||e.t("COMBOBOX.EMPTY_STATE")),1)):O("v-if",!0)],8,mft)],512)),[[En,a.open]])}const iP=G(dft,[["render",bft],["__file","/app/app/javascript/dashboard/components-next/combobox/ComboBoxDropdown.vue"]]),vft={__name:"ComboBox",props:{options:{type:Array,required:!0,validator:t=>t.every(n=>"value"in n&&"label"in n)},placeholder:{type:String,default:""},modelValue:{type:[String,Number],default:""},disabled:{type:Boolean,default:!1},searchPlaceholder:{type:String,default:""},emptyState:{type:String,default:""},message:{type:String,default:""},hasError:{type:Boolean,default:!1},useApiResults:{type:Boolean,default:!1}},emits:["update:modelValue","search"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=P(e.modelValue),i=P(!1),l=P(""),c=P(null),d=P(null),u=S(()=>{if(e.useApiResults&&l.value)return e.options;const b=l.value.toLowerCase();return e.options.filter(A=>A.label.toLowerCase().includes(b))}),m=S(()=>e.placeholder||r("COMBOBOX.PLACEHOLDER")),h=S(()=>{const b=e.options.find(A=>A.value===o.value);return(b==null?void 0:b.label)??m.value}),_=b=>{o.value=b.value,s("update:modelValue",b.value),i.value=!1,l.value=""},E=()=>{e.disabled||(i.value=!i.value,i.value&&(l.value="",At(()=>{var b;return(b=c.value)==null?void 0:b.focus()})))};je(()=>e.modelValue,b=>{o.value=b});const y={props:e,emit:s,t:r,selectedValue:o,open:i,search:l,dropdownRef:c,comboboxRef:d,filteredOptions:u,selectPlaceholder:m,selectedLabel:h,selectOption:_,toggleDropdown:E,ref:P,computed:S,watch:je,nextTick:At,get OnClickOutside(){return lh},get useI18n(){return Q},Button:Se,ComboBoxDropdown:iP};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}};function Eft(t,n,a,e,s,r){return p(),g("div",{ref:"comboboxRef",class:oe(["relative w-full min-w-0",{"cursor-not-allowed":a.disabled,"group/combobox":!a.disabled}]),onClick:n[3]||(n[3]=Ve(()=>{},["prevent"]))},[v(e.OnClickOutside,{onTrigger:n[2]||(n[2]=o=>e.open=!1)},{default:z(()=>[v(e.Button,{variant:"outline",color:a.hasError&&!e.open?"ruby":e.open?"blue":"slate",label:e.selectedLabel,"trailing-icon":"",disabled:a.disabled,class:oe(["justify-between w-full !px-3 !py-2.5 text-n-slate-12 font-normal group-hover/combobox:border-n-slate-6 focus:outline-n-brand",{focused:e.open,"[&:not(.focused)]:dark:outline-n-weak [&:not(.focused)]:hover:enabled:outline-n-slate-6 [&:not(.focused)]:dark:hover:enabled:outline-n-slate-6":!a.hasError}]),icon:e.open?"i-lucide-chevron-up":"i-lucide-chevron-down",onClick:e.toggleDropdown},null,8,["color","label","disabled","class","icon"]),v(e.ComboBoxDropdown,{ref:"dropdownRef","search-value":e.search,"onUpdate:searchValue":n[0]||(n[0]=o=>e.search=o),open:e.open,options:e.filteredOptions,"search-placeholder":a.searchPlaceholder,"empty-state":a.emptyState,"selected-values":e.selectedValue,onSearch:n[1]||(n[1]=o=>e.emit("search",o)),onSelect:e.selectOption},null,8,["search-value","open","options","search-placeholder","empty-state","selected-values"]),a.message?(p(),g("p",{key:0,class:oe(["mt-2 mb-0 text-xs truncate transition-all duration-500 ease-in-out",{"text-n-ruby-9":a.hasError,"text-n-slate-11":!a.hasError}])},C(a.message),3)):O("v-if",!0)]),_:1})],2)}const Cr=G(vft,[["render",Eft],["__file","/app/app/javascript/dashboard/components-next/combobox/ComboBox.vue"]]),Sft={__name:"PhoneNumberInput",props:an({placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},showBorder:{type:Boolean,default:!0}},{modelValue:{type:[String,Number],default:""},modelModifiers:{}}),emits:["update:modelValue"],setup(t,{expose:n}){n();const a=t,e=dn(t,"modelValue"),{t:s}=Q(),r=P(!1),o=P(""),i=P(tv()),l=P(ev()),c=P(""),d={phoneNumber:{minLength:Rt(2),numeric:rT},activeDialCode:{required:Ge,validDialCode:R=>rs.some(M=>M.dial_code===R)}},u=rt(d,{phoneNumber:c,activeDialCode:l}),m=S(()=>u.value.$invalid),h=S(()=>rs.map(R=>({value:R.id,label:R.name,dialCode:R.dial_code,emoji:R.emoji,isSelected:String(i.value)===String(R.id),action:"phoneNumberInput"}))),_=S(()=>{const R=o.value.toLowerCase();return h.value.filter(({label:M,dialCode:w,value:D})=>[M,w,D].some(B=>B.toLowerCase().includes(R)))}),E=S(()=>i.value?h.value.find(R=>R.value===i.value):""),y=S(()=>{const R="outline-n-ruby-8 dark:outline-n-ruby-8 hover:outline-n-ruby-9 dark:hover:outline-n-ruby-9 disabled:outline-n-ruby-8 dark:disabled:outline-n-ruby-8",M="has-[:focus]:outline-n-brand dark:has-[:focus]:outline-n-brand";return a.showBorder?m.value?R:`${M} outline-n-weak dark:outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6 disabled:outline-n-weak dark:disabled:outline-n-weak`:m.value?R:`outline-transparent ${M}`}),b=S(()=>u.value.$dirty?u.value.activeDialCode.$invalid?s("PHONE_INPUT.DIAL_CODE_ERROR"):u.value.phoneNumber.$invalid&&s("PHONE_INPUT.ERROR"):""),A=R=>{const M=R?`${l.value}${R}`:"";e.value=M},T=async({value:R,dialCode:M})=>{!R||!r.value||(i.value=R,l.value=M,o.value="",r.value=!1,!u.value.$invalid&&c.value&&A(c.value))},I=()=>{r.value=!r.value},N=()=>{r.value=!1};je(c,async R=>{await u.value.$touch(),u.value.$invalid||A(R)}),je(e,R=>{const M=ku(R);M&&(M!=null&&M.country&&(i.value=M.country),M!=null&&M.countryCallingCode&&(l.value=`+${M.countryCallingCode}`),c.value=R.replace(`+${M.countryCallingCode}`,""))},{immediate:!0});const x={props:a,modelValue:e,t:s,showDropdown:r,searchQuery:o,activeCountryCode:i,activeDialCode:l,phoneNumber:c,rules:d,v$:u,hasError:m,countryList:h,filteredCountries:_,activeCountry:E,inputBorderClass:y,phoneNumberError:b,emitPhoneNumber:A,onSelectCountry:T,toggleCountryDropdown:I,closeCountryDropdown:N,ref:P,computed:S,watch:je,get parsePhoneNumber(){return ku},get useI18n(){return Q},get countries(){return rs},get useVuelidate(){return rt},get required(){return Ge},get minLength(){return Rt},get numeric(){return rT},get getActiveCountryCode(){return tv},get getActiveDialCode(){return ev},Input:sn,Button:Se,DropdownMenu:ds};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}},Tft={class:"flex items-center flex-shrink-0"},Aft={key:0,class:"inline-flex justify-center text-sm whitespace-nowrap"},yft={key:0,class:"text-sm left-[38px] top-2.5 text-n-slate-11 ltr:!pl-1 rtl:!pr-1"},Ift={key:0,class:"min-w-0 mt-1 mb-0 text-xs truncate transition-all duration-500 ease-in-out text-n-ruby-9 dark:text-n-ruby-9"};function Cft(t,n,a,e,s,r){const o=nt("on-clickaway");return p(),g("div",null,[ce((p(),g("div",{class:oe(["relative flex items-center h-8 transition-all duration-500 ease-in-out outline outline-1 outline-offset-[-1px] rounded-lg bg-n-alpha-black2",[e.inputBorderClass,{"cursor-not-allowed opacity-50":a.disabled}]])},[v(e.Input,{modelValue:e.phoneNumber,"onUpdate:modelValue":n[0]||(n[0]=i=>e.phoneNumber=i),type:"tel",placeholder:a.placeholder,disabled:a.disabled,"custom-input-class":"!border-0 !outline-none h-8 !py-0.5 !bg-transparent ltr:!pl-1 rtl:!pr-1",class:"w-full !flex-row"},{prefix:z(()=>{var i;return[f("div",Tft,[v(e.Button,{label:((i=e.activeCountry)==null?void 0:i.emoji)||"",color:"slate",size:"sm",icon:e.activeCountry?"i-lucide-chevron-down":"i-lucide-globe","trailing-icon":"",disabled:a.disabled,type:"button",class:"!h-[1.875rem] top-1 ltr:ml-px rtl:mr-px !px-2 outline-0 !outline-none !rounded-lg border-0 ltr:!rounded-r-none rtl:!rounded-l-none",onClick:e.toggleCountryDropdown},{default:z(()=>{var l;return[e.activeCountry?(p(),g("span",Aft,C((l=e.activeCountry)==null?void 0:l.emoji),1)):O("v-if",!0)]}),_:1},8,["label","icon","disabled"]),e.activeCountry?(p(),g("span",yft,C(e.activeDialCode),1)):O("v-if",!0)])]}),_:1},8,["modelValue","placeholder","disabled"]),e.showDropdown?(p(),L(e.DropdownMenu,{key:0,"menu-items":e.filteredCountries,"show-search":"",class:"z-[100] w-48 mt-2 overflow-y-auto ltr:left-0 rtl:right-0 top-full max-h-52",onAction:e.onSelectCountry},null,8,["menu-items"])):O("v-if",!0)],2)),[[o,()=>e.closeCountryDropdown()]]),e.phoneNumberError?(p(),g(de,{key:0},[e.phoneNumberError?(p(),g("p",Ift,C(e.phoneNumberError),1)):O("v-if",!0)],64)):O("v-if",!0)])}const Oft=G(Sft,[["render",Cft],["__file","/app/app/javascript/dashboard/components-next/phonenumberinput/PhoneNumberInput.vue"]]),Nft={__name:"ContactsForm",props:{contactData:{type:Object,default:null},isDetailsView:{type:Boolean,default:!1},isNewContact:{type:Boolean,default:!1}},emits:["update"],setup(t,{expose:n,emit:a}){const e=t,s=a,{t:r}=Q(),o={FIRST_NAME:{field:"firstName"},LAST_NAME:{field:"lastName"},EMAIL_ADDRESS:{field:"email"},PHONE_NUMBER:{field:"phoneNumber"},CITY:{field:"additionalAttributes.city"},COUNTRY:{field:"additionalAttributes.countryCode"},BIO:{field:"additionalAttributes.description"},COMPANY_NAME:{field:"additionalAttributes.companyName"}},i={LINKEDIN:"i-ri-linkedin-box-fill",FACEBOOK:"i-ri-facebook-circle-fill",INSTAGRAM:"i-ri-instagram-line",TWITTER:"i-ri-twitter-x-fill",GITHUB:"i-ri-github-fill"},l={id:0,name:"",email:"",firstName:"",lastName:"",phoneNumber:"",additionalAttributes:{description:"",companyName:"",countryCode:"",country:"",city:"",socialProfiles:{facebook:"",github:"",instagram:"",linkedin:"",twitter:""}}},c=Lt({...l}),d={firstName:{required:Ge},email:{email:br}},u=rt(d,c),m=S(()=>u.value.$invalid),h=()=>{if(e.isNewContact)return;const{id:w,name:D="",email:B,phoneNumber:k,additionalAttributes:V={}}=e.contactData||{},{firstName:F,lastName:$}=X1(D||""),{description:Y="",companyName:j="",countryCode:U="",country:J="",city:te="",socialProfiles:q={}}=V||{};Object.assign(c,{id:w,name:D,firstName:F,lastName:$,email:B,phoneNumber:k,additionalAttributes:{description:Y,companyName:j,countryCode:U,country:J,city:te,socialProfiles:q}})},_=S(()=>rs.map(({name:w,id:D})=>({label:w,value:D}))),E=S(()=>Object.keys(o).map(w=>({key:w,placeholder:r(`CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.FORM.${w}.PLACEHOLDER`)}))),y=S(()=>Object.entries(i).map(([w,D])=>({key:w,placeholder:r(`CONTACTS_LAYOUT.CARD.SOCIAL_MEDIA.FORM.${w}.PLACEHOLDER`),icon:D}))),b=w=>{var B;const D=(B=o[w])==null?void 0:B.field;return["firstName","email"].includes(D)},A=w=>{var D;return(D=o[w])==null?void 0:D.field},T=w=>{var B;const D=(B=o[w])==null?void 0:B.field;return D?S({get:()=>{var F,$;if(D==="firstName"||D==="lastName")return((F=c[D])==null?void 0:F.toString())||"";const[k,V]=D.split(".");return(($=V?c[k][V]:c[k])==null?void 0:$.toString())||""},set:async k=>{if(D==="firstName"||D==="lastName")c[D]=k,c.name=`${c.firstName} ${c.lastName}`.trim();else{const[F,$]=D.split(".");$?c[F][$]=k:c[F]=k}if(await u.value.$validate()){const{firstName:F,lastName:$,...Y}=c;s("update",Y)}}}):null},I=w=>{var D;return b(w)&&((D=u.value[A(w)])!=null&&D.$error)?"error":"info"},N=w=>{const D=rs.find(B=>B.id===w);c.additionalAttributes.country=(D==null?void 0:D.name)||"",s("update",c)},x=()=>{u.value.$reset()},R=()=>{Object.assign(c,l)};je(()=>{var w;return(w=e.contactData)==null?void 0:w.id},w=>{w&&h()},{immediate:!0}),n({state:c,resetValidation:x,isFormInvalid:m,resetForm:R});const M={props:e,emit:s,t:r,FORM_CONFIG:o,SOCIAL_CONFIG:i,defaultState:l,state:c,validationRules:d,v$:u,isFormInvalid:m,prepareStateBasedOnProps:h,countryOptions:_,editDetailsForm:E,socialProfilesForm:y,isValidationField:b,getValidationKey:A,getFormBinding:T,getMessageType:I,handleCountrySelection:N,resetValidation:x,resetForm:R,computed:S,reactive:Lt,watch:je,get useI18n(){return Q},get required(){return Ge},get email(){return br},get useVuelidate(){return rt},get splitName(){return X1},get countries(){return rs},Input:sn,ComboBox:Cr,Icon:Bt,PhoneNumberInput:Oft};return Object.defineProperty(M,"__isScriptSetup",{enumerable:!1,value:!0}),M}},xft={class:"flex flex-col gap-6"},Rft={class:"flex flex-col items-start gap-2"},wft={class:"py-1 text-sm font-medium text-n-slate-12"},Mft={class:"grid w-full grid-cols-1 gap-4 sm:grid-cols-2"},Lft={class:"flex flex-col items-start gap-2"},Dft={class:"py-1 text-sm font-medium text-n-slate-12"},Pft={class:"flex flex-wrap gap-2"},kft=["onUpdate:modelValue","placeholder","size"];function Bft(t,n,a,e,s,r){return p(),g("div",xft,[f("div",Rft,[f("span",wft,C(e.t("CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.TITLE")),1),f("div",Mft,[(p(!0),g(de,null,Ae(e.editDetailsForm,o=>(p(),g(de,{key:o.key},[o.key==="COUNTRY"?(p(),L(e.ComboBox,{key:0,modelValue:e.state.additionalAttributes.countryCode,"onUpdate:modelValue":[n[0]||(n[0]=i=>e.state.additionalAttributes.countryCode=i),e.handleCountrySelection],options:e.countryOptions,placeholder:o.placeholder,class:oe(["[&>div>button]:h-8",{"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:!outline-transparent":!a.isDetailsView,"[&>div>button]:!bg-n-alpha-black2":a.isDetailsView}])},null,8,["modelValue","options","placeholder","class"])):o.key==="PHONE_NUMBER"?(p(),L(e.PhoneNumberInput,{key:1,modelValue:e.getFormBinding(o.key).value,"onUpdate:modelValue":i=>e.getFormBinding(o.key).value=i,placeholder:o.placeholder,"show-border":a.isDetailsView},null,8,["modelValue","onUpdate:modelValue","placeholder","show-border"])):(p(),L(e.Input,{key:2,modelValue:e.getFormBinding(o.key).value,"onUpdate:modelValue":i=>e.getFormBinding(o.key).value=i,placeholder:o.placeholder,"message-type":e.getMessageType(o.key),"custom-input-class":`h-8 !pt-1 !pb-1 ${a.isDetailsView?"":"[&:not(.error,.focus)]:!outline-transparent"}`,class:"w-full",onInput:i=>e.isValidationField(o.key)&&e.v$[e.getValidationKey(o.key)].$touch(),onBlur:i=>e.isValidationField(o.key)&&e.v$[e.getValidationKey(o.key)].$touch()},null,8,["modelValue","onUpdate:modelValue","placeholder","message-type","custom-input-class","onInput","onBlur"]))],64))),128))])]),f("div",Lft,[f("span",Dft,C(e.t("CONTACTS_LAYOUT.CARD.SOCIAL_MEDIA.TITLE")),1),f("div",Pft,[(p(!0),g(de,null,Ae(e.socialProfilesForm,o=>(p(),g("div",{key:o.key,class:oe(["flex items-center h-8 gap-2 px-2 rounded-lg",{"bg-n-alpha-2 dark:bg-n-solid-2":a.isDetailsView,"bg-n-alpha-2 dark:bg-n-solid-3":!a.isDetailsView}])},[v(e.Icon,{icon:o.icon,class:"flex-shrink-0 text-n-slate-11 size-4"},null,8,["icon"]),ce(f("input",{"onUpdate:modelValue":i=>e.state.additionalAttributes.socialProfiles[o.key.toLowerCase()]=i,class:"w-auto min-w-[100px] text-sm bg-transparent outline-none reset-base text-n-slate-12 dark:text-n-slate-12 placeholder:text-n-slate-10 dark:placeholder:text-n-slate-10",placeholder:o.placeholder,size:o.placeholder.length,onInput:n[1]||(n[1]=i=>e.emit("update",e.state))},null,40,kft),[[Et,e.state.additionalAttributes.socialProfiles[o.key.toLowerCase()]]])],2))),128))])])])}const O1=G(Nft,[["render",Bft],["__file","/app/app/javascript/dashboard/components-next/Contacts/ContactsForm/ContactsForm.vue"]]),Fft={__name:"CreateNewContactDialog",emits:["create"],setup(t,{expose:n,emit:a}){const e=a,{t:s}=Q(),r=P(null),o=P(null),i=P(null),l=le("contacts/getUIFlags"),c=S(()=>l.value.isCreating),d=E=>{i.value=E},u=async()=>{i.value&&e("create",i.value)},m=()=>{var E;(E=o.value)==null||E.resetForm(),r.value.close()},h=()=>{r.value.close()};n({dialogRef:r,contactsFormRef:o,onSuccess:m});const _={emit:e,t:s,dialogRef:r,contactsFormRef:o,contact:i,uiFlags:l,isCreatingContact:c,createNewContact:d,handleDialogConfirm:u,onSuccess:m,closeDialog:h,ref:P,computed:S,get useMapGetter(){return le},get useI18n(){return Q},Dialog:la,Button:Se,ContactsForm:O1};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}},Uft={class:"flex items-center justify-between w-full gap-3"};function $ft(t,n,a,e,s,r){return p(),L(e.Dialog,{ref:"dialogRef",width:"3xl",onConfirm:e.handleDialogConfirm},{footer:z(()=>{var o;return[f("div",Uft,[v(e.Button,{label:e.t("DIALOG.BUTTONS.CANCEL"),variant:"link",type:"reset",class:"h-10 hover:!no-underline hover:text-n-brand",onClick:e.closeDialog},null,8,["label"]),v(e.Button,{type:"submit",label:e.t("CONTACTS_LAYOUT.HEADER.ACTIONS.CONTACT_CREATION.SAVE_CONTACT"),color:"blue",disabled:(o=e.contactsFormRef)==null?void 0:o.isFormInvalid,"is-loading":e.isCreatingContact},null,8,["label","disabled","is-loading"])])]}),default:z(()=>[v(e.ContactsForm,{ref:"contactsFormRef","is-new-contact":"",onUpdate:e.createNewContact},null,512)]),_:1},512)}const lP=G(Fft,[["render",$ft],["__file","/app/app/javascript/dashboard/components-next/Contacts/ContactsForm/CreateNewContactDialog.vue"]]),Gft={__name:"ContactExportDialog",emits:["export"],setup(t,{expose:n,emit:a}){const e=a,{t:s}=Q(),r=lt(),o=P(null),i=le("customViews/getContactCustomViews"),l=le("contacts/getAppliedContactFilters"),c=le("contacts/getUIFlags"),d=S(()=>c.value.isExporting),u=S(()=>r.params.segmentId),m=S(()=>u.value?i.value.find(y=>y.id===Number(u.value)):void 0),h=async()=>{let y={payload:[]};u.value&&m.value?y=m.value.query:Object.keys(l.value).length>0&&(y=zs(l.value)),e("export",{...y,label:r.params.label||""})},_=async()=>{var y;await h(),(y=o.value)==null||y.close()};n({dialogRef:o});const E={emit:e,t:s,route:r,dialogRef:o,segments:i,appliedFilters:l,uiFlags:c,isExportingContact:d,activeSegmentId:u,activeSegment:m,exportContacts:h,handleDialogConfirm:_,ref:P,computed:S,get useMapGetter(){return le},get useRoute(){return lt},get useI18n(){return Q},get filterQueryGenerator(){return zs},Dialog:la};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}};function Vft(t,n,a,e,s,r){return p(),L(e.Dialog,{ref:"dialogRef",title:e.t("CONTACTS_LAYOUT.HEADER.ACTIONS.EXPORT_CONTACT.TITLE"),description:e.t("CONTACTS_LAYOUT.HEADER.ACTIONS.EXPORT_CONTACT.DESCRIPTION"),"confirm-button-label":e.t("CONTACTS_LAYOUT.HEADER.ACTIONS.EXPORT_CONTACT.CONFIRM"),"is-loading":e.isExportingContact,"disable-confirm-button":e.isExportingContact,onConfirm:e.handleDialogConfirm},null,8,["title","description","confirm-button-label","is-loading","disable-confirm-button"])}const Hft=G(Gft,[["render",Vft],["__file","/app/app/javascript/dashboard/components-next/Contacts/ContactsForm/ContactExportDialog.vue"]]),jft="/downloads/import-contacts-sample.csv",Wft={__name:"ContactImportDialog",emits:["import"],setup(t,{expose:n,emit:a}){const e=a,{t:s}=Q(),r=le("contacts/getUIFlags"),o=S(()=>r.value.isImporting),i=P(null),l=P(null),c=P(null),d=P(""),u=()=>{var b;return(b=l.value)==null?void 0:b.click()},m=b=>{const A=b.lastIndexOf("."),T=b.slice(A),I=b.slice(0,A);return I.length>20?`${I.slice(0,20)}...${T}`:b},h=()=>{var A;const b=(A=l.value)==null?void 0:A.files[0];c.value=b,d.value=b?m(b.name):""},_=()=>{c.value=null,l.value&&(l.value.value=null),d.value=""},E=async()=>{c.value&&e("import",c.value)};n({dialogRef:i});const y={emit:e,t:s,uiFlags:r,isImportingContact:o,dialogRef:i,fileInput:l,hasSelectedFile:c,selectedFileName:d,csvUrl:jft,handleFileClick:u,processFileName:m,handleFileChange:h,handleRemoveFile:_,uploadFile:E,ref:P,computed:S,get useMapGetter(){return le},get useI18n(){return Q},Dialog:la,Button:Se};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}},zft={class:"mb-0 text-sm text-n-slate-11"},Yft={class:"flex flex-col gap-2"},Kft={class:"flex items-center gap-2"},Xft={class:"text-sm text-n-slate-12 whitespace-nowrap"},qft={class:"flex items-center justify-between w-full gap-2"},Zft={key:0,class:"text-sm text-n-slate-12"},Qft={key:2,class:"flex items-center gap-1"};function Jft(t,n,a,e,s,r){return p(),L(e.Dialog,{ref:"dialogRef",title:e.t("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.TITLE"),"confirm-button-label":e.t("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.IMPORT"),"is-loading":e.isImportingContact,"disable-confirm-button":e.isImportingContact,onConfirm:e.uploadFile},{description:z(()=>[f("p",zft,[Oe(C(e.t("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.DESCRIPTION"))+" ",1),f("a",{href:e.csvUrl,target:"_blank",rel:"noopener noreferrer",download:"import-contacts-sample.csv",class:"text-n-blue-text"},C(e.t("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.DOWNLOAD_LABEL")),1)])]),default:z(()=>[f("div",Yft,[f("div",Kft,[f("label",Xft,C(e.t("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.LABEL")),1),f("div",qft,[e.hasSelectedFile?(p(),g("span",Zft,C(e.selectedFileName),1)):O("v-if",!0),e.hasSelectedFile?(p(),g("div",Qft,[v(e.Button,{label:e.t("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.CHANGE"),color:"slate",variant:"ghost",size:"sm",onClick:e.handleFileClick},null,8,["label"]),n[0]||(n[0]=f("div",{class:"w-px h-3 bg-n-strong"},null,-1)),v(e.Button,{icon:"i-lucide-trash",color:"slate",variant:"ghost",size:"sm",onClick:e.handleRemoveFile})])):(p(),L(e.Button,{key:1,label:e.t("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.CHOOSE_FILE"),icon:"i-lucide-upload",color:"slate",variant:"ghost",size:"sm",class:"!w-fit",onClick:e.handleFileClick},null,8,["label"]))])])]),f("input",{ref:"fileInput",type:"file",accept:"text/csv",class:"hidden",onChange:e.handleFileChange},null,544)]),_:1},8,["title","confirm-button-label","is-loading","disable-confirm-button"])}const emt=G(Wft,[["render",Jft],["__file","/app/app/javascript/dashboard/components-next/Contacts/ContactsForm/ContactImportDialog.vue"]]),LN=1,tmt={__name:"CreateSegmentDialog",emits:["create"],setup(t,{expose:n,emit:a}){const e=a,{t:s}=Q(),r=le("customViews/getUIFlags"),o=S(()=>r.value.isCreating),i=P(null),l=Lt({name:""}),c={name:{required:Ge}},d=rt(c,l),u=async()=>{await d.value.$validate()&&(e("create",{name:l.name,filter_type:LN}),l.name="",d.value.$reset())};n({dialogRef:i});const m={emit:e,FILTER_TYPE_CONTACT:LN,t:s,uiFlags:r,isCreating:o,dialogRef:i,state:l,validationRules:c,v$:d,handleDialogConfirm:u,ref:P,reactive:Lt,computed:S,get useI18n(){return Q},get useMapGetter(){return le},get useVuelidate(){return rt},get required(){return Ge},Dialog:la,Input:sn};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}};function nmt(t,n,a,e,s,r){return p(),L(e.Dialog,{ref:"dialogRef",title:e.t("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.TITLE"),"confirm-button-label":e.t("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.CONFIRM"),"is-loading":e.isCreating,"disable-confirm-button":e.isCreating,onConfirm:e.handleDialogConfirm},{default:z(()=>[v(e.Input,{modelValue:e.state.name,"onUpdate:modelValue":n[0]||(n[0]=o=>e.state.name=o),label:e.t("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.LABEL"),placeholder:e.t("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.PLACEHOLDER"),message:e.v$.name.$error?e.t("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.ERROR"):"","message-type":e.v$.name.$error?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"])]),_:1},8,["title","confirm-button-label","is-loading","disable-confirm-button"])}const amt=G(tmt,[["render",nmt],["__file","/app/app/javascript/dashboard/components-next/Contacts/ContactsForm/CreateSegmentDialog.vue"]]),DN="contact",smt={__name:"DeleteSegmentDialog",emits:["delete"],setup(t,{expose:n,emit:a}){const e=a,{t:s}=Q(),r=le("customViews/getUIFlags"),o=S(()=>r.value.isDeleting),i=P(null),l=async()=>{e("delete",{filterType:DN})};n({dialogRef:i});const c={emit:e,FILTER_TYPE_CONTACT:DN,t:s,uiFlags:r,isDeleting:o,dialogRef:i,handleDialogConfirm:l,ref:P,computed:S,get useI18n(){return Q},get useMapGetter(){return le},Dialog:la};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}};function omt(t,n,a,e,s,r){return p(),L(e.Dialog,{ref:"dialogRef",type:"alert",title:e.t("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.DELETE_SEGMENT.TITLE"),description:e.t("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.DELETE_SEGMENT.DESCRIPTION"),"confirm-button-label":e.t("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.DELETE_SEGMENT.CONFIRM"),"is-loading":e.isDeleting,"disable-confirm-button":e.isDeleting,onConfirm:e.handleDialogConfirm},null,8,["title","description","confirm-button-label","is-loading","disable-confirm-button"])}const rmt=G(smt,[["render",omt],["__file","/app/app/javascript/dashboard/components-next/Contacts/ContactsForm/DeleteSegmentDialog.vue"]]);function PN(){const{t}=Q(),n=le("attributes/getContactAttributes"),a=le("labels/getLabels"),{equalityOperators:e,containmentOperators:s,dateOperators:r,getOperatorTypes:o}=ZL(),i=S(()=>QL(n.value,o,"contact"));return{filterTypes:S(()=>{var c;return[{attributeKey:ga.NAME,value:ga.NAME,attributeName:t("CONTACTS_LAYOUT.FILTER.NAME"),label:t("CONTACTS_LAYOUT.FILTER.NAME"),inputType:"plainText",dataType:"text",filterOperators:e.value,attributeModel:"standard"},{attributeKey:ga.EMAIL,value:ga.EMAIL,attributeName:t("CONTACTS_LAYOUT.FILTER.EMAIL"),label:t("CONTACTS_LAYOUT.FILTER.EMAIL"),inputType:"plainText",dataType:"text",filterOperators:s.value,attributeModel:"standard"},{attributeKey:ga.PHONE_NUMBER,value:ga.PHONE_NUMBER,attributeName:t("CONTACTS_LAYOUT.FILTER.PHONE_NUMBER"),label:t("CONTACTS_LAYOUT.FILTER.PHONE_NUMBER"),inputType:"plainText",dataType:"text",filterOperators:s.value,attributeModel:"standard"},{attributeKey:ga.IDENTIFIER,value:ga.IDENTIFIER,attributeName:t("CONTACTS_LAYOUT.FILTER.IDENTIFIER"),label:t("CONTACTS_LAYOUT.FILTER.IDENTIFIER"),inputType:"plainText",dataType:"number",filterOperators:e.value,attributeModel:"standard"},{attributeKey:ga.COUNTRY_CODE,value:ga.COUNTRY_CODE,attributeName:t("FILTER.ATTRIBUTES.COUNTRY_NAME"),label:t("FILTER.ATTRIBUTES.COUNTRY_NAME"),inputType:"searchSelect",options:rs,dataType:"number",filterOperators:e.value,attributeModel:"additional"},{attributeKey:ga.CITY,value:ga.CITY,attributeName:t("CONTACTS_LAYOUT.FILTER.CITY"),label:t("CONTACTS_LAYOUT.FILTER.CITY"),inputType:"plainText",dataType:"text",filterOperators:s.value,attributeModel:"standard"},{attributeKey:ga.CREATED_AT,value:ga.CREATED_AT,attributeName:t("CONTACTS_LAYOUT.FILTER.CREATED_AT"),label:t("CONTACTS_LAYOUT.FILTER.CREATED_AT"),inputType:"date",dataType:"text",filterOperators:r.value,attributeModel:"standard"},{attributeKey:ga.LAST_ACTIVITY_AT,value:ga.LAST_ACTIVITY_AT,attributeName:t("CONTACTS_LAYOUT.FILTER.LAST_ACTIVITY"),label:t("CONTACTS_LAYOUT.FILTER.LAST_ACTIVITY"),inputType:"date",dataType:"text",filterOperators:r.value,attributeModel:"standard"},{attributeKey:ga.REFERER,value:ga.REFERER,attributeName:t("CONTACTS_LAYOUT.FILTER.REFERER_LINK"),label:t("CONTACTS_LAYOUT.FILTER.REFERER_LINK"),inputType:"plainText",dataType:"text",filterOperators:s.value,attributeModel:"standard"},{attributeKey:ga.BLOCKED,value:ga.BLOCKED,attributeName:t("CONTACTS_LAYOUT.FILTER.BLOCKED"),label:t("CONTACTS_LAYOUT.FILTER.BLOCKED"),inputType:"searchSelect",options:[{id:"true",name:t("CONTACTS_LAYOUT.FILTER.BLOCKED_TRUE")},{id:"false",name:t("CONTACTS_LAYOUT.FILTER.BLOCKED_FALSE")}],dataType:"text",filterOperators:e.value,attributeModel:"standard"},{attributeKey:ga.LABELS,value:ga.LABELS,attributeName:t("CONTACTS_FILTER.ATTRIBUTES.LABELS"),label:t("CONTACTS_FILTER.ATTRIBUTES.LABELS"),inputType:"multiSelect",options:(c=a.value)==null?void 0:c.map(d=>({id:d.title,name:d.title})),dataType:"text",filterOperators:e.value,attributeModel:"standard"},...i.value]})}}const imt={__name:"ContactsFilter",props:an({isSegmentView:{type:Boolean,default:!1},segmentName:{type:String,default:""}},{modelValue:{type:Array,default:[]},modelModifiers:{}}),emits:an(["applyFilter","updateSegment","close","clearFilters"],["update:modelValue"]),setup(t,{expose:n,emit:a}){n();const e=t,s=a,{filterTypes:r}=PN(),o=dn(t,"modelValue"),i=P(e.segmentName),l={attributeKey:"name",filterOperator:"equal_to",values:"",queryOperator:"and",attributeModel:"standard"},{t:c}=Q(),d=Fe(),u=()=>{s("clearFilters"),o.value=[{...l}]},m=N=>{o.value.length===1?u():o.value.splice(N,1)},h=()=>{o.value.push({...l})},_=xn("conditionsRef"),E=()=>_.value.every(N=>N.validate()),y=()=>{E()&&s("updateSegment",o.value,i.value)};function b(){E()&&(d.dispatch("contacts/setContactFilters",ha(JSON.parse(JSON.stringify(o.value)))),s("applyFilter",o.value),Nt(hr.APPLY_FILTER,{appliedFilters:o.value.map(N=>({key:N.attributeKey,operator:N.filterOperator,queryOperator:N.queryOperator}))}))}const A=S(()=>e.isSegmentView?c("CONTACTS_LAYOUT.FILTER.EDIT_SEGMENT"):c("CONTACTS_LAYOUT.FILTER.TITLE"));gr(()=>s("close"));const I={props:e,emit:s,filterTypes:r,filters:o,segmentNameLocal:i,DEFAULT_FILTER:l,t:c,store:d,resetFilter:u,removeFilter:m,addFilter:h,conditionsRef:_,isConditionsValid:E,updateSavedSegment:y,validateAndSubmit:b,filterModalHeaderTitle:A,outsideClickHandler:[()=>s("close"),{ignore:["#toggleContactsFilterButton"]}],useTemplateRef:xn,onBeforeUnmount:gr,computed:S,ref:P,get useI18n(){return Q},get useTrack(){return Nt},get useStore(){return Fe},get vOnClickOutside(){return Ga},get CONTACTS_EVENTS(){return hr},get useContactFilterContext(){return PN},get useSnakeCase(){return ha},Button:Se,Input:sn,ConditionRow:JL};return Object.defineProperty(I,"__isScriptSetup",{enumerable:!1,value:!0}),I}},lmt={class:"z-40 max-w-3xl min-w-96 lg:w-[750px] overflow-visible w-full border border-n-weak bg-n-alpha-3 backdrop-blur-[100px] shadow-lg rounded-xl p-6 grid gap-6"},cmt={class:"text-base font-medium leading-6 text-n-slate-12"},dmt={key:0},umt={class:"pb-6 border-b border-n-weak"},pmt={class:"grid gap-4 list-none"},fmt={class:"flex justify-between gap-2"},mmt={class:"flex gap-2 flex-shrink-0"};function hmt(t,n,a,e,s,r){return ce((p(),g("div",lmt,[f("h3",cmt,C(e.filterModalHeaderTitle),1),e.props.isSegmentView?(p(),g("div",dmt,[f("div",umt,[v(e.Input,{modelValue:e.segmentNameLocal,"onUpdate:modelValue":n[0]||(n[0]=o=>e.segmentNameLocal=o),label:t.$t("CONTACTS_LAYOUT.FILTER.SEGMENT.LABEL"),placeholder:e.t("CONTACTS_LAYOUT.FILTER.SEGMENT.INPUT_PLACEHOLDER")},null,8,["modelValue","label","placeholder"])])])):O("v-if",!0),f("ul",pmt,[(p(!0),g(de,null,Ae(e.filters,(o,i)=>(p(),g(de,{key:o.id},[i===0?(p(),L(e.ConditionRow,{ref_for:!0,ref:"conditionsRef",key:`filter-${o.attributeKey}-0`,"attribute-key":o.attributeKey,"onUpdate:attributeKey":l=>o.attributeKey=l,"filter-operator":o.filterOperator,"onUpdate:filterOperator":l=>o.filterOperator=l,values:o.values,"onUpdate:values":l=>o.values=l,"filter-types":e.filterTypes,"show-query-operator":!1,onRemove:l=>e.removeFilter(i)},null,8,["attribute-key","onUpdate:attributeKey","filter-operator","onUpdate:filterOperator","values","onUpdate:values","filter-types","onRemove"])):(p(),L(e.ConditionRow,{key:`filter-${o.attributeKey}-${i}`,ref_for:!0,ref:"conditionsRef","attribute-key":o.attributeKey,"onUpdate:attributeKey":l=>o.attributeKey=l,"filter-operator":o.filterOperator,"onUpdate:filterOperator":l=>o.filterOperator=l,"query-operator":e.filters[i-1].queryOperator,"onUpdate:queryOperator":l=>e.filters[i-1].queryOperator=l,values:o.values,"onUpdate:values":l=>o.values=l,"show-query-operator":"","filter-types":e.filterTypes,onRemove:l=>e.removeFilter(i)},null,8,["attribute-key","onUpdate:attributeKey","filter-operator","onUpdate:filterOperator","query-operator","onUpdate:queryOperator","values","onUpdate:values","filter-types","onRemove"]))],64))),128))]),f("div",fmt,[v(e.Button,{sm:"",ghost:"",blue:"",class:"flex-shrink-0",onClick:e.addFilter},{default:z(()=>[Oe(C(t.$t("CONTACTS_LAYOUT.FILTER.BUTTONS.ADD_FILTER")),1)]),_:1}),f("div",mmt,[v(e.Button,{sm:"",faded:"",slate:"",onClick:e.resetFilter},{default:z(()=>[Oe(C(t.$t("CONTACTS_LAYOUT.FILTER.BUTTONS.CLEAR_FILTERS")),1)]),_:1}),a.isSegmentView?(p(),L(e.Button,{key:0,sm:"",solid:"",blue:"",disabled:!e.segmentNameLocal,onClick:e.updateSavedSegment},{default:z(()=>[Oe(C(t.$t("CONTACTS_LAYOUT.FILTER.BUTTONS.UPDATE_SEGMENT")),1)]),_:1},8,["disabled"])):(p(),L(e.Button,{key:1,sm:"",solid:"",blue:"",onClick:e.validateAndSubmit},{default:z(()=>[Oe(C(t.$t("CONTACTS_LAYOUT.FILTER.BUTTONS.APPLY_FILTERS")),1)]),_:1}))])])])),[[e.vOnClickOutside,e.outsideClickHandler]])}const _mt=G(imt,[["render",hmt],["__file","/app/app/javascript/dashboard/components-next/filter/ContactsFilter.vue"]]),gmt={__name:"ContactListHeaderWrapper",props:{showSearch:{type:Boolean,default:!0},searchValue:{type:String,default:""},activeSort:{type:String,default:"last_activity_at"},activeOrdering:{type:String,default:""},headerTitle:{type:String,default:""},segmentsId:{type:[String,Number],default:0},activeSegment:{type:Object,default:null},hasAppliedFilters:{type:Boolean,default:!1},isLabelView:{type:Boolean,default:!1},isActiveView:{type:Boolean,default:!1}},emits:["update:sort","search","applyFilter","clearFilters"],setup(t,{expose:n,emit:a}){const e=t,s=a,{t:r}=Q(),o=Fe(),i=ft(),l=P(null),c=P(null),d=P(null),u=P(null),m=P(null),h=P(!1),_=P([]),E=P({}),y=le("contacts/getAppliedContactFiltersV4"),b=le("attributes/getContactAttributes"),A=le("labels/getLabels"),T=S(()=>e.activeSegment&&e.segmentsId!==0),I=S(()=>{var W;return(W=e.activeSegment)==null?void 0:W.name}),N=async()=>{var W,ee;await((W=l.value)==null?void 0:W.contactsFormRef.resetValidation()),(ee=l.value)==null||ee.dialogRef.open()},x=()=>{var W;return(W=d.value)==null?void 0:W.dialogRef.open()},R=()=>{var W;return(W=c.value)==null?void 0:W.dialogRef.open()},M=()=>{var W;return(W=u.value)==null?void 0:W.dialogRef.open()},w=()=>{var W;return(W=m.value)==null?void 0:W.dialogRef.open()},D=async W=>{var ee;try{await o.dispatch("contacts/create",W),(ee=l.value)==null||ee.onSuccess(),Z(r("CONTACTS_LAYOUT.HEADER.ACTIONS.CONTACT_CREATION.SUCCESS_MESSAGE"))}catch(ae){const ve="CONTACTS_LAYOUT.HEADER.ACTIONS.CONTACT_CREATION";ae instanceof Bl?ae.data.includes("email")?Z(r(`${ve}.EMAIL_ADDRESS_DUPLICATE`)):ae.data.includes("phone_number")&&Z(r(`${ve}.PHONE_NUMBER_DUPLICATE`)):ae instanceof Xr?Z(ae.data):Z(r(`${ve}.ERROR_MESSAGE`))}},B=async W=>{var ee;try{await o.dispatch("contacts/import",W),(ee=d.value)==null||ee.dialogRef.close(),Z(r("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.SUCCESS_MESSAGE")),Nt(hr.IMPORT_SUCCESS)}catch(ae){Z(ae.message??r("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.ERROR_MESSAGE")),Nt(hr.IMPORT_FAILURE)}},k=async W=>{try{await o.dispatch("contacts/export",W),Z(r("CONTACTS_LAYOUT.HEADER.ACTIONS.EXPORT_CONTACT.SUCCESS_MESSAGE"))}catch(ee){Z(ee.message||r("CONTACTS_LAYOUT.HEADER.ACTIONS.EXPORT_CONTACT.ERROR_MESSAGE"))}},V=async W=>{var ee,ae;try{const ve={...W,query:E.value},Ce=await o.dispatch("customViews/create",ve);(ee=u.value)==null||ee.dialogRef.close(),Z(r("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.SUCCESS_MESSAGE"));const ue=(ae=Ce==null?void 0:Ce.data)==null?void 0:ae.id;if(!ue)return;i.push({name:"contacts_dashboard_segments_index",params:{segmentId:ue},query:{page:1}})}catch{Z(r("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.ERROR_MESSAGE"))}},F=async W=>{var ee;try{await o.dispatch("customViews/delete",{id:Number(e.segmentsId),...W}),i.push({name:"contacts_dashboard_index",query:{page:1}}),(ee=m.value)==null||ee.dialogRef.close(),Z(r("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.DELETE_SEGMENT.SUCCESS_MESSAGE"))}catch{Z(r("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.DELETE_SEGMENT.ERROR_MESSAGE"))}},$=()=>{h.value=!1,_.value=[]},Y=async()=>{s("clearFilters")},j=async W=>{W=ha(W),E.value=zs(W),s("applyFilter",zs(W)),h.value=!1},U=async(W,ee)=>{W=ha(W);const ae={...e.activeSegment,name:ee,query:zs(W)};await o.dispatch("customViews/update",ae),$()},J=()=>({countries:rs,filterTypes:pO,allCustomAttributes:ha(b.value),labels:A.value||[]}),te=W=>{var ve,Ce;const ee=(Ce=(ve=Sa(W))==null?void 0:ve.query)==null?void 0:Ce.payload;if(!Array.isArray(ee))return;const ae=ee.map(ue=>{const ge=Os(ue),Me=Array.isArray(ge.values)?Zm(ha(ue),J()):[];return{attributeKey:ge.attributeKey,attributeModel:ge.attributeModel,customAttributeType:ge.customAttributeType,filterOperator:ge.filterOperator,queryOperator:ge.queryOperator??"and",values:Me}});_.value=[..._.value,...ae]},q=()=>{_.value=[],T.value?te(e.activeSegment):_.value=e.hasAppliedFilters?[...y.value]:[{attributeKey:"name",filterOperator:"equal_to",values:"",queryOperator:"and",attributeModel:"standard"}],h.value=!0};n({onToggleFilters:q});const K={props:e,emit:s,t:r,store:o,router:i,createNewContactDialogRef:l,contactExportDialogRef:c,contactImportDialogRef:d,createSegmentDialogRef:u,deleteSegmentDialogRef:m,showFiltersModal:h,appliedFilter:_,segmentsQuery:E,appliedFilters:y,contactAttributes:b,labels:A,hasActiveSegments:T,activeSegmentName:I,openCreateNewContactDialog:N,openContactImportDialog:x,openContactExportDialog:R,openCreateSegmentDialog:M,openDeleteSegmentDialog:w,onCreate:D,onImport:B,onExport:k,onCreateSegment:V,onDeleteSegment:F,closeAdvanceFiltersModal:$,clearFilters:Y,onApplyFilter:j,onUpdateSegment:U,setParamsForEditSegmentModal:J,initializeSegmentToFilterModal:te,onToggleFilters:q,ref:P,computed:S,unref:Sa,get useI18n(){return Q},get useStore(){return Fe},get useMapGetter(){return le},get useRouter(){return ft},get useAlert(){return Z},get useTrack(){return Nt},get CONTACTS_EVENTS(){return hr},get filterQueryGenerator(){return zs},get contactFilterItems(){return pO},get DuplicateContactException(){return Bl},get ExceptionWithMessage(){return Xr},get generateValuesForEditCustomViews(){return Zm},get countries(){return rs},get useCamelCase(){return Os},get useSnakeCase(){return ha},ContactsHeader:cft,CreateNewContactDialog:lP,ContactExportDialog:Hft,ContactImportDialog:emt,CreateSegmentDialog:amt,DeleteSegmentDialog:rmt,ContactsFilter:_mt};return Object.defineProperty(K,"__isScriptSetup",{enumerable:!1,value:!0}),K}},bmt={class:"absolute mt-1 ltr:-right-52 rtl:-left-52 sm:ltr:right-0 sm:rtl:left-0 top-full"};function vmt(t,n,a,e,s,r){return p(),g(de,null,[v(e.ContactsHeader,{"show-search":a.showSearch,"search-value":a.searchValue,"active-sort":a.activeSort,"active-ordering":a.activeOrdering,"header-title":a.headerTitle,"is-segments-view":e.hasActiveSegments,"is-label-view":a.isLabelView,"is-active-view":a.isActiveView,"has-active-filters":a.hasAppliedFilters,"button-label":e.t("CONTACTS_LAYOUT.HEADER.MESSAGE_BUTTON"),onSearch:n[1]||(n[1]=o=>e.emit("search",o)),"onUpdate:sort":n[2]||(n[2]=o=>e.emit("update:sort",o)),onAdd:e.openCreateNewContactDialog,onImport:e.openContactImportDialog,onExport:e.openContactExportDialog,onFilter:e.onToggleFilters,onCreateSegment:e.openCreateSegmentDialog,onDeleteSegment:e.openDeleteSegmentDialog},{filter:z(()=>[f("div",bmt,[e.showFiltersModal?(p(),L(e.ContactsFilter,{key:0,modelValue:e.appliedFilter,"onUpdate:modelValue":n[0]||(n[0]=o=>e.appliedFilter=o),"segment-name":e.activeSegmentName,"is-segment-view":e.hasActiveSegments,onApplyFilter:e.onApplyFilter,onUpdateSegment:e.onUpdateSegment,onClose:e.closeAdvanceFiltersModal,onClearFilters:e.clearFilters},null,8,["modelValue","segment-name","is-segment-view"])):O("v-if",!0)])]),_:1},8,["show-search","search-value","active-sort","active-ordering","header-title","is-segments-view","is-label-view","is-active-view","has-active-filters","button-label"]),v(e.CreateNewContactDialog,{ref:"createNewContactDialogRef",onCreate:e.onCreate},null,512),v(e.ContactExportDialog,{ref:"contactExportDialogRef",onExport:e.onExport},null,512),v(e.ContactImportDialog,{ref:"contactImportDialogRef",onImport:e.onImport},null,512),v(e.CreateSegmentDialog,{ref:"createSegmentDialogRef",onCreate:e.onCreateSegment},null,512),v(e.DeleteSegmentDialog,{ref:"deleteSegmentDialogRef",onDelete:e.onDeleteSegment},null,512)],64)}const Emt=G(gmt,[["render",vmt],["__file","/app/app/javascript/dashboard/components-next/Contacts/ContactsHeader/ContactListHeaderWrapper.vue"]]),Smt={__name:"ActiveFilterPreview",props:{appliedFilters:{type:Array,default:()=>[]},maxVisibleFilters:{type:Number,default:2},clearButtonLabel:{type:String,default:""},moreFiltersLabel:{type:String,default:""},showClearButton:{type:Boolean,default:!0}},emits:["clearFilters","openFilter"],setup(t,{expose:n,emit:a}){n();const i={emit:a,shouldCapitalizeFirstLetter:l=>!["email"].includes(l),formatOperatorLabel:l=>({equal_to:"is",not_equal_to:"is not",contains:"contains",does_not_contain:"does not contain",is_present:"is present",is_not_present:"is not present",is_greater_than:"is greater than",is_less_than:"is less than",days_before:"days before"})[l]||XC(l),formatFilterValue:l=>l?Array.isArray(l)?l.map(c=>(c==null?void 0:c.name)??c).join(", "):(l==null?void 0:l.name)??l:"",get replaceUnderscoreWithSpace(){return XC},Button:Se};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}},Tmt={class:"flex flex-wrap items-center w-full gap-2 mx-auto"},Amt={key:0,class:"inline-flex items-center gap-2 h-7"},ymt={class:"lowercase whitespace-nowrap first-letter:capitalize text-n-slate-12"},Imt={class:"px-1 text-xs text-n-slate-10 whitespace-nowrap"},Cmt=["title"],Omt={key:0,class:"content-center h-full px-1 text-xs font-medium uppercase rounded-lg text-n-slate-10"},Nmt={key:1,class:"w-px h-3 rounded-lg bg-n-strong"};function xmt(t,n,a,e,s,r){return p(),g("div",Tmt,[(p(!0),g(de,null,Ae(a.appliedFilters,(o,i)=>(p(),g(de,{key:i},[i<a.maxVisibleFilters?(p(),g("div",Amt,[f("div",{class:"flex items-center h-full min-w-0 gap-1 px-2 py-1 text-xs border rounded-lg hover:bg-n-solid-2 max-w-72 border-n-weak hover:cursor-pointer",onClick:n[0]||(n[0]=l=>e.emit("openFilter"))},[f("span",ymt,C(e.replaceUnderscoreWithSpace(o.attributeKey)),1),f("span",Imt,C(e.formatOperatorLabel(o.filterOperator)),1),o.values?(p(),g("span",{key:0,title:e.formatFilterValue(o.values),class:oe(["lowercase truncate text-n-slate-12",{"first-letter:capitalize":e.shouldCapitalizeFirstLetter(o.attributeKey)}])},C(e.formatFilterValue(o.values)),11,Cmt)):O("v-if",!0)]),i<a.maxVisibleFilters-1&&i<a.appliedFilters.length-1?(p(),g("span",Omt,C(o.queryOperator),1)):O("v-if",!0)])):O("v-if",!0)],64))),128)),a.appliedFilters.length>a.maxVisibleFilters?(p(),g("div",{key:0,class:"inline-flex items-center content-center px-1 text-xs rounded-lg text-n-slate-10 hover:text-n-slate-11 h-7 hover:cursor-pointer",onClick:n[1]||(n[1]=o=>e.emit("openFilter"))},C(a.moreFiltersLabel),1)):O("v-if",!0),a.showClearButton?(p(),g("div",Nmt)):O("v-if",!0),a.showClearButton?(p(),L(e.Button,{key:2,label:a.clearButtonLabel,size:"xs",class:"!px-1",variant:"ghost",onClick:n[2]||(n[2]=o=>e.emit("clearFilters"))},null,8,["label"])):O("v-if",!0)])}const Rmt=G(Smt,[["render",xmt],["__file","/app/app/javascript/dashboard/components-next/filter/ActiveFilterPreview.vue"]]),wmt={__name:"ContactsActiveFiltersPreview",props:{activeSegment:{type:Object,default:null}},emits:["clearFilters","openFilter"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=lt(),i=le("contacts/getAppliedContactFiltersV4"),l=S(()=>o.params.segmentId),c=S(()=>{var E,y;const h=(y=(E=e.activeSegment)==null?void 0:E.query)==null?void 0:y.payload;return Array.isArray(h)?h.map(b=>{const A=Os(b);return{attributeKey:A.attributeKey,attributeModel:A.attributeModel,customAttributeType:A.customAttributeType,filterOperator:A.filterOperator,queryOperator:A.queryOperator??"and",values:A.values}}):[]}),d=S(()=>e.activeSegment&&l.value!==0),u=S(()=>d.value?c.value:i.value),m={props:e,emit:s,t:r,route:o,appliedFilters:i,activeSegmentId:l,activeSegmentQuery:c,hasActiveSegments:d,activeFilterQueryData:u,computed:S,get useI18n(){return Q},get useRoute(){return lt},get useMapGetter(){return le},get useCamelCase(){return Os},ActiveFilterPreview:Rmt};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}};function Mmt(t,n,a,e,s,r){return p(),L(e.ActiveFilterPreview,{"applied-filters":e.activeFilterQueryData,"max-visible-filters":2,"more-filters-label":e.t("CONTACTS_LAYOUT.FILTER.ACTIVE_FILTERS.MORE_FILTERS",{count:e.activeFilterQueryData.length-2}),"clear-button-label":e.t("CONTACTS_LAYOUT.FILTER.ACTIVE_FILTERS.CLEAR_FILTERS"),"show-clear-button":!e.hasActiveSegments,class:"max-w-[60rem] px-6",onOpenFilter:n[0]||(n[0]=o=>e.emit("openFilter")),onClearFilters:n[1]||(n[1]=o=>e.emit("clearFilters"))},null,8,["applied-filters","more-filters-label","clear-button-label","show-clear-button"])}const Lmt=G(wmt,[["render",Mmt],["__file","/app/app/javascript/dashboard/components-next/Contacts/ContactsHeader/components/ContactsActiveFiltersPreview.vue"]]),Dmt={__name:"PaginationFooter",props:{currentPage:{type:Number,required:!0},totalItems:{type:Number,required:!0},itemsPerPage:{type:Number,default:16},currentPageInfo:{type:String,default:""}},emits:["update:currentPage"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=S(()=>Math.ceil(e.totalItems/e.itemsPerPage)),i=S(()=>(e.currentPage-1)*e.itemsPerPage+1),l=S(()=>Math.min(i.value+e.itemsPerPage-1,e.totalItems)),c=S(()=>e.currentPage===1),d=S(()=>e.currentPage===o.value),u=E=>{E>=1&&E<=o.value&&s("update:currentPage",E)},m=S(()=>r(e.currentPageInfo?e.currentPageInfo:"PAGINATION_FOOTER.SHOWING",{startItem:i.value,endItem:l.value,totalItems:e.totalItems})),h=S(()=>r("PAGINATION_FOOTER.CURRENT_PAGE_INFO",{currentPage:"",totalPages:o.value})),_={props:e,emit:s,t:r,totalPages:o,startItem:i,endItem:l,isFirstPage:c,isLastPage:d,changePage:u,currentPageInformation:m,pageInfo:h,computed:S,get useI18n(){return Q},Button:Se};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}},Pmt={class:"flex justify-between h-12 w-full max-w-[calc(60rem-3px)] outline outline-n-container outline-1 -outline-offset-1 mx-auto bg-n-solid-2 rounded-xl py-2 ltr:pl-4 rtl:pr-4 ltr:pr-3 rtl:pl-3 items-center before:absolute before:inset-x-0 before:-top-4 before:bg-gradient-to-t before:from-n-background before:from-10% before:dark:from-0% before:to-transparent before:h-4 before:pointer-events-none"},kmt={class:"flex items-center gap-3"},Bmt={class:"min-w-0 text-sm font-normal line-clamp-1 text-n-slate-11"},Fmt={class:"flex items-center gap-2"},Umt={class:"inline-flex items-center gap-2 text-sm text-n-slate-11"},$mt={class:"px-3 tabular-nums py-0.5 bg-n-alpha-black2 rounded-md"},Gmt={class:"truncate"};function Vmt(t,n,a,e,s,r){return p(),g("div",Pmt,[f("div",kmt,[f("span",Bmt,C(e.currentPageInformation),1)]),f("div",Fmt,[v(e.Button,{icon:"i-lucide-chevrons-left",variant:"ghost",size:"sm",color:"slate",class:"!w-8 !h-6",disabled:e.isFirstPage,onClick:n[0]||(n[0]=o=>e.changePage(1))},null,8,["disabled"]),v(e.Button,{icon:"i-lucide-chevron-left",variant:"ghost",color:"slate",size:"sm",class:"!w-8 !h-6",disabled:e.isFirstPage,onClick:n[1]||(n[1]=o=>e.changePage(a.currentPage-1))},null,8,["disabled"]),f("div",Umt,[f("span",$mt,C(a.currentPage),1),f("span",Gmt,C(e.pageInfo),1)]),v(e.Button,{icon:"i-lucide-chevron-right",variant:"ghost",color:"slate",size:"sm",class:"!w-8 !h-6",disabled:e.isLastPage,onClick:n[2]||(n[2]=o=>e.changePage(a.currentPage+1))},null,8,["disabled"]),v(e.Button,{icon:"i-lucide-chevrons-right",variant:"ghost",color:"slate",size:"sm",class:"!w-8 !h-6",disabled:e.isLastPage,onClick:n[3]||(n[3]=o=>e.changePage(e.totalPages))},null,8,["disabled"])])])}const N1=G(Dmt,[["render",Vmt],["__file","/app/app/javascript/dashboard/components-next/pagination/PaginationFooter.vue"]]),Hmt={__name:"ContactsListLayout",props:{searchValue:{type:String,default:""},headerTitle:{type:String,default:""},showPaginationFooter:{type:Boolean,default:!0},currentPage:{type:Number,default:1},totalItems:{type:Number,default:100},itemsPerPage:{type:Number,default:15},activeSort:{type:String,default:""},activeOrdering:{type:String,default:""},activeSegment:{type:Object,default:null},segmentsId:{type:[String,Number],default:0},hasAppliedFilters:{type:Boolean,default:!1},isFetchingList:{type:Boolean,default:!1}},emits:["update:currentPage","update:sort","search","applyFilter","clearFilters"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=lt(),o=P(null),i=S(()=>r.name!=="contacts_dashboard_segments_index"),l=S(()=>r.name==="contacts_dashboard_active"),c=S(()=>r.name==="contacts_dashboard_labels_index"),d=S(()=>(e.hasAppliedFilters||!i.value)&&!e.isFetchingList&&!c.value&&!l.value),h={props:e,emit:s,route:r,contactListHeaderWrapper:o,isNotSegmentView:i,isActiveView:l,isLabelView:c,showActiveFiltersPreview:d,updateCurrentPage:_=>{s("update:currentPage",_)},openFilter:()=>{var _;(_=o.value)==null||_.onToggleFilters()},computed:S,ref:P,get useRoute(){return lt},ContactListHeaderWrapper:Emt,ContactsActiveFiltersPreview:Lmt,PaginationFooter:N1};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}},jmt={class:"flex w-full h-full gap-4 overflow-hidden justify-evenly bg-n-background"},Wmt={class:"flex flex-col w-full h-full transition-all duration-300"},zmt={class:"flex-1 overflow-y-auto"},Ymt={class:"w-full mx-auto max-w-[60rem]"},Kmt={key:0,class:"sticky bottom-0 z-0 px-4 pb-4"};function Xmt(t,n,a,e,s,r){return p(),g("section",jmt,[f("div",Wmt,[v(e.ContactListHeaderWrapper,{ref:"contactListHeaderWrapper","show-search":e.isNotSegmentView&&!e.isActiveView,"search-value":a.searchValue,"active-sort":a.activeSort,"active-ordering":a.activeOrdering,"header-title":a.headerTitle,"active-segment":a.activeSegment,"segments-id":a.segmentsId,"has-applied-filters":a.hasAppliedFilters,"is-label-view":e.isLabelView,"is-active-view":e.isActiveView,"onUpdate:sort":n[0]||(n[0]=o=>e.emit("update:sort",o)),onSearch:n[1]||(n[1]=o=>e.emit("search",o)),onApplyFilter:n[2]||(n[2]=o=>e.emit("applyFilter",o)),onClearFilters:n[3]||(n[3]=o=>e.emit("clearFilters"))},null,8,["show-search","search-value","active-sort","active-ordering","header-title","active-segment","segments-id","has-applied-filters","is-label-view","is-active-view"]),f("main",zmt,[f("div",Ymt,[e.showActiveFiltersPreview?(p(),L(e.ContactsActiveFiltersPreview,{key:0,"active-segment":a.activeSegment,onClearFilters:n[4]||(n[4]=o=>e.emit("clearFilters")),onOpenFilter:e.openFilter},null,8,["active-segment"])):O("v-if",!0),qe(t.$slots,"default")])]),a.showPaginationFooter?(p(),g("footer",Kmt,[v(e.PaginationFooter,{"current-page-info":"CONTACTS_LAYOUT.PAGINATION_FOOTER.SHOWING","current-page":a.currentPage,"total-items":a.totalItems,"items-per-page":a.itemsPerPage,"onUpdate:currentPage":e.updateCurrentPage},null,8,["current-page","total-items","items-per-page"])])):O("v-if",!0)])])}const qmt=G(Hmt,[["render",Xmt],["__file","/app/app/javascript/dashboard/components-next/Contacts/ContactsListLayout.vue"]]),Zmt={__name:"EmptyStateLayout",props:{title:{type:String,required:!0},subtitle:{type:String,required:!0},actionPerms:{type:Array,default:()=>[]},showBackdrop:{type:Boolean,default:!0}},setup(t,{expose:n}){n();const a={Policy:ii};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},Qmt={class:"relative flex flex-col items-center justify-center w-full h-full overflow-hidden"},Jmt={class:"relative w-full max-w-[60rem] mx-auto overflow-hidden h-full max-h-[28rem]"},eht={key:0,class:"w-full h-full space-y-4 overflow-y-hidden opacity-50 pointer-events-none"},tht={class:"flex flex-col items-center justify-center gap-3"},nht={class:"text-3xl font-medium text-center text-n-slate-12 font-interDisplay"},aht={key:0,class:"max-w-xl text-base text-center text-n-slate-11 font-interDisplay tracking-[0.3px]"};function sht(t,n,a,e,s,r){return p(),g("section",Qmt,[f("div",Jmt,[a.showBackdrop?(p(),g("div",eht,[qe(t.$slots,"empty-state-item")])):O("v-if",!0),f("div",{class:oe(["flex flex-col items-center justify-end w-full h-full pb-20",{"absolute inset-x-0 bottom-0 bg-gradient-to-t from-n-background from-25% dark:from-n-background to-transparent":a.showBackdrop}])},[f("div",{class:oe(["flex flex-col items-center justify-center gap-6",{"mt-48":!a.showBackdrop}])},[f("div",tht,[f("h2",nht,C(a.title),1),a.subtitle?(p(),g("p",aht,C(a.subtitle),1)):O("v-if",!0)]),v(e.Policy,{permissions:a.actionPerms},{default:z(()=>[qe(t.$slots,"actions")]),_:3},8,["permissions"])],2)],2)])])}const Or=G(Zmt,[["render",sht],["__file","/app/app/javascript/dashboard/components-next/EmptyStateLayout.vue"]]),oht={__name:"Flag",props:{country:{type:String,required:!0},squared:{type:Boolean,default:!1}},setup(t,{expose:n}){n();const a=t,s={props:a,renderFlag:()=>{const r=["fi",`fi-${a.country.toLowerCase()}`,"flex-shrink-0"];return a.squared&&r.push("fis"),pn("span",{class:r})},h:pn};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}};function rht(t,n,a,e,s,r){return p(),L(Da(e.renderFlag))}const iht=G(oht,[["render",rht],["__file","/app/app/javascript/dashboard/components-next/flag/Flag.vue"]]),lht={__name:"ConfirmContactDeleteDialog",props:{selectedContact:{type:Object,default:null}},emits:["goToContactsList"],setup(t,{expose:n,emit:a}){const e=t,s=a,{t:r}=Q(),o=Fe(),i=lt(),l=P(null),c=async m=>{if(m)try{await o.dispatch("contacts/delete",m),Z(r("CONTACTS_LAYOUT.DETAILS.DELETE_DIALOG.API.SUCCESS_MESSAGE"))}catch{Z(r("CONTACTS_LAYOUT.DETAILS.DELETE_DIALOG.API.ERROR_MESSAGE"))}},d=async()=>{var m;s("goToContactsList"),await c(i.params.contactId||e.selectedContact.id),(m=l.value)==null||m.close()};n({dialogRef:l});const u={props:e,emit:s,t:r,store:o,route:i,dialogRef:l,deleteContact:c,handleDialogConfirm:d,ref:P,get useStore(){return Fe},get useRoute(){return lt},get useI18n(){return Q},get useAlert(){return Z},Dialog:la};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}};function cht(t,n,a,e,s,r){return p(),L(e.Dialog,{ref:"dialogRef",type:"alert",title:e.t("CONTACTS_LAYOUT.DETAILS.DELETE_DIALOG.TITLE"),description:e.t("CONTACTS_LAYOUT.DETAILS.DELETE_DIALOG.DESCRIPTION"),"confirm-button-label":e.t("CONTACTS_LAYOUT.DETAILS.DELETE_DIALOG.CONFIRM"),onConfirm:e.handleDialogConfirm},null,8,["title","description","confirm-button-label"])}const cP=G(lht,[["render",cht],["__file","/app/app/javascript/dashboard/components-next/Contacts/ContactsForm/ConfirmContactDeleteDialog.vue"]]),dht={__name:"ContactDeleteSection",props:{selectedContact:{type:Object,required:!0}},setup(t,{expose:n}){n();const{t:a}=Q(),[e,s]=$t(),r=P(null),i={t:a,showDeleteSection:e,toggleDeleteSection:s,confirmDeleteContactDialogRef:r,openConfirmDeleteContactDialog:()=>{var l;(l=r.value)==null||l.dialogRef.open()},ref:P,get useI18n(){return Q},get useToggle(){return $t},Button:Se,ConfirmContactDeleteDialog:cP};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}},uht={class:"flex flex-col items-start border-t border-n-strong px-6 py-5"},pht={class:"overflow-hidden min-h-0"},fht={class:"inline-flex text-n-slate-11 text-sm items-center gap-1"};function mht(t,n,a,e,s,r){return p(),g(de,null,[f("div",uht,[v(e.Button,{label:e.t("CONTACTS_LAYOUT.DETAILS.DELETE_CONTACT"),sm:"",link:"",slate:"",class:"hover:!no-underline text-n-slate-12",icon:"i-lucide-chevron-down","trailing-icon":"",onClick:n[0]||(n[0]=o=>e.toggleDeleteSection())},null,8,["label"]),f("div",{class:oe(["transition-all duration-300 ease-in-out grid w-full overflow-hidden",e.showDeleteSection?"grid-rows-[1fr] opacity-100 mt-2":"grid-rows-[0fr] opacity-0 mt-0"])},[f("div",pht,[f("span",fht,[Oe(C(e.t("CONTACTS_LAYOUT.CARD.DELETE_CONTACT.MESSAGE"))+" ",1),v(e.Button,{label:e.t("CONTACTS_LAYOUT.CARD.DELETE_CONTACT.BUTTON"),sm:"",ruby:"",link:"",onClick:n[1]||(n[1]=o=>e.openConfirmDeleteContactDialog())},null,8,["label"])])])],2)]),v(e.ConfirmContactDeleteDialog,{ref:"confirmDeleteContactDialogRef","selected-contact":a.selectedContact},null,8,["selected-contact"])],64)}const hht=G(dht,[["render",mht],["__file","/app/app/javascript/dashboard/components-next/Contacts/ContactsCard/ContactDeleteSection.vue"]]),_ht={__name:"Checkbox",props:an({indeterminate:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:an(["change"],["update:modelValue"]),setup(t,{expose:n,emit:a}){n();const e=a,s=dn(t,"modelValue"),o={emit:e,modelValue:s,handleChange:i=>{s.value=i.target.checked,e("change",i)}};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},ght={class:"relative w-4 h-4"},bht=["checked","indeterminate","disabled"];function vht(t,n,a,e,s,r){return p(),g("div",ght,[f("input",{checked:e.modelValue,indeterminate:a.indeterminate,type:"checkbox",disabled:a.disabled,class:"peer absolute inset-0 z-10 h-4 w-4 disabled:opacity-50 appearance-none rounded border border-n-slate-6 ring-transparent transition-all duration-200 checked:border-n-brand checked:bg-n-brand dark:border-gray-600 dark:checked:border-n-brand indeterminate:border-n-brand indeterminate:bg-n-brand hover:enabled:bg-n-blue-border cursor-pointer",onChange:e.handleChange},null,40,bht),O(" Checkmark SVG "),n[0]||(n[0]=f("svg",{viewBox:"0 0 14 14",fill:"none",class:"pointer-events-none absolute w-3.5 h-3.5 z-20 stroke-white opacity-0 peer-checked:opacity-100 transition-opacity duration-200 left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"},[f("path",{d:"M3 8L6 11L11 3.5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),O(" Minus/Indeterminate SVG "),n[1]||(n[1]=f("svg",{viewBox:"0 0 14 14",fill:"none",class:"pointer-events-none absolute w-3.5 h-3.5 z-20 stroke-white opacity-0 peer-indeterminate:opacity-100 transition-opacity duration-200 left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"},[f("path",{d:"M3 7L11 7","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1))])}const nl=G(_ht,[["render",vht],["__file","/app/app/javascript/dashboard/components-next/checkbox/Checkbox.vue"]]),Eht={__name:"ContactsCard",props:{id:{type:Number,required:!0},name:{type:String,default:""},email:{type:String,default:""},additionalAttributes:{type:Object,default:()=>({})},phoneNumber:{type:String,default:""},thumbnail:{type:String,default:""},availabilityStatus:{type:String,default:null},isExpanded:{type:Boolean,default:!1},isUpdating:{type:Boolean,default:!1},selectable:{type:Boolean,default:!1},isSelected:{type:Boolean,default:!1}},emits:["toggle","updateContact","showContact","select","avatarHover"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=P(null),i=()=>({id:e.id,name:e.name,email:e.email,phoneNumber:e.phoneNumber,additionalAttributes:e.additionalAttributes}),l=P(i()),c=S(()=>{var I;return(I=o.value)==null?void 0:I.isFormInvalid}),d=S(()=>rs.reduce((I,N)=>(I[N.code]=N,I[N.id]=N,I),{})),u=S(()=>{const I=e.additionalAttributes||{},{country:N,countryCode:x,city:R}=I;if(!N&&!x)return null;const M=d.value[N]||d.value[x];return M?{countryCode:M.id,city:R?`${R},`:null,name:M.name}:null}),m=S(()=>u.value?[u.value.city,u.value.name].filter(Boolean).join(" "):""),T={props:e,emit:s,t:r,contactsFormRef:o,getInitialContactData:i,contactData:l,isFormInvalid:c,countriesMap:d,countryDetails:u,formattedLocation:m,handleFormUpdate:I=>{Object.assign(l.value,I)},handleUpdateContact:()=>{s("updateContact",l.value)},onClickExpand:()=>{s("toggle"),l.value=i()},onClickViewDetails:()=>s("showContact",e.id),toggleSelect:I=>{s("select",I)},handleAvatarHover:I=>{s("avatarHover",I)},ref:P,computed:S,get useI18n(){return Q},CardLayout:ho,ContactsForm:O1,Button:Se,Avatar:qt,Flag:iht,ContactDeleteSection:hht,Checkbox:nl,get countries(){return rs}};return Object.defineProperty(T,"__isScriptSetup",{enumerable:!1,value:!0}),T}},Sht={class:"relative"},Tht={class:"flex items-center justify-start flex-1 gap-4"},Aht={class:"flex flex-col gap-0.5 flex-1"},yht={class:"flex flex-wrap items-center gap-x-4 gap-y-1"},Iht={class:"text-base font-medium truncate text-n-slate-12"},Cht={class:"inline-flex items-center gap-1"},Oht={key:0,class:"i-ph-building-light size-4 text-n-slate-10 mb-0.5"},Nht={key:1,class:"text-sm truncate text-n-slate-11"},xht={class:"flex flex-wrap items-center justify-start gap-x-3 gap-y-1"},Rht=["title"],wht={class:"text-sm text-n-slate-11"},Mht={key:1,class:"w-px h-3 truncate bg-n-slate-6"},Lht={key:2,class:"text-sm truncate text-n-slate-11"},Dht={key:3,class:"w-px h-3 truncate bg-n-slate-6"},Pht={key:4,class:"inline-flex items-center gap-2 text-sm truncate text-n-slate-11"},kht={key:5,class:"w-px h-3 truncate bg-n-slate-6"},Bht={class:"overflow-hidden"},Fht={class:"flex flex-col gap-6 p-6 border-t border-n-strong"};function Uht(t,n,a,e,s,r){return p(),g("div",Sht,[(p(),L(e.CardLayout,{key:a.id,layout:"row",class:oe({"outline-n-weak !bg-n-slate-3 dark:!bg-n-solid-3":a.isSelected})},{after:z(()=>[f("div",{class:oe(["transition-all duration-500 ease-in-out grid overflow-hidden",a.isExpanded?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"])},[f("div",Bht,[f("div",Fht,[v(e.ContactsForm,{ref:"contactsFormRef","contact-data":e.contactData,onUpdate:e.handleFormUpdate},null,8,["contact-data"]),f("div",null,[v(e.Button,{label:e.t("CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.UPDATE_BUTTON"),size:"sm","is-loading":a.isUpdating,disabled:a.isUpdating||e.isFormInvalid,onClick:e.handleUpdateContact},null,8,["label","is-loading","disabled"])])]),v(e.ContactDeleteSection,{"selected-contact":{id:e.props.id,name:e.props.name}},null,8,["selected-contact"])])],2)]),default:z(()=>{var o,i;return[f("div",Tht,[f("div",{class:"relative",onMouseenter:n[2]||(n[2]=l=>e.handleAvatarHover(!0)),onMouseleave:n[3]||(n[3]=l=>e.handleAvatarHover(!1))},[v(e.Avatar,{name:a.name,src:a.thumbnail,size:48,status:a.availabilityStatus,"hide-offline-status":"","rounded-full":""},Ro({_:2},[a.selectable?{name:"overlay",fn:z(({size:l})=>[f("label",{class:"flex items-center justify-center rounded-full cursor-pointer absolute inset-0 z-10 backdrop-blur-[2px] border border-n-weak",style:nn({width:`${l}px`,height:`${l}px`}),onClick:n[1]||(n[1]=Ve(()=>{},["stop"]))},[v(e.Checkbox,{"model-value":a.isSelected,onChange:n[0]||(n[0]=c=>e.toggleSelect(c.target.checked))},null,8,["model-value"])],4)]),key:"0"}:void 0]),1032,["name","src","status"])],32),f("div",Aht,[f("div",yht,[f("span",Iht,C(a.name),1),f("span",Cht,[(o=a.additionalAttributes)!=null&&o.companyName?(p(),g("span",Oht)):O("v-if",!0),(i=a.additionalAttributes)!=null&&i.companyName?(p(),g("span",Nht,C(a.additionalAttributes.companyName),1)):O("v-if",!0)])]),f("div",xht,[a.email?(p(),g("div",{key:0,class:"truncate max-w-72",title:a.email},[f("span",wht,C(a.email),1)],8,Rht)):O("v-if",!0),a.email?(p(),g("div",Mht)):O("v-if",!0),a.phoneNumber?(p(),g("span",Lht,C(a.phoneNumber),1)):O("v-if",!0),a.phoneNumber?(p(),g("div",Dht)):O("v-if",!0),e.countryDetails?(p(),g("span",Pht,[v(e.Flag,{country:e.countryDetails.countryCode,class:"size-3.5"},null,8,["country"]),Oe(" "+C(e.formattedLocation),1)])):O("v-if",!0),e.countryDetails?(p(),g("div",kht)):O("v-if",!0),v(e.Button,{label:e.t("CONTACTS_LAYOUT.CARD.VIEW_DETAILS"),variant:"link",size:"xs",onClick:e.onClickViewDetails},null,8,["label"])])])]),v(e.Button,{icon:"i-lucide-chevron-down",variant:"ghost",color:"slate",size:"xs",class:oe({"rotate-180":a.isExpanded}),onClick:e.onClickExpand},null,8,["class"])]}),_:1},8,["class"]))])}const dP=G(Eht,[["render",Uht],["__file","/app/app/javascript/dashboard/components-next/Contacts/ContactsCard/ContactsCard.vue"]]),$ht=[{additionalAttributes:{city:"Los Angeles",country:"United States",description:"I'm Candice, a developer focusing on building web solutions. Currently, Im working as a Product Developer at Lumora.",companyName:"Lumora",countryCode:"US",socialProfiles:{github:"candice-dev",twitter:"candice_w_dev",facebook:"candice.dev",linkedin:"candice-matherson",instagram:"candice.codes"}},availabilityStatus:"offline",email:"candice.matherson@lumora.com",id:22,name:"Candice Matherson",phoneNumber:"+14155552671",identifier:null,thumbnail:"",customAttributes:{dateContact:"2024-11-11T11:53:09.299Z",linkContact:"https://example.com",listContact:"Follow-Up",textContact:"Hi there!",numberContact:"42",checkboxContact:!1},lastActivityAt:1712123233,createdAt:1712123233},{additionalAttributes:{city:"San Francisco",country:"United States",description:"Passionate about design and user experience.",companyName:"Designify",countryCode:"US",socialProfiles:{github:"ophelia-folkard",twitter:"oph_designs",facebook:"ophelia.folkard",linkedin:"ophelia-folkard",instagram:"ophelia.design"}},availabilityStatus:"offline",email:"ophelia.folkard@designify.com",id:21,name:"Ophelia Folkard",phoneNumber:"+14155552672",identifier:null,thumbnail:"",customAttributes:{dateContact:"2024-10-05T10:12:34.567Z",linkContact:"https://designify.com",listContact:"Prospects",textContact:"Looking forward to connecting!"},lastActivityAt:1712123233,createdAt:1712123233},{additionalAttributes:{city:"Austin",country:"United States",description:"Avid coder and tech enthusiast.",companyName:"CodeHub",countryCode:"US",socialProfiles:{github:"willy_castelot",twitter:"willy_code",facebook:"willy.castelot",linkedin:"willy-castelot",instagram:"willy.coder"}},availabilityStatus:"offline",email:"willy.castelot@codehub.io",id:20,name:"Willy Castelot",phoneNumber:"+14155552673",identifier:null,thumbnail:"",customAttributes:{textContact:"Lets collaborate!",checkboxContact:!0},lastActivityAt:1712123233,createdAt:1712123233},{additionalAttributes:{city:"Seattle",country:"United States",description:"Product manager with a love for innovation.",companyName:"InnovaTech",countryCode:"US",socialProfiles:{github:"elisabeth-d",twitter:"elisabeth_innova",facebook:"elisabeth.derington",linkedin:"elisabeth-derington",instagram:"elisabeth.innovates"}},availabilityStatus:"offline",email:"elisabeth.derington@innova.com",id:19,name:"Elisabeth Derington",phoneNumber:"+14155552674",identifier:null,thumbnail:"",customAttributes:{textContact:"Lets schedule a call."},lastActivityAt:1712123232,createdAt:1712123232},{additionalAttributes:{city:"Chicago",country:"United States",description:"Marketing specialist and content creator.",companyName:"Contently",countryCode:"US",socialProfiles:{github:"olia-olenchenko",twitter:"olia_content",facebook:"olia.olenchenko",linkedin:"olia-olenchenko",instagram:"olia.creates"}},availabilityStatus:"offline",email:"olia.olenchenko@contently.com",id:18,name:"Olia Olenchenko",phoneNumber:"+14155552675",identifier:null,thumbnail:"",customAttributes:{},lastActivityAt:1712123232,createdAt:1712123232},{additionalAttributes:{city:"Boston",country:"United States",description:"SEO expert and analytics enthusiast.",companyName:"OptiSearch",countryCode:"US",socialProfiles:{github:"nate-vannuchi",twitter:"nate_seo",facebook:"nathaniel.vannuchi",linkedin:"nathaniel-vannuchi",instagram:"nate.optimizes"}},availabilityStatus:"offline",email:"nathaniel.vannuchi@optisearch.com",id:17,name:"Nathaniel Vannuchi",phoneNumber:"+14155552676",identifier:null,thumbnail:"",customAttributes:{},lastActivityAt:1712123232,createdAt:1712123232},{additionalAttributes:{city:"Denver",country:"United States",description:"UI/UX designer with a flair for minimalist designs.",companyName:"Minimal Designs",countryCode:"US",socialProfiles:{github:"merrile-petruk",twitter:"merrile_ux",facebook:"merrile.petruk",linkedin:"merrile-petruk",instagram:"merrile.designs"}},availabilityStatus:"offline",email:"merrile.petruk@minimal.com",id:16,name:"Merrile Petruk",phoneNumber:"+14155552677",identifier:null,thumbnail:"",customAttributes:{},lastActivityAt:1712123232,createdAt:1712123232},{additionalAttributes:{city:"Miami",country:"United States",description:"Entrepreneur with a background in e-commerce.",companyName:"Ecom Solutions",countryCode:"US",socialProfiles:{github:"cordell-d",twitter:"cordell_entrepreneur",facebook:"cordell.dalinder",linkedin:"cordell-dalinder",instagram:"cordell.ecom"}},availabilityStatus:"offline",email:"cordell.dalinder@ecomsolutions.com",id:15,name:"Cordell Dalinder",phoneNumber:"+14155552678",identifier:null,thumbnail:"",customAttributes:{},lastActivityAt:1712123232,createdAt:1712123232}],Ght={__name:"ContactEmptyState",props:{title:{type:String,default:""},subtitle:{type:String,default:""},showButton:{type:Boolean,default:!0},buttonLabel:{type:String,default:""}},emits:["create"],setup(t,{expose:n,emit:a}){n();const e=a,s=P(null),o={emit:e,createNewContactDialogRef:s,onClick:()=>{var i;(i=s.value)==null||i.dialogRef.open()},ref:P,EmptyStateLayout:Or,CreateNewContactDialog:lP,Button:Se,ContactsCard:dP,get contactContent(){return $ht}};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},Vht={class:"grid grid-cols-1 gap-4 p-px overflow-hidden"},Hht={key:0};function jht(t,n,a,e,s,r){return p(),L(e.EmptyStateLayout,{title:a.title,subtitle:a.subtitle},{"empty-state-item":z(()=>[f("div",Vht,[(p(!0),g(de,null,Ae(e.contactContent.slice(0,5),o=>(p(),L(e.ContactsCard,{id:o.id,key:o.id,name:o.name,email:o.email,thumbnail:o.thumbnail,"phone-number":o.phoneNumber,"additional-attributes":o.additionalAttributes,"is-expanded":o.id===0,onToggle:i=>t.toggleExpanded(o.id)},null,8,["id","name","email","thumbnail","phone-number","additional-attributes","is-expanded","onToggle"]))),128))])]),actions:z(()=>[a.showButton?(p(),g("div",Hht,[v(e.Button,{label:a.buttonLabel,icon:"i-lucide-plus",onClick:e.onClick},null,8,["label"]),v(e.CreateNewContactDialog,{ref:"createNewContactDialogRef",onCreate:n[0]||(n[0]=o=>e.emit("create",o))},null,512)])):O("v-if",!0)]),_:1},8,["title","subtitle"])}const Wht=G(Ght,[["render",jht],["__file","/app/app/javascript/dashboard/components-next/Contacts/EmptyState/ContactEmptyState.vue"]]),zht={__name:"ContactsList",props:{contacts:{type:Array,required:!0},selectedContactIds:{type:Array,default:()=>[]}},emits:["toggleContact"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=Fe(),i=ft(),l=lt(),c=le("contacts/getUIFlags"),d=S(()=>c.value.isUpdating),u=P(null),m=P(null),h=S(()=>new Set(e.selectedContactIds||[])),_=async x=>{try{await o.dispatch("contacts/update",x),Z(r("CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.SUCCESS_MESSAGE"))}catch(R){const M="CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.FORM";R instanceof Bl?R.data.includes("email")?Z(r(`${M}.EMAIL_ADDRESS.DUPLICATE`)):R.data.includes("phone_number")&&Z(r(`${M}.PHONE_NUMBER.DUPLICATE`)):R instanceof Xr?Z(R.data):Z(r(`${M}.ERROR_MESSAGE`))}},E=async x=>{const R={contacts_dashboard_segments_index:["contacts_edit_segment","segmentId"],contacts_dashboard_labels_index:["contacts_edit_label","label"]},[M,w]=R[l.name]||["contacts_edit"],D={contactId:x,...w&&{[w]:l.params[w]}};await i.push({name:M,params:D,query:l.query})},y=x=>{u.value=u.value===x?null:x},b=x=>h.value.has(x),N={props:e,emit:s,t:r,store:o,router:i,route:l,uiFlags:c,isUpdating:d,expandedCardId:u,hoveredAvatarId:m,selectedIdsSet:h,updateContact:_,onClickViewDetails:E,toggleExpanded:y,isSelected:b,shouldShowSelection:x=>m.value===x||b(x),handleSelect:(x,R)=>{s("toggleContact",{id:x,value:R})},handleAvatarHover:(x,R)=>{m.value=R?x:null},ref:P,computed:S,get useStore(){return Fe},get useMapGetter(){return le},get useAlert(){return Z},get useI18n(){return Q},get useRouter(){return ft},get useRoute(){return lt},get DuplicateContactException(){return Bl},get ExceptionWithMessage(){return Xr},ContactsCard:dP};return Object.defineProperty(N,"__isScriptSetup",{enumerable:!1,value:!0}),N}},Yht={class:"flex flex-col gap-4"};function Kht(t,n,a,e,s,r){return p(),g("div",Yht,[(p(!0),g(de,null,Ae(a.contacts,o=>(p(),g("div",{key:o.id,class:"relative"},[v(e.ContactsCard,{id:o.id,name:o.name,email:o.email,thumbnail:o.thumbnail,"phone-number":o.phoneNumber,"additional-attributes":o.additionalAttributes,"availability-status":o.availabilityStatus,"is-expanded":e.expandedCardId===o.id,"is-updating":e.isUpdating,selectable:e.shouldShowSelection(o.id),"is-selected":e.isSelected(o.id),onToggle:i=>e.toggleExpanded(o.id),onUpdateContact:e.updateContact,onShowContact:e.onClickViewDetails,onSelect:i=>e.handleSelect(o.id,i),onAvatarHover:i=>e.handleAvatarHover(o.id,i)},null,8,["id","name","email","thumbnail","phone-number","additional-attributes","availability-status","is-expanded","is-updating","selectable","is-selected","onToggle","onSelect","onAvatarHover"])]))),128))])}const Xht=G(zht,[["render",Kht],["__file","/app/app/javascript/dashboard/components-next/Contacts/Pages/ContactsList.vue"]]),qht={__name:"BulkSelectBar",props:an({allItems:{type:Array,required:!0},selectAllLabel:{type:String,default:""},selectedCountLabel:{type:String,default:""},deleteLabel:{type:String,default:"Delete"}},{modelValue:{type:Set,default:()=>new Set},modelModifiers:{}}),emits:an(["bulkDelete"],["update:modelValue"]),setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=dn(t,"modelValue"),o=S(()=>r.value.size),i=S(()=>e.allItems.length),l=S(()=>o.value>0),c=S(()=>l.value&&o.value<i.value),d=S(()=>i.value>0&&o.value===i.value),u=S({get:()=>d.value,set:h=>{const _=h?new Set(e.allItems.map(E=>E.id)):new Set;r.value=_}}),m={props:e,emit:s,modelValue:r,selectedCount:o,totalCount:i,hasSelected:l,isIndeterminate:c,allSelected:d,bulkCheckboxState:u,computed:S,Checkbox:nl,Button:Se};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}},Zht={key:0,class:"flex items-center gap-3 py-1 ltr:pl-3 rtl:pr-3 ltr:pr-4 rtl:pl-4 rounded-lg bg-n-solid-2 outline outline-1 outline-n-container shadow"},Qht={class:"flex items-center gap-3"},Jht={class:"flex items-center gap-1.5 min-w-0"},e_t={class:"text-sm font-medium truncate text-n-slate-12 tabular-nums"},t_t={class:"text-sm text-n-slate-10 truncate tabular-nums"},n_t={class:"flex items-center gap-3"},a_t={key:1,class:"flex items-center gap-3"};function s_t(t,n,a,e,s,r){return p(),L(Qa,{name:"slide-fade","enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 transform ltr:-translate-x-4 rtl:translate-x-4","enter-to-class":"opacity-100 transform translate-x-0","leave-active-class":"hidden opacity-0"},{default:z(()=>[e.hasSelected?(p(),g("div",Zht,[f("div",Qht,[f("div",Jht,[v(e.Checkbox,{modelValue:e.bulkCheckboxState,"onUpdate:modelValue":n[0]||(n[0]=o=>e.bulkCheckboxState=o),indeterminate:e.isIndeterminate},null,8,["modelValue","indeterminate"]),f("span",e_t,C(a.selectAllLabel),1)]),f("span",t_t,C(a.selectedCountLabel),1),n[2]||(n[2]=f("div",{class:"h-4 w-px bg-n-strong"},null,-1)),qe(t.$slots,"secondary-actions")]),f("div",n_t,[qe(t.$slots,"actions",{selectedCount:e.selectedCount},()=>[v(e.Button,{label:a.deleteLabel,sm:"",ruby:"",ghost:"",class:"!px-1.5",icon:"i-lucide-trash",onClick:n[1]||(n[1]=o=>e.emit("bulkDelete"))},null,8,["label"])])])])):(p(),g("div",a_t,[qe(t.$slots,"default-actions")]))]),_:3})}const u_=G(qht,[["render",s_t],["__file","/app/app/javascript/dashboard/components-next/captain/assistant/BulkSelectBar.vue"]]),o_t={__name:"ContactsBulkActionBar",props:{visibleContactIds:{type:Array,default:()=>[]},selectedContactIds:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1}},emits:["clearSelection","assignLabels","toggleAll"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=S(()=>e.selectedContactIds.length),i=S(()=>e.visibleContactIds.length),l=P(!1),c=S(()=>i.value?r("CONTACTS_BULK_ACTIONS.SELECT_ALL",{count:i.value}):""),d=S(()=>r("CONTACTS_BULK_ACTIONS.SELECTED_COUNT",{count:o.value})),u=S(()=>e.visibleContactIds.map(A=>({id:A}))),m=S({get:()=>new Set(e.selectedContactIds),set:A=>{if(!e.visibleContactIds.length){s("toggleAll",!1);return}const T=A.size===e.visibleContactIds.length&&A.size>0;s("toggleAll",T)}}),h=()=>{l.value=!1,s("clearSelection")},_=()=>{!o.value||e.isLoading||(l.value=!l.value)},E=()=>{l.value=!1},b={props:e,emit:s,t:r,selectedCount:o,totalVisibleContacts:i,showLabelSelector:l,selectAllLabel:c,selectedCountLabel:d,allItems:u,selectionModel:m,emitClearSelection:h,toggleLabelSelector:_,closeLabelSelector:E,handleAssignLabels:A=>{s("assignLabels",A),E()},computed:S,ref:P,get useI18n(){return Q},get vOnClickOutside(){return Ga},BulkSelectBar:u_,Button:Se,LabelActions:rD};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}},r_t={class:"sticky top-0 z-10 bg-gradient-to-b from-n-background from-90% to-transparent px-6 pt-1 pb-2"},i_t={class:"flex items-center gap-2 ml-auto"},l_t={class:"relative flex items-center"};function c_t(t,n,a,e,s,r){return p(),g("div",r_t,[v(e.BulkSelectBar,{modelValue:e.selectionModel,"onUpdate:modelValue":n[0]||(n[0]=o=>e.selectionModel=o),"all-items":e.allItems,"select-all-label":e.selectAllLabel,"selected-count-label":e.selectedCountLabel,class:"py-2 ltr:!pr-3 rtl:!pl-3 justify-between"},{"secondary-actions":z(()=>[v(e.Button,{sm:"",ghost:"",slate:"",label:e.t("CONTACTS_BULK_ACTIONS.CLEAR_SELECTION"),class:"!px-1.5",onClick:e.emitClearSelection},null,8,["label"])]),actions:z(()=>[f("div",i_t,[ce((p(),g("div",l_t,[v(e.Button,{sm:"",faded:"",slate:"",icon:"i-lucide-tags",label:e.t("CONTACTS_BULK_ACTIONS.ASSIGN_LABELS"),disabled:!e.selectedCount||a.isLoading,"is-loading":a.isLoading,class:"[&>span:nth-child(2)]:hidden sm:[&>span:nth-child(2)]:inline w-fit",onClick:e.toggleLabelSelector},null,8,["label","disabled","is-loading"]),v(Qa,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:z(()=>[e.showLabelSelector?(p(),L(e.LabelActions,{key:0,class:"[&>.triangle]:!hidden [&>div>button]:!hidden ltr:!right-0 rtl:!left-0 top-8 mt-0.5",onAssign:e.handleAssignLabels})):O("v-if",!0)]),_:1})])),[[e.vOnClickOutside,e.closeLabelSelector]])])]),_:1},8,["modelValue","all-items","select-all-label","selected-count-label"])])}const d_t=G(o_t,[["render",c_t],["__file","/app/app/javascript/dashboard/routes/dashboard/contacts/components/ContactsBulkActionBar.vue"]]),kN="last_activity_at",BN=300,u_t={__name:"ContactsIndex",setup(t,{expose:n}){n();const a=Fe(),e=lt(),s=ft(),{t:r}=Q(),{updateUISettings:o,uiSettings:i}=Ct(),l=le("contacts/getContactsList"),c=le("contacts/getUIFlags"),d=le("customViews/getUIFlags"),u=le("customViews/getContactCustomViews"),m=le("contacts/getAppliedContactFilters"),h=le("contacts/getMeta"),_=S(()=>{var X;return(X=e.query)==null?void 0:X.search}),E=P(_.value||""),y=S(()=>{var X;return Number((X=e.query)==null?void 0:X.page)||1}),b=(X="")=>{const se=X.startsWith("-");return{sort:(se?X.slice(1):X)||kN,order:se?"-":""}},{contacts_sort_by:A=""}=i.value??{},{sort:T,order:I}=b(A),N=Lt({activeSort:T,activeOrdering:I}),x=S(()=>e.params.label),R=S(()=>e.params.segmentId),M=S(()=>c.value.isFetching||d.value.isFetching),w=S(()=>{var X;return Number((X=h.value)==null?void 0:X.currentPage)}),D=S(()=>{var X;return(X=h.value)==null?void 0:X.count}),B=P([]),k=P(!1),V=S(()=>B.value.length>0),F=S(()=>{if(R.value)return u.value.find(X=>X.id===Number(R.value))}),$=S(()=>l.value.length>0),Y=S(()=>e.name==="contacts_dashboard_index"&&y.value===1),j=S(()=>e.name==="contacts_dashboard_active"),U=S(()=>m.value.length>0),J=S(()=>!_.value&&!$.value&&Y.value&&!U.value),te=S(()=>(_.value||U.value||!Y.value)&&!$.value),q=S(()=>{var X;return _.value?r("CONTACTS_LAYOUT.HEADER.SEARCH_TITLE"):j.value?r("CONTACTS_LAYOUT.HEADER.ACTIVE_TITLE"):R.value?(X=F.value)==null?void 0:X.name:x.value?`#${x.value}`:r("CONTACTS_LAYOUT.HEADER.TITLE")}),K=S(()=>j.value?r("CONTACTS_LAYOUT.EMPTY_STATE.ACTIVE_EMPTY_STATE_TITLE"):!_.value||U.value?r("CONTACTS_LAYOUT.EMPTY_STATE.LIST_EMPTY_STATE_TITLE"):r("CONTACTS_LAYOUT.EMPTY_STATE.SEARCH_EMPTY_STATE_TITLE")),W=S(()=>l.value.map(X=>X.id)),ee=()=>{B.value=[]},ae=X=>{B.value=X?[...W.value]:[]},ve=({id:X,value:se})=>{const ie=B.value.includes(X),fe=se??!ie;fe&&!ie?B.value=[...B.value,X]:!fe&&ie&&(B.value=B.value.filter(me=>me!==X))},Ce=(X,se="")=>{const ie={...e.query,page:X.toString(),...se?{search:se}:{}};se||delete ie.search,s.replace({query:ie})},ue=()=>`${N.activeOrdering}${N.activeSort}`,ge=(X=1)=>({page:X,sortAttr:ue(),label:x.value}),Me=async(X=1)=>{ee(),await a.dispatch("contacts/clearContactFilters"),await a.dispatch("contacts/get",ge(X)),Ce(X)},We=async(X,se=1)=>{!R.value&&!U.value||(ee(),await a.dispatch("contacts/filter",{...ge(se),queryPayload:X}),Ce(se))},Ue=async(X=1)=>{ee(),await a.dispatch("contacts/clearContactFilters"),await a.dispatch("contacts/active",{page:X,sortAttr:ue()}),Ce(X)},Re=Ja(async(X,se=1)=>{if(ee(),await a.dispatch("contacts/clearContactFilters"),E.value=X,!X){Ce(se),await Me(se);return}Ce(se,X),await a.dispatch("contacts/search",{...ge(se),search:encodeURIComponent(X)})},BN),Le=async X=>{var se,ie;if(ee(),Ce(X,E.value),!M.value){if(_.value){await Re(_.value,X);return}if(E.value="",j.value){await Ue(X);return}if((U.value||(se=F.value)!=null&&se.query)&&!x.value){const fe=((ie=F.value)==null?void 0:ie.query)||zs(m.value);await We(fe,X);return}await Me(X)}},Xe=async X=>{if(!(!X.length||!B.value.length)){k.value=!0;try{await DT.create({type:"Contact",ids:B.value,labels:{add:X}}),Z(r("CONTACTS_BULK_ACTIONS.ASSIGN_LABELS_SUCCESS")),ee(),await Le(y.value)}catch{Z(r("CONTACTS_BULK_ACTIONS.ASSIGN_LABELS_FAILED"))}finally{k.value=!1}}},et=async({sort:X,order:se})=>{var ie;if(Object.assign(N,{activeSort:X,activeOrdering:se}),await o({contacts_sort_by:ue()}),_.value){await Re(E.value);return}if(j.value){await Ue();return}await(R.value||U.value?We(R.value?(ie=F.value)==null?void 0:ie.query:zs(m.value)):Me())},yt=async X=>{await a.dispatch("contacts/create",X)};je(l,X=>{const se=X.map(ie=>ie.id);B.value=B.value.filter(ie=>se.includes(ie))},{deep:!0}),je(()=>{var X;return(X=i.value)==null?void 0:X.contacts_sort_by},X=>{if(X){const{sort:se,order:ie}=b(X);N.activeSort=se,N.activeOrdering=ie}},{immediate:!0}),je([x,F,j],()=>{Le(y.value)},{deep:!0}),je(_,X=>{if(!M.value&&(E.value=X||"",X===void 0)){if(j.value||x.value||F.value||U.value)return;Me()}}),Pe(async()=>{if(R.value)F.value&&R.value&&await We(F.value.query,y.value);else{if(_.value){await Re(_.value,y.value);return}if(j.value){await Ue(y.value);return}await Me(y.value)}});const Dt={DEFAULT_SORT_FIELD:kN,DEBOUNCE_DELAY:BN,store:a,route:e,router:s,t:r,updateUISettings:o,uiSettings:i,contacts:l,uiFlags:c,customViewsUiFlags:d,segments:u,appliedFilters:m,meta:h,searchQuery:_,searchValue:E,pageNumber:y,parseSortSettings:b,contactSortBy:A,initialSort:T,initialOrder:I,sortState:N,activeLabel:x,activeSegmentId:R,isFetchingList:M,currentPage:w,totalItems:D,selectedContactIds:B,isBulkActionLoading:k,hasSelection:V,activeSegment:F,hasContacts:$,isContactIndexView:Y,isActiveView:j,hasAppliedFilters:U,showEmptyStateLayout:J,showEmptyText:te,headerTitle:q,emptyStateMessage:K,visibleContactIds:W,clearSelection:ee,toggleSelectAll:ae,toggleContactSelection:ve,updatePageParam:Ce,buildSortAttr:ue,getCommonFetchParams:ge,fetchContacts:Me,fetchSavedOrAppliedFilteredContact:We,fetchActiveContacts:Ue,searchContacts:Re,fetchContactsBasedOnContext:Le,assignLabels:Xe,handleSort:et,createContact:yt,onMounted:Pe,computed:S,ref:P,reactive:Lt,watch:je,get useRoute(){return lt},get useRouter(){return ft},get useI18n(){return Q},get useStore(){return Fe},get useMapGetter(){return le},get useAlert(){return Z},get debounce(){return Ja},get useUISettings(){return Ct},get filterQueryGenerator(){return zs},ContactsListLayout:qmt,ContactEmptyState:Wht,Spinner:$n,ContactsList:Xht,ContactsBulkActionBar:d_t,get BulkActionsAPI(){return DT}};return Object.defineProperty(Dt,"__isScriptSetup",{enumerable:!1,value:!0}),Dt}},p_t={class:"flex flex-col justify-between flex-1 h-full m-0 overflow-auto bg-n-background"},f_t={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},m_t={key:2,class:"flex items-center justify-center py-10"},h_t={class:"text-base text-n-slate-11"},__t={key:3,class:"flex flex-col gap-4 px-6 pt-2 pb-6"};function g_t(t,n,a,e,s,r){return p(),g("div",p_t,[v(e.ContactsListLayout,{"search-value":e.searchValue,"header-title":e.headerTitle,"current-page":e.currentPage,"total-items":e.totalItems,"show-pagination-footer":!e.isFetchingList&&e.hasContacts,"active-sort":e.sortState.activeSort,"active-ordering":e.sortState.activeOrdering,"active-segment":e.activeSegment,"segments-id":e.activeSegmentId,"is-fetching-list":e.isFetchingList,"has-applied-filters":e.hasAppliedFilters,"onUpdate:currentPage":e.fetchContactsBasedOnContext,onSearch:e.searchContacts,"onUpdate:sort":e.handleSort,onApplyFilter:e.fetchSavedOrAppliedFilteredContact,onClearFilters:e.fetchContacts},{default:z(()=>[e.isFetchingList?(p(),g("div",f_t,[v(e.Spinner)])):(p(),g(de,{key:1},[e.hasSelection?(p(),L(e.ContactsBulkActionBar,{key:0,"visible-contact-ids":e.visibleContactIds,"selected-contact-ids":e.selectedContactIds,"is-loading":e.isBulkActionLoading,onToggleAll:e.toggleSelectAll,onClearSelection:e.clearSelection,onAssignLabels:e.assignLabels},null,8,["visible-contact-ids","selected-contact-ids","is-loading"])):O("v-if",!0),e.showEmptyStateLayout?(p(),L(e.ContactEmptyState,{key:1,class:"pt-14",title:e.t("CONTACTS_LAYOUT.EMPTY_STATE.TITLE"),subtitle:e.t("CONTACTS_LAYOUT.EMPTY_STATE.SUBTITLE"),"button-label":e.t("CONTACTS_LAYOUT.EMPTY_STATE.BUTTON_LABEL"),onCreate:e.createContact},null,8,["title","subtitle","button-label"])):e.showEmptyText?(p(),g("div",m_t,[f("span",h_t,C(e.emptyStateMessage),1)])):(p(),g("div",__t,[v(e.ContactsList,{contacts:e.contacts,"selected-contact-ids":e.selectedContactIds,onToggleContact:e.toggleContactSelection},null,8,["contacts","selected-contact-ids"])]))],64))]),_:1},8,["search-value","header-title","current-page","total-items","show-pagination-footer","active-sort","active-ordering","active-segment","segments-id","is-fetching-list","has-applied-filters","onSearch"])])}const qd=G(u_t,[["render",g_t],["__file","/app/app/javascript/dashboard/routes/dashboard/contacts/pages/ContactsIndex.vue"]]),b_t={__name:"ContactsDetailsLayout",props:{selectedContact:{type:Object,default:()=>({})},isUpdating:{type:Boolean,default:!1}},emits:["goToContactsList","toggleBlock"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=Hc(),i=lt(),l=P(!1),c=S(()=>i.params.contactId),d=S(()=>{var A;return(A=e.selectedContact)==null?void 0:A.name}),u=S(()=>{const A=[{label:r("CONTACTS_LAYOUT.HEADER.BREADCRUMB.CONTACTS"),link:"#"}];return e.selectedContact&&A.push({label:d.value}),A}),m=S(()=>{var A;return(A=e.selectedContact)==null?void 0:A.blocked}),b={props:e,emit:s,t:r,slots:o,route:i,isContactSidebarOpen:l,contactId:c,selectedContactName:d,breadcrumbItems:u,isContactBlocked:m,handleBreadcrumbClick:()=>{s("goToContactsList")},toggleBlock:()=>{s("toggleBlock",m.value)},handleConversationSidebarToggle:()=>{l.value=!l.value},closeMobileSidebar:()=>{l.value&&(l.value=!1)},computed:S,useSlots:Hc,ref:P,get useI18n(){return Q},get useRoute(){return lt},get vOnClickOutside(){return Ga},Button:Se,Breadcrumb:qi,ComposeConversation:c_,VoiceCallButton:eP};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}},v_t={class:"flex w-full h-full overflow-hidden justify-evenly bg-n-background"},E_t={class:"flex flex-col w-full h-full transition-all duration-300 ltr:2xl:ml-56 rtl:2xl:mr-56"},S_t={class:"sticky top-0 z-10 px-6 3xl:px-0"},T_t={class:"w-full mx-auto max-w-[40.625rem]"},A_t={class:"flex flex-col xs:flex-row items-start xs:items-center justify-between w-full py-7 gap-2"},y_t={class:"flex items-center gap-2"},I_t={class:"flex-1 px-6 overflow-y-auto 3xl:px-px"},C_t={class:"w-full py-4 mx-auto max-w-[40.625rem]"},O_t={key:0,class:"hidden lg:block overflow-y-auto justify-end min-w-52 w-full py-6 max-w-md border-l border-n-weak bg-n-solid-2"},N_t={key:0,id:"contact-sidebar-content",class:"order-2 w-[85%] sm:w-[50%] bg-n-solid-2 ltr:border-l rtl:border-r border-n-weak overflow-y-auto py-6 shadow-lg"};function x_t(t,n,a,e,s,r){var o;return p(),g("section",v_t,[f("div",E_t,[f("header",S_t,[f("div",T_t,[f("div",A_t,[v(e.Breadcrumb,{items:e.breadcrumbItems,onClick:e.handleBreadcrumbClick},null,8,["items"]),f("div",y_t,[v(e.Button,{label:e.isContactBlocked?t.$t("CONTACTS_LAYOUT.HEADER.UNBLOCK_CONTACT"):t.$t("CONTACTS_LAYOUT.HEADER.BLOCK_CONTACT"),size:"sm",slate:"","is-loading":a.isUpdating,disabled:a.isUpdating,onClick:e.toggleBlock},null,8,["label","is-loading","disabled"]),v(e.VoiceCallButton,{phone:(o=a.selectedContact)==null?void 0:o.phoneNumber,label:t.$t("CONTACT_PANEL.CALL"),size:"sm"},null,8,["phone","label"]),v(e.ComposeConversation,{"contact-id":e.contactId},{trigger:z(({toggle:i})=>[v(e.Button,{label:t.$t("CONTACTS_LAYOUT.HEADER.SEND_MESSAGE"),size:"sm",onClick:i},null,8,["label","onClick"])]),_:1},8,["contact-id"])])])])]),f("main",I_t,[f("div",C_t,[qe(t.$slots,"default")])])]),O(" Desktop sidebar "),e.slots.sidebar?(p(),g("div",O_t,[qe(t.$slots,"sidebar")])):O("v-if",!0),O(" Mobile sidebar container "),e.slots.sidebar?(p(),g("div",{key:1,class:oe(["lg:hidden fixed top-0 ltr:right-0 rtl:left-0 h-full z-50 flex justify-end transition-all duration-200 ease-in-out",e.isContactSidebarOpen?"w-full":"w-16"])},[O(" Toggle button "),ce((p(),g("div",{class:oe(["flex items-start p-1 w-fit h-fit relative order-1 xs:top-24 top-28 transition-all bg-n-solid-2 border border-n-weak duration-500 ease-in-out",[e.isContactSidebarOpen?"justify-end ltr:rounded-l-full rtl:rounded-r-full ltr:rounded-r-none rtl:rounded-l-none":"justify-center rounded-full ltr:mr-6 rtl:ml-6"]])},[v(e.Button,{ghost:"",slate:"",sm:"",class:oe(["!rounded-full rtl:rotate-180",{"bg-n-alpha-2":e.isContactSidebarOpen}]),icon:e.isContactSidebarOpen?"i-lucide-panel-right-close":"i-lucide-panel-right-open","data-contact-sidebar-toggle":"",onClick:e.handleConversationSidebarToggle},null,8,["class","icon"])],2)),[[e.vOnClickOutside,[e.closeMobileSidebar,{ignore:["#contact-sidebar-content"]}]]]),v(Qa,{"enter-active-class":"transition-transform duration-200 ease-in-out","leave-active-class":"transition-transform duration-200 ease-in-out","enter-from-class":"ltr:translate-x-full rtl:-translate-x-full","enter-to-class":"ltr:translate-x-0 rtl:-translate-x-0","leave-from-class":"ltr:translate-x-0 rtl:-translate-x-0","leave-to-class":"ltr:translate-x-full rtl:-translate-x-full"},{default:z(()=>[e.isContactSidebarOpen?(p(),g("div",N_t,[qe(t.$slots,"sidebar")])):O("v-if",!0)]),_:3})],2)):O("v-if",!0)])}const R_t=G(b_t,[["render",x_t],["__file","/app/app/javascript/dashboard/components-next/Contacts/ContactsDetailsLayout.vue"]]),w_t={__name:"AddLabel",props:{labelMenuItems:{type:Array,default:()=>[]}},emits:["updateLabel"],setup(t,{expose:n,emit:a}){n();const e=a,{t:s}=Q(),r=P(!1),o={emit:e,t:s,showDropdown:r,ref:P,get useI18n(){return Q},DropdownMenu:ds};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},M_t={class:"relative"},L_t={class:"text-sm text-n-slate-11"};function D_t(t,n,a,e,s,r){const o=nt("on-clickaway");return p(),g("div",M_t,[f("button",{class:oe(["flex items-center gap-1 px-2 py-1 rounded-md outline-dashed h-6 outline-1 outline-n-slate-6 hover:bg-n-alpha-2",{"bg-n-alpha-2":e.showDropdown}]),onClick:n[0]||(n[0]=i=>e.showDropdown=!e.showDropdown)},[n[2]||(n[2]=f("span",{class:"i-lucide-plus"},null,-1)),f("span",L_t,C(e.t("LABEL.TAG_BUTTON")),1)],2),e.showDropdown?ce((p(),L(e.DropdownMenu,{key:0,"menu-items":a.labelMenuItems,"show-search":"",class:"z-[100] w-48 mt-2 overflow-y-auto ltr:left-0 rtl:right-0 top-full max-h-52",onAction:n[1]||(n[1]=i=>e.emit("updateLabel",i))},{thumbnail:z(({item:i})=>[f("div",{class:"rounded-sm size-2",style:nn({backgroundColor:i.thumbnail.color})},null,4)]),_:1},8,["menu-items"])),[[o,()=>e.showDropdown=!1]]):O("v-if",!0)])}const P_t=G(w_t,[["render",D_t],["__file","/app/app/javascript/dashboard/components-next/Label/AddLabel.vue"]]),k_t={__name:"ContactLabels",props:{contactId:{type:[String,Number],default:null}},setup(t,{expose:n}){n();const a=t,e=Fe(),s=lt(),r=P(!1),o=P(null),i=le("labels/getLabels"),l=le("contactLabels/getContactLabels"),c=S(()=>{const b=l.value(a.contactId);return i.value.filter(({title:A})=>b.includes(A))}),d=S(()=>{var b;return(b=i.value)==null?void 0:b.map(A=>({label:A.title,value:A.id,thumbnail:{name:A.title,color:A.color},isSelected:c.value.some(T=>T.id===A.id),action:"contactLabel"})).toSorted((A,T)=>Number(A.isSelected)-Number(T.isSelected))}),u=async b=>{b&&e.dispatch("contactLabels/get",b)},m=async({value:b})=>{try{const A=c.value.map(N=>N.title),T=i.value.find(N=>N.id===b);if(!T)return;let I;A.includes(T.title)?I=A.filter(N=>N!==T.title):I=[...A,T.title],await e.dispatch("contactLabels/update",{contactId:a.contactId,labels:I}),r.value=!1}catch{}},h=b=>m({value:b.id});je(()=>a.contactId,(b,A)=>{b!==A&&u(b)}),Pe(()=>{s.params.contactId&&u(s.params.contactId)});const y={props:a,store:e,route:s,showDropdown:r,hoveredLabel:o,allLabels:i,contactLabels:l,savedLabels:c,labelMenuItems:d,fetchLabels:u,handleLabelAction:m,handleRemoveLabel:h,handleMouseLeave:()=>{o.value=null},handleLabelHover:b=>{o.value=b},computed:S,watch:je,onMounted:Pe,ref:P,get useRoute(){return lt},get useMapGetter(){return le},get useStore(){return Fe},LabelItem:Vw,AddLabel:P_t};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}};function B_t(t,n,a,e,s,r){return p(),g("div",{class:"flex flex-wrap items-center gap-2",onMouseleave:e.handleMouseLeave},[(p(!0),g(de,null,Ae(e.savedLabels,o=>(p(),L(e.LabelItem,{key:o.id,label:o,"is-hovered":e.hoveredLabel===o.id,onRemove:e.handleRemoveLabel,onHover:i=>e.handleLabelHover(o.id)},null,8,["label","is-hovered","onHover"]))),128)),v(e.AddLabel,{"label-menu-items":e.labelMenuItems,onUpdateLabel:e.handleLabelAction},null,8,["label-menu-items"])],32)}const F_t=G(k_t,[["render",B_t],["__file","/app/app/javascript/dashboard/components-next/Contacts/ContactLabels/ContactLabels.vue"]]),U_t={__name:"ContactDetails",props:{selectedContact:{type:Object,required:!0}},emits:["goToContactsList"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=Fe(),i=P(null),l=P(null),c=P(""),d=P(null),u=le("contacts/getUIFlags"),m=S(()=>u.value.isUpdating),h=S(()=>{var w;return(w=d.value)==null?void 0:w.isFormInvalid}),_=P({}),E=()=>e.selectedContact?{...e.selectedContact}:{};Pe(()=>{Object.assign(_.value,E())});const y=S(()=>{var w;return(w=_.value)!=null&&w.createdAt?kn(_.value.createdAt):""}),b=S(()=>{var w;return(w=_.value)!=null&&w.lastActivityAt?kn(_.value.lastActivityAt):""}),A=S(()=>{var w;return c.value?c.value:(w=_.value)==null?void 0:w.thumbnail}),M={props:e,emit:s,t:r,store:o,confirmDeleteContactDialogRef:i,avatarFile:l,avatarUrl:c,contactsFormRef:d,uiFlags:u,isUpdating:m,isFormInvalid:h,contactData:_,getInitialContactData:E,createdAt:y,lastActivityAt:b,avatarSrc:A,handleFormUpdate:w=>{Object.assign(_.value,w)},updateContact:async()=>{try{const{customAttributes:w,...D}=_.value;await o.dispatch("contacts/update",D),await o.dispatch("contacts/fetchContactableInbox",e.selectedContact.id),Z(r("CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.SUCCESS_MESSAGE"))}catch{Z(r("CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.ERROR_MESSAGE"))}},openConfirmDeleteContactDialog:()=>{var w;(w=i.value)==null||w.dialogRef.open()},handleAvatarUpload:async({file:w,url:D})=>{var B;l.value=w,c.value=D;try{await o.dispatch("contacts/update",{...(B=d.value)==null?void 0:B.state,avatar:w,isFormData:!0}),Z(r("CONTACTS_LAYOUT.DETAILS.AVATAR.UPLOAD.SUCCESS_MESSAGE"))}catch{Z(r("CONTACTS_LAYOUT.DETAILS.AVATAR.UPLOAD.ERROR_MESSAGE"))}},handleAvatarDelete:async()=>{try{e.selectedContact&&e.selectedContact.id&&(await o.dispatch("contacts/deleteAvatar",e.selectedContact.id),Z(r("CONTACTS_LAYOUT.DETAILS.AVATAR.DELETE.SUCCESS_MESSAGE"))),l.value=null,c.value="",_.value.thumbnail=null}catch(w){Z(w.message?w.message:r("CONTACTS_LAYOUT.DETAILS.AVATAR.DELETE.ERROR_MESSAGE"))}},computed:S,ref:P,onMounted:Pe,get useI18n(){return Q},get useStore(){return Fe},get useMapGetter(){return le},get useAlert(){return Z},get dynamicTime(){return kn},Avatar:qt,Button:Se,ContactLabels:F_t,ContactsForm:O1,ConfirmContactDeleteDialog:cP};return Object.defineProperty(M,"__isScriptSetup",{enumerable:!1,value:!0}),M}},$_t={class:"flex flex-col items-start gap-8 pb-6"},G_t={class:"flex flex-col items-start gap-3"},V_t={class:"flex flex-col gap-1"},H_t={class:"text-base font-medium text-n-slate-12"},j_t={class:"flex flex-col gap-1.5"},W_t={key:0,class:"inline-flex items-center gap-1 text-sm text-n-slate-11"},z_t={class:"inline-flex items-center gap-1 text-sm text-n-slate-11"},Y_t={key:0,class:"i-ph-activity text-n-slate-10 size-4"},K_t={class:"flex flex-col items-start gap-6"},X_t={class:"flex flex-col items-start w-full gap-4 pt-6 border-t border-n-strong"},q_t={class:"flex flex-col gap-2"},Z_t={class:"text-base font-medium text-n-slate-12"},Q_t={class:"text-sm text-n-slate-11"};function J_t(t,n,a,e,s,r){var o,i,l,c,d,u;return p(),g("div",$_t,[f("div",G_t,[v(e.Avatar,{src:e.avatarSrc||"",name:((o=a.selectedContact)==null?void 0:o.name)||"",size:72,"allow-upload":"",onUpload:e.handleAvatarUpload,onDelete:e.handleAvatarDelete},null,8,["src","name"]),f("div",V_t,[f("h3",H_t,C((i=a.selectedContact)==null?void 0:i.name),1),f("div",j_t,[(l=a.selectedContact)!=null&&l.identifier?(p(),g("span",W_t,[n[1]||(n[1]=f("span",{class:"i-ph-user-gear text-n-slate-10 size-4"},null,-1)),Oe(" "+C((c=a.selectedContact)==null?void 0:c.identifier),1)])):O("v-if",!0),f("span",z_t,[(d=a.selectedContact)!=null&&d.identifier?(p(),g("span",Y_t)):O("v-if",!0),Oe(" "+C(t.$t("CONTACTS_LAYOUT.DETAILS.CREATED_AT",{date:e.createdAt}))+"  "+C(t.$t("CONTACTS_LAYOUT.DETAILS.LAST_ACTIVITY",{date:e.lastActivityAt})),1)])])]),v(e.ContactLabels,{"contact-id":(u=a.selectedContact)==null?void 0:u.id},null,8,["contact-id"])]),f("div",K_t,[v(e.ContactsForm,{ref:"contactsFormRef","contact-data":e.contactData,"is-details-view":"",onUpdate:e.handleFormUpdate},null,8,["contact-data"]),v(e.Button,{label:e.t("CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.UPDATE_BUTTON"),size:"sm","is-loading":e.isUpdating,disabled:e.isUpdating||e.isFormInvalid,onClick:e.updateContact},null,8,["label","is-loading","disabled"])]),f("div",X_t,[f("div",q_t,[f("h6",Z_t,C(e.t("CONTACTS_LAYOUT.DETAILS.DELETE_CONTACT")),1),f("span",Q_t,C(e.t("CONTACTS_LAYOUT.DETAILS.DELETE_CONTACT_DESCRIPTION")),1)]),v(e.Button,{label:e.t("CONTACTS_LAYOUT.DETAILS.DELETE_CONTACT"),color:"ruby",onClick:e.openConfirmDeleteContactDialog},null,8,["label"])]),v(e.ConfirmContactDeleteDialog,{ref:"confirmDeleteContactDialogRef","selected-contact":a.selectedContact,onGoToContactsList:n[0]||(n[0]=m=>e.emit("goToContactsList"))},null,8,["selected-contact"])])}const egt=G(U_t,[["render",J_t],["__file","/app/app/javascript/dashboard/components-next/Contacts/Pages/ContactDetails.vue"]]),tgt={__name:"TabBar",props:{initialActiveTab:{type:Number,default:0},tabs:{type:Array,required:!0,validator:t=>t.every(n=>typeof n.label=="string"&&(n.count?typeof n.count=="number":!0))}},emits:["tabChanged"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=S(()=>e.initialActiveTab),l={props:e,emit:s,activeTab:r,selectTab:c=>{s("tabChanged",e.tabs[c])},showDivider:c=>c>r.value&&c<e.tabs.length-1||c<r.value-1&&c>-1,computed:S};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}},ngt={class:"flex items-center h-8 rounded-lg bg-n-alpha-1 w-fit"},agt=["onClick"];function sgt(t,n,a,e,s,r){return p(),g("div",ngt,[(p(!0),g(de,null,Ae(a.tabs,(o,i)=>(p(),g(de,{key:i},[f("button",{class:oe(["relative px-4 truncate py-1.5 text-sm border-0 outline-1 outline rounded-lg transition-colors duration-300 ease-in-out hover:text-n-brand",[e.activeTab===i?"text-n-blue-text bg-n-solid-active outline-n-container dark:outline-transparent":"text-n-slate-10 outline-transparent h-8"]]),onClick:l=>e.selectTab(i)},C(o.label)+" "+C(o.count?`(${o.count})`:""),11,agt),f("div",{class:oe(["w-px h-3.5 rounded my-auto transition-colors duration-300 ease-in-out",e.showDivider(i)?"bg-n-strong":"bg-transparent dark:bg-transparent"])},null,2)],64))),128))])}const ogt=G(tgt,[["render",sgt],["__file","/app/app/javascript/dashboard/components-next/tabbar/TabBar.vue"]]),rgt={__name:"ContactNotes",setup(t,{expose:n}){n();const{t:a}=Q(),e=Fe(),s=lt(),r=Lt({message:""}),o=le("getCurrentUser"),i=le("contactNotes/getAllNotesByContactId"),l=le("contactNotes/getUIFlags"),c=S(()=>l.value.isFetching),d=S(()=>l.value.isCreating),u=S(()=>i.value(s.params.contactId)),m=b=>{var T,I;return((T=b==null?void 0:b.user)==null?void 0:T.id)===o.value.id?a("CONTACTS_LAYOUT.SIDEBAR.NOTES.YOU"):((I=b==null?void 0:b.user)==null?void 0:I.name)||"Bot"},h=b=>{if(!b)return;const{contactId:A}=s.params;e.dispatch("contactNotes/create",{content:b,contactId:A}),r.message=""},_=b=>{if(!b)return;const{contactId:A}=s.params;e.dispatch("contactNotes/delete",{noteId:b,contactId:A})},E={"$mod+Enter":{action:()=>h(r.message),allowOnFocusedInput:!0}};jn(E);const y={t:a,store:e,route:s,state:r,currentUser:o,notesByContact:i,uiFlags:l,isFetchingNotes:c,isCreatingNote:d,notes:u,getWrittenBy:m,onAdd:h,onDelete:_,keyboardEvents:E,reactive:Lt,computed:S,get useI18n(){return Q},get useStore(){return Fe},get useMapGetter(){return le},get useRoute(){return lt},get useKeyboardEvents(){return jn},Editor:Ds,Spinner:$n,Button:Se,ContactNoteItem:tP};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}},igt={class:"flex flex-col gap-6 py-6"},lgt={class:"flex items-center gap-3"},cgt={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},dgt={key:1},ugt={key:2,class:"px-6 py-6 text-sm leading-6 text-center text-n-slate-11"};function pgt(t,n,a,e,s,r){return p(),g("div",igt,[v(e.Editor,{modelValue:e.state.message,"onUpdate:modelValue":n[1]||(n[1]=o=>e.state.message=o),placeholder:e.t("CONTACTS_LAYOUT.SIDEBAR.NOTES.PLACEHOLDER"),"focus-on-mount":"",class:"[&>div]:!border-transparent [&>div]:px-4 [&>div]:py-4 px-6"},{actions:z(()=>[f("div",lgt,[v(e.Button,{variant:"link",color:"blue",size:"sm",label:e.t("CONTACTS_LAYOUT.SIDEBAR.NOTES.SAVE"),class:"hover:no-underline","is-loading":e.isCreatingNote,disabled:!e.state.message||e.isCreatingNote,onClick:n[0]||(n[0]=o=>e.onAdd(e.state.message))},null,8,["label","is-loading","disabled"])])]),_:1},8,["modelValue","placeholder"]),e.isFetchingNotes?(p(),g("div",cgt,[v(e.Spinner)])):e.notes.length>0?(p(),g("div",dgt,[(p(!0),g(de,null,Ae(e.notes,o=>(p(),L(e.ContactNoteItem,{key:o.id,class:"mx-6 py-4",note:o,"written-by":e.getWrittenBy(o),"allow-delete":"",onDelete:e.onDelete},null,8,["note","written-by"]))),128))])):(p(),g("p",ugt,C(e.t("CONTACTS_LAYOUT.SIDEBAR.NOTES.EMPTY_STATE")),1))])}const fgt=G(rgt,[["render",pgt],["__file","/app/app/javascript/dashboard/components-next/Contacts/ContactsSidebar/ContactNotes.vue"]]),mgt={__name:"CardMessagePreview",props:{conversation:{type:Object,required:!0}},setup(t,{expose:n}){n();const a=t,{t:e}=Q(),{getPlainText:s}=ta(),r=S(()=>{const{lastNonActivityMessage:c={},customAttributes:d={}}=a.conversation,{email:{subject:u}={}}=d;return s(u||(c==null?void 0:c.content)||e("CHAT_LIST.NO_CONTENT"))}),o=S(()=>{const{meta:{assignee:c={}}={}}=a.conversation;return{name:c.name??c.availableName,thumbnail:c.thumbnail,status:c.availabilityStatus}}),i=S(()=>{const{unreadCount:c}=a.conversation;return c}),l={props:a,t:e,getPlainText:s,lastNonActivityMessageContent:r,assignee:o,unreadMessagesCount:i,computed:S,get useI18n(){return Q},get useMessageFormatter(){return ta},Avatar:qt};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}},hgt={class:"flex items-end w-full gap-2 pb-1"},_gt={class:"w-full mb-0 text-sm leading-7 text-n-slate-12 line-clamp-2"},ggt={class:"flex items-center flex-shrink-0 gap-2 pb-2"},bgt={key:1,class:"inline-flex items-center justify-center rounded-full size-5 bg-n-brand"},vgt={class:"text-xs font-semibold text-white"};function Egt(t,n,a,e,s,r){return p(),g("div",hgt,[f("p",_gt,C(e.lastNonActivityMessageContent),1),f("div",ggt,[e.assignee.name?(p(),L(e.Avatar,{key:0,name:e.assignee.name,src:e.assignee.thumbnail,size:20,status:e.assignee.status,"rounded-full":""},null,8,["name","src","status"])):O("v-if",!0),e.unreadMessagesCount>0?(p(),g("div",bgt,[f("span",vgt,C(e.unreadMessagesCount),1)])):O("v-if",!0)])])}const Sgt=G(mgt,[["render",Egt],["__file","/app/app/javascript/dashboard/components-next/Conversation/ConversationCard/CardMessagePreview.vue"]]),Tgt={__name:"CardLabels",props:{conversationLabels:{type:Array,required:!0},accountLabels:{type:Array,required:!0}},setup(t,{expose:n}){n();const a=t,e=Object.freeze({DEFAULT_WIDTH:80,CHAR_WIDTH:{SHORT:8,LONG:6},BASE_WIDTH:12,THRESHOLD:5}),s=P(null),r=P(1),o=S(()=>{var h;const m=new Set(a.conversationLabels);return(h=a.accountLabels)==null?void 0:h.filter(({title:_})=>m.has(_))}),i=({title:m=""})=>{const h=m.length>e.THRESHOLD?e.CHAR_WIDTH.LONG:e.CHAR_WIDTH.SHORT;return m.length*h+e.BASE_WIDTH},l=m=>m.length?m.reduce((_,E)=>_+i(E),0)/m.length:e.DEFAULT_WIDTH,c=S(()=>{var m;return(m=o.value)==null?void 0:m.slice(0,r.value)}),u={props:a,WIDTH_CONFIG:e,containerRef:s,maxLabels:r,activeLabels:o,calculateLabelWidth:i,getAverageWidth:l,visibleLabels:c,updateVisibleLabels:()=>{if(!s.value)return;const m=s.value.offsetWidth,h=l(o.value);r.value=Math.max(1,Math.floor(m/h))},ref:P,computed:S};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}},Agt={ref:"containerRef",class:"flex items-center gap-2.5 w-full min-w-0 h-6 overflow-hidden"};function ygt(t,n,a,e,s,r){const o=nt("resize");return ce((p(),g("div",Agt,[(p(!0),g(de,null,Ae(e.visibleLabels,(i,l)=>(p(),g("div",{key:i.id,class:oe(["flex items-center gap-1.5 min-w-0",[l!==e.visibleLabels.length-1?"flex-shrink-0 text-ellipsis":"flex-shrink"]])},[f("div",{style:nn({backgroundColor:i.color}),class:"size-1.5 rounded-full flex-shrink-0"},null,4),f("span",{class:oe(["text-sm text-n-slate-10 whitespace-nowrap",{truncate:l===e.visibleLabels.length-1}])},C(i.title),3)],2))),128))])),[[o,e.updateVisibleLabels]])}const Igt=G(Tgt,[["render",ygt],["__file","/app/app/javascript/dashboard/components-next/Conversation/ConversationCard/CardLabels.vue"]]),FN=6e4,Cgt={__name:"SLACardLabel",props:{conversation:{type:Object,required:!0}},setup(t,{expose:n}){const a=t,e=P(null),s=P({threshold:null,isSlaMissed:!1,type:null,icon:null}),r=h=>Object.keys(h).reduce((_,E)=>(_[E.replace(/([A-Z])/g,"_$1").toLowerCase()]=h[E],_),{}),o=S(()=>{var h;return(h=a.conversation)==null?void 0:h.appliedSla}),i=S(()=>{var h;return(h=s.value)==null?void 0:h.isSlaMissed}),l=S(()=>{var h,_;return((h=s.value)==null?void 0:h.threshold)&&((_=o.value)==null?void 0:_.id)}),c=S(()=>{var h,_;return(_=(h=s.value)==null?void 0:h.type)==null?void 0:_.toUpperCase()}),d=()=>{s.value=Vf({appliedSla:r(o.value||{}),chat:a.conversation})},u=()=>{e.value=setTimeout(()=>{d(),u()},FN)};Pe(()=>{d(),u()}),is(()=>{e.value&&clearTimeout(e.value)}),je(()=>a.conversation,d),n({hasSlaThreshold:l});const m={props:a,REFRESH_INTERVAL:FN,timer:e,slaStatus:s,convertObjectCamelCaseToSnakeCase:r,appliedSLA:o,isSlaMissed:i,hasSlaThreshold:l,slaStatusText:c,updateSlaStatus:d,createTimer:u,ref:P,computed:S,onMounted:Pe,onUnmounted:is,watch:je,get evaluateSLAStatus(){return Vf}};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}},Ogt={class:"flex items-center min-w-fit gap-0.5 h-6"},Ngt={class:"flex items-center justify-center size-4"};function xgt(t,n,a,e,s,r){return p(),g("div",Ogt,[f("div",Ngt,[(p(),g("svg",{width:"10",height:"13",viewBox:"0 0 10 13",fill:"none",class:oe(e.isSlaMissed?"fill-n-ruby-10":"fill-n-slate-9"),xmlns:"http://www.w3.org/2000/svg"},n[0]||(n[0]=[f("path",{d:"M4.55091 12.412C7.44524 12.412 9.37939 10.4571 9.37939 7.51446C9.37939 2.63072 5.21405 0.599854 2.36808 0.599854C1.81546 0.599854 1.45626 0.800176 1.45626 1.1801C1.45626 1.32516 1.52534 1.48404 1.64277 1.62219C2.27828 2.38204 2.92069 3.27314 2.93451 4.36455C2.93451 4.5925 2.9276 4.78592 2.76181 5.08295L3.05194 5.03459C2.81017 4.21949 2.18848 3.63234 1.5806 3.63234C1.32501 3.63234 1.15232 3.81884 1.15232 4.09514C1.15232 4.23331 1.19377 4.56488 1.19377 4.79974C1.19377 5.95332 0.26123 6.69935 0.26123 8.67495C0.26123 10.92 1.97434 12.412 4.55091 12.412ZM4.68906 10.8923C3.65982 10.8923 2.96905 10.2637 2.96905 9.33119C2.96905 8.3572 3.66672 8.01181 3.75652 7.38322C3.76344 7.32796 3.79107 7.31414 3.83251 7.34867C4.08809 7.57663 4.24697 7.85293 4.37822 8.1776C4.67525 7.77696 4.81341 6.9204 4.73051 6.0293C4.72361 5.97404 4.75814 5.94642 4.80649 5.96713C6.02916 6.53357 6.65085 7.74241 6.65085 8.82693C6.65085 9.92527 6.00844 10.8923 4.68906 10.8923Z"},null,-1)]),2))]),f("span",{class:oe(["text-sm truncate",e.isSlaMissed?"text-n-ruby-11":"text-n-slate-11"])},C(`${e.slaStatusText}: ${e.slaStatus.threshold}`),3)])}const uP=G(Cgt,[["render",xgt],["__file","/app/app/javascript/dashboard/components-next/Conversation/ConversationCard/SLACardLabel.vue"]]),Rgt={__name:"CardMessagePreviewWithMeta",props:{conversation:{type:Object,required:!0},accountLabels:{type:Array,required:!0}},setup(t,{expose:n}){const a=t,{t:e}=Q(),s=P(null),{getPlainText:r}=ta(),o=S(()=>{const{lastNonActivityMessage:u={},customAttributes:m={}}=a.conversation,{email:{subject:h}={}}=m;return r(h||(u==null?void 0:u.content)||e("CHAT_LIST.NO_CONTENT"))}),i=S(()=>{const{meta:{assignee:u={}}={}}=a.conversation;return{name:u.name??u.availableName,thumbnail:u.thumbnail,status:u.availabilityStatus}}),l=S(()=>{const{unreadCount:u}=a.conversation;return u}),c=S(()=>{var u,m;return((u=s.value)==null?void 0:u.hasSlaThreshold)&&((m=a.conversation)==null?void 0:m.slaPolicyId)});n({hasSlaThreshold:c});const d={props:a,t:e,slaCardLabelRef:s,getPlainText:r,lastNonActivityMessageContent:o,assignee:i,unreadMessagesCount:l,hasSlaThreshold:c,computed:S,ref:P,get useI18n(){return Q},get useMessageFormatter(){return ta},Avatar:qt,CardLabels:Igt,SLACardLabel:uP};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}},wgt={class:"flex flex-col w-full gap-1"},Mgt={class:"flex items-center justify-between w-full gap-2 py-1 h-7"},Lgt={class:"mb-0 text-sm leading-7 text-n-slate-12 line-clamp-1"},Dgt={key:0,class:"inline-flex items-center justify-center flex-shrink-0 rounded-full size-5 bg-n-brand"},Pgt={class:"text-xs font-semibold text-white"},kgt={key:0,class:"w-px h-3 bg-n-slate-4"},Bgt={class:"overflow-hidden"};function Fgt(t,n,a,e,s,r){return p(),g("div",wgt,[f("div",Mgt,[f("p",Lgt,C(e.lastNonActivityMessageContent),1),e.unreadMessagesCount>0?(p(),g("div",Dgt,[f("span",Pgt,C(e.unreadMessagesCount),1)])):O("v-if",!0)]),f("div",{class:oe(["grid items-center gap-2.5 h-7",e.hasSlaThreshold?"grid-cols-[auto_auto_1fr_20px]":"grid-cols-[1fr_20px]"])},[ce(v(e.SLACardLabel,{ref:"slaCardLabelRef",conversation:a.conversation},null,8,["conversation"]),[[En,e.hasSlaThreshold]]),e.hasSlaThreshold?(p(),g("div",kgt)):O("v-if",!0),f("div",Bgt,[v(e.CardLabels,{"conversation-labels":a.conversation.labels,"account-labels":a.accountLabels},null,8,["conversation-labels","account-labels"])]),e.assignee.name?(p(),L(e.Avatar,{key:1,name:e.assignee.name,src:e.assignee.thumbnail,size:20,status:e.assignee.status,"rounded-full":""},null,8,["name","src","status"])):O("v-if",!0)],2)])}const Ugt=G(Rgt,[["render",Fgt],["__file","/app/app/javascript/dashboard/components-next/Conversation/ConversationCard/CardMessagePreviewWithMeta.vue"]]),$gt={__name:"ConversationCard",props:{conversation:{type:Object,required:!0},contact:{type:Object,required:!0},stateInbox:{type:Object,required:!0},accountLabels:{type:Array,required:!0}},setup(t,{expose:n}){n();const a=t,e=ft(),s=lt(),r=P(null),o=S(()=>a.contact),i=S(()=>{var b;return(b=o.value)==null?void 0:b.name}),l=S(()=>{var b;return(b=o.value)==null?void 0:b.thumbnail}),c=S(()=>{var b;return(b=o.value)==null?void 0:b.availabilityStatus}),d=S(()=>a.stateInbox),u=S(()=>{var b;return(b=d.value)==null?void 0:b.name}),m=S(()=>{const{channelType:b,medium:A}=d.value;return vs(b,A)}),h=S(()=>{var A;const b=(A=a.conversation)==null?void 0:A.timestamp;return b?Rl(kn(b)):""}),_=S(()=>{var A;const{labels:b=[]}=a.conversation;return!((A=r.value)!=null&&A.hasSlaThreshold)&&b.length===0}),y={props:a,router:e,route:s,cardMessagePreviewWithMetaRef:r,currentContact:o,currentContactName:i,currentContactThumbnail:l,currentContactStatus:c,inbox:d,inboxName:u,inboxIcon:m,lastActivityAt:h,showMessagePreviewWithoutMeta:_,onCardClick:b=>{const A=vt(Cu({accountId:s.params.accountId,id:a.conversation.id}));if(b.metaKey||b.ctrlKey){window.open(window.chatwootConfig.hostURL+A,"_blank","noopener noreferrer nofollow");return}e.push({path:A})},computed:S,ref:P,get getInboxIconByType(){return vs},get useRouter(){return ft},get useRoute(){return lt},get frontendURL(){return vt},get conversationUrl(){return Cu},get dynamicTime(){return kn},get shortTimestamp(){return Rl},Icon:Bt,Avatar:qt,CardMessagePreview:Sgt,CardMessagePreviewWithMeta:Ugt,CardPriorityIcon:C1};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}},Ggt={class:"flex flex-col w-full gap-1 min-w-0"},Vgt={class:"flex items-center justify-between h-6 gap-2"},Hgt={class:"text-base font-medium truncate text-n-slate-12"},jgt={class:"flex items-center gap-2"},Wgt={class:"flex items-center justify-center flex-shrink-0 rounded-full bg-n-alpha-2 size-5"},zgt={class:"text-sm text-n-slate-10"};function Ygt(t,n,a,e,s,r){const o=nt("tooltip");return p(),g("div",{role:"button",class:"flex w-full gap-3 px-3 py-4 transition-all duration-300 ease-in-out cursor-pointer",onClick:e.onCardClick},[v(e.Avatar,{name:e.currentContactName,src:e.currentContactThumbnail,size:24,status:e.currentContactStatus,"rounded-full":""},null,8,["name","src","status"]),f("div",Ggt,[f("div",Vgt,[f("h4",Hgt,C(e.currentContactName),1),f("div",jgt,[v(e.CardPriorityIcon,{priority:a.conversation.priority||null},null,8,["priority"]),ce((p(),g("div",Wgt,[v(e.Icon,{icon:e.inboxIcon,class:"flex-shrink-0 text-n-slate-11 size-3"},null,8,["icon"])])),[[o,e.inboxName,void 0,{left:!0}]]),f("span",zgt,C(e.lastActivityAt),1)])]),ce(v(e.CardMessagePreview,{conversation:a.conversation},null,8,["conversation"]),[[En,e.showMessagePreviewWithoutMeta]]),ce(v(e.CardMessagePreviewWithMeta,{ref:"cardMessagePreviewWithMetaRef",conversation:a.conversation,"account-labels":a.accountLabels},null,8,["conversation","account-labels"]),[[En,!e.showMessagePreviewWithoutMeta]])])])}const Kgt=G($gt,[["render",Ygt],["__file","/app/app/javascript/dashboard/components-next/Conversation/ConversationCard/ConversationCard.vue"]]),Xgt={__name:"ContactHistory",setup(t,{expose:n}){n();const{t:a}=Q(),e=lt(),s=le("contactConversations/getAllConversationsByContactId"),r=le("contacts/getContactById"),o=le("inboxes/getInboxById"),i=le("labels/getLabels"),l=S(()=>i.value),c=le("contactConversations/getUIFlags"),d=S(()=>c.value.isFetching),u=S(()=>s.value(e.params.contactId)),m={t:a,route:e,conversations:s,contactsById:r,stateInbox:o,accountLabels:i,accountLabelsValue:l,uiFlags:c,isFetching:d,contactConversations:u,computed:S,get useMapGetter(){return le},get useRoute(){return lt},get useI18n(){return Q},Spinner:$n,ConversationCard:Kgt};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}},qgt={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},Zgt={key:1,class:"px-6 py-4 divide-y divide-n-strong [&>*:hover]:!border-y-transparent [&>*:hover+*]:!border-t-transparent"},Qgt={key:2,class:"px-6 py-10 text-sm leading-6 text-center text-n-slate-11"};function Jgt(t,n,a,e,s,r){return e.isFetching?(p(),g("div",qgt,[v(e.Spinner)])):e.contactConversations.length>0?(p(),g("div",Zgt,[(p(!0),g(de,null,Ae(e.contactConversations,o=>(p(),L(e.ConversationCard,{key:o.id,conversation:o,contact:e.contactsById(o.meta.sender.id),"state-inbox":e.stateInbox(o.inboxId),"account-labels":e.accountLabelsValue,class:"rounded-none hover:rounded-xl hover:bg-n-alpha-1 dark:hover:bg-n-alpha-3"},null,8,["conversation","contact","state-inbox","account-labels"]))),128))])):(p(),g("p",Qgt,C(e.t("CONTACTS_LAYOUT.SIDEBAR.HISTORY.EMPTY_STATE")),1))}const ebt=G(Xgt,[["render",Jgt],["__file","/app/app/javascript/dashboard/components-next/Contacts/ContactsSidebar/ContactHistory.vue"]]),tbt={__name:"ContactMergeForm",props:{selectedContact:{type:Object,required:!0},primaryContactId:{type:[Number,null],default:null},primaryContactList:{type:Array,default:()=>[]},isSearching:{type:Boolean,default:!1},hasError:{type:Boolean,default:!1},errorMessage:{type:String,default:""}},emits:["update:primaryContactId","search"],setup(t,{expose:n,emit:a}){n();const e=a,{t:s}=Q(),r={emit:e,t:s,Avatar:qt,ComboBox:Cr,get useI18n(){return Q}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},nbt={class:"flex flex-col"},abt={class:"flex flex-col gap-2"},sbt={class:"flex items-center justify-between h-5 gap-2"},obt={class:"text-sm text-n-slate-12"},rbt={class:"flex items-center justify-center w-24 h-5 text-xs rounded-md text-n-teal-11 bg-n-alpha-2"},ibt={class:"relative flex justify-center gap-2 top-4"},lbt={class:"flex flex-col gap-2"},cbt={class:"flex items-center justify-between h-5 gap-2"},dbt={class:"text-sm text-n-slate-12"},ubt={class:"flex items-center justify-center w-24 h-5 text-xs rounded-md text-n-ruby-11 bg-n-alpha-2"},pbt={class:"border border-n-strong h-[60px] gap-2 flex items-center rounded-xl p-3"},fbt={class:"flex flex-col w-full min-w-0 gap-1"},mbt={class:"text-sm leading-4 truncate text-n-slate-11"},hbt={class:"text-sm leading-4 truncate text-n-slate-11"};function _bt(t,n,a,e,s,r){return p(),g("div",nbt,[f("div",abt,[f("div",sbt,[f("label",obt,C(e.t("CONTACTS_LAYOUT.SIDEBAR.MERGE.PRIMARY")),1),f("span",rbt,C(e.t("CONTACTS_LAYOUT.SIDEBAR.MERGE.PRIMARY_HELP_LABEL")),1)]),v(e.ComboBox,{id:"inbox","use-api-results":"","model-value":a.primaryContactId,options:a.primaryContactList,"empty-state":a.isSearching?e.t("CONTACTS_LAYOUT.SIDEBAR.MERGE.IS_SEARCHING"):e.t("CONTACTS_LAYOUT.SIDEBAR.MERGE.EMPTY_STATE"),"search-placeholder":e.t("CONTACTS_LAYOUT.SIDEBAR.MERGE.SEARCH_PLACEHOLDER"),placeholder:e.t("CONTACTS_LAYOUT.SIDEBAR.MERGE.PLACEHOLDER"),"has-error":a.hasError,message:a.errorMessage,class:"[&>div>button]:bg-n-alpha-black2","onUpdate:modelValue":n[0]||(n[0]=o=>e.emit("update:primaryContactId",o)),onSearch:n[1]||(n[1]=o=>e.emit("search",o))},null,8,["model-value","options","empty-state","search-placeholder","placeholder","has-error","message"])]),f("div",ibt,[(p(),g(de,null,Ae(3,o=>f("div",{key:o,class:"relative w-4 h-8"},[...n[2]||(n[2]=[f("div",{class:"absolute w-0 h-0 border-l-[4px] border-r-[4px] border-b-[6px] border-l-transparent border-r-transparent border-n-strong ltr:translate-x-[4px] rtl:-translate-x-[4px] -translate-y-[4px]"},null,-1),f("div",{class:"absolute w-[1px] h-full bg-n-strong left-1/2 transform -translate-x-1/2"},null,-1)])])),64))]),f("div",lbt,[f("div",cbt,[f("label",dbt,C(e.t("CONTACTS_LAYOUT.SIDEBAR.MERGE.PARENT")),1),f("span",ubt,C(e.t("CONTACTS_LAYOUT.SIDEBAR.MERGE.PARENT_HELP_LABEL")),1)]),f("div",pbt,[v(e.Avatar,{name:a.selectedContact.name||"",src:a.selectedContact.thumbnail||"",size:32,"rounded-full":""},null,8,["name","src"]),f("div",fbt,[f("span",mbt,C(a.selectedContact.name),1),f("span",hbt,C(a.selectedContact.email),1)])])])])}const gbt=G(tbt,[["render",_bt],["__file","/app/app/javascript/dashboard/components-next/Contacts/ContactsForm/ContactMergeForm.vue"]]),bbt={__name:"ContactMerge",props:{selectedContact:{type:Object,required:!0}},emits:["goToContactsList","resetTab"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=Fe(),i=lt(),l=Lt({primaryContactId:null}),c=le("contacts/getUIFlags"),d=P([]),u=P(!1),m={primaryContactId:{required:Ge}},h=rt(m,l),_=S(()=>c.value.isMerging),E=S(()=>{var I;return((I=d.value)==null?void 0:I.map(N=>({value:N.id,label:`(ID: ${N.id}) ${N.name}`})))??[]}),y=Ja(async I=>{u.value=!0,d.value=[];try{const{data:{payload:N}}=await Xc.search(I);d.value=N.filter(x=>x.id!==e.selectedContact.id),u.value=!1}catch{Z(r("CONTACTS_LAYOUT.SIDEBAR.MERGE.SEARCH_ERROR_MESSAGE"))}finally{u.value=!1}},300,!1),b=()=>{l.primaryContactId===null&&s("resetTab"),l.primaryContactId=null,d.value=[],u.value=!1},T={props:e,emit:s,t:r,store:o,route:i,state:l,uiFlags:c,searchResults:d,isSearching:u,validationRules:m,v$:h,isMergingContact:_,primaryContactList:E,onContactSearch:y,resetState:b,onMergeContacts:async()=>{if(await h.value.$validate()){Nt(hr.MERGED_CONTACTS);try{await o.dispatch("contacts/merge",{childId:e.selectedContact.id||i.params.contactId,parentId:l.primaryContactId}),s("goToContactsList"),Z(r("CONTACTS_LAYOUT.SIDEBAR.MERGE.SUCCESS_MESSAGE")),b()}catch{Z(r("CONTACTS_LAYOUT.SIDEBAR.MERGE.ERROR_MESSAGE"))}}},reactive:Lt,computed:S,ref:P,get useI18n(){return Q},get useStore(){return Fe},get useMapGetter(){return le},get required(){return Ge},get useVuelidate(){return rt},get useRoute(){return lt},get useAlert(){return Z},get useTrack(){return Nt},get ContactAPI(){return Xc},get debounce(){return Ja},get CONTACTS_EVENTS(){return hr},Button:Se,ContactMergeForm:gbt};return Object.defineProperty(T,"__isScriptSetup",{enumerable:!1,value:!0}),T}},vbt={class:"flex flex-col gap-8 px-6 py-6"},Ebt={class:"flex flex-col gap-2"},Sbt={class:"text-base text-n-slate-12"},Tbt={class:"text-sm text-n-slate-11"},Abt={class:"flex items-center justify-between gap-3"};function ybt(t,n,a,e,s,r){return p(),g("div",vbt,[f("div",Ebt,[f("h4",Sbt,C(e.t("CONTACTS_LAYOUT.SIDEBAR.MERGE.TITLE")),1),f("p",Tbt,C(e.t("CONTACTS_LAYOUT.SIDEBAR.MERGE.DESCRIPTION")),1)]),v(e.ContactMergeForm,{"primary-contact-id":e.state.primaryContactId,"onUpdate:primaryContactId":n[0]||(n[0]=o=>e.state.primaryContactId=o),"selected-contact":a.selectedContact,"primary-contact-list":e.primaryContactList,"is-searching":e.isSearching,"has-error":!!e.v$.primaryContactId.$error,"error-message":e.v$.primaryContactId.$error?e.t("CONTACTS_LAYOUT.SIDEBAR.MERGE.PRIMARY_REQUIRED_ERROR"):"",onSearch:e.onContactSearch},null,8,["primary-contact-id","selected-contact","primary-contact-list","is-searching","has-error","error-message","onSearch"]),f("div",Abt,[v(e.Button,{variant:"faded",color:"slate",label:e.t("CONTACTS_LAYOUT.SIDEBAR.MERGE.BUTTONS.CANCEL"),class:"w-full bg-n-alpha-2 text-n-blue-text hover:bg-n-alpha-3",onClick:e.resetState},null,8,["label"]),v(e.Button,{label:e.t("CONTACTS_LAYOUT.SIDEBAR.MERGE.BUTTONS.CONFIRM"),class:"w-full","is-loading":e.isMergingContact,disabled:e.isMergingContact,onClick:e.onMergeContacts},null,8,["label","is-loading","disabled"])])])}const Ibt=G(bbt,[["render",ybt],["__file","/app/app/javascript/dashboard/components-next/Contacts/ContactsSidebar/ContactMerge.vue"]]),Cbt={__name:"ListAttribute",props:{attribute:{type:Object,required:!0},isEditingView:{type:Boolean,default:!1}},emits:["update","delete"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),[o,i]=$t(),l=S(()=>{var u;return((u=e.attribute.attributeValues)==null?void 0:u.map(m=>({label:m,value:m,action:"select",isSelected:m===e.attribute.value})))||[]}),d={props:e,emit:s,t:r,showAttributeListDropdown:o,toggleAttributeListDropdown:i,attributeListMenuItems:l,handleAttributeAction:async u=>{s("update",u.value),i(!1)},computed:S,get useI18n(){return Q},get useToggle(){return $t},DropdownMenu:ds,Button:Se};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}},Obt={class:"relative flex items-center"},Nbt={key:0,class:"flex items-center gap-1"};function xbt(t,n,a,e,s,r){const o=nt("on-clickaway");return p(),g("div",{class:oe(["flex items-center w-full min-w-0 gap-2",{"justify-start":a.isEditingView,"justify-end":!a.isEditingView}])},[ce((p(),g("div",Obt,[f("span",{class:oe(["min-w-0 text-sm",{"cursor-pointer text-n-slate-11 hover:text-n-slate-12 py-2 select-none font-medium":!a.isEditingView,"text-n-slate-12 truncate flex-1":a.isEditingView}]),onClick:n[0]||(n[0]=i=>e.toggleAttributeListDropdown(!e.props.isEditingView))},C(a.attribute.value||e.t("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.TRIGGER.SELECT")),3),e.showAttributeListDropdown?(p(),L(e.DropdownMenu,{key:0,"menu-items":e.attributeListMenuItems,"show-search":"",class:oe(["w-48 mt-2 top-full",{"ltr:right-0 rtl:left-0":!a.isEditingView,"ltr:left-0 rtl:right-0":a.isEditingView}]),onAction:n[1]||(n[1]=i=>e.handleAttributeAction(i))},null,8,["menu-items","class"])):O("v-if",!0)])),[[o,()=>e.toggleAttributeListDropdown(!1)]]),a.isEditingView?(p(),g("div",Nbt,[v(e.Button,{variant:"faded",color:"slate",icon:"i-lucide-pencil",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:n[2]||(n[2]=i=>e.toggleAttributeListDropdown())}),v(e.Button,{variant:"faded",color:"ruby",icon:"i-lucide-trash",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:n[3]||(n[3]=i=>e.emit("delete"))})])):O("v-if",!0)],2)}const UN=G(Cbt,[["render",xbt],["__file","/app/app/javascript/dashboard/components-next/CustomAttributes/ListAttribute.vue"]]),Rbt={__name:"CheckboxAttribute",props:{attribute:{type:Object,required:!0},isEditingView:{type:Boolean,default:!1}},emits:["update","delete"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=P(!!e.attribute.value),i={props:e,emit:s,attributeValue:r,handleChange:l=>{s("update",l)},ref:P,Button:Se,Switch:mo};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}};function wbt(t,n,a,e,s,r){return p(),g("div",{class:oe(["flex items-center w-full gap-2",{"justify-start":a.isEditingView,"justify-end":!a.isEditingView}])},[v(e.Switch,{modelValue:e.attributeValue,"onUpdate:modelValue":n[0]||(n[0]=o=>e.attributeValue=o),onChange:e.handleChange},null,8,["modelValue"]),a.isEditingView?(p(),L(e.Button,{key:0,variant:"faded",color:"ruby",icon:"i-lucide-trash",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:n[1]||(n[1]=o=>e.emit("delete"))})):O("v-if",!0)],2)}const $N=G(Rbt,[["render",wbt],["__file","/app/app/javascript/dashboard/components-next/CustomAttributes/CheckboxAttribute.vue"]]),Mbt={__name:"DateAttribute",props:{attribute:{type:Object,required:!0},isEditingView:{type:Boolean,default:!1}},emits:["update","delete"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=P(!1),i=P(e.attribute.value||""),l={editedValue:{required:Ge,isDate:y=>new Date(y).toISOString()}},c=rt(l,{editedValue:i}),d=S(()=>e.attribute.value?new Date(e.attribute.value).toLocaleDateString():r("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.TRIGGER.INPUT")),u=S(()=>c.value.$errors.length>0),m=S({get(){const y=i.value??e.attribute.value;return y?new Date(y).toISOString().slice(0,10):o.value&&!u.value?new Date().toISOString().slice(0,10):""},set(y){i.value=y&&new Date(y).toISOString()}}),E={props:e,emit:s,t:r,isEditingValue:o,editedValue:i,rules:l,v$:c,formattedDate:d,hasError:u,defaultDateValue:m,toggleEditValue:y=>{o.value=typeof y=="boolean"?y:!o.value,o.value&&!i.value&&(c.value.$reset(),i.value=new Date().toISOString())},handleInputUpdate:async()=>{await c.value.$validate()&&(s("update",um(i.value)),o.value=!1)},ref:P,computed:S,get parseISO(){return um},get useI18n(){return Q},get useVuelidate(){return rt},get required(){return Ge},Input:sn,Button:Se};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}},Lbt={key:1,class:"flex items-center gap-1"},Dbt={key:2,class:"flex items-center w-full"};function Pbt(t,n,a,e,s,r){const o=nt("on-clickaway");return p(),g("div",{class:oe(["flex items-center w-full min-w-0 gap-2",{"justify-start":a.isEditingView,"justify-end":!a.isEditingView}])},[e.isEditingValue?O("v-if",!0):(p(),g("span",{key:0,class:oe(["min-w-0 text-sm",{"cursor-pointer text-n-slate-11 hover:text-n-slate-12 py-2 select-none font-medium":!a.isEditingView,"text-n-slate-12 truncate":a.isEditingView}]),onClick:n[0]||(n[0]=i=>e.toggleEditValue(!a.isEditingView))},C(e.formattedDate),3)),a.isEditingView&&!e.isEditingValue?(p(),g("div",Lbt,[v(e.Button,{variant:"faded",color:"slate",icon:"i-lucide-pencil",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:n[1]||(n[1]=i=>e.toggleEditValue(!0))}),v(e.Button,{variant:"faded",color:"ruby",icon:"i-lucide-trash",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:n[2]||(n[2]=i=>e.emit("delete"))})])):O("v-if",!0),e.isEditingValue?ce((p(),g("div",Dbt,[v(e.Input,{modelValue:e.defaultDateValue,"onUpdate:modelValue":n[3]||(n[3]=i=>e.defaultDateValue=i),type:"date",class:"w-full [&>p]:absolute [&>p]:mt-0.5 [&>p]:top-8 ltr:[&>p]:left-0 rtl:[&>p]:right-0",message:e.hasError?e.t("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.VALIDATIONS.INVALID_DATE"):"","message-type":e.hasError?"error":"info",autofocus:"","custom-input-class":"h-8 ltr:rounded-r-none rtl:rounded-l-none",onKeyup:Vn(e.handleInputUpdate,["enter"])},null,8,["modelValue","message","message-type"]),v(e.Button,{icon:"i-lucide-check",color:e.hasError?"ruby":"blue",size:"sm",class:"flex-shrink-0 ltr:rounded-l-none rtl:rounded-r-none",onClick:e.handleInputUpdate},null,8,["color"])])),[[o,()=>e.toggleEditValue(!1)]]):O("v-if",!0)],2)}const GN=G(Mbt,[["render",Pbt],["__file","/app/app/javascript/dashboard/components-next/CustomAttributes/DateAttribute.vue"]]),kbt={__name:"OtherAttribute",props:{attribute:{type:Object,required:!0},isEditingView:{type:Boolean,default:!1}},emits:["update","delete"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=P(!1),i=P(e.attribute.value||""),l=S(()=>e.attribute.attributeDisplayType==="link"),c=S(()=>e.attribute.attributeDisplayType==="text"),d=S(()=>e.attribute.attributeDisplayType==="number"),u=S(()=>({editedValue:{required:Ge,...l.value&&{url:T=>!T||qf(T)},...c.value&&e.attribute.regexPattern&&{regexValidation:T=>T?zf(e.attribute.regexPattern).test(T):!0}}})),m=rt(u,{editedValue:i}),h=S(()=>m.value.$error),_=S(()=>{var T,I,N;return h.value?l.value&&((T=m.value.editedValue.url)!=null&&T.$invalid)?r("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.VALIDATIONS.INVALID_URL"):c.value&&e.attribute.regexPattern&&((I=m.value.editedValue.regexValidation)!=null&&I.$invalid)?e.attribute.regexCue||r("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.VALIDATIONS.INVALID_INPUT"):d.value&&((N=m.value.editedValue.required)!=null&&N.$invalid)?r("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.VALIDATIONS.INVALID_NUMBER"):r("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.VALIDATIONS.REQUIRED"):""}),E=S(()=>{switch(e.attribute.attributeDisplayType){case"link":return"url";case"number":return"number";default:return"text"}}),y=T=>{o.value=typeof T=="boolean"?T:!o.value,o.value&&(m.value.$reset(),i.value=e.attribute.value||"")},A={props:e,emit:s,t:r,isEditingValue:o,editedValue:i,isAttributeTypeLink:l,isAttributeTypeText:c,isAttributeTypeNumber:d,rules:u,v$:m,hasError:h,attributeErrorMessage:_,getInputType:E,toggleEditValue:y,handleInputUpdate:async()=>{await m.value.$validate()&&(s("update",i.value),y(!1))},ref:P,computed:S,get useI18n(){return Q},get useVuelidate(){return rt},get required(){return Ge},get isValidURL(){return qf},get getRegexp(){return zf},Input:sn,Button:Se};return Object.defineProperty(A,"__isScriptSetup",{enumerable:!1,value:!0}),A}},Bbt=["href"],Fbt={key:1,class:"flex items-center gap-1"},Ubt={key:2,class:"flex items-center w-full"};function $bt(t,n,a,e,s,r){const o=nt("on-clickaway");return p(),g("div",{class:oe(["flex items-center w-full min-w-0 gap-2",{"justify-start":a.isEditingView,"justify-end":!a.isEditingView}])},[e.isEditingValue?O("v-if",!0):(p(),g("span",{key:0,class:oe(["min-w-0 text-sm",{"cursor-pointer text-n-slate-11 hover:text-n-slate-12 py-2 select-none font-medium":!a.isEditingView,"text-n-slate-12 truncate":a.isEditingView&&!e.isAttributeTypeLink,"truncate hover:text-n-brand text-n-blue-text":a.isEditingView&&e.isAttributeTypeLink}]),onClick:n[1]||(n[1]=i=>e.toggleEditValue(!a.isEditingView))},[e.isAttributeTypeLink&&a.attribute.value&&a.isEditingView?(p(),g("a",{key:0,href:a.attribute.value,target:"_blank",rel:"noopener noreferrer",class:"hover:underline",onClick:n[0]||(n[0]=Ve(()=>{},["stop"]))},C(a.attribute.value),9,Bbt)):(p(),g(de,{key:1},[Oe(C(a.attribute.value||e.t("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.TRIGGER.INPUT")),1)],64))],2)),a.isEditingView&&!e.isEditingValue?(p(),g("div",Fbt,[v(e.Button,{variant:"faded",color:"slate",icon:"i-lucide-pencil",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:n[2]||(n[2]=i=>e.toggleEditValue(!0))}),v(e.Button,{variant:"faded",color:"ruby",icon:"i-lucide-trash",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:n[3]||(n[3]=i=>e.emit("delete"))})])):O("v-if",!0),e.isEditingValue?ce((p(),g("div",Ubt,[v(e.Input,{modelValue:e.editedValue,"onUpdate:modelValue":n[4]||(n[4]=i=>e.editedValue=i),placeholder:e.t("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.TRIGGER.INPUT"),type:e.getInputType,class:"w-full [&>p]:absolute [&>p]:mt-0.5 [&>p]:top-8 ltr:[&>p]:left-0 rtl:[&>p]:right-0",autofocus:"",message:e.attributeErrorMessage,"message-type":e.hasError?"error":"info","custom-input-class":"h-8 ltr:rounded-r-none rtl:rounded-l-none",onKeyup:Vn(e.handleInputUpdate,["enter"])},null,8,["modelValue","placeholder","type","message","message-type"]),v(e.Button,{icon:"i-lucide-check",color:e.hasError?"ruby":"blue",size:"sm",class:"flex-shrink-0 ltr:rounded-l-none rtl:rounded-r-none",onClick:e.handleInputUpdate},null,8,["color"])])),[[o,()=>e.toggleEditValue(!1)]]):O("v-if",!0)],2)}const VN=G(kbt,[["render",$bt],["__file","/app/app/javascript/dashboard/components-next/CustomAttributes/OtherAttribute.vue"]]),Gbt={__name:"ContactCustomAttributeItem",props:{attribute:{type:Object,required:!0},isEditingView:{type:Boolean,default:!1}},setup(t,{expose:n}){n();const a=t,e=Fe(),{t:s}=Q(),r=lt(),o=async()=>{var u;try{await e.dispatch("contacts/deleteCustomAttributes",{id:r.params.contactId,customAttributes:[a.attribute.attributeKey]}),Z(s("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.API.DELETE_SUCCESS_MESSAGE"))}catch(m){Z(((u=m==null?void 0:m.response)==null?void 0:u.message)||s("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.API.DELETE_ERROR"))}},i=async u=>{var m;try{await e.dispatch("contacts/update",{id:r.params.contactId,customAttributes:{[a.attribute.attributeKey]:u}}),Z(s("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.API.SUCCESS_MESSAGE"))}catch(h){Z(((m=h==null?void 0:h.response)==null?void 0:m.message)||s("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.API.UPDATE_ERROR"))}},l={list:UN,checkbox:$N,date:GN,default:VN},c=S(()=>l[a.attribute.attributeDisplayType]||l.default),d={props:a,store:e,t:s,route:r,handleDelete:o,handleUpdate:i,componentMap:l,CurrentAttributeComponent:c,computed:S,get useI18n(){return Q},get useRoute(){return lt},get useStore(){return Fe},get useAlert(){return Z},ListAttribute:UN,CheckboxAttribute:$N,DateAttribute:GN,OtherAttribute:VN};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}},Vbt={class:"flex items-center justify-between truncate"},Hbt={class:"text-sm font-medium truncate text-n-slate-12"};function jbt(t,n,a,e,s,r){return p(),g("div",{class:oe(["grid grid-cols-[140px,1fr] group/attribute items-center w-full gap-2",a.isEditingView?"min-h-10":"min-h-11"])},[f("div",Vbt,[f("span",Hbt,C(a.attribute.attributeDisplayName),1)]),(p(),L(Da(e.CurrentAttributeComponent),{attribute:a.attribute,"is-editing-view":a.isEditingView,onUpdate:e.handleUpdate,onDelete:e.handleDelete},null,40,["attribute","is-editing-view"]))],2)}const Wbt=G(Gbt,[["render",jbt],["__file","/app/app/javascript/dashboard/components-next/Contacts/ContactsSidebar/ContactCustomAttributeItem.vue"]]),zbt={__name:"ContactCustomAttributes",props:{selectedContact:{type:Object,default:null}},setup(t,{expose:n}){n();const a=t,{t:e}=Q(),{uiSettings:s}=Ct(),r=P(""),o=le("attributes/getContactAttributes")||[],i=S(()=>{var A;return((A=o.value)==null?void 0:A.length)>0}),l=(A,T,I)=>!A.length||!T?[]:A.reduce((N,x)=>{const{attributeKey:R}=x;return I(R,T)&&N.push({...x,value:T[R]??""}),N},[]),c=S(()=>s.value.conversation_elements_order_conversation_contact_panel??[]),d=A=>{const T=c.value;if(!(T!=null&&T.length))return A;const I=new Map(T.map((N,x)=>[N,x]));return[...A].sort((N,x)=>{const R=I.get(N.attributeKey)??1/0,M=I.get(x.attributeKey)??1/0;return R-M})},u=S(()=>{var T;const A=l(o.value,(T=a.selectedContact)==null?void 0:T.customAttributes,(I,N)=>I in N);return d(A)}),m=S(()=>{var T;const A=l(o.value,(T=a.selectedContact)==null?void 0:T.customAttributes,(I,N)=>!(I in N));return d(A)}),h=S(()=>{var A;return(A=m.value)==null?void 0:A.filter(T=>T.attributeDisplayName.toLowerCase().includes(r.value.toLowerCase()))}),_=S(()=>{var A;return(A=m.value)==null?void 0:A.length}),E=S(()=>_.value===0),y=S(()=>u.value.length===0),b={props:a,t:e,uiSettings:s,searchQuery:r,contactAttributes:o,hasContactAttributes:i,processContactAttributes:l,sortAttributesOrder:c,sortByUISettings:d,usedAttributes:u,unusedAttributes:m,filteredUnusedAttributes:h,unusedAttributesCount:_,hasNoUnusedAttributes:E,hasNoUsedAttributes:y,ref:P,computed:S,get useI18n(){return Q},get useMapGetter(){return le},get useUISettings(){return Ct},ContactCustomAttributeItem:Wbt};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}},Ybt={key:0,class:"flex flex-col gap-6 px-6 py-6"},Kbt={key:0,class:"flex flex-col gap-2"},Xbt={key:1,class:"flex items-center gap-3"},qbt={class:"text-sm font-medium text-n-slate-10"},Zbt={class:"flex flex-col gap-3"},Qbt={key:0,class:"relative"},Jbt=["placeholder"],evt={key:1,class:"flex items-center justify-start h-11"},tvt={class:"text-sm text-n-slate-11"},nvt={key:2,class:"flex flex-col gap-2"},avt={key:1,class:"px-6 py-10 text-sm leading-6 text-center text-n-slate-11"};function svt(t,n,a,e,s,r){return e.hasContactAttributes?(p(),g("div",Ybt,[e.hasNoUsedAttributes?O("v-if",!0):(p(),g("div",Kbt,[(p(!0),g(de,null,Ae(e.usedAttributes,o=>(p(),L(e.ContactCustomAttributeItem,{key:o.id,"is-editing-view":"",attribute:o},null,8,["attribute"]))),128))])),e.hasNoUnusedAttributes?O("v-if",!0):(p(),g("div",Xbt,[n[1]||(n[1]=f("div",{class:"flex-1 h-[1px] bg-n-slate-5"},null,-1)),f("span",qbt,C(e.t("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.UNUSED_ATTRIBUTES",{count:e.unusedAttributesCount})),1),n[2]||(n[2]=f("div",{class:"flex-1 h-[1px] bg-n-slate-5"},null,-1))])),f("div",Zbt,[e.hasNoUnusedAttributes?O("v-if",!0):(p(),g("div",Qbt,[n[3]||(n[3]=f("span",{class:"absolute i-lucide-search size-3.5 top-2 left-3"},null,-1)),ce(f("input",{"onUpdate:modelValue":n[0]||(n[0]=o=>e.searchQuery=o),type:"search",placeholder:e.t("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.SEARCH_PLACEHOLDER"),class:"w-full h-8 py-2 pl-10 pr-2 text-sm reset-base outline-none border-none rounded-lg bg-n-alpha-black2 dark:bg-n-solid-1 text-n-slate-12"},null,8,Jbt),[[Et,e.searchQuery]])])),e.filteredUnusedAttributes.length===0&&!e.hasNoUnusedAttributes?(p(),g("div",evt,[f("p",tvt,C(e.t("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.NO_ATTRIBUTES")),1)])):O("v-if",!0),e.hasNoUnusedAttributes?O("v-if",!0):(p(),g("div",nvt,[(p(!0),g(de,null,Ae(e.filteredUnusedAttributes,o=>(p(),L(e.ContactCustomAttributeItem,{key:o.id,attribute:o},null,8,["attribute"]))),128))]))])])):(p(),g("p",avt,C(e.t("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.EMPTY_STATE")),1))}const ovt=G(zbt,[["render",svt],["__file","/app/app/javascript/dashboard/components-next/Contacts/ContactsSidebar/ContactCustomAttributes.vue"]]),rvt={__name:"ContactManageView",setup(t,{expose:n}){n();const a=Fe(),e=lt(),s=ft(),r=le("contacts/getContactById"),o=le("contacts/getUIFlags"),i=P("attributes"),l=P(null),c=S(()=>o.value.isFetchingItem),d=S(()=>o.value.isMerging),u=S(()=>o.value.isUpdating),m=S(()=>r.value(e.params.contactId)),h=S(()=>c.value||d.value),{t:_}=Q(),E=[{key:"ATTRIBUTES",value:"attributes"},{key:"HISTORY",value:"history"},{key:"NOTES",value:"notes"},{key:"MERGE",value:"merge"}],y=S(()=>E.map(D=>({label:_(`CONTACTS_LAYOUT.SIDEBAR.TABS.${D.key}`),value:D.value}))),b=S(()=>E.findIndex(D=>D.value===i.value)),A=()=>{var D;(D=window.history.state)!=null&&D.back||window.history.length>1?s.back():s.push(`/app/accounts/${e.params.accountId}/contacts?page=1`)},T=async()=>{e.params.contactId&&(await a.dispatch("contacts/show",{id:e.params.contactId}),await a.dispatch("contacts/fetchContactableInbox",e.params.contactId))},I=D=>{i.value=D.value},N=()=>{const{contactId:D}=e.params;D&&a.dispatch("contactNotes/get",{contactId:D})},x=()=>{const{contactId:D}=e.params;D&&a.dispatch("contactConversations/get",D)},R=()=>{a.dispatch("attributes/get")},M=async D=>{const B={success:{block:_("CONTACTS_LAYOUT.HEADER.ACTIONS.BLOCK_SUCCESS_MESSAGE"),unblock:_("CONTACTS_LAYOUT.HEADER.ACTIONS.UNBLOCK_SUCCESS_MESSAGE")},error:{block:_("CONTACTS_LAYOUT.HEADER.ACTIONS.BLOCK_ERROR_MESSAGE"),unblock:_("CONTACTS_LAYOUT.HEADER.ACTIONS.UNBLOCK_ERROR_MESSAGE")}};try{await a.dispatch("contacts/update",{...m.value,blocked:!D}),Z(D?B.success.unblock:B.success.block)}catch{Z(D?B.error.unblock:B.error.block)}};Pe(()=>{T(),N(),x(),R()});const w={store:a,route:e,router:s,contact:r,uiFlags:o,activeTab:i,contactMergeRef:l,isFetchingItem:c,isMergingContact:d,isUpdatingContact:u,selectedContact:m,showSpinner:h,t:_,CONTACT_TABS_OPTIONS:E,tabs:y,activeTabIndex:b,goToContactsList:A,fetchActiveContact:T,handleTabChange:I,fetchContactNotes:N,fetchContactConversations:x,fetchAttributes:R,toggleContactBlock:M,onMounted:Pe,computed:S,ref:P,get useI18n(){return Q},get useAlert(){return Z},get useStore(){return Fe},get useMapGetter(){return le},get useRoute(){return lt},get useRouter(){return ft},ContactsDetailsLayout:R_t,Spinner:$n,ContactDetails:egt,TabBar:ogt,ContactNotes:fgt,ContactHistory:ebt,ContactMerge:Ibt,ContactCustomAttributes:ovt};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}},ivt={class:"flex flex-col justify-between flex-1 h-full m-0 overflow-auto bg-n-background"},lvt={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},cvt={class:"px-6"},dvt={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"};function uvt(t,n,a,e,s,r){return p(),g("div",ivt,[v(e.ContactsDetailsLayout,{"button-label":t.$t("CONTACTS_LAYOUT.HEADER.SEND_MESSAGE"),"selected-contact":e.selectedContact,"is-detail-view":"","show-pagination-footer":!1,"is-updating":e.isUpdatingContact,onGoToContactsList:e.goToContactsList,onToggleBlock:e.toggleContactBlock},{sidebar:z(()=>[f("div",cvt,[v(e.TabBar,{tabs:e.tabs,"initial-active-tab":e.activeTabIndex,class:"w-full [&>button]:w-full bg-n-alpha-black2",onTabChanged:e.handleTabChange},null,8,["tabs","initial-active-tab"])]),e.isFetchingItem?(p(),g("div",dvt,[v(e.Spinner)])):(p(),g(de,{key:1},[e.activeTab==="attributes"?(p(),L(e.ContactCustomAttributes,{key:0,"selected-contact":e.selectedContact},null,8,["selected-contact"])):O("v-if",!0),e.activeTab==="notes"?(p(),L(e.ContactNotes,{key:1})):O("v-if",!0),e.activeTab==="history"?(p(),L(e.ContactHistory,{key:2})):O("v-if",!0),e.activeTab==="merge"?(p(),L(e.ContactMerge,{key:3,ref:"contactMergeRef","selected-contact":e.selectedContact,onGoToContactsList:e.goToContactsList,onResetTab:n[0]||(n[0]=o=>e.handleTabChange(e.CONTACT_TABS_OPTIONS[0]))},null,8,["selected-contact"])):O("v-if",!0)],64))]),default:z(()=>[e.showSpinner?(p(),g("div",lvt,[v(e.Spinner)])):e.selectedContact?(p(),L(e.ContactDetails,{key:1,"selected-contact":e.selectedContact,onGoToContactsList:e.goToContactsList},null,8,["selected-contact"])):O("v-if",!0)]),_:1},8,["button-label","selected-contact","is-updating"])])}const mf=G(rvt,[["render",uvt],["__file","/app/app/javascript/dashboard/routes/dashboard/contacts/pages/ContactManageView.vue"]]),pvt={__name:"ContactsKanbanView",setup(t,{expose:n}){n();const a=Bn(),e=ft(),s=S(()=>a.getters["contacts/getContacts"]),r=S(()=>a.getters["contacts/getUIFlags"]),o=c=>{e.push({name:"contacts_dashboard",params:{contactId:c.id}})},i=async()=>{try{await a.dispatch("contacts/get")}catch(c){console.error("Error loading contacts:",c)}};Pe(()=>{i()});const l={store:a,router:e,contacts:s,uiFlags:r,handleContactClick:o,loadContacts:i,computed:S,onMounted:Pe,get useStore(){return Bn},get useRouter(){return ft},KanbanBoard:oP};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}},fvt={class:"contacts-kanban-view h-full"};function mvt(t,n,a,e,s,r){return p(),g("div",fvt,[v(e.KanbanBoard,{"board-type":"contact",items:e.contacts,onItemClick:e.handleContactClick},null,8,["items"])])}const hvt=G(pvt,[["render",mvt],["__scopeId","data-v-d86654ce"],["__file","/app/app/javascript/dashboard/routes/dashboard/contacts/pages/ContactsKanbanView.vue"]]),rr={featureFlag:pt.CRM,permissions:["administrator","agent","contact_manage"]},_vt=[{path:vt("accounts/:accountId/contacts/kanban"),name:"contacts_kanban",component:hvt,meta:rr},{path:vt("accounts/:accountId/contacts"),component:qd,meta:rr,children:[{path:"",name:"contacts_dashboard_index",component:qd,meta:rr},{path:"segments/:segmentId",name:"contacts_dashboard_segments_index",component:qd,meta:rr},{path:"labels/:label",name:"contacts_dashboard_labels_index",component:qd,meta:rr},{path:"active",name:"contacts_dashboard_active",component:qd,meta:rr}]},{path:vt("accounts/:accountId/contacts/:contactId"),component:mf,meta:rr,children:[{path:"",name:"contacts_edit",component:mf,meta:rr},{path:"segments/:segmentId",name:"contacts_edit_segment",component:mf,meta:rr},{path:"labels/:label",name:"contacts_edit_label",component:mf,meta:rr}]}],gvt={components:{Avatar:qt,Spinner:ls,EmptyState:Id,NextButton:Se},props:{notifications:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1},isUpdating:{type:Boolean,default:!1},onClickNotification:{type:Function,default:()=>{}},onMarkAllDoneClick:{type:Function,default:()=>{}}},computed:{..._t({notificationMetadata:"notifications/getMeta"}),showEmptyResult(){return!this.isLoading&&this.notifications.length===0}},methods:{dynamicTime:kn}},bvt={class:"flex-grow flex-shrink h-full px-4 py-8 overflow-hidden bg-n-background"},vvt={class:"flex w-full items-center justify-between gap-2 mb-4"},Evt={class:"text-xl font-medium text-n-slate-12"},Svt={class:"notifications-table overflow-auto"},Tvt=["onClick"],Avt={class:"p-2.5 text-n-slate-12"},yvt={class:"overflow-hidden flex-view notification-contant--wrap whitespace-nowrap text-ellipsis"},Ivt={class:"notification--title"},Cvt={class:"overflow-hidden notification--message-title whitespace-nowrap text-ellipsis"},Ovt={class:"text-right"},Nvt={class:"notification--type"},xvt={class:"thumbnail--column"},Rvt={class:"text-right timestamp--column ltr:mr-2 rtl:ml-2"},wvt={class:"notification--created-at"},Mvt={key:0,class:"notification--unread-indicator"},Lvt={key:1,class:"notifications--loader"};function Dvt(t,n,a,e,s,r){const o=H("NextButton"),i=H("Avatar"),l=H("EmptyState"),c=H("Spinner");return p(),g("section",bvt,[f("div",vvt,[f("h6",Evt,C(t.$t("NOTIFICATIONS_PAGE.HEADER")),1),t.notificationMetadata.unreadCount?(p(),L(o,{key:0,type:"submit",sm:"",label:t.$t("NOTIFICATIONS_PAGE.MARK_ALL_DONE"),"is-loading":a.isUpdating,onClick:a.onMarkAllDoneClick},null,8,["label","is-loading","onClick"])):O("v-if",!0)]),f("table",Svt,[ce(f("tbody",null,[(p(!0),g(de,null,Ae(a.notifications,d=>(p(),g("tr",{key:d.id,class:oe([{"is-unread":d.read_at===null},"border-b border-n-weak"]),onClick:()=>a.onClickNotification(d)},[f("td",Avt,[f("div",yvt,[f("h5",Ivt,C(`#${d.primary_actor?d.primary_actor.id:t.$t("NOTIFICATIONS_PAGE.DELETE_TITLE")}`),1),f("span",Cvt,C(d.push_message_title),1)])]),f("td",Ovt,[f("span",Nvt,C(t.$t(`NOTIFICATIONS_PAGE.TYPE_LABEL.${d.notification_type}`)),1)]),f("td",xvt,[d.primary_actor.meta.assignee?(p(),L(i,{key:0,src:d.primary_actor.meta.assignee.thumbnail,size:28,name:d.primary_actor.meta.assignee.name,"rounded-full":""},null,8,["src","name"])):O("v-if",!0)]),f("td",null,[f("div",Rvt,[f("span",wvt,C(r.dynamicTime(d.last_activity_at)),1)])]),f("td",null,[d.read_at?O("v-if",!0):(p(),g("div",Mvt))])],10,Tvt))),128))],512),[[En,!a.isLoading]])]),r.showEmptyResult?(p(),L(l,{key:0,title:t.$t("NOTIFICATIONS_PAGE.LIST.404")},null,8,["title"])):O("v-if",!0),a.isLoading?(p(),g("div",Lvt,[v(c),f("span",null,C(t.$t("NOTIFICATIONS_PAGE.LIST.LOADING_MESSAGE")),1)])):O("v-if",!0)])}const Pvt=G(gvt,[["render",Dvt],["__scopeId","data-v-b459ea9f"],["__file","/app/app/javascript/dashboard/routes/dashboard/notifications/components/NotificationTable.vue"]]),kvt={components:{NotificationTable:Pvt,TableFooter:RS},computed:{..._t({accountId:"getCurrentAccountId",meta:"notifications/getMeta",records:"notifications/getNotifications",uiFlags:"notifications/getUIFlags"})},mounted(){this.$store.dispatch("notifications/get",{page:1})},methods:{onPageChange(t){window.history.pushState({},null,`${this.$route.path}?page=${t}`),this.$store.dispatch("notifications/get",{page:t})},openConversation(t){const{primary_actor_id:n,primary_actor_type:a,primary_actor:{id:e},notification_type:s}=t;Nt(Ou.OPEN_CONVERSATION_VIA_NOTIFICATION,{notificationType:s}),this.$store.dispatch("notifications/read",{id:t.id,primaryActorId:n,primaryActorType:a,unreadCount:this.meta.unreadCount}),this.$router.push(`/app/accounts/${this.accountId}/conversations/${e}`)},onMarkAllDoneClick(){Nt(Ou.MARK_AS_READ_NOTIFICATIONS),this.$store.dispatch("notifications/readAll")}}},Bvt={class:"h-full overflow-y-auto"},Fvt={class:"flex flex-col h-full"};function Uvt(t,n,a,e,s,r){const o=H("NotificationTable"),i=H("TableFooter");return p(),g("div",Bvt,[f("div",Fvt,[v(o,{notifications:t.records,"is-loading":t.uiFlags.isFetching,"is-updating":t.uiFlags.isUpdating,"on-click-notification":r.openConversation,"on-mark-all-done-click":r.onMarkAllDoneClick},null,8,["notifications","is-loading","is-updating","on-click-notification","on-mark-all-done-click"]),v(i,{class:"border-t border-n-weak","current-page":Number(t.meta.currentPage),"total-count":t.meta.count,"page-size":15,onPageChange:r.onPageChange},null,8,["current-page","total-count","onPageChange"])])])}const $vt=G(kvt,[["render",Uvt],["__file","/app/app/javascript/dashboard/routes/dashboard/notifications/components/NotificationsView.vue"]]),Gvt=[{path:vt("accounts/:accountId/notifications"),component:sp,props:{headerTitle:"",icon:"",showNewButton:!1},children:[{path:"",name:"notifications_index",component:$vt,meta:{permissions:["administrator","agent","custom_role"]}}]}],HN={CONVERSATION_MENTION:["i-lucide-at-sign","text-n-blue-text"],CONVERSATION_ASSIGNMENT:["i-lucide-chevrons-right","text-n-blue-text"],CONVERSATION_CREATION:["i-lucide-mail-plus","text-n-blue-text"],PARTICIPATING_CONVERSATION_NEW_MESSAGE:["i-lucide-message-square-plus","text-n-blue-text"],ASSIGNED_CONVERSATION_NEW_MESSAGE:["i-lucide-message-square-plus","text-n-blue-text"],SLA_MISSED_FIRST_RESPONSE:["i-lucide-heart-crack","text-n-ruby-11"],SLA_MISSED_NEXT_RESPONSE:["i-lucide-heart-crack","text-n-ruby-11"],SLA_MISSED_RESOLUTION:["i-lucide-heart-crack","text-n-ruby-11"]},Vvt={__name:"InboxContextMenu",props:{contextMenuPosition:{type:Object,default:()=>({})},menuItems:{type:Array,default:()=>[]}},emits:["close","selectAction"],setup(t,{expose:n,emit:a}){n();const e=a,s=()=>{e("close")},o={emit:e,handleClose:s,onMenuItemClick:i=>{e("selectAction",i),s()},ContextMenu:h1,MenuItem:m1};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},Hvt={class:"p-1 rounded-md shadow-xl bg-n-alpha-3/50 backdrop-blur-[100px] outline-1 outline outline-n-weak/50"};function jvt(t,n,a,e,s,r){return p(),L(e.ContextMenu,{x:a.contextMenuPosition.x,y:a.contextMenuPosition.y,onClose:e.handleClose},{default:z(()=>[f("div",Hvt,[(p(!0),g(de,null,Ae(a.menuItems,o=>(p(),L(e.MenuItem,{key:o.key,option:o,variant:"icon",class:"!w-48",onClick:Ve(i=>e.onMenuItemClick(o.key),["stop"])},null,8,["option","onClick"]))),128))])]),_:1},8,["x","y"])}const Wvt=G(Vvt,[["render",jvt],["__file","/app/app/javascript/dashboard/routes/dashboard/inbox/components/InboxContextMenu.vue"]]),zvt={__name:"InboxCard",props:{inboxItem:{type:Object,default:()=>({})},stateInbox:{type:Object,default:()=>({})}},emits:["click","contextMenuOpen","contextMenuClose","markNotificationAsRead","markNotificationAsUnRead","deleteNotification"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=P(!1),i=P({x:null,y:null}),l=P(null),c={emphasis:"text-sm font-medium text-n-slate-11",emphasisUnread:"text-sm font-medium text-n-slate-12",normal:"text-sm font-normal text-n-slate-11",normalUnread:"text-sm text-n-slate-12"},d=S(()=>{var k;return(k=e.inboxItem)==null?void 0:k.primaryActor}),u=S(()=>{var k;return(k=d.value)==null?void 0:k.meta}),m=S(()=>{var k;return(k=u.value)==null?void 0:k.sender}),h=S(()=>{var k;return!((k=e.inboxItem)!=null&&k.readAt)}),_=S(()=>e.stateInbox),E=S(()=>{const{channelType:k,medium:V}=_.value;return vs(k,V)}),y=S(()=>{var k,V;return((k=l.value)==null?void 0:k.hasSlaThreshold)&&((V=d.value)==null?void 0:V.slaPolicyId)}),b=S(()=>{var V;const k=(V=e.inboxItem)==null?void 0:V.lastActivityAt;return k?Rl(kn(k)):""}),A=S(()=>[{key:h.value?"mark_as_read":"mark_as_unread",icon:h.value?"mail":"mail-unread",label:r(`INBOX.MENU_ITEM.MARK_AS_${h.value?"READ":"UNREAD"}`)},{key:"delete",icon:"delete",label:r("INBOX.MENU_ITEM.DELETE")}]),T=S(()=>({emphasis:h.value?c.emphasisUnread:c.emphasis,normal:h.value?c.normalUnread:c.normal})),I=k=>k.startsWith(": ")?k.slice(2):k.replace(/^([^:]+):/g,(V,F)=>`<span class="${T.value.emphasis}">${F}:</span>`),N=S(()=>{var V;const k=`<span class="${T.value.normal}">${I(((V=e.inboxItem)==null?void 0:V.pushMessageBody)||"")}</span>`;return h.value?`<span class="inline-flex flex-shrink-0 w-2 h-2 mb-px rounded-full bg-n-iris-10 ltr:mr-1 rtl:ml-1"></span> ${k}`:k}),x=S(()=>{var $,Y;const k=((Y=($=e.inboxItem)==null?void 0:$.notificationType)==null?void 0:Y.toUpperCase())||"",[V="",F="text-n-blue-text"]=HN[k]||[];return{text:k?r(`INBOX.TYPES_NEXT.${k}`):"",icon:V,color:F}}),R=S(()=>{const{snoozedUntil:k}=e.inboxItem;return k?tO(kn(eO(k))):null}),M=S(()=>{var k,V;return(V=(k=e.inboxItem)==null?void 0:k.meta)==null?void 0:V.lastSnoozedAt}),w=S(()=>M.value?r("INBOX.TYPES_NEXT.SNOOZED_ENDS"):r("INBOX.TYPES_NEXT.SNOOZED_UNTIL",{time:Rl(R.value)})),D={close:()=>{o.value=!1,i.value={x:null,y:null},s("contextMenuClose")},open:k=>{k.preventDefault(),i.value={x:k.pageX||k.clientX,y:k.pageY||k.clientY},o.value=!0,s("contextMenuOpen")},handle:k=>{var F;const V={mark_as_read:()=>s("markNotificationAsRead",e.inboxItem),mark_as_unread:()=>s("markNotificationAsUnRead",e.inboxItem),delete:()=>s("deleteNotification",e.inboxItem)};(F=V[k])==null||F.call(V)}};jc(D.close);const B={props:e,emit:s,t:r,isContextMenuOpen:o,contextMenuPosition:i,slaCardLabel:l,getMessageClasses:c,primaryActor:d,meta:u,assigneeMeta:m,isUnread:h,inbox:_,inboxIcon:E,hasSlaThreshold:y,lastActivityAt:b,menuItems:A,messageClasses:T,formatPushMessage:I,formattedMessage:N,notificationDetails:x,snoozedUntilTime:R,hasLastSnoozed:M,snoozedText:w,contextMenuActions:D,computed:S,ref:P,onBeforeMount:jc,get useI18n(){return Q},get getInboxIconByType(){return vs},get dynamicTime(){return kn},get shortTimestamp(){return Rl},get snoozedReopenTimeToTimestamp(){return eO},get shortenSnoozeTime(){return tO},get NOTIFICATION_TYPES_MAPPING(){return HN},Icon:Bt,Avatar:qt,CardPriorityIcon:C1,SLACardLabel:uP,InboxContextMenu:Wvt};return Object.defineProperty(B,"__isScriptSetup",{enumerable:!1,value:!0}),B}},Yvt={class:"flex items-start gap-2"},Kvt={class:"mb-0 line-clamp-2"},Xvt={class:"flex items-center justify-between h-6 gap-2"},qvt={class:"flex items-center flex-1 min-w-0 gap-1"},Zvt={key:0,class:"flex items-center w-full min-w-0 gap-2 ltr:pl-1 rtl:pr-1"},Qvt={key:1,class:"flex items-center w-full min-w-0 gap-2 ltr:pl-1 rtl:pr-1"},Jvt={class:"flex items-center flex-shrink-0 gap-2"},eEt={key:0,class:"w-px h-3 rounded-sm bg-n-slate-4"},tEt={key:2,class:"flex items-center justify-center flex-shrink-0 rounded-full bg-n-alpha-2 size-4"},nEt={class:"text-xs text-n-slate-10"};function aEt(t,n,a,e,s,r){var l,c,d;const o=nt("dompurify-html"),i=nt("tooltip");return p(),g("div",{role:"button",class:"flex flex-col w-full gap-1 p-3 transition-all duration-300 ease-in-out cursor-pointer",onContextmenu:n[0]||(n[0]=u=>e.contextMenuActions.open(u)),onClick:n[1]||(n[1]=u=>e.emit("click"))},[f("div",Yvt,[v(e.Avatar,{name:e.assigneeMeta.name,src:e.assigneeMeta.thumbnail,size:20,"rounded-full":"",class:"mt-1"},null,8,["name","src"]),ce(f("p",Kvt,null,512),[[o,e.formattedMessage]])]),f("div",Xvt,[f("div",qvt,[e.snoozedUntilTime||e.hasLastSnoozed?(p(),g("div",Zvt,[v(e.Icon,{icon:e.hasLastSnoozed?"i-lucide-alarm-clock-off":"i-lucide-alarm-clock-plus",class:oe(["flex-shrink-0 size-4",e.isUnread?"text-n-blue-text":"text-n-slate-11"])},null,8,["icon","class"]),f("span",{class:oe(["text-xs font-medium truncate",e.isUnread?"text-n-blue-text":"text-n-slate-11"])},C(e.snoozedText),3)])):e.notificationDetails.text?(p(),g("div",Qvt,[v(e.Icon,{icon:e.notificationDetails.icon,class:oe([e.isUnread?e.notificationDetails.color:"text-n-slate-11","flex-shrink-0 size-4"])},null,8,["icon","class"]),f("span",{class:oe(["text-xs font-medium truncate",e.isUnread?e.notificationDetails.color:"text-n-slate-11"])},C(e.notificationDetails.text),3)])):O("v-if",!0)]),f("div",Jvt,[ce(v(e.SLACardLabel,{ref:"slaCardLabel",conversation:e.primaryActor,class:oe(["[&>span]:text-xs",!e.isUnread&&"[&>span]:text-n-slate-11 [&>div>svg]:fill-n-slate-11"])},null,8,["conversation","class"]),[[En,e.hasSlaThreshold]]),e.hasSlaThreshold?(p(),g("div",eEt)):O("v-if",!0),(l=e.primaryActor)!=null&&l.priority?(p(),L(e.CardPriorityIcon,{key:1,priority:(c=e.primaryActor)==null?void 0:c.priority,class:"[&>svg]:size-4"},null,8,["priority"])):O("v-if",!0),e.inboxIcon?ce((p(),g("div",tEt,[v(e.Icon,{icon:e.inboxIcon,class:"flex-shrink-0 text-n-slate-11 size-2.5"},null,8,["icon"])])),[[i,(d=e.inbox)==null?void 0:d.name,void 0,{left:!0}]]):O("v-if",!0),f("span",nEt,C(e.lastActivityAt),1)])]),e.isContextMenuOpen?(p(),L(e.InboxContextMenu,{key:0,"context-menu-position":e.contextMenuPosition,"menu-items":e.menuItems,onClose:e.contextMenuActions.close,onSelectAction:e.contextMenuActions.handle},null,8,["context-menu-position","menu-items","onClose","onSelectAction"])):O("v-if",!0)],32)}const sEt=G(zvt,[["render",aEt],["__file","/app/app/javascript/dashboard/components-next/Inbox/InboxCard.vue"]]),oEt={__name:"MenuItem",props:{label:{type:String,default:""}},setup(t,{expose:n}){n();const a={};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},rEt={role:"button",class:"flex items-center w-full h-8 px-2 py-1 rounded-md cursor-pointer hover:text-n-blue-text min-w-0"},iEt={class:"text-xs font-medium truncate text-n-slate-12"};function lEt(t,n,a,e,s,r){return p(),g("div",rEt,[f("span",iEt,C(a.label),1)])}const cEt=G(oEt,[["render",lEt],["__file","/app/app/javascript/dashboard/routes/dashboard/inbox/components/MenuItem.vue"]]),dEt={components:{MenuItem:cEt},emits:["optionClick"],data(){return{menuItems:[{key:"mark_all_read",label:this.$t("INBOX.MENU_ITEM.MARK_ALL_READ")},{key:"delete_all",label:this.$t("INBOX.MENU_ITEM.DELETE_ALL")},{key:"delete_all_read",label:this.$t("INBOX.MENU_ITEM.DELETE_ALL_READ")}]}},methods:{onClick(t){this.$emit("optionClick",t)}}},uEt={class:"z-50 flex flex-col max-w-64 min-w-40 gap-1 bg-n-alpha-3 backdrop-blur-[100px] divide-y py-2 px-2 outline outline-1 outline-n-container shadow-lg rounded-xl divide-n-weak dark:divide-n-strong"},pEt={class:"flex flex-col"};function fEt(t,n,a,e,s,r){const o=H("MenuItem");return p(),g("div",uEt,[f("div",pEt,[(p(!0),g(de,null,Ae(s.menuItems,i=>(p(),L(o,{key:i.key,label:i.label,onClick:Ve(l=>r.onClick(i.key),["stop"])},null,8,["label","onClick"]))),128))])])}const mEt=G(dEt,[["render",fEt],["__file","/app/app/javascript/dashboard/routes/dashboard/inbox/components/InboxOptionMenu.vue"]]),hEt={components:{NextButton:Se},emits:["filter"],setup(){const{uiSettings:t,updateUISettings:n}=Ct();return{uiSettings:t,updateUISettings:n}},data(){return{showSortMenu:!1,displayOptions:[{name:this.$t("INBOX.DISPLAY_MENU.DISPLAY_OPTIONS.SNOOZED"),key:gt.INBOX_DISPLAY_BY.SNOOZED,selected:!1,type:gt.INBOX_FILTER_TYPE.STATUS},{name:this.$t("INBOX.DISPLAY_MENU.DISPLAY_OPTIONS.READ"),key:gt.INBOX_DISPLAY_BY.READ,selected:!1,type:gt.INBOX_FILTER_TYPE.TYPE}],sortOptions:[{name:this.$t("INBOX.DISPLAY_MENU.SORT_OPTIONS.NEWEST"),key:gt.INBOX_SORT_BY.NEWEST,type:gt.INBOX_FILTER_TYPE.SORT_ORDER},{name:this.$t("INBOX.DISPLAY_MENU.SORT_OPTIONS.OLDEST"),key:gt.INBOX_SORT_BY.OLDEST,type:gt.INBOX_FILTER_TYPE.SORT_ORDER}],activeSort:gt.INBOX_SORT_BY.NEWEST,activeDisplayFilter:{status:"",type:""}}},computed:{activeSortOption(){var t;return((t=this.sortOptions.find(n=>n.key===this.activeSort))==null?void 0:t.name)||""}},mounted(){this.setSavedFilter()},methods:{updateDisplayOption(t){this.displayOptions.forEach(n=>{n.key===t.key&&(n.selected=!t.selected,this.activeDisplayFilter[n.type]=n.selected?n.key:"",this.saveSelectedDisplayFilter(),this.$emit("filter",t))})},openSortMenu(){this.showSortMenu=!this.showSortMenu},onSortOptionClick(t){this.activeSort=t.key,this.showSortMenu=!1,this.saveSelectedDisplayFilter(),this.$emit("filter",t)},saveSelectedDisplayFilter(){this.updateUISettings({inbox_filter_by:{...this.activeDisplayFilter,sort_by:this.activeSort||gt.INBOX_SORT_BY.NEWEST}})},setSavedFilter(){const{inbox_filter_by:t={}}=this.uiSettings,{status:n,type:a,sort_by:e}=t;this.activeSort=e||gt.INBOX_SORT_BY.NEWEST,this.displayOptions.forEach(s=>{s.selected=s.type===gt.INBOX_FILTER_TYPE.STATUS?s.key===n:s.key===a,this.activeDisplayFilter[s.type]=s.selected?s.key:""})}}},_Et={class:"flex flex-col bg-n-alpha-3 backdrop-blur-[100px] border-0 outline outline-1 outline-n-container shadow-lg z-50 max-w-64 min-w-[170px] w-fit rounded-xl divide-y divide-n-weak dark:divide-n-strong"},gEt={class:"flex items-center gap-2 justify-between p-3 rounded-t-lg h-11"},bEt={class:"flex gap-1.5 min-w-0"},vEt={class:"text-xs font-medium text-n-slate-12 truncate min-w-0"},EEt={class:"relative"},SEt={key:0,class:"absolute flex flex-col gap-0.5 bg-n-alpha-3 backdrop-blur-[100px] z-60 rounded-lg p-0.5 w-fit min-w-20 max-w-32 top-px outline outline-1 outline-n-container dark:outline-n-strong"},TEt=["onClick"],AEt={key:0,class:"i-lucide-check size-2.5 flex-shrink-0 text-n-blue-text"},yEt={class:"px-3 py-4 text-xs font-medium text-n-slate-11"},IEt={class:"flex flex-col divide-y divide-n-weak dark:divide-n-strong"},CEt=["id","name","checked","onChange"],OEt=["for"];function NEt(t,n,a,e,s,r){const o=H("NextButton"),i=nt("on-clickaway");return p(),g("div",_Et,[f("div",gEt,[f("div",bEt,[n[0]||(n[0]=f("span",{class:"i-lucide-arrow-down-up size-3.5 text-n-slate-12"},null,-1)),f("span",vEt,C(t.$t("INBOX.DISPLAY_MENU.SORT")),1)]),ce((p(),g("div",EEt,[v(o,{label:r.activeSortOption,icon:"i-lucide-chevron-down",slate:"","trailing-icon":"",xs:"",outline:"",class:"w-fit min-w-20 max-w-32",onClick:r.openSortMenu},null,8,["label","onClick"]),s.showSortMenu?(p(),g("div",SEt,[(p(!0),g(de,null,Ae(s.sortOptions,l=>(p(),g("div",{key:l.key,role:"button",class:oe(["flex rounded-md h-5 w-full items-center justify-between px-1.5 py-0.5 gap-2 whitespace-nowrap",{"bg-n-brand/10 dark:bg-n-brand/10":s.activeSort===l.key}]),onClick:Ve(c=>r.onSortOptionClick(l),["stop"])},[f("span",{class:oe(["text-xs font-medium hover:text-n-brand truncate min-w-0 dark:hover:text-n-brand",{"text-n-blue-text dark:text-n-blue-text":s.activeSort===l.key,"text-n-slate-11":s.activeSort!==l.key}])},C(l.name),3),s.activeSort===l.key?(p(),g("span",AEt)):O("v-if",!0)],10,TEt))),128))])):O("v-if",!0)])),[[i,()=>s.showSortMenu=!1]])]),f("div",null,[f("span",yEt,C(t.$t("INBOX.DISPLAY_MENU.DISPLAY")),1),f("div",IEt,[(p(!0),g(de,null,Ae(s.displayOptions,l=>(p(),g("div",{key:l.key,class:"flex items-center px-3 py-2 gap-1.5 h-9"},[f("input",{id:l.key,type:"checkbox",name:l.key,checked:l.selected,class:"m-0 border-[1.5px] shadow border-n-weak appearance-none rounded-[4px] w-4 h-4 dark:bg-n-background focus:ring-1 focus:ring-n-weak dark:focus:ring-n-strong checked:bg-n-brand dark:checked:bg-n-brand after:content-[''] after:text-white checked:after:content-[''] after:flex after:items-center after:justify-center checked:border-t checked:border-n-blue-10 checked:border-b-0 checked:border-r-0 checked:border-l-0 after:text-center after:text-xs after:font-bold after:relative after:-top-[1.5px]",onChange:c=>r.updateDisplayOption(l)},null,40,CEt),f("label",{for:l.key,class:"text-xs font-medium text-n-slate-12 !ml-0 !mr-0 dark:text-n-slate-12"},C(l.name),9,OEt)]))),128))])])])}const xEt=G(hEt,[["render",NEt],["__file","/app/app/javascript/dashboard/routes/dashboard/inbox/components/InboxDisplayMenu.vue"]]),REt={components:{NextButton:Se,InboxOptionMenu:mEt,InboxDisplayMenu:xEt},props:{isContextMenuOpen:{type:Boolean,default:!1}},emits:["redirect","filter"],data(){return{showInboxDisplayMenu:!1,showInboxOptionMenu:!1}},watch:{isContextMenuOpen:{handler(t){t&&(this.showInboxDisplayMenu=!1,this.showInboxOptionMenu=!1)},immediate:!0}},methods:{markAllRead(){Nt(Br.MARK_ALL_NOTIFICATIONS_AS_READ),this.$store.dispatch("notifications/readAll").then(()=>{Z(this.$t("INBOX.ALERTS.MARK_ALL_READ"))})},deleteAll(){this.$store.dispatch("notifications/deleteAll").then(()=>{Z(this.$t("INBOX.ALERTS.DELETE_ALL"))})},deleteAllRead(){this.$store.dispatch("notifications/deleteAllRead").then(()=>{Z(this.$t("INBOX.ALERTS.DELETE_ALL_READ"))})},openInboxDisplayMenu(){this.showInboxDisplayMenu=!this.showInboxDisplayMenu},openInboxOptionsMenu(){this.showInboxOptionMenu=!this.showInboxOptionMenu},onInboxOptionMenuClick(t){const a={mark_all_read:()=>this.markAllRead(),delete_all:()=>this.deleteAll(),delete_all_read:()=>this.deleteAllRead()}[t];a&&a(),this.$emit("redirect")},onFilterChange(t){this.$emit("filter",t),this.showInboxDisplayMenu=!1,this.$emit("redirect")}}},wEt={class:"flex items-center justify-between w-full gap-1 h-12 px-3"},MEt={class:"flex items-center gap-2 min-w-0 flex-1"},LEt={class:"min-w-0 text-base font-medium truncate text-n-slate-12"},DEt={class:"relative"},PEt={class:"relative flex items-center gap-1"};function kEt(t,n,a,e,s,r){const o=H("NextButton"),i=H("InboxDisplayMenu"),l=H("InboxOptionMenu"),c=nt("on-clickaway");return p(),g("div",wEt,[f("div",MEt,[f("h1",LEt,C(t.$t("INBOX.LIST.TITLE")),1),f("div",DEt,[v(o,{label:t.$t("INBOX.LIST.DISPLAY_DROPDOWN"),icon:"i-lucide-chevron-down","trailing-icon":"",slate:"",xs:"",faded:"",onClick:r.openInboxDisplayMenu},null,8,["label","onClick"]),s.showInboxDisplayMenu?ce((p(),L(i,{key:0,class:"absolute mt-1 top-full ltr:left-0 rtl:right-0",onFilter:r.onFilterChange},null,8,["onFilter"])),[[c,r.openInboxDisplayMenu]]):O("v-if",!0)])]),f("div",PEt,[v(o,{icon:"i-lucide-sliders-vertical",slate:"",xs:"",faded:"",onClick:r.openInboxOptionsMenu},null,8,["onClick"]),s.showInboxOptionMenu?ce((p(),L(l,{key:0,class:"absolute top-full mt-1 ltr:right-0 ltr:lg:right-[unset] rtl:left-0 rtl:lg:left-[unset]",onOptionClick:r.onInboxOptionMenuClick},null,8,["onOptionClick"])),[[c,r.openInboxOptionsMenu]]):O("v-if",!0)])])}const BEt=G(REt,[["render",kEt],["__file","/app/app/javascript/dashboard/routes/dashboard/inbox/components/InboxListHeader.vue"]]),FEt={__name:"InboxList",setup(t,{expose:n}){n();const{t:a}=Q(),e=lt(),s=ft(),r=Fe(),{uiSettings:o}=Ct(),i=P(null),l=P(1),c=P(""),d=P(""),u=P(gt.INBOX_SORT_BY.NEWEST),m=P(!1),h=S(()=>({root:i.value,rootMargin:"100px 0px 100px 0px"})),_=le("notifications/getMeta"),E=le("notifications/getUIFlags"),y=le("notifications/getFilteredNotificationsV4"),b=le("inboxes/getInboxById"),A=S(()=>Number(e.params.id)),T=S(()=>({page:l.value,status:c.value,type:d.value,sortOrder:u.value})),I=S(()=>y.value(T.value)),N=S(()=>E.value.isAllNotificationsLoaded&&!E.value.isFetching),x=S(()=>!E.value.isFetching&&!I.value.length),R=J=>b.value(J),M=()=>{l.value=1,r.dispatch("notifications/clear");const J=T.value;r.dispatch("notifications/index",J)},w=()=>{var te;const J=(te=i.value)==null?void 0:te.querySelector(".inbox-card.active");J==null||J.scrollIntoView({block:"center",behavior:"smooth"})},D=()=>{e.name!=="inbox_view"&&s.replace({name:"inbox_view"})},B=()=>{E.value.isAllNotificationsLoaded||(l.value+=1,r.dispatch("notifications/index",{page:l.value,status:c.value,type:d.value,sortOrder:u.value}))},k=async J=>{Nt(Br.MARK_NOTIFICATION_AS_READ);const{id:te,primaryActorId:q,primaryActorType:K}=J;try{await r.dispatch("notifications/read",{id:te,primaryActorId:q,primaryActorType:K,unreadCount:_.value.unreadCount}),Z(a("INBOX.ALERTS.MARK_AS_READ")),r.dispatch("notifications/unReadCount")}catch{}},V=async J=>{Nt(Br.MARK_NOTIFICATION_AS_UNREAD),D();const{id:te}=J;try{await r.dispatch("notifications/unread",{id:te}),Z(a("INBOX.ALERTS.MARK_AS_UNREAD")),r.dispatch("notifications/unReadCount")}catch{}},F=async J=>{Nt(Br.DELETE_NOTIFICATION),D();try{await r.dispatch("notifications/delete",{notification:J,unread_count:_.value.unreadCount,count:_.value.count}),Z(a("INBOX.ALERTS.DELETE"))}catch{}},$=J=>{const{STATUS:te,TYPE:q,SORT_ORDER:K}=gt.INBOX_FILTER_TYPE;J.type===te&&(c.value=J.selected?J.key:""),J.type===q&&(d.value=J.selected?J.key:""),J.type===K&&(u.value=J.key),M()},Y=()=>{const{inbox_filter_by:J={}}=o.value,{status:te,type:q,sort_by:K}=J;c.value=te,d.value=q,u.value=K||gt.INBOX_SORT_BY.NEWEST,r.dispatch("notifications/setNotificationFilters",T.value)},j=async J=>{const{id:te,primaryActorId:q,primaryActorType:K,primaryActor:{inboxId:W,id:ee},notificationType:ae}=J;if(e.params.id!==String(ee)){Nt(Br.OPEN_CONVERSATION_VIA_INBOX,{notificationType:ae});try{await r.dispatch("notifications/read",{id:te,primaryActorId:q,primaryActorType:K,unreadCount:_.value.unreadCount}),r.dispatch("notifications/unReadCount"),s.push({name:"inbox_view_conversation",params:{inboxId:W,type:"conversation",id:ee}})}catch{}}};je(T,(J,te)=>{J!==te&&r.dispatch("notifications/updateNotificationFilters",J)},{deep:!0}),je(A,()=>{At(w)}),Pe(()=>{w(),Y(),M()});const U={t:a,route:e,router:s,store:r,uiSettings:o,notificationList:i,page:l,status:c,type:d,sortOrder:u,isInboxContextMenuOpen:m,infiniteLoaderOptions:h,meta:_,uiFlags:E,records:y,inboxById:b,currentConversationId:A,inboxFilters:T,notifications:I,showEndOfList:N,showEmptyState:x,stateInbox:R,fetchNotifications:M,scrollActiveIntoView:w,redirectToInbox:D,loadMoreNotifications:B,markNotificationAsRead:k,markNotificationAsUnRead:V,deleteNotification:F,onFilterChange:$,setSavedFilter:Y,openConversation:j,computed:S,ref:P,watch:je,onMounted:Pe,nextTick:At,get useI18n(){return Q},get useRoute(){return lt},get useRouter(){return ft},get useStore(){return Fe},get useMapGetter(){return le},get useAlert(){return Z},get useTrack(){return Nt},get useUISettings(){return Ct},get wootConstants(){return gt},get INBOX_EVENTS(){return Br},InboxCard:sEt,InboxListHeader:BEt,IntersectionObserver:iD,CmdBarConversationSnooze:WD,Spinner:$n};return Object.defineProperty(U,"__isScriptSetup",{enumerable:!1,value:!0}),U}},UEt={class:"flex w-full h-full bg-n-solid-1"},$Et={ref:"notificationList",class:"flex flex-col gap-0.5 w-full h-[calc(100%-56px)] pb-4 overflow-x-hidden px-2 overflow-y-auto divide-y divide-n-weak [&>*:hover]:!border-y-transparent [&>*.active]:!border-y-transparent [&>*:hover+*]:!border-t-transparent [&>*.active+*]:!border-t-transparent"},GEt={key:0,class:"flex justify-center my-4"},VEt={key:1,class:"p-4 text-sm font-medium text-center text-n-slate-10"};function HEt(t,n,a,e,s,r){const o=H("router-view");return p(),g("section",UEt,[f("div",{class:oe(["flex flex-col h-full w-full lg:min-w-[340px] lg:max-w-[340px] ltr:border-r rtl:border-l border-n-weak",e.currentConversationId?"hidden xl:flex":"flex"])},[v(e.InboxListHeader,{"is-context-menu-open":e.isInboxContextMenuOpen,onFilter:e.onFilterChange,onRedirect:e.redirectToInbox},null,8,["is-context-menu-open"]),f("div",$Et,[(p(!0),g(de,null,Ae(e.notifications,i=>{var l,c;return p(),L(e.InboxCard,{key:i.id,"inbox-item":i,"state-inbox":e.stateInbox((l=i.primaryActor)==null?void 0:l.inboxId),class:oe(["inbox-card rounded-none hover:rounded-lg hover:bg-n-alpha-1 dark:hover:bg-n-alpha-3",e.currentConversationId===((c=i.primaryActor)==null?void 0:c.id)?"bg-n-alpha-1 dark:bg-n-alpha-3 rounded-lg active":""]),onMarkNotificationAsRead:e.markNotificationAsRead,onMarkNotificationAsUnRead:e.markNotificationAsUnRead,onDeleteNotification:e.deleteNotification,onContextMenuOpen:n[0]||(n[0]=d=>e.isInboxContextMenuOpen=!0),onContextMenuClose:n[1]||(n[1]=d=>e.isInboxContextMenuOpen=!1),onClick:d=>e.openConversation(i)},null,8,["inbox-item","state-inbox","class","onClick"])}),128)),e.uiFlags.isFetching?(p(),g("div",GEt,[v(e.Spinner,{class:"text-n-brand"})])):O("v-if",!0),e.showEmptyState?(p(),g("p",VEt,C(t.$t("INBOX.LIST.NO_NOTIFICATIONS")),1)):O("v-if",!0),!e.showEndOfList&&!e.uiFlags.isFetching?(p(),L(e.IntersectionObserver,{key:2,options:e.infiniteLoaderOptions,onObserved:e.loadMoreNotifications},null,8,["options"])):O("v-if",!0)],512)],2),v(o),v(e.CmdBarConversationSnooze)])}const jEt=G(FEt,[["render",HEt],["__file","/app/app/javascript/dashboard/routes/dashboard/inbox/InboxList.vue"]]),WEt={components:{NextButton:Se},props:{totalLength:{type:Number,default:0},currentIndex:{type:Number,default:0}},emits:["prev","next"],computed:{isUpDisabled(){return this.currentIndex===1},isDownDisabled(){return this.currentIndex===this.totalLength||this.totalLength<=1}},methods:{handleUpClick(){this.currentIndex>1&&this.$emit("prev")},handleDownClick(){this.currentIndex<this.totalLength&&this.$emit("next")}}},zEt={class:"flex gap-2 items-center"},YEt={class:"flex gap-1 items-center"},KEt={class:"flex items-center gap-1 whitespace-nowrap"},XEt={class:"text-sm font-medium text-n-slate-12 tabular-nums"},qEt={key:0,class:"text-sm text-n-slate-9 relative -top-px"},ZEt={key:1,class:"text-sm text-n-slate-9 tabular-nums"};function QEt(t,n,a,e,s,r){const o=H("NextButton");return p(),g("div",zEt,[f("div",YEt,[v(o,{icon:"i-lucide-chevron-up",xs:"",slate:"",faded:"",disabled:r.isUpDisabled,onClick:r.handleUpClick},null,8,["disabled","onClick"]),v(o,{icon:"i-lucide-chevron-down",xs:"",slate:"",faded:"",disabled:r.isDownDisabled,onClick:r.handleDownClick},null,8,["disabled","onClick"])]),f("div",KEt,[f("span",XEt,C(a.totalLength<=1?"1":a.currentIndex),1),a.totalLength>1?(p(),g("span",qEt," / ")):O("v-if",!0),a.totalLength>1?(p(),g("span",ZEt,C(a.totalLength),1)):O("v-if",!0)])])}const JEt=G(WEt,[["render",QEt],["__file","/app/app/javascript/dashboard/routes/dashboard/inbox/components/PaginationButton.vue"]]),eSt={components:{PaginationButton:JEt,NextButton:Se,BackButton:Wl,CustomSnoozeModal:_1},props:{totalLength:{type:Number,default:0},currentIndex:{type:Number,default:0},activeNotification:{type:Object,default:null}},emits:["next","prev"],data(){return{showCustomSnoozeModal:!1}},computed:{..._t({meta:"notifications/getMeta"})},mounted(){Mt.on(lO,this.onCmdSnoozeNotification)},unmounted(){Mt.off(lO,this.onCmdSnoozeNotification)},methods:{openSnoozeNotificationModal(){document.querySelector("ninja-keys").open({parent:"snooze_notification"})},hideCustomSnoozeModal(){this.showCustomSnoozeModal=!1},async snoozeNotification(t){var n;try{await this.$store.dispatch("notifications/snooze",{id:(n=this.activeNotification)==null?void 0:n.id,snoozedUntil:t}),Z(this.$t("INBOX.ALERTS.SNOOZE"))}catch{}},onCmdSnoozeNotification(t){if(t===gt.SNOOZE_OPTIONS.UNTIL_CUSTOM_TIME)this.showCustomSnoozeModal=!0;else{const n=qm(t)||null;this.snoozeNotification(n)}},scheduleCustomSnooze(t){if(this.showCustomSnoozeModal=!1,t){const n=Co(t)||null;this.snoozeNotification(n)}},deleteNotification(){Nt(Br.DELETE_NOTIFICATION),this.$store.dispatch("notifications/delete",{notification:this.activeNotification,unread_count:this.meta.unreadCount,count:this.meta.count}).then(()=>{Z(this.$t("INBOX.ALERTS.DELETE"))}),this.$router.replace({name:"inbox_view"})},onClickNext(){this.$emit("next")},onClickPrev(){this.$emit("prev")},onClickGoToInboxList(){this.$router.replace({name:"inbox_view"})}}},tSt={class:"flex items-center justify-between w-full gap-2 border-b px-3 h-12 rtl:border-r border-n-weak flex-shrink-0"},nSt={class:"flex items-center gap-4"},aSt={class:"flex items-center gap-2"};function sSt(t,n,a,e,s,r){const o=H("BackButton"),i=H("PaginationButton"),l=H("NextButton"),c=H("CustomSnoozeModal"),d=H("woot-modal");return p(),g("div",tSt,[f("div",nSt,[v(o,{compact:"","button-label":t.$t("INBOX.ACTION_HEADER.BACK"),class:"xl:hidden flex"},null,8,["button-label"]),a.totalLength>1?(p(),L(i,{key:0,"total-length":a.totalLength,"current-index":a.currentIndex+1,onNext:r.onClickNext,onPrev:r.onClickPrev},null,8,["total-length","current-index","onNext","onPrev"])):O("v-if",!0)]),f("div",aSt,[v(l,{label:t.$t("INBOX.ACTION_HEADER.SNOOZE"),icon:"i-lucide-bell-minus",slate:"",xs:"",faded:"",class:"[&>.truncate]:hidden md:[&>.truncate]:block",onClick:r.openSnoozeNotificationModal},null,8,["label","onClick"]),v(l,{label:t.$t("INBOX.ACTION_HEADER.DELETE"),icon:"i-lucide-trash-2",slate:"",xs:"",faded:"",class:"[&>.truncate]:hidden md:[&>.truncate]:block",onClick:r.deleteNotification},null,8,["label","onClick"])]),v(d,{show:s.showCustomSnoozeModal,"onUpdate:show":n[0]||(n[0]=u=>s.showCustomSnoozeModal=u),"on-close":r.hideCustomSnoozeModal},{default:z(()=>[v(c,{onClose:r.hideCustomSnoozeModal,onChooseTime:r.scheduleCustomSnooze},null,8,["onClose","onChooseTime"])]),_:1},8,["show","on-close"])])}const oSt=G(eSt,[["render",sSt],["__file","/app/app/javascript/dashboard/routes/dashboard/inbox/components/InboxItemHeader.vue"]]),rSt={components:{Spinner:$n},props:{emptyStateMessage:{type:String,default:""}},computed:{..._t({uiFlags:"notifications/getUIFlags"}),emptyMessage(){return this.emptyStateMessage?this.emptyStateMessage:this.$t("INBOX.LIST.NOTE")}}},iSt={class:"items-center justify-center hidden w-full h-full text-center bg-n-background lg:flex"},lSt={key:0,class:"flex justify-center my-4"},cSt={key:1,class:"flex flex-col items-center gap-2"},dSt={class:"text-sm font-medium text-n-slate-11"};function uSt(t,n,a,e,s,r){const o=H("Spinner"),i=H("fluent-icon");return p(),g("div",iSt,[t.uiFlags.isFetching?(p(),g("div",lSt,[v(o,{class:"text-n-brand"})])):(p(),g("div",cSt,[v(i,{icon:"mail-inbox",size:"40",class:"text-n-slate-11"}),f("span",dSt,C(r.emptyMessage),1)]))])}const pP=G(rSt,[["render",uSt],["__file","/app/app/javascript/dashboard/routes/dashboard/inbox/InboxEmptyState.vue"]]),pSt={__name:"InboxView",setup(t,{expose:n}){n();const a=lt(),e=ft(),s=Fe(),{uiSettings:r}=Ct(),o=P(!1),i=le("notifications/getFilteredNotifications"),l=le("getSelectedChat"),c=le("getConversationById"),d=le("notifications/getUIFlags"),u=le("notifications/getMeta"),m=S(()=>Number(a.params.inboxId)),h=S(()=>Number(a.params.id)),_=S(()=>{const{inbox_filter_by:V={}}=r.value,{sort_by:F}=V;return F||"desc"}),E=S(()=>i.value({sortOrder:_.value})),y=S(()=>{var V;return(V=E.value)==null?void 0:V.find(F=>{var $;return(($=F.primary_actor)==null?void 0:$.id)===h.value})}),b=S(()=>u.value.count),A=S(()=>{var V;return!h.value||!((V=E.value)!=null&&V.length)&&d.value.isFetching}),T=S(()=>{var V;return(V=E.value)==null?void 0:V.findIndex(F=>{var $;return(($=F.primary_actor)==null?void 0:$.id)===h.value})}),I=S(()=>{if(l.value.id){const{is_contact_sidebar_open:V}=r.value;return V}return!1}),N=()=>c.value(h.value),x=async V=>{const{id:F,primary_actor_id:$,primary_actor_type:Y,primary_actor:{meta:{unreadCount:j}={},id:U},notification_type:J}=V;Nt(Br.OPEN_CONVERSATION_VIA_INBOX,{notificationType:J});try{await s.dispatch("notifications/read",{id:F,primaryActorId:$,primaryActorType:Y,unreadCount:j}),e.push({name:"inbox_view_conversation",params:{type:"conversation",id:U}})}catch{}},R=async()=>{const V=N();if(V)try{await s.dispatch("setActiveChat",{data:V}),Mt.emit(cn.SCROLL_TO_MESSAGE)}catch{}},M=async()=>{if(!h.value)return;if(s.dispatch("clearSelectedState"),N()){await R();return}o.value=!0;try{await s.dispatch("getConversation",h.value),await R()}catch{}finally{o.value=!1}},w=(V,F)=>{const $=F==="prev"&&V>0,Y=F==="next"&&V<b.value-1;if(!$&&!Y)return;const j=F==="prev"?V-1:V+1,U=E.value[j];U&&x(U)},D=()=>{w(T.value,"next")},B=()=>{w(T.value,"prev")};je(h,(V,F)=>{V!==F&&M()},{immediate:!0}),Pe(async()=>{await s.dispatch("agents/get")});const k={route:a,router:e,store:s,uiSettings:r,isConversationLoading:o,notification:i,currentChat:l,conversationById:c,uiFlags:d,meta:u,inboxId:m,conversationId:h,activeSortOrder:_,notifications:E,activeNotification:y,totalNotificationCount:b,showEmptyState:A,activeNotificationIndex:T,isContactPanelOpen:I,findConversation:N,openNotification:x,setActiveChat:R,fetchConversationById:M,navigateToConversation:w,onClickNext:D,onClickPrev:B,computed:S,ref:P,watch:je,onMounted:Pe,get useRoute(){return lt},get useRouter(){return ft},get useStore(){return Fe},get useMapGetter(){return le},get useTrack(){return Nt},get useUISettings(){return Ct},get BUS_EVENTS(){return cn},get INBOX_EVENTS(){return Br},get emitter(){return Mt},SidepanelSwitch:zD,InboxItemHeader:oSt,ConversationBox:jD,InboxEmptyState:pP,Spinner:$n,ConversationSidebar:sP};return Object.defineProperty(k,"__isScriptSetup",{enumerable:!1,value:!0}),k}},fSt={class:"h-full w-full flex-1"},mSt={key:0,class:"flex w-full h-full"},hSt={key:1,class:"flex flex-col w-full h-full"},_St={key:0,class:"flex items-center flex-1 my-4 justify-center bg-n-solid-1"},gSt={key:1,class:"flex h-[calc(100%-48px)] min-w-0"};function bSt(t,n,a,e,s,r){return p(),g("div",fSt,[e.showEmptyState?(p(),g("div",mSt,[v(e.InboxEmptyState,{"empty-state-message":t.$t("INBOX.LIST.NO_MESSAGES_AVAILABLE")},null,8,["empty-state-message"])])):(p(),g("div",hSt,[v(e.InboxItemHeader,{"total-length":e.totalNotificationCount,"current-index":e.activeNotificationIndex,"active-notification":e.activeNotification,onNext:e.onClickNext,onPrev:e.onClickPrev},null,8,["total-length","current-index","active-notification"]),e.isConversationLoading?(p(),g("div",_St,[v(e.Spinner,{class:"text-n-brand"})])):(p(),g("div",gSt,[v(e.ConversationBox,{class:"flex-1 [&.conversation-details-wrap]:!border-0","is-inbox-view":"","inbox-id":e.inboxId,"is-on-expanded-layout":!1},{default:z(()=>[e.currentChat.id?(p(),L(e.SidepanelSwitch,{key:0})):O("v-if",!0)]),_:1},8,["inbox-id"]),e.isContactPanelOpen?(p(),L(e.ConversationSidebar,{key:0,"current-chat":e.currentChat},null,8,["current-chat"])):O("v-if",!0)]))]))])}const vSt=G(pSt,[["render",bSt],["__file","/app/app/javascript/dashboard/routes/dashboard/inbox/InboxView.vue"]]),ESt=[{path:vt("accounts/:accountId/inbox-view"),component:jEt,children:[{path:"",name:"inbox_view",component:pP,meta:{permissions:[...Ua,..._s]}},{path:":type/:id",name:"inbox_view_conversation",component:vSt,meta:{permissions:[...Ua,..._s]}}]}],$o=(t="")=>{const n=t?`/${t}`:"";return vt(`accounts/:accountId/portals${n}`)},SSt={components:{NextButton:Se},data(){return{helpCenterDocsURL:gt.HELP_CENTER_DOCS_URL,upgradeFeature:[{key:1,title:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.PORTALS.TITLE"),icon:"book-copy",description:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.PORTALS.DESCRIPTION")},{key:2,title:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.LOCALES.TITLE"),icon:"globe-line",description:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.LOCALES.DESCRIPTION")},{key:3,title:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.SEO.TITLE"),icon:"heart-handshake",description:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.SEO.DESCRIPTION")},{key:4,title:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.API.TITLE"),icon:"search-check",description:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.API.DESCRIPTION")}]}},computed:{..._t({accountId:"getCurrentAccountId",isOnChatwootCloud:"globalConfig/isOnChatwootCloud"})},methods:{openBillingPage(){this.$router.push({name:"billing_settings_index",params:{accountId:this.accountId}})},openHelpCenterDocs(){window.open(this.helpCenterDocsURL,"_blank")}}},TSt={class:"flex flex-col gap-12 sm:gap-16 items-center justify-center py-0 px-4 w-full min-h-screen max-w-full overflow-auto bg-n-background"},ASt={class:"flex flex-col justify-start sm:justify-center gap-6"},ySt={class:"flex flex-col gap-1.5 items-start sm:items-center"},ISt={class:"text-n-slate-12 text-left sm:text-center text-4xl sm:text-5xl mb-6 font-semibold"},CSt={class:"max-w-2xl text-base font-normal leading-6 text-left sm:text-center text-n-slate-11"},OSt={key:0,class:"flex flex-row gap-3 justify-start items-center sm:justify-center"},NSt={class:"grid grid-cols-1 sm:grid-cols-2 gap-6 sm:gap-16 w-full max-w-2xl overflow-auto"},xSt={class:"flex gap-2 flex-row"},RSt={class:"font-semibold text-lg text-n-slate-12"},wSt={class:"text-sm leading-6 text-n-slate-12"};function MSt(t,n,a,e,s,r){const o=H("NextButton"),i=H("fluent-icon");return p(),g("div",TSt,[f("div",ASt,[f("div",ySt,[f("h1",ISt,C(t.$t("HELP_CENTER.UPGRADE_PAGE.TITLE")),1),f("p",CSt,C(t.isOnChatwootCloud?t.$t("HELP_CENTER.UPGRADE_PAGE.DESCRIPTION"):t.$t("HELP_CENTER.UPGRADE_PAGE.SELF_HOSTED_DESCRIPTION")),1)]),t.isOnChatwootCloud?(p(),g("div",OSt,[v(o,{outline:"",label:t.$t("HELP_CENTER.UPGRADE_PAGE.BUTTON.LEARN_MORE"),onClick:r.openHelpCenterDocs},null,8,["label","onClick"]),v(o,{label:t.$t("HELP_CENTER.UPGRADE_PAGE.BUTTON.UPGRADE"),onClick:r.openBillingPage},null,8,["label","onClick"])])):O("v-if",!0)]),f("div",NSt,[(p(!0),g(de,null,Ae(s.upgradeFeature,l=>(p(),g("div",{key:l.key,class:"w-64 min-w-full"},[f("div",xSt,[f("div",null,[v(i,{icon:l.icon,"icon-lib":"lucide",size:26,class:"mt-px text-n-slate-12"},null,8,["icon"])]),f("div",null,[f("h5",RSt,C(l.title),1),f("p",wSt,C(l.description),1)])])]))),128))])])}const LSt=G(SSt,[["render",MSt],["__file","/app/app/javascript/dashboard/routes/dashboard/helpcenter/components/UpgradePage.vue"]]),DSt={__name:"HelpCenterPageRouteView",setup(t,{expose:n}){n();const a=lt(),e=Bn(),{uiSettings:s,updateUISettings:r}=Ct(),o=S(()=>e.getters.getCurrentAccountId),i=S(()=>e.getters["portals/allPortals"]),l=(y,b)=>e.getters["accounts/isFeatureEnabledonAccount"](y,b),c=S(()=>l(o.value,pt.HELP_CENTER)),d=S(()=>{const y=a.params.portalSlug||s.value.last_active_portal_slug;return y?e.getters["portals/portalBySlug"](y):i.value[0]}),u=S(()=>{var y;return d.value?(y=d.value.meta)==null?void 0:y.default_locale:""}),m=S(()=>a.params.locale||u.value),h=S(()=>d.value?d.value.slug:""),_=async()=>{await e.dispatch("portals/index");const y={portalSlug:h.value,locale:m.value};e.dispatch("portals/show",y),e.dispatch("categories/index",y),e.dispatch("agents/get")};Pe(()=>_()),je(()=>a.params.portalSlug,y=>{y&&y!==s.value.last_active_portal_slug&&r({last_active_portal_slug:y,last_active_locale_code:m.value})});const E={route:a,store:e,uiSettings:s,updateUISettings:r,accountId:o,portals:i,isFeatureEnabledonAccount:l,isHelpCenterEnabled:c,selectedPortal:d,defaultPortalLocale:u,selectedLocaleInPortal:m,selectedPortalSlug:h,fetchPortalAndItsCategories:_,computed:S,onMounted:Pe,watch:je,get useRoute(){return lt},get useStore(){return Bn},UpgradePage:LSt,get useUISettings(){return Ct},get FEATURE_FLAGS(){return pt}};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}},PSt={class:"flex w-full h-full min-h-0"},kSt={key:0,class:"flex flex-1 h-full px-0 overflow-hidden bg-n-background"};function BSt(t,n,a,e,s,r){const o=H("router-view");return p(),g("div",PSt,[e.isHelpCenterEnabled?(p(),g("section",kSt,[v(o)])):(p(),L(e.UpgradePage,{key:1}))])}const FSt=G(DSt,[["render",BSt],["__file","/app/app/javascript/dashboard/routes/dashboard/helpcenter/pages/HelpCenterPageRouteView.vue"]]),USt={__name:"PortalsIndexPage",setup(t,{expose:n}){n();const a=Bn(),e=ft(),{uiSettings:s}=Ct(),r=lt(),o=S(()=>a.getters["portals/allPortals"]),i=h=>!!o.value.find(_=>_.slug===h),l=(h,_)=>{e.replace({name:h,params:_,replace:!0})},c=()=>{const{last_active_portal_slug:h,last_active_locale_code:_}=s.value||{};if(i(h))return{portalSlug:h,locale:_};if(o.value.length>0){const{slug:E,meta:{default_locale:y}={}}=o.value[0];return{portalSlug:E,locale:y}}return null},d=()=>{const h=c(),{navigationPath:_}=r.params,y=["portals_articles_index","portals_categories_index","portals_locales_index","portals_settings_index"].includes(_)?_:"portals_articles_index";return h?l(y,h):l("portals_new",{})},u=async()=>{await a.dispatch("portals/index"),At(()=>d())};Pe(()=>u());const m={store:a,router:e,uiSettings:s,route:r,portals:o,isPortalPresent:i,routeToView:l,generateRouterParams:c,routeToLastActivePortal:d,performRouting:u,computed:S,nextTick:At,onMounted:Pe,get useStore(){return Bn},get useRoute(){return lt},get useRouter(){return ft},get useUISettings(){return Ct},Spinner:$n};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}},$St={class:"flex items-center justify-center w-full bg-n-background text-n-slate-11"};function GSt(t,n,a,e,s,r){return p(),g("div",$St,[v(e.Spinner)])}const VSt=G(USt,[["render",GSt],["__file","/app/app/javascript/dashboard/routes/dashboard/helpcenter/pages/PortalsIndexPage.vue"]]),HSt={__name:"ArticleCard",props:{id:{type:Number,required:!0},title:{type:String,required:!0},status:{type:String,required:!0},author:{type:Object,default:null},category:{type:Object,required:!0},views:{type:Number,required:!0},updatedAt:{type:Number,required:!0}},emits:["openArticle","articleAction"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),[o,i]=$t(),l=S(()=>{const A=Object.entries(_O).reduce((I,[N,x])=>(I[N]={...x,label:r(x.label)},I),{});return[...(Ab[e.status]||Ab[Mi.PUBLISHED]).map(I=>A[I]),A.delete]}),c=S(()=>{switch(e.status){case"archived":return"text-n-slate-12";case"draft":return"text-n-amber-11";default:return"text-n-teal-11"}}),d=S(()=>{switch(e.status){case"archived":return r("HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.STATUS.ARCHIVED");case"draft":return r("HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.STATUS.DRAFT");default:return r("HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.STATUS.PUBLISHED")}}),u=S(()=>{var A;return(A=e.category)!=null&&A.slug?`${e.category.icon} ${e.category.name}`:r("HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.CATEGORY.UNCATEGORISED")}),m=S(()=>{var A,T;return((A=e.author)==null?void 0:A.name)||((T=e.author)==null?void 0:T.availableName)||""}),h=S(()=>{var A;return(A=e.author)==null?void 0:A.thumbnail}),_=S(()=>kn(e.updatedAt)),b={props:e,emit:s,t:r,showActionsDropdown:o,toggleDropdown:i,articleMenuItems:l,statusTextColor:c,statusText:d,categoryName:u,authorName:m,authorThumbnailSrc:h,lastUpdatedAt:_,handleArticleAction:({action:A,value:T})=>{i(!1),s("articleAction",{action:A,value:T,id:e.id})},handleClick:A=>{s("openArticle",A)},computed:S,get useToggle(){return $t},get useI18n(){return Q},get dynamicTime(){return kn},get ARTICLE_MENU_ITEMS(){return _O},get ARTICLE_MENU_OPTIONS(){return Ab},get ARTICLE_STATUSES(){return Mi},Icon:Bt,CardLayout:ho,DropdownMenu:ds,Button:Se,Avatar:qt};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}},jSt={class:"flex justify-between w-full gap-1"},WSt={class:"flex items-center gap-2"},zSt={class:"relative flex items-center group"},YSt={class:"flex items-center justify-between w-full gap-4"},KSt={class:"flex items-center gap-4"},XSt={class:"flex items-center gap-1"},qSt={class:"text-sm truncate text-n-slate-11"},ZSt={class:"block text-sm whitespace-nowrap text-n-slate-11"},QSt={class:"inline-flex items-center gap-1 text-n-slate-11 whitespace-nowrap"},JSt={class:"text-sm"},e1t={class:"text-sm text-n-slate-11 line-clamp-1"};function t1t(t,n,a,e,s,r){const o=nt("on-clickaway");return p(),L(e.CardLayout,null,{default:z(()=>[f("div",jSt,[f("span",{class:"text-base cursor-pointer hover:underline underline-offset-2 hover:text-n-blue-text text-n-slate-12 line-clamp-1",onClick:n[0]||(n[0]=i=>e.handleClick(a.id))},C(a.title),1),f("div",WSt,[f("span",{class:oe(["text-xs font-medium inline-flex items-center h-6 px-2 py-0.5 rounded-md bg-n-alpha-2",e.statusTextColor])},C(e.statusText),3),ce((p(),g("div",zSt,[v(e.Button,{icon:"i-lucide-ellipsis-vertical",color:"slate",size:"xs",class:"rounded-md group-hover:bg-n-alpha-2",onClick:n[1]||(n[1]=i=>e.toggleDropdown())}),e.showActionsDropdown?(p(),L(e.DropdownMenu,{key:0,"menu-items":e.articleMenuItems,class:"mt-1 ltr:right-0 rtl:left-0 xl:ltr:left-0 xl:rtl:right-0 top-full",onAction:n[2]||(n[2]=i=>e.handleArticleAction(i))},null,8,["menu-items"])):O("v-if",!0)])),[[o,()=>e.toggleDropdown(!1)]])])]),f("div",YSt,[f("div",KSt,[f("div",XSt,[v(e.Avatar,{name:e.authorName,src:e.authorThumbnailSrc,size:16,"rounded-full":""},null,8,["name","src"]),f("span",qSt,C(e.authorName||"-"),1)]),f("span",ZSt,C(e.categoryName),1),f("div",QSt,[v(e.Icon,{icon:"i-lucide-eye",class:"size-4"}),f("span",JSt,C(e.t("HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.VIEWS",{count:a.views})),1)])]),f("span",e1t,C(e.lastUpdatedAt),1)])]),_:1})}const n1t=G(HSt,[["render",t1t],["__file","/app/app/javascript/dashboard/components-next/HelpCenter/ArticleCard/ArticleCard.vue"]]),a1t=[{id:1,title:"How to get an SSL certificate for your Help Center's custom domain",status:"draft",updatedAt:1729205669,author:{availableName:"Michael"},category:{slug:"configuration",icon:"",name:"Setup & Configuration"},views:3400},{id:2,title:"Setting up your first Help Center portal",status:"published",updatedAt:1729205669,author:{availableName:"John"},category:{slug:"onboarding",icon:"",name:"Onboarding"},views:400},{id:3,title:"Best practices for organizing your Help Center content",status:"archived",updatedAt:1729205669,author:{availableName:"Fernando"},category:{slug:"best-practices",icon:"",name:"Best Practices"},views:400},{id:4,title:"Customizing the appearance of your Help Center",status:"draft",updatedAt:1729205669,author:{availableName:"Jane"},category:{slug:"design",icon:"",name:"Design"},views:400},{id:5,title:"Integrating your Help Center with third-party tools",status:"published",updatedAt:1729205669,author:{availableName:"Sarah"},category:{slug:"integrations",icon:"",name:"Integrations"},views:2800},{id:6,title:"Managing user permissions in your Help Center",status:"draft",updatedAt:1729205669,author:{availableName:"Alex"},category:{slug:"administration",icon:"",name:"Administration"},views:1200},{id:7,title:"Creating and managing FAQ sections",status:"published",updatedAt:1729205669,author:{availableName:"Emily"},category:{slug:"content-management",icon:"",name:"Content Management"},views:5600},{id:8,title:"Implementing search functionality in your Help Center",status:"archived",updatedAt:1729205669,author:{availableName:"David"},category:{slug:"features",icon:"",name:"Features"},views:1800},{id:9,title:"Analyzing Help Center usage metrics",status:"published",updatedAt:1729205669,author:{availableName:"Rachel"},category:{slug:"analytics",icon:"",name:"Analytics"},views:3200},{id:10,title:"Setting up multilingual support in your Help Center",status:"draft",updatedAt:1729205669,author:{availableName:"Carlos"},category:{slug:"localization",icon:"",name:"Localization"},views:900},{id:11,title:"Creating interactive tutorials for your products",status:"published",updatedAt:1729205669,author:{availableName:"Olivia"},category:{slug:"education",icon:"",name:"Education"},views:4100},{id:12,title:"Implementing a feedback system in your Help Center",status:"draft",updatedAt:1729205669,author:{availableName:"Nathan"},category:{slug:"user-engagement",icon:"",name:"User Engagement"},views:750},{id:13,title:"Optimizing Help Center content for SEO",status:"published",updatedAt:1729205669,author:{availableName:"Sophia"},category:{slug:"seo",icon:"",name:"SEO"},views:2900},{id:14,title:"Creating a knowledge base for internal teams",status:"archived",updatedAt:1729205669,author:{availableName:"Daniel"},category:{slug:"internal-resources",icon:"",name:"Internal Resources"},views:1500}],s1t={__name:"CreatePortalDialog",emits:["create"],setup(t,{expose:n,emit:a}){const e=a,{t:s}=Q(),r=Fe(),o=P(null),i=le("portals/isCreatingPortal"),l=Lt({name:"",slug:"",domain:"",logoUrl:"",avatarBlobId:""}),c={name:{required:Ge,minLength:Rt(2)},slug:{required:Sl.withMessage(()=>s("HELP_CENTER.CREATE_PORTAL_DIALOG.SLUG.ERROR"),Ge),isValidSlug:Sl.withMessage(()=>s("HELP_CENTER.CREATE_PORTAL_DIALOG.SLUG.FORMAT_ERROR"),oT)}},d=rt(c,l),u=S(()=>d.value.name.$error?s("HELP_CENTER.CREATE_PORTAL_DIALOG.NAME.ERROR"):""),m=S(()=>{var T;return((T=d.value.slug.$errors[0])==null?void 0:T.$message)||""}),h=S(()=>d.value.$invalid);je(()=>l.name,()=>{l.slug=PT(l.name)});const _=T=>{e("create",{slug:T.slug,locale:"en"})},E=()=>{Object.keys(l).forEach(T=>{l[T]=""}),d.value.$reset()},y=async T=>{try{await r.dispatch("portals/create",T),o.value.close();const I={has_custom_domain:!!T.custom_domain};Nt(T_.ONBOARD_BASIC_INFORMATION,I),Nt(T_.CREATE_PORTAL,I),Z(s("HELP_CENTER.PORTAL_SETTINGS.API.CREATE_PORTAL.SUCCESS_MESSAGE")),E(),_(T)}catch(I){o.value.close(),Z((I==null?void 0:I.message)||s("HELP_CENTER.PORTAL_SETTINGS.API.CREATE_PORTAL.ERROR_MESSAGE"))}},b=async()=>{if(!await d.value.$validate())return;const I={name:l.name,slug:l.slug,custom_domain:l.domain,blob_id:l.avatarBlobId||null,color:"#2781F6"};await y(I)};n({dialogRef:o});const A={emit:e,t:s,store:r,dialogRef:o,isCreatingPortal:i,state:l,rules:c,v$:d,nameError:u,slugError:m,isSubmitDisabled:h,redirectToPortal:_,resetForm:E,createPortal:y,handleDialogConfirm:b,ref:P,reactive:Lt,watch:je,computed:S,get useI18n(){return Q},get useStore(){return Fe},get useMapGetter(){return le},get useAlert(){return Z},get useTrack(){return Nt},get PORTALS_EVENTS(){return T_},get convertToCategorySlug(){return PT},get useVuelidate(){return rt},get required(){return Ge},get minLength(){return Rt},get helpers(){return Sl},get buildPortalURL(){return lD},get isValidSlug(){return oT},Dialog:la,Input:sn};return Object.defineProperty(A,"__isScriptSetup",{enumerable:!1,value:!0}),A}},o1t={class:"flex flex-col gap-6"};function r1t(t,n,a,e,s,r){return p(),L(e.Dialog,{ref:"dialogRef",type:"edit",title:e.t("HELP_CENTER.CREATE_PORTAL_DIALOG.TITLE"),"confirm-button-label":e.t("HELP_CENTER.CREATE_PORTAL_DIALOG.CONFIRM_BUTTON_LABEL"),description:e.t("HELP_CENTER.CREATE_PORTAL_DIALOG.DESCRIPTION"),"disable-confirm-button":e.isSubmitDisabled||e.isCreatingPortal,"is-loading":e.isCreatingPortal,onConfirm:e.handleDialogConfirm},{default:z(()=>[f("div",o1t,[v(e.Input,{id:"portal-name",modelValue:e.state.name,"onUpdate:modelValue":n[0]||(n[0]=o=>e.state.name=o),type:"text",placeholder:e.t("HELP_CENTER.CREATE_PORTAL_DIALOG.NAME.PLACEHOLDER"),label:e.t("HELP_CENTER.CREATE_PORTAL_DIALOG.NAME.LABEL"),"message-type":e.nameError?"error":"info",message:e.nameError||e.t("HELP_CENTER.CREATE_PORTAL_DIALOG.NAME.MESSAGE"),onBlur:n[1]||(n[1]=o=>e.v$.name.$touch())},null,8,["modelValue","placeholder","label","message-type","message"]),v(e.Input,{id:"portal-slug",modelValue:e.state.slug,"onUpdate:modelValue":n[2]||(n[2]=o=>e.state.slug=o),type:"text",placeholder:e.t("HELP_CENTER.CREATE_PORTAL_DIALOG.SLUG.PLACEHOLDER"),label:e.t("HELP_CENTER.CREATE_PORTAL_DIALOG.SLUG.LABEL"),"message-type":e.slugError?"error":"info",message:e.slugError||e.buildPortalURL(e.state.slug),onInput:n[3]||(n[3]=o=>e.v$.slug.$touch()),onBlur:n[4]||(n[4]=o=>e.v$.slug.$touch())},null,8,["modelValue","placeholder","label","message-type","message"])])]),_:1},8,["title","confirm-button-label","description","disable-confirm-button","is-loading"])}const i1t=G(s1t,[["render",r1t],["__file","/app/app/javascript/dashboard/components-next/HelpCenter/PortalSwitcher/CreatePortalDialog.vue"]]),l1t={__name:"PortalEmptyState",setup(t,{expose:n}){n();const a=P(null),e=()=>{a.value.dialogRef.open()},s=ft(),o={createPortalDialogRef:a,openDialog:e,router:s,onPortalCreate:({slug:i,locale:l})=>{s.push({name:"portals_articles_index",params:{portalSlug:i,locale:l}})},ref:P,get useRouter(){return ft},EmptyStateLayout:Or,Button:Se,ArticleCard:n1t,get articleContent(){return a1t},CreatePortalDialog:i1t};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},c1t={class:"grid grid-cols-2 gap-4 p-px"},d1t={class:"space-y-4"},u1t={class:"space-y-4"};function p1t(t,n,a,e,s,r){return p(),L(e.EmptyStateLayout,{title:t.$t("HELP_CENTER.TITLE"),subtitle:t.$t("HELP_CENTER.NEW_PAGE.DESCRIPTION")},{"empty-state-item":z(()=>[f("div",c1t,[f("div",d1t,[(p(!0),g(de,null,Ae(e.articleContent,(o,i)=>(p(),L(e.ArticleCard,{id:o.id,key:`article-${i}`,title:o.title,status:o.status,"updated-at":o.updatedAt,author:o.author,category:o.category,views:o.views},null,8,["id","title","status","updated-at","author","category","views"]))),128))]),f("div",u1t,[(p(!0),g(de,null,Ae(e.articleContent.reverse(),(o,i)=>(p(),L(e.ArticleCard,{id:o.id,key:`article-${i}`,title:o.title,status:o.status,"updated-at":o.updatedAt,author:o.author,category:o.category,views:o.views},null,8,["id","title","status","updated-at","author","category","views"]))),128))])])]),actions:z(()=>[v(e.Button,{label:t.$t("HELP_CENTER.NEW_PAGE.CREATE_PORTAL_BUTTON"),icon:"i-lucide-plus",onClick:e.openDialog},null,8,["label"]),v(e.CreatePortalDialog,{ref:"createPortalDialogRef",onCreate:e.onPortalCreate},null,512)]),_:1},8,["title","subtitle"])}const f1t=G(l1t,[["render",p1t],["__file","/app/app/javascript/dashboard/components-next/HelpCenter/EmptyState/Portal/PortalEmptyState.vue"]]),m1t={__name:"PortalsNewPage",setup(t,{expose:n}){n();const a={PortalEmptyState:f1t};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},h1t={class:"w-full h-full bg-n-background"};function _1t(t,n,a,e,s,r){return p(),g("div",h1t,[v(e.PortalEmptyState)])}const g1t=G(m1t,[["render",_1t],["__file","/app/app/javascript/dashboard/routes/dashboard/helpcenter/pages/PortalsNewPage.vue"]]),jN=()=>ti(()=>import("./PortalsArticlesIndexPage-pr5neX8k.js"),__vite__mapDeps([15,3,2,4,5,6,7,8,16,17,18,10,19,13,20,9,21,22,1,11,23,24,12,25,26,27,28])),b1t=()=>ti(()=>import("./PortalsArticlesNewPage-AKDJ9Iy7.js"),__vite__mapDeps([29,3,2,4,5,6,7,8,19,17,18,10,13,20,30,16,9,1,11,31,23,24,12,25,26,27])),WN=()=>ti(()=>import("./PortalsArticlesEditPage-Cl3FC28W.js"),__vite__mapDeps([32,3,2,4,5,6,7,8,19,17,18,10,13,20,30,16,9,1,11,31,23,24,12,25,26,27])),v1t=()=>ti(()=>import("./PortalsCategoriesIndexPage-C38M88SJ.js"),__vite__mapDeps([33,3,2,4,5,6,7,8,19,17,18,10,13,20,16,9,21,22,1,11,23,24,12,25,26,27])),E1t=()=>ti(()=>import("./PortalsLocalesIndexPage-B7ej8WPq.js"),__vite__mapDeps([34,3,2,4,5,6,7,8,16,17,18,10,19,13,20,9,1,11,23,24,12,25,26,27])),S1t=()=>ti(()=>import("./PortalsSettingsIndexPage-gs4pkThI.js"),__vite__mapDeps([35,4,3,5,6,2,7,8,19,17,18,10,13,20,16,9,1,11,23,24,12,25,26,27,36])),_i={featureFlag:pt.HELP_CENTER,permissions:["administrator","agent","knowledge_base_manage"]},T1t=[{path:$o(":portalSlug/:locale/:categorySlug?/articles/:tab?"),name:"portals_articles_index",meta:_i,component:jN},{path:$o(":portalSlug/:locale/:categorySlug?/articles/new"),name:"portals_articles_new",meta:_i,component:b1t},{path:$o(":portalSlug/:locale/:categorySlug?/articles/:tab?/edit/:articleSlug"),name:"portals_articles_edit",meta:_i,component:WN},{path:$o(":portalSlug/:locale/categories"),name:"portals_categories_index",meta:_i,component:v1t},{path:$o(":portalSlug/:locale/categories/:categorySlug/articles"),name:"portals_categories_articles_index",meta:_i,component:jN},{path:$o(":portalSlug/:locale/categories/:categorySlug/articles/:articleSlug"),name:"portals_categories_articles_edit",meta:_i,component:WN},{path:$o(":portalSlug/locales"),name:"portals_locales_index",meta:_i,component:E1t},{path:$o(":portalSlug/settings"),name:"portals_settings_index",meta:_i,component:S1t},{path:$o("new"),name:"portals_new",meta:{featureFlag:pt.HELP_CENTER,permissions:["administrator","knowledge_base_manage"]},component:g1t},{path:$o(":navigationPath"),name:"portals_index",meta:{featureFlag:pt.HELP_CENTER,permissions:["administrator","knowledge_base_manage"]},component:VSt}],A1t={routes:[{path:$o(),component:FSt,redirect:t=>({name:"portals_index",params:{navigationPath:"portals_articles_index",...t.params}}),children:[...T1t]}]},y1t={__name:"CampaignsPageRouteView",props:{keepAlive:{type:Boolean,default:!0}},setup(t,{expose:n}){n();const a=Fe();Pe(()=>{a.dispatch("campaigns/get"),a.dispatch("labels/get")});const e={store:a,onMounted:Pe,get useStore(){return Fe}};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}},I1t={class:"flex flex-col justify-between flex-1 h-full m-0 overflow-auto bg-n-background px-6"};function C1t(t,n,a,e,s,r){const o=H("router-view");return p(),g("div",I1t,[v(o,null,{default:z(({Component:i})=>[a.keepAlive?(p(),L(th,{key:0},[(p(),L(Da(i)))],1024)):(p(),L(Da(i),{key:1}))]),_:1})])}const O1t=G(y1t,[["render",C1t],["__file","/app/app/javascript/dashboard/routes/dashboard/campaigns/pages/CampaignsPageRouteView.vue"]]),N1t={__name:"CampaignLayout",props:{headerTitle:{type:String,default:""},buttonLabel:{type:String,default:""}},emits:["click","close"],setup(t,{expose:n,emit:a}){n();const e=a,r={emit:e,handleButtonClick:()=>{e("click")},Button:Se};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},x1t={class:"flex flex-col w-full h-full overflow-hidden bg-n-background"},R1t={class:"sticky top-0 z-10 px-6 lg:px-0"},w1t={class:"w-full max-w-[60rem] mx-auto"},M1t={class:"flex items-center justify-between w-full h-20 gap-2"},L1t={class:"text-xl font-medium text-n-slate-12"},D1t={class:"relative group/campaign-button"},P1t={class:"flex-1 px-6 overflow-y-auto lg:px-0"},k1t={class:"w-full max-w-[60rem] mx-auto py-4"};function B1t(t,n,a,e,s,r){const o=nt("on-clickaway");return p(),g("section",x1t,[f("header",R1t,[f("div",w1t,[f("div",M1t,[f("span",L1t,C(a.headerTitle),1),ce((p(),g("div",D1t,[v(e.Button,{label:a.buttonLabel,icon:"i-lucide-plus",size:"sm",class:"group-hover/campaign-button:brightness-110",onClick:e.handleButtonClick},null,8,["label"]),qe(t.$slots,"action")])),[[o,()=>e.emit("close")]])])])]),f("main",P1t,[f("div",k1t,[qe(t.$slots,"default")])])])}const x1=G(N1t,[["render",B1t],["__file","/app/app/javascript/dashboard/components-next/Campaigns/CampaignLayout.vue"]]),F1t={__name:"LiveChatCampaignDetails",props:{sender:{type:Object,default:null},inboxName:{type:String,default:""},inboxIcon:{type:String,default:""}},setup(t,{expose:n}){n();const a=t,{t:e}=Q(),s=S(()=>{var i;return((i=a.sender)==null?void 0:i.name)||e("CAMPAIGN.LIVE_CHAT.CARD.CAMPAIGN_DETAILS.BOT")}),r=S(()=>{var i;return(i=a.sender)==null?void 0:i.thumbnail}),o={props:a,t:e,senderName:s,senderThumbnailSrc:r,computed:S,get useI18n(){return Q},Avatar:qt,Icon:Bt};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},U1t={class:"flex-shrink-0 text-sm text-n-slate-11 whitespace-nowrap"},$1t={class:"flex items-center gap-1.5 flex-shrink-0"},G1t={class:"text-sm font-medium text-n-slate-12"},V1t={class:"flex-shrink-0 text-sm text-n-slate-11 whitespace-nowrap"},H1t={class:"flex items-center gap-1.5 flex-shrink-0"},j1t={class:"text-sm font-medium text-n-slate-12"};function W1t(t,n,a,e,s,r){return p(),g(de,null,[f("span",U1t,C(e.t("CAMPAIGN.LIVE_CHAT.CARD.CAMPAIGN_DETAILS.SENT_BY")),1),f("div",$1t,[v(e.Avatar,{name:e.senderName,src:e.senderThumbnailSrc,size:16,"rounded-full":""},null,8,["name","src"]),f("span",G1t,C(e.senderName),1)]),f("span",V1t,C(e.t("CAMPAIGN.LIVE_CHAT.CARD.CAMPAIGN_DETAILS.FROM")),1),f("div",H1t,[v(e.Icon,{icon:a.inboxIcon,class:"flex-shrink-0 text-n-slate-12 size-3"},null,8,["icon"]),f("span",j1t,C(a.inboxName),1)])],64)}const z1t=G(F1t,[["render",W1t],["__file","/app/app/javascript/dashboard/components-next/Campaigns/CampaignCard/LiveChatCampaignDetails.vue"]]),Y1t={__name:"SMSCampaignDetails",props:{inboxName:{type:String,default:""},inboxIcon:{type:String,default:""},scheduledAt:{type:Number,default:0}},setup(t,{expose:n}){n();const{t:a}=Q(),e={t:a,Icon:Bt,get messageStamp(){return Bc},get useI18n(){return Q}};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}},K1t={class:"flex-shrink-0 text-sm text-n-slate-11 whitespace-nowrap"},X1t={class:"flex items-center gap-1.5 flex-shrink-0"},q1t={class:"text-sm font-medium text-n-slate-12"},Z1t={class:"flex-shrink-0 text-sm text-n-slate-11 whitespace-nowrap"},Q1t={class:"flex-1 text-sm font-medium truncate text-n-slate-12"};function J1t(t,n,a,e,s,r){return p(),g(de,null,[f("span",K1t,C(e.t("CAMPAIGN.SMS.CARD.CAMPAIGN_DETAILS.SENT_FROM")),1),f("div",X1t,[v(e.Icon,{icon:a.inboxIcon,class:"flex-shrink-0 text-n-slate-12 size-3"},null,8,["icon"]),f("span",q1t,C(a.inboxName),1)]),f("span",Z1t,C(e.t("CAMPAIGN.SMS.CARD.CAMPAIGN_DETAILS.ON")),1),f("span",Q1t,C(e.messageStamp(new Date(a.scheduledAt),"LLL d, h:mm a")),1)],64)}const eTt=G(Y1t,[["render",J1t],["__file","/app/app/javascript/dashboard/components-next/Campaigns/CampaignCard/SMSCampaignDetails.vue"]]),zb="completed",tTt={__name:"CampaignCard",props:{title:{type:String,default:""},message:{type:String,default:""},isLiveChatType:{type:Boolean,default:!1},isEnabled:{type:Boolean,default:!1},status:{type:String,default:""},sender:{type:Object,default:null},inbox:{type:Object,default:null},scheduledAt:{type:Number,default:0}},emits:["edit","delete"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),{formatMessage:o}=ta(),i=S(()=>e.isLiveChatType?e.isEnabled:e.status!==zb),l=S(()=>({"text-n-teal-11":i.value,"text-n-slate-12":!i.value})),c=S(()=>e.isLiveChatType?e.isEnabled?r("CAMPAIGN.LIVE_CHAT.CARD.STATUS.ENABLED"):r("CAMPAIGN.LIVE_CHAT.CARD.STATUS.DISABLED"):e.status===zb?r("CAMPAIGN.SMS.CARD.STATUS.COMPLETED"):r("CAMPAIGN.SMS.CARD.STATUS.SCHEDULED")),d=S(()=>{var h;return((h=e.inbox)==null?void 0:h.name)||""}),u=S(()=>{const{medium:h,channel_type:_}=e.inbox;return vs(_,h)}),m={props:e,emit:s,t:r,STATUS_COMPLETED:zb,formatMessage:o,isActive:i,statusTextColor:l,campaignStatus:c,inboxName:d,inboxIcon:u,computed:S,get useI18n(){return Q},get useMessageFormatter(){return ta},get getInboxIconByType(){return vs},CardLayout:ho,Button:Se,LiveChatCampaignDetails:z1t,SMSCampaignDetails:eTt};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}},nTt={class:"flex flex-col items-start justify-between flex-1 min-w-0 gap-2"},aTt={class:"flex justify-between gap-3 w-fit"},sTt={class:"text-base font-medium capitalize text-n-slate-12 line-clamp-1"},oTt={class:"text-sm text-n-slate-11 line-clamp-1 [&>p]:mb-0 h-6"},rTt={class:"flex items-center w-full h-6 gap-2 overflow-hidden"},iTt={class:"flex items-center justify-end w-20 gap-2"};function lTt(t,n,a,e,s,r){const o=nt("dompurify-html");return p(),L(e.CardLayout,{layout:"row"},{default:z(()=>[f("div",nTt,[f("div",aTt,[f("span",sTt,C(a.title),1),f("span",{class:oe(["text-xs font-medium inline-flex items-center h-6 px-2 py-0.5 rounded-md bg-n-alpha-2",e.statusTextColor])},C(e.campaignStatus),3)]),ce(f("div",oTt,null,512),[[o,e.formatMessage(a.message,!1,!1,!1)]]),f("div",rTt,[a.isLiveChatType?(p(),L(e.LiveChatCampaignDetails,{key:0,sender:a.sender,"inbox-name":e.inboxName,"inbox-icon":e.inboxIcon},null,8,["sender","inbox-name","inbox-icon"])):(p(),L(e.SMSCampaignDetails,{key:1,"inbox-name":e.inboxName,"inbox-icon":e.inboxIcon,"scheduled-at":a.scheduledAt},null,8,["inbox-name","inbox-icon","scheduled-at"]))])]),f("div",iTt,[a.isLiveChatType?(p(),L(e.Button,{key:0,variant:"faded",size:"sm",color:"slate",icon:"i-lucide-sliders-vertical",onClick:n[0]||(n[0]=i=>e.emit("edit"))})):O("v-if",!0),v(e.Button,{variant:"faded",color:"ruby",size:"sm",icon:"i-lucide-trash",onClick:n[1]||(n[1]=i=>e.emit("delete"))})])]),_:1})}const p_=G(tTt,[["render",lTt],["__file","/app/app/javascript/dashboard/components-next/Campaigns/CampaignCard/CampaignCard.vue"]]),cTt={__name:"CampaignList",props:{campaigns:{type:Array,required:!0},isLiveChatType:{type:Boolean,default:!1}},emits:["edit","delete"],setup(t,{expose:n,emit:a}){n();const e=a,o={emit:e,handleEdit:i=>e("edit",i),handleDelete:i=>e("delete",i),CampaignCard:p_};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},dTt={class:"flex flex-col gap-4"};function uTt(t,n,a,e,s,r){return p(),g("div",dTt,[(p(!0),g(de,null,Ae(a.campaigns,o=>(p(),L(e.CampaignCard,{key:o.id,title:o.title,message:o.message,"is-enabled":o.enabled,status:o.campaign_status,sender:o.sender,inbox:o.inbox,"scheduled-at":o.scheduled_at,"is-live-chat-type":a.isLiveChatType,onEdit:i=>e.handleEdit(o),onDelete:i=>e.handleDelete(o)},null,8,["title","message","is-enabled","status","sender","inbox","scheduled-at","is-live-chat-type","onEdit","onDelete"]))),128))])}const R1=G(cTt,[["render",uTt],["__file","/app/app/javascript/dashboard/components-next/Campaigns/Pages/CampaignPage/CampaignList.vue"]]),pTt={__name:"LiveChatCampaignForm",props:{mode:{type:String,required:!0,validator:t=>["edit","create"].includes(t)},selectedCampaign:{type:Object,default:()=>({})},showActionButtons:{type:Boolean,default:!0}},emits:["submit","cancel"],setup(t,{expose:n,emit:a}){const e=t,s=a,{t:r}=Q(),o=Fe(),i={uiFlags:le("campaigns/getUIFlags"),inboxes:le("inboxes/getWebsiteInboxes")},l=P([]),c={title:"",message:"",inboxId:null,senderId:0,enabled:!0,triggerOnlyDuringBusinessHours:!1,endPoint:"",timeOnPage:10},d=Lt({...c}),u={shouldBeAValidURLPattern:k=>{try{return new Q1(k),!0}catch{return!1}},shouldStartWithHTTP:k=>k?k.startsWith("https://")||k.startsWith("http://"):!1},m={title:{required:Ge,minLength:Rt(1)},message:{required:Ge,minLength:Rt(1)},inboxId:{required:Ge},senderId:{required:Ge},endPoint:{required:Ge,...u},timeOnPage:{required:Ge}},h=rt(m,d),_=S(()=>i.uiFlags.value.isCreating),E=S(()=>h.value.$invalid),y=(k,V,F)=>(k==null?void 0:k.map($=>({value:$[V],label:$[F]})))??[],b=S(()=>y(i.inboxes.value,"id","name")),A=S(()=>[{value:0,label:"Bot"},...y(l.value,"id","name")]),T=(k,V)=>h.value[k].$error?r(`CAMPAIGN.LIVE_CHAT.CREATE.FORM.${V}.ERROR`):"",I=S(()=>({title:T("title","TITLE"),message:T("message","MESSAGE"),inbox:T("inboxId","INBOX"),endPoint:T("endPoint","END_POINT"),timeOnPage:T("timeOnPage","TIME_ON_PAGE"),sender:T("senderId","SENT_BY")})),N=()=>Object.assign(d,c),x=()=>s("cancel"),R=async k=>{var V,F;if(!k){l.value=[];return}try{const $=await o.dispatch("inboxMembers/get",{inboxId:k});l.value=((V=$==null?void 0:$.data)==null?void 0:V.payload)??[]}catch($){l.value=[],Z(((F=$==null?void 0:$.response)==null?void 0:F.message)??r("CAMPAIGN.LIVE_CHAT.CREATE.FORM.API.ERROR_MESSAGE"))}},M=()=>({title:d.title,message:d.message,inbox_id:d.inboxId,sender_id:d.senderId||null,enabled:d.enabled,trigger_only_during_business_hours:d.triggerOnlyDuringBusinessHours,trigger_rules:{url:d.endPoint,time_on_page:d.timeOnPage}}),w=async()=>{await h.value.$validate()&&(s("submit",M()),e.mode==="create"&&(N(),x()))},D=k=>{if(!k)return;const{title:V,message:F,inbox:{id:$},sender:Y,enabled:j,trigger_only_during_business_hours:U,trigger_rules:{url:J,time_on_page:te}}=k;Object.assign(d,{title:V,message:F,inboxId:$,senderId:(Y==null?void 0:Y.id)??0,enabled:j,triggerOnlyDuringBusinessHours:U,endPoint:J,timeOnPage:te})};je(()=>d.inboxId,k=>{k&&R(k)},{immediate:!0}),je(()=>e.selectedCampaign,k=>{e.mode==="edit"&&k&&D(k)},{immediate:!0}),n({prepareCampaignDetails:M,isSubmitDisabled:E});const B={props:e,emit:s,t:r,store:o,formState:i,senderList:l,initialState:c,state:d,urlValidators:u,validationRules:m,v$:h,isCreating:_,isSubmitDisabled:E,mapToOptions:y,inboxOptions:b,sendersAndBotList:A,getErrorMessage:T,formErrors:I,resetState:N,handleCancel:x,handleInboxChange:R,prepareCampaignDetails:M,handleSubmit:w,updateStateFromCampaign:D,reactive:Lt,computed:S,ref:P,watch:je,get useI18n(){return Q},get useVuelidate(){return rt},get required(){return Ge},get minLength(){return Rt},get useMapGetter(){return le},get useStore(){return Fe},get useAlert(){return Z},get URLPattern(){return Q1},Input:sn,Button:Se,ComboBox:Cr,Editor:Ds};return Object.defineProperty(B,"__isScriptSetup",{enumerable:!1,value:!0}),B}},fTt={class:"flex flex-col gap-1"},mTt={for:"inbox",class:"mb-0.5 text-sm font-medium text-n-slate-12"},hTt={class:"flex flex-col gap-1"},_Tt={for:"sentBy",class:"mb-0.5 text-sm font-medium text-n-slate-12"},gTt={class:"flex flex-col gap-2.5"},bTt={class:"mb-2.5 text-sm font-medium text-n-slate-12"},vTt={class:"flex items-center gap-2"},ETt={class:"text-sm font-medium text-n-slate-12"},STt={class:"flex items-center gap-2"},TTt={class:"text-sm font-medium text-n-slate-12"},ATt={key:0,class:"flex items-center justify-between w-full gap-3"};function yTt(t,n,a,e,s,r){return p(),g("form",{class:"flex flex-col gap-4",onSubmit:Ve(e.handleSubmit,["prevent"])},[v(e.Input,{modelValue:e.state.title,"onUpdate:modelValue":n[0]||(n[0]=o=>e.state.title=o),label:e.t("CAMPAIGN.LIVE_CHAT.CREATE.FORM.TITLE.LABEL"),placeholder:e.t("CAMPAIGN.LIVE_CHAT.CREATE.FORM.TITLE.PLACEHOLDER"),message:e.formErrors.title,"message-type":e.formErrors.title?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),v(e.Editor,{modelValue:e.state.message,"onUpdate:modelValue":n[1]||(n[1]=o=>e.state.message=o),label:e.t("CAMPAIGN.LIVE_CHAT.CREATE.FORM.MESSAGE.LABEL"),placeholder:e.t("CAMPAIGN.LIVE_CHAT.CREATE.FORM.MESSAGE.PLACEHOLDER"),message:e.formErrors.message,"message-type":e.formErrors.message?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),f("div",fTt,[f("label",mTt,C(e.t("CAMPAIGN.LIVE_CHAT.CREATE.FORM.INBOX.LABEL")),1),v(e.ComboBox,{id:"inbox",modelValue:e.state.inboxId,"onUpdate:modelValue":n[2]||(n[2]=o=>e.state.inboxId=o),options:e.inboxOptions,"has-error":!!e.formErrors.inbox,placeholder:e.t("CAMPAIGN.LIVE_CHAT.CREATE.FORM.INBOX.PLACEHOLDER"),message:e.formErrors.inbox,class:"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:dark:outline-n-weak [&>div>button:not(.focused)]:hover:!outline-n-slate-6"},null,8,["modelValue","options","has-error","placeholder","message"])]),f("div",hTt,[f("label",_Tt,C(e.t("CAMPAIGN.LIVE_CHAT.CREATE.FORM.SENT_BY.LABEL")),1),v(e.ComboBox,{id:"sentBy",modelValue:e.state.senderId,"onUpdate:modelValue":n[3]||(n[3]=o=>e.state.senderId=o),options:e.sendersAndBotList,"has-error":!!e.formErrors.sender,disabled:!e.state.inboxId,placeholder:e.t("CAMPAIGN.LIVE_CHAT.CREATE.FORM.SENT_BY.PLACEHOLDER"),class:"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:dark:outline-n-weak [&>div>button:not(.focused)]:hover:!outline-n-slate-6",message:e.formErrors.sender},null,8,["modelValue","options","has-error","disabled","placeholder","message"])]),v(e.Input,{modelValue:e.state.endPoint,"onUpdate:modelValue":n[4]||(n[4]=o=>e.state.endPoint=o),type:"url",label:e.t("CAMPAIGN.LIVE_CHAT.CREATE.FORM.END_POINT.LABEL"),placeholder:e.t("CAMPAIGN.LIVE_CHAT.CREATE.FORM.END_POINT.PLACEHOLDER"),message:e.formErrors.endPoint,"message-type":e.formErrors.endPoint?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),v(e.Input,{modelValue:e.state.timeOnPage,"onUpdate:modelValue":n[5]||(n[5]=o=>e.state.timeOnPage=o),type:"number",label:e.t("CAMPAIGN.LIVE_CHAT.CREATE.FORM.TIME_ON_PAGE.LABEL"),placeholder:e.t("CAMPAIGN.LIVE_CHAT.CREATE.FORM.TIME_ON_PAGE.PLACEHOLDER"),message:e.formErrors.timeOnPage,"message-type":e.formErrors.timeOnPage?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),f("fieldset",gTt,[f("legend",bTt,C(e.t("CAMPAIGN.LIVE_CHAT.CREATE.FORM.OTHER_PREFERENCES.TITLE")),1),f("label",vTt,[ce(f("input",{"onUpdate:modelValue":n[6]||(n[6]=o=>e.state.enabled=o),type:"checkbox"},null,512),[[bn,e.state.enabled]]),f("span",ETt,C(e.t("CAMPAIGN.LIVE_CHAT.CREATE.FORM.OTHER_PREFERENCES.ENABLED")),1)]),f("label",STt,[ce(f("input",{"onUpdate:modelValue":n[7]||(n[7]=o=>e.state.triggerOnlyDuringBusinessHours=o),type:"checkbox"},null,512),[[bn,e.state.triggerOnlyDuringBusinessHours]]),f("span",TTt,C(e.t("CAMPAIGN.LIVE_CHAT.CREATE.FORM.OTHER_PREFERENCES.TRIGGER_ONLY_BUSINESS_HOURS")),1)])]),a.showActionButtons?(p(),g("div",ATt,[v(e.Button,{type:"button",variant:"faded",color:"slate",label:e.t("CAMPAIGN.LIVE_CHAT.CREATE.FORM.BUTTONS.CANCEL"),class:"w-full bg-n-alpha-2 text-n-blue-text hover:bg-n-alpha-3",onClick:e.handleCancel},null,8,["label"]),v(e.Button,{type:"submit",label:e.t(`CAMPAIGN.LIVE_CHAT.CREATE.FORM.BUTTONS.${a.mode.toUpperCase()}`),class:"w-full","is-loading":e.isCreating,disabled:e.isCreating||e.isSubmitDisabled},null,8,["label","is-loading","disabled"])])):O("v-if",!0)],32)}const fP=G(pTt,[["render",yTt],["__file","/app/app/javascript/dashboard/components-next/Campaigns/Pages/CampaignPage/LiveChatCampaign/LiveChatCampaignForm.vue"]]),ITt={__name:"LiveChatCampaignDialog",emits:["close"],setup(t,{expose:n,emit:a}){n();const e=a,s=Fe(),{t:r}=Q(),o=async d=>{var u;try{await s.dispatch("campaigns/create",d),Nt(Zc.CREATE_CAMPAIGN,{type:Qc.ONGOING}),Z(r("CAMPAIGN.LIVE_CHAT.CREATE.FORM.API.SUCCESS_MESSAGE"))}catch(m){const h=((u=m==null?void 0:m.response)==null?void 0:u.message)||r("CAMPAIGN.LIVE_CHAT.CREATE.FORM.API.ERROR_MESSAGE");Z(h)}},i=()=>e("close"),c={emit:e,store:s,t:r,addCampaign:o,handleClose:i,handleSubmit:d=>{o(d),i()},get useI18n(){return Q},get useStore(){return Fe},get useAlert(){return Z},get useTrack(){return Nt},get CAMPAIGN_TYPES(){return Qc},get CAMPAIGNS_EVENTS(){return Zc},LiveChatCampaignForm:fP};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}},CTt={class:"w-[25rem] z-50 min-w-0 absolute top-10 ltr:right-0 rtl:left-0 bg-n-alpha-3 backdrop-blur-[100px] p-6 rounded-xl border border-n-weak shadow-md flex flex-col gap-6 max-h-[85vh] overflow-y-auto"},OTt={class:"text-base font-medium text-n-slate-12"};function NTt(t,n,a,e,s,r){return p(),g("div",CTt,[f("h3",OTt,C(e.t("CAMPAIGN.LIVE_CHAT.CREATE.TITLE")),1),v(e.LiveChatCampaignForm,{mode:"create",onSubmit:e.handleSubmit,onCancel:e.handleClose})])}const xTt=G(ITt,[["render",NTt],["__file","/app/app/javascript/dashboard/components-next/Campaigns/Pages/CampaignPage/LiveChatCampaign/LiveChatCampaignDialog.vue"]]),RTt={__name:"EditLiveChatCampaignDialog",props:{selectedCampaign:{type:Object,default:null}},setup(t,{expose:n}){const a=t,{t:e}=Q(),s=Fe(),r=P(null),o=P(null),i=le("campaigns/getUIFlags"),l=S(()=>i.value.isUpdating),c=S(()=>{var _;return(_=o.value)==null?void 0:_.isSubmitDisabled}),d=S(()=>a.selectedCampaign.id),u=async _=>{var E;try{await s.dispatch("campaigns/update",{id:d.value,..._}),Z(e("CAMPAIGN.LIVE_CHAT.EDIT.FORM.API.SUCCESS_MESSAGE")),r.value.close()}catch(y){const b=((E=y==null?void 0:y.response)==null?void 0:E.message)||e("CAMPAIGN.LIVE_CHAT.EDIT.FORM.API.ERROR_MESSAGE");Z(b)}},m=()=>{u(o.value.prepareCampaignDetails())};n({dialogRef:r});const h={props:a,t:e,store:s,dialogRef:r,liveChatCampaignFormRef:o,uiFlags:i,isUpdatingCampaign:l,isInvalidForm:c,selectedCampaignId:d,updateCampaign:u,handleSubmit:m,ref:P,computed:S,get useMapGetter(){return le},get useStore(){return Fe},get useAlert(){return Z},get useI18n(){return Q},Dialog:la,LiveChatCampaignForm:fP};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}};function wTt(t,n,a,e,s,r){return p(),L(e.Dialog,{ref:"dialogRef",type:"edit",title:e.t("CAMPAIGN.LIVE_CHAT.EDIT.TITLE"),"is-loading":e.isUpdatingCampaign,"disable-confirm-button":e.isUpdatingCampaign||e.isInvalidForm,"overflow-y-auto":"",onConfirm:e.handleSubmit},{default:z(()=>[v(e.LiveChatCampaignForm,{ref:"liveChatCampaignFormRef",mode:"edit","selected-campaign":a.selectedCampaign,"show-action-buttons":!1,onSubmit:e.handleSubmit},null,8,["selected-campaign"])]),_:1},8,["title","is-loading","disable-confirm-button"])}const MTt=G(RTt,[["render",wTt],["__file","/app/app/javascript/dashboard/components-next/Campaigns/Pages/CampaignPage/LiveChatCampaign/EditLiveChatCampaignDialog.vue"]]),LTt={__name:"ConfirmDeleteCampaignDialog",props:{selectedCampaign:{type:Object,default:null}},setup(t,{expose:n}){const a=t,{t:e}=Q(),s=Fe(),r=P(null),o=async c=>{if(c)try{await s.dispatch("campaigns/delete",c),Z(e("CAMPAIGN.CONFIRM_DELETE.API.SUCCESS_MESSAGE"))}catch{Z(e("CAMPAIGN.CONFIRM_DELETE.API.ERROR_MESSAGE"))}},i=async()=>{var c;await o(a.selectedCampaign.id),(c=r.value)==null||c.close()};n({dialogRef:r});const l={props:a,t:e,store:s,dialogRef:r,deleteCampaign:o,handleDialogConfirm:i,ref:P,get useStore(){return Fe},get useI18n(){return Q},get useAlert(){return Z},Dialog:la};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}};function DTt(t,n,a,e,s,r){return p(),L(e.Dialog,{ref:"dialogRef",type:"alert",title:e.t("CAMPAIGN.CONFIRM_DELETE.TITLE"),description:e.t("CAMPAIGN.CONFIRM_DELETE.DESCRIPTION"),"confirm-button-label":e.t("CAMPAIGN.CONFIRM_DELETE.CONFIRM"),onConfirm:e.handleDialogConfirm},null,8,["title","description","confirm-button-label"])}const w1=G(LTt,[["render",DTt],["__file","/app/app/javascript/dashboard/components-next/Campaigns/Pages/CampaignPage/ConfirmDeleteCampaignDialog.vue"]]),PTt=[{id:1,title:"Chatbot Assistance",inbox:{id:2,name:"PaperLayer Website",channel_type:"Channel::WebWidget",phone_number:""},sender:{id:1,name:"Alexa Rivera"},message:"Hello!  Need help with our chatbot features? Feel free to ask!",campaign_status:"active",enabled:!0,campaign_type:"ongoing",trigger_rules:{url:"https://www.chatwoot.com/features/chatbot/",time_on_page:10},trigger_only_during_business_hours:!0,created_at:"2024-10-24T13:10:26.636Z",updated_at:"2024-10-24T13:10:26.636Z"},{id:2,title:"Pricing Information Support",inbox:{id:2,name:"PaperLayer Website",channel_type:"Channel::WebWidget",phone_number:""},sender:{id:1,name:"Jamie Lee"},message:"Hello!  Any questions on pricing? Im here to help!",campaign_status:"active",enabled:!1,campaign_type:"ongoing",trigger_rules:{url:"https://www.chatwoot.com/pricings",time_on_page:10},trigger_only_during_business_hours:!1,created_at:"2024-10-24T13:11:08.763Z",updated_at:"2024-10-24T13:11:08.763Z"},{id:3,title:"Product Setup Assistance",inbox:{id:2,name:"PaperLayer Website",channel_type:"Channel::WebWidget",phone_number:""},sender:{id:1,name:"Chatwoot"},message:"Hi! Chatwoot here. Need help setting up? Let me know!",campaign_status:"active",enabled:!1,campaign_type:"ongoing",trigger_rules:{url:"https://{*.}?chatwoot.com/apps/account/*/settings/inboxes/new/",time_on_page:10},trigger_only_during_business_hours:!1,created_at:"2024-10-24T13:11:44.285Z",updated_at:"2024-10-24T13:11:44.285Z"},{id:4,title:"General Assistance Campaign",inbox:{id:2,name:"PaperLayer Website",channel_type:"Channel::WebWidget",phone_number:""},sender:{id:1,name:"Chris Barlow"},message:"Hi there!  Im here for any questions you may have. Lets chat!",campaign_status:"active",enabled:!0,campaign_type:"ongoing",trigger_rules:{url:"https://siv.com",time_on_page:200},trigger_only_during_business_hours:!1,created_at:"2024-10-29T19:54:33.741Z",updated_at:"2024-10-29T19:56:26.296Z"}],mP=[{id:1,title:"Customer Feedback Request",inbox:{id:6,name:"PaperLayer Mobile",channel_type:"Channel::Sms",phone_number:"+29818373149903",provider:"default"},message:"Hello! Enjoying our product? Share your feedback on G2 and earn a $25 Amazon coupon: https://chwt.app/g2-review",campaign_status:"active",enabled:!0,campaign_type:"one_off",scheduled_at:1729775588,audience:[{id:4,type:"Label"},{id:5,type:"Label"},{id:6,type:"Label"}],trigger_rules:{},trigger_only_during_business_hours:!1,created_at:"2024-10-24T13:13:08.496Z",updated_at:"2024-10-24T13:15:38.698Z"},{id:2,title:"Welcome New Customer",inbox:{id:6,name:"PaperLayer Mobile",channel_type:"Channel::Sms",phone_number:"+29818373149903",provider:"default"},message:"Welcome aboard!  Let us know if you have any questions.",campaign_status:"completed",enabled:!0,campaign_type:"one_off",scheduled_at:1729732500,audience:[{id:1,type:"Label"},{id:6,type:"Label"},{id:5,type:"Label"},{id:2,type:"Label"},{id:4,type:"Label"}],trigger_rules:{},trigger_only_during_business_hours:!1,created_at:"2024-10-24T13:14:00.168Z",updated_at:"2024-10-24T13:15:38.707Z"},{id:3,title:"New Business Welcome",inbox:{id:6,name:"PaperLayer Mobile",channel_type:"Channel::Sms",phone_number:"+29818373149903",provider:"default"},message:"Hello! Were excited to have your business with us!",campaign_status:"active",enabled:!0,campaign_type:"one_off",scheduled_at:1730368440,audience:[{id:1,type:"Label"},{id:3,type:"Label"},{id:6,type:"Label"},{id:4,type:"Label"},{id:2,type:"Label"},{id:5,type:"Label"}],trigger_rules:{},trigger_only_during_business_hours:!1,created_at:"2024-10-30T07:54:49.915Z",updated_at:"2024-10-30T07:54:49.915Z"},{id:4,title:"New Member Onboarding",inbox:{id:6,name:"PaperLayer Mobile",channel_type:"Channel::Sms",phone_number:"+29818373149903",provider:"default"},message:"Welcome to the team! Reach out if you have questions.",campaign_status:"completed",enabled:!0,campaign_type:"one_off",scheduled_at:1730304840,audience:[{id:1,type:"Label"},{id:3,type:"Label"},{id:6,type:"Label"}],trigger_rules:{},trigger_only_during_business_hours:!1,created_at:"2024-10-29T16:14:10.374Z",updated_at:"2024-10-30T16:15:03.157Z"}],kTt={__name:"LiveChatCampaignEmptyState",props:{title:{type:String,default:""},subtitle:{type:String,default:""}},setup(t,{expose:n}){n();const a={get ONGOING_CAMPAIGN_EMPTY_STATE_CONTENT(){return PTt},EmptyStateLayout:Or,CampaignCard:p_};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},BTt={class:"flex flex-col gap-4 p-px"};function FTt(t,n,a,e,s,r){return p(),L(e.EmptyStateLayout,{title:a.title,subtitle:a.subtitle},{"empty-state-item":z(()=>[f("div",BTt,[(p(!0),g(de,null,Ae(e.ONGOING_CAMPAIGN_EMPTY_STATE_CONTENT,o=>(p(),L(e.CampaignCard,{key:o.id,title:o.title,message:o.message,"is-enabled":o.enabled,status:o.campaign_status,sender:o.sender,inbox:o.inbox,"scheduled-at":o.scheduled_at,"is-live-chat-type":""},null,8,["title","message","is-enabled","status","sender","inbox","scheduled-at"]))),128))])]),_:1},8,["title","subtitle"])}const UTt=G(kTt,[["render",FTt],["__file","/app/app/javascript/dashboard/components-next/Campaigns/EmptyState/LiveChatCampaignEmptyState.vue"]]),$Tt={__name:"LiveChatCampaignsPage",setup(t,{expose:n}){n();const{t:a}=Q(),e=xt(),s=P(null),r=P(null),o=P(null),i=le("campaigns/getUIFlags"),l=S(()=>i.value.isFetching),[c,d]=$t(),u=S(()=>e["campaigns/getLiveChatCampaigns"].value),m=S(()=>{var y;return((y=u.value)==null?void 0:y.length)===0&&!l.value}),E={t:a,getters:e,editLiveChatCampaignDialogRef:s,confirmDeleteCampaignDialogRef:r,selectedCampaign:o,uiFlags:i,isFetchingCampaigns:l,showLiveChatCampaignDialog:c,toggleLiveChatCampaignDialog:d,liveChatCampaigns:u,hasNoLiveChatCampaigns:m,handleEdit:y=>{o.value=y,s.value.dialogRef.open()},handleDelete:y=>{o.value=y,r.value.dialogRef.open()},computed:S,ref:P,get useI18n(){return Q},get useToggle(){return $t},get useStoreGetters(){return xt},get useMapGetter(){return le},Spinner:$n,CampaignLayout:x1,CampaignList:R1,LiveChatCampaignDialog:xTt,EditLiveChatCampaignDialog:MTt,ConfirmDeleteCampaignDialog:w1,LiveChatCampaignEmptyState:UTt};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}},GTt={key:0,class:"flex justify-center items-center py-10 text-n-slate-11"};function VTt(t,n,a,e,s,r){return p(),L(e.CampaignLayout,{"header-title":e.t("CAMPAIGN.LIVE_CHAT.HEADER_TITLE"),"button-label":e.t("CAMPAIGN.LIVE_CHAT.NEW_CAMPAIGN"),onClick:n[1]||(n[1]=o=>e.toggleLiveChatCampaignDialog()),onClose:n[2]||(n[2]=o=>e.toggleLiveChatCampaignDialog(!1))},{action:z(()=>[e.showLiveChatCampaignDialog?(p(),L(e.LiveChatCampaignDialog,{key:0,onClose:n[0]||(n[0]=o=>e.toggleLiveChatCampaignDialog(!1))})):O("v-if",!0)]),default:z(()=>[e.isFetchingCampaigns?(p(),g("div",GTt,[v(e.Spinner)])):e.hasNoLiveChatCampaigns?(p(),L(e.LiveChatCampaignEmptyState,{key:2,title:e.t("CAMPAIGN.LIVE_CHAT.EMPTY_STATE.TITLE"),subtitle:e.t("CAMPAIGN.LIVE_CHAT.EMPTY_STATE.SUBTITLE"),class:"pt-14"},null,8,["title","subtitle"])):(p(),L(e.CampaignList,{key:1,campaigns:e.liveChatCampaigns,"is-live-chat-type":"",onEdit:e.handleEdit,onDelete:e.handleDelete},null,8,["campaigns"])),v(e.EditLiveChatCampaignDialog,{ref:"editLiveChatCampaignDialogRef","selected-campaign":e.selectedCampaign},null,8,["selected-campaign"]),v(e.ConfirmDeleteCampaignDialog,{ref:"confirmDeleteCampaignDialogRef","selected-campaign":e.selectedCampaign},null,8,["selected-campaign"])]),_:1},8,["header-title","button-label"])}const HTt=G($Tt,[["render",VTt],["__file","/app/app/javascript/dashboard/routes/dashboard/campaigns/pages/LiveChatCampaignsPage.vue"]]),jTt={__name:"TagMultiSelectComboBox",props:{options:{type:Array,required:!0,validator:t=>t.every(n=>"value"in n&&"label"in n)},placeholder:{type:String,default:""},modelValue:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},searchPlaceholder:{type:String,default:""},emptyState:{type:String,default:""},message:{type:String,default:""},hasError:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{expose:n,emit:a}){const e=t,s=a,{t:r}=Q(),o=P(e.modelValue),i=P(!1),l=P(""),c=P(null),d=P(null),u=S(()=>{const A=l.value.toLowerCase();return e.options.filter(T=>{var I;return(I=T.label)==null?void 0:I.toLowerCase().includes(A)})}),m=S(()=>e.placeholder||r("COMBOBOX.PLACEHOLDER")),h=S(()=>o.value.map(A=>e.options.find(I=>I.value===A)||{value:A,label:A})),_=A=>{const T=o.value.indexOf(A.value);T===-1?o.value.push(A.value):o.value.splice(T,1),s("update:modelValue",o.value)},E=A=>{const T=o.value.indexOf(A);T!==-1&&(o.value.splice(T,1),s("update:modelValue",o.value))},y=()=>{e.disabled||(i.value=!i.value,i.value&&(l.value="",At(()=>{var A;return(A=c.value)==null?void 0:A.focus()})))};je(()=>e.modelValue,A=>{o.value=A}),n({toggleDropdown:y,open:i,disabled:e.disabled});const b={props:e,emit:s,t:r,selectedValues:o,open:i,search:l,dropdownRef:c,comboboxRef:d,filteredOptions:u,selectPlaceholder:m,selectedTags:h,toggleOption:_,removeTag:E,toggleDropdown:y,ref:P,computed:S,watch:je,nextTick:At,get OnClickOutside(){return lh},get useI18n(){return Q},ComboBoxDropdown:iP};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}},WTt={class:"flex-grow min-w-0 text-sm truncate text-n-slate-12"},zTt=["onClick"],YTt={key:0,class:"flex items-center text-sm text-n-slate-11"};function KTt(t,n,a,e,s,r){return p(),g("div",{ref:"comboboxRef",class:oe(["relative w-full min-w-0",{"cursor-not-allowed":a.disabled,"group/combobox":!a.disabled}]),onClick:n[3]||(n[3]=Ve(()=>{},["prevent"]))},[v(e.OnClickOutside,{onTrigger:n[2]||(n[2]=o=>e.open=!1)},{default:z(()=>[f("div",{class:oe(["flex flex-wrap w-full gap-2 px-3 py-2.5 border rounded-lg cursor-pointer bg-n-alpha-black2 min-h-[42px] transition-all duration-500 ease-in-out",{"border-n-ruby-8":a.hasError,"border-n-weak dark:border-n-weak hover:border-n-slate-6 dark:hover:border-n-slate-6":!a.hasError&&!e.open,"border-n-brand":e.open,"cursor-not-allowed pointer-events-none opacity-50":a.disabled}]),onClick:e.toggleDropdown},[(p(!0),g(de,null,Ae(e.selectedTags,o=>(p(),g("div",{key:o.value,class:"flex items-center justify-center max-w-full gap-1 px-2 py-0.5 rounded-lg bg-n-alpha-black1",onClick:n[0]||(n[0]=Ve(()=>{},["stop"]))},[f("span",WTt,C(o.label),1),f("span",{class:"flex-shrink-0 cursor-pointer i-lucide-x size-3 text-n-slate-11",onClick:i=>e.removeTag(o.value)},null,8,zTt)]))),128)),e.selectedTags.length===0?(p(),g("span",YTt,C(e.selectPlaceholder),1)):O("v-if",!0)],2),v(e.ComboBoxDropdown,{ref:"dropdownRef",open:e.open,options:e.filteredOptions,"search-value":e.search,"search-placeholder":a.searchPlaceholder,"empty-state":a.emptyState,multiple:"","selected-values":e.selectedValues,"onUpdate:searchValue":n[1]||(n[1]=o=>e.search=o),onSelect:e.toggleOption},null,8,["open","options","search-value","search-placeholder","empty-state","selected-values"]),a.message?(p(),g("p",{key:0,class:oe(["mt-2 mb-0 text-xs truncate transition-all duration-500 ease-in-out",{"text-n-ruby-9":a.hasError,"text-n-slate-11":!a.hasError}])},C(a.message),3)):O("v-if",!0)]),_:1})],2)}const hP=G(jTt,[["render",KTt],["__file","/app/app/javascript/dashboard/components-next/combobox/TagMultiSelectComboBox.vue"]]),XTt={__name:"SMSCampaignForm",emits:["submit","cancel"],setup(t,{expose:n,emit:a}){n();const e=a,{t:s}=Q(),r={uiFlags:le("campaigns/getUIFlags"),labels:le("labels/getLabels"),inboxes:le("inboxes/getSMSInboxes")},o={title:"",message:"",inboxId:null,scheduledAt:null,selectedAudience:[]},i=Lt({...o}),l={title:{required:Ge,minLength:Rt(1)},message:{required:Ge,minLength:Rt(1)},inboxId:{required:Ge},scheduledAt:{required:Ge},selectedAudience:{required:Ge}},c=rt(l,i),d=S(()=>r.uiFlags.value.isCreating),u=S(()=>{const M=new Date;return new Date(M.getTime()-M.getTimezoneOffset()*6e4).toISOString().slice(0,16)}),m=(M,w,D)=>(M==null?void 0:M.map(B=>({value:B[w],label:B[D]})))??[],h=S(()=>m(r.labels.value,"id","title")),_=S(()=>m(r.inboxes.value,"id","name")),E=(M,w)=>c.value[M].$error?s(`CAMPAIGN.SMS.CREATE.FORM.${w}.ERROR`):"",y=S(()=>({title:E("title","TITLE"),message:E("message","MESSAGE"),inbox:E("inboxId","INBOX"),scheduledAt:E("scheduledAt","SCHEDULED_AT"),audience:E("selectedAudience","AUDIENCE")})),b=S(()=>c.value.$invalid),A=M=>M?new Date(M).toISOString():null,T=()=>{Object.assign(i,o)},I=()=>e("cancel"),N=()=>{var M;return{title:i.title,message:i.message,inbox_id:i.inboxId,scheduled_at:A(i.scheduledAt),audience:(M=i.selectedAudience)==null?void 0:M.map(w=>({id:w,type:"Label"}))}},R={emit:e,t:s,formState:r,initialState:o,state:i,rules:l,v$:c,isCreating:d,currentDateTime:u,mapToOptions:m,audienceList:h,inboxOptions:_,getErrorMessage:E,formErrors:y,isSubmitDisabled:b,formatToUTCString:A,resetState:T,handleCancel:I,prepareCampaignDetails:N,handleSubmit:async()=>{await c.value.$validate()&&(e("submit",N()),T(),I())},reactive:Lt,computed:S,get useI18n(){return Q},get useVuelidate(){return rt},get required(){return Ge},get minLength(){return Rt},get useMapGetter(){return le},Input:sn,TextArea:ni,Button:Se,ComboBox:Cr,TagMultiSelectComboBox:hP};return Object.defineProperty(R,"__isScriptSetup",{enumerable:!1,value:!0}),R}},qTt={class:"flex flex-col gap-1"},ZTt={for:"inbox",class:"mb-0.5 text-sm font-medium text-n-slate-12"},QTt={class:"flex flex-col gap-1"},JTt={for:"audience",class:"mb-0.5 text-sm font-medium text-n-slate-12"},eAt={class:"flex items-center justify-between w-full gap-3"};function tAt(t,n,a,e,s,r){return p(),g("form",{class:"flex flex-col gap-4",onSubmit:Ve(e.handleSubmit,["prevent"])},[v(e.Input,{modelValue:e.state.title,"onUpdate:modelValue":n[0]||(n[0]=o=>e.state.title=o),label:e.t("CAMPAIGN.SMS.CREATE.FORM.TITLE.LABEL"),placeholder:e.t("CAMPAIGN.SMS.CREATE.FORM.TITLE.PLACEHOLDER"),message:e.formErrors.title,"message-type":e.formErrors.title?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),v(e.TextArea,{modelValue:e.state.message,"onUpdate:modelValue":n[1]||(n[1]=o=>e.state.message=o),label:e.t("CAMPAIGN.SMS.CREATE.FORM.MESSAGE.LABEL"),placeholder:e.t("CAMPAIGN.SMS.CREATE.FORM.MESSAGE.PLACEHOLDER"),"show-character-count":"",message:e.formErrors.message,"message-type":e.formErrors.message?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),f("div",qTt,[f("label",ZTt,C(e.t("CAMPAIGN.SMS.CREATE.FORM.INBOX.LABEL")),1),v(e.ComboBox,{id:"inbox",modelValue:e.state.inboxId,"onUpdate:modelValue":n[2]||(n[2]=o=>e.state.inboxId=o),options:e.inboxOptions,"has-error":!!e.formErrors.inbox,placeholder:e.t("CAMPAIGN.SMS.CREATE.FORM.INBOX.PLACEHOLDER"),message:e.formErrors.inbox,class:"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:dark:outline-n-weak [&>div>button:not(.focused)]:hover:!outline-n-slate-6"},null,8,["modelValue","options","has-error","placeholder","message"])]),f("div",QTt,[f("label",JTt,C(e.t("CAMPAIGN.SMS.CREATE.FORM.AUDIENCE.LABEL")),1),v(e.TagMultiSelectComboBox,{modelValue:e.state.selectedAudience,"onUpdate:modelValue":n[3]||(n[3]=o=>e.state.selectedAudience=o),options:e.audienceList,label:e.t("CAMPAIGN.SMS.CREATE.FORM.AUDIENCE.LABEL"),placeholder:e.t("CAMPAIGN.SMS.CREATE.FORM.AUDIENCE.PLACEHOLDER"),"has-error":!!e.formErrors.audience,message:e.formErrors.audience,class:"[&>div>button]:bg-n-alpha-black2"},null,8,["modelValue","options","label","placeholder","has-error","message"])]),v(e.Input,{modelValue:e.state.scheduledAt,"onUpdate:modelValue":n[4]||(n[4]=o=>e.state.scheduledAt=o),label:e.t("CAMPAIGN.SMS.CREATE.FORM.SCHEDULED_AT.LABEL"),type:"datetime-local",min:e.currentDateTime,placeholder:e.t("CAMPAIGN.SMS.CREATE.FORM.SCHEDULED_AT.PLACEHOLDER"),message:e.formErrors.scheduledAt,"message-type":e.formErrors.scheduledAt?"error":"info"},null,8,["modelValue","label","min","placeholder","message","message-type"]),f("div",eAt,[v(e.Button,{variant:"faded",color:"slate",type:"button",label:e.t("CAMPAIGN.SMS.CREATE.FORM.BUTTONS.CANCEL"),class:"w-full bg-n-alpha-2 text-n-blue-text hover:bg-n-alpha-3",onClick:e.handleCancel},null,8,["label"]),v(e.Button,{label:e.t("CAMPAIGN.SMS.CREATE.FORM.BUTTONS.CREATE"),class:"w-full",type:"submit","is-loading":e.isCreating,disabled:e.isCreating||e.isSubmitDisabled},null,8,["label","is-loading","disabled"])])],32)}const nAt=G(XTt,[["render",tAt],["__file","/app/app/javascript/dashboard/components-next/Campaigns/Pages/CampaignPage/SMSCampaign/SMSCampaignForm.vue"]]),aAt={__name:"SMSCampaignDialog",emits:["close"],setup(t,{expose:n,emit:a}){n();const e=a,s=Fe(),{t:r}=Q(),o=async d=>{var u;try{await s.dispatch("campaigns/create",d),Nt(Zc.CREATE_CAMPAIGN,{type:Qc.ONE_OFF}),Z(r("CAMPAIGN.SMS.CREATE.FORM.API.SUCCESS_MESSAGE"))}catch(m){const h=((u=m==null?void 0:m.response)==null?void 0:u.message)||r("CAMPAIGN.SMS.CREATE.FORM.API.ERROR_MESSAGE");Z(h)}},c={emit:e,store:s,t:r,addCampaign:o,handleSubmit:d=>{o(d)},handleClose:()=>e("close"),get useI18n(){return Q},get useStore(){return Fe},get useAlert(){return Z},get useTrack(){return Nt},get CAMPAIGN_TYPES(){return Qc},get CAMPAIGNS_EVENTS(){return Zc},SMSCampaignForm:nAt};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}},sAt={class:"w-[25rem] z-50 min-w-0 absolute top-10 ltr:right-0 rtl:left-0 bg-n-alpha-3 backdrop-blur-[100px] p-6 rounded-xl border border-n-weak shadow-md flex flex-col gap-6"},oAt={class:"text-base font-medium text-n-slate-12"};function rAt(t,n,a,e,s,r){return p(),g("div",sAt,[f("h3",oAt,C(e.t("CAMPAIGN.SMS.CREATE.TITLE")),1),v(e.SMSCampaignForm,{onSubmit:e.handleSubmit,onCancel:e.handleClose})])}const iAt=G(aAt,[["render",rAt],["__file","/app/app/javascript/dashboard/components-next/Campaigns/Pages/CampaignPage/SMSCampaign/SMSCampaignDialog.vue"]]),lAt={__name:"SMSCampaignEmptyState",props:{title:{type:String,default:""},subtitle:{type:String,default:""}},setup(t,{expose:n}){n();const a={get ONE_OFF_CAMPAIGN_EMPTY_STATE_CONTENT(){return mP},EmptyStateLayout:Or,CampaignCard:p_};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},cAt={class:"flex flex-col gap-4 p-px"};function dAt(t,n,a,e,s,r){return p(),L(e.EmptyStateLayout,{title:a.title,subtitle:a.subtitle},{"empty-state-item":z(()=>[f("div",cAt,[(p(!0),g(de,null,Ae(e.ONE_OFF_CAMPAIGN_EMPTY_STATE_CONTENT,o=>(p(),L(e.CampaignCard,{key:o.id,title:o.title,message:o.message,"is-enabled":o.enabled,status:o.campaign_status,sender:o.sender,inbox:o.inbox,"scheduled-at":o.scheduled_at},null,8,["title","message","is-enabled","status","sender","inbox","scheduled-at"]))),128))])]),_:1},8,["title","subtitle"])}const uAt=G(lAt,[["render",dAt],["__file","/app/app/javascript/dashboard/components-next/Campaigns/EmptyState/SMSCampaignEmptyState.vue"]]),pAt={__name:"SMSCampaignsPage",setup(t,{expose:n}){n();const{t:a}=Q(),e=xt(),s=P(null),[r,o]=$t(),i=le("campaigns/getUIFlags"),l=S(()=>i.value.isFetching),c=P(null),d=S(()=>e["campaigns/getSMSCampaigns"].value),u=S(()=>{var _;return((_=d.value)==null?void 0:_.length)===0&&!l.value}),h={t:a,getters:e,selectedCampaign:s,showSMSCampaignDialog:r,toggleSMSCampaignDialog:o,uiFlags:i,isFetchingCampaigns:l,confirmDeleteCampaignDialogRef:c,SMSCampaigns:d,hasNoSMSCampaigns:u,handleDelete:_=>{s.value=_,c.value.dialogRef.open()},computed:S,ref:P,get useI18n(){return Q},get useToggle(){return $t},get useStoreGetters(){return xt},get useMapGetter(){return le},Spinner:$n,CampaignLayout:x1,CampaignList:R1,SMSCampaignDialog:iAt,ConfirmDeleteCampaignDialog:w1,SMSCampaignEmptyState:uAt};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}},fAt={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"};function mAt(t,n,a,e,s,r){return p(),L(e.CampaignLayout,{"header-title":e.t("CAMPAIGN.SMS.HEADER_TITLE"),"button-label":e.t("CAMPAIGN.SMS.NEW_CAMPAIGN"),onClick:n[1]||(n[1]=o=>e.toggleSMSCampaignDialog()),onClose:n[2]||(n[2]=o=>e.toggleSMSCampaignDialog(!1))},{action:z(()=>[e.showSMSCampaignDialog?(p(),L(e.SMSCampaignDialog,{key:0,onClose:n[0]||(n[0]=o=>e.toggleSMSCampaignDialog(!1))})):O("v-if",!0)]),default:z(()=>[e.isFetchingCampaigns?(p(),g("div",fAt,[v(e.Spinner)])):e.hasNoSMSCampaigns?(p(),L(e.SMSCampaignEmptyState,{key:2,title:e.t("CAMPAIGN.SMS.EMPTY_STATE.TITLE"),subtitle:e.t("CAMPAIGN.SMS.EMPTY_STATE.SUBTITLE"),class:"pt-14"},null,8,["title","subtitle"])):(p(),L(e.CampaignList,{key:1,campaigns:e.SMSCampaigns,onDelete:e.handleDelete},null,8,["campaigns"])),v(e.ConfirmDeleteCampaignDialog,{ref:"confirmDeleteCampaignDialogRef","selected-campaign":e.selectedCampaign},null,8,["selected-campaign"])]),_:1},8,["header-title","button-label"])}const hAt=G(pAt,[["render",mAt],["__file","/app/app/javascript/dashboard/routes/dashboard/campaigns/pages/SMSCampaignsPage.vue"]]),_At={__name:"WhatsAppCampaignForm",emits:["submit","cancel"],setup(t,{expose:n,emit:a}){n();const e=a,{t:s}=Q(),r={uiFlags:le("campaigns/getUIFlags"),labels:le("labels/getLabels"),inboxes:le("inboxes/getWhatsAppInboxes"),getFilteredWhatsAppTemplates:le("inboxes/getFilteredWhatsAppTemplates")},o={title:"",inboxId:null,templateId:null,scheduledAt:null,selectedAudience:[]},i=Lt({...o}),l=P(null),c={title:{required:Ge,minLength:Rt(1)},inboxId:{required:Ge},templateId:{required:Ge},scheduledAt:{required:Ge},selectedAudience:{required:Ge}},d=rt(c,i),u=S(()=>r.uiFlags.value.isCreating),m=S(()=>{const k=new Date;return new Date(k.getTime()-k.getTimezoneOffset()*6e4).toISOString().slice(0,16)}),h=(k,V,F)=>(k==null?void 0:k.map($=>({value:$[V],label:$[F]})))??[],_=S(()=>h(r.labels.value,"id","title")),E=S(()=>h(r.inboxes.value,"id","name")),y=S(()=>i.inboxId?r.getFilteredWhatsAppTemplates.value(i.inboxId).map(V=>{const F=V.name.replace(/_/g," ").replace(/\b\w/g,$=>$.toUpperCase());return{value:V.id,label:`${F} (${V.language||"en"})`,template:V}}):[]),b=S(()=>{var k;return i.templateId?(k=y.value.find(V=>V.value===i.templateId))==null?void 0:k.template:null}),A=(k,V)=>d.value[k].$error?s(`CAMPAIGN.WHATSAPP.CREATE.FORM.${V}.ERROR`):"",T=S(()=>({title:A("title","TITLE"),inbox:A("inboxId","INBOX"),template:A("templateId","TEMPLATE"),scheduledAt:A("scheduledAt","SCHEDULED_AT"),audience:A("selectedAudience","AUDIENCE")})),I=S(()=>{var k,V;return((V=(k=l.value)==null?void 0:k.v$)==null?void 0:V.$invalid)===!1||!0}),N=S(()=>d.value.$invalid||!I.value),x=k=>k?new Date(k).toISOString():null,R=()=>{Object.assign(i,o),d.value.$reset()},M=()=>e("cancel"),w=()=>{var Y;const k=b.value,V=l.value,F=(V==null?void 0:V.renderedTemplate)||"",$={name:(k==null?void 0:k.name)||"",namespace:(k==null?void 0:k.namespace)||"",category:(k==null?void 0:k.category)||"UTILITY",language:(k==null?void 0:k.language)||"en_US",processed_params:(V==null?void 0:V.processedParams)||{}};return{title:i.title,message:F,template_params:$,inbox_id:i.inboxId,scheduled_at:x(i.scheduledAt),audience:(Y=i.selectedAudience)==null?void 0:Y.map(j=>({id:j,type:"Label"}))}},D=async()=>{await d.value.$validate()&&(e("submit",w()),R(),M())};je(()=>i.inboxId,()=>{i.templateId=null});const B={emit:e,t:s,formState:r,initialState:o,state:i,templateParserRef:l,rules:c,v$:d,isCreating:u,currentDateTime:m,mapToOptions:h,audienceList:_,inboxOptions:E,templateOptions:y,selectedTemplate:b,getErrorMessage:A,formErrors:T,hasRequiredTemplateParams:I,isSubmitDisabled:N,formatToUTCString:x,resetState:R,handleCancel:M,prepareCampaignDetails:w,handleSubmit:D,reactive:Lt,computed:S,watch:je,ref:P,get useI18n(){return Q},get useVuelidate(){return rt},get required(){return Ge},get minLength(){return Rt},get useMapGetter(){return le},Input:sn,Button:Se,ComboBox:Cr,TagMultiSelectComboBox:hP,WhatsAppTemplateParser:I1};return Object.defineProperty(B,"__isScriptSetup",{enumerable:!1,value:!0}),B}},gAt={class:"flex flex-col gap-1"},bAt={for:"inbox",class:"mb-0.5 text-sm font-medium text-n-slate-12"},vAt={class:"flex flex-col gap-1"},EAt={for:"template",class:"mb-0.5 text-sm font-medium text-n-slate-12"},SAt={class:"mt-1 text-xs text-n-slate-11"},TAt={class:"flex flex-col gap-1"},AAt={for:"audience",class:"mb-0.5 text-sm font-medium text-n-slate-12"},yAt={class:"flex gap-3 justify-between items-center w-full"};function IAt(t,n,a,e,s,r){return p(),g("form",{class:"flex flex-col gap-4",onSubmit:Ve(e.handleSubmit,["prevent"])},[v(e.Input,{modelValue:e.state.title,"onUpdate:modelValue":n[0]||(n[0]=o=>e.state.title=o),label:e.t("CAMPAIGN.WHATSAPP.CREATE.FORM.TITLE.LABEL"),placeholder:e.t("CAMPAIGN.WHATSAPP.CREATE.FORM.TITLE.PLACEHOLDER"),message:e.formErrors.title,"message-type":e.formErrors.title?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),f("div",gAt,[f("label",bAt,C(e.t("CAMPAIGN.WHATSAPP.CREATE.FORM.INBOX.LABEL")),1),v(e.ComboBox,{id:"inbox",modelValue:e.state.inboxId,"onUpdate:modelValue":n[1]||(n[1]=o=>e.state.inboxId=o),options:e.inboxOptions,"has-error":!!e.formErrors.inbox,placeholder:e.t("CAMPAIGN.WHATSAPP.CREATE.FORM.INBOX.PLACEHOLDER"),message:e.formErrors.inbox,class:"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:dark:outline-n-weak [&>div>button:not(.focused)]:hover:!outline-n-slate-6"},null,8,["modelValue","options","has-error","placeholder","message"])]),f("div",vAt,[f("label",EAt,C(e.t("CAMPAIGN.WHATSAPP.CREATE.FORM.TEMPLATE.LABEL")),1),v(e.ComboBox,{id:"template",modelValue:e.state.templateId,"onUpdate:modelValue":n[2]||(n[2]=o=>e.state.templateId=o),options:e.templateOptions,"has-error":!!e.formErrors.template,placeholder:e.t("CAMPAIGN.WHATSAPP.CREATE.FORM.TEMPLATE.PLACEHOLDER"),message:e.formErrors.template,class:"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:dark:outline-n-weak [&>div>button:not(.focused)]:hover:!outline-n-slate-6"},null,8,["modelValue","options","has-error","placeholder","message"]),f("p",SAt,C(e.t("CAMPAIGN.WHATSAPP.CREATE.FORM.TEMPLATE.INFO")),1)]),O(" Template Parser "),e.selectedTemplate?(p(),L(e.WhatsAppTemplateParser,{key:0,ref:"templateParserRef",template:e.selectedTemplate},null,8,["template"])):O("v-if",!0),f("div",TAt,[f("label",AAt,C(e.t("CAMPAIGN.WHATSAPP.CREATE.FORM.AUDIENCE.LABEL")),1),v(e.TagMultiSelectComboBox,{modelValue:e.state.selectedAudience,"onUpdate:modelValue":n[3]||(n[3]=o=>e.state.selectedAudience=o),options:e.audienceList,label:e.t("CAMPAIGN.WHATSAPP.CREATE.FORM.AUDIENCE.LABEL"),placeholder:e.t("CAMPAIGN.WHATSAPP.CREATE.FORM.AUDIENCE.PLACEHOLDER"),"has-error":!!e.formErrors.audience,message:e.formErrors.audience,class:"[&>div>button]:bg-n-alpha-black2"},null,8,["modelValue","options","label","placeholder","has-error","message"])]),v(e.Input,{modelValue:e.state.scheduledAt,"onUpdate:modelValue":n[4]||(n[4]=o=>e.state.scheduledAt=o),label:e.t("CAMPAIGN.WHATSAPP.CREATE.FORM.SCHEDULED_AT.LABEL"),type:"datetime-local",min:e.currentDateTime,placeholder:e.t("CAMPAIGN.WHATSAPP.CREATE.FORM.SCHEDULED_AT.PLACEHOLDER"),message:e.formErrors.scheduledAt,"message-type":e.formErrors.scheduledAt?"error":"info"},null,8,["modelValue","label","min","placeholder","message","message-type"]),f("div",yAt,[v(e.Button,{variant:"faded",color:"slate",type:"button",label:e.t("CAMPAIGN.WHATSAPP.CREATE.FORM.BUTTONS.CANCEL"),class:"w-full bg-n-alpha-2 text-n-blue-text hover:bg-n-alpha-3",onClick:e.handleCancel},null,8,["label"]),v(e.Button,{label:e.t("CAMPAIGN.WHATSAPP.CREATE.FORM.BUTTONS.CREATE"),class:"w-full",type:"submit","is-loading":e.isCreating,disabled:e.isCreating||e.isSubmitDisabled},null,8,["label","is-loading","disabled"])])],32)}const CAt=G(_At,[["render",IAt],["__file","/app/app/javascript/dashboard/components-next/Campaigns/Pages/CampaignPage/WhatsAppCampaign/WhatsAppCampaignForm.vue"]]),OAt={__name:"WhatsAppCampaignDialog",emits:["close"],setup(t,{expose:n,emit:a}){n();const e=a,s=Fe(),{t:r}=Q(),o=async d=>{var u;try{await s.dispatch("campaigns/create",d),Nt(Zc.CREATE_CAMPAIGN,{type:Qc.ONE_OFF}),Z(r("CAMPAIGN.WHATSAPP.CREATE.FORM.API.SUCCESS_MESSAGE"))}catch(m){const h=((u=m==null?void 0:m.response)==null?void 0:u.message)||r("CAMPAIGN.WHATSAPP.CREATE.FORM.API.ERROR_MESSAGE");Z(h)}},c={emit:e,store:s,t:r,addCampaign:o,handleSubmit:d=>{o(d)},handleClose:()=>e("close"),get useI18n(){return Q},get useStore(){return Fe},get useAlert(){return Z},get useTrack(){return Nt},get CAMPAIGN_TYPES(){return Qc},get CAMPAIGNS_EVENTS(){return Zc},WhatsAppCampaignForm:CAt};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}},NAt={class:"w-[25rem] z-50 min-w-0 absolute top-10 ltr:right-0 rtl:left-0 bg-n-alpha-3 backdrop-blur-[100px] rounded-xl border border-n-weak shadow-md max-h-[80vh] overflow-y-auto"},xAt={class:"p-6 flex flex-col gap-6"},RAt={class:"text-base font-medium text-n-slate-12 flex-shrink-0"};function wAt(t,n,a,e,s,r){return p(),g("div",NAt,[f("div",xAt,[f("h3",RAt,C(e.t("CAMPAIGN.WHATSAPP.CREATE.TITLE")),1),v(e.WhatsAppCampaignForm,{onSubmit:e.handleSubmit,onCancel:e.handleClose})])])}const MAt=G(OAt,[["render",wAt],["__file","/app/app/javascript/dashboard/components-next/Campaigns/Pages/CampaignPage/WhatsAppCampaign/WhatsAppCampaignDialog.vue"]]),LAt={__name:"WhatsAppCampaignEmptyState",props:{title:{type:String,default:""},subtitle:{type:String,default:""}},setup(t,{expose:n}){n();const a={get ONE_OFF_CAMPAIGN_EMPTY_STATE_CONTENT(){return mP},EmptyStateLayout:Or,CampaignCard:p_};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},DAt={class:"flex flex-col gap-4 p-px"};function PAt(t,n,a,e,s,r){return p(),L(e.EmptyStateLayout,{title:a.title,subtitle:a.subtitle},{"empty-state-item":z(()=>[f("div",DAt,[(p(!0),g(de,null,Ae(e.ONE_OFF_CAMPAIGN_EMPTY_STATE_CONTENT,o=>(p(),L(e.CampaignCard,{key:o.id,title:o.title,message:o.message,"is-enabled":o.enabled,status:o.campaign_status,sender:o.sender,inbox:o.inbox,"scheduled-at":o.scheduled_at},null,8,["title","message","is-enabled","status","sender","inbox","scheduled-at"]))),128))])]),_:1},8,["title","subtitle"])}const kAt=G(LAt,[["render",PAt],["__file","/app/app/javascript/dashboard/components-next/Campaigns/EmptyState/WhatsAppCampaignEmptyState.vue"]]),BAt={__name:"WhatsAppCampaignsPage",setup(t,{expose:n}){n();const{t:a}=Q(),e=xt(),s=P(null),[r,o]=$t(),i=le("campaigns/getUIFlags"),l=S(()=>i.value.isFetching),c=P(null),d=S(()=>e["campaigns/getWhatsAppCampaigns"].value),u=S(()=>{var _;return((_=d.value)==null?void 0:_.length)===0&&!l.value}),h={t:a,getters:e,selectedCampaign:s,showWhatsAppCampaignDialog:r,toggleWhatsAppCampaignDialog:o,uiFlags:i,isFetchingCampaigns:l,confirmDeleteCampaignDialogRef:c,WhatsAppCampaigns:d,hasNoWhatsAppCampaigns:u,handleDelete:_=>{s.value=_,c.value.dialogRef.open()},computed:S,ref:P,get useI18n(){return Q},get useToggle(){return $t},get useStoreGetters(){return xt},get useMapGetter(){return le},Spinner:$n,CampaignLayout:x1,CampaignList:R1,WhatsAppCampaignDialog:MAt,ConfirmDeleteCampaignDialog:w1,WhatsAppCampaignEmptyState:kAt};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}},FAt={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"};function UAt(t,n,a,e,s,r){return p(),L(e.CampaignLayout,{"header-title":e.t("CAMPAIGN.WHATSAPP.HEADER_TITLE"),"button-label":e.t("CAMPAIGN.WHATSAPP.NEW_CAMPAIGN"),onClick:n[1]||(n[1]=o=>e.toggleWhatsAppCampaignDialog()),onClose:n[2]||(n[2]=o=>e.toggleWhatsAppCampaignDialog(!1))},{action:z(()=>[e.showWhatsAppCampaignDialog?(p(),L(e.WhatsAppCampaignDialog,{key:0,onClose:n[0]||(n[0]=o=>e.toggleWhatsAppCampaignDialog(!1))})):O("v-if",!0)]),default:z(()=>[e.isFetchingCampaigns?(p(),g("div",FAt,[v(e.Spinner)])):e.hasNoWhatsAppCampaigns?(p(),L(e.WhatsAppCampaignEmptyState,{key:2,title:e.t("CAMPAIGN.WHATSAPP.EMPTY_STATE.TITLE"),subtitle:e.t("CAMPAIGN.WHATSAPP.EMPTY_STATE.SUBTITLE"),class:"pt-14"},null,8,["title","subtitle"])):(p(),L(e.CampaignList,{key:1,campaigns:e.WhatsAppCampaigns,onDelete:e.handleDelete},null,8,["campaigns"])),v(e.ConfirmDeleteCampaignDialog,{ref:"confirmDeleteCampaignDialogRef","selected-campaign":e.selectedCampaign},null,8,["selected-campaign"])]),_:1},8,["header-title","button-label"])}const $At=G(BAt,[["render",UAt],["__file","/app/app/javascript/dashboard/routes/dashboard/campaigns/pages/WhatsAppCampaignsPage.vue"]]),Zd={featureFlag:pt.CAMPAIGNS,permissions:["administrator"]},GAt={routes:[{path:vt("accounts/:accountId/campaigns"),component:O1t,children:[{path:"",redirect:t=>({name:"campaigns_ongoing_index",params:t.params})},{path:"ongoing",name:"campaigns_ongoing_index",meta:Zd,redirect:t=>({name:"campaigns_livechat_index",params:t.params})},{path:"one_off",name:"campaigns_one_off_index",meta:Zd,redirect:t=>({name:"campaigns_sms_index",params:t.params})},{path:"live_chat",name:"campaigns_livechat_index",meta:Zd,component:HTt},{path:"sms",name:"campaigns_sms_index",meta:Zd,component:hAt},{path:"whatsapp",name:"campaigns_whatsapp_index",meta:{...Zd,featureFlag:pt.WHATSAPP_CAMPAIGNS},component:$At}]}]},VAt={__name:"AssistantCard",props:{id:{type:Number,required:!0},name:{type:String,required:!0},description:{type:String,required:!0},updatedAt:{type:Number,required:!0}},emits:["action"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{checkPermissions:r}=uo(),{t:o}=Q(),[i,l]=$t(),c=S(()=>{const h=[{label:o("CAPTAIN.ASSISTANTS.OPTIONS.VIEW_CONNECTED_INBOXES"),value:"viewConnectedInboxes",action:"viewConnectedInboxes",icon:"i-lucide-link"}];return r(["administrator"])&&h.push({label:o("CAPTAIN.ASSISTANTS.OPTIONS.EDIT_ASSISTANT"),value:"edit",action:"edit",icon:"i-lucide-pencil-line"},{label:o("CAPTAIN.ASSISTANTS.OPTIONS.DELETE_ASSISTANT"),value:"delete",action:"delete",icon:"i-lucide-trash"}),h}),d=S(()=>kn(e.updatedAt)),m={props:e,emit:s,checkPermissions:r,t:o,showActionsDropdown:i,toggleDropdown:l,menuItems:c,lastUpdatedAt:d,handleAction:({action:h,value:_})=>{l(!1),s("action",{action:h,value:_,id:e.id})},computed:S,get useToggle(){return $t},get useI18n(){return Q},get dynamicTime(){return kn},get usePolicy(){return uo},CardLayout:ho,DropdownMenu:ds,Button:Se};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}},HAt={class:"flex justify-between w-full gap-1"},jAt={class:"flex items-center gap-2"},WAt={class:"relative flex items-center group"},zAt={class:"flex items-center justify-between w-full gap-4"},YAt={class:"text-sm truncate text-n-slate-11"},KAt={class:"text-sm text-n-slate-11 line-clamp-1 shrink-0"};function XAt(t,n,a,e,s,r){const o=H("router-link"),i=nt("on-clickaway");return p(),L(e.CardLayout,null,{default:z(()=>[f("div",HAt,[v(o,{to:{name:"captain_assistants_edit",params:{assistantId:a.id}},class:"text-base text-n-slate-12 line-clamp-1 hover:underline transition-colors"},{default:z(()=>[Oe(C(a.name),1)]),_:1},8,["to"]),f("div",jAt,[ce((p(),g("div",WAt,[v(e.Button,{icon:"i-lucide-ellipsis-vertical",color:"slate",size:"xs",class:"rounded-md group-hover:bg-n-alpha-2",onClick:n[0]||(n[0]=l=>e.toggleDropdown())}),e.showActionsDropdown?(p(),L(e.DropdownMenu,{key:0,"menu-items":e.menuItems,class:"mt-1 ltr:right-0 rtl:left-0 top-full",onAction:n[1]||(n[1]=l=>e.handleAction(l))},null,8,["menu-items"])):O("v-if",!0)])),[[i,()=>e.toggleDropdown(!1)]])])]),f("div",zAt,[f("span",YAt,C(a.description||"Description not available"),1),f("span",KAt,C(e.lastUpdatedAt),1)])]),_:1})}const _P=G(VAt,[["render",XAt],["__file","/app/app/javascript/dashboard/components-next/captain/assistant/AssistantCard.vue"]]),qAt={__name:"DeleteDialog",props:{type:{type:String,required:!0},translationKey:{type:String,required:!0},entity:{type:Object,required:!0},deletePayload:{type:Object,default:null}},emits:["deleteSuccess"],setup(t,{expose:n,emit:a}){const e=t,s=a,{t:r}=Q(),o=Fe(),i=P(null),l=S(()=>e.translationKey||e.type.toUpperCase()),c=async m=>{if(m)try{await o.dispatch(`captain${e.type}/delete`,m),s("deleteSuccess"),Z(r(`CAPTAIN.${l.value}.DELETE.SUCCESS_MESSAGE`))}catch{Z(r(`CAPTAIN.${l.value}.DELETE.ERROR_MESSAGE`))}},d=async()=>{var m;await c(e.deletePayload||e.entity.id),(m=i.value)==null||m.close()};n({dialogRef:i});const u={props:e,emit:s,t:r,store:o,deleteDialogRef:i,i18nKey:l,deleteEntity:c,handleDialogConfirm:d,ref:P,computed:S,get useStore(){return Fe},get useI18n(){return Q},get useAlert(){return Z},Dialog:la};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}};function ZAt(t,n,a,e,s,r){return p(),L(e.Dialog,{ref:"deleteDialogRef",type:"alert",title:e.t(`CAPTAIN.${e.i18nKey}.DELETE.TITLE`),description:e.t(`CAPTAIN.${e.i18nKey}.DELETE.DESCRIPTION`),"confirm-button-label":e.t(`CAPTAIN.${e.i18nKey}.DELETE.CONFIRM`),onConfirm:e.handleDialogConfirm},null,8,["title","description","confirm-button-label"])}const Rd=G(qAt,[["render",ZAt],["__file","/app/app/javascript/dashboard/components-next/captain/pageComponents/DeleteDialog.vue"]]),QAt={__name:"PageLayout",props:{currentPage:{type:Number,default:1},totalCount:{type:Number,default:100},itemsPerPage:{type:Number,default:25},headerTitle:{type:String,default:""},backUrl:{type:[String,Object],default:""},buttonPolicy:{type:Array,default:()=>[]},buttonLabel:{type:String,default:""},featureFlag:{type:String,default:""},isFetching:{type:Boolean,default:!1},showKnowMore:{type:Boolean,default:!0},isEmpty:{type:Boolean,default:!1},showPaginationFooter:{type:Boolean,default:!0}},emits:["click","close","update:currentPage"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{shouldShowPaywall:r}=uo(),o=S(()=>r(e.featureFlag)),c={props:e,emit:s,shouldShowPaywall:r,showPaywall:o,handleButtonClick:()=>{s("click")},handlePageChange:d=>{s("update:currentPage",d)},computed:S,get usePolicy(){return uo},Button:Se,BackButton:Wl,PaginationFooter:N1,Spinner:$n,Policy:ii};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}},JAt={class:"flex flex-col w-full h-full overflow-hidden bg-n-background"},eyt={class:"sticky top-0 z-10 px-6"},tyt={class:"w-full max-w-[60rem] mx-auto"},nyt={class:"flex items-start lg:items-center justify-between w-full py-6 lg:py-0 lg:h-20 gap-4 lg:gap-2 flex-col lg:flex-row"},ayt={class:"flex gap-4 items-center"},syt={class:"text-xl font-medium text-n-slate-12"},oyt={key:1,class:"flex items-center gap-2"},ryt={key:0,class:"relative group/campaign-button"},iyt={class:"flex-1 px-6 overflow-y-auto"},lyt={class:"w-full max-w-[60rem] h-full mx-auto py-4"},cyt={key:1,class:"flex items-center justify-center py-10 text-n-slate-11"},dyt={key:2},uyt={key:3},pyt={key:0,class:"sticky bottom-0 z-10 px-4 pb-4"};function fyt(t,n,a,e,s,r){const o=nt("on-clickaway");return p(),g("section",JAt,[f("header",eyt,[f("div",tyt,[f("div",nyt,[f("div",ayt,[a.backUrl?(p(),L(e.BackButton,{key:0,to:a.backUrl},null,8,["to"])):O("v-if",!0),qe(t.$slots,"headerTitle",{},()=>[f("span",syt,C(a.headerTitle),1)]),!a.isEmpty&&a.showKnowMore?(p(),g("div",oyt,[n[0]||(n[0]=f("div",{class:"w-0.5 h-4 rounded-2xl bg-n-weak"},null,-1)),qe(t.$slots,"knowMore")])):O("v-if",!0)]),!e.showPaywall&&a.buttonLabel?ce((p(),g("div",ryt,[v(e.Policy,{permissions:a.buttonPolicy},{default:z(()=>[v(e.Button,{label:a.buttonLabel,icon:"i-lucide-plus",size:"sm",class:"group-hover/campaign-button:brightness-110",onClick:e.handleButtonClick},null,8,["label"])]),_:1},8,["permissions"]),qe(t.$slots,"action")])),[[o,()=>e.emit("close")]]):O("v-if",!0)]),qe(t.$slots,"subHeader")])]),f("main",iyt,[f("div",lyt,[e.showPaywall?O("v-if",!0):qe(t.$slots,"controls",{key:0}),a.isFetching?(p(),g("div",cyt,[v(e.Spinner)])):e.showPaywall?(p(),g("div",dyt,[qe(t.$slots,"paywall")])):a.isEmpty?(p(),g("div",uyt,[qe(t.$slots,"emptyState")])):qe(t.$slots,"body",{key:4}),qe(t.$slots,"default")])]),a.showPaginationFooter?(p(),g("footer",pyt,[v(e.PaginationFooter,{"current-page":a.currentPage,"total-items":a.totalCount,"items-per-page":a.itemsPerPage,"onUpdate:currentPage":e.handlePageChange},null,8,["current-page","total-items","items-per-page"])])):O("v-if",!0)])}const ql=G(QAt,[["render",fyt],["__file","/app/app/javascript/dashboard/components-next/captain/PageLayout.vue"]]),myt={__name:"Paywall",setup(t,{expose:n}){n();const a=ft(),e=le("getCurrentUser"),s=S(()=>e.value.type==="SuperAdmin"),{accountId:r,isOnChatwootCloud:o}=Ut(),i=S(()=>o.value?"PAYWALL":"ENTERPRISE_PAYWALL"),c={router:a,currentUser:e,isSuperAdmin:s,accountId:r,isOnChatwootCloud:o,i18nKey:i,openBilling:()=>{a.push({name:"billing_settings_index",params:{accountId:r.value}})},computed:S,get useRouter(){return ft},get useMapGetter(){return le},get useAccount(){return Ut},BasePaywallModal:t_};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}},hyt={class:"w-full max-w-[60rem] mx-auto h-full max-h-[448px] grid place-content-center"};function _yt(t,n,a,e,s,r){return p(),g("div",hyt,[v(e.BasePaywallModal,{class:"mx-auto","feature-prefix":"CAPTAIN","i18n-key":e.i18nKey,"is-super-admin":e.isSuperAdmin,"is-on-chatwoot-cloud":e.isOnChatwootCloud,onUpgrade:e.openBilling},null,8,["i18n-key","is-super-admin","is-on-chatwoot-cloud"])])}const bp=G(myt,[["render",_yt],["__file","/app/app/javascript/dashboard/components-next/captain/pageComponents/Paywall.vue"]]),gyt={__name:"AssistantForm",props:{mode:{type:String,required:!0,validator:t=>["edit","create"].includes(t)},assistant:{type:Object,default:()=>({})}},emits:["submit","cancel"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o={uiFlags:le("captainAssistants/getUIFlags")},i={name:"",description:"",productName:"",featureFaq:!1,featureMemory:!1,featureCitation:!1},l=Lt({...i}),c={name:{required:Ge,minLength:Rt(1)},description:{required:Ge,minLength:Rt(1)},productName:{required:Ge,minLength:Rt(1)}},d=rt(c,l),u=S(()=>o.uiFlags.value.creatingItem),m=(T,I)=>d.value[T].$error?r(`CAPTAIN.ASSISTANTS.FORM.${I}.ERROR`):"",h=S(()=>({name:m("name","NAME"),description:m("description","DESCRIPTION"),productName:m("productName","PRODUCT_NAME")})),_=()=>s("cancel"),E=()=>({name:l.name,description:l.description,config:{product_name:l.productName,feature_faq:l.featureFaq,feature_memory:l.featureMemory,feature_citation:l.featureCitation}}),y=async()=>{await d.value.$validate()&&s("submit",E())},b=T=>{if(!T)return;const{name:I,description:N,config:x}=T;Object.assign(l,{name:I,description:N,productName:x.product_name,featureFaq:x.feature_faq||!1,featureMemory:x.feature_memory||!1,featureCitation:x.feature_citation||!1})};je(()=>e.assistant,T=>{e.mode==="edit"&&T&&b(T)},{immediate:!0});const A={props:e,emit:s,t:r,formState:o,initialState:i,state:l,validationRules:c,v$:d,isLoading:u,getErrorMessage:m,formErrors:h,handleCancel:_,prepareAssistantDetails:E,handleSubmit:y,updateStateFromAssistant:b,reactive:Lt,computed:S,watch:je,get useI18n(){return Q},get useVuelidate(){return rt},get required(){return Ge},get minLength(){return Rt},get useMapGetter(){return le},Input:sn,Button:Se,Editor:Ds};return Object.defineProperty(A,"__isScriptSetup",{enumerable:!1,value:!0}),A}},byt={class:"flex flex-col gap-2.5"},vyt={class:"mb-3 text-sm font-medium text-n-slate-12"},Eyt={class:"flex items-center gap-2"},Syt={class:"text-sm font-medium text-n-slate-12"},Tyt={class:"flex items-center gap-2"},Ayt={class:"text-sm font-medium text-n-slate-12"},yyt={class:"flex items-center gap-2"},Iyt={class:"text-sm font-medium text-n-slate-12"},Cyt={class:"flex items-center justify-between w-full gap-3"};function Oyt(t,n,a,e,s,r){return p(),g("form",{class:"flex flex-col gap-4",onSubmit:Ve(e.handleSubmit,["prevent"])},[v(e.Input,{modelValue:e.state.name,"onUpdate:modelValue":n[0]||(n[0]=o=>e.state.name=o),label:e.t("CAPTAIN.ASSISTANTS.FORM.NAME.LABEL"),placeholder:e.t("CAPTAIN.ASSISTANTS.FORM.NAME.PLACEHOLDER"),message:e.formErrors.name,"message-type":e.formErrors.name?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),v(e.Editor,{modelValue:e.state.description,"onUpdate:modelValue":n[1]||(n[1]=o=>e.state.description=o),label:e.t("CAPTAIN.ASSISTANTS.FORM.DESCRIPTION.LABEL"),placeholder:e.t("CAPTAIN.ASSISTANTS.FORM.DESCRIPTION.PLACEHOLDER"),message:e.formErrors.description,"message-type":e.formErrors.description?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),v(e.Input,{modelValue:e.state.productName,"onUpdate:modelValue":n[2]||(n[2]=o=>e.state.productName=o),label:e.t("CAPTAIN.ASSISTANTS.FORM.PRODUCT_NAME.LABEL"),placeholder:e.t("CAPTAIN.ASSISTANTS.FORM.PRODUCT_NAME.PLACEHOLDER"),message:e.formErrors.productName,"message-type":e.formErrors.productName?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),f("fieldset",byt,[f("legend",vyt,C(e.t("CAPTAIN.ASSISTANTS.FORM.FEATURES.TITLE")),1),f("label",Eyt,[ce(f("input",{"onUpdate:modelValue":n[3]||(n[3]=o=>e.state.featureFaq=o),type:"checkbox"},null,512),[[bn,e.state.featureFaq]]),f("span",Syt,C(e.t("CAPTAIN.ASSISTANTS.FORM.FEATURES.ALLOW_CONVERSATION_FAQS")),1)]),f("label",Tyt,[ce(f("input",{"onUpdate:modelValue":n[4]||(n[4]=o=>e.state.featureMemory=o),type:"checkbox"},null,512),[[bn,e.state.featureMemory]]),f("span",Ayt,C(e.t("CAPTAIN.ASSISTANTS.FORM.FEATURES.ALLOW_MEMORIES")),1)]),f("label",yyt,[ce(f("input",{"onUpdate:modelValue":n[5]||(n[5]=o=>e.state.featureCitation=o),type:"checkbox"},null,512),[[bn,e.state.featureCitation]]),f("span",Iyt,C(e.t("CAPTAIN.ASSISTANTS.FORM.FEATURES.ALLOW_CITATIONS")),1)])]),f("div",Cyt,[v(e.Button,{type:"button",variant:"faded",color:"slate",label:e.t("CAPTAIN.FORM.CANCEL"),class:"w-full bg-n-alpha-2 text-n-blue-text hover:bg-n-alpha-3",onClick:e.handleCancel},null,8,["label"]),v(e.Button,{type:"submit",label:e.t(`CAPTAIN.FORM.${a.mode.toUpperCase()}`),class:"w-full","is-loading":e.isLoading,disabled:e.isLoading},null,8,["label","is-loading","disabled"])])],32)}const Nyt=G(gyt,[["render",Oyt],["__file","/app/app/javascript/dashboard/components-next/captain/pageComponents/assistant/AssistantForm.vue"]]),xyt={__name:"CreateAssistantDialog",props:{selectedAssistant:{type:Object,default:()=>({})},type:{type:String,default:"create",validator:t=>["create","edit"].includes(t)}},emits:["close"],setup(t,{expose:n,emit:a}){const e=t,s=a,{t:r}=Q(),o=Fe(),i=P(null),l=P(null),c=y=>o.dispatch("captainAssistants/update",{id:e.selectedAssistant.id,...y}),d=S(()=>`CAPTAIN.ASSISTANTS.${e.type.toUpperCase()}`),u=y=>o.dispatch("captainAssistants/create",y),m=async y=>{try{e.type==="edit"?await c(y):await u(y),Z(r(`${d.value}.SUCCESS_MESSAGE`)),i.value.close()}catch(b){const A=(b==null?void 0:b.message)||r(`${d.value}.ERROR_MESSAGE`);Z(A)}},h=()=>{s("close")},_=()=>{i.value.close()};n({dialogRef:i});const E={props:e,emit:s,t:r,store:o,dialogRef:i,assistantForm:l,updateAssistant:c,i18nKey:d,createAssistant:u,handleSubmit:m,handleClose:h,handleCancel:_,ref:P,computed:S,get useStore(){return Fe},get useAlert(){return Z},get useI18n(){return Q},Dialog:la,AssistantForm:Nyt};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}};function Ryt(t,n,a,e,s,r){return p(),L(e.Dialog,{ref:"dialogRef",type:"edit",title:e.t(`${e.i18nKey}.TITLE`),description:e.t("CAPTAIN.ASSISTANTS.FORM_DESCRIPTION"),"show-cancel-button":!1,"show-confirm-button":!1,"overflow-y-auto":"",onClose:e.handleClose},{footer:z(()=>n[0]||(n[0]=[])),default:z(()=>[v(e.AssistantForm,{ref:"assistantForm",mode:a.type,assistant:a.selectedAssistant,onSubmit:e.handleSubmit,onCancel:e.handleCancel},null,8,["mode","assistant"])]),_:1},8,["title","description"])}const wyt=G(xyt,[["render",Ryt],["__file","/app/app/javascript/dashboard/components-next/captain/pageComponents/assistant/CreateAssistantDialog.vue"]]),Myt={__name:"FeatureSpotlight",props:{title:{type:String,default:""},note:{type:String,default:""},videoUrl:{type:String,default:""},thumbnail:{type:String,default:""},fallbackThumbnail:{type:String,default:""},fallbackThumbnailDark:{type:String,default:""},learnMoreUrl:{type:String,default:""},hideActions:{type:Boolean,default:!1}},setup(t,{expose:n}){n();const a=P(!1),r={imageError:a,handleImageError:()=>{a.value=!0},openLink:o=>{o&&window.open(o,"_blank")},ref:P,Button:Se};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},Lyt={class:"custom-dashed-border rounded-2xl py-5 px-6"},Dyt={class:"flex flex-col md:flex-row items-start md:items-center gap-6"},Pyt={class:"flex-shrink-0 bg-gray-800 w-[7.5rem] h-[6.5rem] rounded-lg flex items-center justify-center overflow-hidden"},kyt=["src","alt"],Byt=["src","alt"],Fyt=["src","alt"],Uyt={class:"flex flex-col flex-1 gap-3 ltr:pr-8 rtl:pl-8"},$yt={key:0,class:"text-n-slate-12 text-sm mb-0"},Gyt={key:1,class:"flex gap-3"};function Vyt(t,n,a,e,s,r){return p(),g("section",Lyt,[f("div",Dyt,[f("div",Pyt,[!e.imageError&&a.thumbnail?(p(),g("img",{key:0,src:a.thumbnail,alt:a.title,draggable:"false",class:"w-full h-full object-cover rounded-lg",loading:"lazy",onError:e.handleImageError},null,40,kyt)):(p(),g(de,{key:1},[a.fallbackThumbnailDark?(p(),g("img",{key:0,src:a.fallbackThumbnailDark,alt:a.title,draggable:"false",class:"w-full h-full object-cover hidden dark:block rounded-lg",loading:"lazy"},null,8,Byt)):O("v-if",!0),a.fallbackThumbnail?(p(),g("img",{key:1,src:a.fallbackThumbnail,alt:a.title,draggable:"false",class:"w-full h-full object-cover block dark:hidden rounded-lg",loading:"lazy"},null,8,Fyt)):O("v-if",!0)],64))]),f("div",Uyt,[a.note?(p(),g("p",$yt,C(a.note),1)):O("v-if",!0),a.hideActions?O("v-if",!0):(p(),g("div",Gyt,[qe(t.$slots,"actions",{},()=>[a.videoUrl?(p(),L(e.Button,{key:0,label:t.$t("FEATURE_SPOTLIGHT.WATCH_VIDEO"),sm:"",faded:"",slate:"",icon:"i-lucide-circle-play",onClick:n[0]||(n[0]=o=>e.openLink(a.videoUrl))},null,8,["label"])):O("v-if",!0),a.learnMoreUrl?(p(),L(e.Button,{key:1,label:t.$t("FEATURE_SPOTLIGHT.LEARN_MORE"),sm:"",faded:"",slate:"","trailing-icon":"",icon:"i-lucide-arrow-up-right",onClick:n[1]||(n[1]=o=>e.openLink(a.learnMoreUrl))},null,8,["label"])):O("v-if",!0)])]))])])])}const M1=G(Myt,[["render",Vyt],["__file","/app/app/javascript/dashboard/components-next/feature-spotlight/FeatureSpotlight.vue"]]),Hyt=[{account_id:2,config:{product_name:"HelpDesk Pro"},created_at:1736033561,description:"An advanced AI assistant designed to enhance customer support solutions by automating workflows and providing instant responses.",id:4,name:"Support Genie"},{account_id:3,config:{product_name:"CRM Tools"},created_at:1736033562,description:"Helps streamline customer relationship management by organizing contacts, automating follow-ups, and providing insights.",id:5,name:"CRM Assistant"},{account_id:4,config:{product_name:"SalesFlow"},created_at:1736033563,description:"Optimizes your sales pipeline by tracking prospects, forecasting sales, and automating administrative tasks.",id:6,name:"SalesBot"},{account_id:5,config:{product_name:"TicketMaster AI"},created_at:1736033564,description:"Automates ticket assignment, categorization, and customer query responses to enhance support efficiency.",id:7,name:"TicketBot"},{account_id:6,config:{product_name:"FinanceAssist"},created_at:1736033565,description:"Provides financial analytics, reporting, and insights, helping teams make data-driven financial decisions.",id:8,name:"Finance Wizard"},{account_id:8,config:{product_name:"HR Assistant"},created_at:1736033567,description:"Streamlines HR operations including employee management, payroll, and recruitment processes.",id:10,name:"HR Helper"}],jyt=[{account_id:1,assistant:{id:1,name:"Helper Pro"},content:"Comprehensive guide on using conversation filters to manage chats effectively.",created_at:1736143272,external_link:"https://www.chatwoot.com/hc/user-guide/articles/1677688192-how-to-use-conversation-filters",id:3059,name:"How to use Conversation Filters? | User Guide | Chatwoot",status:"available"},{account_id:2,assistant:{id:2,name:"Support Genie"},content:"Step-by-step guide for automating ticket assignments and improving support workflow in Chatwoot.",created_at:1736143273,external_link:"https://www.chatwoot.com/hc/user-guide/articles/1677688200-automating-ticket-assignments",id:3060,name:"Automating Ticket Assignments | User Guide | Chatwoot",status:"available"},{account_id:3,assistant:{id:3,name:"CRM Assistant"},content:"A detailed guide on managing and organizing customer profiles for better relationship management.",created_at:1736143274,external_link:"https://www.chatwoot.com/hc/user-guide/articles/1677688210-managing-customer-profiles",id:3061,name:"Managing Customer Profiles | User Guide | Chatwoot",status:"available"},{account_id:4,assistant:{id:4,name:"SalesBot"},content:"Learn how to optimize sales tracking and improve your sales forecasting using advanced features.",created_at:1736143275,external_link:"https://www.chatwoot.com/hc/user-guide/articles/1677688220-sales-tracking-guide",id:3062,name:"Sales Tracking Guide | User Guide | Chatwoot",status:"available"},{account_id:5,assistant:{id:5,name:"TicketBot"},content:"How to efficiently create, manage, and resolve tickets in Chatwoot.",created_at:1736143276,external_link:"https://www.chatwoot.com/hc/user-guide/articles/1677688230-managing-tickets",id:3063,name:"Managing Tickets | User Guide | Chatwoot",status:"available"},{account_id:6,assistant:{id:6,name:"Finance Wizard"},content:"Detailed guide on how to use financial reporting tools and generate insightful analytics.",created_at:1736143277,external_link:"https://www.chatwoot.com/hc/user-guide/articles/1677688240-financial-reporting",id:3064,name:"Financial Reporting | User Guide | Chatwoot",status:"available"}],Wyt=[{account_id:1,answer:"Messenger may be deactivated because you are on a free plan or the limit for inboxes might have been reached.",created_at:1736283330,id:87,question:"Why is my Messenger in Chatwoot deactivated?",status:"pending",assistant:{account_id:1,config:{product_name:"Chatwoot"},created_at:1736033280,description:"Assists with general queries and system-wide issues.",id:1,name:"Assistant 2"}},{account_id:2,answer:"You can integrate your WhatsApp account by navigating to the Integrations section and selecting the WhatsApp integration option.",created_at:1736283340,id:88,question:"How do I integrate WhatsApp with Chatwoot?",assistant:{account_id:2,config:{product_name:"Chatwoot"},created_at:1736033281,description:"Helps with integration and setup-related inquiries.",id:2,name:"Assistant 3"}},{account_id:3,answer:"To reset your password, go to the login page and click on 'Forgot Password', then follow the instructions sent to your email.",created_at:1736283350,id:89,question:"How can I reset my password in Chatwoot?",assistant:{account_id:3,config:{product_name:"Chatwoot"},created_at:1736033282,description:"Handles account management and recovery support.",id:3,name:"Assistant 4"}},{account_id:4,answer:"You can enable the dark mode in settings by navigating to 'Appearance' and selecting 'Dark Mode'.",created_at:1736283360,id:90,question:"How do I enable dark mode in Chatwoot?",assistant:{account_id:4,config:{product_name:"Chatwoot"},created_at:1736033283,description:"Helps with UI and theme-related inquiries.",id:4,name:"Assistant 5"}},{account_id:5,answer:"To add a new team member, navigate to 'Settings', then 'Team', and click on 'Add Team Member'.",created_at:1736283370,id:91,question:"How do I add a new team member in Chatwoot?",assistant:{account_id:5,config:{product_name:"Chatwoot"},created_at:1736033284,description:"Supports team management and user access-related queries.",id:5,name:"Assistant 6"}},{account_id:6,answer:"Campaigns in Chatwoot allow you to send targeted messages to specific user segments. You can create them in the 'Campaigns' section.",created_at:1736283380,id:92,question:"What are campaigns in Chatwoot?",assistant:{account_id:6,config:{product_name:"Chatwoot"},created_at:1736033285,description:"Specialized in marketing, campaign management, and messaging strategies.",id:6,name:"Assistant 7"}}],zyt=[{id:7,name:"Email Support",channel_type:ht.EMAIL,email:"support@company.com"},{id:1,name:"Website Chat",channel_type:ht.WEB},{id:2,name:"Facebook Support",channel_type:ht.FB},{id:5,name:"SMS Service",channel_type:ht.TWILIO,messaging_service_sid:"MGxxxxxx"},{id:6,name:"WhatsApp Support",channel_type:ht.WHATSAPP,phone_number:"+1987654321"},{id:8,name:"Telegram Support",channel_type:ht.TELEGRAM},{id:9,name:"LINE Support",channel_type:ht.LINE},{id:10,name:"API Channel",channel_type:ht.API},{id:11,name:"SMS Basic",channel_type:ht.SMS,phone_number:"+1555555555"}],Yyt={__name:"AssistantPageEmptyState",emits:["click"],setup(t,{expose:n,emit:a}){n();const e=a,{isOnChatwootCloud:s}=Ut(),o={emit:e,isOnChatwootCloud:s,onClick:()=>{e("click")},get useAccount(){return Ut},EmptyStateLayout:Or,Button:Se,AssistantCard:_P,FeatureSpotlight:M1,get assistantsList(){return Hyt}};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},Kyt={class:"grid grid-cols-1 gap-4 p-px overflow-hidden"};function Xyt(t,n,a,e,s,r){return p(),g(de,null,[v(e.FeatureSpotlight,{title:t.$t("CAPTAIN.ASSISTANTS.EMPTY_STATE.FEATURE_SPOTLIGHT.TITLE"),note:t.$t("CAPTAIN.ASSISTANTS.EMPTY_STATE.FEATURE_SPOTLIGHT.NOTE"),"fallback-thumbnail":"/assets/images/dashboard/captain/assistant-light.svg","fallback-thumbnail-dark":"/assets/images/dashboard/captain/assistant-dark.svg","learn-more-url":"https://chwt.app/captain-assistant",class:"mb-8","hide-actions":!e.isOnChatwootCloud},null,8,["title","note","hide-actions"]),v(e.EmptyStateLayout,{title:t.$t("CAPTAIN.ASSISTANTS.EMPTY_STATE.TITLE"),subtitle:t.$t("CAPTAIN.ASSISTANTS.EMPTY_STATE.SUBTITLE"),"action-perms":["administrator"]},{"empty-state-item":z(()=>[f("div",Kyt,[(p(!0),g(de,null,Ae(e.assistantsList.slice(0,5),(o,i)=>(p(),L(e.AssistantCard,{id:o.id,key:`assistant-${i}`,name:o.name,description:o.description,"updated-at":o.created_at},null,8,["id","name","description","updated-at"]))),128))])]),actions:z(()=>[v(e.Button,{label:t.$t("CAPTAIN.ASSISTANTS.ADD_NEW"),icon:"i-lucide-plus",onClick:e.onClick},null,8,["label"])]),_:1},8,["title","subtitle"])],64)}const qyt=G(Yyt,[["render",Xyt],["__file","/app/app/javascript/dashboard/components-next/captain/pageComponents/emptyStates/AssistantPageEmptyState.vue"]]),Zyt={__name:"FeatureSpotlightPopover",props:{buttonLabel:{type:String,default:""},title:{type:String,default:""},note:{type:String,default:""},videoUrl:{type:String,default:""},thumbnail:{type:String,default:""},fallbackThumbnail:{type:String,default:""},fallbackThumbnailDark:{type:String,default:""},learnMoreUrl:{type:String,default:""},hideActions:{type:Boolean,default:!1}},setup(t,{expose:n}){n();const a=P(!1),[e,s]=$t(),i={imageError:a,isPopupVisible:e,togglePopup:s,handleImageError:()=>{a.value=!0},openLink:l=>{l&&window.open(l,"_blank")},ref:P,get useToggle(){return $t},get vOnClickOutside(){return Ga},Button:Se};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}},Qyt={class:"relative"},Jyt={key:0},e0t={class:"absolute top-full mt-6 ltr:left-0 rtl:right-0 outline outline-1 outline-n-weak bg-n-alpha-3 backdrop-blur-[100px] rounded-xl p-4 w-80"},t0t={class:"relative flex flex-col items-start gap-4 z-20"},n0t={class:"flex-shrink-0 bg-gray-800 w-full h-[7.5rem] rounded-lg"},a0t=["src","alt"],s0t=["src","alt"],o0t=["src","alt"],r0t={key:0,class:"text-n-slate-12 text-start text-sm mb-0"},i0t={key:1,class:"flex gap-3 justify-between w-full"};function l0t(t,n,a,e,s,r){return p(),g("div",Qyt,[v(e.Button,{id:"togglePopup",label:a.buttonLabel,slate:"",ghost:"",sm:"",class:oe({"bg-n-alpha-2":e.isPopupVisible}),onClick:n[0]||(n[0]=o=>e.togglePopup(!e.isPopupVisible))},null,8,["label","class"]),e.isPopupVisible?ce((p(),g("div",Jyt,[f("section",e0t,[n[3]||(n[3]=f("div",{class:"absolute -top-[0.77rem] ltr:left-12 rtl:right-12 w-6 h-6 ltr:rotate-45 rtl:-rotate-45 rtl:rounded-tr ltr:rounded-tl rtl:border-r ltr:border-l border-t border-n-weak bg-n-alpha-3 z-10"},null,-1)),f("div",t0t,[f("div",n0t,[!e.imageError&&a.thumbnail?(p(),g("img",{key:0,src:a.thumbnail,alt:a.title,draggable:"false",loading:"lazy",class:"w-full h-full object-cover rounded-lg",onError:e.handleImageError},null,40,a0t)):(p(),g(de,{key:1},[a.fallbackThumbnailDark?(p(),g("img",{key:0,src:a.fallbackThumbnailDark,alt:a.title,draggable:"false",loading:"lazy",class:"w-full h-full object-cover hidden dark:block"},null,8,s0t)):O("v-if",!0),a.fallbackThumbnail?(p(),g("img",{key:1,src:a.fallbackThumbnail,alt:a.title,draggable:"false",loading:"lazy",class:"w-full h-full object-cover block dark:hidden"},null,8,o0t)):O("v-if",!0)],64))]),a.note?(p(),g("p",r0t,C(a.note),1)):O("v-if",!0),a.hideActions?O("v-if",!0):(p(),g("div",i0t,[qe(t.$slots,"actions",{},()=>[a.videoUrl?(p(),L(e.Button,{key:0,label:t.$t("FEATURE_SPOTLIGHT.WATCH_VIDEO"),sm:"",faded:"",slate:"",icon:"i-lucide-circle-play",class:"w-full",onClick:n[1]||(n[1]=o=>e.openLink(a.videoUrl))},null,8,["label"])):O("v-if",!0),a.learnMoreUrl?(p(),L(e.Button,{key:1,label:t.$t("FEATURE_SPOTLIGHT.LEARN_MORE"),sm:"",faded:"",slate:"","trailing-icon":"",class:"w-full",icon:"i-lucide-arrow-up-right",onClick:n[2]||(n[2]=o=>e.openLink(a.learnMoreUrl))},null,8,["label"])):O("v-if",!0)])]))])])])),[[e.vOnClickOutside,[()=>e.isPopupVisible&&(e.isPopupVisible=!1),{ignore:["#togglePopup"]}]]]):O("v-if",!0)])}const f_=G(Zyt,[["render",l0t],["__file","/app/app/javascript/dashboard/components-next/feature-spotlight/FeatureSpotlightPopover.vue"]]),c0t={__name:"LimitBanner",setup(t,{expose:n}){n();const a=ft(),{accountId:e}=Ut(),{responseLimits:s,fetchLimits:r}=dd(),o=()=>{a.push({name:"billing_settings_index",params:{accountId:e.value}})},i=S(()=>{if(!s.value)return!1;const{consumed:c,totalCount:d}=s.value;return!c||!d?!1:c/d>.8});Pe(r);const l={router:a,accountId:e,responseLimits:s,fetchLimits:r,openBilling:o,showBanner:i,onMounted:Pe,computed:S,get useAccount(){return Ut},get useCaptain(){return dd},get useRouter(){return ft},Banner:op};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}};function d0t(t,n,a,e,s,r){return ce((p(),L(e.Banner,{color:"amber","action-label":t.$t("CAPTAIN.PAYWALL.UPGRADE_NOW"),onAction:e.openBilling},{default:z(()=>[Oe(C(t.$t("CAPTAIN.BANNER.RESPONSES")),1)]),_:1},8,["action-label"])),[[En,e.showBanner]])}const L1=G(c0t,[["render",d0t],["__file","/app/app/javascript/dashboard/components-next/captain/pageComponents/response/LimitBanner.vue"]]),u0t={__name:"Index",setup(t,{expose:n}){n();const{isOnChatwootCloud:a}=Ut(),e=ft(),s=Fe(),r=P(""),o=le("captainAssistants/getUIFlags"),i=le("captainAssistants/getRecords"),l=S(()=>o.value.fetchingList),c=P(null),d=P(null),u=()=>{d.value.dialogRef.open()},m=P(null),h=()=>{r.value="create",At(()=>m.value.dialogRef.open())},_=()=>{e.push({name:"captain_assistants_edit",params:{assistantId:c.value.id}})},E=()=>{e.push({name:"captain_assistants_inboxes_index",params:{assistantId:c.value.id}})},y=({action:T,id:I})=>{c.value=i.value.find(N=>I===N.id),At(()=>{T==="delete"&&u(),T==="edit"&&_(),T==="viewConnectedInboxes"&&E()})},b=()=>{r.value="",c.value=null};Pe(()=>s.dispatch("captainAssistants/get"));const A={isOnChatwootCloud:a,router:e,store:s,dialogType:r,uiFlags:o,assistants:i,isFetching:l,selectedAssistant:c,deleteAssistantDialog:d,handleDelete:u,createAssistantDialog:m,handleCreate:h,handleEdit:_,handleViewConnectedInboxes:E,handleAction:y,handleCreateClose:b,computed:S,onMounted:Pe,ref:P,nextTick:At,get useMapGetter(){return le},get useStore(){return Fe},get FEATURE_FLAGS(){return pt},get useRouter(){return ft},get useAccount(){return Ut},AssistantCard:_P,DeleteDialog:Rd,PageLayout:ql,CaptainPaywall:bp,CreateAssistantDialog:wyt,AssistantPageEmptyState:qyt,FeatureSpotlightPopover:f_,LimitBanner:L1};return Object.defineProperty(A,"__isScriptSetup",{enumerable:!1,value:!0}),A}},p0t={class:"flex flex-col gap-4"};function f0t(t,n,a,e,s,r){return p(),L(e.PageLayout,{"header-title":t.$t("CAPTAIN.ASSISTANTS.HEADER"),"button-label":t.$t("CAPTAIN.ASSISTANTS.ADD_NEW"),"button-policy":["administrator"],"show-pagination-footer":!1,"is-fetching":e.isFetching,"is-empty":!e.assistants.length,"feature-flag":e.FEATURE_FLAGS.CAPTAIN,onClick:e.handleCreate},{knowMore:z(()=>[v(e.FeatureSpotlightPopover,{"button-label":t.$t("CAPTAIN.HEADER_KNOW_MORE"),title:t.$t("CAPTAIN.ASSISTANTS.EMPTY_STATE.FEATURE_SPOTLIGHT.TITLE"),note:t.$t("CAPTAIN.ASSISTANTS.EMPTY_STATE.FEATURE_SPOTLIGHT.NOTE"),"hide-actions":!e.isOnChatwootCloud,"fallback-thumbnail":"/assets/images/dashboard/captain/assistant-popover-light.svg","fallback-thumbnail-dark":"/assets/images/dashboard/captain/assistant-popover-dark.svg","learn-more-url":"https://chwt.app/captain-assistant"},null,8,["button-label","title","note","hide-actions"])]),emptyState:z(()=>[v(e.AssistantPageEmptyState,{onClick:e.handleCreate})]),paywall:z(()=>[v(e.CaptainPaywall)]),body:z(()=>[v(e.LimitBanner,{class:"mb-5"}),f("div",p0t,[(p(!0),g(de,null,Ae(e.assistants,o=>(p(),L(e.AssistantCard,{id:o.id,key:o.id,name:o.name,description:o.description,"updated-at":o.updated_at||o.created_at,"created-at":o.created_at,onAction:e.handleAction},null,8,["id","name","description","updated-at","created-at"]))),128))])]),default:z(()=>[e.selectedAssistant?(p(),L(e.DeleteDialog,{key:0,ref:"deleteAssistantDialog",entity:e.selectedAssistant,type:"Assistants"},null,8,["entity"])):O("v-if",!0),e.dialogType?(p(),L(e.CreateAssistantDialog,{key:1,ref:"createAssistantDialog",type:e.dialogType,"selected-assistant":e.selectedAssistant,onClose:e.handleCreateClose},null,8,["type","selected-assistant"])):O("v-if",!0)]),_:1},8,["header-title","button-label","is-fetching","is-empty","feature-flag"])}const m0t=G(u0t,[["render",f0t],["__file","/app/app/javascript/dashboard/routes/dashboard/captain/assistants/Index.vue"]]),h0t={__name:"Accordion",props:{title:{type:String,required:!0},isOpen:{type:Boolean,default:!1}},setup(t,{expose:n}){n();const a=t,e=P(a.isOpen),s=()=>{e.value=!e.value};je(()=>a.isOpen,o=>{e.value=o});const r={props:a,isExpanded:e,toggleAccordion:s,ref:P,watch:je};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},_0t={class:"border rounded-lg border-n-slate-4"},g0t={class:"text-sm font-medium text-n-slate-12"},b0t={key:0,class:"p-4 pt-0"};function v0t(t,n,a,e,s,r){return p(),g("div",_0t,[f("button",{class:"flex items-center justify-between w-full p-4 text-left",onClick:e.toggleAccordion},[f("span",g0t,C(a.title),1),f("span",{class:oe(["w-5 h-5 transition-transform duration-200 i-lucide-chevron-down",{"rotate-180":e.isExpanded}])},null,2)]),e.isExpanded?(p(),g("div",b0t,[qe(t.$slots,"default")])):O("v-if",!0)])}const E0t=G(h0t,[["render",v0t],["__file","/app/app/javascript/dashboard/components-next/Accordion/Accordion.vue"]]),S0t={__name:"EditAssistantForm",props:{mode:{type:String,required:!0,validator:t=>["edit","create"].includes(t)},assistant:{type:Object,default:()=>({})}},emits:["submit"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o={uiFlags:le("captainAssistants/getUIFlags")},i={name:"",description:"",productName:"",welcomeMessage:"",handoffMessage:"",resolutionMessage:"",instructions:"",features:{conversationFaqs:!1,memories:!1,citations:!1},temperature:1},l=Lt({...i}),c={name:{required:Ge,minLength:Rt(1)},description:{required:Ge,minLength:Rt(1)},productName:{required:Ge,minLength:Rt(1)},welcomeMessage:{minLength:Rt(1)},handoffMessage:{minLength:Rt(1)},resolutionMessage:{minLength:Rt(1)},instructions:{minLength:Rt(1)}},d=rt(c,l),u=S(()=>o.uiFlags.value.creatingItem),m=I=>d.value[I].$error?d.value[I].$errors[0].$message:"",h=S(()=>({name:m("name"),description:m("description"),productName:m("productName"),welcomeMessage:m("welcomeMessage"),handoffMessage:m("handoffMessage"),resolutionMessage:m("resolutionMessage"),instructions:m("instructions")})),_=I=>{const{config:N={}}=I;l.name=I.name,l.description=I.description,l.productName=N.product_name,l.welcomeMessage=N.welcome_message,l.handoffMessage=N.handoff_message,l.resolutionMessage=N.resolution_message,l.instructions=N.instructions,l.features={conversationFaqs:N.feature_faq||!1,memories:N.feature_memory||!1,citations:N.feature_citation||!1},l.temperature=N.temperature||1},E=async()=>{if(!await Promise.all([d.value.name.$validate(),d.value.description.$validate(),d.value.productName.$validate()]).then(x=>x.every(Boolean)))return;const N={name:l.name,description:l.description,config:{...e.assistant.config,product_name:l.productName}};s("submit",N)},y=async()=>{if(!await Promise.all([d.value.welcomeMessage.$validate(),d.value.handoffMessage.$validate(),d.value.resolutionMessage.$validate()]).then(x=>x.every(Boolean)))return;const N={config:{...e.assistant.config,welcome_message:l.welcomeMessage,handoff_message:l.handoffMessage,resolution_message:l.resolutionMessage}};s("submit",N)},b=async()=>{if(!await d.value.instructions.$validate())return;const N={config:{...e.assistant.config,temperature:l.temperature||1,instructions:l.instructions}};s("submit",N)},A=()=>{const I={config:{...e.assistant.config,feature_faq:l.features.conversationFaqs,feature_memory:l.features.memories,feature_citation:l.features.citations}};s("submit",I)};je(()=>e.assistant,I=>{e.mode==="edit"&&I&&_(I)},{immediate:!0});const T={props:e,emit:s,t:r,formState:o,initialState:i,state:l,validationRules:c,v$:d,isLoading:u,getErrorMessage:m,formErrors:h,updateStateFromAssistant:_,handleBasicInfoUpdate:E,handleSystemMessagesUpdate:y,handleInstructionsUpdate:b,handleFeaturesUpdate:A,reactive:Lt,computed:S,watch:je,get useI18n(){return Q},get useVuelidate(){return rt},get required(){return Ge},get minLength(){return Rt},get useMapGetter(){return le},Input:sn,Button:Se,Editor:Ds,Accordion:E0t};return Object.defineProperty(T,"__isScriptSetup",{enumerable:!1,value:!0}),T}},T0t={class:"flex flex-col gap-4 pt-4"},A0t={class:"flex justify-end"},y0t={class:"flex flex-col gap-4"},I0t={class:"flex flex-col gap-2 mt-4"},C0t={class:"text-sm font-medium text-n-slate-12"},O0t={class:"flex items-center gap-4"},N0t={class:"text-sm text-n-slate-12"},x0t={class:"text-sm text-n-slate-11 italic"},R0t={class:"flex justify-end"},w0t={class:"flex flex-col gap-4 pt-4"},M0t={class:"flex justify-end"},L0t={class:"flex flex-col gap-4 pt-4"},D0t={class:"flex flex-col gap-2"},P0t={class:"text-sm font-medium text-n-slate-12"},k0t={class:"flex flex-col gap-2"},B0t={class:"flex items-center gap-2"},F0t={class:"flex items-center gap-2"},U0t={class:"flex items-center gap-2"},$0t={class:"flex justify-end"};function G0t(t,n,a,e,s,r){return p(),g("form",{class:"flex flex-col gap-4",onSubmit:n[10]||(n[10]=Ve((...o)=>t.handleSubmit&&t.handleSubmit(...o),["prevent"]))},[O(" Basic Information Section "),v(e.Accordion,{title:e.t("CAPTAIN.ASSISTANTS.FORM.SECTIONS.BASIC_INFO"),"is-open":""},{default:z(()=>[f("div",T0t,[v(e.Input,{modelValue:e.state.name,"onUpdate:modelValue":n[0]||(n[0]=o=>e.state.name=o),label:e.t("CAPTAIN.ASSISTANTS.FORM.NAME.LABEL"),placeholder:e.t("CAPTAIN.ASSISTANTS.FORM.NAME.PLACEHOLDER"),message:e.formErrors.name,"message-type":e.formErrors.name?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),v(e.Editor,{modelValue:e.state.description,"onUpdate:modelValue":n[1]||(n[1]=o=>e.state.description=o),label:e.t("CAPTAIN.ASSISTANTS.FORM.DESCRIPTION.LABEL"),placeholder:e.t("CAPTAIN.ASSISTANTS.FORM.DESCRIPTION.PLACEHOLDER"),message:e.formErrors.description,"message-type":e.formErrors.description?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),v(e.Input,{modelValue:e.state.productName,"onUpdate:modelValue":n[2]||(n[2]=o=>e.state.productName=o),label:e.t("CAPTAIN.ASSISTANTS.FORM.PRODUCT_NAME.LABEL"),placeholder:e.t("CAPTAIN.ASSISTANTS.FORM.PRODUCT_NAME.PLACEHOLDER"),message:e.formErrors.productName,"message-type":e.formErrors.productName?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),f("div",A0t,[v(e.Button,{size:"small",loading:e.isLoading,onClick:e.handleBasicInfoUpdate},{default:z(()=>[Oe(C(e.t("CAPTAIN.ASSISTANTS.FORM.UPDATE")),1)]),_:1},8,["loading"])])])]),_:1},8,["title"]),O(" Instructions Section "),v(e.Accordion,{title:e.t("CAPTAIN.ASSISTANTS.FORM.SECTIONS.INSTRUCTIONS")},{default:z(()=>[f("div",y0t,[v(e.Editor,{modelValue:e.state.instructions,"onUpdate:modelValue":n[3]||(n[3]=o=>e.state.instructions=o),placeholder:e.t("CAPTAIN.ASSISTANTS.FORM.INSTRUCTIONS.PLACEHOLDER"),message:e.formErrors.instructions,"max-length":2e4,"message-type":e.formErrors.instructions?"error":"info"},null,8,["modelValue","placeholder","message","message-type"]),f("div",I0t,[f("label",C0t,C(e.t("CAPTAIN.ASSISTANTS.FORM.TEMPERATURE.LABEL")),1),f("div",O0t,[ce(f("input",{"onUpdate:modelValue":n[4]||(n[4]=o=>e.state.temperature=o),type:"range",min:"0",max:"1",step:"0.1",class:"w-full"},null,512),[[Et,e.state.temperature]]),f("span",N0t,C(e.state.temperature),1)]),f("p",x0t,C(e.t("CAPTAIN.ASSISTANTS.FORM.TEMPERATURE.DESCRIPTION")),1)]),f("div",R0t,[v(e.Button,{size:"small",loading:e.isLoading,label:e.t("CAPTAIN.ASSISTANTS.FORM.UPDATE"),onClick:e.handleInstructionsUpdate},null,8,["loading","label"])])])]),_:1},8,["title"]),O(" Greeting Messages Section "),v(e.Accordion,{title:e.t("CAPTAIN.ASSISTANTS.FORM.SECTIONS.SYSTEM_MESSAGES")},{default:z(()=>[f("div",w0t,[v(e.Editor,{modelValue:e.state.handoffMessage,"onUpdate:modelValue":n[5]||(n[5]=o=>e.state.handoffMessage=o),label:e.t("CAPTAIN.ASSISTANTS.FORM.HANDOFF_MESSAGE.LABEL"),placeholder:e.t("CAPTAIN.ASSISTANTS.FORM.HANDOFF_MESSAGE.PLACEHOLDER"),message:e.formErrors.handoffMessage,"message-type":e.formErrors.handoffMessage?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),v(e.Editor,{modelValue:e.state.resolutionMessage,"onUpdate:modelValue":n[6]||(n[6]=o=>e.state.resolutionMessage=o),label:e.t("CAPTAIN.ASSISTANTS.FORM.RESOLUTION_MESSAGE.LABEL"),placeholder:e.t("CAPTAIN.ASSISTANTS.FORM.RESOLUTION_MESSAGE.PLACEHOLDER"),message:e.formErrors.resolutionMessage,"message-type":e.formErrors.resolutionMessage?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),f("div",M0t,[v(e.Button,{size:"small",loading:e.isLoading,label:e.t("CAPTAIN.ASSISTANTS.FORM.UPDATE"),onClick:e.handleSystemMessagesUpdate},null,8,["loading","label"])])])]),_:1},8,["title"]),O(" Features Section "),v(e.Accordion,{title:e.t("CAPTAIN.ASSISTANTS.FORM.SECTIONS.FEATURES")},{default:z(()=>[f("div",L0t,[f("div",D0t,[f("label",P0t,C(e.t("CAPTAIN.ASSISTANTS.FORM.FEATURES.TITLE")),1),f("div",k0t,[f("label",B0t,[ce(f("input",{"onUpdate:modelValue":n[7]||(n[7]=o=>e.state.features.conversationFaqs=o),type:"checkbox"},null,512),[[bn,e.state.features.conversationFaqs]]),Oe(" "+C(e.t("CAPTAIN.ASSISTANTS.FORM.FEATURES.ALLOW_CONVERSATION_FAQS")),1)]),f("label",F0t,[ce(f("input",{"onUpdate:modelValue":n[8]||(n[8]=o=>e.state.features.memories=o),type:"checkbox"},null,512),[[bn,e.state.features.memories]]),Oe(" "+C(e.t("CAPTAIN.ASSISTANTS.FORM.FEATURES.ALLOW_MEMORIES")),1)]),f("label",U0t,[ce(f("input",{"onUpdate:modelValue":n[9]||(n[9]=o=>e.state.features.citations=o),type:"checkbox"},null,512),[[bn,e.state.features.citations]]),Oe(" "+C(e.t("CAPTAIN.ASSISTANTS.FORM.FEATURES.ALLOW_CITATIONS")),1)])])]),f("div",$0t,[v(e.Button,{size:"small",loading:e.isLoading,label:e.t("CAPTAIN.ASSISTANTS.FORM.UPDATE"),onClick:e.handleFeaturesUpdate},null,8,["loading","label"])])])]),_:1},8,["title"])],32)}const V0t=G(S0t,[["render",G0t],["__file","/app/app/javascript/dashboard/components-next/captain/pageComponents/assistant/EditAssistantForm.vue"]]),H0t={__name:"MessageList",props:{messages:{type:Array,required:!0},isLoading:{type:Boolean,default:!1}},setup(t,{expose:n}){n();const a=t,e=P(null),{t:s}=Q(),{formatMessage:r}=ta(),o=h=>h==="user",i=h=>o(h)?"justify-end":"justify-start",l=h=>o(h)?"flex-row-reverse":"flex-row",c=h=>o(h)?s("CAPTAIN.PLAYGROUND.USER"):s("CAPTAIN.PLAYGROUND.ASSISTANT"),d=h=>o(h)?"bg-n-strong text-n-white":"bg-n-solid-iris text-n-slate-12",u=async()=>{await At(),e.value&&(e.value.scrollTop=e.value.scrollHeight)};je(()=>a.messages.length,u);const m={props:a,messageContainer:e,t:s,formatMessage:r,isUserMessage:o,getMessageAlignment:i,getMessageDirection:l,getAvatarName:c,getMessageStyle:d,scrollToBottom:u,get useI18n(){return Q},ref:P,watch:je,nextTick:At,Avatar:qt,get useMessageFormatter(){return ta}};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}},j0t={ref:"messageContainer",class:"flex-1 overflow-y-auto mb-4 space-y-2"},W0t=["innerHTML"],z0t={key:0,class:"flex justify-start"},Y0t={class:"flex items-start gap-1.5"};function K0t(t,n,a,e,s,r){return p(),g("div",j0t,[(p(!0),g(de,null,Ae(a.messages,(o,i)=>(p(),g("div",{key:i,class:oe(["flex",e.getMessageAlignment(o.sender)])},[f("div",{class:oe(["flex items-start gap-1.5",e.getMessageDirection(o.sender)])},[v(e.Avatar,{name:e.getAvatarName(o.sender),"rounded-full":"",size:24},null,8,["name"]),f("div",{class:oe(["max-w-[80%] rounded-lg p-3 text-sm",e.getMessageStyle(o.sender)])},[f("div",{class:"break-words",innerHTML:e.formatMessage(o.content)},null,8,W0t)],2)],2)],2))),128)),a.isLoading?(p(),g("div",z0t,[f("div",Y0t,[v(e.Avatar,{name:e.getAvatarName("assistant"),"rounded-full":"",size:24},null,8,["name"]),n[0]||(n[0]=Ac('<div class="max-w-sm rounded-lg p-3 text-sm bg-n-solid-iris text-n-slate-12"><div class="flex gap-1"><div class="w-2 h-2 rounded-full bg-n-iris-10 animate-bounce"></div><div class="w-2 h-2 rounded-full bg-n-iris-10 animate-bounce [animation-delay:0.2s]"></div><div class="w-2 h-2 rounded-full bg-n-iris-10 animate-bounce [animation-delay:0.4s]"></div></div></div>',1))])])):O("v-if",!0)],512)}const X0t=G(H0t,[["render",K0t],["__file","/app/app/javascript/dashboard/components-next/captain/assistant/MessageList.vue"]]),q0t={__name:"AssistantPlayground",props:{assistantId:{type:Number,required:!0}},setup(t,{expose:n}){n();const{t:a}=Q(),e=P([]),s=P(""),r=P(!1),o=()=>e.value.map(d=>({role:d.sender,content:d.content})),c={t:a,messages:e,newMessage:s,isLoading:r,formatMessagesForApi:o,resetConversation:()=>{e.value=[],s.value=""},sendMessage:async()=>{if(!s.value.trim()||r.value)return;const d={content:s.value,sender:"user",timestamp:new Date().toISOString()};e.value.push(d);const u=s.value;s.value="";try{r.value=!0;const{data:m}=await kT.playground({assistantId:t.assistantId,messageContent:u,messageHistory:o()});e.value.push({content:m.response,sender:"assistant",timestamp:new Date().toISOString()})}catch(m){console.error("Error getting assistant response:",m)}finally{r.value=!1}},ref:P,get useI18n(){return Q},NextButton:Se,MessageList:X0t,get CaptainAssistant(){return kT}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}},Z0t={class:"flex flex-col h-full rounded-lg p-4 border border-n-slate-4 text-n-slate-11"},Q0t={class:"mb-4"},J0t={class:"flex justify-between items-center mb-1"},eIt={class:"text-lg font-medium"},tIt={class:"text-sm text-n-slate-11"},nIt={class:"flex items-center bg-n-solid-1 outline outline-n-container rounded-lg p-3"},aIt=["placeholder"],sIt={class:"text-xs text-n-slate-11 pt-2 text-center"};function oIt(t,n,a,e,s,r){return p(),g("div",Z0t,[f("div",Q0t,[f("div",J0t,[f("h3",eIt,C(e.t("CAPTAIN.PLAYGROUND.HEADER")),1),v(e.NextButton,{ghost:"",size:"small",icon:"i-lucide-rotate-ccw",onClick:e.resetConversation})]),f("p",tIt,C(e.t("CAPTAIN.PLAYGROUND.DESCRIPTION")),1)]),v(e.MessageList,{messages:e.messages,"is-loading":e.isLoading},null,8,["messages","is-loading"]),f("div",nIt,[ce(f("input",{"onUpdate:modelValue":n[0]||(n[0]=o=>e.newMessage=o),class:"flex-1 bg-transparent border-none focus:outline-none text-sm mb-0",placeholder:e.t("CAPTAIN.PLAYGROUND.MESSAGE_PLACEHOLDER"),onKeyup:Vn(e.sendMessage,["enter"])},null,40,aIt),[[Et,e.newMessage]]),v(e.NextButton,{ghost:"",size:"small",disabled:!e.newMessage.trim(),icon:"i-lucide-send",onClick:e.sendMessage},null,8,["disabled"])]),f("p",sIt,C(e.t("CAPTAIN.PLAYGROUND.CREDIT_NOTE")),1)])}const rIt=G(q0t,[["render",oIt],["__file","/app/app/javascript/dashboard/components-next/captain/assistant/AssistantPlayground.vue"]]),iIt={__name:"SettingsPageLayout",props:{isFetching:{type:Boolean,default:!1},isEmpty:{type:Boolean,default:!1},currentPage:{type:Number,default:1},totalCount:{type:Number,default:100},itemsPerPage:{type:Number,default:25},showPaginationFooter:{type:Boolean,default:!1},breadcrumbItems:{type:Array,default:()=>[]}},emits:["update:currentPage"],setup(t,{expose:n,emit:a}){n();const e=a,s=ft(),i={emit:e,router:s,handlePageChange:l=>{e("update:currentPage",l)},handleBreadcrumbClick:l=>{s.push({name:l.routeName})},get useRouter(){return ft},PaginationFooter:N1,Spinner:$n,Breadcrumb:qi};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}},lIt={class:"px-6 flex flex-col w-full h-screen overflow-y-auto bg-n-background"},cIt={class:"max-w-[60rem] mx-auto flex flex-col w-full h-full mb-4"},dIt={class:"mb-7 sticky top-0 bg-n-background pt-4 z-20"},uIt={class:"flex gap-16 w-full flex-1 pb-16"},pIt={key:0,class:"flex flex-col w-full"},fIt={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},mIt={key:1},hIt={key:1,class:"flex w-full"},_It={key:0,class:"sticky bottom-0 z-10 pb-4"};function gIt(t,n,a,e,s,r){return p(),g("section",lIt,[f("div",cIt,[f("header",dIt,[v(e.Breadcrumb,{items:a.breadcrumbItems,onClick:e.handleBreadcrumbClick},null,8,["items"])]),f("main",uIt,[t.$slots.body||t.$slots.emptyState||a.isFetching?(p(),g("section",pIt,[a.isFetching?(p(),g("div",fIt,[v(e.Spinner)])):a.isEmpty?(p(),g("div",mIt,[qe(t.$slots,"emptyState")])):qe(t.$slots,"body",{key:2})])):O("v-if",!0),t.$slots.controls?(p(),g("section",hIt,[qe(t.$slots,"controls")])):O("v-if",!0)]),a.showPaginationFooter?(p(),g("footer",_It,[v(e.PaginationFooter,{"current-page":a.currentPage,"total-items":a.totalCount,"items-per-page":a.itemsPerPage,"onUpdate:currentPage":e.handlePageChange},null,8,["current-page","total-items","items-per-page"])])):O("v-if",!0)])])}const m_=G(iIt,[["render",gIt],["__file","/app/app/javascript/dashboard/components-next/captain/SettingsPageLayout.vue"]]),bIt={__name:"SettingsHeader",props:{heading:{type:String,required:!0},description:{type:String,default:""}},setup(t,{expose:n}){n();const a={};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},vIt={class:"flex flex-col items-start gap-2"},EIt={class:"text-n-slate-12 text-base font-medium"},SIt={class:"text-n-slate-11 text-sm"};function TIt(t,n,a,e,s,r){return p(),g("header",vIt,[f("h2",EIt,C(a.heading),1),f("p",SIt,C(a.description),1)])}const h_=G(bIt,[["render",TIt],["__file","/app/app/javascript/dashboard/components-next/captain/pageComponents/settings/SettingsHeader.vue"]]),AIt={__name:"AssistantBasicSettingsForm",props:{assistant:{type:Object,default:()=>({})}},emits:["submit"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o={name:"",description:"",productName:"",features:{conversationFaqs:!1,memories:!1,citations:!1}},i=Lt({...o}),l={name:{required:Ge,minLength:Rt(1)},description:{required:Ge,minLength:Rt(1)},productName:{required:Ge,minLength:Rt(1)}},c=rt(l,i),d=E=>c.value[E].$error?c.value[E].$errors[0].$message:"",u=S(()=>({name:d("name"),description:d("description"),productName:d("productName")})),m=E=>{const{config:y={}}=E;i.name=E.name,i.description=E.description,i.productName=y.product_name,i.features={conversationFaqs:y.feature_faq||!1,memories:y.feature_memory||!1,citations:y.feature_citation||!1}},h=async()=>{if(!await Promise.all([c.value.name.$validate(),c.value.description.$validate(),c.value.productName.$validate()]).then(b=>b.every(Boolean)))return;const y={name:i.name,description:i.description,config:{...e.assistant.config,product_name:i.productName,feature_faq:i.features.conversationFaqs,feature_memory:i.features.memories,feature_citation:i.features.citations}};s("submit",y)};je(()=>e.assistant,E=>{E&&m(E)},{immediate:!0});const _={props:e,emit:s,t:r,initialState:o,state:i,validationRules:l,v$:c,getErrorMessage:d,formErrors:u,updateStateFromAssistant:m,handleBasicInfoUpdate:h,reactive:Lt,computed:S,watch:je,get useI18n(){return Q},get useVuelidate(){return rt},get required(){return Ge},get minLength(){return Rt},Input:sn,Button:Se,Editor:Ds};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}},yIt={class:"flex flex-col gap-6"},IIt={class:"flex flex-col gap-2"},CIt={class:"text-sm font-medium text-n-slate-12"},OIt={class:"flex flex-col gap-2"},NIt={class:"flex items-center gap-2"},xIt={class:"flex items-center gap-2"},RIt={class:"flex items-center gap-2"};function wIt(t,n,a,e,s,r){return p(),g("div",yIt,[v(e.Input,{modelValue:e.state.name,"onUpdate:modelValue":n[0]||(n[0]=o=>e.state.name=o),label:e.t("CAPTAIN.ASSISTANTS.FORM.NAME.LABEL"),placeholder:e.t("CAPTAIN.ASSISTANTS.FORM.NAME.PLACEHOLDER"),message:e.formErrors.name,"message-type":e.formErrors.name?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),v(e.Input,{modelValue:e.state.productName,"onUpdate:modelValue":n[1]||(n[1]=o=>e.state.productName=o),label:e.t("CAPTAIN.ASSISTANTS.FORM.PRODUCT_NAME.LABEL"),placeholder:e.t("CAPTAIN.ASSISTANTS.FORM.PRODUCT_NAME.PLACEHOLDER"),message:e.formErrors.productName,"message-type":e.formErrors.productName?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),v(e.Editor,{modelValue:e.state.description,"onUpdate:modelValue":n[2]||(n[2]=o=>e.state.description=o),label:e.t("CAPTAIN.ASSISTANTS.FORM.DESCRIPTION.LABEL"),placeholder:e.t("CAPTAIN.ASSISTANTS.FORM.DESCRIPTION.PLACEHOLDER"),message:e.formErrors.description,"message-type":e.formErrors.description?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),f("div",IIt,[f("label",CIt,C(e.t("CAPTAIN.ASSISTANTS.FORM.FEATURES.TITLE")),1),f("div",OIt,[f("label",NIt,[ce(f("input",{"onUpdate:modelValue":n[3]||(n[3]=o=>e.state.features.conversationFaqs=o),type:"checkbox"},null,512),[[bn,e.state.features.conversationFaqs]]),Oe(" "+C(e.t("CAPTAIN.ASSISTANTS.FORM.FEATURES.ALLOW_CONVERSATION_FAQS")),1)]),f("label",xIt,[ce(f("input",{"onUpdate:modelValue":n[4]||(n[4]=o=>e.state.features.memories=o),type:"checkbox"},null,512),[[bn,e.state.features.memories]]),Oe(" "+C(e.t("CAPTAIN.ASSISTANTS.FORM.FEATURES.ALLOW_MEMORIES")),1)]),f("label",RIt,[ce(f("input",{"onUpdate:modelValue":n[5]||(n[5]=o=>e.state.features.citations=o),type:"checkbox"},null,512),[[bn,e.state.features.citations]]),Oe(" "+C(e.t("CAPTAIN.ASSISTANTS.FORM.FEATURES.ALLOW_CITATIONS")),1)])])]),f("div",null,[v(e.Button,{label:e.t("CAPTAIN.ASSISTANTS.FORM.UPDATE"),onClick:e.handleBasicInfoUpdate},null,8,["label"])])])}const MIt=G(AIt,[["render",wIt],["__file","/app/app/javascript/dashboard/components-next/captain/pageComponents/assistant/settings/AssistantBasicSettingsForm.vue"]]),LIt={__name:"AssistantSystemSettingsForm",props:{assistant:{type:Object,default:()=>({})}},emits:["submit"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o={handoffMessage:"",resolutionMessage:"",temperature:1},i=Lt({...o}),l={handoffMessage:{minLength:Rt(1)},resolutionMessage:{minLength:Rt(1)}},c=rt(l,i),d=E=>c.value[E].$error?c.value[E].$errors[0].$message:"",u=S(()=>({handoffMessage:d("handoffMessage"),resolutionMessage:d("resolutionMessage")})),m=E=>{const{config:y={}}=E;i.handoffMessage=y.handoff_message,i.resolutionMessage=y.resolution_message,i.temperature=y.temperature||1},h=async()=>{if(!await Promise.all([c.value.handoffMessage.$validate(),c.value.resolutionMessage.$validate()]).then(b=>b.every(Boolean)))return;const y={config:{...e.assistant.config,handoff_message:i.handoffMessage,resolution_message:i.resolutionMessage,temperature:i.temperature||1}};s("submit",y)};je(()=>e.assistant,E=>{E&&m(E)},{immediate:!0});const _={props:e,emit:s,t:r,initialState:o,state:i,validationRules:l,v$:c,getErrorMessage:d,formErrors:u,updateStateFromAssistant:m,handleSystemMessagesUpdate:h,reactive:Lt,computed:S,watch:je,get useI18n(){return Q},get useVuelidate(){return rt},get minLength(){return Rt},Button:Se,Editor:Ds};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}},DIt={class:"flex flex-col gap-6"},PIt={class:"flex flex-col gap-2"},kIt={class:"text-sm font-medium text-n-slate-12"},BIt={class:"flex items-center gap-4"},FIt={class:"text-sm text-n-slate-12"},UIt={class:"text-sm text-n-slate-11 italic"};function $It(t,n,a,e,s,r){return p(),g("div",DIt,[v(e.Editor,{modelValue:e.state.handoffMessage,"onUpdate:modelValue":n[0]||(n[0]=o=>e.state.handoffMessage=o),label:e.t("CAPTAIN.ASSISTANTS.FORM.HANDOFF_MESSAGE.LABEL"),placeholder:e.t("CAPTAIN.ASSISTANTS.FORM.HANDOFF_MESSAGE.PLACEHOLDER"),message:e.formErrors.handoffMessage,"message-type":e.formErrors.handoffMessage?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),v(e.Editor,{modelValue:e.state.resolutionMessage,"onUpdate:modelValue":n[1]||(n[1]=o=>e.state.resolutionMessage=o),label:e.t("CAPTAIN.ASSISTANTS.FORM.RESOLUTION_MESSAGE.LABEL"),placeholder:e.t("CAPTAIN.ASSISTANTS.FORM.RESOLUTION_MESSAGE.PLACEHOLDER"),message:e.formErrors.resolutionMessage,"message-type":e.formErrors.resolutionMessage?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),f("div",PIt,[f("label",kIt,C(e.t("CAPTAIN.ASSISTANTS.FORM.TEMPERATURE.LABEL")),1),f("div",BIt,[ce(f("input",{"onUpdate:modelValue":n[2]||(n[2]=o=>e.state.temperature=o),type:"range",min:"0",max:"1",step:"0.1",class:"w-full"},null,512),[[Et,e.state.temperature]]),f("span",FIt,C(e.state.temperature),1)]),f("p",UIt,C(e.t("CAPTAIN.ASSISTANTS.FORM.TEMPERATURE.DESCRIPTION")),1)]),f("div",null,[v(e.Button,{label:e.t("CAPTAIN.ASSISTANTS.FORM.UPDATE"),onClick:e.handleSystemMessagesUpdate},null,8,["label"])])])}const GIt=G(LIt,[["render",$It],["__file","/app/app/javascript/dashboard/components-next/captain/pageComponents/assistant/settings/AssistantSystemSettingsForm.vue"]]),VIt={__name:"AssistantControlItems",props:{controlItem:{type:Object,default:()=>({})}},setup(t,{expose:n}){n();const a=ft(),s={router:a,onClick:r=>{a.push({name:r})},get useRouter(){return ft},Button:Se};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}},HIt={class:"flex items-center justify-between w-full gap-1 h-8"},jIt={class:"text-sm font-medium text-n-slate-12 line-clamp-1"},WIt={class:"flex items-center gap-2"},zIt={class:"text-n-slate-11 text-sm leading-[21px] line-clamp-5"};function YIt(t,n,a,e,s,r){return p(),g("div",{key:a.controlItem.name,class:"pt-3 ltr:pl-4 rtl:pr-4 ltr:pr-2 rtl:pl-2 pb-5 gap-2 flex flex-col w-full shadow outline-1 outline outline-n-container rounded-2xl bg-n-solid-2 cursor-pointer",onClick:n[1]||(n[1]=o=>e.onClick(a.controlItem.routeName))},[f("div",HIt,[f("span",jIt,C(a.controlItem.name),1),f("div",WIt,[v(e.Button,{icon:"i-lucide-chevron-right",slate:"",ghost:"",xs:"",onClick:n[0]||(n[0]=o=>e.onClick(a.controlItem.routeName))})])]),f("span",zIt,C(a.controlItem.description),1)])}const KIt=G(VIt,[["render",YIt],["__file","/app/app/javascript/dashboard/components-next/captain/pageComponents/assistant/settings/AssistantControlItems.vue"]]),XIt={__name:"Settings",setup(t,{expose:n}){n();const{t:a}=Q(),e=lt(),s=Fe(),r=e.params.assistantId,o=le("captainAssistants/getUIFlags"),i=S(()=>o.value.fetchingItem),l=S(()=>s.getters["captainAssistants/getRecord"](Number(r))),c=S(()=>{var _;return!!((_=l.value)!=null&&_.id)}),d=S(()=>[{name:a("CAPTAIN.ASSISTANTS.SETTINGS.CONTROL_ITEMS.OPTIONS.GUARDRAILS.TITLE"),description:a("CAPTAIN.ASSISTANTS.SETTINGS.CONTROL_ITEMS.OPTIONS.GUARDRAILS.DESCRIPTION"),routeName:"captain_assistants_guardrails_index"},{name:a("CAPTAIN.ASSISTANTS.SETTINGS.CONTROL_ITEMS.OPTIONS.SCENARIOS.TITLE"),description:a("CAPTAIN.ASSISTANTS.SETTINGS.CONTROL_ITEMS.OPTIONS.SCENARIOS.DESCRIPTION"),routeName:"captain_assistants_scenarios_index"},{name:a("CAPTAIN.ASSISTANTS.SETTINGS.CONTROL_ITEMS.OPTIONS.RESPONSE_GUIDELINES.TITLE"),description:a("CAPTAIN.ASSISTANTS.SETTINGS.CONTROL_ITEMS.OPTIONS.RESPONSE_GUIDELINES.DESCRIPTION"),routeName:"captain_assistants_guidelines_index"}]),u=S(()=>{var E,y;const _=(E=d.value)==null?void 0:E.find(b=>b.routeName===e.name);return[{label:a("CAPTAIN.ASSISTANTS.SETTINGS.BREADCRUMB.ASSISTANT"),routeName:"captain_assistants_index"},{label:(y=l.value)==null?void 0:y.name,routeName:"captain_assistants_edit"},..._?[{label:_.name,routeName:_.routeName}]:[]]}),m=async _=>{try{await s.dispatch("captainAssistants/update",{id:r,..._}),Z(a("CAPTAIN.ASSISTANTS.EDIT.SUCCESS_MESSAGE"))}catch(E){const y=(E==null?void 0:E.message)||a("CAPTAIN.ASSISTANTS.EDIT.ERROR_MESSAGE");Z(y)}};Pe(()=>{c.value||s.dispatch("captainAssistants/show",r)});const h={t:a,route:e,store:s,assistantId:r,uiFlags:o,isFetching:i,assistant:l,isAssistantAvailable:c,controlItems:d,breadcrumbItems:u,handleSubmit:m,computed:S,onMounted:Pe,get useRoute(){return lt},get useI18n(){return Q},get useAlert(){return Z},get useStore(){return Fe},get useMapGetter(){return le},SettingsPageLayout:m_,SettingsHeader:h_,AssistantBasicSettingsForm:MIt,AssistantSystemSettingsForm:GIt,AssistantControlItems:KIt};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}},qIt={class:"flex flex-col gap-6"},ZIt={class:"flex flex-col gap-6"},QIt={class:"flex flex-col gap-6"},JIt={class:"flex flex-col gap-6"},eCt={class:"flex flex-col gap-6"};function tCt(t,n,a,e,s,r){return p(),L(e.SettingsPageLayout,{"breadcrumb-items":e.breadcrumbItems,"is-fetching":e.isFetching,class:"[&>div]:max-w-[80rem]"},{body:z(()=>[f("div",qIt,[f("div",ZIt,[v(e.SettingsHeader,{heading:e.t("CAPTAIN.ASSISTANTS.SETTINGS.BASIC_SETTINGS.TITLE"),description:e.t("CAPTAIN.ASSISTANTS.SETTINGS.BASIC_SETTINGS.DESCRIPTION")},null,8,["heading","description"]),v(e.AssistantBasicSettingsForm,{assistant:e.assistant,onSubmit:e.handleSubmit},null,8,["assistant"])]),n[0]||(n[0]=f("span",{class:"h-px w-full bg-n-weak mt-2"},null,-1)),f("div",QIt,[v(e.SettingsHeader,{heading:e.t("CAPTAIN.ASSISTANTS.SETTINGS.SYSTEM_SETTINGS.TITLE"),description:e.t("CAPTAIN.ASSISTANTS.SETTINGS.SYSTEM_SETTINGS.DESCRIPTION")},null,8,["heading","description"]),v(e.AssistantSystemSettingsForm,{assistant:e.assistant,onSubmit:e.handleSubmit},null,8,["assistant"])])])]),controls:z(()=>[f("div",JIt,[v(e.SettingsHeader,{heading:e.t("CAPTAIN.ASSISTANTS.SETTINGS.CONTROL_ITEMS.TITLE"),description:e.t("CAPTAIN.ASSISTANTS.SETTINGS.CONTROL_ITEMS.DESCRIPTION")},null,8,["heading","description"]),f("div",eCt,[(p(!0),g(de,null,Ae(e.controlItems,o=>(p(),L(e.AssistantControlItems,{key:o.name,"control-item":o},null,8,["control-item"]))),128))])])]),_:1},8,["breadcrumb-items","is-fetching"])}const nCt=G(XIt,[["render",tCt],["__file","/app/app/javascript/dashboard/routes/dashboard/captain/assistants/settings/Settings.vue"]]),aCt={__name:"Edit",setup(t,{expose:n}){n();const a=lt(),e=Fe(),{t:s}=Q(),r=a.params.assistantId,o=le("captainAssistants/getUIFlags"),i=S(()=>o.value.fetchingItem),l=S(()=>e.getters["captainAssistants/getRecord"](Number(r))),c=le("accounts/isFeatureEnabledonAccount"),d=le("getCurrentAccountId"),u=c.value(d.value,pt.CAPTAIN_V2),m=S(()=>{var E;return!!((E=l.value)!=null&&E.id)}),h=async E=>{try{await e.dispatch("captainAssistants/update",{id:r,...E}),Z(s("CAPTAIN.ASSISTANTS.EDIT.SUCCESS_MESSAGE"))}catch(y){const b=(y==null?void 0:y.message)||s("CAPTAIN.ASSISTANTS.EDIT.ERROR_MESSAGE");Z(b)}};Pe(()=>{(!m.value||!u)&&e.dispatch("captainAssistants/show",r)});const _={route:a,store:e,t:s,assistantId:r,uiFlags:o,isFetching:i,assistant:l,isFeatureEnabledonAccount:c,currentAccountId:d,isCaptainV2Enabled:u,isAssistantAvailable:m,handleSubmit:h,computed:S,onMounted:Pe,get useRoute(){return lt},get useStore(){return Fe},get useMapGetter(){return le},get useAlert(){return Z},get useI18n(){return Q},get FEATURE_FLAGS(){return pt},PageLayout:ql,EditAssistantForm:V0t,AssistantPlayground:rIt,AssistantSettings:nCt};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}},sCt={key:0},oCt={key:1,class:"flex gap-4 h-full"},rCt={class:"flex-1 lg:overflow-auto pr-4 h-full md:h-auto"},iCt={class:"w-[400px] hidden lg:block h-full"};function lCt(t,n,a,e,s,r){var o;return e.isCaptainV2Enabled?(p(),L(e.AssistantSettings,{key:0})):(p(),L(e.PageLayout,{key:1,"header-title":(o=e.assistant)==null?void 0:o.name,"show-pagination-footer":!1,"is-fetching":e.isFetching,"show-know-more":!1,"back-url":{name:"captain_assistants_index"}},{body:z(()=>[e.isAssistantAvailable?(p(),g("div",oCt,[f("div",rCt,[v(e.EditAssistantForm,{assistant:e.assistant,mode:"edit",onSubmit:e.handleSubmit},null,8,["assistant"])]),f("div",iCt,[v(e.AssistantPlayground,{"assistant-id":Number(e.assistantId)},null,8,["assistant-id"])])])):(p(),g("div",sCt,C(e.t("CAPTAIN.ASSISTANTS.EDIT.NOT_FOUND")),1))]),_:1},8,["header-title","is-fetching"]))}const cCt=G(aCt,[["render",lCt],["__file","/app/app/javascript/dashboard/routes/dashboard/captain/assistants/Edit.vue"]]),dCt={__name:"ConnectInboxForm",props:{assistantId:{type:Number,required:!0}},emits:["submit","cancel"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o={uiFlags:le("captainInboxes/getUIFlags"),inboxes:le("inboxes/getInboxes"),captainInboxes:le("captainInboxes/getRecords")},i={inboxId:null},l=Lt({...i}),c={inboxId:{required:Ge}},d=S(()=>{const T=o.captainInboxes.value.map(I=>I.id);return o.inboxes.value.filter(I=>!T.includes(I.id)).map(I=>({value:I.id,label:I.name}))}),u=rt(c,l),m=S(()=>o.uiFlags.value.creatingItem),h=(T,I)=>u.value[T].$error?r(`CAPTAIN.INBOXES.FORM.${I}.ERROR`):"",_=S(()=>({inboxId:h("inboxId","INBOX")})),E=()=>s("cancel"),y=()=>({inboxId:l.inboxId,assistantId:e.assistantId}),A={props:e,emit:s,t:r,formState:o,initialState:i,state:l,validationRules:c,inboxList:d,v$:u,isLoading:m,getErrorMessage:h,formErrors:_,handleCancel:E,prepareInboxPayload:y,handleSubmit:async()=>{await u.value.$validate()&&s("submit",y())},reactive:Lt,computed:S,get useI18n(){return Q},get useVuelidate(){return rt},get required(){return Ge},get useMapGetter(){return le},Button:Se,ComboBox:Cr};return Object.defineProperty(A,"__isScriptSetup",{enumerable:!1,value:!0}),A}},uCt={class:"flex flex-col gap-1"},pCt={for:"inbox",class:"mb-0.5 text-sm font-medium text-n-slate-12"},fCt={class:"flex items-center justify-between w-full gap-3"};function mCt(t,n,a,e,s,r){return p(),g("form",{class:"flex flex-col gap-4",onSubmit:Ve(e.handleSubmit,["prevent"])},[f("div",uCt,[f("label",pCt,C(e.t("CAPTAIN.INBOXES.FORM.INBOX.LABEL")),1),v(e.ComboBox,{id:"inbox",modelValue:e.state.inboxId,"onUpdate:modelValue":n[0]||(n[0]=o=>e.state.inboxId=o),options:e.inboxList,"has-error":!!e.formErrors.inboxId,placeholder:e.t("CAPTAIN.INBOXES.FORM.INBOX.PLACEHOLDER"),class:"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:dark:outline-n-weak [&>div>button:not(.focused)]:hover:!outline-n-slate-6",message:e.formErrors.inboxId},null,8,["modelValue","options","has-error","placeholder","message"])]),f("div",fCt,[v(e.Button,{type:"button",variant:"faded",color:"slate",label:e.t("CAPTAIN.FORM.CANCEL"),class:"w-full bg-n-alpha-2 text-n-blue-text hover:bg-n-alpha-3",onClick:e.handleCancel},null,8,["label"]),v(e.Button,{type:"submit",label:e.t("CAPTAIN.FORM.CREATE"),class:"w-full","is-loading":e.isLoading,disabled:e.isLoading},null,8,["label","is-loading","disabled"])])],32)}const hCt=G(dCt,[["render",mCt],["__file","/app/app/javascript/dashboard/components-next/captain/pageComponents/inbox/ConnectInboxForm.vue"]]),Yb="CAPTAIN.INBOXES.CREATE",_Ct={__name:"ConnectInboxDialog",props:{assistantId:{type:Number,required:!0}},emits:["close"],setup(t,{expose:n,emit:a}){const e=a,{t:s}=Q(),r=Fe(),o=P(null),i=P(null),l=async m=>{try{await r.dispatch("captainInboxes/create",m),Z(s(`${Yb}.SUCCESS_MESSAGE`)),o.value.close()}catch(h){const _=(h==null?void 0:h.message)||s(`${Yb}.ERROR_MESSAGE`);Z(_)}},c=()=>{e("close")},d=()=>{o.value.close()};n({dialogRef:o});const u={emit:e,t:s,store:r,dialogRef:o,connectForm:i,i18nKey:Yb,handleSubmit:l,handleClose:c,handleCancel:d,ref:P,get useStore(){return Fe},get useAlert(){return Z},get useI18n(){return Q},Dialog:la,ConnectInboxForm:hCt};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}};function gCt(t,n,a,e,s,r){return p(),L(e.Dialog,{ref:"dialogRef",type:"create",title:t.$t(`${e.i18nKey}.TITLE`),description:t.$t("CAPTAIN.INBOXES.FORM_DESCRIPTION"),"show-cancel-button":!1,"show-confirm-button":!1,onClose:e.handleClose},{footer:z(()=>n[0]||(n[0]=[])),default:z(()=>[v(e.ConnectInboxForm,{ref:"connectForm","assistant-id":a.assistantId,onSubmit:e.handleSubmit,onCancel:e.handleCancel},null,8,["assistant-id"])]),_:1},8,["title","description"])}const bCt=G(_Ct,[["render",gCt],["__file","/app/app/javascript/dashboard/components-next/captain/pageComponents/inbox/ConnectInboxDialog.vue"]]),vCt={__name:"InboxCard",props:{id:{type:Number,required:!0},inbox:{type:Object,required:!0}},emits:["action"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),[o,i]=$t(),l=S(()=>{const h=e.inbox;if(!(h!=null&&h.name))return"";const _=h.channel_type===ht.TWILIO,E=h.channel_type===ht.WHATSAPP,y=h.channel_type===ht.EMAIL;if(_||E){const b=h.messaging_service_sid||h.phone_number;return b?`${h.name} (${b})`:h.name}return y&&h.email?`${h.name} (${h.email})`:h.name}),c=S(()=>[{label:r("CAPTAIN.INBOXES.OPTIONS.DISCONNECT"),value:"delete",action:"delete",icon:"i-lucide-trash"}]),d=S(()=>{const{medium:h,channel_type:_}=e.inbox;return vs(_,h,"outline")}),m={props:e,emit:s,t:r,showActionsDropdown:o,toggleDropdown:i,inboxName:l,menuItems:c,icon:d,handleAction:({action:h,value:_})=>{i(!1),s("action",{action:h,value:_,id:e.id})},computed:S,get useToggle(){return $t},get useI18n(){return Q},CardLayout:ho,DropdownMenu:ds,Button:Se,Policy:ii,get INBOX_TYPES(){return ht},get getInboxIconByType(){return vs}};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}},ECt={class:"flex justify-between w-full gap-1"},SCt={class:"text-base text-n-slate-12 line-clamp-1 flex items-center gap-2"},TCt={class:"flex items-center gap-2"};function ACt(t,n,a,e,s,r){const o=nt("on-clickaway");return p(),L(e.CardLayout,null,{default:z(()=>[f("div",ECt,[f("span",SCt,[f("span",{class:oe(e.icon)},null,2),Oe(" "+C(e.inboxName),1)]),f("div",TCt,[ce((p(),L(e.Policy,{permissions:["administrator"],class:"relative flex items-center group"},{default:z(()=>[v(e.Button,{icon:"i-lucide-ellipsis-vertical",color:"slate",size:"xs",class:"rounded-md group-hover:bg-n-alpha-2",onClick:n[0]||(n[0]=i=>e.toggleDropdown())}),e.showActionsDropdown?(p(),L(e.DropdownMenu,{key:0,"menu-items":e.menuItems,class:"mt-1 ltr:right-0 rtl:left-0 top-full",onAction:n[1]||(n[1]=i=>e.handleAction(i))},null,8,["menu-items"])):O("v-if",!0)]),_:1})),[[o,()=>e.toggleDropdown(!1)]])])])]),_:1})}const gP=G(vCt,[["render",ACt],["__file","/app/app/javascript/dashboard/components-next/captain/assistant/InboxCard.vue"]]),yCt={__name:"InboxPageEmptyState",emits:["click"],setup(t,{expose:n,emit:a}){n();const e=a,r={emit:e,onClick:()=>{e("click")},EmptyStateLayout:Or,Button:Se,InboxCard:gP,get inboxes(){return zyt}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},ICt={class:"grid grid-cols-1 gap-4 p-px overflow-hidden"};function CCt(t,n,a,e,s,r){return p(),L(e.EmptyStateLayout,{title:t.$t("CAPTAIN.INBOXES.EMPTY_STATE.TITLE"),subtitle:t.$t("CAPTAIN.INBOXES.EMPTY_STATE.SUBTITLE"),"action-perms":["administrator"]},{"empty-state-item":z(()=>[f("div",ICt,[(p(!0),g(de,null,Ae(e.inboxes.slice(0,5),(o,i)=>(p(),L(e.InboxCard,{id:o.id,key:`inbox-${i}`,inbox:o},null,8,["id","inbox"]))),128))])]),actions:z(()=>[v(e.Button,{label:t.$t("CAPTAIN.INBOXES.ADD_NEW"),icon:"i-lucide-plus",onClick:e.onClick},null,8,["label"])]),_:1},8,["title","subtitle"])}const OCt=G(yCt,[["render",CCt],["__file","/app/app/javascript/dashboard/components-next/captain/pageComponents/emptyStates/InboxPageEmptyState.vue"]]),NCt={__name:"Index",setup(t,{expose:n}){n();const a=Fe(),e=P(""),s=lt(),r=le("captainAssistants/getUIFlags"),o=le("captainInboxes/getUIFlags"),i=S(()=>r.value.fetchingItem),l=S(()=>o.value.fetchingList),c=le("captainInboxes/getRecords"),d=P(null),u=P(null),m=()=>{u.value.dialogRef.open()},h=P(null),_=()=>{e.value="create",At(()=>h.value.dialogRef.open())},E=({action:N,id:x})=>{d.value=c.value.find(R=>x===R.id),At(()=>{N==="delete"&&m()})},y=()=>{e.value="",d.value=null},b=xt(),A=Number(s.params.assistantId),T=S(()=>b["captainAssistants/getRecord"].value(A));jc(()=>a.dispatch("captainAssistants/show",A)),Pe(()=>a.dispatch("captainInboxes/get",{assistantId:A}));const I={store:a,dialogType:e,route:s,assistantUiFlags:r,uiFlags:o,isFetchingAssistant:i,isFetching:l,captainInboxes:c,selectedInbox:d,disconnectInboxDialog:u,handleDelete:m,connectInboxDialog:h,handleCreate:_,handleAction:E,handleCreateClose:y,getters:b,assistantId:A,assistant:T,computed:S,onBeforeMount:jc,onMounted:Pe,ref:P,nextTick:At,get useMapGetter(){return le},get useStore(){return Fe},get useStoreGetters(){return xt},get useRoute(){return lt},get FEATURE_FLAGS(){return pt},BackButton:Wl,DeleteDialog:Rd,PageLayout:ql,ConnectInboxDialog:bCt,InboxCard:gP,InboxPageEmptyState:OCt};return Object.defineProperty(I,"__isScriptSetup",{enumerable:!1,value:!0}),I}},xCt={class:"flex flex-row items-center gap-4"},RCt={class:"flex items-center gap-1 text-lg font-medium text-n-slate-12"},wCt={class:"flex flex-col gap-4"};function MCt(t,n,a,e,s,r){return p(),L(e.PageLayout,{"button-label":t.$t("CAPTAIN.INBOXES.ADD_NEW"),"button-policy":["administrator"],"is-fetching":e.isFetchingAssistant||e.isFetching,"is-empty":!e.captainInboxes.length,"show-pagination-footer":!1,"feature-flag":e.FEATURE_FLAGS.CAPTAIN,onClick:e.handleCreate},Ro({emptyState:z(()=>[v(e.InboxPageEmptyState,{onClick:e.handleCreate})]),body:z(()=>[f("div",wCt,[(p(!0),g(de,null,Ae(e.captainInboxes,o=>(p(),L(e.InboxCard,{id:o.id,key:o.id,inbox:o,onAction:e.handleAction},null,8,["id","inbox"]))),128))])]),default:z(()=>[e.selectedInbox?(p(),L(e.DeleteDialog,{key:0,ref:"disconnectInboxDialog",entity:e.selectedInbox,"delete-payload":{assistantId:e.assistantId,inboxId:e.selectedInbox.id},type:"Inboxes"},null,8,["entity","delete-payload"])):O("v-if",!0),e.dialogType?(p(),L(e.ConnectInboxDialog,{key:1,ref:"connectInboxDialog","assistant-id":e.assistantId,type:e.dialogType,onClose:e.handleCreateClose},null,8,["assistant-id","type"])):O("v-if",!0)]),_:2},[e.isFetchingAssistant?void 0:{name:"headerTitle",fn:z(()=>[f("div",xCt,[v(e.BackButton,{compact:""}),f("span",RCt,[Oe(C(e.assistant.name)+" ",1),n[0]||(n[0]=f("span",{class:"i-lucide-chevron-right text-xl text-n-slate-10"},null,-1)),Oe(" "+C(t.$t("CAPTAIN.INBOXES.HEADER")),1)])])]),key:"0"}]),1032,["button-label","is-fetching","is-empty","feature-flag"])}const LCt=G(NCt,[["render",MCt],["__file","/app/app/javascript/dashboard/routes/dashboard/captain/assistants/inboxes/Index.vue"]]),DCt={__name:"SuggestedRules",props:{title:{type:String,default:""},items:{type:Array,default:()=>[]}},emits:["add","close"],setup(t,{expose:n,emit:a}){n();const e=a,{t:s}=Q(),i={emit:e,t:s,onAddClick:()=>{e("add")},onClickClose:()=>{e("close")},get useI18n(){return Q},Button:Se};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}},PCt={class:"flex flex-col items-start self-stretch rounded-xl w-full overflow-hidden border border-dashed border-n-strong"},kCt={class:"flex items-center justify-between w-full gap-3 px-4 pb-1 pt-4"},BCt={class:"flex items-center gap-3"},FCt={class:"text-sm font-medium text-n-slate-11"},UCt={class:"flex flex-col items-start divide-y divide-n-strong divide-dashed w-full"};function $Ct(t,n,a,e,s,r){return p(),g("div",PCt,[f("div",kCt,[f("div",BCt,[f("h5",FCt,C(a.title),1),n[0]||(n[0]=f("span",{class:"h-3 w-px bg-n-weak"},null,-1)),v(e.Button,{label:e.t("CAPTAIN.ASSISTANTS.GUARDRAILS.ADD.SUGGESTED.ADD"),ghost:"",xs:"",slate:"",class:"!text-sm !text-n-slate-11 flex-shrink-0",onClick:e.onAddClick},null,8,["label"])]),v(e.Button,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",class:"!text-sm !text-n-slate-11 flex-shrink-0",onClick:e.onClickClose})]),f("div",UCt,[(p(!0),g(de,null,Ae(a.items,o=>(p(),g("div",{key:o.content,class:"w-full px-4 py-4"},[qe(t.$slots,"default",{item:o})]))),128))])])}const D1=G(DCt,[["render",$Ct],["__file","/app/app/javascript/dashboard/components-next/captain/assistant/SuggestedRules.vue"]]),GCt={__name:"AddNewRulesInput",props:an({placeholder:{type:String,default:""},label:{type:String,default:""}},{modelValue:{type:String,default:""},modelModifiers:{}}),emits:an(["add"],["update:modelValue"]),setup(t,{expose:n,emit:a}){n();const e=a,s=dn(t,"modelValue"),o={emit:e,modelValue:s,onClickAdd:()=>{var i;(i=s.value)!=null&&i.trim()&&(e("add",s.value.trim()),s.value="")},Icon:Bt,Button:Se,InlineInput:gp};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},VCt={class:"flex py-3 ltr:pl-3 h-16 rtl:pr-3 ltr:pr-4 rtl:pl-4 items-center gap-3 rounded-xl bg-n-solid-2 outline-1 outline outline-n-container"};function HCt(t,n,a,e,s,r){return p(),g("div",VCt,[v(e.Icon,{icon:"i-lucide-plus",class:"text-n-slate-10 size-5 flex-shrink-0"}),v(e.InlineInput,{modelValue:e.modelValue,"onUpdate:modelValue":n[0]||(n[0]=o=>e.modelValue=o),placeholder:a.placeholder,onKeyup:Vn(e.onClickAdd,["enter"])},null,8,["modelValue","placeholder"]),v(e.Button,{label:a.label,ghost:"",xs:"",slate:"",class:"!text-sm !text-n-slate-11 flex-shrink-0",onClick:e.onClickAdd},null,8,["label"])])}const bP=G(GCt,[["render",HCt],["__file","/app/app/javascript/dashboard/components-next/captain/assistant/AddNewRulesInput.vue"]]),jCt={__name:"AddNewRulesDialog",props:an({placeholder:{type:String,default:""},buttonLabel:{type:String,default:""},confirmLabel:{type:String,default:""},cancelLabel:{type:String,default:""}},{modelValue:{type:String,default:""},modelModifiers:{}}),emits:an(["add"],["update:modelValue"]),setup(t,{expose:n,emit:a}){n();const e=a,s=dn(t,"modelValue"),[r,o]=$t(),c={emit:e,modelValue:s,showPopover:r,togglePopover:o,onClickAdd:()=>{var d;(d=s.value)!=null&&d.trim()&&(e("add",s.value.trim()),s.value="",o(!1))},onClickCancel:()=>{o(!1)},get useToggle(){return $t},get vOnClickOutside(){return Ga},Button:Se,InlineInput:gp};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}},WCt={class:"inline-flex relative"},zCt={key:0,class:"absolute w-[26.5rem] top-9 z-50 ltr:left-0 rtl:right-0 flex flex-col gap-5 bg-n-alpha-3 backdrop-blur-[100px] p-4 rounded-xl border border-n-weak shadow-md"},YCt={class:"flex gap-2 justify-between"};function KCt(t,n,a,e,s,r){return ce((p(),g("div",WCt,[v(e.Button,{label:a.buttonLabel,sm:"",slate:"",class:"flex-shrink-0",onClick:n[0]||(n[0]=o=>e.togglePopover(!e.showPopover))},null,8,["label"]),e.showPopover?(p(),g("div",zCt,[v(e.InlineInput,{modelValue:e.modelValue,"onUpdate:modelValue":n[1]||(n[1]=o=>e.modelValue=o),placeholder:a.placeholder,onKeyup:Vn(e.onClickAdd,["enter"])},null,8,["modelValue","placeholder"]),f("div",YCt,[v(e.Button,{label:a.cancelLabel,sm:"",link:"",slate:"",class:"h-10 hover:!no-underline",onClick:e.onClickCancel},null,8,["label"]),v(e.Button,{label:a.confirmLabel,sm:"",onClick:e.onClickAdd},null,8,["label"])])])):O("v-if",!0)])),[[e.vOnClickOutside,()=>e.togglePopover(!1)]])}const vP=G(jCt,[["render",KCt],["__file","/app/app/javascript/dashboard/components-next/captain/assistant/AddNewRulesDialog.vue"]]),XCt={__name:"RuleCard",props:{id:{type:Number,required:!0},content:{type:String,required:!0},selectable:{type:Boolean,default:!1},isSelected:{type:Boolean,default:!1}},emits:["select","hover","edit","delete"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=S({get:()=>e.isSelected,set:()=>s("select",e.id)}),o=P(!1),i=P(e.content),l=P(e.content);je(()=>e.content,m=>{l.value=m});const u={props:e,emit:s,modelValue:r,isEditing:o,editedContent:i,localContent:l,startEdit:()=>{o.value=!0,i.value=e.content},saveEdit:()=>{o.value=!1,l.value=i.value,s("edit",{id:e.id,content:i.value})},computed:S,ref:P,watch:je,Button:Se,CardLayout:ho,Checkbox:nl,InlineInput:gp};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}},qCt={class:"absolute top-6 ltr:left-3 rtl:right-3"},ZCt={key:1,class:"flex items-center gap-2 text-sm text-n-slate-12"},QCt={class:"flex items-center gap-2"};function JCt(t,n,a,e,s,r){return p(),L(e.CardLayout,{selectable:"",class:"relative [&>div]:!py-5 [&>div]:ltr:!pr-4 [&>div]:rtl:!pl-4",layout:"row",onMouseenter:n[3]||(n[3]=o=>e.emit("hover",!0)),onMouseleave:n[4]||(n[4]=o=>e.emit("hover",!1))},{default:z(()=>[ce(f("div",qCt,[v(e.Checkbox,{modelValue:e.modelValue,"onUpdate:modelValue":n[0]||(n[0]=o=>e.modelValue=o)},null,8,["modelValue"])],512),[[En,a.selectable]]),e.isEditing?(p(),L(e.InlineInput,{key:0,modelValue:e.editedContent,"onUpdate:modelValue":n[1]||(n[1]=o=>e.editedContent=o),"focus-on-mount":"",onKeyup:Vn(e.saveEdit,["enter"])},null,8,["modelValue"])):(p(),g("span",ZCt,C(e.localContent),1)),f("div",QCt,[v(e.Button,{icon:"i-lucide-pen",slate:"",xs:"",ghost:"",onClick:e.startEdit}),n[5]||(n[5]=f("span",{class:"w-px h-4 bg-n-weak"},null,-1)),v(e.Button,{icon:"i-lucide-trash",slate:"",xs:"",ghost:"",onClick:n[2]||(n[2]=o=>e.emit("delete",a.id))})])]),_:1})}const EP=G(XCt,[["render",JCt],["__file","/app/app/javascript/dashboard/components-next/captain/assistant/RuleCard.vue"]]),eOt={__name:"Index",setup(t,{expose:n}){n();const{t:a}=Q(),e=lt(),s=Fe(),{uiSettings:r,updateUISettings:o}=Ct(),i=e.params.assistantId,l=le("captainAssistants/getUIFlags"),c=S(()=>l.value.fetchingItem),d=S(()=>s.getters["captainAssistants/getRecord"](Number(i))),u=P(""),m=P(""),h=P(""),_=S(()=>{var U;return[{label:a("CAPTAIN.ASSISTANTS.SETTINGS.BREADCRUMB.ASSISTANT"),routeName:"captain_assistants_index"},{label:(U=d.value)==null?void 0:U.name,routeName:"captain_assistants_edit"},{label:a("CAPTAIN.ASSISTANTS.GUARDRAILS.BREADCRUMB.TITLE")}]}),E=S(()=>{var U;return((U=d.value)==null?void 0:U.guardrails)||[]}),y=S(()=>E.value.map((U,J)=>({id:J,content:U}))),b=[{id:1,content:"Block queries that share or request sensitive personal information (e.g. phone numbers, passwords)."},{id:2,content:"Reject queries that include offensive, discriminatory, or threatening language."},{id:3,content:"Deflect when the assistant is asked for legal or medical diagnosis or treatment."}],A=S(()=>{const U=u.value.trim();return U?lo(y.value,U,["content"]):y.value}),T=S(()=>{var U;return((U=r.value)==null?void 0:U.show_guardrails_suggestions)!==!1}),I=()=>{o({show_guardrails_suggestions:!1})},N=P(new Set),x=P(null),R=U=>{const J=new Set(N.value);J[J.has(U)?"delete":"add"](U),N.value=J},M=(U,J)=>{x.value=U?J:null},w=S(()=>{const U=y.value.length||0;return N.value.size===U&&U>0?a("CAPTAIN.ASSISTANTS.GUARDRAILS.BULK_ACTION.UNSELECT_ALL",{count:U}):a("CAPTAIN.ASSISTANTS.GUARDRAILS.BULK_ACTION.SELECT_ALL",{count:U})}),D=S(()=>a("CAPTAIN.ASSISTANTS.GUARDRAILS.BULK_ACTION.SELECTED",{count:N.value.size})),B=async U=>{await s.dispatch("captainAssistants/update",{id:i,assistant:{guardrails:U}})},j={t:a,route:e,store:s,uiSettings:r,updateUISettings:o,assistantId:i,uiFlags:l,isFetching:c,assistant:d,searchQuery:u,newInlineRule:m,newDialogRule:h,breadcrumbItems:_,guardrailsContent:E,displayGuardrails:y,guardrailsExample:b,filteredGuardrails:A,shouldShowSuggestedRules:T,closeSuggestedRules:I,bulkSelectedIds:N,hoveredCard:x,handleRuleSelect:R,handleRuleHover:M,buildSelectedCountLabel:w,selectedCountLabel:D,saveGuardrails:B,addGuardrail:async U=>{try{const J=[...E.value,U];await B(J),Z(a("CAPTAIN.ASSISTANTS.GUARDRAILS.API.ADD.SUCCESS"))}catch{Z(a("CAPTAIN.ASSISTANTS.GUARDRAILS.API.ADD.ERROR"))}},editGuardrail:async({id:U,content:J})=>{try{const te=[...E.value];te[U]=J,await B(te),Z(a("CAPTAIN.ASSISTANTS.GUARDRAILS.API.UPDATE.SUCCESS"))}catch{Z(a("CAPTAIN.ASSISTANTS.GUARDRAILS.API.UPDATE.ERROR"))}},deleteGuardrail:async U=>{try{const J=E.value.filter((te,q)=>q!==U);await B(J),Z(a("CAPTAIN.ASSISTANTS.GUARDRAILS.API.DELETE.SUCCESS"))}catch{Z(a("CAPTAIN.ASSISTANTS.GUARDRAILS.API.DELETE.ERROR"))}},bulkDeleteGuardrails:async()=>{try{if(N.value.size===0)return;const U=E.value.filter((J,te)=>!N.value.has(te));await B(U),N.value.clear(),Z(a("CAPTAIN.ASSISTANTS.GUARDRAILS.API.DELETE.SUCCESS"))}catch{Z(a("CAPTAIN.ASSISTANTS.GUARDRAILS.API.DELETE.ERROR"))}},addAllExample:()=>{o({show_guardrails_suggestions:!1});try{const U=b.map(te=>te.content),J=[...E.value,...U];B(J)}catch{Z(a("CAPTAIN.ASSISTANTS.GUARDRAILS.API.ADD.ERROR"))}},computed:S,ref:P,get useRoute(){return lt},get useI18n(){return Q},get useAlert(){return Z},get picoSearch(){return lo},get useStore(){return Fe},get useMapGetter(){return le},get useUISettings(){return Ct},Input:sn,Button:Se,SettingsPageLayout:m_,SettingsHeader:h_,SuggestedRules:D1,AddNewRulesInput:bP,AddNewRulesDialog:vP,RuleCard:EP,BulkSelectBar:u_};return Object.defineProperty(j,"__isScriptSetup",{enumerable:!1,value:!0}),j}},tOt={key:0,class:"flex mt-7 flex-col gap-4"},nOt={class:"flex items-center justify-between w-full"},aOt={class:"text-sm text-n-slate-12"},sOt={class:"flex mt-7 flex-col gap-4"},oOt={class:"flex justify-between items-center"},rOt={key:0,class:"max-w-[22.5rem] w-full min-w-0"},iOt={key:0,class:"mt-1 mb-2"},lOt={class:"text-n-slate-11 text-sm"},cOt={key:1,class:"mt-1 mb-2"},dOt={class:"text-n-slate-11 text-sm"},uOt={key:2,class:"flex flex-col gap-2"};function pOt(t,n,a,e,s,r){return p(),L(e.SettingsPageLayout,{"breadcrumb-items":e.breadcrumbItems,"is-fetching":e.isFetching},{body:z(()=>[v(e.SettingsHeader,{heading:t.$t("CAPTAIN.ASSISTANTS.GUARDRAILS.TITLE"),description:t.$t("CAPTAIN.ASSISTANTS.GUARDRAILS.DESCRIPTION")},null,8,["heading","description"]),e.shouldShowSuggestedRules?(p(),g("div",tOt,[v(e.SuggestedRules,{title:t.$t("CAPTAIN.ASSISTANTS.GUARDRAILS.ADD.SUGGESTED.TITLE"),items:e.guardrailsExample,onAdd:e.addAllExample,onClose:e.closeSuggestedRules},{default:z(({item:o})=>[f("div",nOt,[f("span",aOt,C(o.content),1),v(e.Button,{label:t.$t("CAPTAIN.ASSISTANTS.GUARDRAILS.ADD.SUGGESTED.ADD_SINGLE"),ghost:"",xs:"",slate:"",class:"!text-sm !text-n-slate-11 flex-shrink-0",onClick:i=>e.addGuardrail(o.content)},null,8,["label","onClick"])])]),_:1},8,["title"])])):O("v-if",!0),f("div",sOt,[f("div",oOt,[v(e.BulkSelectBar,{modelValue:e.bulkSelectedIds,"onUpdate:modelValue":n[1]||(n[1]=o=>e.bulkSelectedIds=o),"all-items":e.displayGuardrails,"select-all-label":e.buildSelectedCountLabel,"selected-count-label":e.selectedCountLabel,"delete-label":t.$t("CAPTAIN.ASSISTANTS.GUARDRAILS.BULK_ACTION.BULK_DELETE_BUTTON"),onBulkDelete:e.bulkDeleteGuardrails},{"default-actions":z(()=>[v(e.AddNewRulesDialog,{modelValue:e.newDialogRule,"onUpdate:modelValue":n[0]||(n[0]=o=>e.newDialogRule=o),placeholder:e.t("CAPTAIN.ASSISTANTS.GUARDRAILS.ADD.NEW.PLACEHOLDER"),"button-label":e.t("CAPTAIN.ASSISTANTS.GUARDRAILS.ADD.NEW.TITLE"),"confirm-label":e.t("CAPTAIN.ASSISTANTS.GUARDRAILS.ADD.NEW.CREATE"),"cancel-label":e.t("CAPTAIN.ASSISTANTS.GUARDRAILS.ADD.NEW.CANCEL"),onAdd:e.addGuardrail},null,8,["modelValue","placeholder","button-label","confirm-label","cancel-label"]),O(" Will enable this feature in future "),O(` <div class="h-4 w-px bg-n-strong" />
              <Button
                :label="t('CAPTAIN.ASSISTANTS.GUARDRAILS.ADD.NEW.TEST_ALL')"
                xs
                ghost
                slate
                class="!text-sm"
              /> `)]),_:1},8,["modelValue","all-items","select-all-label","selected-count-label","delete-label"]),e.displayGuardrails.length&&e.bulkSelectedIds.size===0?(p(),g("div",rOt,[v(e.Input,{modelValue:e.searchQuery,"onUpdate:modelValue":n[2]||(n[2]=o=>e.searchQuery=o),placeholder:e.t("CAPTAIN.ASSISTANTS.GUARDRAILS.LIST.SEARCH_PLACEHOLDER")},null,8,["modelValue","placeholder"])])):O("v-if",!0)]),e.displayGuardrails.length===0?(p(),g("div",iOt,[f("span",lOt,C(e.t("CAPTAIN.ASSISTANTS.GUARDRAILS.EMPTY_MESSAGE")),1)])):e.filteredGuardrails.length===0?(p(),g("div",cOt,[f("span",dOt,C(e.t("CAPTAIN.ASSISTANTS.GUARDRAILS.SEARCH_EMPTY_MESSAGE")),1)])):(p(),g("div",uOt,[(p(!0),g(de,null,Ae(e.filteredGuardrails,o=>(p(),L(e.RuleCard,{id:o.id,key:o.id,content:o.content,"is-selected":e.bulkSelectedIds.has(o.id),selectable:e.hoveredCard===o.id||e.bulkSelectedIds.size>0,onSelect:e.handleRuleSelect,onEdit:e.editGuardrail,onDelete:e.deleteGuardrail,onHover:i=>e.handleRuleHover(i,o.id)},null,8,["id","content","is-selected","selectable","onHover"]))),128))])),v(e.AddNewRulesInput,{modelValue:e.newInlineRule,"onUpdate:modelValue":n[3]||(n[3]=o=>e.newInlineRule=o),placeholder:e.t("CAPTAIN.ASSISTANTS.GUARDRAILS.ADD.SUGGESTED.PLACEHOLDER"),label:e.t("CAPTAIN.ASSISTANTS.GUARDRAILS.ADD.SUGGESTED.SAVE"),onAdd:e.addGuardrail},null,8,["modelValue","placeholder","label"])])]),_:1},8,["breadcrumb-items","is-fetching"])}const fOt=G(eOt,[["render",pOt],["__file","/app/app/javascript/dashboard/routes/dashboard/captain/assistants/guardrails/Index.vue"]]),mOt={__name:"Index",setup(t,{expose:n}){n();const{t:a}=Q(),e=lt(),s=Fe(),{uiSettings:r,updateUISettings:o}=Ct(),i=e.params.assistantId,l=le("captainAssistants/getUIFlags"),c=S(()=>l.value.fetchingItem),d=S(()=>s.getters["captainAssistants/getRecord"](Number(i))),u=P(""),m=P(""),h=P(""),_=S(()=>{var U;return[{label:a("CAPTAIN.ASSISTANTS.SETTINGS.BREADCRUMB.ASSISTANT"),routeName:"captain_assistants_index"},{label:(U=d.value)==null?void 0:U.name,routeName:"captain_assistants_edit"},{label:a("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.TITLE")}]}),E=S(()=>{var U;return((U=d.value)==null?void 0:U.response_guidelines)||[]}),y=S(()=>E.value.map((U,J)=>({id:J,content:U}))),b=[{id:1,content:"Block queries that share or request sensitive personal information (e.g. phone numbers, passwords)."},{id:2,content:"Reject queries that include offensive, discriminatory, or threatening language."},{id:3,content:"Deflect when the assistant is asked for legal or medical diagnosis or treatment."}],A=S(()=>{const U=u.value.trim();return U?lo(y.value,U,["content"]):y.value}),T=S(()=>{var U;return((U=r.value)==null?void 0:U.show_response_guidelines_suggestions)!==!1}),I=()=>{o({show_response_guidelines_suggestions:!1})},N=P(new Set),x=P(null),R=U=>{const J=new Set(N.value);J[J.has(U)?"delete":"add"](U),N.value=J},M=(U,J)=>{x.value=U?J:null},w=S(()=>{const U=y.value.length||0;return N.value.size===U&&U>0?a("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.BULK_ACTION.UNSELECT_ALL",{count:U}):a("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.BULK_ACTION.SELECT_ALL",{count:U})}),D=S(()=>a("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.BULK_ACTION.SELECTED",{count:N.value.size})),B=async U=>{await s.dispatch("captainAssistants/update",{id:i,assistant:{response_guidelines:U}})},j={t:a,route:e,store:s,uiSettings:r,updateUISettings:o,assistantId:i,uiFlags:l,isFetching:c,assistant:d,searchQuery:u,newInlineRule:m,newDialogRule:h,breadcrumbItems:_,guidelinesContent:E,displayGuidelines:y,guidelinesExample:b,filteredGuidelines:A,shouldShowSuggestedRules:T,closeSuggestedRules:I,bulkSelectedIds:N,hoveredCard:x,handleRuleSelect:R,handleRuleHover:M,buildSelectedCountLabel:w,selectedCountLabel:D,saveGuidelines:B,addGuideline:async U=>{try{const J=[...E.value,U];await B(J),Z(a("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.API.ADD.SUCCESS"))}catch{Z(a("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.API.ADD.ERROR"))}},editGuideline:async({id:U,content:J})=>{try{const te=[...E.value];te[U]=J,await B(te),Z(a("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.API.UPDATE.SUCCESS"))}catch{Z(a("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.API.UPDATE.ERROR"))}},deleteGuideline:async U=>{try{const J=E.value.filter((te,q)=>q!==U);await B(J),Z(a("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.API.DELETE.SUCCESS"))}catch{Z(a("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.API.DELETE.ERROR"))}},bulkDeleteGuidelines:async()=>{try{if(N.value.size===0)return;const U=E.value.filter((J,te)=>!N.value.has(te));await B(U),N.value.clear(),Z(a("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.API.DELETE.SUCCESS"))}catch{Z(a("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.API.DELETE.ERROR"))}},addAllExample:async()=>{o({show_response_guidelines_suggestions:!1});try{const U=b.map(te=>te.content),J=[...E.value,...U];await B(J),Z(a("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.API.ADD.SUCCESS"))}catch{Z(a("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.API.ADD.ERROR"))}},computed:S,ref:P,get useRoute(){return lt},get useI18n(){return Q},get useAlert(){return Z},get picoSearch(){return lo},get useStore(){return Fe},get useMapGetter(){return le},get useUISettings(){return Ct},Input:sn,Button:Se,SettingsPageLayout:m_,SettingsHeader:h_,SuggestedRules:D1,AddNewRulesInput:bP,AddNewRulesDialog:vP,RuleCard:EP,BulkSelectBar:u_};return Object.defineProperty(j,"__isScriptSetup",{enumerable:!1,value:!0}),j}},hOt={key:0,class:"flex mt-7 flex-col gap-4"},_Ot={class:"flex items-center justify-between w-full"},gOt={class:"text-sm text-n-slate-12"},bOt={class:"flex mt-7 flex-col gap-4"},vOt={class:"flex justify-between items-center"},EOt={key:0,class:"max-w-[22.5rem] w-full min-w-0"},SOt={key:0,class:"mt-1 mb-2"},TOt={class:"text-n-slate-11 text-sm"},AOt={key:1,class:"mt-1 mb-2"},yOt={class:"text-n-slate-11 text-sm"},IOt={key:2,class:"flex flex-col gap-2"};function COt(t,n,a,e,s,r){return p(),L(e.SettingsPageLayout,{"breadcrumb-items":e.breadcrumbItems,"is-fetching":e.isFetching},{body:z(()=>[v(e.SettingsHeader,{heading:e.t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.TITLE"),description:e.t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.DESCRIPTION")},null,8,["heading","description"]),e.shouldShowSuggestedRules?(p(),g("div",hOt,[v(e.SuggestedRules,{title:e.t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.TITLE"),items:e.guidelinesExample,onAdd:e.addAllExample,onClose:e.closeSuggestedRules},{default:z(({item:o})=>[f("div",_Ot,[f("span",gOt,C(o.content),1),v(e.Button,{label:e.t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.ADD.SUGGESTED.ADD_SINGLE"),ghost:"",xs:"",slate:"",class:"!text-sm !text-n-slate-11 flex-shrink-0",onClick:i=>e.addGuideline(o.content)},null,8,["label","onClick"])])]),_:1},8,["title"])])):O("v-if",!0),f("div",bOt,[f("div",vOt,[v(e.BulkSelectBar,{modelValue:e.bulkSelectedIds,"onUpdate:modelValue":n[1]||(n[1]=o=>e.bulkSelectedIds=o),"all-items":e.displayGuidelines,"select-all-label":e.buildSelectedCountLabel,"selected-count-label":e.selectedCountLabel,"delete-label":t.$t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.BULK_ACTION.BULK_DELETE_BUTTON"),onBulkDelete:e.bulkDeleteGuidelines},{"default-actions":z(()=>[v(e.AddNewRulesDialog,{modelValue:e.newDialogRule,"onUpdate:modelValue":n[0]||(n[0]=o=>e.newDialogRule=o),placeholder:e.t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.ADD.NEW.PLACEHOLDER"),"button-label":e.t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.ADD.NEW.TITLE"),"confirm-label":e.t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.ADD.NEW.CREATE"),"cancel-label":e.t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.ADD.NEW.CANCEL"),onAdd:e.addGuideline},null,8,["modelValue","placeholder","button-label","confirm-label","cancel-label"]),O(" Will enable this feature in future "),O(` <div class="h-4 w-px bg-n-strong" />
              <Button
                :label="
                  t('CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.ADD.NEW.TEST_ALL')
                "
                sm
                ghost
                slate
              /> `)]),_:1},8,["modelValue","all-items","select-all-label","selected-count-label","delete-label"]),e.displayGuidelines.length&&e.bulkSelectedIds.size===0?(p(),g("div",EOt,[v(e.Input,{modelValue:e.searchQuery,"onUpdate:modelValue":n[2]||(n[2]=o=>e.searchQuery=o),placeholder:e.t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.LIST.SEARCH_PLACEHOLDER")},null,8,["modelValue","placeholder"])])):O("v-if",!0)]),e.displayGuidelines.length===0?(p(),g("div",SOt,[f("span",TOt,C(e.t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.EMPTY_MESSAGE")),1)])):e.filteredGuidelines.length===0?(p(),g("div",AOt,[f("span",yOt,C(e.t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.SEARCH_EMPTY_MESSAGE")),1)])):(p(),g("div",IOt,[(p(!0),g(de,null,Ae(e.filteredGuidelines,o=>(p(),L(e.RuleCard,{id:o.id,key:o.id,content:o.content,"is-selected":e.bulkSelectedIds.has(o.id),selectable:e.hoveredCard===o.id||e.bulkSelectedIds.size>0,onSelect:e.handleRuleSelect,onHover:i=>e.handleRuleHover(i,o.id),onEdit:e.editGuideline,onDelete:e.deleteGuideline},null,8,["id","content","is-selected","selectable","onHover"]))),128))])),v(e.AddNewRulesInput,{modelValue:e.newInlineRule,"onUpdate:modelValue":n[3]||(n[3]=o=>e.newInlineRule=o),placeholder:e.t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.ADD.SUGGESTED.PLACEHOLDER"),label:e.t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.ADD.SUGGESTED.SAVE"),onAdd:e.addGuideline},null,8,["modelValue","placeholder","label"])])]),_:1},8,["breadcrumb-items","is-fetching"])}const OOt=G(mOt,[["render",COt],["__file","/app/app/javascript/dashboard/routes/dashboard/captain/assistants/guidelines/Index.vue"]]),zN='[&_a[href^="tool://"]]:text-n-iris-11 [&_a:not([href^="tool://"])]:text-n-slate-12 [&_a]:pointer-events-none [&_a]:cursor-default',NOt={__name:"ScenariosCard",props:{id:{type:Number,required:!0},title:{type:String,required:!0},description:{type:String,required:!0},instruction:{type:String,required:!0},tools:{type:Array,default:()=>[]},selectable:{type:Boolean,default:!1},isSelected:{type:Boolean,default:!1}},emits:["select","hover","delete","update"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),{formatMessage:o}=ta(),i=S({get:()=>e.isSelected,set:()=>s("select",e.id)}),l=Lt({id:"",title:"",description:"",instruction:""}),c=P(),[d,u]=$t(),[m,h]=$t(),{height:_}=fr(c),E=S(()=>_.value>160),y=()=>{Object.assign(l,{id:e.id,title:e.title,description:e.description,instruction:e.instruction,tools:e.tools}),u(!0)},b={title:{required:Ge,minLength:Rt(1)},description:{required:Ge},instruction:{required:Ge}},A=rt(b,l),T=S(()=>A.value.title.$error?r("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.TITLE.ERROR"):""),I=S(()=>A.value.description.$error?r("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.DESCRIPTION.ERROR"):""),N=()=>{A.value.$touch(),!A.value.$invalid&&(s("update",{...l}),u(!1))},x=S(()=>A.value.instruction.$error?r("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.INSTRUCTION.ERROR"):""),M={props:e,emit:s,t:r,formatMessage:o,modelValue:i,state:l,instructionContentRef:c,isEditing:d,toggleEditing:u,isInstructionExpanded:m,toggleInstructionExpanded:h,contentHeight:_,needsOverlay:E,startEdit:y,rules:b,v$:A,titleError:T,descriptionError:I,onClickUpdate:N,instructionError:x,LINK_INSTRUCTION_CLASS:zN,renderInstruction:w=>()=>pn("p",{class:`text-sm text-n-slate-12 py-4 mb-0 prose prose-sm min-w-0 break-words max-w-none ${zN}`,innerHTML:w}),computed:S,h:pn,reactive:Lt,ref:P,get useI18n(){return Q},get useToggle(){return $t},get useElementSize(){return fr},get useVuelidate(){return rt},get required(){return Ge},get minLength(){return Rt},get useMessageFormatter(){return ta},Input:sn,Button:Se,TextArea:ni,Editor:Ds,CardLayout:ho,Checkbox:nl,Icon:Bt};return Object.defineProperty(M,"__isScriptSetup",{enumerable:!1,value:!0}),M}},xOt={class:"absolute top-[1.125rem] ltr:left-3 rtl:right-3"},ROt={key:0,class:"flex flex-col w-full"},wOt={class:"flex items-start justify-between w-full gap-2"},MOt={class:"flex flex-col items-start"},LOt={class:"text-sm text-n-slate-12 font-medium"},DOt={class:"text-sm text-n-slate-11 mt-2"},POt={class:"flex items-center gap-2"},kOt={ref:"instructionContentRef"},BOt={key:0,class:"text-sm text-n-slate-11 font-medium mb-1"},FOt={key:1,class:"overflow-hidden flex flex-col gap-4 w-full"},UOt={class:"flex items-center gap-3"};function $Ot(t,n,a,e,s,r){return p(),L(e.CardLayout,{selectable:"",class:oe(["relative [&>div]:!py-4",{"[&>div]:ltr:!pr-4 [&>div]:rtl:!pl-4":!e.isEditing,"[&>div]:ltr:!pr-10 [&>div]:rtl:!pl-10":e.isEditing}]),layout:"row",onMouseenter:n[7]||(n[7]=o=>e.emit("hover",!0)),onMouseleave:n[8]||(n[8]=o=>e.emit("hover",!1))},{default:z(()=>{var o,i;return[ce(f("div",xOt,[v(e.Checkbox,{modelValue:e.modelValue,"onUpdate:modelValue":n[0]||(n[0]=l=>e.modelValue=l)},null,8,["modelValue"])],512),[[En,a.selectable&&!e.isEditing]]),e.isEditing?(p(),g("div",FOt,[v(e.Input,{modelValue:e.state.title,"onUpdate:modelValue":n[3]||(n[3]=l=>e.state.title=l),label:e.t("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.TITLE.LABEL"),placeholder:e.t("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.TITLE.PLACEHOLDER"),message:e.titleError,"message-type":e.titleError?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),v(e.TextArea,{modelValue:e.state.description,"onUpdate:modelValue":n[4]||(n[4]=l=>e.state.description=l),label:e.t("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.DESCRIPTION.LABEL"),placeholder:e.t("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.DESCRIPTION.PLACEHOLDER"),message:e.descriptionError,"message-type":e.descriptionError?"error":"info","show-character-count":""},null,8,["modelValue","label","placeholder","message","message-type"]),v(e.Editor,{modelValue:e.state.instruction,"onUpdate:modelValue":n[5]||(n[5]=l=>e.state.instruction=l),label:e.t("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.INSTRUCTION.LABEL"),placeholder:e.t("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.INSTRUCTION.PLACEHOLDER"),message:e.instructionError,"message-type":e.instructionError?"error":"info","show-character-count":!1,"enable-captain-tools":""},null,8,["modelValue","label","placeholder","message","message-type"]),f("div",UOt,[v(e.Button,{faded:"",slate:"",sm:"",label:e.t("CAPTAIN.ASSISTANTS.SCENARIOS.UPDATE.CANCEL"),onClick:n[6]||(n[6]=l=>e.toggleEditing(!1))},null,8,["label"]),v(e.Button,{sm:"",label:e.t("CAPTAIN.ASSISTANTS.SCENARIOS.UPDATE.UPDATE"),onClick:e.onClickUpdate},null,8,["label"])])])):(p(),g("div",ROt,[f("div",wOt,[f("div",MOt,[f("span",LOt,C(a.title),1),f("span",DOt,C(a.description),1)]),f("div",POt,[O(` <Button label="Test" slate xs ghost class="!text-sm" />
          <span class="w-px h-4 bg-n-weak" /> `),v(e.Button,{icon:"i-lucide-pen",slate:"",xs:"",ghost:"",onClick:e.startEdit}),n[9]||(n[9]=f("span",{class:"w-px h-4 bg-n-weak"},null,-1)),v(e.Button,{icon:"i-lucide-trash",slate:"",xs:"",ghost:"",onClick:n[1]||(n[1]=l=>e.emit("delete",a.id))})])]),f("div",{class:oe(["relative overflow-hidden transition-all duration-300 ease-in-out group/expandable",{"cursor-pointer":e.needsOverlay}]),style:nn({maxHeight:e.isInstructionExpanded?`${e.contentHeight}px`:"10rem"}),onClick:n[2]||(n[2]=l=>e.needsOverlay?e.toggleInstructionExpanded():null)},[f("div",kOt,[(p(),L(Da(e.renderInstruction(e.formatMessage(a.instruction,!1)))))],512),f("div",{class:oe(["absolute bottom-0 w-full flex items-end justify-center text-xs text-n-slate-11 bg-gradient-to-t h-40 from-n-solid-2 via-n-solid-2 via-10% to-transparent transition-all duration-500 ease-in-out px-2 py-1 rounded pointer-events-none",{"visible opacity-100":!e.isInstructionExpanded,"invisible opacity-0":e.isInstructionExpanded||!e.needsOverlay}])},[v(e.Icon,{icon:"i-lucide-chevron-down",class:"text-n-slate-7 mb-4 size-4 group-hover/expandable:text-n-slate-11 transition-colors duration-200"})],2)],6),(o=a.tools)!=null&&o.length?(p(),g("span",BOt,C(e.t("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.SUGGESTED.TOOLS_USED"))+" "+C((i=a.tools)==null?void 0:i.map(l=>`@${l}`).join(", ")),1)):O("v-if",!0)]))]}),_:1},8,["class"])}const GOt=G(NOt,[["render",$Ot],["__file","/app/app/javascript/dashboard/components-next/captain/assistant/ScenariosCard.vue"]]),VOt={__name:"AddNewScenariosDialog",emits:["add"],setup(t,{expose:n,emit:a}){n();const e=a,{t:s}=Q(),[r,o]=$t(),i=Lt({id:"",title:"",description:"",instruction:""}),l={title:{required:Ge,minLength:Rt(1)},description:{required:Ge},instruction:{required:Ge}},c=rt(l,i),d=S(()=>c.value.title.$error?s("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.TITLE.ERROR"):""),u=S(()=>c.value.description.$error?s("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.DESCRIPTION.ERROR"):""),m=S(()=>c.value.instruction.$error?s("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.INSTRUCTION.ERROR"):""),h=()=>{Object.assign(i,{id:"",title:"",description:"",instruction:""})},y={emit:e,t:s,showPopover:r,togglePopover:o,state:i,rules:l,v$:c,titleError:d,descriptionError:u,instructionError:m,resetState:h,onClickAdd:async()=>{c.value.$touch(),!c.value.$invalid&&(await e("add",i),h(),o(!1))},onClickCancel:()=>{o(!1)},computed:S,reactive:Lt,get useI18n(){return Q},get useToggle(){return $t},get useVuelidate(){return rt},get vOnClickOutside(){return Ga},get required(){return Ge},get minLength(){return Rt},Input:sn,Button:Se,TextArea:ni,Editor:Ds};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}},HOt={class:"inline-flex relative"},jOt={key:0,class:"w-[31.25rem] absolute top-10 ltr:left-0 rtl:right-0 bg-n-alpha-3 backdrop-blur-[100px] p-6 rounded-xl border border-n-weak shadow-md flex flex-col gap-6 z-50"},WOt={class:"text-base font-medium text-n-slate-12"},zOt={class:"flex flex-col gap-4"},YOt={class:"flex items-center justify-between w-full gap-3"};function KOt(t,n,a,e,s,r){return ce((p(),g("div",HOt,[v(e.Button,{label:e.t("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.CREATE"),sm:"",slate:"",class:"flex-shrink-0",onClick:n[0]||(n[0]=o=>e.togglePopover(!e.showPopover))},null,8,["label"]),e.showPopover?(p(),g("div",jOt,[f("h3",WOt,C(e.t("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.TITLE")),1),f("div",zOt,[v(e.Input,{modelValue:e.state.title,"onUpdate:modelValue":n[1]||(n[1]=o=>e.state.title=o),label:e.t("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.TITLE.LABEL"),placeholder:e.t("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.TITLE.PLACEHOLDER"),message:e.titleError,"message-type":e.titleError?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),v(e.TextArea,{modelValue:e.state.description,"onUpdate:modelValue":n[2]||(n[2]=o=>e.state.description=o),label:e.t("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.DESCRIPTION.LABEL"),placeholder:e.t("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.DESCRIPTION.PLACEHOLDER"),message:e.descriptionError,"message-type":e.descriptionError?"error":"info","show-character-count":""},null,8,["modelValue","label","placeholder","message","message-type"]),v(e.Editor,{modelValue:e.state.instruction,"onUpdate:modelValue":n[3]||(n[3]=o=>e.state.instruction=o),label:e.t("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.INSTRUCTION.LABEL"),placeholder:e.t("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.INSTRUCTION.PLACEHOLDER"),message:e.instructionError,"message-type":e.instructionError?"error":"info","show-character-count":!1,"enable-captain-tools":""},null,8,["modelValue","label","placeholder","message","message-type"])]),f("div",YOt,[v(e.Button,{variant:"faded",color:"slate",label:e.t("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.CANCEL"),class:"w-full bg-n-alpha-2 !text-n-blue-text hover:bg-n-alpha-3",onClick:e.onClickCancel},null,8,["label"]),v(e.Button,{label:e.t("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.CREATE"),class:"w-full",onClick:e.onClickAdd},null,8,["label"])])])):O("v-if",!0)])),[[e.vOnClickOutside,()=>e.togglePopover(!1)]])}const XOt=G(VOt,[["render",KOt],["__file","/app/app/javascript/dashboard/components-next/captain/assistant/AddNewScenariosDialog.vue"]]),YN='[&_a[href^="tool://"]]:text-n-iris-11 [&_a:not([href^="tool://"])]:text-n-slate-12 [&_a]:pointer-events-none [&_a]:cursor-default',qOt={__name:"Index",setup(t,{expose:n}){n();const{t:a}=Q(),e=lt(),s=Fe(),{uiSettings:r,updateUISettings:o}=Ct(),{formatMessage:i}=ta(),l=e.params.assistantId,c=le("captainScenarios/getUIFlags"),d=S(()=>c.value.fetchingList),u=S(()=>s.getters["captainAssistants/getRecord"](Number(l))),m=le("captainScenarios/getRecords"),h=P(""),_=S(()=>{var j;return[{label:a("CAPTAIN.ASSISTANTS.SETTINGS.BREADCRUMB.ASSISTANT"),routeName:"captain_assistants_index"},{label:(j=u.value)==null?void 0:j.name,routeName:"captain_assistants_edit"},{label:a("CAPTAIN.ASSISTANTS.SCENARIOS.BREADCRUMB.TITLE")}]}),E=j=>()=>pn("span",{class:`text-sm text-n-slate-12 py-4 prose prose-sm min-w-0 break-words ${YN}`,innerHTML:j}),y=[{id:1,title:"Prospective Buyer",description:"Handle customers who are showing interest in purchasing a license",instruction:`If someone is interested in purchasing a license, ask them for following:

1. How many licenses are they willing to purchase?
2. Are they migrating from another platform?
. Once these details are collected, do the following steps
1. add a private note to with the information you collected using [Add Private Note](tool://add_private_note)
2. Add label "sales" to the contact using [Add Label to Conversation](tool://add_label_to_conversation)
3. Reply saying "one of us will reach out soon" and provide an estimated timeline for the response and [Handoff to Human](tool://handoff)`,tools:["add_private_note","add_label_to_conversation","handoff"]}],b=S(()=>{const j=h.value.trim(),U=m.value;return j?lo(U,j,["title","description","instruction"]):U}),A=S(()=>{var j;return((j=r.value)==null?void 0:j.show_scenarios_suggestions)!==!1}),T=()=>{o({show_scenarios_suggestions:!1})},I=P(new Set),N=P(null),x=j=>{const U=new Set(I.value);U[U.has(j)?"delete":"add"](j),I.value=U},R=S(()=>{const j=m.value.length||0;return I.value.size===j&&j>0?a("CAPTAIN.ASSISTANTS.SCENARIOS.BULK_ACTION.UNSELECT_ALL",{count:j}):a("CAPTAIN.ASSISTANTS.SCENARIOS.BULK_ACTION.SELECT_ALL",{count:j})}),M=S(()=>a("CAPTAIN.ASSISTANTS.SCENARIOS.BULK_ACTION.SELECTED",{count:I.value.size})),w=(j,U)=>{N.value=j?U:null},D=j=>[...new Set([...(j==null?void 0:j.matchAll(/\(tool:\/\/([^)]+)\)/g))??[]].map(U=>U[1]))],B=async j=>{var U;try{await s.dispatch("captainScenarios/update",{id:j.id,assistantId:e.params.assistantId,...j,tools:D(j.instruction)}),Z(a("CAPTAIN.ASSISTANTS.SCENARIOS.API.UPDATE.SUCCESS"))}catch(J){const te=((U=J==null?void 0:J.response)==null?void 0:U.message)||a("CAPTAIN.ASSISTANTS.SCENARIOS.API.UPDATE.ERROR");Z(te)}},k=async j=>{var U;try{await s.dispatch("captainScenarios/delete",{id:j,assistantId:e.params.assistantId}),Z(a("CAPTAIN.ASSISTANTS.SCENARIOS.API.DELETE.SUCCESS"))}catch(J){const te=((U=J==null?void 0:J.response)==null?void 0:U.message)||a("CAPTAIN.ASSISTANTS.SCENARIOS.API.DELETE.ERROR");Z(te)}},V=async j=>{const U=j||Array.from(I.value);await Promise.all(U.map(J=>s.dispatch("captainScenarios/delete",{id:J,assistantId:e.params.assistantId}))),I.value=new Set,Z(a("CAPTAIN.ASSISTANTS.SCENARIOS.API.DELETE.SUCCESS"))},F=async j=>{var U;try{await s.dispatch("captainScenarios/create",{assistantId:e.params.assistantId,...j,tools:D(j.instruction)}),Z(a("CAPTAIN.ASSISTANTS.SCENARIOS.API.ADD.SUCCESS"))}catch(J){const te=((U=J==null?void 0:J.response)==null?void 0:U.message)||a("CAPTAIN.ASSISTANTS.SCENARIOS.API.ADD.ERROR");Z(te)}},$=async()=>{var j;try{y.forEach(async U=>{await s.dispatch("captainScenarios/create",{assistantId:e.params.assistantId,...U})}),Z(a("CAPTAIN.ASSISTANTS.SCENARIOS.API.ADD.SUCCESS"))}catch(U){const J=((j=U==null?void 0:U.response)==null?void 0:j.message)||a("CAPTAIN.ASSISTANTS.SCENARIOS.API.ADD.ERROR");Z(J)}};Pe(()=>{s.dispatch("captainScenarios/get",{assistantId:l}),s.dispatch("captainTools/getTools")});const Y={t:a,route:e,store:s,uiSettings:r,updateUISettings:o,formatMessage:i,assistantId:l,uiFlags:c,isFetching:d,assistant:u,scenarios:m,searchQuery:h,breadcrumbItems:_,LINK_INSTRUCTION_CLASS:YN,renderInstruction:E,scenariosExample:y,filteredScenarios:b,shouldShowSuggestedRules:A,closeSuggestedRules:T,bulkSelectedIds:I,hoveredCard:N,handleRuleSelect:x,buildSelectedCountLabel:R,selectedCountLabel:M,handleRuleHover:w,getToolsFromInstruction:D,updateScenario:B,deleteScenario:k,bulkDeleteScenarios:V,addScenario:F,addAllExampleScenarios:$,computed:S,h:pn,ref:P,onMounted:Pe,get useI18n(){return Q},get useRoute(){return lt},get picoSearch(){return lo},get useStore(){return Fe},get useMapGetter(){return le},get useAlert(){return Z},get useUISettings(){return Ct},get useMessageFormatter(){return ta},Button:Se,Input:sn,SettingsPageLayout:m_,SettingsHeader:h_,SuggestedScenarios:D1,ScenariosCard:GOt,BulkSelectBar:u_,AddNewScenariosDialog:XOt};return Object.defineProperty(Y,"__isScriptSetup",{enumerable:!1,value:!0}),Y}},ZOt={key:0,class:"flex mt-7 flex-col gap-4"},QOt={class:"flex items-center gap-3 justify-between"},JOt={class:"text-sm text-n-slate-12"},eNt={class:"flex flex-col"},tNt={class:"text-sm text-n-slate-11 mt-2"},nNt={class:"text-sm text-n-slate-11 font-medium mb-1"},aNt={class:"flex mt-7 flex-col gap-4"},sNt={class:"flex justify-between items-center"},oNt={key:0,class:"max-w-[22.5rem] w-full min-w-0"},rNt={key:0,class:"mt-1 mb-2"},iNt={class:"text-n-slate-11 text-sm"},lNt={key:1,class:"mt-1 mb-2"},cNt={class:"text-n-slate-11 text-sm"},dNt={key:2,class:"flex flex-col gap-2"};function uNt(t,n,a,e,s,r){return p(),L(e.SettingsPageLayout,{"breadcrumb-items":e.breadcrumbItems,"is-fetching":e.isFetching},{body:z(()=>[v(e.SettingsHeader,{heading:t.$t("CAPTAIN.ASSISTANTS.SCENARIOS.TITLE"),description:t.$t("CAPTAIN.ASSISTANTS.SCENARIOS.DESCRIPTION")},null,8,["heading","description"]),e.shouldShowSuggestedRules?(p(),g("div",ZOt,[v(e.SuggestedScenarios,{title:t.$t("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.SUGGESTED.TITLE"),items:e.scenariosExample,onClose:e.closeSuggestedRules,onAdd:e.addAllExampleScenarios},{default:z(({item:o})=>{var i;return[f("div",QOt,[f("span",JOt,C(o.title),1),v(e.Button,{label:t.$t("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.SUGGESTED.ADD_SINGLE"),ghost:"",xs:"",slate:"",class:"!text-sm !text-n-slate-11 flex-shrink-0",onClick:l=>e.addScenario(o)},null,8,["label","onClick"])]),f("div",eNt,[f("span",tNt,C(o.description),1),(p(),L(Da(e.renderInstruction(e.formatMessage(o.instruction,!1))))),f("span",nNt,C(e.t("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.SUGGESTED.TOOLS_USED"))+" "+C((i=o.tools)==null?void 0:i.map(l=>`@${l}`).join(", ")),1)])]}),_:1},8,["title"])])):O("v-if",!0),f("div",aNt,[f("div",sNt,[v(e.BulkSelectBar,{modelValue:e.bulkSelectedIds,"onUpdate:modelValue":n[0]||(n[0]=o=>e.bulkSelectedIds=o),"all-items":e.scenarios,"select-all-label":e.buildSelectedCountLabel,"selected-count-label":e.selectedCountLabel,"delete-label":t.$t("CAPTAIN.ASSISTANTS.SCENARIOS.BULK_ACTION.BULK_DELETE_BUTTON"),onBulkDelete:e.bulkDeleteScenarios},{"default-actions":z(()=>[v(e.AddNewScenariosDialog,{onAdd:e.addScenario})]),_:1},8,["modelValue","all-items","select-all-label","selected-count-label","delete-label"]),e.scenarios.length&&e.bulkSelectedIds.size===0?(p(),g("div",oNt,[v(e.Input,{modelValue:e.searchQuery,"onUpdate:modelValue":n[1]||(n[1]=o=>e.searchQuery=o),placeholder:e.t("CAPTAIN.ASSISTANTS.SCENARIOS.LIST.SEARCH_PLACEHOLDER")},null,8,["modelValue","placeholder"])])):O("v-if",!0)]),e.scenarios.length===0?(p(),g("div",rNt,[f("span",iNt,C(e.t("CAPTAIN.ASSISTANTS.SCENARIOS.EMPTY_MESSAGE")),1)])):e.filteredScenarios.length===0?(p(),g("div",lNt,[f("span",cNt,C(e.t("CAPTAIN.ASSISTANTS.SCENARIOS.SEARCH_EMPTY_MESSAGE")),1)])):(p(),g("div",dNt,[(p(!0),g(de,null,Ae(e.filteredScenarios,o=>(p(),L(e.ScenariosCard,{id:o.id,key:o.id,title:o.title,description:o.description,instruction:o.instruction,tools:o.tools,"is-selected":e.bulkSelectedIds.has(o.id),selectable:e.hoveredCard===o.id||e.bulkSelectedIds.size>0,onSelect:e.handleRuleSelect,onDelete:i=>e.deleteScenario(o.id),onUpdate:e.updateScenario,onHover:i=>e.handleRuleHover(i,o.id)},null,8,["id","title","description","instruction","tools","is-selected","selectable","onDelete","onHover"]))),128))]))])]),_:1},8,["breadcrumb-items","is-fetching"])}const pNt=G(qOt,[["render",uNt],["__file","/app/app/javascript/dashboard/routes/dashboard/captain/assistants/scenarios/Index.vue"]]),SP="PDF:",fNt=/_\d{14}(?=\.pdf$)/,fE=t=>t?t.startsWith(SP):!1,KN=t=>t?fE(t)?t.substring(SP.length).replace(fNt,""):t:"",mNt={__name:"DocumentCard",props:{id:{type:Number,required:!0},name:{type:String,default:""},assistant:{type:Object,default:()=>({})},externalLink:{type:String,required:!0},createdAt:{type:Number,required:!0}},emits:["action"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{checkPermissions:r}=uo(),{t:o}=Q(),[i,l]=$t(),c=S(()=>{const E=[{label:o("CAPTAIN.DOCUMENTS.OPTIONS.VIEW_RELATED_RESPONSES"),value:"viewRelatedQuestions",action:"viewRelatedQuestions",icon:"i-ph-tree-view-duotone"}];return r(["administrator"])&&E.push({label:o("CAPTAIN.DOCUMENTS.OPTIONS.DELETE_DOCUMENT"),value:"delete",action:"delete",icon:"i-lucide-trash"}),E}),d=S(()=>kn(e.createdAt)),u=S(()=>KN(e.externalLink)),m=S(()=>fE(e.externalLink)?"i-ph-file-pdf":"i-ph-link-simple"),_={props:e,emit:s,checkPermissions:r,t:o,showActionsDropdown:i,toggleDropdown:l,menuItems:c,createdAt:d,displayLink:u,linkIcon:m,handleAction:({action:E,value:y})=>{l(!1),s("action",{action:E,value:y,id:e.id})},computed:S,get useToggle(){return $t},get useI18n(){return Q},get dynamicTime(){return kn},get usePolicy(){return uo},get isPdfDocument(){return fE},get formatDocumentLink(){return KN},CardLayout:ho,DropdownMenu:ds,Button:Se};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}},hNt={class:"flex gap-1 justify-between w-full"},_Nt={class:"text-base text-n-slate-12 line-clamp-1"},gNt={class:"flex gap-2 items-center"},bNt={class:"flex relative items-center group"},vNt={class:"flex gap-4 justify-between items-center w-full"},ENt={class:"flex gap-1 items-center text-sm truncate shrink-0 text-n-slate-11"},SNt={class:"flex flex-1 gap-1 justify-start items-center text-sm truncate text-n-slate-11"},TNt={class:"truncate"},ANt={class:"text-sm shrink-0 text-n-slate-11 line-clamp-1"};function yNt(t,n,a,e,s,r){const o=nt("on-clickaway");return p(),L(e.CardLayout,null,{default:z(()=>{var i;return[f("div",hNt,[f("span",_Nt,C(a.name),1),f("div",gNt,[ce((p(),g("div",bNt,[v(e.Button,{icon:"i-lucide-ellipsis-vertical",color:"slate",size:"xs",class:"rounded-md group-hover:bg-n-alpha-2",onClick:n[0]||(n[0]=l=>e.toggleDropdown())}),e.showActionsDropdown?(p(),L(e.DropdownMenu,{key:0,"menu-items":e.menuItems,class:"top-full mt-1 ltr:right-0 rtl:left-0 xl:ltr:right-0 xl:rtl:left-0",onAction:n[1]||(n[1]=l=>e.handleAction(l))},null,8,["menu-items"])):O("v-if",!0)])),[[o,()=>e.toggleDropdown(!1)]])])]),f("div",vNt,[f("span",ENt,[n[2]||(n[2]=f("i",{class:"i-woot-captain"},null,-1)),Oe(" "+C(((i=a.assistant)==null?void 0:i.name)||""),1)]),f("span",SNt,[f("i",{class:oe([e.linkIcon,"shrink-0"])},null,2),f("span",TNt,C(e.displayLink),1)]),f("div",ANt,C(e.createdAt),1)])]}),_:1})}const TP=G(mNt,[["render",yNt],["__file","/app/app/javascript/dashboard/components-next/captain/assistant/DocumentCard.vue"]]),INt={__name:"ResponseCard",props:{id:{type:Number,required:!0},question:{type:String,required:!0},answer:{type:String,required:!0},compact:{type:Boolean,default:!1},status:{type:String,default:"approved"},documentable:{type:Object,default:null},assistant:{type:Object,default:()=>({})},updatedAt:{type:Number,required:!0},createdAt:{type:Number,required:!0},isSelected:{type:Boolean,default:!1},selectable:{type:Boolean,default:!1},showMenu:{type:Boolean,default:!0},showActions:{type:Boolean,default:!1}},emits:["action","navigate","select","hover"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),[o,i]=$t(),l=S({get:()=>e.isSelected,set:()=>s("select",e.id)}),c=S(()=>e.status==="pending"?[{label:r("CAPTAIN.RESPONSES.OPTIONS.APPROVE"),value:"approve",action:"approve",icon:"i-lucide-circle-check-big"}]:[]),d=S(()=>[...c.value,{label:r("CAPTAIN.RESPONSES.OPTIONS.EDIT_RESPONSE"),value:"edit",action:"edit",icon:"i-lucide-pencil-line"},{label:r("CAPTAIN.RESPONSES.OPTIONS.DELETE_RESPONSE"),value:"delete",action:"delete",icon:"i-lucide-trash"}]),u=S(()=>kn(e.updatedAt||e.createdAt)),_={props:e,emit:s,t:r,showActionsDropdown:o,toggleDropdown:i,modelValue:l,statusAction:c,menuItems:d,timestamp:u,handleAssistantAction:({action:E,value:y})=>{i(!1),s("action",{action:E,value:y,id:e.id})},handleDocumentableClick:()=>{s("navigate",{id:e.documentable.id,type:e.documentable.type})},computed:S,get useToggle(){return $t},get useI18n(){return Q},get dynamicTime(){return kn},CardLayout:ho,DropdownMenu:ds,Button:Se,Checkbox:nl,Policy:ii,Icon:Bt};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}},CNt={class:"absolute top-7 ltr:left-3 rtl:right-3"},ONt={class:"flex relative justify-between w-full gap-1"},NNt={class:"text-base text-n-slate-12 line-clamp-1"},xNt={key:0,class:"flex items-center gap-2"},RNt={class:"text-n-slate-11 text-sm line-clamp-5"},wNt={key:0,class:"flex items-start justify-between flex-col-reverse md:flex-row gap-3"},MNt={class:"flex items-center gap-2 sm:gap-5 w-full"},LNt={class:"inline-flex items-center gap-3 min-w-0"},DNt={key:0,class:"text-sm shrink-0 truncate text-n-slate-11 inline-flex items-center gap-1"},PNt={key:1,class:"text-sm text-n-slate-11 grid grid-cols-[auto_1fr] items-center gap-1 min-w-0"},kNt=["title"],BNt=["title"],FNt={class:"shrink-0 text-sm text-n-slate-11 line-clamp-1 inline-flex items-center gap-1"};function UNt(t,n,a,e,s,r){const o=nt("on-clickaway");return p(),L(e.CardLayout,{selectable:"",class:oe(["relative",{"rounded-md":a.compact}]),onMouseenter:n[6]||(n[6]=i=>e.emit("hover",!0)),onMouseleave:n[7]||(n[7]=i=>e.emit("hover",!1))},{default:z(()=>{var i;return[ce(f("div",CNt,[v(e.Checkbox,{modelValue:e.modelValue,"onUpdate:modelValue":n[0]||(n[0]=l=>e.modelValue=l)},null,8,["modelValue"])],512),[[En,a.selectable]]),f("div",ONt,[f("span",NNt,C(a.question),1),!a.compact&&a.showMenu?(p(),g("div",xNt,[ce((p(),L(e.Policy,{permissions:["administrator"],class:"relative flex items-center group"},{default:z(()=>[v(e.Button,{icon:"i-lucide-ellipsis-vertical",color:"slate",size:"xs",class:"rounded-md group-hover:bg-n-alpha-2",onClick:n[1]||(n[1]=l=>e.toggleDropdown())}),e.showActionsDropdown?(p(),L(e.DropdownMenu,{key:0,"menu-items":e.menuItems,class:"mt-1 ltr:right-0 rtl:right-0 top-full",onAction:n[2]||(n[2]=l=>e.handleAssistantAction(l))},null,8,["menu-items"])):O("v-if",!0)]),_:1})),[[o,()=>e.toggleDropdown(!1)]])])):O("v-if",!0)]),f("span",RNt,C(a.answer),1),a.compact?O("v-if",!0):(p(),g("div",wNt,[a.showActions?(p(),L(e.Policy,{key:0,permissions:["administrator"]},{default:z(()=>[f("div",MNt,[a.status==="pending"?(p(),L(e.Button,{key:0,label:t.$t("CAPTAIN.RESPONSES.OPTIONS.APPROVE"),icon:"i-lucide-circle-check-big",sm:"",link:"",class:"hover:!no-underline",onClick:n[3]||(n[3]=l=>e.handleAssistantAction({action:"approve",value:"approve"}))},null,8,["label"])):O("v-if",!0),v(e.Button,{label:t.$t("CAPTAIN.RESPONSES.OPTIONS.EDIT_RESPONSE"),icon:"i-lucide-pencil-line",sm:"",slate:"",link:"",class:"hover:!no-underline",onClick:n[4]||(n[4]=l=>e.handleAssistantAction({action:"edit",value:"edit"}))},null,8,["label"]),v(e.Button,{label:t.$t("CAPTAIN.RESPONSES.OPTIONS.DELETE_RESPONSE"),icon:"i-lucide-trash",sm:"",ruby:"",link:"",class:"hover:!no-underline",onClick:n[5]||(n[5]=l=>e.handleAssistantAction({action:"delete",value:"delete"}))},null,8,["label"])])]),_:1})):O("v-if",!0),f("div",{class:oe(["flex items-center gap-3",{"justify-between w-full":!a.showActions}])},[f("div",LNt,[a.status==="approved"?(p(),g("span",DNt,[v(e.Icon,{icon:"i-woot-captain",class:"size-3.5"}),Oe(" "+C(((i=a.assistant)==null?void 0:i.name)||""),1)])):O("v-if",!0),a.documentable?(p(),g("div",PNt,[a.documentable.type==="Captain::Document"?(p(),L(e.Icon,{key:0,icon:"i-ph-files-light",class:"size-3.5"})):a.documentable.type==="User"?(p(),L(e.Icon,{key:1,icon:"i-ph-user-circle-plus",class:"size-3.5"})):a.documentable.type==="Conversation"?(p(),L(e.Icon,{key:2,icon:"i-ph-chat-circle-dots",class:"size-3.5"})):O("v-if",!0),a.documentable.type==="Captain::Document"?(p(),g("span",{key:3,class:"truncate",title:a.documentable.name},C(a.documentable.name),9,kNt)):a.documentable.type==="User"?(p(),g("span",{key:4,class:"truncate",title:a.documentable.available_name},C(a.documentable.available_name),9,BNt)):a.documentable.type==="Conversation"?(p(),g("span",{key:5,class:"hover:underline truncate cursor-pointer",role:"button",onClick:e.handleDocumentableClick},C(e.t("CAPTAIN.RESPONSES.DOCUMENTABLE.CONVERSATION",{id:a.documentable.display_id})),1)):O("v-if",!0)])):O("v-if",!0)]),f("div",FNt,[v(e.Icon,{icon:"i-ph-calendar-dot",class:"size-3.5"}),Oe(" "+C(e.timestamp),1)])],2)]))]}),_:1},8,["class"])}const __=G(INt,[["render",UNt],["__file","/app/app/javascript/dashboard/components-next/captain/assistant/ResponseCard.vue"]]),$Nt={__name:"RelatedResponses",props:{captainDocument:{type:Object,required:!0}},emits:["close"],setup(t,{expose:n,emit:a}){const e=t,s=a,{t:r}=Q(),o=Fe(),i=P(null),l=le("captainResponses/getUIFlags"),c=le("captainResponses/getRecords"),d=S(()=>l.value.fetchingList),u=()=>{s("close")};Pe(()=>{o.dispatch("captainResponses/get",{assistantId:e.captainDocument.assistant.id,documentId:e.captainDocument.id})}),n({dialogRef:i});const m={props:e,emit:s,t:r,store:o,dialogRef:i,uiFlags:l,responses:c,isFetching:d,handleClose:u,ref:P,computed:S,onMounted:Pe,get useStore(){return Fe},get useMapGetter(){return le},get useI18n(){return Q},Spinner:$n,Dialog:la,ResponseCard:__};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}},GNt={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},VNt={key:1,class:"flex flex-col gap-3 min-h-48"};function HNt(t,n,a,e,s,r){return p(),L(e.Dialog,{ref:"dialogRef",type:"edit",title:e.t("CAPTAIN.DOCUMENTS.RELATED_RESPONSES.TITLE"),description:e.t("CAPTAIN.DOCUMENTS.RELATED_RESPONSES.DESCRIPTION"),"show-cancel-button":!1,"show-confirm-button":!1,"overflow-y-auto":"",width:"3xl",onClose:e.handleClose},{default:z(()=>[e.isFetching?(p(),g("div",GNt,[v(e.Spinner)])):(p(),g("div",VNt,[(p(!0),g(de,null,Ae(e.responses,o=>(p(),L(e.ResponseCard,{id:o.id,key:o.id,question:o.question,status:o.status,answer:o.answer,assistant:o.assistant,"created-at":o.created_at,"updated-at":o.updated_at,compact:""},null,8,["id","question","status","answer","assistant","created-at","updated-at"]))),128))]))]),_:1},8,["title","description"])}const jNt=G($Nt,[["render",HNt],["__file","/app/app/javascript/dashboard/components-next/captain/pageComponents/document/RelatedResponses.vue"]]),XN=10*1024*1024,WNt={__name:"DocumentForm",emits:["submit","cancel"],setup(t,{expose:n,emit:a}){n();const e=a,{t:s}=Q(),r={uiFlags:le("captainDocuments/getUIFlags"),assistants:le("captainAssistants/getRecords")},o={name:"",url:"",assistantId:null,documentType:"url",pdfFile:null},i=Lt({...o}),l=P(null),c={url:{required:Io(()=>i.documentType==="url"),url:Io(()=>i.documentType==="url"&&Pl),minLength:Io(()=>i.documentType==="url"&&Rt(1))},assistantId:{required:Ge},pdfFile:{required:Io(()=>i.documentType==="pdf")}},d=S(()=>r.assistants.value.map(R=>({value:R.id,label:R.name}))),u=[{value:"url",label:s("CAPTAIN.DOCUMENTS.FORM.TYPE.URL")},{value:"pdf",label:s("CAPTAIN.DOCUMENTS.FORM.TYPE.PDF")}],m=rt(c,i),h=S(()=>r.uiFlags.value.creatingItem),_=S(()=>m.value.pdfFile.$error),E=(R,M)=>m.value[R].$error?s(`CAPTAIN.DOCUMENTS.FORM.${M}.ERROR`):"",y=S(()=>({url:E("url","URL"),assistantId:E("assistantId","ASSISTANT"),pdfFile:E("pdfFile","PDF_FILE")})),b=()=>e("cancel"),A=R=>{const M=R.target.files[0];if(M){if(M.type!=="application/pdf"){Z(s("CAPTAIN.DOCUMENTS.FORM.PDF_FILE.INVALID_TYPE")),R.target.value="";return}if(M.size>XN){Z(s("CAPTAIN.DOCUMENTS.FORM.PDF_FILE.TOO_LARGE")),R.target.value="";return}i.pdfFile=M,i.name=M.name.replace(/\.pdf$/i,"")}},T=()=>{At(()=>{l.value&&l.value.click()})},I=()=>{const R=new FormData;return R.append("document[assistant_id]",i.assistantId),i.documentType==="url"?(R.append("document[external_link]",i.url),R.append("document[name]",i.name||i.url)):(R.append("document[pdf_file]",i.pdfFile),R.append("document[name]",i.name||i.pdfFile.name.replace(".pdf",""))),R},x={emit:e,MAX_FILE_SIZE:XN,t:s,formState:r,initialState:o,state:i,fileInputRef:l,validationRules:c,assistantList:d,documentTypeOptions:u,v$:m,isLoading:h,hasPdfFileError:_,getErrorMessage:E,formErrors:y,handleCancel:b,handleFileChange:A,openFileDialog:T,prepareDocumentDetails:I,handleSubmit:async()=>{await m.value.$validate()&&e("submit",I())},reactive:Lt,computed:S,ref:P,nextTick:At,get useI18n(){return Q},get useVuelidate(){return rt},get required(){return Ge},get minLength(){return Rt},get requiredIf(){return Io},get url(){return Pl},get useMapGetter(){return le},get useAlert(){return Z},Input:sn,Button:Se,ComboBox:Cr};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}},zNt={class:"flex flex-col gap-1"},YNt={for:"documentType",class:"mb-0.5 text-sm font-medium text-n-slate-12"},KNt={key:1,class:"flex flex-col gap-2"},XNt={class:"text-sm font-medium text-n-slate-12"},qNt={class:"relative"},ZNt={class:"flex gap-2 items-center"},QNt={class:"flex flex-col flex-1 gap-1 items-start"},JNt={class:"m-0 text-sm font-medium text-n-slate-12"},e2t={class:"m-0 text-xs text-n-slate-11"},t2t={key:0,class:"text-xs text-n-ruby-9"},n2t={class:"flex flex-col gap-1"},a2t={for:"assistant",class:"mb-0.5 text-sm font-medium text-n-slate-12"},s2t={class:"flex gap-3 justify-between items-center w-full"};function o2t(t,n,a,e,s,r){return p(),g("form",{class:"flex flex-col gap-4",onSubmit:Ve(e.handleSubmit,["prevent"])},[f("div",zNt,[f("label",YNt,C(e.t("CAPTAIN.DOCUMENTS.FORM.TYPE.LABEL")),1),v(e.ComboBox,{id:"documentType",modelValue:e.state.documentType,"onUpdate:modelValue":n[0]||(n[0]=o=>e.state.documentType=o),options:e.documentTypeOptions,class:"[&>div>button]:bg-n-alpha-black2"},null,8,["modelValue"])]),e.state.documentType==="url"?(p(),L(e.Input,{key:0,modelValue:e.state.url,"onUpdate:modelValue":n[1]||(n[1]=o=>e.state.url=o),label:e.t("CAPTAIN.DOCUMENTS.FORM.URL.LABEL"),placeholder:e.t("CAPTAIN.DOCUMENTS.FORM.URL.PLACEHOLDER"),message:e.formErrors.url,"message-type":e.formErrors.url?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"])):O("v-if",!0),e.state.documentType==="pdf"?(p(),g("div",KNt,[f("label",XNt,C(e.t("CAPTAIN.DOCUMENTS.FORM.PDF_FILE.LABEL")),1),f("div",qNt,[f("input",{ref:"fileInputRef",type:"file",accept:".pdf",class:"hidden",onChange:e.handleFileChange},null,544),v(e.Button,{type:"button",color:e.hasPdfFileError?"ruby":"slate",variant:e.hasPdfFileError?"outline":"solid",class:"!w-full !h-auto !justify-between !py-4",onClick:e.openFileDialog},{default:z(()=>[f("div",ZNt,[n[4]||(n[4]=f("div",{class:"flex justify-center items-center w-10 h-10 rounded-lg bg-n-slate-3"},[f("i",{class:"text-xl i-ph-file-pdf text-n-slate-11"})],-1)),f("div",QNt,[f("p",JNt,C(e.state.pdfFile?e.state.pdfFile.name:e.t("CAPTAIN.DOCUMENTS.FORM.PDF_FILE.CHOOSE_FILE")),1),f("p",e2t,C(e.state.pdfFile?`${(e.state.pdfFile.size/1024/1024).toFixed(2)} MB`:e.t("CAPTAIN.DOCUMENTS.FORM.PDF_FILE.HELP_TEXT")),1)])]),n[5]||(n[5]=f("i",{class:"i-lucide-upload text-n-slate-11"},null,-1))]),_:1},8,["color","variant"])]),e.formErrors.pdfFile?(p(),g("p",t2t,C(e.formErrors.pdfFile),1)):O("v-if",!0)])):O("v-if",!0),v(e.Input,{modelValue:e.state.name,"onUpdate:modelValue":n[2]||(n[2]=o=>e.state.name=o),label:e.t("CAPTAIN.DOCUMENTS.FORM.NAME.LABEL"),placeholder:e.t("CAPTAIN.DOCUMENTS.FORM.NAME.PLACEHOLDER")},null,8,["modelValue","label","placeholder"]),f("div",n2t,[f("label",a2t,C(e.t("CAPTAIN.DOCUMENTS.FORM.ASSISTANT.LABEL")),1),v(e.ComboBox,{id:"assistant",modelValue:e.state.assistantId,"onUpdate:modelValue":n[3]||(n[3]=o=>e.state.assistantId=o),options:e.assistantList,"has-error":!!e.formErrors.assistantId,placeholder:e.t("CAPTAIN.DOCUMENTS.FORM.ASSISTANT.PLACEHOLDER"),class:"[&>div>button]:bg-n-alpha-black2",message:e.formErrors.assistantId},null,8,["modelValue","options","has-error","placeholder","message"])]),f("div",s2t,[v(e.Button,{type:"button",variant:"faded",color:"slate",label:e.t("CAPTAIN.FORM.CANCEL"),class:"w-full bg-n-alpha-2 text-n-blue-text hover:bg-n-alpha-3",onClick:e.handleCancel},null,8,["label"]),v(e.Button,{type:"submit",label:e.t("CAPTAIN.FORM.CREATE"),class:"w-full","is-loading":e.isLoading,disabled:e.isLoading},null,8,["label","is-loading","disabled"])])],32)}const r2t=G(WNt,[["render",o2t],["__file","/app/app/javascript/dashboard/components-next/captain/pageComponents/document/DocumentForm.vue"]]),Kb="CAPTAIN.DOCUMENTS.CREATE",i2t={__name:"CreateDocumentDialog",emits:["close"],setup(t,{expose:n,emit:a}){const e=a,{t:s}=Q(),r=Fe(),o=P(null),i=async u=>{try{await r.dispatch("captainDocuments/create",u),Z(s(`${Kb}.SUCCESS_MESSAGE`)),o.value.close()}catch(m){const h=Kr(m)||s(`${Kb}.ERROR_MESSAGE`);Z(h)}},l=()=>{e("close")},c=()=>{o.value.close()};n({dialogRef:o});const d={emit:e,t:s,store:r,dialogRef:o,i18nKey:Kb,handleSubmit:i,handleClose:l,handleCancel:c,ref:P,get useStore(){return Fe},get useAlert(){return Z},get useI18n(){return Q},get parseAPIErrorResponse(){return Kr},Dialog:la,DocumentForm:r2t};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}};function l2t(t,n,a,e,s,r){return p(),L(e.Dialog,{ref:"dialogRef",title:t.$t(`${e.i18nKey}.TITLE`),description:t.$t("CAPTAIN.DOCUMENTS.FORM_DESCRIPTION"),"show-cancel-button":!1,"show-confirm-button":!1,onClose:e.handleClose},{footer:z(()=>n[0]||(n[0]=[])),default:z(()=>[v(e.DocumentForm,{onSubmit:e.handleSubmit,onCancel:e.handleCancel})]),_:1},8,["title","description"])}const c2t=G(i2t,[["render",l2t],["__file","/app/app/javascript/dashboard/components-next/captain/pageComponents/document/CreateDocumentDialog.vue"]]),d2t={__name:"AssistantSelector",props:{assistantId:{type:[String,Number],required:!0}},emits:["update"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=P(!1),i=le("captainAssistants/getRecords"),l=S(()=>[{label:r("CAPTAIN.RESPONSES.FILTER.ALL_ASSISTANTS"),value:"all",action:"filter"},...i.value.map(m=>({value:m.id,label:m.name,action:"filter"}))]),c=S(()=>{const m=l.value.find(h=>h.value===e.assistantId);return r("CAPTAIN.RESPONSES.FILTER.ASSISTANT",{selected:m?m.label:""})}),u={props:e,emit:s,t:r,isFilterOpen:o,assistants:i,assistantOptions:l,selectedAssistantLabel:c,handleAssistantFilterChange:({value:m})=>{o.value=!1,s("update",m)},computed:S,ref:P,get useMapGetter(){return le},get useI18n(){return Q},get OnClickOutside(){return lh},Button:Se,DropdownMenu:ds};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}};function u2t(t,n,a,e,s,r){return p(),L(e.OnClickOutside,{onTrigger:n[1]||(n[1]=o=>e.isFilterOpen=!1)},{default:z(()=>[v(e.Button,{label:e.selectedAssistantLabel,icon:"i-lucide-chevron-down",size:"sm",color:"slate","trailing-icon":"",class:"max-w-48",onClick:n[0]||(n[0]=o=>e.isFilterOpen=!e.isFilterOpen)},null,8,["label"]),e.isFilterOpen?(p(),L(e.DropdownMenu,{key:0,"menu-items":e.assistantOptions,class:"mt-2",onAction:e.handleAssistantFilterChange},null,8,["menu-items"])):O("v-if",!0)]),_:1})}const P1=G(d2t,[["render",u2t],["__file","/app/app/javascript/dashboard/components-next/captain/pageComponents/AssistantSelector.vue"]]),p2t={__name:"DocumentPageEmptyState",emits:["click"],setup(t,{expose:n,emit:a}){n();const e=a,{isOnChatwootCloud:s}=Ut(),o={emit:e,isOnChatwootCloud:s,onClick:()=>{e("click")},get useAccount(){return Ut},EmptyStateLayout:Or,Button:Se,DocumentCard:TP,FeatureSpotlight:M1,get documentsList(){return jyt}};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},f2t={class:"grid grid-cols-1 gap-4 p-px overflow-hidden"};function m2t(t,n,a,e,s,r){return p(),g(de,null,[v(e.FeatureSpotlight,{title:t.$t("CAPTAIN.DOCUMENTS.EMPTY_STATE.FEATURE_SPOTLIGHT.TITLE"),note:t.$t("CAPTAIN.DOCUMENTS.EMPTY_STATE.FEATURE_SPOTLIGHT.NOTE"),"fallback-thumbnail":"/assets/images/dashboard/captain/document-light.svg","fallback-thumbnail-dark":"/assets/images/dashboard/captain/document-dark.svg","learn-more-url":"https://chwt.app/captain-document","hide-actions":!e.isOnChatwootCloud,class:"mb-8"},null,8,["title","note","hide-actions"]),v(e.EmptyStateLayout,{title:t.$t("CAPTAIN.DOCUMENTS.EMPTY_STATE.TITLE"),subtitle:t.$t("CAPTAIN.DOCUMENTS.EMPTY_STATE.SUBTITLE"),"action-perms":["administrator"]},{"empty-state-item":z(()=>[f("div",f2t,[(p(!0),g(de,null,Ae(e.documentsList.slice(0,5),(o,i)=>(p(),L(e.DocumentCard,{id:o.id,key:`document-${i}`,name:o.name,assistant:o.assistant,"external-link":o.external_link,"created-at":o.created_at},null,8,["id","name","assistant","external-link","created-at"]))),128))])]),actions:z(()=>[v(e.Button,{label:t.$t("CAPTAIN.DOCUMENTS.ADD_NEW"),icon:"i-lucide-plus",onClick:e.onClick},null,8,["label"])]),_:1},8,["title","subtitle"])],64)}const h2t=G(p2t,[["render",m2t],["__file","/app/app/javascript/dashboard/components-next/captain/pageComponents/emptyStates/DocumentPageEmptyState.vue"]]),_2t={__name:"LimitBanner",setup(t,{expose:n}){n();const a=ft(),{accountId:e}=Ut(),{documentLimits:s,fetchLimits:r}=dd(),o=()=>{a.push({name:"billing_settings_index",params:{accountId:e.value}})},i=S(()=>{if(!s.value)return!1;const{currentAvailable:c}=s.value;return c===0});Pe(r);const l={router:a,accountId:e,documentLimits:s,fetchLimits:r,openBilling:o,showBanner:i,onMounted:Pe,computed:S,get useAccount(){return Ut},get useCaptain(){return dd},get useRouter(){return ft},Banner:op};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}};function g2t(t,n,a,e,s,r){return ce((p(),L(e.Banner,{color:"amber","action-label":t.$t("CAPTAIN.PAYWALL.UPGRADE_NOW"),onAction:e.openBilling},{default:z(()=>[Oe(C(t.$t("CAPTAIN.BANNER.DOCUMENTS")),1)]),_:1},8,["action-label"])),[[En,e.showBanner]])}const b2t=G(_2t,[["render",g2t],["__file","/app/app/javascript/dashboard/components-next/captain/pageComponents/document/LimitBanner.vue"]]),v2t={__name:"Index",setup(t,{expose:n}){n();const a=Fe(),{isOnChatwootCloud:e}=Ut(),s=le("captainDocuments/getUIFlags"),r=le("captainDocuments/getRecords"),o=le("captainAssistants/getRecords"),i=S(()=>s.value.fetchingList),l=le("captainDocuments/getMeta"),c=P("all"),d=P(null),u=P(null),m=()=>{u.value.dialogRef.open()},h=P(!1),_=P(!1),E=P(null),y=P(null),b=S(()=>o.value.length===0?!1:!i.value),A=()=>{h.value=!0,At(()=>y.value.dialogRef.open())},T=()=>{_.value=!0,At(()=>E.value.dialogRef.open())},I=()=>{h.value=!1},N=()=>{_.value=!1},x=({action:k,id:V})=>{d.value=r.value.find(F=>V===F.id),At(()=>{k==="delete"?m():k==="viewRelatedQuestions"&&A()})},R=(k=1)=>{const V={page:k};c.value!=="all"&&(V.assistantId=c.value),a.dispatch("captainDocuments/get",V)},M=k=>{c.value=k,R()},w=k=>R(k),D=()=>{var k,V;((k=r.value)==null?void 0:k.length)===0&&((V=l.value)==null?void 0:V.page)>1&&w(l.value.page-1)};Pe(()=>{o.value.length||a.dispatch("captainAssistants/get"),R()});const B={store:a,isOnChatwootCloud:e,uiFlags:s,documents:r,assistants:o,isFetching:i,documentsMeta:l,selectedAssistant:c,selectedDocument:d,deleteDocumentDialog:u,handleDelete:m,showRelatedResponses:h,showCreateDialog:_,createDocumentDialog:E,relationQuestionDialog:y,shouldShowAssistantSelector:b,handleShowRelatedDocument:A,handleCreateDocument:T,handleRelatedResponseClose:I,handleCreateDialogClose:N,handleAction:x,fetchDocuments:R,handleAssistantFilterChange:M,onPageChange:w,onDeleteSuccess:D,computed:S,onMounted:Pe,ref:P,nextTick:At,get useMapGetter(){return le},get useStore(){return Fe},get FEATURE_FLAGS(){return pt},get useAccount(){return Ut},DeleteDialog:Rd,DocumentCard:TP,PageLayout:ql,CaptainPaywall:bp,RelatedResponses:jNt,CreateDocumentDialog:c2t,AssistantSelector:P1,DocumentPageEmptyState:h2t,FeatureSpotlightPopover:f_,LimitBanner:b2t};return Object.defineProperty(B,"__isScriptSetup",{enumerable:!1,value:!0}),B}},E2t={key:0,class:"mb-4 -mt-3 flex gap-3"},S2t={class:"flex flex-col gap-4"};function T2t(t,n,a,e,s,r){return p(),L(e.PageLayout,{"header-title":t.$t("CAPTAIN.DOCUMENTS.HEADER"),"button-label":t.$t("CAPTAIN.DOCUMENTS.ADD_NEW"),"button-policy":["administrator"],"total-count":e.documentsMeta.totalCount,"current-page":e.documentsMeta.page,"show-pagination-footer":!e.isFetching&&!!e.documents.length,"is-fetching":e.isFetching,"is-empty":!e.documents.length,"feature-flag":e.FEATURE_FLAGS.CAPTAIN,"onUpdate:currentPage":e.onPageChange,onClick:e.handleCreateDocument},{knowMore:z(()=>[v(e.FeatureSpotlightPopover,{"button-label":t.$t("CAPTAIN.HEADER_KNOW_MORE"),title:t.$t("CAPTAIN.DOCUMENTS.EMPTY_STATE.FEATURE_SPOTLIGHT.TITLE"),note:t.$t("CAPTAIN.DOCUMENTS.EMPTY_STATE.FEATURE_SPOTLIGHT.NOTE"),"hide-actions":!e.isOnChatwootCloud,"fallback-thumbnail":"/assets/images/dashboard/captain/document-popover-light.svg","fallback-thumbnail-dark":"/assets/images/dashboard/captain/document-popover-dark.svg","learn-more-url":"https://chwt.app/captain-document"},null,8,["button-label","title","note","hide-actions"])]),emptyState:z(()=>[v(e.DocumentPageEmptyState,{onClick:e.handleCreateDocument})]),paywall:z(()=>[v(e.CaptainPaywall)]),controls:z(()=>[e.shouldShowAssistantSelector?(p(),g("div",E2t,[v(e.AssistantSelector,{"assistant-id":e.selectedAssistant,onUpdate:e.handleAssistantFilterChange},null,8,["assistant-id"])])):O("v-if",!0)]),body:z(()=>[v(e.LimitBanner,{class:"mb-5"}),f("div",S2t,[(p(!0),g(de,null,Ae(e.documents,o=>(p(),L(e.DocumentCard,{id:o.id,key:o.id,name:o.name||o.external_link,"external-link":o.external_link,assistant:o.assistant,"created-at":o.created_at,onAction:e.handleAction},null,8,["id","name","external-link","assistant","created-at"]))),128))])]),default:z(()=>[e.showRelatedResponses?(p(),L(e.RelatedResponses,{key:0,ref:"relationQuestionDialog","captain-document":e.selectedDocument,onClose:e.handleRelatedResponseClose},null,8,["captain-document"])):O("v-if",!0),e.showCreateDialog?(p(),L(e.CreateDocumentDialog,{key:1,ref:"createDocumentDialog",onClose:e.handleCreateDialogClose},null,512)):O("v-if",!0),e.selectedDocument?(p(),L(e.DeleteDialog,{key:2,ref:"deleteDocumentDialog",entity:e.selectedDocument,type:"Documents",onDeleteSuccess:e.onDeleteSuccess},null,8,["entity"])):O("v-if",!0)]),_:1},8,["header-title","button-label","total-count","current-page","show-pagination-footer","is-fetching","is-empty","feature-flag"])}const A2t=G(v2t,[["render",T2t],["__file","/app/app/javascript/dashboard/routes/dashboard/captain/documents/Index.vue"]]),y2t={__name:"BulkDeleteDialog",props:{type:{type:String,required:!0},bulkIds:{type:Object,required:!0}},emits:["deleteSuccess"],setup(t,{expose:n,emit:a}){const e=t,s=a,{t:r}=Q(),o=Fe(),i=P(null),l=S(()=>e.type.toUpperCase()),c=async m=>{if(m)try{await o.dispatch("captainBulkActions/handleBulkDelete",Array.from(e.bulkIds)),s("deleteSuccess"),Z(r(`CAPTAIN.${l.value}.BULK_DELETE.SUCCESS_MESSAGE`))}catch{Z(r(`CAPTAIN.${l.value}.BULK_DELETE.ERROR_MESSAGE`))}},d=async()=>{var m;await c(Array.from(e.bulkIds)),(m=i.value)==null||m.close()};n({dialogRef:i});const u={props:e,emit:s,t:r,store:o,bulkDeleteDialogRef:i,i18nKey:l,handleBulkDelete:c,handleDialogConfirm:d,ref:P,computed:S,get useStore(){return Fe},get useI18n(){return Q},get useAlert(){return Z},Dialog:la};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}};function I2t(t,n,a,e,s,r){return p(),L(e.Dialog,{ref:"bulkDeleteDialogRef",type:"alert",title:e.t(`CAPTAIN.${e.i18nKey}.BULK_DELETE.TITLE`),description:e.t(`CAPTAIN.${e.i18nKey}.BULK_DELETE.DESCRIPTION`),"confirm-button-label":e.t(`CAPTAIN.${e.i18nKey}.BULK_DELETE.CONFIRM`),onConfirm:e.handleDialogConfirm},null,8,["title","description","confirm-button-label"])}const AP=G(y2t,[["render",I2t],["__file","/app/app/javascript/dashboard/components-next/captain/pageComponents/BulkDeleteDialog.vue"]]),C2t={__name:"ResponseForm",props:{mode:{type:String,required:!0,validator:t=>["edit","create"].includes(t)},response:{type:Object,default:()=>({})}},emits:["submit","cancel"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o={uiFlags:le("captainResponses/getUIFlags"),assistants:le("captainAssistants/getRecords")},i={question:"",answer:"",assistantId:null},l=Lt({...i}),c={question:{required:Ge,minLength:Rt(1)},answer:{required:Ge,minLength:Rt(1)},assistantId:{required:Ge}},d=S(()=>o.assistants.value.map(I=>({value:I.id,label:I.name}))),u=rt(c,l),m=S(()=>o.uiFlags.value.creatingItem),h=(I,N)=>u.value[I].$error?r(`CAPTAIN.RESPONSES.FORM.${N}.ERROR`):"",_=S(()=>({question:h("question","QUESTION"),answer:h("answer","ANSWER"),assistantId:h("assistantId","ASSISTANT")})),E=()=>s("cancel"),y=()=>({question:l.question,answer:l.answer,assistant_id:l.assistantId}),b=async()=>{await u.value.$validate()&&s("submit",y())},A=I=>{if(!I)return;const{question:N,answer:x,assistant:R}=I;Object.assign(l,{question:N,answer:x,assistantId:R.id})};je(()=>e.response,I=>{e.mode==="edit"&&I&&A(I)},{immediate:!0});const T={props:e,emit:s,t:r,formState:o,initialState:i,state:l,validationRules:c,assistantList:d,v$:u,isLoading:m,getErrorMessage:h,formErrors:_,handleCancel:E,prepareDocumentDetails:y,handleSubmit:b,updateStateFromResponse:A,reactive:Lt,computed:S,watch:je,get useI18n(){return Q},get useVuelidate(){return rt},get required(){return Ge},get minLength(){return Rt},get useMapGetter(){return le},Input:sn,Editor:Ds,Button:Se,ComboBox:Cr};return Object.defineProperty(T,"__isScriptSetup",{enumerable:!1,value:!0}),T}},O2t={class:"flex flex-col gap-1"},N2t={for:"assistant",class:"mb-0.5 text-sm font-medium text-n-slate-12"},x2t={class:"flex items-center justify-between w-full gap-3"};function R2t(t,n,a,e,s,r){return p(),g("form",{class:"flex flex-col gap-4",onSubmit:Ve(e.handleSubmit,["prevent"])},[v(e.Input,{modelValue:e.state.question,"onUpdate:modelValue":n[0]||(n[0]=o=>e.state.question=o),label:e.t("CAPTAIN.RESPONSES.FORM.QUESTION.LABEL"),placeholder:e.t("CAPTAIN.RESPONSES.FORM.QUESTION.PLACEHOLDER"),message:e.formErrors.question,"message-type":e.formErrors.question?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),v(e.Editor,{modelValue:e.state.answer,"onUpdate:modelValue":n[1]||(n[1]=o=>e.state.answer=o),label:e.t("CAPTAIN.RESPONSES.FORM.ANSWER.LABEL"),placeholder:e.t("CAPTAIN.RESPONSES.FORM.ANSWER.PLACEHOLDER"),message:e.formErrors.answer,"max-length":1e4,"message-type":e.formErrors.answer?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),f("div",O2t,[f("label",N2t,C(e.t("CAPTAIN.RESPONSES.FORM.ASSISTANT.LABEL")),1),v(e.ComboBox,{id:"assistant",modelValue:e.state.assistantId,"onUpdate:modelValue":n[2]||(n[2]=o=>e.state.assistantId=o),options:e.assistantList,"has-error":!!e.formErrors.assistantId,placeholder:e.t("CAPTAIN.RESPONSES.FORM.ASSISTANT.PLACEHOLDER"),class:"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:dark:outline-n-weak [&>div>button:not(.focused)]:hover:!outline-n-slate-6",message:e.formErrors.assistantId},null,8,["modelValue","options","has-error","placeholder","message"])]),f("div",x2t,[v(e.Button,{type:"button",variant:"faded",color:"slate",label:e.t("CAPTAIN.FORM.CANCEL"),class:"w-full bg-n-alpha-2 text-n-blue-text hover:bg-n-alpha-3",onClick:e.handleCancel},null,8,["label"]),v(e.Button,{type:"submit",label:e.t(`CAPTAIN.FORM.${a.mode.toUpperCase()}`),class:"w-full","is-loading":e.isLoading,disabled:e.isLoading},null,8,["label","is-loading","disabled"])])],32)}const w2t=G(C2t,[["render",R2t],["__file","/app/app/javascript/dashboard/components-next/captain/pageComponents/response/ResponseForm.vue"]]),M2t={__name:"CreateResponseDialog",props:{selectedResponse:{type:Object,default:()=>({})},type:{type:String,default:"create",validator:t=>["create","edit"].includes(t)}},emits:["close"],setup(t,{expose:n,emit:a}){const e=t,s=a,{t:r}=Q(),o=Fe(),i=P(null),l=P(null),c=y=>o.dispatch("captainResponses/update",{id:e.selectedResponse.id,...y}),d=S(()=>`CAPTAIN.RESPONSES.${e.type.toUpperCase()}`),u=y=>o.dispatch("captainResponses/create",y),m=async y=>{var b;try{e.type==="edit"?await c(y):await u(y),Z(r(`${d.value}.SUCCESS_MESSAGE`)),i.value.close()}catch(A){const T=((b=A==null?void 0:A.response)==null?void 0:b.message)||r(`${d.value}.ERROR_MESSAGE`);Z(T)}},h=()=>{s("close")},_=()=>{i.value.close()};n({dialogRef:i});const E={props:e,emit:s,t:r,store:o,dialogRef:i,responseForm:l,updateResponse:c,i18nKey:d,createResponse:u,handleSubmit:m,handleClose:h,handleCancel:_,ref:P,computed:S,get useStore(){return Fe},get useAlert(){return Z},get useI18n(){return Q},Dialog:la,ResponseForm:w2t};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}};function L2t(t,n,a,e,s,r){return p(),L(e.Dialog,{ref:"dialogRef",title:t.$t(`${e.i18nKey}.TITLE`),description:t.$t("CAPTAIN.RESPONSES.FORM_DESCRIPTION"),"show-cancel-button":!1,"show-confirm-button":!1,onClose:e.handleClose},{footer:z(()=>n[0]||(n[0]=[])),default:z(()=>[v(e.ResponseForm,{ref:"responseForm",mode:a.type,response:a.selectedResponse,onSubmit:e.handleSubmit,onCancel:e.handleCancel},null,8,["mode","response"])]),_:1},8,["title","description"])}const yP=G(M2t,[["render",L2t],["__file","/app/app/javascript/dashboard/components-next/captain/pageComponents/response/CreateResponseDialog.vue"]]),D2t={__name:"ResponsePageEmptyState",props:{variant:{type:String,default:"approved",validator:t=>["approved","pending"].includes(t)},hasActiveFilters:{type:Boolean,default:!1}},emits:["click","clearFilters"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=S(()=>e.variant==="approved"),o=S(()=>e.variant==="pending"),{isOnChatwootCloud:i}=Ut(),d={props:e,emit:s,isApproved:r,isPending:o,isOnChatwootCloud:i,onClick:()=>{s("click")},onClearFilters:()=>{s("clearFilters")},get useAccount(){return Ut},EmptyStateLayout:Or,Button:Se,ResponseCard:__,FeatureSpotlight:M1,get responsesList(){return Wyt},computed:S};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}},P2t={class:"grid grid-cols-1 gap-4 p-px overflow-hidden"},k2t={class:"flex flex-col items-center gap-3"};function B2t(t,n,a,e,s,r){return p(),g(de,null,[e.isApproved?(p(),L(e.FeatureSpotlight,{key:0,title:t.$t("CAPTAIN.RESPONSES.EMPTY_STATE.FEATURE_SPOTLIGHT.TITLE"),note:t.$t("CAPTAIN.RESPONSES.EMPTY_STATE.FEATURE_SPOTLIGHT.NOTE"),"fallback-thumbnail":"/assets/images/dashboard/captain/faqs-light.svg","fallback-thumbnail-dark":"/assets/images/dashboard/captain/faqs-dark.svg","learn-more-url":"https://chwt.app/captain-faq","hide-actions":!e.isOnChatwootCloud,class:"mb-8"},null,8,["title","note","hide-actions"])):O("v-if",!0),v(e.EmptyStateLayout,{title:e.isPending?t.$t("CAPTAIN.RESPONSES.EMPTY_STATE.NO_PENDING_TITLE"):t.$t("CAPTAIN.RESPONSES.EMPTY_STATE.TITLE"),subtitle:e.isApproved?t.$t("CAPTAIN.RESPONSES.EMPTY_STATE.SUBTITLE"):"","action-perms":["administrator"],"show-backdrop":e.isApproved},Ro({actions:z(()=>[f("div",k2t,[e.isApproved?(p(),L(e.Button,{key:0,label:t.$t("CAPTAIN.RESPONSES.ADD_NEW"),icon:"i-lucide-plus",onClick:e.onClick},null,8,["label"])):e.isPending&&a.hasActiveFilters?(p(),L(e.Button,{key:1,label:t.$t("CAPTAIN.RESPONSES.EMPTY_STATE.CLEAR_SEARCH"),variant:"link",size:"sm",onClick:e.onClearFilters},null,8,["label"])):O("v-if",!0)])]),_:2},[e.isApproved?{name:"empty-state-item",fn:z(()=>[f("div",P2t,[(p(!0),g(de,null,Ae(e.responsesList.slice(0,5),(o,i)=>(p(),L(e.ResponseCard,{id:o.id,key:`response-${i}`,question:o.question,answer:o.answer,status:o.status,assistant:o.assistant,"created-at":o.created_at,"updated-at":o.created_at},null,8,["id","question","answer","status","assistant","created-at","updated-at"]))),128))])]),key:"0"}:void 0]),1032,["title","subtitle","show-backdrop"])],64)}const IP=G(D2t,[["render",B2t],["__file","/app/app/javascript/dashboard/components-next/captain/pageComponents/emptyStates/ResponsePageEmptyState.vue"]]),F2t={__name:"Index",setup(t,{expose:n}){n();const a=ft(),e=lt(),s=Fe(),{isOnChatwootCloud:r}=Ut(),o=le("captainResponses/getUIFlags"),i=le("captainAssistants/getRecords"),l=le("captainResponses/getMeta"),c=le("captainResponses/getRecords"),d=S(()=>o.value.fetchingList),u=P(null),m=P(null),h=P(null),_=P("all"),E=P(""),y=P(""),{t:b}=Q(),A=P(null),T=S(()=>i.value.length===0?!1:!d.value),I=le("captainResponses/getPendingCount"),N=()=>{m.value.dialogRef.open()},x=()=>{E.value="create",At(()=>A.value.dialogRef.open())},R=()=>{E.value="edit",At(()=>A.value.dialogRef.open())},M=({action:ge,id:Me})=>{u.value=c.value.find(We=>Me===We.id),At(()=>{ge==="delete"&&N(),ge==="edit"&&R()})},w=({id:ge,type:Me})=>{Me==="Conversation"&&a.push({name:"inbox_conversation",params:{conversation_id:ge}})},D=()=>{E.value="",u.value=null},B=(ge,Me)=>{const We={page:ge||1};Me&&(We.search=Me),a.replace({query:We})},k=(ge=1)=>{const Me={page:ge,status:"approved"};_.value!=="all"&&(Me.assistantId=_.value),y.value&&(Me.search=y.value),B(ge,y.value),s.dispatch("captainResponses/get",Me)},V=P(new Set),F=P(null),$=S(()=>{var We;const ge=V.value.size,Me=((We=c.value)==null?void 0:We.length)||0;return{hasSelected:ge>0,isIndeterminate:ge>0&&ge<Me,allSelected:Me>0&&ge===Me}}),Y=S({get:()=>$.value.allSelected,set:ge=>{V.value=ge?new Set(c.value.map(Me=>Me.id)):new Set}}),j=S(()=>{var Me;const ge=((Me=c.value)==null?void 0:Me.length)||0;return $.value.allSelected?b("CAPTAIN.RESPONSES.UNSELECT_ALL",{count:ge}):b("CAPTAIN.RESPONSES.SELECT_ALL",{count:ge})}),U=(ge,Me)=>{F.value=ge?Me:null},J=ge=>{const Me=new Set(V.value);Me[Me.has(ge)?"delete":"add"](ge),V.value=Me},te=()=>{var We,Ue;const ge=((We=c.value)==null?void 0:We.length)===0,Me=(Ue=l.value)==null?void 0:Ue.page;if(ge){const Re=Me>1?Me-1:Me;k(Re)}else k(Me);V.value=new Set},q=ge=>{const Me=$.value.allSelected,We=V.value.size>0;k(ge),(Me||We)&&(V.value=new Set)},K=()=>{var ge,Me;((ge=c.value)==null?void 0:ge.length)===0&&((Me=l.value)==null?void 0:Me.page)>1&&q(l.value.page-1)},W=()=>{te()},ee=ge=>{_.value=ge,k(1)},ae=Ja(async()=>{k(1)},500),ve=()=>{e.query.search&&(y.value=e.query.search);const ge=parseInt(e.query.page,10)||1;k(ge)},Ce=()=>{a.push({name:"captain_responses_pending"})};Pe(()=>{s.dispatch("captainAssistants/get"),ve(),s.dispatch("captainResponses/fetchPendingCount")});const ue={router:a,route:e,store:s,isOnChatwootCloud:r,uiFlags:o,assistants:i,responseMeta:l,responses:c,isFetching:d,selectedResponse:u,deleteDialog:m,bulkDeleteDialog:h,selectedAssistant:_,dialogType:E,searchQuery:y,t:b,createDialog:A,shouldShowDropdown:T,pendingCount:I,handleDelete:N,handleCreate:x,handleEdit:R,handleAction:M,handleNavigationAction:w,handleCreateClose:D,updateURLWithFilters:B,fetchResponses:k,bulkSelectedIds:V,hoveredCard:F,bulkSelectionState:$,bulkCheckbox:Y,buildSelectedCountLabel:j,handleCardHover:U,handleCardSelect:J,fetchResponseAfterBulkAction:te,onPageChange:q,onDeleteSuccess:K,onBulkDeleteSuccess:W,handleAssistantFilterChange:ee,debouncedSearch:ae,initializeFromURL:ve,navigateToPendingFAQs:Ce,computed:S,onMounted:Pe,ref:P,nextTick:At,get useMapGetter(){return le},get useStore(){return Fe},get useI18n(){return Q},get useRouter(){return ft},get useRoute(){return lt},get FEATURE_FLAGS(){return pt},get debounce(){return Ja},get useAccount(){return Ut},Banner:op,Button:Se,Checkbox:nl,Input:sn,DeleteDialog:Rd,BulkDeleteDialog:AP,PageLayout:ql,CaptainPaywall:bp,AssistantSelector:P1,ResponseCard:__,CreateResponseDialog:yP,ResponsePageEmptyState:IP,FeatureSpotlightPopover:f_,LimitBanner:L1};return Object.defineProperty(ue,"__isScriptSetup",{enumerable:!1,value:!0}),ue}},U2t={key:0,class:"flex gap-3 justify-between w-full items-center"},$2t={class:"flex items-center gap-3"},G2t={key:0,class:"flex items-center gap-3"},V2t={class:"flex items-center gap-3"},H2t={class:"flex items-center gap-1.5"},j2t={class:"text-sm text-n-slate-12 font-medium tabular-nums"},W2t={class:"text-sm text-n-slate-10 tabular-nums"},z2t={class:"flex gap-3 items-center"},Y2t={class:"flex flex-col gap-4"};function K2t(t,n,a,e,s,r){return p(),L(e.PageLayout,{"total-count":e.responseMeta.totalCount,"current-page":e.responseMeta.page,"button-policy":["administrator"],"header-title":t.$t("CAPTAIN.RESPONSES.HEADER"),"button-label":t.$t("CAPTAIN.RESPONSES.ADD_NEW"),"is-fetching":e.isFetching,"is-empty":!e.responses.length,"show-pagination-footer":!e.isFetching&&!!e.responses.length,"feature-flag":e.FEATURE_FLAGS.CAPTAIN,"onUpdate:currentPage":e.onPageChange,onClick:e.handleCreate},{knowMore:z(()=>[v(e.FeatureSpotlightPopover,{"button-label":t.$t("CAPTAIN.HEADER_KNOW_MORE"),title:t.$t("CAPTAIN.RESPONSES.EMPTY_STATE.FEATURE_SPOTLIGHT.TITLE"),note:t.$t("CAPTAIN.RESPONSES.EMPTY_STATE.FEATURE_SPOTLIGHT.NOTE"),"hide-actions":!e.isOnChatwootCloud,"fallback-thumbnail":"/assets/images/dashboard/captain/faqs-popover-light.svg","fallback-thumbnail-dark":"/assets/images/dashboard/captain/faqs-popover-dark.svg","learn-more-url":"https://chwt.app/captain-faq"},null,8,["button-label","title","note","hide-actions"])]),subHeader:z(()=>[e.shouldShowDropdown?(p(),g("div",{key:0,class:oe(["mb-2 flex justify-between items-center py-1",{"ltr:pl-3 rtl:pr-3 ltr:pr-1 rtl:pl-1 rounded-lg outline outline-1 outline-n-weak bg-n-solid-3 w-fit":e.bulkSelectionState.hasSelected}])},[e.bulkSelectionState.hasSelected?O("v-if",!0):(p(),g("div",U2t,[f("div",$2t,[v(e.AssistantSelector,{"assistant-id":e.selectedAssistant,onUpdate:e.handleAssistantFilterChange},null,8,["assistant-id"])]),v(e.Input,{modelValue:e.searchQuery,"onUpdate:modelValue":n[0]||(n[0]=o=>e.searchQuery=o),placeholder:t.$t("CAPTAIN.RESPONSES.SEARCH_PLACEHOLDER"),class:"w-64",size:"sm",type:"search",autofocus:"",onInput:e.debouncedSearch},null,8,["modelValue","placeholder","onInput"])])),v(Qa,{name:"slide-fade","enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 transform ltr:-translate-x-4 rtl:translate-x-4","enter-to-class":"opacity-100 transform translate-x-0","leave-active-class":"hidden opacity-0"},{default:z(()=>[e.bulkSelectionState.hasSelected?(p(),g("div",G2t,[f("div",V2t,[f("div",H2t,[v(e.Checkbox,{modelValue:e.bulkCheckbox,"onUpdate:modelValue":n[1]||(n[1]=o=>e.bulkCheckbox=o),indeterminate:e.bulkSelectionState.isIndeterminate},null,8,["modelValue","indeterminate"]),f("span",j2t,C(e.buildSelectedCountLabel),1)]),f("span",W2t,C(t.$t("CAPTAIN.RESPONSES.SELECTED",{count:e.bulkSelectedIds.size})),1)]),n[3]||(n[3]=f("div",{class:"h-4 w-px bg-n-strong"},null,-1)),f("div",z2t,[v(e.Button,{label:t.$t("CAPTAIN.RESPONSES.BULK_DELETE_BUTTON"),sm:"",ruby:"",ghost:"",class:"!px-1.5",icon:"i-lucide-trash",onClick:n[2]||(n[2]=o=>e.bulkDeleteDialog.dialogRef.open())},null,8,["label"])])])):O("v-if",!0)]),_:1})],2)):O("v-if",!0)]),emptyState:z(()=>[v(e.ResponsePageEmptyState,{onClick:e.handleCreate})]),paywall:z(()=>[v(e.CaptainPaywall)]),body:z(()=>[v(e.LimitBanner,{class:"mb-5"}),e.pendingCount>0?(p(),L(e.Banner,{key:0,color:"blue",class:"mb-4 -mt-3","action-label":t.$t("CAPTAIN.RESPONSES.PENDING_BANNER.ACTION"),onAction:e.navigateToPendingFAQs},{default:z(()=>[Oe(C(t.$t("CAPTAIN.RESPONSES.PENDING_BANNER.TITLE")),1)]),_:1},8,["action-label"])):O("v-if",!0),f("div",Y2t,[(p(!0),g(de,null,Ae(e.responses,o=>(p(),L(e.ResponseCard,{id:o.id,key:o.id,question:o.question,answer:o.answer,assistant:o.assistant,documentable:o.documentable,status:o.status,"created-at":o.created_at,"updated-at":o.updated_at,"is-selected":e.bulkSelectedIds.has(o.id),selectable:e.hoveredCard===o.id||e.bulkSelectedIds.size>0,"show-menu":!e.bulkSelectedIds.has(o.id),"show-actions":!1,onAction:e.handleAction,onNavigate:e.handleNavigationAction,onSelect:e.handleCardSelect,onHover:i=>e.handleCardHover(i,o.id)},null,8,["id","question","answer","assistant","documentable","status","created-at","updated-at","is-selected","selectable","show-menu","onHover"]))),128))])]),default:z(()=>[e.selectedResponse?(p(),L(e.DeleteDialog,{key:0,ref:"deleteDialog",entity:e.selectedResponse,type:"Responses",onDeleteSuccess:e.onDeleteSuccess},null,8,["entity"])):O("v-if",!0),e.bulkSelectedIds?(p(),L(e.BulkDeleteDialog,{key:1,ref:"bulkDeleteDialog","bulk-ids":e.bulkSelectedIds,type:"Responses",onDeleteSuccess:e.onBulkDeleteSuccess},null,8,["bulk-ids"])):O("v-if",!0),e.dialogType?(p(),L(e.CreateResponseDialog,{key:2,ref:"createDialog",type:e.dialogType,"selected-response":e.selectedResponse,onClose:e.handleCreateClose},null,8,["type","selected-response"])):O("v-if",!0)]),_:1},8,["total-count","current-page","header-title","button-label","is-fetching","is-empty","show-pagination-footer","feature-flag"])}const X2t=G(F2t,[["render",K2t],["__file","/app/app/javascript/dashboard/routes/dashboard/captain/responses/Index.vue"]]),q2t={__name:"Pending",setup(t,{expose:n}){n();const a=ft(),e=lt(),s=Fe(),{isOnChatwootCloud:r}=Ut(),o=le("captainResponses/getUIFlags"),i=le("captainAssistants/getRecords"),l=le("captainResponses/getMeta"),c=le("captainResponses/getRecords"),d=S(()=>o.value.fetchingList),u=P(null),m=P(null),h=P(null),_=P("all"),E=P(""),y=P(""),{t:b}=Q(),A=P(null),T=S(()=>i.value.length===0?!1:!d.value),I=S(()=>vt(`accounts/${e.params.accountId}/captain/responses`)),N=S(()=>c.value.filter(Re=>Re.status!=="approved")),x=()=>{m.value.dialogRef.open()},R=async()=>{try{await s.dispatch("captainResponses/update",{id:u.value.id,status:"approved"}),Z(b("CAPTAIN.RESPONSES.EDIT.APPROVE_SUCCESS_MESSAGE"))}catch(Re){const Le=(Re==null?void 0:Re.message)||b("CAPTAIN.RESPONSES.EDIT.ERROR_MESSAGE");Z(Le)}finally{u.value=null}},M=()=>{E.value="create",At(()=>A.value.dialogRef.open())},w=()=>{E.value="edit",At(()=>A.value.dialogRef.open())},D=({action:Re,id:Le})=>{u.value=N.value.find(Xe=>Le===Xe.id),At(()=>{Re==="delete"&&x(),Re==="edit"&&w(),Re==="approve"&&R()})},B=({id:Re,type:Le})=>{Le==="Conversation"&&a.push({name:"inbox_conversation",params:{conversation_id:Re}})},k=()=>{E.value="",u.value=null},V=(Re,Le)=>{const Xe={page:Re||1};Le&&(Xe.search=Le),a.replace({query:Xe})},F=(Re=1)=>{const Le={page:Re,status:"pending"};_.value!=="all"&&(Le.assistantId=_.value),y.value&&(Le.search=y.value),V(Re,y.value),s.dispatch("captainResponses/get",Le)},$=P(new Set),Y=P(null),j=S(()=>{var Xe;const Re=$.value.size,Le=((Xe=N.value)==null?void 0:Xe.length)||0;return{hasSelected:Re>0,isIndeterminate:Re>0&&Re<Le,allSelected:Le>0&&Re===Le}}),U=S({get:()=>j.value.allSelected,set:Re=>{$.value=Re?new Set(N.value.map(Le=>Le.id)):new Set}}),J=S(()=>{var Le;const Re=((Le=N.value)==null?void 0:Le.length)||0;return j.value.allSelected?b("CAPTAIN.RESPONSES.UNSELECT_ALL",{count:Re}):b("CAPTAIN.RESPONSES.SELECT_ALL",{count:Re})}),te=(Re,Le)=>{Y.value=Re?Le:null},q=Re=>{const Le=new Set($.value);Le[Le.has(Re)?"delete":"add"](Re),$.value=Le},K=()=>{var Xe,et;const Re=((Xe=N.value)==null?void 0:Xe.length)===0,Le=(et=l.value)==null?void 0:et.page;if(Re){const yt=Le>1?Le-1:Le;F(yt)}else F(Le);$.value=new Set},W=async()=>{try{await s.dispatch("captainBulkActions/handleBulkApprove",Array.from($.value)),K(),Z(b("CAPTAIN.RESPONSES.BULK_APPROVE.SUCCESS_MESSAGE"))}catch(Re){Z((Re==null?void 0:Re.message)||b("CAPTAIN.RESPONSES.BULK_APPROVE.ERROR_MESSAGE"))}},ee=Re=>{const Le=j.value.allSelected,Xe=$.value.size>0;F(Re),(Le||Xe)&&($.value=new Set)},ae=()=>{var Re,Le;((Re=N.value)==null?void 0:Re.length)===0&&((Le=l.value)==null?void 0:Le.page)>1&&ee(l.value.page-1)},ve=()=>{K()},Ce=Re=>{_.value=Re,F(1)},ue=Ja(async()=>{F(1)},500),ge=S(()=>!!(y.value||_.value!=="all")),Me=()=>{y.value="",_.value="all",F(1)},We=()=>{e.query.search&&(y.value=e.query.search);const Re=parseInt(e.query.page,10)||1;F(Re)};Pe(()=>{s.dispatch("captainAssistants/get"),We()});const Ue={router:a,route:e,store:s,isOnChatwootCloud:r,uiFlags:o,assistants:i,responseMeta:l,responses:c,isFetching:d,selectedResponse:u,deleteDialog:m,bulkDeleteDialog:h,selectedAssistant:_,dialogType:E,searchQuery:y,t:b,createDialog:A,shouldShowDropdown:T,backUrl:I,filteredResponses:N,handleDelete:x,handleAccept:R,handleCreate:M,handleEdit:w,handleAction:D,handleNavigationAction:B,handleCreateClose:k,updateURLWithFilters:V,fetchResponses:F,bulkSelectedIds:$,hoveredCard:Y,bulkSelectionState:j,bulkCheckbox:U,buildSelectedCountLabel:J,handleCardHover:te,handleCardSelect:q,fetchResponseAfterBulkAction:K,handleBulkApprove:W,onPageChange:ee,onDeleteSuccess:ae,onBulkDeleteSuccess:ve,handleAssistantFilterChange:Ce,debouncedSearch:ue,hasActiveFilters:ge,clearFilters:Me,initializeFromURL:We,computed:S,onMounted:Pe,ref:P,nextTick:At,get useMapGetter(){return le},get useStore(){return Fe},get useAlert(){return Z},get useI18n(){return Q},get useRouter(){return ft},get useRoute(){return lt},get FEATURE_FLAGS(){return pt},get debounce(){return Ja},get useAccount(){return Ut},get frontendURL(){return vt},Button:Se,Checkbox:nl,Input:sn,DeleteDialog:Rd,BulkDeleteDialog:AP,PageLayout:ql,CaptainPaywall:bp,AssistantSelector:P1,ResponseCard:__,CreateResponseDialog:yP,ResponsePageEmptyState:IP,FeatureSpotlightPopover:f_,LimitBanner:L1};return Object.defineProperty(Ue,"__isScriptSetup",{enumerable:!1,value:!0}),Ue}},Z2t={key:0,class:"flex gap-3 justify-between w-full items-center"},Q2t={class:"flex items-center gap-3"},J2t={key:0,class:"flex items-center gap-3"},ext={class:"flex items-center gap-3"},txt={class:"flex items-center gap-1.5"},nxt={class:"text-sm text-n-slate-12 font-medium tabular-nums"},axt={class:"text-sm text-n-slate-10 tabular-nums"},sxt={class:"flex gap-3 items-center"},oxt={class:"flex flex-col gap-4"};function rxt(t,n,a,e,s,r){return p(),L(e.PageLayout,{"total-count":e.responseMeta.totalCount,"current-page":e.responseMeta.page,"button-policy":["administrator"],"header-title":t.$t("CAPTAIN.RESPONSES.PENDING_FAQS"),"button-label":t.$t("CAPTAIN.RESPONSES.ADD_NEW"),"is-fetching":e.isFetching,"is-empty":!e.filteredResponses.length,"show-pagination-footer":!e.isFetching&&!!e.filteredResponses.length,"feature-flag":e.FEATURE_FLAGS.CAPTAIN,"back-url":e.backUrl,"onUpdate:currentPage":e.onPageChange,onClick:e.handleCreate},{knowMore:z(()=>[v(e.FeatureSpotlightPopover,{"button-label":t.$t("CAPTAIN.HEADER_KNOW_MORE"),title:t.$t("CAPTAIN.RESPONSES.EMPTY_STATE.FEATURE_SPOTLIGHT.TITLE"),note:t.$t("CAPTAIN.RESPONSES.EMPTY_STATE.FEATURE_SPOTLIGHT.NOTE"),"hide-actions":!e.isOnChatwootCloud,"fallback-thumbnail":"/assets/images/dashboard/captain/faqs-popover-light.svg","fallback-thumbnail-dark":"/assets/images/dashboard/captain/faqs-popover-dark.svg","learn-more-url":"https://chwt.app/captain-faq"},null,8,["button-label","title","note","hide-actions"])]),subHeader:z(()=>[e.shouldShowDropdown?(p(),g("div",{key:0,class:oe(["mb-2 flex justify-between items-center py-1",{"ltr:pl-3 rtl:pr-3 ltr:pr-1 rtl:pl-1 rounded-lg outline outline-1 outline-n-weak bg-n-solid-3 w-fit":e.bulkSelectionState.hasSelected}])},[e.bulkSelectionState.hasSelected?O("v-if",!0):(p(),g("div",Z2t,[f("div",Q2t,[v(e.AssistantSelector,{"assistant-id":e.selectedAssistant,onUpdate:e.handleAssistantFilterChange},null,8,["assistant-id"])]),v(e.Input,{modelValue:e.searchQuery,"onUpdate:modelValue":n[0]||(n[0]=o=>e.searchQuery=o),placeholder:t.$t("CAPTAIN.RESPONSES.SEARCH_PLACEHOLDER"),class:"w-64",size:"sm",type:"search",autofocus:"",onInput:e.debouncedSearch},null,8,["modelValue","placeholder","onInput"])])),v(Qa,{name:"slide-fade","enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 transform ltr:-translate-x-4 rtl:translate-x-4","enter-to-class":"opacity-100 transform translate-x-0","leave-active-class":"hidden opacity-0"},{default:z(()=>[e.bulkSelectionState.hasSelected?(p(),g("div",J2t,[f("div",ext,[f("div",txt,[v(e.Checkbox,{modelValue:e.bulkCheckbox,"onUpdate:modelValue":n[1]||(n[1]=o=>e.bulkCheckbox=o),indeterminate:e.bulkSelectionState.isIndeterminate},null,8,["modelValue","indeterminate"]),f("span",nxt,C(e.buildSelectedCountLabel),1)]),f("span",axt,C(t.$t("CAPTAIN.RESPONSES.SELECTED",{count:e.bulkSelectedIds.size})),1)]),n[4]||(n[4]=f("div",{class:"h-4 w-px bg-n-strong"},null,-1)),f("div",sxt,[v(e.Button,{label:t.$t("CAPTAIN.RESPONSES.BULK_APPROVE_BUTTON"),sm:"",ghost:"",icon:"i-lucide-check",class:"!px-1.5",onClick:e.handleBulkApprove},null,8,["label"]),n[3]||(n[3]=f("div",{class:"h-4 w-px bg-n-strong"},null,-1)),v(e.Button,{label:t.$t("CAPTAIN.RESPONSES.BULK_DELETE_BUTTON"),sm:"",ruby:"",ghost:"",class:"!px-1.5",icon:"i-lucide-trash",onClick:n[2]||(n[2]=o=>e.bulkDeleteDialog.dialogRef.open())},null,8,["label"])])])):O("v-if",!0)]),_:1})],2)):O("v-if",!0)]),emptyState:z(()=>[v(e.ResponsePageEmptyState,{variant:"pending","has-active-filters":e.hasActiveFilters,onClick:e.handleCreate,onClearFilters:e.clearFilters},null,8,["has-active-filters"])]),paywall:z(()=>[v(e.CaptainPaywall)]),body:z(()=>[v(e.LimitBanner,{class:"mb-5"}),f("div",oxt,[(p(!0),g(de,null,Ae(e.filteredResponses,o=>(p(),L(e.ResponseCard,{id:o.id,key:o.id,question:o.question,answer:o.answer,assistant:o.assistant,documentable:o.documentable,status:o.status,"created-at":o.created_at,"updated-at":o.updated_at,"is-selected":e.bulkSelectedIds.has(o.id),selectable:e.hoveredCard===o.id||e.bulkSelectedIds.size>0,"show-menu":!1,"show-actions":!e.bulkSelectedIds.has(o.id),onAction:e.handleAction,onNavigate:e.handleNavigationAction,onSelect:e.handleCardSelect,onHover:i=>e.handleCardHover(i,o.id)},null,8,["id","question","answer","assistant","documentable","status","created-at","updated-at","is-selected","selectable","show-actions","onHover"]))),128))])]),default:z(()=>[e.selectedResponse?(p(),L(e.DeleteDialog,{key:0,ref:"deleteDialog",entity:e.selectedResponse,type:"Responses",onDeleteSuccess:e.onDeleteSuccess},null,8,["entity"])):O("v-if",!0),e.bulkSelectedIds?(p(),L(e.BulkDeleteDialog,{key:1,ref:"bulkDeleteDialog","bulk-ids":e.bulkSelectedIds,type:"Responses",onDeleteSuccess:e.onBulkDeleteSuccess},null,8,["bulk-ids"])):O("v-if",!0),e.dialogType?(p(),L(e.CreateResponseDialog,{key:2,ref:"createDialog",type:e.dialogType,"selected-response":e.selectedResponse,onClose:e.handleCreateClose},null,8,["type","selected-response"])):O("v-if",!0)]),_:1},8,["total-count","current-page","header-title","button-label","is-fetching","is-empty","show-pagination-footer","feature-flag","back-url"])}const ixt=G(q2t,[["render",rxt],["__file","/app/app/javascript/dashboard/routes/dashboard/captain/responses/Pending.vue"]]),lxt={__name:"CustomToolsPageEmptyState",emits:["click"],setup(t,{expose:n,emit:a}){n();const e=a,r={emit:e,onClick:()=>{e("click")},EmptyStateLayout:Or,Button:Se};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}};function cxt(t,n,a,e,s,r){return p(),L(e.EmptyStateLayout,{title:t.$t("CAPTAIN.CUSTOM_TOOLS.EMPTY_STATE.TITLE"),subtitle:t.$t("CAPTAIN.CUSTOM_TOOLS.EMPTY_STATE.SUBTITLE"),"action-perms":["administrator"]},{"empty-state-item":z(()=>n[0]||(n[0]=[f("div",{class:"min-h-[600px]"},null,-1)])),actions:z(()=>[v(e.Button,{label:t.$t("CAPTAIN.CUSTOM_TOOLS.ADD_NEW"),icon:"i-lucide-plus",onClick:e.onClick},null,8,["label"])]),_:1},8,["title","subtitle"])}const dxt=G(lxt,[["render",cxt],["__file","/app/app/javascript/dashboard/components-next/captain/pageComponents/emptyStates/CustomToolsPageEmptyState.vue"]]),uxt={__name:"ParamRow",props:{name:{type:String,required:!0},nameModifiers:{},type:{type:String,required:!0},typeModifiers:{},description:{type:String,default:""},descriptionModifiers:{},required:{type:Boolean,default:!1},requiredModifiers:{}},emits:an(["remove"],["update:name","update:type","update:description","update:required"]),setup(t,{expose:n,emit:a}){const e=a,{t:s}=Q(),r=P(!1),o=dn(t,"name"),i=dn(t,"type"),l=dn(t,"description"),c=dn(t,"required"),d=S(()=>[{value:"string",label:s("CAPTAIN.CUSTOM_TOOLS.FORM.PARAM_TYPES.STRING")},{value:"number",label:s("CAPTAIN.CUSTOM_TOOLS.FORM.PARAM_TYPES.NUMBER")},{value:"boolean",label:s("CAPTAIN.CUSTOM_TOOLS.FORM.PARAM_TYPES.BOOLEAN")},{value:"array",label:s("CAPTAIN.CUSTOM_TOOLS.FORM.PARAM_TYPES.ARRAY")},{value:"object",label:s("CAPTAIN.CUSTOM_TOOLS.FORM.PARAM_TYPES.OBJECT")}]),u=S(()=>!o.value||o.value.trim()===""?"PARAM_NAME_REQUIRED":null);je([o,i,l,c],()=>{r.value=!1});const m=()=>(r.value=!0,!u.value);n({validate:m});const h={emit:e,t:s,showErrors:r,name:o,type:i,description:l,required:c,paramTypeOptions:d,validationError:u,validate:m,computed:S,ref:P,watch:je,get useI18n(){return Q},Button:Se,Input:sn,ComboBox:Cr,Checkbox:nl};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}},pxt={class:"list-none"},fxt={class:"flex flex-col flex-1 gap-3"},mxt={class:"grid grid-cols-3 gap-2"},hxt={class:"flex items-center gap-2 cursor-pointer"},_xt={class:"text-sm text-n-slate-11"},gxt={key:0,class:"block mt-1 text-sm text-n-ruby-11"};function bxt(t,n,a,e,s,r){return p(),g("li",pxt,[f("div",{class:oe(["flex items-start gap-2 p-3 rounded-lg border border-n-weak bg-n-alpha-2",{"animate-wiggle border-n-ruby-9":e.showErrors&&e.validationError}])},[f("div",fxt,[f("div",mxt,[v(e.Input,{modelValue:e.name,"onUpdate:modelValue":n[0]||(n[0]=o=>e.name=o),placeholder:e.t("CAPTAIN.CUSTOM_TOOLS.FORM.PARAM_NAME.PLACEHOLDER"),class:"col-span-2"},null,8,["modelValue","placeholder"]),v(e.ComboBox,{modelValue:e.type,"onUpdate:modelValue":n[1]||(n[1]=o=>e.type=o),options:e.paramTypeOptions,placeholder:e.t("CAPTAIN.CUSTOM_TOOLS.FORM.PARAM_TYPE.PLACEHOLDER"),class:"[&>div>button]:bg-n-alpha-black2"},null,8,["modelValue","options","placeholder"])]),v(e.Input,{modelValue:e.description,"onUpdate:modelValue":n[2]||(n[2]=o=>e.description=o),placeholder:e.t("CAPTAIN.CUSTOM_TOOLS.FORM.PARAM_DESCRIPTION.PLACEHOLDER")},null,8,["modelValue","placeholder"]),f("label",hxt,[v(e.Checkbox,{modelValue:e.required,"onUpdate:modelValue":n[3]||(n[3]=o=>e.required=o)},null,8,["modelValue"]),f("span",_xt,C(e.t("CAPTAIN.CUSTOM_TOOLS.FORM.PARAM_REQUIRED.LABEL")),1)])]),v(e.Button,{solid:"",slate:"",icon:"i-lucide-trash",class:"flex-shrink-0",onClick:n[4]||(n[4]=Ve(o=>e.emit("remove"),["stop"]))})],2),e.showErrors&&e.validationError?(p(),g("span",gxt,C(e.t(`CAPTAIN.CUSTOM_TOOLS.FORM.ERRORS.${e.validationError}`)),1)):O("v-if",!0)])}const vxt=G(uxt,[["render",bxt],["__file","/app/app/javascript/dashboard/components-next/captain/pageComponents/customTool/ParamRow.vue"]]),Ext={__name:"AuthConfig",props:an({authType:{type:String,required:!0,validator:t=>["none","bearer","basic","api_key"].includes(t)}},{authConfig:{type:Object,default:()=>({})},authConfigModifiers:{}}),emits:["update:authConfig"],setup(t,{expose:n}){n();const a=t,{t:e}=Q(),s=dn(t,"authConfig");je(()=>a.authType,()=>{s.value={}});const r={props:a,t:e,authConfig:s,watch:je,get useI18n(){return Q},Input:sn};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},Sxt={class:"flex flex-col gap-2"};function Txt(t,n,a,e,s,r){return p(),g("div",Sxt,[a.authType==="bearer"?(p(),L(e.Input,{key:0,modelValue:e.authConfig.token,"onUpdate:modelValue":n[0]||(n[0]=o=>e.authConfig.token=o),label:e.t("CAPTAIN.CUSTOM_TOOLS.FORM.AUTH_CONFIG.BEARER_TOKEN"),placeholder:e.t("CAPTAIN.CUSTOM_TOOLS.FORM.AUTH_CONFIG.BEARER_TOKEN_PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):a.authType==="basic"?(p(),g(de,{key:1},[v(e.Input,{modelValue:e.authConfig.username,"onUpdate:modelValue":n[1]||(n[1]=o=>e.authConfig.username=o),label:e.t("CAPTAIN.CUSTOM_TOOLS.FORM.AUTH_CONFIG.USERNAME"),placeholder:e.t("CAPTAIN.CUSTOM_TOOLS.FORM.AUTH_CONFIG.USERNAME_PLACEHOLDER")},null,8,["modelValue","label","placeholder"]),v(e.Input,{modelValue:e.authConfig.password,"onUpdate:modelValue":n[2]||(n[2]=o=>e.authConfig.password=o),type:"password",label:e.t("CAPTAIN.CUSTOM_TOOLS.FORM.AUTH_CONFIG.PASSWORD"),placeholder:e.t("CAPTAIN.CUSTOM_TOOLS.FORM.AUTH_CONFIG.PASSWORD_PLACEHOLDER")},null,8,["modelValue","label","placeholder"])],64)):a.authType==="api_key"?(p(),g(de,{key:2},[v(e.Input,{modelValue:e.authConfig.name,"onUpdate:modelValue":n[3]||(n[3]=o=>e.authConfig.name=o),label:e.t("CAPTAIN.CUSTOM_TOOLS.FORM.AUTH_CONFIG.API_KEY"),placeholder:e.t("CAPTAIN.CUSTOM_TOOLS.FORM.AUTH_CONFIG.API_KEY_PLACEHOLDER")},null,8,["modelValue","label","placeholder"]),v(e.Input,{modelValue:e.authConfig.key,"onUpdate:modelValue":n[4]||(n[4]=o=>e.authConfig.key=o),label:e.t("CAPTAIN.CUSTOM_TOOLS.FORM.AUTH_CONFIG.API_VALUE"),placeholder:e.t("CAPTAIN.CUSTOM_TOOLS.FORM.AUTH_CONFIG.API_VALUE_PLACEHOLDER")},null,8,["modelValue","label","placeholder"])],64)):O("v-if",!0)])}const Axt=G(Ext,[["render",Txt],["__file","/app/app/javascript/dashboard/components-next/captain/pageComponents/customTool/AuthConfig.vue"]]),yxt={__name:"CustomToolForm",props:{mode:{type:String,default:"create",validator:t=>["create","edit"].includes(t)},tool:{type:Object,default:()=>({})}},emits:["submit","cancel"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o={uiFlags:le("captainCustomTools/getUIFlags")},i={title:"",description:"",endpoint_url:"",http_method:"GET",request_template:"",response_template:"",auth_type:"none",auth_config:{},param_schema:[]},l=Lt({...i});je(()=>e.tool,M=>{e.mode==="edit"&&M&&M.id&&(l.title=M.title||"",l.description=M.description||"",l.endpoint_url=M.endpoint_url||"",l.http_method=M.http_method||"GET",l.request_template=M.request_template||"",l.response_template=M.response_template||"",l.auth_type=M.auth_type||"none",l.auth_config=M.auth_config||{},l.param_schema=M.param_schema||[])},{immediate:!0});const c={name:"",type:"string",description:"",required:!1},d={title:{required:Ge},endpoint_url:{required:Ge},http_method:{required:Ge},auth_type:{required:Ge}},u=S(()=>[{value:"GET",label:"GET"},{value:"POST",label:"POST"}]),m=S(()=>[{value:"none",label:r("CAPTAIN.CUSTOM_TOOLS.FORM.AUTH_TYPES.NONE")},{value:"bearer",label:r("CAPTAIN.CUSTOM_TOOLS.FORM.AUTH_TYPES.BEARER")},{value:"basic",label:r("CAPTAIN.CUSTOM_TOOLS.FORM.AUTH_TYPES.BASIC")},{value:"api_key",label:r("CAPTAIN.CUSTOM_TOOLS.FORM.AUTH_TYPES.API_KEY")}]),h=rt(d,l),_=S(()=>e.mode==="edit"?o.uiFlags.value.updatingItem:o.uiFlags.value.creatingItem),E=(M,w)=>h.value[M].$error?r(`CAPTAIN.CUSTOM_TOOLS.FORM.${w}.ERROR`):"",y=S(()=>({title:E("title","TITLE"),endpoint_url:E("endpoint_url","ENDPOINT_URL")})),b=xn("paramsRef"),A=()=>!b.value||b.value.length===0?!0:b.value.every(M=>M.validate()),R={props:e,emit:s,t:r,formState:o,initialState:i,state:l,DEFAULT_PARAM:c,validationRules:d,httpMethodOptions:u,authTypeOptions:m,v$:h,isLoading:_,getErrorMessage:E,formErrors:y,paramsRef:b,isParamsValid:A,removeParam:M=>{l.param_schema.splice(M,1)},addParam:()=>{l.param_schema.push({...c})},handleCancel:()=>s("cancel"),handleSubmit:async()=>{!await h.value.$validate()||!A()||s("submit",l)},reactive:Lt,computed:S,useTemplateRef:xn,watch:je,get useI18n(){return Q},get useVuelidate(){return rt},get required(){return Ge},get useMapGetter(){return le},Input:sn,TextArea:ni,Button:Se,ComboBox:Cr,ParamRow:vxt,AuthConfig:Axt};return Object.defineProperty(R,"__isScriptSetup",{enumerable:!1,value:!0}),R}},Ixt={class:"flex gap-2"},Cxt={class:"flex flex-col gap-1 w-28"},Oxt={class:"mb-0.5 text-sm font-medium text-n-slate-12"},Nxt={class:"flex flex-col gap-1"},xxt={class:"mb-0.5 text-sm font-medium text-n-slate-12"},Rxt={class:"flex flex-col gap-2"},wxt={class:"text-sm font-medium text-n-slate-12"},Mxt={class:"text-xs text-n-slate-11 -mt-1"},Lxt={key:0,class:"grid gap-2 list-none"},Dxt={class:"flex gap-3 justify-between items-center w-full"};function Pxt(t,n,a,e,s,r){return p(),g("form",{class:"flex flex-col px-4 -mx-4 gap-4 max-h-[calc(100vh-200px)] overflow-y-scroll",onSubmit:Ve(e.handleSubmit,["prevent"])},[v(e.Input,{modelValue:e.state.title,"onUpdate:modelValue":n[0]||(n[0]=o=>e.state.title=o),label:e.t("CAPTAIN.CUSTOM_TOOLS.FORM.TITLE.LABEL"),placeholder:e.t("CAPTAIN.CUSTOM_TOOLS.FORM.TITLE.PLACEHOLDER"),message:e.formErrors.title,"message-type":e.formErrors.title?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),v(e.TextArea,{modelValue:e.state.description,"onUpdate:modelValue":n[1]||(n[1]=o=>e.state.description=o),label:e.t("CAPTAIN.CUSTOM_TOOLS.FORM.DESCRIPTION.LABEL"),placeholder:e.t("CAPTAIN.CUSTOM_TOOLS.FORM.DESCRIPTION.PLACEHOLDER"),rows:2},null,8,["modelValue","label","placeholder"]),f("div",Ixt,[f("div",Cxt,[f("label",Oxt,C(e.t("CAPTAIN.CUSTOM_TOOLS.FORM.HTTP_METHOD.LABEL")),1),v(e.ComboBox,{modelValue:e.state.http_method,"onUpdate:modelValue":n[2]||(n[2]=o=>e.state.http_method=o),options:e.httpMethodOptions,class:"[&>div>button]:bg-n-alpha-black2 [&_li]:font-mono [&_button]:font-mono [&>div>button]:outline-offset-[-1px]"},null,8,["modelValue","options"])]),v(e.Input,{modelValue:e.state.endpoint_url,"onUpdate:modelValue":n[3]||(n[3]=o=>e.state.endpoint_url=o),label:e.t("CAPTAIN.CUSTOM_TOOLS.FORM.ENDPOINT_URL.LABEL"),placeholder:e.t("CAPTAIN.CUSTOM_TOOLS.FORM.ENDPOINT_URL.PLACEHOLDER"),message:e.formErrors.endpoint_url,"message-type":e.formErrors.endpoint_url?"error":"info",class:"flex-1"},null,8,["modelValue","label","placeholder","message","message-type"])]),f("div",Nxt,[f("label",xxt,C(e.t("CAPTAIN.CUSTOM_TOOLS.FORM.AUTH_TYPE.LABEL")),1),v(e.ComboBox,{modelValue:e.state.auth_type,"onUpdate:modelValue":n[4]||(n[4]=o=>e.state.auth_type=o),options:e.authTypeOptions,class:"[&>div>button]:bg-n-alpha-black2"},null,8,["modelValue","options"])]),v(e.AuthConfig,{"auth-config":e.state.auth_config,"onUpdate:authConfig":n[5]||(n[5]=o=>e.state.auth_config=o),"auth-type":e.state.auth_type},null,8,["auth-config","auth-type"]),f("div",Rxt,[f("label",wxt,C(e.t("CAPTAIN.CUSTOM_TOOLS.FORM.PARAMETERS.LABEL")),1),f("p",Mxt,C(e.t("CAPTAIN.CUSTOM_TOOLS.FORM.PARAMETERS.HELP_TEXT")),1),e.state.param_schema.length>0?(p(),g("ul",Lxt,[(p(!0),g(de,null,Ae(e.state.param_schema,(o,i)=>(p(),L(e.ParamRow,{key:i,ref_for:!0,ref:"paramsRef",name:o.name,"onUpdate:name":l=>o.name=l,type:o.type,"onUpdate:type":l=>o.type=l,description:o.description,"onUpdate:description":l=>o.description=l,required:o.required,"onUpdate:required":l=>o.required=l,onRemove:l=>e.removeParam(i)},null,8,["name","onUpdate:name","type","onUpdate:type","description","onUpdate:description","required","onUpdate:required","onRemove"]))),128))])):O("v-if",!0),v(e.Button,{type:"button",sm:"",ghost:"",blue:"",icon:"i-lucide-plus",label:e.t("CAPTAIN.CUSTOM_TOOLS.FORM.ADD_PARAMETER"),onClick:e.addParam},null,8,["label"])]),e.state.http_method==="POST"?(p(),L(e.TextArea,{key:0,modelValue:e.state.request_template,"onUpdate:modelValue":n[6]||(n[6]=o=>e.state.request_template=o),label:e.t("CAPTAIN.CUSTOM_TOOLS.FORM.REQUEST_TEMPLATE.LABEL"),placeholder:e.t("CAPTAIN.CUSTOM_TOOLS.FORM.REQUEST_TEMPLATE.PLACEHOLDER"),rows:4,class:"[&_textarea]:font-mono"},null,8,["modelValue","label","placeholder"])):O("v-if",!0),v(e.TextArea,{modelValue:e.state.response_template,"onUpdate:modelValue":n[7]||(n[7]=o=>e.state.response_template=o),label:e.t("CAPTAIN.CUSTOM_TOOLS.FORM.RESPONSE_TEMPLATE.LABEL"),placeholder:e.t("CAPTAIN.CUSTOM_TOOLS.FORM.RESPONSE_TEMPLATE.PLACEHOLDER"),rows:4,class:"[&_textarea]:font-mono"},null,8,["modelValue","label","placeholder"]),f("div",Dxt,[v(e.Button,{type:"button",variant:"faded",color:"slate",label:e.t("CAPTAIN.FORM.CANCEL"),class:"w-full bg-n-alpha-2 text-n-blue-text hover:bg-n-alpha-3",onClick:e.handleCancel},null,8,["label"]),v(e.Button,{type:"submit",label:e.t(a.mode==="edit"?"CAPTAIN.FORM.EDIT":"CAPTAIN.FORM.CREATE"),class:"w-full","is-loading":e.isLoading,disabled:e.isLoading},null,8,["label","is-loading","disabled"])])],32)}const kxt=G(yxt,[["render",Pxt],["__file","/app/app/javascript/dashboard/components-next/captain/pageComponents/customTool/CustomToolForm.vue"]]),Bxt={__name:"CreateCustomToolDialog",props:{selectedTool:{type:Object,default:()=>({})},type:{type:String,default:"create",validator:t=>["create","edit"].includes(t)}},emits:["close"],setup(t,{expose:n,emit:a}){const e=t,s=a,{t:r}=Q(),o=Fe(),i=P(null),l=E=>o.dispatch("captainCustomTools/update",{id:e.selectedTool.id,...E}),c=S(()=>`CAPTAIN.CUSTOM_TOOLS.${e.type.toUpperCase()}`),d=E=>o.dispatch("captainCustomTools/create",E),u=async E=>{try{e.type==="edit"?await l(E):await d(E),Z(r(`${c.value}.SUCCESS_MESSAGE`)),i.value.close()}catch(y){const b=Kr(y)||r(`${c.value}.ERROR_MESSAGE`);Z(b)}},m=()=>{s("close")},h=()=>{i.value.close()};n({dialogRef:i});const _={props:e,emit:s,t:r,store:o,dialogRef:i,updateTool:l,i18nKey:c,createTool:d,handleSubmit:u,handleClose:m,handleCancel:h,ref:P,computed:S,get useStore(){return Fe},get useAlert(){return Z},get useI18n(){return Q},get parseAPIErrorResponse(){return Kr},Dialog:la,CustomToolForm:kxt};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}};function Fxt(t,n,a,e,s,r){return p(),L(e.Dialog,{ref:"dialogRef",width:"2xl",title:t.$t(`${e.i18nKey}.TITLE`),description:t.$t("CAPTAIN.CUSTOM_TOOLS.FORM_DESCRIPTION"),"show-cancel-button":!1,"show-confirm-button":!1,onClose:e.handleClose},{footer:z(()=>n[0]||(n[0]=[])),default:z(()=>[v(e.CustomToolForm,{mode:a.type,tool:a.selectedTool,onSubmit:e.handleSubmit,onCancel:e.handleCancel},null,8,["mode","tool"])]),_:1},8,["title","description"])}const Uxt=G(Bxt,[["render",Fxt],["__file","/app/app/javascript/dashboard/components-next/captain/pageComponents/customTool/CreateCustomToolDialog.vue"]]),$xt={__name:"CustomToolCard",props:{id:{type:Number,required:!0},title:{type:String,required:!0},description:{type:String,default:""},authType:{type:String,default:"none"},updatedAt:{type:Number,required:!0},createdAt:{type:Number,required:!0}},emits:["action"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),[o,i]=$t(),l=S(()=>[{label:r("CAPTAIN.CUSTOM_TOOLS.OPTIONS.EDIT_TOOL"),value:"edit",action:"edit",icon:"i-lucide-pencil-line"},{label:r("CAPTAIN.CUSTOM_TOOLS.OPTIONS.DELETE_TOOL"),value:"delete",action:"delete",icon:"i-lucide-trash"}]),c=S(()=>kn(e.updatedAt||e.createdAt)),d=({action:h,value:_})=>{i(!1),s("action",{action:h,value:_,id:e.id})},u=S(()=>r(`CAPTAIN.CUSTOM_TOOLS.FORM.AUTH_TYPES.${e.authType.toUpperCase()}`)),m={props:e,emit:s,t:r,showActionsDropdown:o,toggleDropdown:i,menuItems:l,timestamp:c,handleAction:d,authTypeLabel:u,computed:S,get useToggle(){return $t},get useI18n(){return Q},get dynamicTime(){return kn},CardLayout:ho,DropdownMenu:ds,Button:Se,Policy:ii};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}},Gxt={class:"flex relative justify-between w-full gap-1"},Vxt={class:"text-base text-n-slate-12 line-clamp-1 font-medium"},Hxt={class:"flex items-center gap-2"},jxt={class:"flex items-center justify-between w-full gap-4"},Wxt={class:"flex items-center gap-3 flex-1"},zxt={key:0,class:"text-sm truncate text-n-slate-11 flex-1"},Yxt={key:1,class:"text-sm shrink-0 text-n-slate-11 inline-flex items-center gap-1"},Kxt={class:"text-sm text-n-slate-11 line-clamp-1 shrink-0"};function Xxt(t,n,a,e,s,r){const o=nt("on-clickaway");return p(),L(e.CardLayout,{class:"relative"},{default:z(()=>[f("div",Gxt,[f("span",Vxt,C(a.title),1),f("div",Hxt,[ce((p(),L(e.Policy,{permissions:["administrator"],class:"relative flex items-center group"},{default:z(()=>[v(e.Button,{icon:"i-lucide-ellipsis-vertical",color:"slate",size:"xs",class:"rounded-md group-hover:bg-n-alpha-2",onClick:n[0]||(n[0]=i=>e.toggleDropdown())}),e.showActionsDropdown?(p(),L(e.DropdownMenu,{key:0,"menu-items":e.menuItems,class:"mt-1 ltr:right-0 rtl:right-0 top-full",onAction:n[1]||(n[1]=i=>e.handleAction(i))},null,8,["menu-items"])):O("v-if",!0)]),_:1})),[[o,()=>e.toggleDropdown(!1)]])])]),f("div",jxt,[f("div",Wxt,[a.description?(p(),g("span",zxt,C(a.description),1)):O("v-if",!0),a.authType!=="none"?(p(),g("span",Yxt,[n[2]||(n[2]=f("i",{class:"i-lucide-lock text-base"},null,-1)),Oe(" "+C(e.authTypeLabel),1)])):O("v-if",!0)]),f("span",Kxt,C(e.timestamp),1)])]),_:1})}const qxt=G($xt,[["render",Xxt],["__file","/app/app/javascript/dashboard/components-next/captain/pageComponents/customTool/CustomToolCard.vue"]]),Zxt={__name:"Index",setup(t,{expose:n}){n();const a=Fe(),e=le("captainCustomTools/getUIFlags"),s=le("captainCustomTools/getRecords"),r=S(()=>e.value.fetchingList),o=le("captainCustomTools/getMeta"),i=P(null),l=P(null),c=P(null),d=P(""),u=(I=1)=>{a.dispatch("captainCustomTools/get",{page:I})},m=I=>u(I),h=()=>{d.value="create",c.value=null,At(()=>i.value.dialogRef.open())},_=I=>{d.value="edit",c.value=I,At(()=>i.value.dialogRef.open())},E=I=>{c.value=I,At(()=>l.value.dialogRef.open())},y=({action:I,id:N})=>{const x=s.value.find(R=>R.id===N);I==="edit"?_(x):I==="delete"&&E(x)},b=()=>{d.value="",c.value=null},A=()=>{c.value=null,s.value.length===1&&o.value.page>1?m(o.value.page-1):u(o.value.page)};Pe(()=>{u()});const T={store:a,uiFlags:e,customTools:s,isFetching:r,customToolsMeta:o,createDialogRef:i,deleteDialogRef:l,selectedTool:c,dialogType:d,fetchCustomTools:u,onPageChange:m,openCreateDialog:h,handleEdit:_,handleDelete:E,handleAction:y,handleDialogClose:b,onDeleteSuccess:A,computed:S,onMounted:Pe,ref:P,nextTick:At,get useMapGetter(){return le},get useStore(){return Fe},get FEATURE_FLAGS(){return pt},PageLayout:ql,CaptainPaywall:bp,CustomToolsPageEmptyState:dxt,CreateCustomToolDialog:Uxt,CustomToolCard:qxt,DeleteDialog:Rd};return Object.defineProperty(T,"__isScriptSetup",{enumerable:!1,value:!0}),T}},Qxt={class:"flex flex-col gap-4"};function Jxt(t,n,a,e,s,r){return p(),g(de,null,[v(e.PageLayout,{"header-title":t.$t("CAPTAIN.CUSTOM_TOOLS.HEADER"),"button-label":t.$t("CAPTAIN.CUSTOM_TOOLS.ADD_NEW"),"button-policy":["administrator"],"total-count":e.customToolsMeta.totalCount,"current-page":e.customToolsMeta.page,"show-pagination-footer":!e.isFetching&&!!e.customTools.length,"is-fetching":e.isFetching,"is-empty":!e.customTools.length,"feature-flag":e.FEATURE_FLAGS.CAPTAIN_V2,"onUpdate:currentPage":e.onPageChange,onClick:e.openCreateDialog},{paywall:z(()=>[v(e.CaptainPaywall)]),emptyState:z(()=>[v(e.CustomToolsPageEmptyState,{onClick:e.openCreateDialog})]),body:z(()=>[f("div",Qxt,[(p(!0),g(de,null,Ae(e.customTools,o=>(p(),L(e.CustomToolCard,{id:o.id,key:o.id,title:o.title,description:o.description,"endpoint-url":o.endpoint_url,"http-method":o.http_method,"auth-type":o.auth_type,"param-schema":o.param_schema,enabled:o.enabled,"created-at":o.created_at,"updated-at":o.updated_at,onAction:e.handleAction},null,8,["id","title","description","endpoint-url","http-method","auth-type","param-schema","enabled","created-at","updated-at"]))),128))])]),_:1},8,["header-title","button-label","total-count","current-page","show-pagination-footer","is-fetching","is-empty","feature-flag"]),e.dialogType?(p(),L(e.CreateCustomToolDialog,{key:0,ref:"createDialogRef",type:e.dialogType,"selected-tool":e.selectedTool,onClose:e.handleDialogClose},null,8,["type","selected-tool"])):O("v-if",!0),e.selectedTool?(p(),L(e.DeleteDialog,{key:1,ref:"deleteDialogRef",entity:e.selectedTool,type:"CustomTools","translation-key":"CUSTOM_TOOLS",onDeleteSuccess:e.onDeleteSuccess},null,8,["entity"])):O("v-if",!0)],64)}const eRt=G(Zxt,[["render",Jxt],["__file","/app/app/javascript/dashboard/routes/dashboard/captain/tools/Index.vue"]]),tRt=[{path:vt("accounts/:accountId/captain/assistants"),component:m0t,name:"captain_assistants_index",meta:{permissions:["administrator","agent"],featureFlag:pt.CAPTAIN,installationTypes:[gn.CLOUD,gn.ENTERPRISE]}},{path:vt("accounts/:accountId/captain/assistants/:assistantId"),component:cCt,name:"captain_assistants_edit",meta:{permissions:["administrator","agent"],featureFlag:pt.CAPTAIN,installationTypes:[gn.CLOUD,gn.ENTERPRISE]}},{path:vt("accounts/:accountId/captain/assistants/:assistantId/inboxes"),component:LCt,name:"captain_assistants_inboxes_index",meta:{permissions:["administrator","agent"],featureFlag:pt.CAPTAIN,installationTypes:[gn.CLOUD,gn.ENTERPRISE]}},{path:vt("accounts/:accountId/captain/assistants/:assistantId/guardrails"),component:fOt,name:"captain_assistants_guardrails_index",meta:{permissions:["administrator","agent"],featureFlag:pt.CAPTAIN,installationTypes:[gn.CLOUD,gn.ENTERPRISE]}},{path:vt("accounts/:accountId/captain/assistants/:assistantId/scenarios"),component:pNt,name:"captain_assistants_scenarios_index",meta:{permissions:["administrator","agent"],featureFlag:pt.CAPTAIN,installationTypes:[gn.CLOUD,gn.ENTERPRISE]}},{path:vt("accounts/:accountId/captain/assistants/:assistantId/guidelines"),component:OOt,name:"captain_assistants_guidelines_index",meta:{permissions:["administrator","agent"],featureFlag:pt.CAPTAIN,installationTypes:[gn.CLOUD,gn.ENTERPRISE]}},{path:vt("accounts/:accountId/captain/documents"),component:A2t,name:"captain_documents_index",meta:{permissions:["administrator","agent"],featureFlag:pt.CAPTAIN,installationTypes:[gn.CLOUD,gn.ENTERPRISE]}},{path:vt("accounts/:accountId/captain/responses"),component:X2t,name:"captain_responses_index",meta:{permissions:["administrator","agent"],featureFlag:pt.CAPTAIN,installationTypes:[gn.CLOUD,gn.ENTERPRISE]}},{path:vt("accounts/:accountId/captain/responses/pending"),component:ixt,name:"captain_responses_pending",meta:{permissions:["administrator","agent"],featureFlag:pt.CAPTAIN,installationTypes:[gn.CLOUD,gn.ENTERPRISE]}},{path:vt("accounts/:accountId/captain/tools"),component:eRt,name:"captain_tools_index",meta:{permissions:["administrator","agent"],featureFlag:pt.CAPTAIN_V2,installationTypes:[gn.CLOUD,gn.ENTERPRISE]}}],CP=Symbol("SidebarControl");function bd(){const t=so(CP,null);if(t===null)throw new Error("Component is missing a parent <Sidebar /> component.");const n=ft(),{shouldShow:a}=uo(),e=l=>{var c;return l&&((c=n.resolve(l))==null?void 0:c.path)||"/"},s=l=>{var c,d;return l?((d=(c=n.resolve(l))==null?void 0:c.meta)==null?void 0:d.permissions)??[]:[]},r=l=>{var c,d;return l&&((d=(c=n.resolve(l))==null?void 0:c.meta)==null?void 0:d.featureFlag)||""},o=l=>{var c,d;return l?((d=(c=n.resolve(l))==null?void 0:c.meta)==null?void 0:d.installationTypes)||[]:[]};return{...t,resolvePath:e,resolvePermissions:s,resolveFeatureFlag:r,isAllowed:l=>{const c=s(l),d=r(l),u=o(l);return a(d,c,u)}}}function qN(t){qn(CP,t)}function ZN(t){const n={$mod:navigator.platform.includes("Mac")?"":"Ctrl",shift:"",alt:"",ctrl:"Ctrl",cmd:"",option:"",enter:"",tab:"",esc:""};return S(()=>t.map(a=>n[a.toLowerCase()]||a).join("").toUpperCase())}function QN(t){const n=lt(),a=ft(),e=o=>n.name===o,s=o=>{e(o)||a.push({name:o})};return jn({"$mod+Slash":{action:()=>t(!0)},"$mod+Escape":{action:()=>t(!1)},"Alt+KeyC":{action:()=>s("home")},"Alt+KeyV":{action:()=>s("contacts_dashboard")},"Alt+KeyR":{action:()=>s("account_overview_reports")},"Alt+KeyS":{action:()=>s("agent_list")}})}const nRt={__name:"SidebarGroupHeader",props:{to:{type:[Object,String],default:""},label:{type:String,default:""},icon:{type:[String,Object],default:""},expandable:{type:Boolean,default:!1},isExpanded:{type:Boolean,default:!1},isActive:{type:Boolean,default:!1},hasActiveChild:{type:Boolean,default:!1},getterKeys:{type:Object,default:()=>({})}},emits:["toggle"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=le(e.getterKeys.badge),o=le(e.getterKeys.count),i=S(()=>o.value>99?"99+":o.value),l={props:e,emit:s,showBadge:r,dynamicCount:o,count:i,computed:S,get useMapGetter(){return le},Icon:Bt};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}},aRt={key:0,class:"relative flex items-center gap-2"},sRt={key:1,class:"size-2 -top-px ltr:-right-px rtl:-left-px bg-n-brand absolute rounded-full border border-n-solid-2"},oRt={class:"flex items-center gap-1.5 flex-grow min-w-0"},rRt={class:"text-sm font-medium leading-5 truncate"};function iRt(t,n,a,e,s,r){return p(),L(Da(a.to?"router-link":"div"),{class:oe(["flex items-center gap-2 px-2 py-1.5 rounded-lg h-8 min-w-0",{"text-n-blue-text bg-n-alpha-2 font-medium":a.isActive&&!a.hasActiveChild,"text-n-slate-12 font-medium":a.hasActiveChild,"text-n-slate-11 hover:bg-n-alpha-2":!a.isActive&&!a.hasActiveChild}]),role:"button",draggable:"false",to:a.to,title:a.label,onClick:n[1]||(n[1]=Ve(o=>e.emit("toggle"),["stop"]))},{default:z(()=>[a.icon?(p(),g("div",aRt,[a.icon?(p(),L(e.Icon,{key:0,icon:a.icon,class:"size-4"},null,8,["icon"])):O("v-if",!0),e.showBadge?(p(),g("span",sRt)):O("v-if",!0)])):O("v-if",!0),f("div",oRt,[f("span",rRt,C(a.label),1),e.dynamicCount&&!a.expandable?(p(),g("span",{key:0,class:oe(["rounded-md capitalize text-xs leading-5 font-medium text-center outline outline-1 px-1 flex-shrink-0",{"text-n-blue-text outline-n-slate-6":a.isActive,"text-n-slate-11 outline-n-strong":!a.isActive}])},C(e.count),3)):O("v-if",!0)]),a.expandable?ce((p(),g("span",{key:1,class:"i-lucide-chevron-up size-3",onClick:n[0]||(n[0]=Ve(o=>e.emit("toggle"),["stop"]))},null,512)),[[En,a.isExpanded]]):O("v-if",!0)]),_:1},8,["to","title","class"])}const lRt=G(nRt,[["render",iRt],["__file","/app/app/javascript/dashboard/components-next/sidebar/SidebarGroupHeader.vue"]]),cRt={__name:"SidebarGroupLeaf",props:{label:{type:String,required:!0},to:{type:[String,Object],required:!0},icon:{type:[String,Object],default:null},active:{type:Boolean,default:!1},component:{type:Function,default:null}},setup(t,{expose:n}){n();const a=t,{resolvePermissions:e,resolveFeatureFlag:s}=bd(),r=S(()=>typeof a.component=="function"||Xb(a.component)),o={props:a,resolvePermissions:e,resolveFeatureFlag:s,shouldRenderComponent:r,isVNode:Xb,computed:S,Icon:Bt,Policy:ii,get useSidebarContext(){return bd}};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},dRt={class:"flex-1 truncate min-w-0"};function uRt(t,n,a,e,s,r){return p(),L(e.Policy,{permissions:e.resolvePermissions(a.to),"feature-flag":e.resolveFeatureFlag(a.to),as:"li",class:"py-0.5 ltr:pl-3 rtl:pr-3 rtl:mr-3 ltr:ml-3 relative text-n-slate-11 child-item before:bg-n-slate-4 after:bg-transparent after:border-n-slate-4 before:left-0 rtl:before:right-0"},{default:z(()=>[(p(),L(Da(a.to?"router-link":"div"),{to:a.to,title:a.label,class:oe(["flex h-8 items-center gap-2 px-2 py-1 rounded-lg max-w-[9.438rem] hover:bg-gradient-to-r from-transparent via-n-slate-3/70 to-n-slate-3/70 group",{"text-n-blue-text bg-n-alpha-2 active":a.active}])},{default:z(()=>[e.shouldRenderComponent?(p(),L(Da(a.component),{key:0,label:a.label,icon:a.icon,active:a.active},null,8,["label","icon","active"])):(p(),g(de,{key:1},[a.icon?(p(),L(e.Icon,{key:0,icon:a.icon,class:"size-4 inline-block"},null,8,["icon"])):O("v-if",!0),f("div",dRt,C(a.label),1)],64))]),_:1},8,["to","title","class"]))]),_:1},8,["permissions","feature-flag"])}const OP=G(cRt,[["render",uRt],["__file","/app/app/javascript/dashboard/components-next/sidebar/SidebarGroupLeaf.vue"]]),pRt={__name:"SidebarGroupSeparator",props:{label:{type:String,default:""},icon:{type:String,default:""}},setup(t,{expose:n}){n();const a={Icon:Bt};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},fRt={class:"flex items-center gap-2 px-2 py-1.5 rounded-lg h-8 text-n-slate-10 select-none pointer-events-none"},mRt={class:"text-sm font-medium leading-5 flex-grow"};function hRt(t,n,a,e,s,r){return p(),g("div",fRt,[a.icon?(p(),L(e.Icon,{key:0,icon:a.icon,class:"size-4"},null,8,["icon"])):O("v-if",!0),f("span",mRt,C(a.label),1)])}const _Rt=G(pRt,[["render",hRt],["__file","/app/app/javascript/dashboard/components-next/sidebar/SidebarGroupSeparator.vue"]]),gRt={__name:"SidebarSubGroup",props:{isExpanded:{type:Boolean,default:!1},label:{type:String,required:!0},icon:{type:[Object,String],required:!0},children:{type:Array,default:void 0},activeChild:{type:Object,default:void 0}},setup(t,{expose:n}){n();const a=t,{isAllowed:e}=bd(),s=P(null),r=S(()=>a.children.filter(d=>d.to&&e(d.to))),o=S(()=>r.value.length>0),i=S(()=>r.value.length>7),l=P(!1);pr(s,"scroll",()=>{const{scrollHeight:d,scrollTop:u,clientHeight:m}=s.value;l.value=d-u===m});const c={props:a,isAllowed:e,scrollableContainer:s,accessibleItems:r,hasAccessibleItems:o,isScrollable:i,scrollEnd:l,computed:S,ref:P,SidebarGroupLeaf:OP,SidebarGroupSeparator:_Rt,get useSidebarContext(){return bd},get useEventListener(){return pr}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}},bRt={key:1,class:"m-0 list-none reset-base relative group"},vRt={key:0,class:"absolute bg-gradient-to-t from-n-solid-2 w-full h-12 to-transparent -bottom-1 pointer-events-none flex items-end justify-end px-2 animate-fade-in-up"};function ERt(t,n,a,e,s,r){return p(),g(de,null,[e.hasAccessibleItems?ce((p(),L(e.SidebarGroupSeparator,{key:0,label:a.label,icon:a.icon,class:"my-1"},null,8,["label","icon"])),[[En,a.isExpanded]]):O("v-if",!0),a.children.length?(p(),g("ul",bRt,[O(` Each element has h-8, which is 32px, we will show 7 items with one hidden at the end,
    which is 14rem. Then we add 16px so that we have some text visible from the next item  `),f("div",{ref:"scrollableContainer",class:oe({"max-h-[calc(14rem+16px)] overflow-y-scroll no-scrollbar":e.isScrollable})},[(p(!0),g(de,null,Ae(a.children,o=>{var i,l;return ce((p(),L(e.SidebarGroupLeaf,Ta({ref_for:!0},o,{key:o.name,active:((i=a.activeChild)==null?void 0:i.name)===o.name}),null,16,["active"])),[[En,a.isExpanded||((l=a.activeChild)==null?void 0:l.name)===o.name]])}),128))],2),e.isScrollable&&a.isExpanded?ce((p(),g("div",vRt,n[0]||(n[0]=[f("svg",{width:"16",height:"24",viewBox:"0 0 16 24",fill:"none",class:"text-n-slate-9 opacity-50 group-hover:opacity-100",xmlns:"http://www.w3.org/2000/svg"},[f("path",{d:"M4 4L8 8L12 4",stroke:"currentColor",opacity:"0.5","stroke-width":"1.33333","stroke-linecap":"round","stroke-linejoin":"round"}),f("path",{d:"M4 10L8 14L12 10",stroke:"currentColor",opacity:"0.75","stroke-width":"1.33333","stroke-linecap":"round","stroke-linejoin":"round"}),f("path",{d:"M4 16L8 20L12 16",stroke:"currentColor","stroke-width":"1.33333","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]),512)),[[En,!e.scrollEnd]]):O("v-if",!0)])):O("v-if",!0)],64)}const SRt=G(gRt,[["render",ERt],["__file","/app/app/javascript/dashboard/components-next/sidebar/SidebarSubGroup.vue"]]),TRt={__name:"SidebarGroupEmptyLeaf",setup(t,{expose:n}){n();const{t:a}=Q(),e={t:a,get useI18n(){return Q}};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}},ARt={class:"py-1 pl-3 text-n-slate-10 border rounded-lg border-dashed text-center border-n-alpha-2 text-xs h-8 grid place-content-center select-none pointer-events-none"};function yRt(t,n,a,e,s,r){return p(),g("li",ARt,[qe(t.$slots,"default",{},()=>[Oe(C(e.t("SIDEBAR.NO_ITEMS")),1)])])}const IRt=G(TRt,[["render",yRt],["__file","/app/app/javascript/dashboard/components-next/sidebar/SidebarGroupEmptyLeaf.vue"]]),CRt={__name:"SidebarGroup",props:{name:{type:String,required:!0},label:{type:String,required:!0},icon:{type:[String,Object,Function],default:null},to:{type:Object,default:null},activeOn:{type:Array,default:()=>[]},children:{type:Array,default:void 0},getterKeys:{type:Object,default:()=>({})}},setup(t,{expose:n}){n();const a=t,{expandedItem:e,setExpandedItem:s,resolvePath:r,resolvePermissions:o,resolveFeatureFlag:i,isAllowed:l}=bd(),c=S(()=>{var x;return((x=a.children)==null?void 0:x.flatMap(R=>R.children||R))||[]}),d=lt(),u=ft(),m=S(()=>e.value===a.name),h=S(()=>a.children),_=S(()=>Array.isArray(a.children)&&a.children.length>0),E=S(()=>_.value?a.children.filter(x=>x.to&&l(x.to)):[]),y=S(()=>E.value.length>0),b=S(()=>a.to?d.path===r(a.to)?!0:a.activeOn.includes(d.name):!1),A=S(()=>{const x=c.value.find(M=>M.to&&d.path===r(M.to));if(x)return x;const R=c.value.filter(M=>{var w;return(w=M.activeOn)==null?void 0:w.includes(d.name)});return R.length>0?R.find(w=>Object.keys(w.to.params).map(D=>String(w.to.params[D])===String(d.params[D])).every(D=>D))??R[0]:c.value.find(M=>M.to&&d.path.startsWith(r(M.to)))}),T=S(()=>A.value!==void 0),I=()=>{if(y.value&&!m.value&&!T.value){const x=E.value[0];u.push(x.to)}s(a.name)};Pe(async()=>{await At(),T.value&&s(a.name)});const N={props:a,expandedItem:e,setExpandedItem:s,resolvePath:r,resolvePermissions:o,resolveFeatureFlag:i,isAllowed:l,navigableChildren:c,route:d,router:u,isExpanded:m,isExpandable:h,hasChildren:_,accessibleItems:E,hasAccessibleChildren:y,isActive:b,activeChild:A,hasActiveChild:T,toggleTrigger:I,computed:S,onMounted:Pe,nextTick:At,get useSidebarContext(){return bd},get useRoute(){return lt},get useRouter(){return ft},Policy:ii,SidebarGroupHeader:lRt,SidebarGroupLeaf:OP,SidebarSubGroup:SRt,SidebarGroupEmptyLeaf:IRt};return Object.defineProperty(N,"__isScriptSetup",{enumerable:!1,value:!0}),N}},ORt={key:0,class:"grid m-0 list-none sidebar-group-children"},NRt={key:1};function xRt(t,n,a,e,s,r){return!e.hasChildren||e.hasAccessibleChildren?(p(),L(e.Policy,{key:0,permissions:e.resolvePermissions(a.to),"feature-flag":e.resolveFeatureFlag(a.to),as:"li",class:"grid gap-1 text-sm cursor-pointer select-none"},{default:z(()=>[v(e.SidebarGroupHeader,{icon:a.icon,name:a.name,label:a.label,to:a.to,"getter-keys":a.getterKeys,"is-active":e.isActive,"has-active-child":e.hasActiveChild,expandable:e.hasChildren,"is-expanded":e.isExpanded,onToggle:e.toggleTrigger},null,8,["icon","name","label","to","getter-keys","is-active","has-active-child","expandable","is-expanded"]),e.hasChildren?ce((p(),g("ul",ORt,[(p(!0),g(de,null,Ae(a.children,o=>{var i,l;return p(),g(de,{key:o.name},[o.children?(p(),L(e.SidebarSubGroup,{key:0,label:o.label,icon:o.icon,children:o.children,"is-expanded":e.isExpanded,"active-child":e.activeChild},null,8,["label","icon","children","is-expanded","active-child"])):e.isAllowed(o.to)?ce((p(),L(e.SidebarGroupLeaf,Ta({key:1,ref_for:!0},o,{active:((i=e.activeChild)==null?void 0:i.name)===o.name}),null,16,["active"])),[[En,e.isExpanded||((l=e.activeChild)==null?void 0:l.name)===o.name]]):O("v-if",!0)],64)}),128))],512)),[[En,e.isExpanded||e.hasActiveChild]]):e.isExpandable&&e.isExpanded?(p(),g("ul",NRt,[v(e.SidebarGroupEmptyLeaf)])):O("v-if",!0)]),_:1},8,["permissions","feature-flag"])):O("v-if",!0)}const RRt=G(CRt,[["render",xRt],["__file","/app/app/javascript/dashboard/components-next/sidebar/SidebarGroup.vue"]]),wRt={},MRt={class:"h-0 border-b border-n-strong -mx-2"};function LRt(t,n){return p(),g("div",MRt)}const DRt=G(wRt,[["render",LRt],["__file","/app/app/javascript/dashboard/components-next/dropdown-menu/base/DropdownSeparator.vue"]]),PRt={__name:"SidebarProfileMenuStatus",setup(t,{expose:n}){n();const{t:a}=Q(),e=Fe(),s=le("getCurrentUserAvailability"),r=le("getCurrentAccountId"),o=le("getCurrentUserAutoOffline"),{isImpersonating:i}=Dv(),{AVAILABILITY_STATUS_KEYS:l}=gt,c=S(()=>[a("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.ONLINE"),a("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.BUSY"),a("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.OFFLINE")]),d=["bg-n-teal-9","bg-n-amber-9","bg-n-slate-9"],u=S(()=>c.value.map((y,b)=>({label:y,value:l[b],color:d[b],icon:pn("span",{class:[d[b],"size-[12px] rounded"]}),active:s.value===l[b]}))),m=S(()=>u.value.find(y=>y.active)),h=S({get:()=>o.value,set:y=>{e.dispatch("updateAutoOffline",{accountId:r.value,autoOffline:y})}});function _(y){if(i.value){Z(a("PROFILE_SETTINGS.FORM.AVAILABILITY.IMPERSONATING_ERROR"));return}try{e.dispatch("updateAvailability",{availability:y,account_id:r.value})}catch{Z(a("PROFILE_SETTINGS.FORM.AVAILABILITY.SET_AVAILABILITY_ERROR"))}}const E={t:a,store:e,currentUserAvailability:s,currentAccountId:r,currentUserAutoOffline:o,isImpersonating:i,AVAILABILITY_STATUS_KEYS:l,statusList:c,statusColors:d,availabilityStatuses:u,activeStatus:m,autoOfflineToggle:h,changeAvailabilityStatus:_,computed:S,h:pn,get useMapGetter(){return le},get useStore(){return Fe},get wootConstants(){return gt},get useAlert(){return Z},get useI18n(){return Q},get useImpersonation(){return Dv},get DropdownContainer(){return Yl},get DropdownBody(){return Kl},get DropdownSection(){return Td},get DropdownItem(){return Xi},Icon:Bt,Button:Se,ToggleSwitch:mo};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}},kRt={class:"grid gap-0"},BRt={class:"flex-grow flex items-center gap-1"},FRt={class:"flex gap-1 items-center flex-grow text-sm"},URt={class:"p-1 flex-shrink-0"},$Rt={class:"flex-grow flex items-center gap-1"};function GRt(t,n,a,e,s,r){const o=nt("tooltip");return p(),L(e.DropdownSection,{class:"[&>ul]:overflow-visible"},{default:z(()=>[f("div",kRt,[v(e.DropdownItem,{"preserve-open":""},{default:z(()=>[f("div",BRt,C(t.$t("SIDEBAR.SET_YOUR_AVAILABILITY")),1),v(e.DropdownContainer,null,{trigger:z(({toggle:i})=>[v(e.Button,{size:"sm",color:"slate",variant:"faded",class:"min-w-[96px]",icon:"i-lucide-chevron-down","trailing-icon":"",onClick:i},{default:z(()=>[f("div",FRt,[f("div",URt,[f("div",{class:oe(["size-2 rounded-sm",e.activeStatus.color])},null,2)]),f("span",null,C(e.activeStatus.label),1)])]),_:2},1032,["onClick"])]),default:z(()=>[v(e.DropdownBody,{class:"min-w-32 z-20"},{default:z(()=>[(p(!0),g(de,null,Ae(e.availabilityStatuses,i=>(p(),L(e.DropdownItem,{key:i.value,label:i.label,icon:i.icon,class:"cursor-pointer",onClick:l=>e.changeAvailabilityStatus(i.value)},null,8,["label","icon","onClick"]))),128))]),_:1})]),_:1})]),_:1}),v(e.DropdownItem,null,{default:z(()=>[f("div",$Rt,[Oe(C(t.$t("SIDEBAR.SET_AUTO_OFFLINE.TEXT"))+" ",1),ce(v(e.Icon,{icon:"i-lucide-info",class:"size-4 text-n-slate-10"},null,512),[[o,t.$t("SIDEBAR.SET_AUTO_OFFLINE.INFO_SHORT"),void 0,{top:!0}]])]),v(e.ToggleSwitch,{modelValue:e.autoOfflineToggle,"onUpdate:modelValue":n[0]||(n[0]=i=>e.autoOfflineToggle=i)},null,8,["modelValue"])]),_:1})])]),_:1})}const VRt=G(PRt,[["render",GRt],["__file","/app/app/javascript/dashboard/components-next/sidebar/SidebarProfileMenuStatus.vue"]]),HRt=Object.assign({inheritAttrs:!1},{__name:"SidebarProfileMenu",emits:["close","openKeyShortcutModal"],setup(t,{expose:n,emit:a}){n();const e=a,{t:s}=Q(),r=le("getCurrentUser"),o=le("getCurrentUserAvailability"),i=le("getCurrentAccountId"),l=le("globalConfig/get"),c=le("accounts/isFeatureEnabledonAccount"),d=S(()=>c.value(i.value,pt.CONTACT_CHATWOOT_SUPPORT_TEAM)&&l.value.chatwootInboxToken),u=S(()=>[{show:d.value,showOnCustomBrandedInstance:!1,label:s("SIDEBAR_ITEMS.CONTACT_SUPPORT"),icon:"i-lucide-life-buoy",click:()=>{window.$chatwoot.toggle()}},{show:!0,showOnCustomBrandedInstance:!0,label:s("SIDEBAR_ITEMS.KEYBOARD_SHORTCUTS"),icon:"i-lucide-keyboard",click:()=>{e("openKeyShortcutModal")}},{show:!0,showOnCustomBrandedInstance:!0,label:s("SIDEBAR_ITEMS.PROFILE_SETTINGS"),icon:"i-lucide-user-pen",link:{name:"profile_settings_index"}},{show:!0,showOnCustomBrandedInstance:!0,label:s("SIDEBAR_ITEMS.APPEARANCE"),icon:"i-lucide-palette",click:()=>{document.querySelector("ninja-keys").open({parent:"appearance_settings"})}},{show:!0,showOnCustomBrandedInstance:!1,label:s("SIDEBAR_ITEMS.DOCS"),icon:"i-lucide-book",link:"https://www.chatwoot.com/hc/user-guide/en",nativeLink:!0,target:"_blank"},{show:!0,showOnCustomBrandedInstance:!1,label:s("SIDEBAR_ITEMS.CHANGELOG"),icon:"i-lucide-scroll-text",link:"https://www.chatwoot.com/changelog/",nativeLink:!0,target:"_blank"},{show:r.value.type==="SuperAdmin",showOnCustomBrandedInstance:!0,label:s("SIDEBAR_ITEMS.SUPER_ADMIN_CONSOLE"),icon:"i-lucide-castle",link:"/super_admin",nativeLink:!0,target:"_blank"},{show:!0,showOnCustomBrandedInstance:!0,label:s("SIDEBAR_ITEMS.LOGOUT"),icon:"i-lucide-power",click:Pi.logout}]),m=S(()=>u.value.filter(_=>_.show)),h={emit:e,t:s,currentUser:r,currentUserAvailability:o,accountId:i,globalConfig:l,isFeatureEnabledonAccount:c,showChatSupport:d,menuItems:u,allowedMenuItems:m,computed:S,get Auth(){return Pi},get useMapGetter(){return le},get useI18n(){return Q},Avatar:qt,SidebarProfileMenuStatus:VRt,get FEATURE_FLAGS(){return pt},get DropdownContainer(){return Yl},get DropdownBody(){return Kl},get DropdownSeparator(){return DRt},get DropdownItem(){return Xi},CustomBrandPolicyWrapper:ww};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),jRt=["onClick"],WRt={class:"min-w-0"},zRt={class:"text-sm font-medium leading-4 truncate text-n-slate-12"},YRt={class:"text-xs truncate text-n-slate-11"};function KRt(t,n,a,e,s,r){return p(),L(e.DropdownContainer,{class:"relative w-full min-w-0",onClose:n[0]||(n[0]=o=>e.emit("close"))},{trigger:z(({toggle:o,isOpen:i})=>[f("button",{class:oe(["flex gap-2 items-center p-1 w-full text-left rounded-lg cursor-pointer hover:bg-n-alpha-1",{"bg-n-alpha-1":i}]),onClick:o},[v(e.Avatar,{size:32,name:e.currentUser.available_name,src:e.currentUser.avatar_url,status:e.currentUserAvailability,class:"flex-shrink-0","rounded-full":""},null,8,["name","src","status"]),f("div",WRt,[f("div",zRt,C(e.currentUser.available_name),1),f("div",YRt,C(e.currentUser.email),1)])],10,jRt)]),default:z(()=>[v(e.DropdownBody,{class:"bottom-12 z-50 mb-2 w-80 ltr:left-0 rtl:right-0"},{default:z(()=>[v(e.SidebarProfileMenuStatus),v(e.DropdownSeparator),(p(!0),g(de,null,Ae(e.allowedMenuItems,o=>(p(),L(e.CustomBrandPolicyWrapper,{key:o.label,"show-on-custom-branded-instance":o.showOnCustomBrandedInstance},{default:z(()=>[o.show?(p(),L(e.DropdownItem,Ta({key:0,ref_for:!0},o),null,16)):O("v-if",!0)]),_:2},1032,["show-on-custom-branded-instance"]))),128))]),_:1})]),_:1})}const XRt=G(HRt,[["render",KRt],["__file","/app/app/javascript/dashboard/components-next/sidebar/SidebarProfileMenu.vue"]]),qRt={__name:"StackedChangelogCard",props:{card:{type:Object,required:!0},isActive:{type:Boolean,default:!1},isDismissing:{type:Boolean,default:!1}},emits:["readMore","dismiss","imgClick"],setup(t,{expose:n,emit:a}){n();const e=a,i={emit:e,handleReadMore:()=>{e("readMore")},handleDismiss:()=>{e("dismiss")},handleImgClick:()=>{e("imgClick")},Button:Se};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}},ZRt=["title"],QRt=["title"],JRt={key:0,class:"block overflow-hidden my-3 rounded-md border border-n-weak/40"},ewt=["src","alt"],twt={key:1,class:"block overflow-hidden my-3 rounded-md border border-n-weak/40"},nwt=["src","alt"],awt={class:"flex justify-between items-center mt-1"};function swt(t,n,a,e,s,r){return p(),g("div",{"data-testid":"changelog-card",class:oe(["flex flex-col justify-between p-3 w-full rounded-lg border shadow-sm transition-all duration-200 border-n-weak bg-n-background text-n-slate-12",{"animate-fade-out pointer-events-none":a.isDismissing,"hover:shadow":a.isActive}])},[f("div",null,[f("h5",{title:a.card.meta_title,class:"mb-1 text-sm font-semibold line-clamp-1 text-n-slate-12"},C(a.card.meta_title),9,ZRt),f("p",{title:a.card.meta_description,class:"mb-0 text-xs leading-relaxed text-n-slate-11 line-clamp-2"},C(a.card.meta_description),9,QRt)]),a.card.feature_image?(p(),g("div",JRt,[f("img",{src:a.card.feature_image,alt:`${a.card.title} preview image`,class:"object-cover w-full h-24 rounded-md cursor-pointer",loading:"lazy",onClick:Ve(e.handleImgClick,["stop"])},null,8,ewt)])):(p(),g("div",twt,[f("img",{src:a.card.feature_image,alt:`${a.card.title} preview image`,class:"object-cover w-full h-24 rounded-md cursor-pointer",loading:"lazy",onClick:Ve(e.handleImgClick,["stop"])},null,8,nwt)])),f("div",awt,[v(e.Button,{label:"Read more",color:"slate",link:"",sm:"",class:"text-xs font-normal hover:!no-underline",onClick:Ve(e.handleReadMore,["stop"])}),v(e.Button,{label:"Dismiss",color:"slate",link:"",sm:"",class:"text-xs font-normal hover:!no-underline",onClick:Ve(e.handleDismiss,["stop"])})])],2)}const owt=G(qRt,[["render",swt],["__scopeId","data-v-10008255"],["__file","/app/app/javascript/dashboard/components-next/changelog-card/StackedChangelogCard.vue"]]),rwt={__name:"GroupedStackedChangelogCard",props:{posts:{type:Array,required:!0},currentIndex:{type:Number,default:0},dismissingSlugs:{type:Array,default:()=>[]}},emits:["readMore","dismiss","imgClick"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,r=S(()=>{var m;return(m=e.posts)==null?void 0:m.slice(0,5)}),o=m=>e.dismissingSlugs.includes(m.slug),u={props:e,emit:s,stackedPosts:r,isPostDismissing:o,handleReadMore:m=>s("readMore",m.slug),handleDismiss:m=>s("dismiss",m.slug),handlePostClick:(m,h)=>{h===e.currentIndex&&!o(m)&&s("imgClick",{slug:m.slug,index:h})},getCardClasses:m=>{const h=(m-e.currentIndex+r.value.length)%r.value.length,_="relative transition-all duration-500 ease-out col-start-1 row-start-1",E=["z-50 scale-100 translate-y-0 opacity-100","z-40 scale-[0.95] -translate-y-3 opacity-90","z-30 scale-[0.9] -translate-y-6 opacity-70","z-20 scale-[0.85] -translate-y-9 opacity-50","z-10 scale-[0.8] -translate-y-12 opacity-30"];return h<E.length?`${_} ${E[h]}`:`${_} opacity-0 scale-75 -translate-y-16`},computed:S,StackedChangelogCard:owt};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}},iwt={class:"overflow-hidden"},lwt={class:"relative grid grid-cols-1 pt-8 pb-1 px-2"};function cwt(t,n,a,e,s,r){return p(),g("div",iwt,[f("div",lwt,[(p(!0),g(de,null,Ae(e.stackedPosts,(o,i)=>(p(),g("div",{key:o.slug||i,class:oe(e.getCardClasses(i))},[v(e.StackedChangelogCard,{card:o,"is-active":i===a.currentIndex,"is-dismissing":e.isPostDismissing(o),onReadMore:l=>e.handleReadMore(o),onDismiss:l=>e.handleDismiss(o),onImgClick:l=>e.handlePostClick(o,i)},null,8,["card","is-active","is-dismissing","onReadMore","onDismiss","onImgClick"])],2))),128))])])}const dwt=G(rwt,[["render",cwt],["__file","/app/app/javascript/dashboard/components-next/changelog-card/GroupedStackedChangelogCard.vue"]]);class uwt extends Xs{constructor(){super("changelog",{apiVersion:"v1"})}fetchFromHub(){return h2.get(jet)}}const JN=new uwt,e2=5,pwt={__name:"SidebarChangelogCard",setup(t,{expose:n}){n();const{uiSettings:a,updateUISettings:e}=Ct(),s=P([]),r=P(0),o=P([]),i=P(!1),l=S(()=>a.value.changelog_dismissed_slugs||[]),c=S(()=>s.value.filter(y=>!l.value.includes(y.slug))),d=async()=>{i.value=!0;try{const y=await JN.fetchFromHub();s.value=y.data.posts||[];const b=s.value.map(T=>T.slug),A=l.value.filter(T=>b.includes(T));A.length!==l.value.length&&e({changelog_dismissed_slugs:A})}catch{}finally{i.value=!1}},u=y=>{const b=[...l.value];b.includes(y)||(b.push(y),b.length>e2&&b.shift(),e({changelog_dismissed_slugs:b}))},m=y=>{o.value.push(y),setTimeout(()=>{u(y),o.value=o.value.filter(b=>b!==y),r.value>=c.value.length&&(r.value=0)},200)},h=()=>{const y=c.value[r.value];y!=null&&y.slug&&window.open(`https://www.chatwoot.com/blog/${y.slug}`,"_blank")},_=({index:y})=>{r.value=y,h()};Pe(()=>{d()});const E={MAX_DISMISSED_SLUGS:e2,uiSettings:a,updateUISettings:e,posts:s,currentIndex:r,dismissingCards:o,isLoading:i,dismissedSlugs:l,unDismissedPosts:c,fetchChangelog:d,dismissPost:u,handleDismiss:m,handleReadMore:h,handleImgClick:_,ref:P,computed:S,onMounted:Pe,GroupedStackedChangelogCard:dwt,get useUISettings(){return Ct},get changelogAPI(){return JN}};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}};function fwt(t,n,a,e,s,r){return e.unDismissedPosts.length>0?(p(),L(e.GroupedStackedChangelogCard,{key:0,posts:e.unDismissedPosts,"current-index":e.currentIndex,"dismissing-slugs":e.dismissingCards,class:"min-h-[240px] z-10",onReadMore:e.handleReadMore,onDismiss:e.handleDismiss,onImgClick:e.handleImgClick},null,8,["posts","current-index","dismissing-slugs"])):(p(),g(de,{key:1},[],64))}const mwt=G(pwt,[["render",fwt],["__file","/app/app/javascript/dashboard/components-next/sidebar/SidebarChangelogCard.vue"]]),hwt={__name:"ChannelLeaf",props:{label:{type:String,required:!0},active:{type:Boolean,default:!1},inbox:{type:Object,required:!0}},setup(t,{expose:n}){n();const a=t,e=S(()=>a.inbox.reauthorization_required),s={props:a,reauthorizationRequired:e,computed:S,Icon:Bt,ChannelIcon:hE};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}},_wt={class:"flex-1 truncate min-w-0"},gwt={key:0,class:"grid place-content-center size-5 bg-n-ruby-5/60 rounded-full"};function bwt(t,n,a,e,s,r){const o=nt("tooltip");return p(),g(de,null,[f("span",{class:oe(["size-5 grid place-content-center rounded-full bg-n-alpha-2",{"bg-n-solid-blue":a.active}])},[v(e.ChannelIcon,{inbox:a.inbox,class:"size-3"},null,8,["inbox"])],2),f("div",_wt,C(a.label),1),e.reauthorizationRequired?ce((p(),g("div",gwt,[v(e.Icon,{icon:"i-woot-alert",class:"size-3 text-n-ruby-9"})])),[[o,t.$t("SIDEBAR.REAUTHORIZE"),void 0,{"top-end":!0}]]):O("v-if",!0)],64)}const t2=G(hwt,[["render",bwt],["__file","/app/app/javascript/dashboard/components-next/sidebar/ChannelLeaf.vue"]]),vwt={__name:"SidebarAccountSwitcher",emits:["showCreateAccountModal"],setup(t,{expose:n,emit:a}){n();const e=a,{t:s}=Q(),{accountId:r,currentAccount:o}=Ut(),i=le("getCurrentUser"),l=le("globalConfig/get"),c=le("getUserAccounts"),d=S(()=>c.value.length>1&&o.value.name),u=S(()=>[...i.value.accounts||[]].sort((E,y)=>E.name.localeCompare(y.name))),_={emit:e,t:s,accountId:r,currentAccount:o,currentUser:i,globalConfig:l,userAccounts:c,showAccountSwitcher:d,sortedCurrentUserAccounts:u,onChangeAccount:E=>{const y=`/app/accounts/${E}/dashboard`;window.location.href=y},emitNewAccount:()=>{e("showCreateAccountModal")},computed:S,get useAccount(){return Ut},get useMapGetter(){return le},get useI18n(){return Q},ButtonNext:Se,Icon:Bt,get DropdownContainer(){return Yl},get DropdownBody(){return Kl},get DropdownSection(){return Td},get DropdownItem(){return Xi}};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}},Ewt=["data-account-id","onClick"],Swt={class:"text-sm font-medium leading-5 text-n-slate-12 truncate","aria-live":"polite"},Twt={key:0,"aria-hidden":"true",class:"i-lucide-chevron-down size-4 text-n-slate-10 flex-shrink-0"},Awt=["for"],ywt=["title"],Iwt=["title"];function Cwt(t,n,a,e,s,r){return p(),L(e.DropdownContainer,null,{trigger:z(({toggle:o,isOpen:i})=>[f("button",{id:"sidebar-account-switcher","data-account-id":e.accountId,"aria-haspopup":"listbox","aria-controls":"account-options",class:oe(["flex items-center gap-2 justify-between w-full rounded-lg px-2",[i&&"bg-n-alpha-1",e.showAccountSwitcher?"hover:bg-n-alpha-1 cursor-pointer":"cursor-default"]]),onClick:()=>e.showAccountSwitcher&&o()},[f("span",Swt,C(e.currentAccount.name),1),e.showAccountSwitcher?(p(),g("span",Twt)):O("v-if",!0)],10,Ewt)]),default:z(()=>[e.showAccountSwitcher?(p(),L(e.DropdownBody,{key:0,class:"min-w-80 z-50"},{default:z(()=>[v(e.DropdownSection,{title:e.t("SIDEBAR_ITEMS.SWITCH_ACCOUNT")},{default:z(()=>[(p(!0),g(de,null,Ae(e.sortedCurrentUserAccounts,o=>(p(),L(e.DropdownItem,{id:`account-${o.id}`,key:o.id,class:"cursor-pointer",onClick:i=>e.onChangeAccount(o.id)},{label:z(()=>[f("div",{for:o.name,class:"text-left rtl:text-right flex gap-2 items-center"},[f("span",{class:"text-n-slate-12 max-w-36 truncate min-w-0",title:o.name},C(o.name),9,ywt),n[0]||(n[0]=f("div",{class:"flex-shrink-0 w-px h-3 bg-n-strong"},null,-1)),f("span",{class:"text-n-slate-11 max-w-24 truncate capitalize",title:o.name},C(o.custom_role_id?o.custom_role.name:o.role),9,Iwt)],8,Awt),ce(v(e.Icon,{icon:"i-lucide-check",class:"text-n-teal-11 size-5"},null,512),[[En,o.id===e.accountId]])]),_:2},1032,["id","onClick"]))),128))]),_:1},8,["title"]),e.globalConfig.createNewAccountFromDashboard?(p(),L(e.DropdownItem,{key:0},{default:z(()=>[v(e.ButtonNext,{color:"slate",variant:"faded",class:"w-full",size:"sm",onClick:e.emitNewAccount},{default:z(()=>[Oe(C(e.t("CREATE_ACCOUNT.NEW_ACCOUNT")),1)]),_:1})]),_:1})):O("v-if",!0)]),_:1})):O("v-if",!0)]),_:1})}const Owt=G(vwt,[["render",Cwt],["__file","/app/app/javascript/dashboard/components-next/sidebar/SidebarAccountSwitcher.vue"]]),Nwt={__name:"Logo",setup(t,{expose:n}){n();const a=Wc(),e=le("globalConfig/get"),s={attrs:a,globalConfig:e,useAttrs:Wc,get useMapGetter(){return le}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}},xwt=["src"];function Rwt(t,n,a,e,s,r){return e.globalConfig.logoThumbnail?(p(),g("img",Ta({key:0},e.attrs,{src:e.globalConfig.logoThumbnail}),null,16,xwt)):(p(),g("svg",Ta({key:1},e.attrs,{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),n[0]||(n[0]=[Ac('<g clip-path="url(#woot-logo-clip-2342424e23u32098)"><path d="M8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z" fill="#2781F6"></path><path d="M11.4172 11.4172H7.70831C5.66383 11.4172 4 9.75328 4 7.70828C4 5.66394 5.66383 4 7.70835 4C9.75339 4 11.4172 5.66394 11.4172 7.70828V11.4172Z" fill="white" stroke="white" stroke-width="0.1875"></path></g><defs><clipPath id="woot-logo-clip-2342424e23u32098"><rect width="16" height="16" fill="white"></rect></clipPath></defs>',2)]),16))}const wwt=G(Nwt,[["render",Rwt],["__file","/app/app/javascript/dashboard/components-next/icon/Logo.vue"]]),Mwt={__name:"Sidebar",props:{isMobileSidebarOpen:{type:Boolean,default:!1}},emits:["closeKeyShortcutModal","openKeyShortcutModal","showCreateAccountModal","closeMobileSidebar"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{accountScopedRoute:r,isOnChatwootCloud:o}=Ut(),i=Bn(),l=ZN(["$mod","k"]),{t:c}=Q(),d=le("globalConfig/isACustomBrandedInstance"),u=w=>{s(w?"openKeyShortcutModal":"closeKeyShortcutModal")};QN(u);const m=BT("next-sidebar-expanded-item",null,sessionStorage),h=w=>{m.value=m.value===w?null:w};qN({expandedItem:m,setExpandedItem:h});const _=le("inboxes/getInboxes"),E=le("labels/getLabelsOnSidebar"),y=le("teams/getMyTeams"),b=le("customViews/getContactCustomViews"),A=le("customViews/getConversationCustomViews");Pe(()=>{i.dispatch("labels/get"),i.dispatch("inboxes/get"),i.dispatch("notifications/unReadCount"),i.dispatch("teams/get"),i.dispatch("attributes/get"),i.dispatch("customViews/get","conversation"),i.dispatch("customViews/get","contact")});const T=S(()=>_.value.slice().sort((w,D)=>w.name.localeCompare(D.name))),I=()=>{e.isMobileSidebarOpen&&s("closeMobileSidebar")},N=()=>[{name:"Reports Agent",label:c("SIDEBAR.REPORTS_AGENT"),to:r("agent_reports_index"),activeOn:["agent_reports_show"]},{name:"Reports Label",label:c("SIDEBAR.REPORTS_LABEL"),to:r("label_reports_index")},{name:"Reports Inbox",label:c("SIDEBAR.REPORTS_INBOX"),to:r("inbox_reports_index"),activeOn:["inbox_reports_show"]},{name:"Reports Team",label:c("SIDEBAR.REPORTS_TEAM"),to:r("team_reports_index"),activeOn:["team_reports_show"]}],x=S(()=>N()),R=S(()=>[{name:"Inbox",label:c("SIDEBAR.INBOX"),icon:"i-lucide-inbox",to:r("inbox_view"),activeOn:["inbox_view","inbox_view_conversation"],getterKeys:{count:"notifications/getUnreadCount"}},{name:"Conversation",label:c("SIDEBAR.CONVERSATIONS"),icon:"i-lucide-message-circle",children:[{name:"All",label:c("SIDEBAR.ALL_CONVERSATIONS"),activeOn:["inbox_conversation"],to:r("home")},{name:"Mentions",label:c("SIDEBAR.MENTIONED_CONVERSATIONS"),activeOn:["conversation_through_mentions"],to:r("conversation_mentions")},{name:"Unattended",activeOn:["conversation_through_unattended"],label:c("SIDEBAR.UNATTENDED_CONVERSATIONS"),to:r("conversation_unattended")},{name:"Kanban",label:"Kanban",icon:"i-lucide-kanban",to:r("conversations_kanban"),activeOn:["conversations_kanban"]},{name:"Folders",label:c("SIDEBAR.CUSTOM_VIEWS_FOLDER"),icon:"i-lucide-folder",activeOn:["conversations_through_folders"],children:A.value.map(w=>({name:`${w.name}-${w.id}`,label:w.name,to:r("folder_conversations",{id:w.id})}))},{name:"Teams",label:c("SIDEBAR.TEAMS"),icon:"i-lucide-users",activeOn:["conversations_through_team"],children:y.value.map(w=>({name:`${w.name}-${w.id}`,label:w.name,to:r("team_conversations",{teamId:w.id})}))},{name:"Channels",label:c("SIDEBAR.CHANNELS"),icon:"i-lucide-mailbox",activeOn:["conversation_through_inbox"],children:T.value.map(w=>({name:`${w.name}-${w.id}`,label:w.name,to:r("inbox_dashboard",{inbox_id:w.id}),component:D=>pn(t2,{label:D.label,active:D.active,inbox:w})}))},{name:"Labels",label:c("SIDEBAR.LABELS"),icon:"i-lucide-tag",activeOn:["conversations_through_label"],children:E.value.map(w=>({name:`${w.title}-${w.id}`,label:w.title,icon:pn("span",{class:"size-[12px] ring-1 ring-n-alpha-1 dark:ring-white/20 ring-inset rounded-sm",style:{backgroundColor:w.color}}),to:r("label_conversations",{label:w.title})}))}]},{name:"Captain",icon:"i-woot-captain",label:c("SIDEBAR.CAPTAIN"),children:[{name:"Assistants",label:c("SIDEBAR.CAPTAIN_ASSISTANTS"),to:r("captain_assistants_index")},{name:"Documents",label:c("SIDEBAR.CAPTAIN_DOCUMENTS"),to:r("captain_documents_index")},{name:"Responses",label:c("SIDEBAR.CAPTAIN_RESPONSES"),to:r("captain_responses_index")},{name:"Tools",label:c("SIDEBAR.CAPTAIN_TOOLS"),to:r("captain_tools_index")}]},{name:"Contacts",label:c("SIDEBAR.CONTACTS"),icon:"i-lucide-contact",children:[{name:"All Contacts",label:c("SIDEBAR.ALL_CONTACTS"),to:r("contacts_dashboard_index",{},{page:1,search:void 0}),activeOn:["contacts_dashboard_index","contacts_edit"]},{name:"Active",label:c("SIDEBAR.ACTIVE"),to:r("contacts_dashboard_active"),activeOn:["contacts_dashboard_active"]},{name:"Kanban",label:"Kanban",icon:"i-lucide-kanban",to:r("contacts_kanban"),activeOn:["contacts_kanban"]},{name:"Segments",icon:"i-lucide-group",label:c("SIDEBAR.CUSTOM_VIEWS_SEGMENTS"),children:b.value.map(w=>({name:`${w.name}-${w.id}`,label:w.name,to:r("contacts_dashboard_segments_index",{segmentId:w.id},{page:1}),activeOn:["contacts_dashboard_segments_index","contacts_edit_segment"]}))},{name:"Tagged With",icon:"i-lucide-tag",label:c("SIDEBAR.TAGGED_WITH"),children:E.value.map(w=>({name:`${w.title}-${w.id}`,label:w.title,icon:pn("span",{class:"size-[12px] ring-1 ring-n-alpha-1 dark:ring-white/20 ring-inset rounded-sm",style:{backgroundColor:w.color}}),to:r("contacts_dashboard_labels_index",{label:w.title},{page:1,search:void 0}),activeOn:["contacts_dashboard_labels_index","contacts_edit_label"]}))}]},{name:"Reports",label:c("SIDEBAR.REPORTS"),icon:"i-lucide-chart-spline",children:[{name:"Report Overview",label:c("SIDEBAR.REPORTS_OVERVIEW"),to:r("account_overview_reports")},{name:"Report Conversation",label:c("SIDEBAR.REPORTS_CONVERSATION"),to:r("conversation_reports")},...x.value,{name:"Reports CSAT",label:c("SIDEBAR.CSAT"),to:r("csat_reports")},{name:"Reports SLA",label:c("SIDEBAR.REPORTS_SLA"),to:r("sla_reports")},{name:"Reports Bot",label:c("SIDEBAR.REPORTS_BOT"),to:r("bot_reports")}]},{name:"Campaigns",label:c("SIDEBAR.CAMPAIGNS"),icon:"i-lucide-megaphone",children:[{name:"Live chat",label:c("SIDEBAR.LIVE_CHAT"),to:r("campaigns_livechat_index")},{name:"SMS",label:c("SIDEBAR.SMS"),to:r("campaigns_sms_index")},{name:"WhatsApp",label:c("SIDEBAR.WHATSAPP"),to:r("campaigns_whatsapp_index")}]},{name:"Portals",label:c("SIDEBAR.HELP_CENTER.TITLE"),icon:"i-lucide-library-big",children:[{name:"Articles",label:c("SIDEBAR.HELP_CENTER.ARTICLES"),activeOn:["portals_articles_index","portals_articles_new","portals_articles_edit"],to:r("portals_index",{navigationPath:"portals_articles_index"})},{name:"Categories",label:c("SIDEBAR.HELP_CENTER.CATEGORIES"),activeOn:["portals_categories_index","portals_categories_articles_index","portals_categories_articles_edit"],to:r("portals_index",{navigationPath:"portals_categories_index"})},{name:"Locales",label:c("SIDEBAR.HELP_CENTER.LOCALES"),activeOn:["portals_locales_index"],to:r("portals_index",{navigationPath:"portals_locales_index"})},{name:"Settings",label:c("SIDEBAR.HELP_CENTER.SETTINGS"),activeOn:["portals_settings_index"],to:r("portals_index",{navigationPath:"portals_settings_index"})}]},{name:"Settings",label:c("SIDEBAR.SETTINGS"),icon:"i-lucide-bolt",children:[{name:"Settings Account Settings",label:c("SIDEBAR.ACCOUNT_SETTINGS"),icon:"i-lucide-briefcase",to:r("general_settings_index")},{name:"Settings Agents",label:c("SIDEBAR.AGENTS"),icon:"i-lucide-square-user",to:r("agent_list")},{name:"Settings Teams",label:c("SIDEBAR.TEAMS"),icon:"i-lucide-users",to:r("settings_teams_list")},{name:"Settings Agent Assignment",label:c("SIDEBAR.AGENT_ASSIGNMENT"),icon:"i-lucide-user-cog",to:r("assignment_policy_index")},{name:"Settings Inboxes",label:c("SIDEBAR.INBOXES"),icon:"i-lucide-inbox",to:r("settings_inbox_list")},{name:"Settings Labels",label:c("SIDEBAR.LABELS"),icon:"i-lucide-tags",to:r("labels_list")},{name:"Settings Custom Attributes",label:c("SIDEBAR.CUSTOM_ATTRIBUTES"),icon:"i-lucide-code",to:r("attributes_list")},{name:"Settings Automation",label:c("SIDEBAR.AUTOMATION"),icon:"i-lucide-workflow",to:r("automation_list")},{name:"Settings Agent Bots",label:c("SIDEBAR.AGENT_BOTS"),icon:"i-lucide-bot",to:r("agent_bots")},{name:"Settings Macros",label:c("SIDEBAR.MACROS"),icon:"i-lucide-toy-brick",to:r("macros_wrapper")},{name:"Settings Canned Responses",label:c("SIDEBAR.CANNED_RESPONSES"),icon:"i-lucide-message-square-quote",to:r("canned_list")},{name:"Settings Integrations",label:c("SIDEBAR.INTEGRATIONS"),icon:"i-lucide-blocks",to:r("settings_applications")},{name:"Settings Audit Logs",label:c("SIDEBAR.AUDIT_LOGS"),icon:"i-lucide-briefcase",to:r("auditlogs_list")},{name:"Settings Custom Roles",label:c("SIDEBAR.CUSTOM_ROLES"),icon:"i-lucide-shield-plus",to:r("custom_roles_list")},{name:"Settings Sla",label:c("SIDEBAR.SLA"),icon:"i-lucide-clock-alert",to:r("sla_list")},{name:"Settings Security",label:c("SIDEBAR.SECURITY"),icon:"i-lucide-shield",to:r("security_settings_index")},{name:"Settings Billing",label:c("SIDEBAR.BILLING"),icon:"i-lucide-credit-card",to:r("billing_settings_index")}]}]),M={props:e,emit:s,accountScopedRoute:r,isOnChatwootCloud:o,store:i,searchShortcut:l,t:c,isACustomBrandedInstance:d,toggleShortcutModalFn:u,expandedItem:m,setExpandedItem:h,inboxes:_,labels:E,teams:y,contactCustomViews:b,conversationCustomViews:A,sortedInboxes:T,closeMobileSidebar:I,newReportRoutes:N,reportRoutes:x,menuItems:R,h:pn,computed:S,onMounted:Pe,get provideSidebarContext(){return qN},get useAccount(){return Ut},get useKbd(){return ZN},get useMapGetter(){return le},get useStore(){return Bn},get useI18n(){return Q},get useStorage(){return BT},get useSidebarKeyboardShortcuts(){return QN},get vOnClickOutside(){return Ga},Button:Se,SidebarGroup:RRt,SidebarProfileMenu:XRt,SidebarChangelogCard:mwt,ChannelLeaf:t2,SidebarAccountSwitcher:Owt,Logo:wwt,ComposeConversation:c_};return Object.defineProperty(M,"__isScriptSetup",{enumerable:!1,value:!0}),M}},Lwt={class:"grid gap-2 mt-2 mb-4"},Dwt={class:"flex gap-2 items-center px-2 min-w-0"},Pwt={class:"grid flex-shrink-0 place-content-center size-6"},kwt={class:"flex gap-2 px-2"},Bwt={class:"flex-grow text-left"},Fwt={class:"hidden tracking-wide pointer-events-none select-none text-n-slate-10"},Uwt={class:"grid overflow-y-scroll flex-grow gap-2 px-2 pb-5 no-scrollbar"},$wt={class:"flex flex-col gap-1.5 m-0 list-none"},Gwt={class:"flex flex-col flex-shrink-0 relative gap-1 justify-between items-center"},Vwt={class:"p-1 flex-shrink-0 flex w-full justify-between z-10 gap-2 items-center border-t border-n-weak shadow-[0px_-2px_4px_0px_rgba(27,28,29,0.02)]"};function Hwt(t,n,a,e,s,r){const o=H("RouterLink");return ce((p(),g("aside",{class:oe(["bg-n-solid-2 rtl:border-l ltr:border-r border-n-weak flex flex-col text-sm pb-1 fixed top-0 ltr:left-0 rtl:right-0 h-full z-40 transition-transform duration-200 ease-in-out md:static w-[200px] basis-[200px] md:flex-shrink-0 md:ltr:translate-x-0 md:rtl:-translate-x-0",[{"shadow-lg md:shadow-none":a.isMobileSidebarOpen,"ltr:-translate-x-full rtl:translate-x-full":!a.isMobileSidebarOpen}]])},[f("section",Lwt,[f("div",Dwt,[f("div",Pwt,[v(e.Logo,{class:"size-4"})]),n[2]||(n[2]=f("div",{class:"flex-shrink-0 w-px h-3 bg-n-strong"},null,-1)),v(e.SidebarAccountSwitcher,{class:"flex-grow -mx-1 min-w-0",onShowCreateAccountModal:n[0]||(n[0]=i=>e.emit("showCreateAccountModal"))})]),f("div",kwt,[v(o,{to:{name:"search"},class:"flex gap-2 items-center px-2 py-1 w-full h-7 rounded-lg outline outline-1 outline-n-weak bg-n-solid-3 dark:bg-n-black/30"},{default:z(()=>[n[3]||(n[3]=f("span",{class:"flex-shrink-0 i-lucide-search size-4 text-n-slate-11"},null,-1)),f("span",Bwt,C(e.t("COMBOBOX.SEARCH_PLACEHOLDER")),1),f("span",Fwt,C(e.searchShortcut),1)]),_:1}),v(e.ComposeConversation,{"align-position":"right"},{trigger:z(({toggle:i})=>[v(e.Button,{icon:"i-lucide-pen-line",color:"slate",size:"sm",class:"!h-7 !bg-n-solid-3 dark:!bg-n-black/30 !outline-n-weak !text-n-slate-11",onClick:i},null,8,["onClick"])]),_:1})])]),f("nav",Uwt,[f("ul",$wt,[(p(!0),g(de,null,Ae(e.menuItems,i=>(p(),L(e.SidebarGroup,Ta({key:i.name,ref_for:!0},i),null,16))),128))])]),f("section",Gwt,[n[4]||(n[4]=f("div",{class:"pointer-events-none absolute inset-x-0 -top-[31px] h-8 bg-gradient-to-t from-n-solid-2 to-transparent"},null,-1)),e.isOnChatwootCloud&&!e.isACustomBrandedInstance?(p(),L(e.SidebarChangelogCard,{key:0})):O("v-if",!0),f("div",Vwt,[v(e.SidebarProfileMenu,{onOpenKeyShortcutModal:n[1]||(n[1]=i=>e.emit("openKeyShortcutModal"))})])])],2)),[[e.vOnClickOutside,[e.closeMobileSidebar,{ignore:["#mobile-sidebar-launcher"]}]]])}const jwt=G(Mwt,[["render",Hwt],["__file","/app/app/javascript/dashboard/components-next/sidebar/Sidebar.vue"]]),ka={ALT:"Alt / ",WIN:"Win / ",SHIFT:"Shift",SLASH:"/",UP:"Up",DOWN:"Down"},Wwt=[{id:1,label:"OPEN_CONVERSATION",displayKeys:[ka.ALT,"J",ka.SLASH,ka.ALT,"K"],keySet:["Alt+KeyJ","Alt+KeyK"]},{id:2,label:"RESOLVE_AND_NEXT",displayKeys:[ka.WIN,ka.ALT,"E"],keySet:["$mod+Alt+KeyE"]},{id:3,label:"NAVIGATE_DROPDOWN",displayKeys:[ka.UP,ka.DOWN],keySet:["ArrowUp","ArrowDown"]},{id:4,label:"RESOLVE_CONVERSATION",displayKeys:[ka.ALT,"E"],keySet:["Alt+KeyE"]},{id:5,label:"GO_TO_CONVERSATION_DASHBOARD",displayKeys:[ka.ALT,"C"],keySet:["Alt+KeyC"]},{id:6,label:"ADD_ATTACHMENT",displayKeys:[ka.WIN,ka.ALT,"A"],keySet:["$mod+Alt+KeyA"]},{id:7,label:"GO_TO_CONTACTS_DASHBOARD",displayKeys:[ka.ALT,"V"],keySet:["Alt+KeyV"]},{id:8,label:"TOGGLE_SIDEBAR",displayKeys:[ka.ALT,"O"],keySet:["Alt+KeyO"]},{id:9,label:"GO_TO_REPORTS_SIDEBAR",displayKeys:[ka.ALT,"R"],keySet:["Alt+KeyR"]},{id:10,label:"MOVE_TO_NEXT_TAB",displayKeys:[ka.ALT,"N"],keySet:["Alt+KeyN"]},{id:11,label:"GO_TO_SETTINGS",displayKeys:[ka.ALT,"S"],keySet:["Alt+KeyS"]},{id:12,label:"SWITCH_TO_PRIVATE_NOTE",displayKeys:[ka.ALT,"P"],keySet:["Alt+KeyP"]},{id:13,label:"SWITCH_TO_REPLY",displayKeys:[ka.ALT,"L"],keySet:["Alt+KeyL"]},{id:14,label:"TOGGLE_SNOOZE_DROPDOWN",displayKeys:[ka.ALT,"M"],keySet:["Alt+KeyM"]}],zwt={__name:"WootKeyShortcutModal",props:{show:Boolean},emits:["close"],setup(t,{expose:n}){n();const{t:a}=Q(),e=P(null),s=S(()=>i=>a(`KEYBOARD_SHORTCUTS.TITLE.${i.label}`)),r=S(()=>i=>e.value===tA&&i.some(l=>nA.has(l)));Pe(async()=>{e.value=await aA()});const o={t:a,currentLayout:e,title:s,needsShiftKey:r,ref:P,computed:S,onMounted:Pe,get useI18n(){return Q},get useDetectKeyboardLayout(){return aA},get SHORTCUT_KEYS(){return Wwt},get KEYS(){return ka},get LAYOUT_QWERTZ(){return tA},get keysToModifyInQWERTZ(){return nA},Hotkey:g1};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},Ywt={class:"flex flex-col h-auto overflow-auto"},Kwt={class:"grid grid-cols-2 px-8 pt-0 pb-4 mt-6 gap-x-5 gap-y-3"},Xwt={class:"flex justify-between items-center min-w-[25rem]"},qwt={class:"text-sm text-n-slate-12"},Zwt={class:"flex items-center gap-2 mb-1 ml-2"},Qwt={class:"grid grid-cols-2 px-8 pt-0 pb-8 gap-x-5 gap-y-3"},Jwt={class:"text-sm text-n-slate-12 min-w-[36px]"},eMt={class:"flex items-center gap-2 mb-1 ml-2"},tMt={key:1,class:"flex items-center text-sm font-semibold text-n-slate-12"};function nMt(t,n,a,e,s,r){const o=H("woot-modal-header"),i=H("woot-modal");return p(),L(i,{show:a.show,size:"medium","on-close":()=>t.$emit("close")},{default:z(()=>[f("div",Ywt,[v(o,{"header-title":t.$t("SIDEBAR_ITEMS.KEYBOARD_SHORTCUTS")},null,8,["header-title"]),f("div",Kwt,[f("div",Xwt,[f("h5",qwt,C(t.$t("KEYBOARD_SHORTCUTS.TOGGLE_MODAL")),1),f("div",Zwt,[v(e.Hotkey,{"custom-class":"min-h-[28px] min-w-[60px] normal-case key"},{default:z(()=>[Oe(C(e.KEYS.WIN),1)]),_:1}),v(e.Hotkey,{"custom-class":"min-h-[28px] min-w-[36px] key"},{default:z(()=>[Oe(C(e.KEYS.SLASH),1)]),_:1})])])]),f("div",Qwt,[(p(!0),g(de,null,Ae(e.SHORTCUT_KEYS,l=>(p(),g("div",{key:l.id,class:"flex justify-between items-center min-w-[25rem]"},[f("h5",Jwt,C(e.title(l)),1),f("div",eMt,[e.needsShiftKey(l.keySet)?(p(),L(e.Hotkey,{key:0,"custom-class":"min-h-[28px] min-w-[36px] key"},{default:z(()=>[Oe(C(e.KEYS.SHIFT),1)]),_:1})):O("v-if",!0),(p(!0),g(de,null,Ae(l.displayKeys,(c,d)=>(p(),g(de,{key:d},[c!==e.KEYS.SLASH?(p(),L(e.Hotkey,{key:0,"custom-class":"min-h-[28px] min-w-[36px] key normal-case"},{default:z(()=>[Oe(C(c),1)]),_:2},1024)):(p(),g("span",tMt,C(c),1))],64))),128))])]))),128))])])]),_:1},8,["show","on-close"])}const aMt=G(zwt,[["render",nMt],["__scopeId","data-v-31d78494"],["__file","/app/app/javascript/dashboard/components/widgets/modal/WootKeyShortcutModal.vue"]]),sMt={__name:"UpgradePage",props:{bypassUpgradePage:{type:Boolean,default:!1}},setup(t,{expose:n}){const a=t,e=ft(),s=Fe(),{t:r}=Q(),{accountId:o,currentAccount:i}=Ut(),{isEnterprise:l}=io(),{isAdmin:c}=Es(),d=le("globalConfig/isOnChatwootCloud"),u=({allowed:T,consumed:I})=>I>T,m=S(()=>{const T=i.value;if(!T)return!1;const I=new Date(T.created_at);return Qb(new Date,I)<=15}),h=S(()=>{const T=i.value;if(!(T!=null&&T.limits))return"";const{conversation:I,non_web_inboxes:N,agents:x}=T.limits;let R="";return u(I)?R=r("GENERAL_SETTINGS.LIMIT_MESSAGES.CONVERSATION"):u(N)?R=r("GENERAL_SETTINGS.LIMIT_MESSAGES.INBOXES"):u(x)&&(R=r("GENERAL_SETTINGS.LIMIT_MESSAGES.AGENTS",{allowedAgents:x.allowed})),R}),_=S(()=>{const T=i.value;if(!(T!=null&&T.limits))return!1;const{conversation:I,non_web_inboxes:N,agents:x}=T.limits;return u(I)||u(N)||u(x)}),E=S(()=>a.bypassUpgradePage||!d.value||m.value?!1:_.value),y=()=>{s.dispatch("accounts/limits")},b=()=>{e.push({name:"billing_settings_index",params:{accountId:o.value}})};Pe(()=>{l&&y()}),n({shouldShowUpgradePage:E});const A={props:a,router:e,store:s,t:r,accountId:o,currentAccount:i,isEnterprise:l,isAdmin:c,isOnChatwootCloud:d,testLimit:u,isTrialAccount:m,limitExceededMessage:h,isLimitExceeded:_,shouldShowUpgradePage:E,fetchLimits:y,routeToBilling:b,onMounted:Pe,computed:S,get useStore(){return Fe},get useMapGetter(){return le},get useRouter(){return ft},get useAccount(){return Ut},get useConfig(){return io},get differenceInDays(){return Qb},get useAdmin(){return Es},get useI18n(){return Q},NextButton:Se,Icon:Bt};return Object.defineProperty(A,"__isScriptSetup",{enumerable:!1,value:!0}),A}},oMt={key:0,class:"mx-auto h-full pt-[clamp(3rem,15vh,12rem)]"},rMt={class:"flex flex-col gap-4 max-w-md px-8 py-6 shadow-lg bg-n-solid-1 rounded-xl outline outline-1 outline-n-container"},iMt={class:"flex flex-col gap-4"},lMt={class:"flex items-center w-full gap-2"},cMt={class:"flex items-center justify-center w-6 h-6 rounded-full bg-n-solid-blue"},dMt={class:"text-base font-medium text-n-slate-12"},uMt={class:"text-sm font-normal text-n-slate-11 mb-3"},pMt={key:0},fMt={key:1};function mMt(t,n,a,e,s,r){return e.shouldShowUpgradePage?(p(),g("div",oMt,[f("div",rMt,[f("div",iMt,[f("div",lMt,[f("span",cMt,[v(e.Icon,{class:"flex-shrink-0 text-n-brand size-[14px]",icon:"i-lucide-lock-keyhole"})]),f("span",dMt,C(t.$t("GENERAL_SETTINGS.UPGRADE")),1)]),f("div",null,[f("p",uMt,C(e.limitExceededMessage),1),e.isAdmin?O("v-if",!0):(p(),g("p",pMt,C(e.t("GENERAL_SETTINGS.LIMIT_MESSAGES.NON_ADMIN")),1))])]),e.isAdmin?(p(),L(e.NextButton,{key:0,label:t.$t("GENERAL_SETTINGS.OPEN_BILLING"),icon:"i-lucide-credit-card",onClick:n[0]||(n[0]=o=>e.routeToBilling())},null,8,["label"])):O("v-if",!0)]),qe(t.$slots,"default")])):(p(),g("div",fMt))}const hMt=G(sMt,[["render",mMt],["__file","/app/app/javascript/dashboard/routes/dashboard/upgrade/UpgradePage.vue"]]),_Mt={__name:"CopilotLauncher",setup(t,{expose:n}){n();const a=lt(),{uiSettings:e,updateUISettings:s}=Ct(),r=S(()=>["inbox_conversation","conversation_through_inbox","conversations_through_label","team_conversations_through_label","conversations_through_folders","conversation_through_mentions","conversation_through_unattended","conversation_through_participating","inbox_view_conversation"].includes(a.name)),o=le("getCurrentAccountId"),i=le("accounts/isFeatureEnabledonAccount"),l=S(()=>i.value(o.value,pt.CAPTAIN)&&!e.value.is_copilot_panel_open&&!r.value),d={route:a,uiSettings:e,updateUISettings:s,isConversationRoute:r,currentAccountId:o,isFeatureEnabledonAccount:i,showCopilotLauncher:l,toggleSidebar:()=>{s({is_copilot_panel_open:!e.value.is_copilot_panel_open,is_contact_sidebar_open:!1})},computed:S,get useRoute(){return lt},Button:Se,get useUISettings(){return Ct},get useMapGetter(){return le},get FEATURE_FLAGS(){return pt}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}},gMt={key:0,class:"fixed bottom-4 ltr:right-4 rtl:left-4 z-50"},bMt={class:"rounded-full bg-n-alpha-2 p-1"};function vMt(t,n,a,e,s,r){return e.showCopilotLauncher?(p(),g("div",gMt,[f("div",bMt,[v(e.Button,{icon:"i-woot-captain",class:"!rounded-full !bg-n-solid-3 dark:!bg-n-alpha-2 !text-n-slate-12 text-xl",lg:"",onClick:e.toggleSidebar})])])):(p(),g(de,{key:1},[],64))}const EMt=G(_Mt,[["render",vMt],["__file","/app/app/javascript/dashboard/components-next/copilot/CopilotLauncher.vue"]]),SMt={__name:"CopilotInput",emits:["send"],setup(t,{expose:n,emit:a}){n();const e=a,s=P(""),r=P(null),o=()=>{r.value&&(r.value.style.height="auto",r.value.style.height=`${r.value.scrollHeight}px`)},i=()=>{s.value.trim()&&(e("send",s.value),s.value="",At(()=>{o()}))},l=()=>{At(o)};Pe(()=>{At(o)});const c={emit:e,message:s,textareaRef:r,adjustHeight:o,sendMessage:i,handleInput:l,ref:P,nextTick:At,onMounted:Pe};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}},TMt=["placeholder","onKeydown"];function AMt(t,n,a,e,s,r){return p(),g("form",{class:"relative",onSubmit:Ve(e.sendMessage,["prevent"])},[ce(f("textarea",{ref:"textareaRef","onUpdate:modelValue":n[0]||(n[0]=o=>e.message=o),placeholder:t.$t("CAPTAIN.COPILOT.SEND_MESSAGE"),class:"w-full reset-base bg-n-alpha-3 ltr:pl-4 ltr:pr-12 rtl:pl-12 rtl:pr-4 py-3 text-sm border border-n-weak rounded-lg focus:outline-0 focus:outline-none focus:ring-2 focus:ring-n-blue-11 focus:border-n-blue-11 resize-none overflow-hidden max-h-[200px] mb-0 text-n-slate-12",rows:"1",onInput:e.handleInput,onKeydown:Vn(Ve(e.sendMessage,["exact","prevent"]),["enter"])},null,40,TMt),[[Et,e.message]]),n[1]||(n[1]=f("button",{class:"absolute ltr:right-1 rtl:left-1 top-1/2 -translate-y-1/2 h-9 w-10 flex items-center justify-center text-n-slate-11 hover:text-n-blue-11",type:"submit"},[f("i",{class:"i-ph-arrow-up"})],-1))],32)}const yMt=G(SMt,[["render",AMt],["__file","/app/app/javascript/dashboard/components-next/copilot/CopilotInput.vue"]]),IMt={},CMt={class:"flex justify-start"},OMt={class:"flex items-center space-x-2"},NMt={class:"text-n-iris-11 font-medium"};function xMt(t,n,a,e,s,r){return p(),g("div",CMt,[f("div",OMt,[f("span",NMt,C(t.$t("CAPTAIN.COPILOT.LOADER")),1),n[0]||(n[0]=f("div",{class:"flex space-x-1"},[f("div",{class:"w-2 h-2 rounded-full bg-n-iris-9 animate-bounce [animation-delay:-0.3s]"}),f("div",{class:"w-2 h-2 rounded-full bg-n-iris-9 animate-bounce [animation-delay:-0.15s]"}),f("div",{class:"w-2 h-2 rounded-full bg-n-iris-9 animate-bounce"})],-1))])])}const RMt=G(IMt,[["render",xMt],["__file","/app/app/javascript/dashboard/components-next/copilot/CopilotLoader.vue"]]),wMt={__name:"CopilotAgentMessage",props:{message:{type:Object,required:!0}},setup(t,{expose:n}){n();const a={};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},MMt={class:"space-y-1 text-n-slate-12"},LMt={class:"font-medium"},DMt={class:"break-words"};function PMt(t,n,a,e,s,r){return p(),g("div",MMt,[f("div",LMt,C(t.$t("CAPTAIN.COPILOT.YOU")),1),f("div",DMt,C(a.message.content),1)])}const kMt=G(wMt,[["render",PMt],["__file","/app/app/javascript/dashboard/components-next/copilot/CopilotAgentMessage.vue"]]),BMt={__name:"CopilotAssistantMessage",props:{isLastMessage:{type:Boolean,default:!1},message:{type:Object,required:!0},conversationInboxType:{type:String,required:!0}},setup(t,{expose:n}){n();const a=t,e=S(()=>{var c;return!((c=a.message)!=null&&c.content)}),s=S(()=>!e.value&&a.message.reply_suggestion&&a.isLastMessage),r=S(()=>new ki(a.message.content).formattedMessage),o=S(()=>[ht.WEB,ht.EMAIL].includes(a.conversationInboxType)),l={props:a,hasEmptyMessageContent:e,showUseButton:s,messageContent:r,insertIntoRichEditor:o,useCopilotResponse:()=>{var c,d;o.value?Mt.emit(cn.INSERT_INTO_RICH_EDITOR,(c=a.message)==null?void 0:c.content):Mt.emit(cn.INSERT_INTO_NORMAL_EDITOR,(d=a.message)==null?void 0:d.content),Nt(Zf.USE_CAPTAIN_RESPONSE)},computed:S,get emitter(){return Mt},get useTrack(){return Nt},get BUS_EVENTS(){return cn},get INBOX_TYPES(){return ht},get COPILOT_EVENTS(){return Zf},get MessageFormatter(){return ki},Button:Se};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}},FMt={class:"flex flex-col gap-1 text-n-slate-12"},UMt={class:"font-medium"},$Mt={key:0,class:"text-n-ruby-11"},GMt={key:1,class:"prose-sm break-words"},VMt={class:"flex flex-row mt-1"};function HMt(t,n,a,e,s,r){const o=nt("dompurify-html");return p(),g("div",FMt,[f("div",UMt,C(t.$t("CAPTAIN.NAME")),1),e.hasEmptyMessageContent?(p(),g("span",$Mt,C(t.$t("CAPTAIN.COPILOT.EMPTY_MESSAGE")),1)):ce((p(),g("div",GMt,null,512)),[[o,e.messageContent]]),f("div",VMt,[e.showUseButton?(p(),L(e.Button,{key:0,label:t.$t("CAPTAIN.COPILOT.USE"),faded:"",sm:"",slate:"",onClick:e.useCopilotResponse},null,8,["label"])):O("v-if",!0)])])}const jMt=G(BMt,[["render",HMt],["__file","/app/app/javascript/dashboard/components-next/copilot/CopilotAssistantMessage.vue"]]),WMt={__name:"CopilotThinkingBlock",props:{content:{type:String,required:!0}},setup(t,{expose:n}){n();const a={Icon:Bt};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},zMt={class:"flex flex-col gap-2 p-3 rounded-lg bg-n-background/50 border border-n-weak hover:bg-n-background/80 transition-colors duration-200"},YMt={class:"flex items-start gap-2"},KMt={class:"text-sm text-n-slate-12"};function XMt(t,n,a,e,s,r){return p(),g("div",zMt,[f("div",YMt,[v(e.Icon,{icon:"i-lucide-sparkles",class:"w-4 h-4 mt-0.5 flex-shrink-0 text-n-slate-9"}),f("div",KMt,C(a.content),1)])])}const qMt=G(WMt,[["render",XMt],["__file","/app/app/javascript/dashboard/components-next/copilot/CopilotThinkingBlock.vue"]]),ZMt={__name:"CopilotThinkingGroup",props:{messages:{type:Array,required:!0},defaultCollapsed:{type:Boolean,default:!1}},setup(t,{expose:n}){n();const a=t,{t:e}=Q(),s=P(!a.defaultCollapsed),r=S(()=>a.messages.length);je(()=>a.defaultCollapsed,i=>{i&&(s.value=!1)});const o={props:a,t:e,isExpanded:s,thinkingCount:r,ref:P,watch:je,computed:S,get useI18n(){return Q},Icon:Bt,CopilotThinkingBlock:qMt};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},QMt={class:"flex flex-col gap-2"},JMt={class:"flex items-center gap-2"},eLt={class:"inline-flex items-center justify-center h-4 min-w-4 px-1 text-xs font-medium rounded-full bg-n-solid-3 text-n-slate-11"};function tLt(t,n,a,e,s,r){return p(),g("div",QMt,[f("button",{class:"group flex items-center gap-2 text-xs text-n-slate-10 hover:text-n-slate-11 transition-colors duration-200 -ml-3",onClick:n[0]||(n[0]=o=>e.isExpanded=!e.isExpanded)},[v(e.Icon,{icon:e.isExpanded?"i-lucide-chevron-down":"i-lucide-chevron-right",class:"w-4 h-4 transition-transform duration-200 group-hover:scale-110"},null,8,["icon"]),f("span",JMt,[Oe(C(e.t("CAPTAIN.COPILOT.SHOW_STEPS"))+" ",1),f("span",eLt,C(e.thinkingCount),1)])]),ce(f("div",{class:oe(["space-y-3 transition-all duration-200",{"opacity-100":e.isExpanded,"opacity-0 max-h-0 overflow-hidden":!e.isExpanded}])},[(p(!0),g(de,null,Ae(a.messages,o=>(p(),L(e.CopilotThinkingBlock,{key:o.id,content:o.message.content,reasoning:o.message.reasoning},null,8,["content","reasoning"]))),128))],2),[[En,e.isExpanded]])])}const nLt=G(ZMt,[["render",tLt],["__file","/app/app/javascript/dashboard/components-next/copilot/CopilotThinkingGroup.vue"]]),aLt={__name:"ToggleCopilotAssistant",props:{assistants:{type:Array,required:!0},activeAssistant:{type:Object,required:!0}},emits:["setAssistant"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=S(()=>e.activeAssistant?e.activeAssistant.name:r("CAPTAIN.COPILOT.SELECT_ASSISTANT")),i={props:e,emit:s,t:r,activeAssistantLabel:o,computed:S,get useI18n(){return Q},Button:Se,DropdownContainer:Yl,DropdownSection:Td,DropdownBody:Kl,DropdownItem:Xi};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}},sLt={class:"flex gap-1 justify-between w-full"},oLt={class:"items-start flex gap-1 flex-col"},rLt={class:"text-n-slate-12 text-sm"},iLt={class:"line-clamp-2 text-n-slate-11 text-xs"},lLt={key:0,class:"flex items-center justify-center flex-shrink-0 w-4 h-4 rounded-full bg-n-slate-12 dark:bg-n-slate-11"};function cLt(t,n,a,e,s,r){return p(),g("div",null,[v(e.DropdownContainer,null,{trigger:z(({toggle:o,isOpen:i})=>[v(e.Button,{label:e.activeAssistantLabel,icon:"i-woot-captain",ghost:"",slate:"",xs:"",class:oe({"bg-n-alpha-2":i}),onClick:o},null,8,["label","class","onClick"])]),default:z(()=>[v(e.DropdownBody,{class:"bottom-9 min-w-64 z-50",strong:""},{default:z(()=>[v(e.DropdownSection,{class:"[&>ul]:max-h-80"},{default:z(()=>[(p(!0),g(de,null,Ae(a.assistants,o=>(p(),L(e.DropdownItem,{key:o.id,class:"!items-start !gap-1 flex-col cursor-pointer",onClick:()=>e.emit("setAssistant",o)},{label:z(()=>{var i;return[f("div",sLt,[f("div",oLt,[f("span",rLt,C(o.name),1),f("span",iLt,C(o.description),1)]),o.id===((i=a.activeAssistant)==null?void 0:i.id)?(p(),g("div",lLt,[...n[0]||(n[0]=[f("i",{class:"i-lucide-check text-white dark:text-n-slate-1 size-3"},null,-1)])])):O("v-if",!0)])]}),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})])}const dLt=G(aLt,[["render",cLt],["__file","/app/app/javascript/dashboard/components-next/copilot/ToggleCopilotAssistant.vue"]]),uLt={__name:"CopilotEmptyState",props:{hasAssistants:{type:Boolean,default:!1}},emits:["useSuggestion"],setup(t,{expose:n,emit:a}){n();const e=a,{t:s}=Q(),r=lt(),o={conversations:[{label:"CAPTAIN.COPILOT.PROMPTS.SUMMARIZE.LABEL",prompt:"CAPTAIN.COPILOT.PROMPTS.SUMMARIZE.CONTENT"},{label:"CAPTAIN.COPILOT.PROMPTS.SUGGEST.LABEL",prompt:"CAPTAIN.COPILOT.PROMPTS.SUGGEST.CONTENT"},{label:"CAPTAIN.COPILOT.PROMPTS.RATE.LABEL",prompt:"CAPTAIN.COPILOT.PROMPTS.RATE.CONTENT"}],dashboard:[{label:"CAPTAIN.COPILOT.PROMPTS.HIGH_PRIORITY.LABEL",prompt:"CAPTAIN.COPILOT.PROMPTS.HIGH_PRIORITY.CONTENT"},{label:"CAPTAIN.COPILOT.PROMPTS.LIST_CONTACTS.LABEL",prompt:"CAPTAIN.COPILOT.PROMPTS.LIST_CONTACTS.CONTENT"}]},i=()=>{const u=r.path;return u.includes("/conversations")?"conversations":(u.includes("/dashboard"),"dashboard")},l=S(()=>{const u=i();return o[u]||o.conversations}),d={emit:e,t:s,route:r,routePromptMap:o,getCurrentRoute:i,promptOptions:l,handleSuggestion:u=>{e("useSuggestion",s(u.prompt))},computed:S,get useI18n(){return Q},get useRoute(){return lt},Icon:Bt};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}},pLt={class:"flex-1 flex flex-col gap-6 px-2"},fLt={class:"flex flex-col space-y-4 py-4"},mLt={class:"space-y-1"},hLt={class:"text-base font-medium text-n-slate-12 leading-8"},_Lt={class:"text-sm text-n-slate-11 leading-6"},gLt={key:0,class:"w-full space-y-2"},bLt={class:"text-sm text-n-slate-11 leading-6"},vLt={key:1,class:"w-full space-y-2"},ELt={class:"text-xs text-n-slate-10 block"},SLt={class:"space-y-1"},TLt=["onClick"];function ALt(t,n,a,e,s,r){const o=H("router-link");return p(),g("div",pLt,[f("div",fLt,[v(e.Icon,{icon:"i-woot-captain",class:"text-n-slate-9 text-4xl"}),f("div",mLt,[f("h3",hLt,C(t.$t("CAPTAIN.COPILOT.PANEL_TITLE")),1),f("p",_Lt,C(t.$t("CAPTAIN.COPILOT.KICK_OFF_MESSAGE")),1)])]),a.hasAssistants?(p(),g("div",vLt,[f("span",ELt,C(t.$t("CAPTAIN.COPILOT.TRY_THESE_PROMPTS")),1),f("div",SLt,[(p(!0),g(de,null,Ae(e.promptOptions,i=>(p(),g("button",{key:i.label,class:"w-full px-3 py-2 rounded-md border border-n-weak bg-n-slate-2 text-n-slate-11 flex items-center justify-between hover:bg-n-slate-3 transition-colors",onClick:l=>e.handleSuggestion(i)},[f("span",null,C(e.t(i.label)),1),v(e.Icon,{icon:"i-lucide-chevron-right"})],8,TLt))),128))])])):(p(),g("div",gLt,[f("p",bLt,C(t.$t("CAPTAIN.ASSISTANTS.NO_ASSISTANTS_AVAILABLE")),1),v(o,{to:{name:"captain_assistants_index",params:{accountId:e.route.params.accountId}},class:"text-n-slate-11 underline hover:text-n-slate-12"},{default:z(()=>[Oe(C(t.$t("CAPTAIN.ASSISTANTS.ADD_NEW")),1)]),_:1},8,["to"])]))])}const yLt=G(uLt,[["render",ALt],["__file","/app/app/javascript/dashboard/components-next/copilot/CopilotEmptyState.vue"]]),ILt={__name:"Copilot",props:{messages:{type:Array,default:()=>[]},conversationInboxType:{type:String,required:!0},assistants:{type:Array,default:()=>[]},activeAssistant:{type:Object,default:()=>({})}},emits:["sendMessage","reset","setAssistant"],setup(t,{expose:n,emit:a}){n();const e=t,s=a,{t:r}=Q(),o=A=>{s("sendMessage",A),Nt(Zf.SEND_MESSAGE)},i=P(null),l=async()=>{await At(),i.value&&(i.value.scrollTop=i.value.scrollHeight)},c=S(()=>{const A=[];let T=[];return e.messages.forEach(I=>{I.message_type==="assistant_thinking"?T.push(I):(T.length>0&&(A.push({id:T[0].id,message_type:"thinking_group",messages:T}),T=[]),A.push(I))}),T.length>0&&A.push({id:T[0].id,message_type:"thinking_group",messages:T}),A}),d=S(()=>c.value[c.value.length-1].message_type==="assistant"),{updateUISettings:u}=Ct(),m=()=>{u({is_copilot_panel_open:!1,is_contact_sidebar_open:!1})},h=A=>{A==="reset"&&s("reset")},_=S(()=>e.assistants.length>0),E=S(()=>e.messages.length>0),y=S(()=>E.value?[{key:"reset",icon:"i-lucide-refresh-ccw",tooltip:r("CAPTAIN.COPILOT.RESET")}]:[]);je([()=>e.messages],()=>{l()},{deep:!0});const b={props:e,emit:s,t:r,sendMessage:o,chatContainer:i,scrollToBottom:l,groupedMessages:c,isLastMessageFromAssistant:d,updateUISettings:u,closeCopilotPanel:m,handleSidebarAction:h,hasAssistants:_,hasMessages:E,copilotButtons:y,nextTick:At,ref:P,watch:je,computed:S,get useTrack(){return Nt},get COPILOT_EVENTS(){return Zf},get useUISettings(){return Ct},CopilotInput:yMt,CopilotLoader:RMt,CopilotAgentMessage:kMt,CopilotAssistantMessage:jMt,CopilotThinkingGroup:nLt,ToggleCopilotAssistant:dLt,CopilotEmptyState:yLt,SidebarActionsHeader:aP,get useI18n(){return Q}};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}},CLt={class:"flex flex-col h-full text-sm leading-6 tracking-tight w-full"},OLt={ref:"chatContainer",class:"flex-1 flex px-4 py-4 overflow-y-auto items-start"},NLt={key:0,class:"space-y-6 flex-1 flex flex-col w-full"},xLt={class:"mx-3 mt-px mb-2"},RLt={class:"flex items-center gap-2 justify-between w-full mb-1"},wLt={key:1};function MLt(t,n,a,e,s,r){return p(),g("div",CLt,[v(e.SidebarActionsHeader,{title:t.$t("CAPTAIN.COPILOT.TITLE"),buttons:e.copilotButtons,onClick:e.handleSidebarAction,onClose:e.closeCopilotPanel},null,8,["title","buttons"]),f("div",OLt,[e.hasMessages?(p(),g("div",NLt,[(p(!0),g(de,null,Ae(e.groupedMessages,(o,i)=>(p(),g(de,{key:o.id},[o.message_type==="user"?(p(),L(e.CopilotAgentMessage,{key:0,message:o.message},null,8,["message"])):o.message_type==="assistant"?(p(),L(e.CopilotAssistantMessage,{key:1,message:o.message,"is-last-message":i===e.groupedMessages.length-1,"conversation-inbox-type":a.conversationInboxType},null,8,["message","is-last-message","conversation-inbox-type"])):(p(),L(e.CopilotThinkingGroup,{key:2,messages:o.messages,"default-collapsed":e.isLastMessageFromAssistant},null,8,["messages","default-collapsed"]))],64))),128)),e.isLastMessageFromAssistant?O("v-if",!0):(p(),L(e.CopilotLoader,{key:0}))])):(p(),L(e.CopilotEmptyState,{key:1,"has-assistants":e.hasAssistants,onUseSuggestion:e.sendMessage},null,8,["has-assistants"]))],512),f("div",xLt,[f("div",RLt,[a.assistants.length>1?(p(),L(e.ToggleCopilotAssistant,{key:0,assistants:a.assistants,"active-assistant":a.activeAssistant,onSetAssistant:n[0]||(n[0]=o=>e.emit("setAssistant",o))},null,8,["assistants","active-assistant"])):(p(),g("div",wLt))]),e.hasAssistants?(p(),L(e.CopilotInput,{key:0,class:"mb-1 w-full",onSend:e.sendMessage})):O("v-if",!0)])])}const LLt=G(ILt,[["render",MLt],["__file","/app/app/javascript/dashboard/components-next/copilot/Copilot.vue"]]),DLt={__name:"CopilotContainer",props:{conversationInboxType:{type:String,default:""}},setup(t,{expose:n}){n();const a=Fe(),{uiSettings:e,updateUISettings:s}=Ct(),{isEnterprise:r}=io(),{width:o}=ws(),i=le("getCurrentUser"),l=le("captainAssistants/getRecords"),c=le("captainAssistants/getUIFlags"),d=le("getCopilotAssistant"),u=le("getSelectedChat"),m=S(()=>o.value<gt.SMALL_SCREEN_BREAKPOINT),h=P(null),_=S(()=>a.getters["copilotMessages/getMessagesByThreadId"](h.value)),E=le("getCurrentAccountId"),y=le("accounts/isFeatureEnabledonAccount"),b=P(null),A=S(()=>{const w=e.value.preferred_captain_assistant_id;if(w){const D=l.value.find(B=>B.id===w);if(D)return D}if(d.value){const D=l.value.find(B=>B.id===d.value.id);if(D)return D}return l.value[0]}),T=()=>{var w;m.value&&((w=e.value)!=null&&w.is_copilot_panel_open)&&s({is_contact_sidebar_open:!1,is_copilot_panel_open:!1})},I=async w=>{b.value=w.id,await s({preferred_captain_assistant_id:w.id})},N=S(()=>{if(!r)return!1;const w=y.value(E.value,pt.CAPTAIN),{is_copilot_panel_open:D}=e.value;return w&&D&&!c.value.fetchingList}),x=()=>{h.value=null},R=async w=>{var D,B;try{if(h.value)await a.dispatch("copilotMessages/create",{assistant_id:A.value.id,conversation_id:(D=u.value)==null?void 0:D.id,threadId:h.value,message:w});else{const k=await a.dispatch("copilotThreads/create",{assistant_id:A.value.id,conversation_id:(B=u.value)==null?void 0:B.id,message:w});h.value=k.id}}catch(k){Z(k.message)}};Pe(()=>{r&&a.dispatch("captainAssistants/get")});const M={store:a,uiSettings:e,updateUISettings:s,isEnterprise:r,windowWidth:o,currentUser:i,assistants:l,uiFlags:c,inboxAssistant:d,currentChat:u,isSmallScreen:m,selectedCopilotThreadId:h,messages:_,currentAccountId:E,isFeatureEnabledonAccount:y,selectedAssistantId:b,activeAssistant:A,closeCopilotPanel:T,setAssistant:I,shouldShowCopilotPanel:N,handleReset:x,sendMessage:R,ref:P,computed:S,onMounted:Pe,get useAlert(){return Z},get useStore(){return Fe},Copilot:LLt,get useMapGetter(){return le},get useUISettings(){return Ct},get useConfig(){return io},get useWindowSize(){return ws},get vOnClickOutside(){return Ga},get FEATURE_FLAGS(){return pt},get wootConstants(){return gt}};return Object.defineProperty(M,"__isScriptSetup",{enumerable:!1,value:!0}),M}};function PLt(t,n,a,e,s,r){return e.shouldShowCopilotPanel?ce((p(),g("div",{key:0,class:oe(["bg-n-background h-full overflow-hidden flex-col fixed top-0 ltr:right-0 rtl:left-0 z-40 w-full max-w-sm transition-transform duration-300 ease-in-out md:static md:w-[320px] md:min-w-[320px] ltr:border-l rtl:border-r border-n-weak 2xl:min-w-[360px] 2xl:w-[360px] shadow-lg md:shadow-none",[{"md:flex":e.shouldShowCopilotPanel,"md:hidden":!e.shouldShowCopilotPanel}]])},[v(e.Copilot,{messages:e.messages,"support-agent":e.currentUser,"conversation-inbox-type":a.conversationInboxType,assistants:e.assistants,"active-assistant":e.activeAssistant,onSetAssistant:e.setAssistant,onSendMessage:e.sendMessage,onReset:e.handleReset},null,8,["messages","support-agent","conversation-inbox-type","assistants","active-assistant"])],2)),[[e.vOnClickOutside,()=>e.closeCopilotPanel()]]):(p(),g(de,{key:1},[],64))}const kLt=G(DLt,[["render",PLt],["__file","/app/app/javascript/dashboard/components/copilot/CopilotContainer.vue"]]),BLt={__name:"MobileSidebarLauncher",props:{isMobileSidebarOpen:{type:Boolean,default:!1}},emits:["toggle"],setup(t,{expose:n,emit:a}){n();const e=a,s=lt(),r=S(()=>["inbox_conversation","conversation_through_inbox","conversations_through_label","team_conversations_through_label","conversations_through_folders","conversation_through_mentions","conversation_through_unattended","conversation_through_participating","inbox_view_conversation"].includes(s.name)),i={emit:e,route:s,isConversationRoute:r,toggleSidebar:()=>{e("toggle")},computed:S,get useRoute(){return lt},Button:Se};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}},FLt={class:"rounded-full bg-n-alpha-2 p-1"};function ULt(t,n,a,e,s,r){return e.isConversationRoute?(p(),g(de,{key:1},[],64)):(p(),g("div",{key:0,id:"mobile-sidebar-launcher",class:oe(["fixed bottom-4 ltr:left-4 rtl:right-4 z-40 transition-transform duration-200 ease-in-out block md:hidden",[{"ltr:translate-x-48 rtl:-translate-x-48":a.isMobileSidebarOpen}]])},[f("div",FLt,[v(e.Button,{icon:"i-lucide-menu",class:"!rounded-full !bg-n-solid-3 dark:!bg-n-alpha-2 !text-n-slate-12 text-xl",lg:"",onClick:e.toggleSidebar})])],2))}const $Lt=G(BLt,[["render",ULt],["__file","/app/app/javascript/dashboard/components-next/sidebar/MobileSidebarLauncher.vue"]]),GLt=Uf(()=>ti(()=>import("./commandbar-CUM6Dpvm.js"),__vite__mapDeps([37,2,3,4,5,6,7,8,19,17,18,10,13,20,9,1,11,23,24,12,25,26,27,38]))),VLt={components:{NextSidebar:jwt,CommandBar:GLt,WootKeyShortcutModal:aMt,AddAccountModal:Yx,UpgradePage:hMt,CopilotLauncher:EMt,CopilotContainer:kLt,MobileSidebarLauncher:$Lt},setup(){const t=P(null),{uiSettings:n,updateUISettings:a}=Ct(),{accountId:e}=Ut(),{width:s}=ws();return{uiSettings:n,updateUISettings:a,accountId:e,upgradePageRef:t,windowWidth:s}},data(){return{showAccountModal:!1,showCreateAccountModal:!1,showShortcutModal:!1,isMobileSidebarOpen:!1}},computed:{isSmallScreen(){return this.windowWidth<gt.SMALL_SCREEN_BREAKPOINT},showUpgradePage(){var t;return(t=this.upgradePageRef)==null?void 0:t.shouldShowUpgradePage},bypassUpgradePage(){return["billing_settings_index","settings_inbox_list","general_settings_index","agent_list"].includes(this.$route.name)},previouslyUsedDisplayType(){const{previously_used_conversation_display_type:t}=this.uiSettings;return t}},watch:{isSmallScreen:{handler(){const{LAYOUT_TYPES:t}=gt;window.innerWidth<=gt.SMALL_SCREEN_BREAKPOINT?this.updateUISettings({conversation_display_type:t.EXPANDED}):this.updateUISettings({conversation_display_type:this.previouslyUsedDisplayType})},immediate:!0}},methods:{toggleMobileSidebar(){this.isMobileSidebarOpen=!this.isMobileSidebarOpen},closeMobileSidebar(){this.isMobileSidebarOpen=!1},openCreateAccountModal(){this.showAccountModal=!1,this.showCreateAccountModal=!0},closeCreateAccountModal(){this.showCreateAccountModal=!1},toggleAccountModal(){this.showAccountModal=!this.showAccountModal},toggleKeyShortcutModal(){this.showShortcutModal=!0},closeKeyShortcutModal(){this.showShortcutModal=!1}}},HLt={class:"flex flex-grow overflow-hidden text-n-slate-12"},jLt={class:"flex flex-1 h-full w-full min-h-0 px-0 overflow-hidden"};function WLt(t,n,a,e,s,r){const o=H("NextSidebar"),i=H("MobileSidebarLauncher"),l=H("UpgradePage"),c=H("router-view"),d=H("CommandBar"),u=H("CopilotLauncher"),m=H("CopilotContainer"),h=H("AddAccountModal"),_=H("WootKeyShortcutModal");return p(),g("div",HLt,[v(o,{"is-mobile-sidebar-open":s.isMobileSidebarOpen,onToggleAccountModal:r.toggleAccountModal,onOpenKeyShortcutModal:r.toggleKeyShortcutModal,onCloseKeyShortcutModal:r.closeKeyShortcutModal,onShowCreateAccountModal:r.openCreateAccountModal,onCloseMobileSidebar:r.closeMobileSidebar},null,8,["is-mobile-sidebar-open","onToggleAccountModal","onOpenKeyShortcutModal","onCloseKeyShortcutModal","onShowCreateAccountModal","onCloseMobileSidebar"]),f("main",jLt,[ce(v(l,{ref:"upgradePageRef","bypass-upgrade-page":r.bypassUpgradePage},{default:z(()=>[v(i,{"is-mobile-sidebar-open":s.isMobileSidebarOpen,onToggle:r.toggleMobileSidebar},null,8,["is-mobile-sidebar-open","onToggle"])]),_:1},8,["bypass-upgrade-page"]),[[En,r.showUpgradePage]]),r.showUpgradePage?O("v-if",!0):(p(),g(de,{key:0},[v(c),v(d),v(u),v(i,{"is-mobile-sidebar-open":s.isMobileSidebarOpen,onToggle:r.toggleMobileSidebar},null,8,["is-mobile-sidebar-open","onToggle"]),v(m)],64)),v(h,{show:s.showCreateAccountModal,onCloseAccountCreateModal:r.closeCreateAccountModal},null,8,["show","onCloseAccountCreateModal"]),v(_,{show:s.showShortcutModal,"onUpdate:show":n[0]||(n[0]=E=>s.showShortcutModal=E),onClose:r.closeKeyShortcutModal,onClickaway:r.closeKeyShortcutModal},null,8,["show","onClose","onClickaway"])])])}const zLt=G(VLt,[["render",WLt],["__file","/app/app/javascript/dashboard/routes/dashboard/Dashboard.vue"]]),YLt={__name:"Index",setup(t,{expose:n}){n();const a=()=>{window.$chatwoot&&window.$chatwoot.toggleBubbleVisibility("show")},e=()=>{window.addEventListener("chatwoot:on-message",()=>{a()})};Pe(()=>{a(),e()});const s={toggleSupportWidgetVisibility:a,setupListenerForWidgetEvent:e,EmptyState:Id,onMounted:Pe};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}},KLt={class:"items-center bg-n-slate-2 flex justify-center h-full w-full"};function XLt(t,n,a,e,s,r){return p(),g("div",KLt,[v(e.EmptyState,{title:t.$t("APP_GLOBAL.ACCOUNT_SUSPENDED.TITLE"),message:t.$t("APP_GLOBAL.ACCOUNT_SUSPENDED.MESSAGE")},null,8,["title","message"])])}const qLt=G(YLt,[["render",XLt],["__file","/app/app/javascript/dashboard/routes/dashboard/suspended/Index.vue"]]),ZLt={routes:[{path:vt("accounts/:accountId"),component:zLt,children:[...tRt,...ESt,...sut.routes,..._9e.routes,..._vt,...Fpt,...Gvt,...A1t.routes,...GAt.routes]},{path:vt("accounts/:accountId/suspended"),name:"account_suspended",meta:{permissions:["administrator","agent","custom_role"]},component:qLt}]},QLt=[...ZLt.routes],wa=Kk({history:Xk(),routes:QLt}),JLt=(t,n)=>{const{isLoggedIn:a,getCurrentUser:e}=kl.getters;if(!a)return window.location.assign("/app/login"),"";if(!t.name)return n(vt(`accounts/${e.account_id}/dashboard`));const s=RG(t,kl.getters.getCurrentUser);return s?n(vt(s)):n()},eDt=()=>{const t=kl.dispatch("setUser");wa.beforeEach((n,a,e)=>{L4.page(n.name||"",{path:n.path,name:n.name}),t.then(()=>JLt(n,e))})},tDt=X3({legacy:!1,locale:"en",messages:M4});rJ(kl,wa);const ks=a2(aJ);ks.use(tDt);ks.use(kl);ks.use(wa);window.errorLoggingConfig&&F2({app:ks,dsn:window.errorLoggingConfig,denyUrls:[/^chrome:\/\//i,/chrome-extension:/i,/extensions\//i,/file:\/\//i,/safari-web-extension:/i,/safari-extension:/i],integrations:[B2({router:wa})],ignoreErrors:["ResizeObserver loop completed with undelivered notifications"]});ks.use(W4,Y4);ks.use(zx);ks.use(vk,Ek({rules:{JSON:({value:t})=>C4(t)}}));ks.use(E6,{instantMove:!0,arrowOverflow:!1,disposeTimeout:5e6});ks.use(V5);ks.component("multiselect",sx);ks.component("woot-wizard",dB);ks.component("fluent-icon",O4);ks.directive("resize",N4);ks.directive("on-clickaway",K4);x4();window.WootConstants=gt;window.axios=oJ(h2);R4();w4();eDt();window.onload=()=>{ks.mount("#app")};export{n1t as A,qi as B,PDt as C,yd as D,Or as E,pt as F,vb as G,Sb as H,gp as I,aO as J,sO as K,BDt as L,nO as M,iO as N,oO as O,N1 as P,rO as Q,Ytt as R,fp as S,ogt as T,KD as U,sGe as V,fm as W,kDt as a,DDt as b,ds as c,a1t as d,Ize as e,FDt as f,LDt as g,_O as h,Mi as i,JD as j,hje as k,jWe as l,ni as m,wDt as n,ho as o,sn as p,Cr as q,lD as r,i1t as s,MI as t,Ct as u,dF as v,mm as w,lO as x,Es as y,Eb as z};
