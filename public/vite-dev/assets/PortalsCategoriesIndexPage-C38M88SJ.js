import{_ as I,H as X,a as y,o as g,l as R,p as A,i as Z,t as B,n as x,e as H,g as $,q as ee,c as u,F as q,j as U,r as L,K as z}from"./_plugin-vue_export-helper-n_vHXFlc.js";import{u as G,ah as V}from"./Validators-0vUS0OnA.js";import{u as D,b as O,a as Q,c as P}from"./useBranding-C51QoB-t.js";import{c as te,o as ae,E as oe,l as W}from"./dashboard-DaT-cgYc.js";import{a as Y,u as w}from"./index-CQMLlWJA.js";import{aM as K,aS as re,bU as j}from"./DashboardIcon-CCM-1oGA.js";import{H as ne}from"./HelpCenterLayout-CP5dHFgN.js";import{B as ie,S as se}from"./index-UYK3fwMr.js";import{a as ce,C as le}from"./CategoryHeaderControls-DpYgORUR.js";import"./index-DN3rM4CW.js";import"./_commonjsHelpers-BosuxZz1.js";import"./utils.esm-CMazHLgs.js";import"./index-DzK6ljgP.js";import"./typing-Dhk99rRl.js";import"./vue-dompurify-html-CEAHYyWB.js";import"./useKeyboardNavigableList-B1kK16iE.js";import"./helper-BVTgYTlr.js";import"./Icon-D1o1yyYK.js";import"./module-WEXc1Yw_.js";import"./BarChart-BLu1KVZQ.js";import"./constants-lVAyZKq6.js";import"./IframeLoader-DfGHvGaO.js";import"./js.cookie-Cz0CWeBA.js";const de={__name:"CategoryCard",props:{id:{type:Number,required:!0},title:{type:String,required:!0},icon:{type:String,required:!0},description:{type:String,required:!0},articlesCount:{type:Number,required:!0},slug:{type:String,required:!0}},emits:["click","action"],setup(p,{expose:o,emit:a}){o();const e=p,s=a,{t:r}=D(),[t,n]=K(),l=[{label:"Edit",action:"edit",value:"edit",icon:"i-lucide-pencil"},{label:"Delete",action:"delete",value:"delete",icon:"i-lucide-trash"}],f=u(()=>`${e.icon} ${e.title}`),_=u(()=>e.description?e.description:"No description added"),C=u(()=>e.description.length>0),d={props:e,emit:s,t:r,showActionsDropdown:t,toggleDropdown:n,categoryMenuItems:l,categoryTitleWithIcon:f,description:_,hasDescription:C,handleClick:m=>{s("click",m)},handleAction:({action:m,value:c})=>{s("action",{action:m,value:c,id:e.id}),n(!1)},computed:u,get useI18n(){return D},get useToggle(){return K},CardLayout:ae,Button:ie,DropdownMenu:te};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}},ue={class:"flex w-full gap-2"},ge={class:"flex justify-between w-full gap-2"},pe={class:"flex items-center justify-start w-full min-w-0 gap-2"},_e={class:"inline-flex items-center justify-center h-6 px-2 py-1 text-xs text-center border rounded-lg bg-n-slate-1 whitespace-nowrap shrink-0 text-n-slate-11 border-n-slate-4"},me={class:"relative group"};function Ce(p,o,a,e,s,r){const t=X("on-clickaway");return g(),y(e.CardLayout,null,{default:R(()=>[A("div",ue,[A("div",ge,[A("div",pe,[A("span",{class:"text-base truncate cursor-pointer hover:underline underline-offset-2 hover:text-n-blue-text text-n-slate-12",onClick:o[0]||(o[0]=n=>e.handleClick(a.slug))},B(e.categoryTitleWithIcon),1),A("span",_e,B(e.t("HELP_CENTER.CATEGORY_PAGE.CATEGORY_CARD.ARTICLES_COUNT",{count:a.articlesCount})),1)]),Z((g(),x("div",me,[H(e.Button,{icon:"i-lucide-ellipsis-vertical",color:"slate",size:"xs",variant:"ghost",class:"rounded-md group-hover:bg-n-alpha-2",onClick:o[1]||(o[1]=n=>e.toggleDropdown())}),e.showActionsDropdown?(g(),y(e.DropdownMenu,{key:0,"menu-items":e.categoryMenuItems,class:"mt-1 ltr:right-0 rtl:left-0 xl:ltr:left-0 xl:rtl:right-0 top-full z-60",onAction:e.handleAction})):$("v-if",!0)])),[[t,()=>e.toggleDropdown(!1)]])])]),A("span",{class:ee(["text-sm line-clamp-3",e.hasDescription?"text-n-slate-11":"text-n-slate-9"])},B(e.description),3)]),_:1})}const J=I(de,[["render",Ce],["__file","/app/app/javascript/dashboard/components-next/HelpCenter/CategoryCard/CategoryCard.vue"]]),ye={__name:"CategoryList",props:{categories:{type:Array,required:!0}},emits:["click","action"],setup(p,{expose:o,emit:a}){o();const e=a,t={emit:e,handleClick:n=>{e("click",n)},handleAction:({action:n,value:l,id:f},_)=>{e("action",{action:n,value:l,id:f,category:_})},CategoryCard:J};return Object.defineProperty(t,"__isScriptSetup",{enumerable:!1,value:!0}),t}},fe={role:"list",class:"grid w-full h-full grid-cols-1 gap-4 md:grid-cols-2"};function Ee(p,o,a,e,s,r){return g(),x("ul",fe,[(g(!0),x(q,null,U(a.categories,t=>(g(),y(e.CategoryCard,{id:t.id,key:t.id,title:t.name,icon:t.icon,description:t.description,"articles-count":t.meta.articles_count||0,slug:t.slug,onClick:n=>e.handleClick(t.slug),onAction:n=>e.handleAction(n,t)},null,8,["id","title","icon","description","articles-count","slug","onClick","onAction"]))),128))])}const he=I(ye,[["render",Ee],["__file","/app/app/javascript/dashboard/components-next/HelpCenter/Pages/CategoryPage/CategoryList.vue"]]),Ae=[{id:1,name:"Getting Started",icon:"ðŸš€",description:"Quick guides to help new users onboard.",slug:"getting-started",meta:{articles_count:5}},{id:2,name:"Advanced Features",icon:"ðŸ’¡",description:"Explore advanced features for power users.",slug:"advanced-features",meta:{articles_count:8}},{id:3,name:"FAQs",icon:"â“",description:"Commonly asked questions and helpful answers.",slug:"faqs",meta:{articles_count:3}},{id:4,name:"Troubleshooting",icon:"ðŸ› ï¸",description:"Resolve common issues with step-by-step guidance.",slug:"troubleshooting",meta:{articles_count:6}},{id:5,name:"Community Guidelines",icon:"ðŸ‘¥",description:"Rules and practices for community engagement.",slug:"community-guidelines",meta:{articles_count:2}},{id:6,name:"Account Management",icon:"ðŸ”‘",description:"Manage your account and settings efficiently.",slug:"account-management",meta:{articles_count:7}},{id:7,name:"Security Tips",icon:"ðŸ”’",description:"Best practices for securing your account.",slug:"security-tips",meta:{articles_count:4}},{id:8,name:"Integrations",icon:"ðŸ”—",description:"Connect to third-party services and tools easily.",slug:"integrations",meta:{articles_count:9}},{id:9,name:"Billing & Payments",icon:"ðŸ’³",description:"Manage your billing and payment details seamlessly.",slug:"billing-payments",meta:{articles_count:5}},{id:10,name:"Customization",icon:"ðŸŽ¨",description:"Personalize and customize your user experience.",slug:"customization",meta:{articles_count:7}},{id:11,name:"Notifications",icon:"ðŸ””",description:"Adjust your notification settings and preferences.",slug:"notifications",meta:{articles_count:3}},{id:12,name:"Privacy",icon:"ðŸ›¡ï¸",description:"Understand how your data is collected and used.",slug:"privacy",meta:{articles_count:2}},{id:13,name:"Mobile App",icon:"ðŸ“±",description:"Guides for using the mobile app effectively.",slug:"mobile-app",meta:{articles_count:6}},{id:14,name:"Beta Features",icon:"ðŸ§ª",description:"Learn about new experimental features in beta.",slug:"beta-features",meta:{articles_count:4}}],Se={__name:"CategoryEmptyState",props:{title:{type:String,default:""},subtitle:{type:String,default:""}},setup(p,{expose:o}){o();const a={EmptyStateLayout:oe,CategoryCard:J,get categoryContent(){return Ae}};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},ve={class:"grid grid-cols-2 gap-4 p-px"},Te={class:"space-y-4"},be={class:"space-y-4"};function Pe(p,o,a,e,s,r){return g(),y(e.EmptyStateLayout,{title:a.title,subtitle:a.subtitle},{"empty-state-item":R(()=>[A("div",ve,[A("div",Te,[(g(!0),x(q,null,U(e.categoryContent,t=>(g(),y(e.CategoryCard,{id:t.id,key:t.id,title:t.name,icon:t.icon,description:t.description,"articles-count":t.meta.articles_count||0,slug:t.slug},null,8,["id","title","icon","description","articles-count","slug"]))),128))]),A("div",be,[(g(!0),x(q,null,U(e.categoryContent.reverse(),t=>(g(),y(e.CategoryCard,{id:t.id,key:t.id,title:t.name,icon:t.icon,description:t.description,"articles-count":t.meta.articles_count||0,slug:t.slug},null,8,["id","title","icon","description","articles-count","slug"]))),128))])])]),_:1},8,["title","subtitle"])}const Re=I(Se,[["render",Pe],["__file","/app/app/javascript/dashboard/components-next/HelpCenter/EmptyState/Category/CategoryEmptyState.vue"]]),Le={__name:"EditCategoryDialog",props:{selectedCategory:{type:Object,default:()=>({})},allowedLocales:{type:Array,default:()=>[]}},setup(p,{expose:o}){const a=p,{t:e}=D(),s=O(),r=G(),t=Q(),n=L(null),l=L(null),f=u(()=>{var S,k;const c=(S=a.selectedCategory)==null?void 0:S.id;return c?(k=t["categories/uiFlags"].value(c))==null?void 0:k.isUpdating:!1}),_=u(()=>{if(!l.value)return!1;const{isSubmitDisabled:c}=l.value;return c}),C=u(()=>a.allowedLocales.find(c=>c.code===r.params.locale)),b=u(()=>{var c;return((c=C.value)==null?void 0:c.name)??""}),T=u(()=>{var c;return((c=C.value)==null?void 0:c.code)??""}),d=async()=>{if(!l.value)return;const{state:c}=l.value,{id:S,name:k,slug:M,icon:i,description:E}=c,v={name:k,icon:i,slug:M,description:E};v.id=S;try{const h={portalSlug:r.params.portalSlug,categoryObj:v,categoryId:S};await s.dispatch("categories/update",h);const N=e("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.EDIT.API.SUCCESS_MESSAGE");w(N),n.value.close();const F=j.EDIT_CATEGORY;Y(F,{hasDescription:!!E})}catch(h){const N=(h==null?void 0:h.message)||e("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.EDIT.API.ERROR_MESSAGE");w(N)}};o({dialogRef:n});const m={props:a,t:e,store:s,route:r,getters:t,dialogRef:n,categoryFormRef:l,isUpdatingCategory:f,isInvalidForm:_,activeLocale:C,activeLocaleName:b,activeLocaleCode:T,onUpdateCategory:d,ref:L,computed:u,get useI18n(){return D},get useStore(){return O},get useStoreGetters(){return Q},get useAlert(){return w},get useTrack(){return Y},get useRoute(){return G},get PORTALS_EVENTS(){return j},Dialog:re,CategoryForm:ce};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}};function we(p,o,a,e,s,r){return g(),y(e.Dialog,{ref:"dialogRef",type:"edit",title:e.t("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.HEADER.EDIT"),description:e.t("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.HEADER.DESCRIPTION"),"is-loading":e.isUpdatingCategory,"disable-confirm-button":e.isUpdatingCategory||e.isInvalidForm,onConfirm:e.onUpdateCategory},{default:R(()=>[H(e.CategoryForm,{ref:"categoryFormRef",mode:"edit","selected-category":a.selectedCategory,"active-locale-code":e.activeLocaleCode,"portal-name":e.route.params.portalSlug,"active-locale-name":e.activeLocaleName,"show-action-buttons":!1},null,8,["selected-category","active-locale-code","portal-name","active-locale-name"])]),_:1},8,["title","description","is-loading","disable-confirm-button"])}const xe=I(Le,[["render",we],["__file","/app/app/javascript/dashboard/components-next/HelpCenter/Pages/CategoryPage/EditCategoryDialog.vue"]]),Ge={__name:"CategoriesPage",props:{categories:{type:Array,required:!0},isFetching:{type:Boolean,required:!1},allowedLocales:{type:Array,required:!0}},emits:["fetchCategories"],setup(p,{expose:o,emit:a}){o();const e=p,s=a,r=G(),t=V(),n=O(),{t:l}=D(),f=L(null),_=L(null),C=P("portals/isSwitchingPortal"),b=u(()=>e.isFetching||C.value),T=u(()=>{var i;return((i=e.categories)==null?void 0:i.length)>0}),d=(i,E)=>{const{accountId:v,portalSlug:h,locale:N}=r.params,F={accountId:v,portalSlug:h,locale:N};t.push({name:E,params:{...F,...i,categorySlug:i.categorySlug}})},m=i=>{d({categorySlug:i},"portals_categories_articles_index")},c=i=>{d({locale:i},"portals_categories_index"),s("fetchCategories",i)};async function S(i){var E;try{await n.dispatch("categories/delete",{portalSlug:r.params.portalSlug,categoryId:i.id}),Y(j.DELETE_CATEGORY,{hasArticles:((E=i==null?void 0:i.meta)==null?void 0:E.articles_count)>0}),w(l("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.DELETE.API.SUCCESS_MESSAGE"))}catch(v){w(v.message||l("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.DELETE.API.ERROR_MESSAGE"))}}const M={props:e,emit:s,route:r,router:t,store:n,t:l,editCategoryDialog:f,selectedCategory:_,isSwitchingPortal:C,isLoading:b,hasCategories:T,updateRoute:d,openCategoryArticles:m,handleLocaleChange:c,deleteCategory:S,handleAction:({action:i,id:E,category:v})=>{i==="edit"&&(_.value=e.categories.find(h=>h.id===E),f.value.dialogRef.open()),i==="delete"&&S(v)},ref:L,computed:u,get useRoute(){return G},get useRouter(){return V},get useI18n(){return D},get useStore(){return O},get useMapGetter(){return P},get useAlert(){return w},get useTrack(){return Y},get PORTALS_EVENTS(){return j},HelpCenterLayout:ne,CategoryList:he,CategoryHeaderControls:le,CategoryEmptyState:Re,EditCategoryDialog:xe,Spinner:se};return Object.defineProperty(M,"__isScriptSetup",{enumerable:!1,value:!0}),M}},De={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"};function Oe(p,o,a,e,s,r){return g(),y(e.HelpCenterLayout,{"show-pagination-footer":!1},{"header-actions":R(()=>[H(e.CategoryHeaderControls,{categories:a.categories,"is-category-articles":!1,"allowed-locales":a.allowedLocales,onLocaleChange:e.handleLocaleChange},null,8,["categories","allowed-locales"])]),content:R(()=>[e.isLoading?(g(),x("div",De,[H(e.Spinner)])):e.hasCategories?(g(),y(e.CategoryList,{key:1,categories:a.categories,onClick:e.openCategoryArticles,onAction:e.handleAction},null,8,["categories"])):(g(),y(e.CategoryEmptyState,{key:2,class:"pt-14",title:e.t("HELP_CENTER.CATEGORY_PAGE.CATEGORY_EMPTY_STATE.TITLE"),subtitle:e.t("HELP_CENTER.CATEGORY_PAGE.CATEGORY_EMPTY_STATE.SUBTITLE")},null,8,["title","subtitle"]))]),default:R(()=>[H(e.EditCategoryDialog,{ref:"editCategoryDialog","allowed-locales":a.allowedLocales,"selected-category":e.selectedCategory},null,8,["allowed-locales","selected-category"])]),_:1})}const Ie=I(Ge,[["render",Oe],["__file","/app/app/javascript/dashboard/components-next/HelpCenter/Pages/CategoryPage/CategoriesPage.vue"]]),ke={__name:"PortalsCategoriesIndexPage",setup(p,{expose:o}){o();const a=O(),e=G(),s=P("categories/allCategories"),r=u(()=>e.params.portalSlug),t=P("portals/portalBySlug"),n=P("categories/isFetching"),l=u(()=>t.value(r.value)),f=u(()=>{if(!l.value)return[];const{allowed_locales:d}=l.value.config;return d.map(m=>({id:m.code,name:W[m.code],code:m.code}))}),_=async d=>{await a.dispatch("categories/index",{portalSlug:r.value,locale:d})},C=async d=>a.dispatch("portals/show",{portalSlug:r.value,locale:d}),b=async d=>{await _(d),await C(d)};z(()=>{_(e.params.locale)});const T={store:a,route:e,categories:s,selectedPortalSlug:r,getPortalBySlug:t,isFetching:n,portal:l,allowedLocales:f,fetchCategoriesByPortalSlugAndLocale:_,updateMeta:C,fetchCategories:b,computed:u,onMounted:z,get useRoute(){return G},get useMapGetter(){return P},get useStore(){return O},get allLocales(){return W},CategoriesPage:Ie};return Object.defineProperty(T,"__isScriptSetup",{enumerable:!1,value:!0}),T}};function Ne(p,o,a,e,s,r){return g(),y(e.CategoriesPage,{categories:e.categories,"is-fetching":e.isFetching,"allowed-locales":e.allowedLocales,onFetchCategories:e.fetchCategories},null,8,["categories","is-fetching","allowed-locales"])}const it=I(ke,[["render",Ne],["__file","/app/app/javascript/dashboard/routes/dashboard/helpcenter/pages/PortalsCategoriesIndexPage.vue"]]);export{it as default};
