const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/EmojiInput-8IkZz3o1.js","assets/typing-Dhk99rRl.js","assets/Validators-0vUS0OnA.js","assets/_plugin-vue_export-helper-n_vHXFlc.js","assets/useBranding-C51QoB-t.js","assets/utils.esm-CMazHLgs.js","assets/useBranding-Cl2RTTqu.css","assets/index-DN3rM4CW.js","assets/_commonjsHelpers-BosuxZz1.js","assets/index-DzK6ljgP.js","assets/index-UYK3fwMr.js","assets/vue-dompurify-html-CEAHYyWB.js","assets/module-WEXc1Yw_.js","assets/Icon-D1o1yyYK.js","assets/EmojiInput-BnGLGF-b.css"])))=>i.map(i=>d[i]);
import{_ as W,n as T,o as C,p as s,t as D,e as i,g as H,l as w,a as I,c as r,r as x,W as K,w as V,K as X,ac as J}from"./_plugin-vue_export-helper-n_vHXFlc.js";import{u as N,ah as Q}from"./Validators-0vUS0OnA.js";import{u as h,a as U,c as Z,b as $}from"./useBranding-C51QoB-t.js";import{bT as ee,bM as le,bU as F}from"./DashboardIcon-CCM-1oGA.js";import{u as te,r as z,m as ae,B as re}from"./index-UYK3fwMr.js";import{m as ne,p as se,c as ie,B as ce}from"./dashboard-DaT-cgYc.js";import{a as oe,u as q}from"./index-CQMLlWJA.js";import{_ as de}from"./index-DzK6ljgP.js";const ue={__name:"CategoryForm",props:{mode:{type:String,required:!0,validator:d=>["edit","create"].includes(d)},selectedCategory:{type:Object,default:()=>({})},activeLocaleCode:{type:String,default:""},showActionButtons:{type:Boolean,default:!0},portalName:{type:String,default:""},activeLocaleName:{type:String,default:""}},emits:["submit","cancel"],setup(d,{expose:t,emit:l}){const e=d,u=l,c=J(()=>de(()=>import("./EmojiInput-8IkZz3o1.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]))),{t:o}=h(),O=N(),f=U(),R=Z("categories/isCreating"),Y=r(()=>{var y,k;const g=(y=e.selectedCategory)==null?void 0:y.id;return g?(k=f["categories/uiFlags"].value(g))==null?void 0:k.isUpdating:!1}),v=x(!1),n=K({id:"",name:"",icon:"",slug:"",description:"",locale:""}),p=r(()=>e.mode==="edit"),G={name:{required:z,minLength:ae(1)},slug:{required:z}},m=te(G,n),L=r(()=>m.value.$invalid),A=r(()=>m.value.name.$error?o("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.FORM.NAME.ERROR"):""),_=r(()=>m.value.slug.$error?o("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.FORM.SLUG.ERROR"):""),E=r(()=>{const{portalSlug:g,locale:y}=O.params;return o("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.FORM.SLUG.HELP_TEXT",{portalSlug:g,localeCode:y,categorySlug:n.slug})}),b=g=>{n.icon=g,v.value=!1},P=async()=>{await m.value.$validate()&&u("submit",{...n})},B=()=>{u("cancel")};V(()=>n.name,()=>{p.value||(n.slug=ee(n.name))}),V(()=>e.selectedCategory,g=>{if(e.mode==="edit"&&g){const{id:y,name:k,icon:j,slug:a,description:S}=g;Object.assign(n,{id:y,name:k,icon:j,slug:a,description:S})}},{immediate:!0}),X(()=>{e.mode==="create"&&(n.locale=e.activeLocaleCode)}),t({state:n,isSubmitDisabled:L});const M={props:e,emit:u,EmojiInput:c,t:o,route:O,getters:f,isCreating:R,isUpdatingCategory:Y,isEmojiPickerOpen:v,state:n,isEditMode:p,rules:G,v$:m,isSubmitDisabled:L,nameError:A,slugError:_,slugHelpText:E,onClickInsertEmoji:b,handleSubmit:P,handleCancel:B,reactive:K,ref:x,watch:V,computed:r,defineAsyncComponent:J,onMounted:X,get useI18n(){return h},get OnClickOutside(){return le},get useStoreGetters(){return U},get useMapGetter(){return Z},get useRoute(){return N},get useVuelidate(){return te},get required(){return z},get minLength(){return ae},get convertToCategorySlug(){return ee},Input:se,TextArea:ne,Button:re};return Object.defineProperty(M,"__isScriptSetup",{enumerable:!1,value:!0}),M}},me={class:"flex flex-col gap-4"},Ee={class:"flex items-center justify-start gap-8 px-4 py-2 border rounded-lg border-n-strong"},ge={class:"flex flex-col items-start w-full gap-2 py-2"},Ce={class:"text-sm font-medium text-n-slate-11"},_e={class:"text-sm text-n-slate-12"},Oe={class:"flex flex-col w-full gap-2 py-2"},Ae={class:"text-sm font-medium text-n-slate-11"},fe=["title"],Re={class:"flex flex-col gap-4"},ve={class:"relative"},pe={key:0,class:"flex items-center justify-between w-full gap-3"};function ye(d,t,l,e,u,c){return C(),T("div",me,[s("div",Ee,[s("div",ge,[s("span",Ce,D(e.t("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.HEADER.PORTAL")),1),s("span",_e,D(l.portalName),1)]),t[5]||(t[5]=s("div",{class:"justify-start w-px h-10 bg-n-strong"},null,-1)),s("div",Oe,[s("span",Ae,D(e.t("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.HEADER.LOCALE")),1),s("span",{title:`${l.activeLocaleName} (${l.activeLocaleCode})`,class:"text-sm line-clamp-1 text-n-slate-12"},D(`${l.activeLocaleName} (${l.activeLocaleCode})`),9,fe)])]),s("div",Re,[s("div",ve,[i(e.Input,{modelValue:e.state.name,"onUpdate:modelValue":t[2]||(t[2]=o=>e.state.name=o),label:e.t("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.FORM.NAME.LABEL"),placeholder:e.t("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.FORM.NAME.PLACEHOLDER"),message:e.nameError,"message-type":e.nameError?"error":"info","custom-input-class":"!h-10 ltr:!pl-12 rtl:!pr-12"},{prefix:w(()=>[i(e.OnClickOutside,{onTrigger:t[1]||(t[1]=o=>e.isEmojiPickerOpen=!1)},{default:w(()=>[i(e.Button,{label:e.state.icon,color:"slate",size:"sm",type:"button",icon:e.state.icon?"":"i-lucide-smile-plus",class:"!h-[2.4rem] !w-[2.375rem] absolute top-[1.94rem] !outline-none !rounded-[0.438rem] border-0 ltr:left-px rtl:right-px ltr:!rounded-r-none rtl:!rounded-l-none",onClick:t[0]||(t[0]=o=>e.isEmojiPickerOpen=!e.isEmojiPickerOpen)},null,8,["label","icon"]),e.isEmojiPickerOpen?(C(),I(e.EmojiInput,{key:0,class:"left-0 top-16","show-remove-button":"","on-click":e.onClickInsertEmoji})):H("v-if",!0)]),_:1})]),_:1},8,["modelValue","label","placeholder","message","message-type"])]),i(e.Input,{modelValue:e.state.slug,"onUpdate:modelValue":t[3]||(t[3]=o=>e.state.slug=o),label:e.t("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.FORM.SLUG.LABEL"),placeholder:e.t("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.FORM.SLUG.PLACEHOLDER"),disabled:e.isEditMode,message:e.slugError?e.slugError:e.slugHelpText,"message-type":e.slugError?"error":"info","custom-input-class":"!h-10"},null,8,["modelValue","label","placeholder","disabled","message","message-type"]),i(e.TextArea,{modelValue:e.state.description,"onUpdate:modelValue":t[4]||(t[4]=o=>e.state.description=o),label:e.t("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.FORM.DESCRIPTION.LABEL"),placeholder:e.t("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.FORM.DESCRIPTION.PLACEHOLDER"),"show-character-count":""},null,8,["modelValue","label","placeholder"]),l.showActionButtons?(C(),T("div",pe,[i(e.Button,{variant:"faded",color:"slate",label:e.t("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.BUTTONS.CANCEL"),class:"w-full bg-n-alpha-2 text-n-blue-text hover:bg-n-alpha-3",onClick:e.handleCancel},null,8,["label"]),i(e.Button,{label:e.t(`HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.BUTTONS.${l.mode.toUpperCase()}`),class:"w-full",disabled:e.isSubmitDisabled||e.isCreating||e.isUpdatingCategory,"is-loading":e.isCreating||e.isUpdatingCategory,onClick:e.handleSubmit},null,8,["label","disabled","is-loading"])])):H("v-if",!0)])])}const Te=W(ue,[["render",ye],["__scopeId","data-v-1c396259"],["__file","/app/app/javascript/dashboard/components-next/HelpCenter/Pages/CategoryPage/CategoryForm.vue"]]),Ge={__name:"CategoryDialog",props:{mode:{type:String,default:"edit",validator:d=>["edit","create"].includes(d)},selectedCategory:{type:Object,default:()=>({})},portalName:{type:String,default:""},activeLocaleName:{type:String,default:""},activeLocaleCode:{type:String,default:""}},emits:["close"],setup(d,{expose:t,emit:l}){t();const e=d,u=l,c=$(),{t:o}=h(),O=N(),R={props:e,emit:u,store:c,t:o,route:O,handleCategory:async Y=>{const{id:v,name:n,slug:p,icon:G,description:m,locale:L}=Y,A={name:n,icon:G,slug:p,description:m};e.mode==="create"?A.locale=L:A.id=v;try{const _=e.mode==="edit"?"update":"create",E={portalSlug:O.params.portalSlug,categoryObj:A};_==="update"&&(E.categoryId=v),await c.dispatch(`categories/${_}`,E);const b=o(`HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.${e.mode.toUpperCase()}.API.SUCCESS_MESSAGE`);q(b);const P=e.mode==="edit"?F.EDIT_CATEGORY:F.CREATE_CATEGORY;oe(P,e.mode==="create"?{hasDescription:!!m}:void 0),u("close")}catch(_){const E=(_==null?void 0:_.message)||o(`HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.${e.mode.toUpperCase()}.API.ERROR_MESSAGE`);q(E)}},get useI18n(){return h},get useStore(){return $},get useAlert(){return q},get useTrack(){return oe},get useRoute(){return N},get PORTALS_EVENTS(){return F},CategoryForm:Te};return Object.defineProperty(R,"__isScriptSetup",{enumerable:!1,value:!0}),R}},Le={class:"w-[25rem] absolute top-10 ltr:right-0 rtl:left-0 bg-n-alpha-3 backdrop-blur-[100px] p-6 rounded-xl border border-n-weak shadow-md flex flex-col gap-6"},be={class:"text-base font-medium text-n-slate-12"};function Pe(d,t,l,e,u,c){return C(),T("div",Le,[s("h3",be,D(e.t(`HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.HEADER.${l.mode.toUpperCase()}`)),1),i(e.CategoryForm,{mode:l.mode,"selected-category":l.selectedCategory,"active-locale-code":l.activeLocaleCode,"portal-name":l.portalName,"active-locale-name":l.activeLocaleName,onSubmit:e.handleCategory,onCancel:t[0]||(t[0]=o=>e.emit("close"))},null,8,["mode","selected-category","active-locale-code","portal-name","active-locale-name"])])}const Se=W(Ge,[["render",Pe],["__file","/app/app/javascript/dashboard/components-next/HelpCenter/Pages/CategoryPage/CategoryDialog.vue"]]),De={__name:"CategoryHeaderControls",props:{categories:{type:Array,default:()=>[]},allowedLocales:{type:Array,default:()=>[]},hasSelectedCategory:{type:Boolean,default:!1}},emits:["localeChange"],setup(d,{expose:t,emit:l}){t();const e=d,u=l,c=N(),o=Q(),O=U(),{t:f}=h(),R=x(!1),Y=x(!1),v=x(!1),n=r(()=>c.params.portalSlug),p=r(()=>{const a=n.value;return a?O["portals/portalBySlug"].value(a):O["portals/allPortals"].value[0]}),G=r(()=>{var a;return(a=p.value)==null?void 0:a.name}),m=r(()=>e.allowedLocales.find(a=>a.code===c.params.locale)),L=r(()=>{var a;return((a=m.value)==null?void 0:a.name)??""}),A=r(()=>{var a;return((a=m.value)==null?void 0:a.code)??""}),_=r(()=>e.allowedLocales.map(a=>({label:a.name,value:a.code,action:"filter"}))),E=r(()=>e.categories.find(a=>a.slug===c.params.categorySlug)),b=r(()=>{var a;return(a=E.value)==null?void 0:a.name}),P=r(()=>{var a,S;return((S=(a=E.value)==null?void 0:a.meta)==null?void 0:S.articles_count)||0}),B=r(()=>{var a;return(a=E.value)==null?void 0:a.icon}),M=r(()=>{var a;return(a=e.categories)==null?void 0:a.length}),g=r(()=>{const a=[{label:f("HELP_CENTER.CATEGORY_PAGE.CATEGORY_HEADER.BREADCRUMB.CATEGORY_LOCALE",{localeCode:A.value}),link:"#"}];return E.value&&a.push({label:f("HELP_CENTER.CATEGORY_PAGE.CATEGORY_HEADER.BREADCRUMB.ACTIVE_CATEGORY",{categoryName:b.value,categoryCount:P.value}),emoji:B.value}),a}),j={props:e,emit:u,route:c,router:o,getters:O,t:f,isLocaleMenuOpen:R,isCreateCategoryDialogOpen:Y,isEditCategoryDialogOpen:v,currentPortalSlug:n,currentPortal:p,currentPortalName:G,activeLocale:m,activeLocaleName:L,activeLocaleCode:A,localeMenuItems:_,selectedCategory:E,selectedCategoryName:b,selectedCategoryCount:P,selectedCategoryEmoji:B,categoriesCount:M,breadcrumbItems:g,handleLocaleAction:({value:a})=>{u("localeChange",a),R.value=!1},handleBreadcrumbClick:()=>{const{categorySlug:a,...S}=c.params;o.push({name:"portals_categories_index",params:S})},ref:x,computed:r,get useRoute(){return N},get useRouter(){return Q},get useI18n(){return h},get OnClickOutside(){return le},get useStoreGetters(){return U},Button:re,Breadcrumb:ce,DropdownMenu:ie,CategoryDialog:Se};return Object.defineProperty(j,"__isScriptSetup",{enumerable:!1,value:!0}),j}},xe={class:"flex items-center justify-between w-full"},Ne={key:0,class:"flex items-center gap-4"},he={class:"relative group"},Ye={class:"min-w-0 text-sm font-medium truncate text-n-slate-12"},ke={key:2,class:"relative"},Ie={key:3,class:"relative"};function He(d,t,l,e,u,c){return C(),T("div",xe,[l.hasSelectedCategory?(C(),I(e.Breadcrumb,{key:1,items:e.breadcrumbItems,onClick:e.handleBreadcrumbClick},null,8,["items"])):(C(),T("div",Ne,[s("div",he,[i(e.OnClickOutside,{onTrigger:t[1]||(t[1]=o=>e.isLocaleMenuOpen=!1)},{default:w(()=>[i(e.Button,{label:e.activeLocaleName,size:"sm","trailing-icon":"",icon:"i-lucide-chevron-down",color:"slate",onClick:t[0]||(t[0]=o=>e.isLocaleMenuOpen=!e.isLocaleMenuOpen)},null,8,["label"]),e.isLocaleMenuOpen?(C(),I(e.DropdownMenu,{key:0,"menu-items":e.localeMenuItems,"show-search":"",class:"left-0 w-40 mt-2 overflow-y-auto xl:right-0 top-full max-h-60",onAction:e.handleLocaleAction},null,8,["menu-items"])):H("v-if",!0)]),_:1})]),t[8]||(t[8]=s("div",{class:"w-px h-3.5 rounded my-auto bg-n-weak"},null,-1)),s("span",Ye,D(e.t("HELP_CENTER.CATEGORY_PAGE.CATEGORY_HEADER.CATEGORIES_COUNT",{n:e.categoriesCount})),1)])),l.hasSelectedCategory?(C(),T("div",Ie,[i(e.OnClickOutside,{onTrigger:t[7]||(t[7]=o=>e.isEditCategoryDialogOpen=!1)},{default:w(()=>[i(e.Button,{label:e.t("HELP_CENTER.CATEGORY_PAGE.CATEGORY_HEADER.EDIT_CATEGORY"),color:"slate",size:"sm",onClick:t[5]||(t[5]=o=>e.isEditCategoryDialogOpen=!e.isEditCategoryDialogOpen)},null,8,["label"]),e.isEditCategoryDialogOpen?(C(),I(e.CategoryDialog,{key:0,"selected-category":e.selectedCategory,"portal-name":e.currentPortalName,"active-locale-name":e.activeLocaleName,"active-locale-code":e.activeLocaleCode,onClose:t[6]||(t[6]=o=>e.isEditCategoryDialogOpen=!1)},null,8,["selected-category","portal-name","active-locale-name","active-locale-code"])):H("v-if",!0)]),_:1})])):(C(),T("div",ke,[i(e.OnClickOutside,{onTrigger:t[4]||(t[4]=o=>e.isCreateCategoryDialogOpen=!1)},{default:w(()=>[i(e.Button,{label:e.t("HELP_CENTER.CATEGORY_PAGE.CATEGORY_HEADER.NEW_CATEGORY"),icon:"i-lucide-plus",size:"sm",onClick:t[2]||(t[2]=o=>e.isCreateCategoryDialogOpen=!e.isCreateCategoryDialogOpen)},null,8,["label"]),e.isCreateCategoryDialogOpen?(C(),I(e.CategoryDialog,{key:0,mode:"create","portal-name":e.currentPortalName,"active-locale-name":e.activeLocaleName,"active-locale-code":e.activeLocaleCode,onClose:t[3]||(t[3]=o=>e.isCreateCategoryDialogOpen=!1)},null,8,["portal-name","active-locale-name","active-locale-code"])):H("v-if",!0)]),_:1})]))])}const qe=W(De,[["render",He],["__file","/app/app/javascript/dashboard/components-next/HelpCenter/Pages/CategoryPage/CategoryHeaderControls.vue"]]);export{qe as C,Te as a};
