import{_ as b,a as w,o as B,r as o,c as E}from"./_plugin-vue_export-helper-n_vHXFlc.js";import{u as S,ah as h}from"./Validators-0vUS0OnA.js";import{b as T,u as R,c as g}from"./useBranding-C51QoB-t.js";import{a as y,u as P}from"./index-CQMLlWJA.js";import{bU as C}from"./DashboardIcon-CCM-1oGA.js";import{A as x}from"./ArticleEditor-Du88cCHc.js";import"./index-DN3rM4CW.js";import"./_commonjsHelpers-BosuxZz1.js";import"./utils.esm-CMazHLgs.js";import"./js.cookie-Cz0CWeBA.js";import"./index-UYK3fwMr.js";import"./Icon-D1o1yyYK.js";import"./dashboard-DaT-cgYc.js";import"./index-DzK6ljgP.js";import"./typing-Dhk99rRl.js";import"./vue-dompurify-html-CEAHYyWB.js";import"./useKeyboardNavigableList-B1kK16iE.js";import"./helper-BVTgYTlr.js";import"./module-WEXc1Yw_.js";import"./BarChart-BLu1KVZQ.js";import"./constants-lVAyZKq6.js";import"./IframeLoader-DfGHvGaO.js";import"./HelpCenterLayout-CP5dHFgN.js";const L={__name:"PortalsArticlesNewPage",setup(N,{expose:_}){_();const s=S(),e=h(),l=T(),{t:i}=R(),{portalSlug:n}=s.params,u=o(null),p=o(null),A=g("getCurrentUserID"),v=g("categories/allCategories"),f=E(()=>{var t;return((t=v.value[0])==null?void 0:t.id)||null}),a=o({}),m=o(!1),k=o(!1),I={route:s,router:e,store:l,t:i,portalSlug:n,selectedAuthorId:u,selectedCategoryId:p,currentUserId:A,categories:v,categoryId:f,article:a,isUpdating:m,isSaved:k,setAuthorId:t=>{u.value=t},setCategoryId:t=>{p.value=t},createNewArticle:async({title:t,content:c})=>{if(t&&(a.value.title=t),c&&(a.value.content=c),!(!a.value.title||!a.value.content)){m.value=!0;try{const{locale:r}=s.params,d=await l.dispatch("articles/create",{portalSlug:n,content:a.value.content,title:a.value.title,locale:r,authorId:u.value||A.value,categoryId:p.value||f.value});y(C.CREATE_ARTICLE,{locale:r}),e.replace({name:"portals_articles_edit",params:{articleSlug:d,portalSlug:n,locale:r}})}catch(r){const d=(r==null?void 0:r.message)||i("HELP_CENTER.EDIT_ARTICLE_PAGE.API.ERROR");P(d)}finally{m.value=!1}}},goBackToArticles:()=>{const{tab:t,categorySlug:c,locale:r}=s.params;e.push({name:"portals_articles_index",params:{tab:t,categorySlug:c,locale:r}})},ref:o,computed:E,get useRoute(){return S},get useRouter(){return h},get useI18n(){return R},get useAlert(){return P},get useTrack(){return y},get useStore(){return T},get useMapGetter(){return g},get PORTALS_EVENTS(){return C},ArticleEditor:x};return Object.defineProperty(I,"__isScriptSetup",{enumerable:!1,value:!0}),I}};function U(N,_,s,e,l,i){return B(),w(e.ArticleEditor,{article:e.article,"is-updating":e.isUpdating,"is-saved":e.isSaved,onSaveArticle:e.createNewArticle,onGoBack:e.goBackToArticles,onSetAuthor:e.setAuthorId,onSetCategory:e.setCategoryId},null,8,["article","is-updating","is-saved"])}const ne=b(L,[["render",U],["__file","/app/app/javascript/dashboard/routes/dashboard/helpcenter/pages/PortalsArticlesNewPage.vue"]]);export{ne as default};
